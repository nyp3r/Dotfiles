"use strict";(globalThis.webpackChunk_dashlane_leeloo=globalThis.webpackChunk_dashlane_leeloo||[]).push([[316],{82994:(e,t,i)=>{i.d(t,{s:()=>_}),i(96832);var n=i(62264),s=i(8180),o=i(51031),a=i(14877),r=i(88203);let l=function(e){return e.LastAdmin="LastAdmin",e.GroupSharing="GroupSharing",e.CollectionSharing="CollectionSharing",e.Generic="Generic",e}({});var c=i(78956),d=i(24731),u=i(36351);const m=({reason:e,translations:t,goToSharingAccess:i,closeCantDeleteDialog:n})=>{const{translate:s}=(0,r.Z)(),o=((e,t)=>{const{groupSharingTitle:i,lastAdminTitle:n,collectionSharingTitle:s,genericErrorTitle:o}=e;switch(t){case l.LastAdmin:return n;case l.GroupSharing:return i;case l.CollectionSharing:return s;case l.Generic:return o;default:return(0,d.U)(t)}})(t,e),a=((e,t)=>{const{groupSharingSubtitle:i,lastAdminSubtitle:n,collectionSharingSubtitle:s,genericErrorSubtitle:o}=e;switch(t){case l.LastAdmin:return n;case l.GroupSharing:return i;case l.CollectionSharing:return s;case l.Generic:return o;default:return(0,d.U)(t)}})(t,e);return(0,u.tZ)(c.Vq,{isOpen:!0,onClose:n,title:null!=o?o:"",closeActionLabel:s("_common_dialog_dismiss_button"),actions:e===l.LastAdmin||l.GroupSharing||l.CollectionSharing?{primary:{children:t.lastAdminActionLabel,onClick:()=>{i(),n()}}}:void 0,children:a})};var g=i(37527);const p=({closeConfirmDeleteDialog:e,onDeleteConfirm:t,translations:i})=>{const{translate:n}=(0,r.Z)(),{confirmDeleteSubtitle:s,confirmDeleteTitle:o,confirmDeleteDismiss:a,confirmDeleteConfirm:l}=i;return(0,u.tZ)(c.Vq,{title:o,onClose:e,isOpen:!0,dialogClassName:g.Ht,closeActionLabel:n("_common_dialog_dismiss_button"),isDestructive:!0,actions:{primary:{children:l,onClick:t,id:"deletion-dialog-confirm-button"},secondary:{children:a,onClick:e,autoFocus:!0,id:"deletion-dialog-dismiss-button"}},children:s})},_=({closeConfirmDeleteDialog:e,goToSharingAccess:t,isVisible:i,itemId:c,onDeletionSuccess:d,sharingStatus:g,translations:_,vaultItemType:D,isShared:h,isSharedViaUserGroup:S,isItemInCollection:f,isLastAdmin:I})=>{const{showToast:T}=(0,n.p)(),{translate:b}=(0,r.Z)(),{deleteVaultItem:C}=(0,s.u)(a.L);if(!i)return null;let E;return(h||g?.isShared)&&(S&&(E=l.GroupSharing),I&&(E=l.LastAdmin),f&&(E=l.CollectionSharing)),E&&t?(0,u.tZ)(m,{reason:E,translations:_,goToSharingAccess:t,closeCantDeleteDialog:e}):(0,u.tZ)(p,{closeConfirmDeleteDialog:e,onDeleteConfirm:async()=>{try{var e;(await C({id:c,vaultItemType:D})).tag===o.rq.Success?(T({description:null!=(e=_.deleteSuccessToast)?e:b("webapp_personal_info_edition_delete_success_toast")}),d()):T({description:b("_common_generic_error"),mood:"danger",isManualDismiss:!0})}catch(e){T({description:b("_common_generic_error"),mood:"danger",isManualDismiss:!0})}},translations:_})}},34383:(e,t,i)=>{i.r(t),i.d(t,{Connected:()=>u}),i(96832);var n=i(24507),s=i(14877),o=i(39431),a=i(44105),r=i(16390),l=i(86816),c=i(36351);const d=(0,l.Y)({getDeleteTitle:e=>e("webapp_personal_info_edition_delete_title_address"),getItemTypeDescription:e=>e("webapp_personal_info_edition_header_address_description"),getTitle:e=>{var t;return null!=(t=e.itemName)?t:""},vaultItemType:o.U.Address,renderForm:(e,t,i,n)=>{const s=a.c[e.globalState.locale.country]||a.c.US,o={...t,localeFormat:t.localeFormat||s};return(0,c.tZ)(r.k,{lee:e,currentValues:o,signalEditedValues:n,ref:i})}}),u=e=>{const t=(0,n.k)(s.L,"query",{vaultItemTypes:[o.U.Address],ids:[`{${e.match.params.uuid}}`]});return(0,c.tZ)(d,{...e,item:t.data?.addressesResult.items[0]})}},86816:(e,t,i)=>{i.d(t,{Y:()=>f});var n=i(96832),s=i(94138),o=i(73704),a=i(39431),r=i(14877),l=i(8180),c=i(14900),d=i(63520),u=i(82994),m=i(92077),g=i(86498),p=i(88203),_=i(45272),D=i(36351);const h={DELETE_CONFIRM:"webapp_personal_info_edition_delete_confirm",DELETE_DISMISS:"webapp_personal_info_edition_delete_dismiss",DELETE_SUBTITLE:"webapp_personal_info_edition_delete_subtitle"},S={[a.U.Address]:"address",[a.U.Company]:"company",[a.U.Email]:"email",[a.U.Identity]:"name",[a.U.Phone]:"phone-number",[a.U.Website]:"website"};function f(e){const{getItemTypeDescription:t,getDeleteTitle:i,getTitle:f,vaultItemType:I,renderForm:T}=e;return({lee:e,item:b,match:C})=>{const E=(0,n.useRef)(null),y=(0,g.V)(),{translate:w}=(0,p.Z)(),{routes:A}=(0,m.Xo)(),{updateVaultItem:L}=(0,l.u)(r.L),[U,V]=(0,n.useState)(!1),[v,Z]=(0,n.useState)(!1);if((0,n.useEffect)((()=>{const e={[a.U.Address]:o.PageView.ItemAddressDetails,[a.U.Company]:o.PageView.ItemCompanyDetails,[a.U.Email]:o.PageView.ItemEmailDetails,[a.U.Identity]:o.PageView.ItemIdentityDetails,[a.U.Phone]:o.PageView.ItemPhoneDetails,[a.U.Website]:o.PageView.ItemWebsiteDetails};(0,_.Nc)(e[I])}),[]),!b)return null;const P=()=>{(0,_.Nc)(o.PageView.ItemPersonalInfoList),(0,m.uX)(A.userPersonalInfo)},G=b?f(b,w):"",k={confirmDeleteConfirm:w(h.DELETE_CONFIRM),confirmDeleteDismiss:w(h.DELETE_DISMISS),confirmDeleteSubtitle:w(h.DELETE_SUBTITLE),confirmDeleteTitle:i(w)};return(0,D.BX)(d.zI,{isUsingNewDesign:!0,isViewingExistingItem:Boolean(C.params?.uuid),itemHasBeenEdited:U,onNavigateOut:P,onSubmit:async()=>{b.id&&Boolean(E.current?.isFormValid())&&(await(async()=>{const e=E.current?.getValues();e&&"success"!==(await L({vaultItemType:I,content:e,id:b.id})).tag&&y.showAlert(w("_common_generic_error"),c.BLW.ERROR)})(),P())},onClickDelete:()=>Z(!0),ignoreCloseOnEscape:v,formId:"edit_personalinfo_panel",header:(0,D.tZ)(d.V9,{icon:(0,D.tZ)(s.A,{type:S[I],size:"xlarge"}),title:G,titleDescription:t(w)}),children:[T(e,b,E,(()=>V(!0))),(0,D.tZ)(u.s,{isVisible:v,itemId:b.id,closeConfirmDeleteDialog:()=>Z(!1),onDeletionSuccess:P,translations:k,vaultItemType:I})]})}}}}]);