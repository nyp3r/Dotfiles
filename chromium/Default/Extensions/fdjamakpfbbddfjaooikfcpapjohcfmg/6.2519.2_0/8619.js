"use strict";(globalThis.webpackChunk_dashlane_leeloo=globalThis.webpackChunk_dashlane_leeloo||[]).push([[8619,4910],{88134:(e,t,a)=>{a.d(t,{t:()=>A});var r=a(96832),i=a(73704),n=a(62264),s=a(8180),l=a(78346),o=a(14877),d=a(39431),c=a(92077),_=a(45272),u=a(88203),p=a(42670),E=a(55752),m=a(63847),I=a(14900),b=a(36351);const L=({formId:e,handleCancel:t,hasDataBeenModified:a,isSubmitting:r})=>{const{translate:i}=(0,u.Z)();return(0,b.BX)(m.k,{sx:{padding:"24px"},as:"footer",justifyContent:"flex-end",flexWrap:"nowrap",children:[a?(0,b.tZ)(I.zxk,{type:"submit",form:e,disabled:r,children:i("webapp_panel_edition_generic_save_changes")}):null,(0,b.tZ)(I.zxk,{sx:{marginLeft:"16px"},nature:"secondary",onClick:t,type:"button",children:i("webapp_panel_edition_generic_cancel_changes")})]})},h="id-add-form",f={GENERIC_ERROR:"_common_generic_error"};function A({children:e,initialValues:t,listRoute:a,reportError:m,countryToKeys:I,header:A,type:S,requiredProperty:C="idNumber"}){const{translate:P}=(0,u.Z)(),{openDialog:g,shouldShowFrozenStateDialog:N}=(0,p.Ub)(),[y,D]=r.useState(!1),[T,R]=r.useState(!1),[w,U]=r.useState(t.country),{createVaultItem:B}=(0,s.u)(o.L),{showToast:Z}=(0,n.p)();r.useEffect((()=>{const e={[d.U.DriversLicense]:i.PageView.ItemDriverLicenceCreate,[d.U.FiscalId]:i.PageView.ItemFiscalStatementCreate,[d.U.IdCard]:i.PageView.ItemIdCardCreate,[d.U.Passport]:i.PageView.ItemPassportCreate,[d.U.SocialSecurityId]:i.PageView.ItemSocialSecurityStatementCreate};(0,_.Nc)(e[S])}),[S]),r.useEffect((()=>{N&&g()}),[N]);const O=()=>{(0,_.Nc)(i.PageView.ItemIdList),(0,c.uX)(a)},v=()=>{Z({description:P(f.GENERIC_ERROR),mood:"danger",isManualDismiss:!0})},x=r.useRef((e=>{if(null!==e){const{dirty:t,isSubmitting:a,values:r}=e;D(t),R(a),U(r.country)}}));return(0,b.BX)(r.Fragment,{children:[A(w),(0,b.tZ)(E.P,{formId:h,formRef:x.current,handleSubmit:async(e,{setSubmitting:t,setFieldError:a})=>{if(!e[C])return a(C,"");try{const a=await B({vaultItemType:S,content:e});(0,l.d6)(a)?(Z({description:P(I(w).success)}),O()):(t(!1),v(),m(new Error("[ids][add] Unable to add id"),a.error?.errorMessage))}catch(e){t(!1),v(),m(e,"[ids][add] Unexpected exception while add id")}},initialValues:t,variant:"add",children:t=>e({values:t})}),(0,b.tZ)(L,{formId:h,handleCancel:()=>{O()},hasDataBeenModified:y,isSubmitting:T})]})}},60398:(e,t,a)=>{a.r(t),a.d(t,{PassportAddPanel:()=>u}),a(96832);var r=a(39431),i=a(88203),n=a(39649),s=a(88134),l=a(66219),o=a(74910),d=a(45417),c=a(36351);const _=()=>({title:"webapp_id_creation_passport_title_default",success:"webapp_id_creation_passport_alert_add_success_default"}),u=({lee:e,listRoute:t})=>{var a;const{translate:u}=(0,i.Z)(),p={idName:"",idNumber:"",expirationDate:"",issueDate:"",country:(0,l.lt)(e.carbon.currentLocation),spaceId:null!=(a=(0,n.B)(e.globalState))?a:"",issuePlace:""};return(0,c.tZ)(s.t,{initialValues:p,listRoute:t,reportError:e.reportError,countryToKeys:_,type:r.U.Passport,header:()=>(0,c.tZ)(o.h,{title:u("webapp_id_creation_passport_title_default"),type:r.U.Passport}),children:({values:e})=>(0,c.tZ)(d.g,{variant:"add",country:e.country})})}},72055:(e,t,a)=>{a.d(t,{a:()=>i});var r=a(30309);const i=new Set([r.cH.AU,r.cH.GB,r.cH.IE,r.cH.NZ])},45417:(e,t,a)=>{a.d(t,{g:()=>I});var r=a(96832),i=a(88355),n=a(88203),s=a(49023),l=a(42670),o=a(68037),d=a(82207),c=a(72055),_=a(16792),u=a(87773),p=a(36351);const E={..._.k,PLACE_OF_ISSUE_LABEL:"webapp_id_form_field_label_place_of_issue",PLACE_OF_ISSUE_PLACEHOLDER:"webapp_id_form_field_placeholder_place_of_issue",DETAILS_CONTENT_LABEL:"webapp_id_form_passport_content_details_label"},m=({variant:e,handleCopy:t,country:a})=>{const{translate:_}=(0,n.Z)(),{shouldShowFrozenStateDialog:m}=(0,l.Ub)(),I=r.useRef(null),{values:b}=(0,i.u6)();return r.useEffect("add"===e?()=>{const e=setTimeout((()=>{I.current?.focus()}),s.sc);return()=>clearTimeout(e)}:()=>{},[]),(0,p.BX)(r.Fragment,{children:[(0,p.BX)(o.u,{title:_(E.DETAILS_CONTENT_LABEL),additionalSx:{display:"flex",flexDirection:"column",gap:"8px"},children:[(0,p.tZ)(u.YI,{name:"idName",label:_(E.NAME_LABEL),placeholder:_(E.NAME_PLACEHOLDER),ref:I,disabled:!!m}),(0,p.tZ)(u.YI,{name:"idNumber",label:_(E.ID_NUMBER_LABEL),placeholder:_(E.ID_NUMBER_PLACEHOLDER),actions:"edit"===e?[(0,p.tZ)(d.m,{data:b.idNumber,onCopy:t},"copy")]:void 0,disabled:!!m}),(0,p.tZ)(u.Nn,{name:"issueDate",label:_(E.ISSUE_DATE_LABEL),calendarButtonLabel:_(E.ISSUE_DATE_PICK),disabled:!!m}),(0,p.tZ)(u.Nn,{name:"expirationDate",label:_(c.a.has(a)?E.EXPIRATION_DATE_LABEL_UK:E.EXPIRATION_DATE_LABEL_US),calendarButtonLabel:_(c.a.has(a)?E.EXPIRATION_DATE_PICK_UK:E.EXPIRATION_DATE_PICK_US),disabled:!!m}),(0,p.tZ)(u.Dz,{name:"country",label:_(E.COUNTRY_LABEL),disabled:!!m}),(0,p.tZ)(u.YI,{name:"issuePlace",label:_(E.PLACE_OF_ISSUE_LABEL),placeholder:_(E.PLACE_OF_ISSUE_PLACEHOLDER),disabled:!!m})]}),(0,p.tZ)(u.A0,{name:"spaceId",disabled:!!m,wrapInContentCard:!0,contentCardLabel:_(E.ORGANIZATION_CONTENT_LABEL)})]})},I=r.memo(m)}}]);