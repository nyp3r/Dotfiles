"use strict";(globalThis.webpackChunk_dashlane_leeloo=globalThis.webpackChunk_dashlane_leeloo||[]).push([[9300],{82994:(e,t,a)=>{a.d(t,{s:()=>_}),a(96832);var n=a(62264),l=a(8180),i=a(51031),s=a(14877),o=a(88203);let r=function(e){return e.LastAdmin="LastAdmin",e.GroupSharing="GroupSharing",e.CollectionSharing="CollectionSharing",e.Generic="Generic",e}({});var c=a(78956),u=a(24731),d=a(36351);const h=({reason:e,translations:t,goToSharingAccess:a,closeCantDeleteDialog:n})=>{const{translate:l}=(0,o.Z)(),i=((e,t)=>{const{groupSharingTitle:a,lastAdminTitle:n,collectionSharingTitle:l,genericErrorTitle:i}=e;switch(t){case r.LastAdmin:return n;case r.GroupSharing:return a;case r.CollectionSharing:return l;case r.Generic:return i;default:return(0,u.U)(t)}})(t,e),s=((e,t)=>{const{groupSharingSubtitle:a,lastAdminSubtitle:n,collectionSharingSubtitle:l,genericErrorSubtitle:i}=e;switch(t){case r.LastAdmin:return n;case r.GroupSharing:return a;case r.CollectionSharing:return l;case r.Generic:return i;default:return(0,u.U)(t)}})(t,e);return(0,d.tZ)(c.Vq,{isOpen:!0,onClose:n,title:null!=i?i:"",closeActionLabel:l("_common_dialog_dismiss_button"),actions:e===r.LastAdmin||r.GroupSharing||r.CollectionSharing?{primary:{children:t.lastAdminActionLabel,onClick:()=>{a(),n()}}}:void 0,children:s})};var p=a(37527);const m=({closeConfirmDeleteDialog:e,onDeleteConfirm:t,translations:a})=>{const{translate:n}=(0,o.Z)(),{confirmDeleteSubtitle:l,confirmDeleteTitle:i,confirmDeleteDismiss:s,confirmDeleteConfirm:r}=a;return(0,d.tZ)(c.Vq,{title:i,onClose:e,isOpen:!0,dialogClassName:p.Ht,closeActionLabel:n("_common_dialog_dismiss_button"),isDestructive:!0,actions:{primary:{children:r,onClick:t,id:"deletion-dialog-confirm-button"},secondary:{children:s,onClick:e,autoFocus:!0,id:"deletion-dialog-dismiss-button"}},children:l})},_=({closeConfirmDeleteDialog:e,goToSharingAccess:t,isVisible:a,itemId:c,onDeletionSuccess:u,sharingStatus:p,translations:_,vaultItemType:g,isShared:b,isSharedViaUserGroup:v,isItemInCollection:y,isLastAdmin:f})=>{const{showToast:D}=(0,n.p)(),{translate:S}=(0,o.Z)(),{deleteVaultItem:C}=(0,l.u)(s.L);if(!a)return null;let I;return(b||p?.isShared)&&(v&&(I=r.GroupSharing),f&&(I=r.LastAdmin),y&&(I=r.CollectionSharing)),I&&t?(0,d.tZ)(h,{reason:I,translations:_,goToSharingAccess:t,closeCantDeleteDialog:e}):(0,d.tZ)(m,{closeConfirmDeleteDialog:e,onDeleteConfirm:async()=>{try{var e;(await C({id:c,vaultItemType:g})).tag===i.rq.Success?(D({description:null!=(e=_.deleteSuccessToast)?e:S("webapp_personal_info_edition_delete_success_toast")}),u()):D({description:S("_common_generic_error"),mood:"danger",isManualDismiss:!0})}catch(e){D({description:S("_common_generic_error"),mood:"danger",isManualDismiss:!0})}},translations:_})}},42521:(e,t,a)=>{a.d(t,{Jh:()=>o,UE:()=>i,ZP:()=>r});var n=a(96832),l=a(26849);const i=(0,l.compose)(l.not,l.isEmpty,l.trim,(0,l.defaultTo)("")),s=/.+@.+\..+/,o=e=>s.test(e.trim());class r extends n.Component{constructor(e){super(e),this.setInternalState=e=>{this.setState({internal:{...this.state.internal,...e}})},this.setUpdatedValues=e=>{const{signalEditedValues:t,onValuesUpdated:a}=this.props,n={...this.state.values,...e};this.setState({values:n},(()=>{t&&t(this.hasFormBeenEdited()),a&&a(n)}))},this.handleChange=(e,t="")=>{if(e instanceof Event&&t)throw new Error("handleChange was called with both a ChangeEvent and key.");const a=e?.target?{[e.target.dataset.name]:e.target.value}:{[t]:e};this.setUpdatedValues(a)},this.handleChanges=e=>{this.setUpdatedValues(e)},this.validateValues=e=>{if(0===Object.keys(e).length)return!0;const t=(0,l.reduce)(((t,a)=>(t[a]=e[a]?(0,l.compose)(l.not,e[a]):()=>!1,t)),{},Object.keys(this.state.values)),a=(0,l.evolve)(t,this.state.values);return this.setState({errors:a}),(0,l.all)((0,l.equals)(!1),(0,l.values)(a))},this.hasFormBeenEdited=()=>!(0,l.equals)(this.state.values,this.props.currentValues),this.getValues=()=>this.state.values;const t=Object.keys(e.currentValues).reduce(((e,t)=>(e[t]=!1,e)),{});this.state={internal:{},values:e.currentValues,errors:t}}componentDidUpdate(e){(0,l.equals)(this.props.currentValues,e.currentValues)||this.setState({values:this.props.currentValues})}}},86816:(e,t,a)=>{a.d(t,{Y:()=>y});var n=a(96832),l=a(94138),i=a(73704),s=a(39431),o=a(14877),r=a(8180),c=a(14900),u=a(63520),d=a(82994),h=a(92077),p=a(86498),m=a(88203),_=a(45272),g=a(36351);const b={DELETE_CONFIRM:"webapp_personal_info_edition_delete_confirm",DELETE_DISMISS:"webapp_personal_info_edition_delete_dismiss",DELETE_SUBTITLE:"webapp_personal_info_edition_delete_subtitle"},v={[s.U.Address]:"address",[s.U.Company]:"company",[s.U.Email]:"email",[s.U.Identity]:"name",[s.U.Phone]:"phone-number",[s.U.Website]:"website"};function y(e){const{getItemTypeDescription:t,getDeleteTitle:a,getTitle:y,vaultItemType:f,renderForm:D}=e;return({lee:e,item:S,match:C})=>{const I=(0,n.useRef)(null),E=(0,p.V)(),{translate:T}=(0,m.Z)(),{routes:V}=(0,h.Xo)(),{updateVaultItem:w}=(0,r.u)(o.L),[U,x]=(0,n.useState)(!1),[L,A]=(0,n.useState)(!1);if((0,n.useEffect)((()=>{const e={[s.U.Address]:i.PageView.ItemAddressDetails,[s.U.Company]:i.PageView.ItemCompanyDetails,[s.U.Email]:i.PageView.ItemEmailDetails,[s.U.Identity]:i.PageView.ItemIdentityDetails,[s.U.Phone]:i.PageView.ItemPhoneDetails,[s.U.Website]:i.PageView.ItemWebsiteDetails};(0,_.Nc)(e[f])}),[]),!S)return null;const Z=()=>{(0,_.Nc)(i.PageView.ItemPersonalInfoList),(0,h.uX)(V.userPersonalInfo)},k=S?y(S,T):"",N={confirmDeleteConfirm:T(b.DELETE_CONFIRM),confirmDeleteDismiss:T(b.DELETE_DISMISS),confirmDeleteSubtitle:T(b.DELETE_SUBTITLE),confirmDeleteTitle:a(T)};return(0,g.BX)(u.zI,{isUsingNewDesign:!0,isViewingExistingItem:Boolean(C.params?.uuid),itemHasBeenEdited:U,onNavigateOut:Z,onSubmit:async()=>{S.id&&Boolean(I.current?.isFormValid())&&(await(async()=>{const e=I.current?.getValues();e&&"success"!==(await w({vaultItemType:f,content:e,id:S.id})).tag&&E.showAlert(T("_common_generic_error"),c.BLW.ERROR)})(),Z())},onClickDelete:()=>A(!0),ignoreCloseOnEscape:L,formId:"edit_personalinfo_panel",header:(0,g.tZ)(u.V9,{icon:(0,g.tZ)(l.A,{type:v[f],size:"xlarge"}),title:k,titleDescription:t(T)}),children:[D(e,S,I,(()=>x(!0))),(0,g.tZ)(d.s,{isVisible:L,itemId:S.id,closeConfirmDeleteDialog:()=>A(!1),onDeletionSuccess:Z,translations:N,vaultItemType:f})]})}}},99300:(e,t,a)=>{a.r(t),a.d(t,{Connected:()=>h}),a(96832);var n=a(24507),l=a(14877),i=a(39431),s=a(44105),o=a(38983),r=a(86816),c=a(18462),u=a(36351);const d=(0,r.Y)({getDeleteTitle:e=>e("webapp_personal_info_edition_delete_title_phone"),getItemTypeDescription:e=>e("webapp_personal_info_edition_header_phone_description"),getTitle:c.o3,vaultItemType:i.U.Phone,renderForm:(e,t,a,n)=>{const l=s.c[e.globalState.locale.country]||s.c.US,i={itemName:t.itemName,phoneNumber:t.phoneNumber,localeFormat:t.localeFormat||l,type:t.type,spaceId:t.spaceId};return(0,u.tZ)(o.b,{lee:e,currentValues:i,signalEditedValues:n,ref:a})}}),h=e=>{const{data:t}=(0,n.k)(l.L,"query",{vaultItemTypes:[i.U.Phone],ids:[`{${e.match.params.uuid}}`]});return(0,u.tZ)(d,{...e,item:t?.phonesResult.items[0]})}},38983:(e,t,a)=>{a.d(t,{b:()=>b});var n=a(26849),l=a(63847),i=a(59115),s=a(75968),o=a(93853),r=a(42670),c=a(42521),u=a(67406),d=a(44105),h=a(7325),p=a(94431);function m(e){const t=e.namespace("country_name_");return e=>(e=(0,p.lC)(e),{label:`${t(d.c[e])} (+${p.b0[e]})`,selectedLabel:`${e} (+${p.b0[e]})`,value:e})}var _=a(68037),g=a(36351);class b extends c.ZP{isFormValid(){return this.validateValues({phoneNumber:c.UE})}render(){var e,t;const{lee:a}=this.props,r=a.translate.namespace("webapp_personal_info_edition_phone_"),{shouldShowFrozenStateDialog:c}=this.context,b=function(e){const t=e.namespace("personal_info_");return[{label:t("phone_type_mobile"),value:h.z.Mobile},{label:t("phone_type_landline"),value:h.z.Landline},{label:t("phone_type_work_mobile"),value:h.z.WorkMobile},{label:t("phone_type_work_landline"),value:h.z.WorkLandline},{label:t("phone_type_fax"),value:h.z.Fax},{label:t("phone_type_work_fax"),value:h.z.WorkFax},{label:t("phone_type_any"),value:h.z.Any}]}(a.translate),v=null!=(e=(0,n.find)((0,n.propEq)("value",this.state.values.type),b))?e:(0,n.head)(b),y=function(e){const t=m(e);return Object.keys(p.b0).map((e=>t(d.c[e])))}(a.translate),f=m(a.translate)(this.state.values.localeFormat);return(0,g.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"16px"},children:[(0,g.BX)(_.u,{title:r("content_card_details_label"),additionalSx:{display:"flex",flexDirection:"column",gap:"8px"},children:[(0,g.BX)(l.k,{sx:{gap:"8px"},children:[(0,g.tZ)(i.m,{label:"Country code",placeholder:f.label,"data-name":"localeFormat",value:f.value,onChange:e=>this.handleChange(e,"localeFormat"),readOnly:!!c,sx:{minWidth:"145px"},children:y.map((e=>{var t;return(0,g.tZ)(s.$,{value:e.value,displayValue:null!=(t=e.selectedLabel)?t:e.label,children:e.label},e.value)}))}),(0,g.tZ)(o.n,{required:!0,label:r("number_label"),placeholder:r("placeholder_no_number"),"data-name":"phoneNumber",value:this.state.values.phoneNumber,error:this.state.errors.phoneNumber,onChange:this.handleChange,readOnly:!!c})]}),(0,g.tZ)(i.m,{label:r("type_label"),placeholder:v.label,value:v.value,"data-name":"type",onChange:e=>this.handleChange(e,"type"),readOnly:!!c,children:b.map((e=>(0,g.tZ)(s.$,{value:e.value,children:e.label},e.value)))})]}),(0,g.BX)(_.u,{title:r("content_card_organization_label"),additionalSx:{display:"flex",flexDirection:"column",gap:"8px"},children:[(0,g.tZ)(o.n,{label:r("phonename_label"),placeholder:r("placeholder_no_phonename"),"data-name":"itemName",value:this.state.values.itemName,onChange:this.handleChange,readOnly:!!c}),(0,g.tZ)(u.M,{isUsingNewDesign:!0,labelSx:u.e,spaceId:null!=(t=this.state.values.spaceId)?t:"",onChange:e=>this.handleChange(e,"spaceId"),disabled:!!c})]})]})}}b.contextType=r.CQ}}]);