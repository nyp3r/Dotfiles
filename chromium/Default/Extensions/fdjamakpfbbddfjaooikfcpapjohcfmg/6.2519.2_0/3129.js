"use strict";(globalThis.webpackChunk_dashlane_leeloo=globalThis.webpackChunk_dashlane_leeloo||[]).push([[3129],{87122:(e,t,i)=>{i.r(t),i.d(t,{CredentialEditPanel:()=>He});var n=i(15192),a=i(24507),s=i(89078),r=i(51031),o=i(14877),l=i(39431),d=i(84925),c=i(27100),u=i(18108),p=i(66424),_=i(92077),m=i(30894),h=i(96832),b=i(26849),g=i(30309),k=i(8180),S=i(62264),w=i(83459),C=i(13252),x=i(50094),y=i(46525),v=i(86342),f=i(88203),D=i(42670),L=i(73875),Z=i(63520),I=i(82994),A=i(33659),E=i(62042),T=i(99822),U=i(70484),P=i(24294),B=i(10291),R=i(63144),q=i(13134);let N=function(e){return e[e.SHARED_ACCESS=0]="SHARED_ACCESS",e[e.ACCOUNT_DETAILS=1]="ACCOUNT_DETAILS",e[e.LINKED_WEBSITES=2]="LINKED_WEBSITES",e[e.OTP_SETUP=3]="OTP_SETUP",e}({});const z={"account-details":N.ACCOUNT_DETAILS,"shared-access":N.SHARED_ACCESS,"linked-websites":N.LINKED_WEBSITES},W=(e,t)=>{var i;const n=t.find((e=>"accepted"===e.status&&e.info?.forcedDomainsEnabled));return n&&((e,t)=>{var i,n,a;let s="";var r;e.URL&&(s=null!=(r=new q.Y(e.URL).getRootDomain()?.toLowerCase())?r:"");const o=null!=(i=e.email?.toLowerCase())?i:"",l=null!=(n=e.username?.toLowerCase())?n:"",d=null!=(a=e.alternativeUsername?.toLowerCase())?a:"",c=e.linkedURLs.map((e=>e.toLowerCase()));return t.some((e=>{const t=e.toLowerCase();return s.includes(t)||o.includes(t)||l.includes(t)||d.includes(t)||c.some((e=>e.includes(t)))}))})(e,null!=(i=n.info?.teamDomains)?i:[])?n:null};var O,V=i(17534),G=i(68999),X=i(47124),M=i(84985),F=i(68037),H=i(36351);const K=({credential:e,onClose:t,openWithNewUrlField:i,onUpdateLinkedWebsitesAddedByUser:n,canEdit:a,dashlaneDefinedLinkedWebsites:s})=>{const{translate:r}=(0,f.Z)(),[o,l]=h.useState(e.linkedURLs),[d,c]=h.useState(i);return h.useEffect((()=>{const t=e.linkedURLs,i=!(t.length===o.length&&t.every(((e,t)=>o[t]===e)));c(i),n(o)}),[o]),(0,H.BX)("div",{"data-testid":"linked-websites-tab",children:[(0,H.tZ)(G.z,{"data-testid":"back-button",layout:"iconLeading",mood:"neutral",intensity:"supershy",onClick:t,icon:O||(O=(0,H.tZ)(X.JO,{name:"ArrowLeftOutlined"})),children:r("webapp_credential_linked_websites_title")}),(0,H.tZ)(F.u,{title:r("webapp_credential_linked_websites_section_primary"),description:r("webapp_credential_linked_websites_section_primary_description"),additionalSx:{marginTop:"24px"},children:(0,H.tZ)(M.a,{linkedWebsitesList:[e.URL],credentialId:e.id,isEditing:!1})}),(0,H.tZ)(F.u,{title:r("webapp_credential_linked_websites_section_added_by_user"),additionalSx:{marginTop:"16px"},children:(0,H.tZ)(M.a,{linkedWebsitesList:o,credentialId:e.id,isListEditable:a,isEditing:d,showUrlProtocol:!0,updateLinkedWebsitesList:l})}),s&&s.length>1?(0,H.tZ)(F.u,{title:r("webapp_credential_linked_websites_section_added_by_dashlane"),description:r("webapp_credential_linked_websites_section_added_by_dashlane_description"),additionalSx:{marginTop:"16px"},children:(0,H.tZ)(M.a,{linkedWebsitesList:s,credentialId:e.id,isEditing:!1})}):null]})},j=h.memo(K);var J=i(14900);const Y=({onClose:e,setDisplayLinkedWebsitesDataSavedAlert:t})=>{const{translate:i}=(0,f.Z)();return(0,h.useRef)(null).current=window.setTimeout((()=>t(!1)),5e3),(0,H.tZ)(J.YcA,{children:(0,H.tZ)(J.bZj,{size:J.k3y.SMALL,severity:J.BLW.SUCCESS,closeIconName:i("_common_alert_dismiss_button"),onClose:e,children:i("_common_toast_changes_saved")})})};var $=i(63847),Q=i(28455);const ee=({onCancel:e,onLeavePageWithoutSaving:t})=>{const{translate:i}=(0,f.Z)();return(0,H.tZ)(Q.o,{isOpen:!0,showCloseIcon:!0,title:i("webapp_credential_linked_websites_discard_dialog_title"),onRequestClose:e,footer:(0,H.BX)($.k,{justifyContent:"end",gap:"8px",children:[(0,H.tZ)(J.zxk,{type:"button",nature:"secondary",onClick:e,children:i("webapp_credential_linked_websites_discard_dialog_cancel")}),(0,H.tZ)(J.zxk,{type:"button",onClick:t,children:i("webapp_credential_linked_websites_discard_dialog_discard")})]}),children:(0,H.tZ)($.k,{flexDirection:"column",gap:"8px",sx:{width:"576px"},children:(0,H.tZ)(J.nvN,{children:i.markup("webapp_credential_linked_websites_discard_dialog_description_markup")})})})},te=({duplicateData:e,onCancel:t,onSave:i})=>{const{translate:n}=(0,f.Z)(),a=e.length>1,s=a?n("webapp_credential_linked_websites_duplicate_prevention_dialog_title_multiple"):n("webapp_credential_linked_websites_duplicate_prevention_dialog_title_one",{url:e[0].linkedWebsite}),r=a?n("webapp_credential_linked_websites_duplicate_prevention_dialog_description_multiple"):n("webapp_credential_linked_websites_duplicate_prevention_dialog_description_one",{credentialName:e[0].credentialName}),o=n(a?"webapp_credential_linked_websites_duplicate_prevention_dialog_add_websites_multiple":"webapp_credential_linked_websites_duplicate_prevention_dialog_add_websites_one");return(0,H.tZ)(Q.o,{isOpen:!0,showCloseIcon:!0,title:s,onRequestClose:t,footer:(0,H.BX)($.k,{justifyContent:"end",gap:"8px",children:[(0,H.tZ)(J.zxk,{type:"button",nature:"secondary",onClick:t,children:n("webapp_credential_linked_websites_duplicate_prevention_dialog_cancel")}),(0,H.tZ)(J.zxk,{type:"button",onClick:i,children:o})]}),children:(0,H.BX)("div",{children:[(0,H.tZ)("p",{children:r}),a?(0,H.tZ)("ul",{className:"duplicatesList--SwGmL5ftwe",children:e.map((e=>(0,H.tZ)("li",{className:"duplicateItem--mPX5urdfL2",children:e.linkedWebsite},e.linkedWebsite)))}):null]})})};var ie=i(63082);const ne="webapp_password_history_detailed_password_view_button",ae=({credentialId:e})=>{const{translate:t}=(0,f.Z)(),{routes:i}=(0,_.Xo)(),n=i.userPasswordHistoryFilteredByCredential(e);return(0,a.k)(ie.T,"hasPasswordHistory",{id:e}).data?(0,H.tZ)("div",{children:(0,H.tZ)(_.rU,{to:n,tabIndex:-1,children:(0,H.tZ)(G.z,{mood:"neutral",intensity:"supershy",title:t(ne),icon:"HistoryBackupOutlined",layout:"iconLeading",children:t(ne)})})}):null};var se=i(72133),re=i(24058),oe=i(99990),le=i(25337),de=i(5063),ce=i(39632);const ue={exit:"exit--p4spwlkedE",exitActive:"exitActive--BIpaDF7MkX",exitDone:"exitDone--KzowOK4h4K",appear:"appear--OcvlWdq5He",appearActive:"appearActive--HVwCcEJzKz",appearDone:"appearDone--KgBJPzbyTA"},pe=({onPrimaryClick:e})=>{const{translate:t}=(0,f.Z)(),[i,n]=h.useState(!1);return(0,H.tZ)(ce.Z,{appear:!0,in:!i,timeout:600,classNames:ue,onExited:e,children:(0,H.tZ)("div",{sx:{backgroundColor:"ds.background.default",marginBottom:"24px"},children:(0,H.tZ)(de.k,{title:t("webapp_credential_edition_health_box_excluded_title"),description:t("webapp_credential_edition_health_box_excluded_description"),mood:"warning",size:"large",actions:[(0,H.tZ)(G.z,{mood:"brand",intensity:"quiet",onClick:e=>{e.preventDefault(),n(!0)},size:"small",type:"button",children:t("webapp_credential_edition_health_box_include")},"primaryAction")]})})})},_e=h.memo(pe);var me=i(20987),he=i(24731);const be={appear:"appear--MMCjEcRU3u",appearActive:"appearActive--LG103cUrNZ",appearDone:"appearDone--tuYaN3WTGO"},ge=({onPrimaryClick:e,onSecondaryClick:t,canEdit:i,corruptionData:n})=>{const{translate:a}=(0,f.Z)();if(!n)return null;const s=((e,t)=>{const{riskType:i}=e;switch(i){case me.gI.Compromised:return{title:t("webapp_credential_edition_health_box_compromised_title"),description:t("webapp_credential_edition_health_box_compromised_description"),secondary:t("webapp_credential_edition_health_box_view_compromised")};case me.gI.Reused:return{title:t("webapp_credential_edition_health_box_reused_title"),description:t.markup("webapp_credential_edition_health_box_reused_description_markup",{count:e.reuseCount}),secondary:t("webapp_credential_edition_health_box_view_reused")};case me.gI.Weak:return{title:t("webapp_credential_edition_health_box_weak_title"),description:t("webapp_credential_edition_health_box_weak_description"),secondary:t("webapp_credential_edition_health_box_view_weak")};default:return(0,he.U)(i)}})(n,a),r=n.severity===me.bp.STRONG?"warning":"brand";return(0,H.tZ)(ce.Z,{in:!0,appear:!0,timeout:600,classNames:be,children:(0,H.tZ)("div",{sx:{position:"relative",backgroundColor:"ds.background.default",marginBottom:"24px"},children:(0,H.tZ)(de.k,{title:s.title,description:s.description,mood:r,size:"large",actions:[(0,H.tZ)(G.z,{onClick:t,intensity:"quiet",size:"small",children:s.secondary},"view_health"),(0,H.tZ)(J.ua7,{passThrough:i,content:a("webapp_credential_edition_health_box_change_limited"),placement:"left",sx:{maxWidth:"312px",fontSize:2},children:(0,H.tZ)(G.z,{size:"small",onClick:e,disabled:!i,children:a("webapp_credential_edition_health_box_change_password")})},"change_password")]})})})},ke=h.memo(ge),Se=JSON.parse('{"v":"5.7.0","fr":30,"ip":0,"op":26,"w":240,"h":240,"nm":"Loading Light Theme","ddd":0,"assets":[],"layers":[{"ddd":0,"ind":1,"ty":3,"nm":"Null 4","sr":1,"ks":{"o":{"a":0,"k":0,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[120,122,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"ip":0,"op":150,"st":0,"bm":0},{"ddd":0,"ind":2,"ty":4,"nm":"load","parent":1,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[0,151,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[250,250,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[88,88],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"st","c":{"a":0,"k":[0.05490196078,0.2078431373,0.2392156863,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":6,"ix":5},"lc":1,"lj":1,"ml":4,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[0.5,-60.5],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Ellipse 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"tm","s":{"a":0,"k":0,"ix":1},"e":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.167],"y":[0.167]},"t":0,"s":[10]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.333],"y":[0]},"t":12.5,"s":[42]},{"t":25,"s":[10]}],"ix":2},"o":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.2],"y":[0]},"t":0,"s":[-19]},{"t":25,"s":[341]}],"ix":3},"m":1,"ix":2,"nm":"Trim Paths 1","mn":"ADBE Vector Filter - Trim","hd":false}],"ip":0,"op":106.197876042479,"st":0,"bm":0},{"ddd":0,"ind":3,"ty":4,"nm":"load 2","parent":1,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[0,151,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[250,250,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[88,88],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"st","c":{"a":0,"k":[0.9058823529,0.9215686275,0.9254901961,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":6,"ix":5},"lc":2,"lj":1,"ml":4,"bm":0,"nm":".","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[0.5,-60.5],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Ellipse 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":106.197876042479,"st":0,"bm":0}],"markers":[]}'),we=({credentialId:e,canEdit:t})=>{const i=(0,_.k6)(),{routes:n}=(0,_.Xo)(),{updateIsCredentialExcluded:s}=(0,re.$)(),{healthData:r}=(e=>{const{data:t}=(0,a.k)(oe.d,"credentialHealthData",{credentialId:e});return{healthData:t}})(e),[o,l]=(0,h.useState)(null);return null===r?null:r?(0,H.BX)("div",{sx:{position:"relative"},children:[o?(0,H.tZ)(le.R,{credentialId:o,dismissCallback:()=>l(null)}):null,r.excluded?(0,H.tZ)(_e,{onPrimaryClick:()=>{s(e,!1)}}):(0,H.tZ)(ke,{onPrimaryClick:t=>{t.preventDefault(),l(e)},onSecondaryClick:e=>{e.preventDefault(),i.push(n.userPasswordHealth)},canEdit:t,corruptionData:r.corruptionData})]}):(0,H.tZ)("div",{sx:{marginBottom:"24px"},children:(0,H.tZ)("div",{sx:{display:"flex",justifyContent:"center"},children:(0,H.tZ)(se.Z,{height:24,width:24,animationParams:{renderer:"svg",loop:!0,autoplay:!0,animationData:Se}})})})};var Ce=i(26555),xe=i(79808);const{SHARED_ACCESS:ye,ACCOUNT_DETAILS:ve}=N,fe=({credential:e,displayTabs:t,changeTab:i,currentTab:n})=>{const{translate:a}=(0,f.Z)(),{data:s,status:o}=(0,xe.r)(e.id),l=o===r.rq.Success?s?.count:0,d={[ve]:0,[ye]:1},c=[{id:"tab-credential-detail",contentId:"content-credential-detail",title:a("webapp_credential_edition_account_details"),onSelect:()=>i(ve)},{id:"tab-credential-shared-access",contentId:"content-credential-shared-access",title:`${a("webapp_credential_edition_shared_access")} (${l})`,onSelect:()=>i(ye)}];return(0,H.tZ)(Z.V9,{icon:(0,H.tZ)(Ce.h,{size:"xlarge",domainURL:new q.Y(e.URL).getRootDomain()}),title:e.itemName,tabIndex:void 0!==n?d[n]:void 0,tabs:t?Object.values(c):void 0})};var De=i(29020),Le=i(22903),Ze=i(51409),Ie=i(45636),Ae=i(46478),Ee=i(97855);const Te=({rank:e,content:t,title:i})=>(0,H.BX)(J.T5p,{as:"li",gap:"16px",gridTemplateColumns:"35px 1fr",alignItems:"center",justifyContent:"flex-start",sx:{width:"100%",padding:"6px 0"},children:[(0,H.tZ)(J.dDn,{alignSelf:"flex-start",children:(0,H.tZ)(Ee.m,{rank:e})}),(0,H.BX)(J.dDn,{children:[(0,H.tZ)(De.n,{sx:{a:{color:"ds.text.brand.standard"},"a:hover":{color:"ds.text.brand.standard",textDecoration:"underline"}},color:"ds.text.neutral.catchy",textStyle:"ds.title.block.medium",children:i}),t?(0,H.tZ)(De.n,{color:"ds.text.neutral.quiet",textStyle:"ds.body.standard.regular",children:t}):null]})]});var Ue;const Pe=({credentialId:e,title:t,url:i,setHasDataBeenModified:n,onClose:a,onSubmit:s})=>{const{translate:o}=(0,f.Z)(),[l,d]=(0,h.useState)(""),c=(0,Ie.v6)(l),{setupOtpCode:u}=(()=>{const{setupOtpCodeForCredential:e}=(0,k.u)(Ae.i);return{setupOtpCode:async(t,i)=>{try{return await e({credentialId:t,otpUrl:i}),!0}catch{return!1}}}})(),{showToast:p}=(0,S.p)(),_=!!l&&c.status===r.rq.Error,m=c.status!==r.rq.Success;return(0,H.BX)("div",{"data-testid":"linked-websites-tab",children:[(0,H.tZ)(G.z,{"data-testid":"back-button",layout:"iconLeading",mood:"neutral",intensity:"supershy",size:"large",onClick:a,icon:Ue||(Ue=(0,H.tZ)(X.JO,{name:"ArrowLeftOutlined"})),children:(0,H.tZ)(De.n,{textStyle:"ds.title.section.medium",color:"ds.text.neutral.catchy",children:o("webapp_credential_otp_setup_sublevel_header")})}),(0,H.BX)(F.u,{additionalSx:{marginTop:"16px"},children:[(0,H.BX)($.k,{as:"ol",gap:"16px",children:[(0,H.tZ)(Le.X,{as:"h3",textStyle:"ds.title.supporting.small",color:"ds.text.neutral.quiet",children:o("webapp_credential_otp_setup_title")}),(0,H.tZ)(Te,{rank:1,content:o("webapp_credential_otp_setup_step1_description"),title:o.markup("webapp_credential_otp_setup_step1_title_markup",{title:t,url:i},{linkTarget:"_blank"})},"2fa-settings"),(0,H.tZ)(Te,{rank:2,content:o("webapp_credential_otp_setup_step2_description"),title:o("webapp_credential_otp_setup_step2_title")},"2fa-turn-on"),(0,H.tZ)(Te,{rank:3,content:o("webapp_credential_otp_setup_step3_description"),title:o("webapp_credential_otp_setup_step3_title")},"enter-setup-code")]}),(0,H.BX)($.k,{sx:{mt:"16px",backgroundColor:"ds.container.agnostic.neutral.quiet",padding:"16px",borderRadius:"8px"},gap:"8px",flexDirection:"column",children:[(0,H.tZ)(Ze.K,{error:_,feedback:_?o("webapp_credential_otp_setup_incorrect_setup_code_error"):"",label:o("webapp_credential_otp_setup_code_label"),onChange:e=>{e.preventDefault(),e.stopPropagation(),n(!0),d(e.target.value)}}),(0,H.tZ)(G.z,{fullsize:!0,onClick:async()=>{c.status===r.rq.Success&&(await u(e,c.data.url)?(s(),p({description:o("webapp_credential_otp_code_success_toast")})):p({mood:"danger",description:o("_common_generic_error")}))},disabled:m,tooltip:o("webapp_credential_otp_setup_submit_button_disabled_tooltip"),children:o("webapp_credential_otp_setup_submit_button")})]})]}),(0,H.tZ)(de.k,{sx:{mt:"16px"},title:o("webapp_credential_otp_code_cant_find_code_title"),description:o("webapp_credential_otp_code_cant_find_code_description")})]})},Be=()=>{const{translate:e}=(0,f.Z)();return(0,H.tZ)("div",{sx:{position:"relative",backgroundColor:"ds.background.default",marginBottom:"24px"},children:(0,H.tZ)(de.k,{title:e("webapp_credential_edition_frozen_limited_rights_title"),description:e("webapp_credential_edition_frozen_limited_rights_description"),mood:"warning",size:"medium"})})};var Re,qe=i(80936),Ne=i(10896),ze=i(19122);const{SHARED_ACCESS:We,ACCOUNT_DETAILS:Oe,LINKED_WEBSITES:Ve,OTP_SETUP:Ge}=N,Xe=({location:e,activeSpaces:t,credential:i,onClose:n,protectedItemsUnlockerShown:a,dashlaneDefinedLinkedWebsites:s,areProtectedItemsUnlocked:d,openProtectedItemsUnlocker:u,isShared:p,sharingCapabilities:m,isSharedViaUserGroup:q,isItemInCollection:N,isLastAdmin:O})=>{const{translate:G}=(0,f.Z)(),{routes:X}=(0,_.Xo)(),{showToast:M}=(0,S.p)(),F=(0,h.useRef)(!1),K=(()=>{const{updateLinkedWebsites:e}=(0,k.u)(c.G);return async(t,i)=>{e({credentialId:t,updatedLinkedWebsitesList:i})}})(),{updateVaultItem:J}=(0,k.u)(o.L),{createCollection:$,updateCollection:Q}=(0,k.u)(y.v),{addItemsToCollections:ie,removeItemFromCollections:ne}=(0,k.u)(w.a),{updateCredentialPreferences:se}=(0,k.u)(x.I),{shouldShowFrozenStateDialog:re}=(0,D.Ub)(),oe=(0,L.l)(),le=(0,h.createRef)(),de=()=>{var e,t,n,a,s,r;return{alternativeUsername:null!=(e=i.alternativeUsername)?e:"",email:i.email,itemName:i.itemName,linkedURLs:i.linkedURLs,note:i.note,otpURL:null!=(t=i.otpURL)?t:"",otpSecret:null!=(n=i.otpSecret)?n:"",password:i.password,spaceId:i.spaceId,URL:i.URL,username:i.username,onlyAutofillExactDomain:null!=(a=i.onlyForThisSubdomain)&&a,requireMasterPassword:null!=(s=i.isSecured)&&s,useAutoLogin:null!=(r=i.autoLogin)&&r}},[ce,ue]=(0,h.useState)(de()),[pe,_e]=(0,h.useState)((()=>{var e;const t=(0,_.CN)();return z[null!=(e=t.get("tab"))?e:"account-details"]})()),[me,he]=(0,h.useState)(Oe),[be,ge]=(0,h.useState)(!1),[ke,Se]=(0,h.useState)(!1),[Ce,xe]=(0,h.useState)(i.linkedURLs),[ye,ve]=(0,h.useState)(!1),[De,Le]=(0,h.useState)(!1),[Ze,Ie]=(0,h.useState)([]),[Ae,Ee]=(0,h.useState)(!1),[Te,Ue]=(0,h.useState)(!1),[Xe,Me]=(0,h.useState)(!1),[Fe,He]=(0,h.useState)(!1),[Ke,je]=(0,h.useState)(!1),[Je,Ye]=(0,h.useState)(!1),{current:$e}=(0,h.useRef)({confirmDeleteConfirm:G("webapp_credential_edition_delete_confirm"),confirmDeleteDismiss:G("webapp_credential_edition_delete_dismiss"),confirmDeleteSubtitle:G("webapp_credential_edition_confirm_delete_subtitle"),confirmDeleteTitle:G("webapp_credential_edition_confirm_delete_title"),lastAdminActionLabel:G("webapp_credential_edition_change_permissions"),lastAdminTitle:G("webapp_credential_edition_last_admin_title"),lastAdminSubtitle:G("webapp_credential_edition_last_admin_subtitle"),groupSharingTitle:G("webapp_credential_edition_group_sharing_title"),groupSharingSubtitle:G("webapp_credential_edition_group_sharing_subtitle"),collectionSharingTitle:G("webapp_credential_edition_collection_sharing_title"),collectionSharingSubtitle:G("webapp_credential_edition_collection_sharing_subtitle")});(0,h.useEffect)((()=>{(0,V.SJ)(Ce,i.linkedURLs)&&ge(!0)}),[Ce,i.linkedURLs]),(0,h.useEffect)((()=>{pe===Oe&&ue(de())}),[pe]),(0,h.useEffect)((()=>{const{onlyAutofillExactDomain:e,requireMasterPassword:t,useAutoLogin:i,...n}=ce,{onlyAutofillExactDomain:a,requireMasterPassword:s,useAutoLogin:r,...o}=de(),l=!(0,b.equals)(ce,de());ge(l),Ye(!(0,b.equals)(n,o))}),[ce]);const Qe=(0,qe.I)(),et=Qe.status===r.rq.Success&&Qe.isDisabled&&!i.spaceId,{teamId:tt}=(0,ze.fV)();if(null===re||null===oe)return null;const it={id:i.id,forceCategorizedSpace:W(i,t),isDiscontinuedUser:re,canCopy:m.canCopy,canEdit:m.canEdit,canReveal:m.canReveal,linkedURLs:i.linkedURLs},nt=e=>{be?(he(e),Ue(!0)):_e(e)},at=()=>{Ue(!1),Ee(!1),Ie([])},st=()=>{_e(Oe),ge(!1),at()},rt=e=>{e?.preventDefault(),be?(he(Oe),Ee(!0)):st()},ot=()=>{K(i.id,Ce),Me(!0),(0,V.Bq)(i,Ce),st()},lt=e=>!e.initiallyExisting&&!e.hasBeenDeleted,dt=e=>e.initiallyExisting&&!e.hasBeenDeleted,ct=()=>{M({description:G("_common_generic_error"),mood:"danger"}),n()},ut=()=>{F.current||(F.current=!0,e?.state?.entity?(({routes:e,location:t})=>{t?.state?.entity?(0,U.y)(t?.state?.entity)?(0,_.uX)(e.userSharingGroupInfo(t?.state?.entity?.groupId)):(0,_.uX)(e.userSharingUserInfo(t?.state?.entity?.alias)):(0,_.uX)(e.userSharingCenter)})({routes:X,location:e}):n())},pt=()=>{if(ke)return he(Oe),void Ue(!0);_e(Oe)},_t=De||a,mt=oe&&!it.canReveal;return(0,H.BX)(Z.zI,{isUsingNewDesign:!0,isViewingExistingItem:!0,itemHasBeenEdited:be,isSomeDialogOpen:Ae||Ze.length>0||Te||Ke||De,onSubmit:async()=>{if(pe===Ve)return void(async()=>{const e=await(0,V.wb)(i,Ce);Ie(e),pe!==Ve||e.length||ot()})();if(!le.current?.isFormValid())return;const e=le.current?.getVaultItemCollections();if(!be||e){var t;He(!0),ce.requireMasterPassword&&ce.requireMasterPassword!==i.isSecured&&(0,B.ih)(ce.requireMasterPassword,i.id,i.URL,null!=(t=ce.spaceId)?t:void 0);try{const{onlyAutofillExactDomain:t,useAutoLogin:n,requireMasterPassword:a,...s}=ce,r=t!==i.onlyForThisSubdomain||n!==i.autoLogin||a!==i.isSecured;Je&&await J({vaultItemType:l.U.Credential,content:s,id:i.id,shouldSkipSync:!!r}),r&&await se({credentialId:i.id,credentialUrl:i.URL,onlyAutofillExactDomain:t,useAutoLogin:n,requireMasterPassword:a,shouldSkipSync:e?.some((e=>e.isShared&&!dt(e)))}),e&&await(async(e,t,i)=>{const n=[],a=[];for(const r of t){var s;dt(r)||(r.isShared?lt(r)?n.push({collectionId:r.id,permission:null!=(s=r.itemPermission)?s:C.y3.Limited}):a.push(r.id):(r.vaultItems=[{id:e,type:g.dJ.KWAuthentifiant,url:i}],r.id?await Q({id:r.id,collection:r,operationType:r.hasBeenDeleted?v.C.SUBSTRACT_VAULT_ITEMS:v.C.APPEND_VAULT_ITEMS}):await $({content:r})))}n.length&&await ie({collectionPermissions:n,itemIds:[e],shouldSkipSync:a.length>0}),a.length&&await ne({collectionIds:a,itemId:e})})(i.id,e,i.URL)}catch(e){return ct()}M({description:G("_common_toast_changes_saved")}),n()}},secondaryActions:pe===Ve?[]:[(0,H.tZ)(ae,{credentialId:i.id},"pwhist"),(0,H.tZ)(E._,{id:i.id,canShare:m.canShare&&!et&&!re,getSharing:T.Ei},"shareaction")],onNavigateOut:(e,t)=>{pe!==Ve?pe!==Ge?ut():pt():rt(t)},onClickDelete:()=>Le(!0),withoutDeleteButton:pe===Ve,withoutConfirmationDialog:pe===Ve,withoutCloseButton:pe===Ge,ignoreCloseOnEscape:_t,formId:"edit_credential_panel",submitPending:Fe,header:(0,H.tZ)(fe,{credential:i,displayTabs:p,changeTab:nt,currentTab:pe}),children:[et?(0,H.tZ)(Ne.y,{onClickDelete:()=>Le(!0),onClickMove:async()=>{if(!tt)return ct();He(!0);const{onlyAutofillExactDomain:e,useAutoLogin:t,requireMasterPassword:n,...a}=ce;a.spaceId=tt?.toString();try{await J({vaultItemType:l.U.Credential,content:a,id:i.id,shouldSkipSync:!1})}catch(e){return He(!1),ct()}He(!1),M({description:G("webapp_personal_item_in_b2b_space_warning_convert_success")})}}):null,p&&pe===We?(0,H.tZ)("div",{"aria-labelledby":"tab-credential-shared-access",id:"content-credential-shared-access",children:(0,H.tZ)(P.u,{canManageAccess:m.canManageAccess,type:C.y2.Credential,id:i.id})}):null,pe===Oe?(0,H.BX)("div",{sx:{flex:1,flexDirection:"column",position:"relative"},"aria-labelledby":"tab-credential-detail",id:"content-credential-detail",children:[mt?Re||(Re=(0,H.tZ)(Be,{})):(0,H.tZ)(we,{credentialId:i.id,canEdit:m.canEdit}),(0,H.tZ)("div",{sx:{overflowY:"initial",overflowX:"visible"},children:(0,H.tZ)(R.S,{ref:le,activeSpaces:t,editableValues:ce,setEditableValues:ue,readonlyValues:it,signalEditedValues:e=>{ge(e)},dashlaneDefinedLinkedWebsites:s,areProtectedItemsUnlocked:d,openProtectedItemsUnlocker:u,protectedItemsUnlockerShown:a,onClickAddNewWebsite:()=>(ve(!0),void nt(Ve)),onClickSetup2FAToken:()=>{nt(Ge)},setHasOpenedDialogs:je,isAddToCollectionDisabled:et})})]}):null,pe===Ve?(0,H.tZ)(j,{credential:i,dashlaneDefinedLinkedWebsites:s,onClose:e=>{rt(e?.nativeEvent)},openWithNewUrlField:ye,onUpdateLinkedWebsitesAddedByUser:xe,canEdit:m.canEdit}):null,pe===Ge?(0,H.tZ)(Pe,{credentialId:i.id,title:i.itemName,url:i.URL,onClose:pt,onSubmit:()=>{Se(!1),_e(Oe)},setHasDataBeenModified:Se}):null,(0,H.tZ)(I.s,{isVisible:De,itemId:i.id,closeConfirmDeleteDialog:()=>Le(!1),goToSharingAccess:()=>{nt(We)},onDeletionSuccess:ut,isShared:p,isSharedViaUserGroup:q,translations:$e,vaultItemType:l.U.Credential,isLastAdmin:O,isItemInCollection:N}),Ae?(0,H.tZ)(ee,{onCancel:()=>Ee(!1),onLeavePageWithoutSaving:st}):null,Ze.length>0?(0,H.tZ)(te,{duplicateData:Ze,onCancel:()=>Ie([]),onSave:ot}):null,Te?(0,H.tZ)(A.a,{onDismissClick:()=>Ue(!1),onConfirmClick:()=>{_e(me),ge(!1),Se(!1),at()}}):null,Xe?(0,H.tZ)(Y,{onClose:()=>Me(!1),setDisplayLinkedWebsitesDataSavedAlert:Me}):null]})};var Me=i(16009);const Fe=e=>{const{credential:t}=e,i=(0,u.E)(),n=(0,m.tY)(),o=(0,p.B)([t.id]),l=(0,a.k)(c.G,"getDashlaneDefinedLinkedWebsites",{url:t.URL}),{getPermissionForItem:_,getSharingStatusForItem:h,getIsLastAdminForItem:b}=(0,s.Y)(d.X,{getPermissionForItem:{queryParam:{itemId:t.id}},getSharingStatusForItem:{queryParam:{itemId:t.id}},getIsLastAdminForItem:{queryParam:{itemId:t.id}}},[]);if(l.status!==r.rq.Success||_.status!==r.rq.Success||h.status!==r.rq.Success||i.status!==r.rq.Success||b.status!==r.rq.Success)return null;const{isShared:g,isSharedViaUserGroup:k}=h.data,{isLastAdmin:S}=b.data,w=!!o.length;return(0,H.tZ)(Xe,{...e,...n,activeSpaces:i.data,dashlaneDefinedLinkedWebsites:l.data,isShared:g,sharingCapabilities:_.data.capabilities,isSharedViaUserGroup:k,isItemInCollection:w,isLastAdmin:S})},He=e=>{const{data:t,status:i}=(0,a.k)(o.L,"query",{vaultItemTypes:[l.U.Credential],ids:[`{${e.match.params.uuid}}`]}),{routes:s}=(0,_.Xo)();return i===r.rq.Loading?null:t?.credentialsResult.items.length?(0,H.tZ)(Fe,{...e,credential:t.credentialsResult.items[0]}):e.location?.state?(0,H.tZ)(n.l_,{to:(0,Me.r)(e.location?.state,s)}):(0,H.tZ)(n.l_,{to:s.userCredentials})}},10896:(e,t,i)=>{i.d(t,{y:()=>o});var n=i(5063),a=i(68999),s=i(88203),r=i(36351);const o=({onClickDelete:e,onClickMove:t})=>{const{translate:i}=(0,s.Z)();return(0,r.tZ)(n.k,{title:i("webapp_personal_item_in_b2b_space_warning_title"),description:i("webapp_personal_item_in_b2b_space_warning_description"),mood:"warning",size:"large",sx:{marginBottom:"16px"},actions:[(0,r.tZ)(a.z,{mood:"warning",intensity:"quiet",size:"small",onClick:e,children:i("webapp_personal_item_in_b2b_space_warning_delete_button")},"personalItemInB2bSpace-deleteButton"),(0,r.tZ)(a.z,{mood:"warning",size:"small",onClick:t,children:i("webapp_personal_item_in_b2b_space_warning_convert_button")},"personalItemInB2bSpace-moveButton")]})}},82994:(e,t,i)=>{i.d(t,{s:()=>h}),i(96832);var n=i(62264),a=i(8180),s=i(51031),r=i(14877),o=i(88203);let l=function(e){return e.LastAdmin="LastAdmin",e.GroupSharing="GroupSharing",e.CollectionSharing="CollectionSharing",e.Generic="Generic",e}({});var d=i(78956),c=i(24731),u=i(36351);const p=({reason:e,translations:t,goToSharingAccess:i,closeCantDeleteDialog:n})=>{const{translate:a}=(0,o.Z)(),s=((e,t)=>{const{groupSharingTitle:i,lastAdminTitle:n,collectionSharingTitle:a,genericErrorTitle:s}=e;switch(t){case l.LastAdmin:return n;case l.GroupSharing:return i;case l.CollectionSharing:return a;case l.Generic:return s;default:return(0,c.U)(t)}})(t,e),r=((e,t)=>{const{groupSharingSubtitle:i,lastAdminSubtitle:n,collectionSharingSubtitle:a,genericErrorSubtitle:s}=e;switch(t){case l.LastAdmin:return n;case l.GroupSharing:return i;case l.CollectionSharing:return a;case l.Generic:return s;default:return(0,c.U)(t)}})(t,e);return(0,u.tZ)(d.Vq,{isOpen:!0,onClose:n,title:null!=s?s:"",closeActionLabel:a("_common_dialog_dismiss_button"),actions:e===l.LastAdmin||l.GroupSharing||l.CollectionSharing?{primary:{children:t.lastAdminActionLabel,onClick:()=>{i(),n()}}}:void 0,children:r})};var _=i(37527);const m=({closeConfirmDeleteDialog:e,onDeleteConfirm:t,translations:i})=>{const{translate:n}=(0,o.Z)(),{confirmDeleteSubtitle:a,confirmDeleteTitle:s,confirmDeleteDismiss:r,confirmDeleteConfirm:l}=i;return(0,u.tZ)(d.Vq,{title:s,onClose:e,isOpen:!0,dialogClassName:_.Ht,closeActionLabel:n("_common_dialog_dismiss_button"),isDestructive:!0,actions:{primary:{children:l,onClick:t,id:"deletion-dialog-confirm-button"},secondary:{children:r,onClick:e,autoFocus:!0,id:"deletion-dialog-dismiss-button"}},children:a})},h=({closeConfirmDeleteDialog:e,goToSharingAccess:t,isVisible:i,itemId:d,onDeletionSuccess:c,sharingStatus:_,translations:h,vaultItemType:b,isShared:g,isSharedViaUserGroup:k,isItemInCollection:S,isLastAdmin:w})=>{const{showToast:C}=(0,n.p)(),{translate:x}=(0,o.Z)(),{deleteVaultItem:y}=(0,a.u)(r.L);if(!i)return null;let v;return(g||_?.isShared)&&(k&&(v=l.GroupSharing),w&&(v=l.LastAdmin),S&&(v=l.CollectionSharing)),v&&t?(0,u.tZ)(p,{reason:v,translations:h,goToSharingAccess:t,closeCantDeleteDialog:e}):(0,u.tZ)(m,{closeConfirmDeleteDialog:e,onDeleteConfirm:async()=>{try{var e;(await y({id:d,vaultItemType:b})).tag===s.rq.Success?(C({description:null!=(e=h.deleteSuccessToast)?e:x("webapp_personal_info_edition_delete_success_toast")}),c()):C({description:x("_common_generic_error"),mood:"danger",isManualDismiss:!0})}catch(e){C({description:x("_common_generic_error"),mood:"danger",isManualDismiss:!0})}},translations:h})}},62042:(e,t,i)=>{i.d(t,{_:()=>l});var n=i(73704),a=i(88203),s=i(1639),r=i(36351);const o=({sharing:e})=>{const{translate:t}=(0,a.Z)();return(0,r.tZ)(s.Z,{tooltipPlacement:"top-start",sharing:e,text:t("webapp_sharing_invite_share"),origin:n.Origin.ItemDetailView})},l=({id:e,canShare:t,getSharing:i})=>t?(0,r.tZ)(o,{sharing:i(e)}):null},16009:(e,t,i)=>{i.d(t,{r:()=>a});let n=function(e){return e.CredentialsList="credentialsList",e.SecureNotesList="secureNotesList",e.UserList="user",e.GroupList="userGroup",e.CollectionList="collection",e}({});const a=(e,t)=>{switch(e?.previousPage?.type){case n.CredentialsList:return t.userCredentials;case n.SecureNotesList:return t.userSecureNotes;case n.UserList:return e.previousPage.alias?t.userSharingUserInfo(e.previousPage.alias):t.userCredentials;case n.GroupList:{const i=e.previousPage.groupId?.match(/{(.*)}/)?.[1];return i?t.userSharingGroupInfo(i):t.userCredentials}case n.CollectionList:{const i=e.previousPage.collectionId?.match(/{(.*)}/)?.[1];return i?t.userCollection(i):t.userCredentials}default:return t.userCredentials}}}}]);