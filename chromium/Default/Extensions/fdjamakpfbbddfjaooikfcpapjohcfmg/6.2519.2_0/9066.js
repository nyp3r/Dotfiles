"use strict";(globalThis.webpackChunk_dashlane_leeloo=globalThis.webpackChunk_dashlane_leeloo||[]).push([[9066],{59066:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Y});var a=n(54793),o=n(74172),r=n(48038),s=n(96832),i=n(80669),c=n(97143);class l{getContextualMetadata(e){return{moduleName:this.options.moduleName,useCaseName:this.options.useCaseName??"no-use-case",...e}}log(e,t){this.logger.log(e,this.getContextualMetadata(t))}info(e,t){this.logger.info(e,this.getContextualMetadata(t))}debug(e,t){this.logger.debug(e,this.getContextualMetadata(t))}trace(e,t){this.logger.trace(e,this.getContextualMetadata(t))}warn(e,t){this.logger.warn(e,this.getContextualMetadata(t))}error(e,t){this.logger.error(e,this.getContextualMetadata(t))}fatal(e,t){this.logger.fatal(e,this.getContextualMetadata(t))}constructor(e,t){(0,c._)(this,"logger",void 0),(0,c._)(this,"options",void 0),this.logger=e,this.options=t}}const d=({children:e,client:t,logger:n})=>{const a=s.useCallback((e=>t[e.name]),[t]),o=s.useMemo((()=>({appClient:{getModuleClient:a},reactAppLoggerFactory:e=>{if(!n)throw new Error('No logger "AppLogger" provided');return new l(n,e)}})),[a,n]);return s.createElement(i.I.Provider,{value:o},e)};var u=n(92077),h=n(29004),g=n(68976),m=n(37527);function _(e,t,n){const a=e[t]||(()=>0);e[t]=()=>{a.call(e),n.call(e)}}function p(e,t){let n=null;const a=function(t){let a=!1;return()=>{a||(a=!0,window.requestAnimationFrame&&window.requestAnimationFrame((()=>{n&&e.forceUpdate(),a=!1})))}}();_(e,"componentDidMount",(()=>{n=t.subscribe(a),a()})),_(e,"componentWillUnmount",(()=>{n&&n(),n=null}))}class C extends s.Component{getChildContext(){return{}}constructor(e){super(e),p(this,this.props.store)}render(){return s.Children.only(this.props.children)}}C.childContextTypes={};var Z=n(36351);const x=e=>(0,Z.tZ)("div",{children:s.Children.only(e.children)}),f=e=>(0,Z.tZ)(x,{children:(0,Z.tZ)(C,{store:e.store,children:s.Children.only(e.children)})});var v=n(14900),k=n(14191);var y=n(16166),b=n(22005),w=n(24507),E=n(84921);const S=({children:e})=>{const{data:t}=(0,w.k)(E.Z,"getTheme");return(e=>{const[,t]=(0,k.If)(),n=(()=>{const[e,t]=(0,s.useState)("light");return(0,s.useEffect)((()=>{const e=window.matchMedia("(prefers-color-scheme: dark)");t(e.matches?"dark":"light");const n=e=>{t(e.matches?"dark":"light")};return e.addEventListener("change",n),()=>e.removeEventListener("change",n)}),[]),e})();(0,s.useLayoutEffect)((()=>{if(!e)return;const a="system"===e?n:e;t(a),document.documentElement.style.setProperty("color-scheme","dark"===a?"dark":"light")}),[t,n,e])})(t),(0,Z.tZ)(s.Fragment,{children:e})},D=e=>(0,Z.tZ)(v.f6W,{theme:(0,y.It)(b.uH,v.uHP),children:(0,Z.tZ)(k.SG,{children:(0,Z.tZ)(S,{children:e.children})})});var M=n(7344),z=n(35001),N=n(45272);const X=s.createContext(""),B=({children:e})=>{const t=(0,N.tJ)();return(0,Z.tZ)(X.Provider,{value:t,children:e})};var I,L,T,A,F=n(5465),U=n(41339),O=n(80610),P=n(63847),q=n(29020),G=n(14856),V=n(68999),j=n(88203),H=n(62609);const W={display:"flex",alignItems:"center",gap:"8px"},J=({handleConsentSet:e})=>{const[t,n]=(0,s.useState)({interactionDataConsent:!0,personalDataConsent:!0}),{translate:a}=(0,j.Z)();return(0,Z.BX)(H.p,{title:a("account_creation_user_consent_title"),children:[(0,Z.tZ)(O.X,{readOnly:!0,checked:!0,label:a("account_creation_user_consent_mandatory_checkbox")}),(0,Z.BX)(P.k,{flexDirection:"column",gap:"8px",sx:{backgroundColor:"ds.container.agnostic.neutral.quiet",padding:"8px"},children:[(0,Z.tZ)(q.n,{children:a("account_creation_user_consent_mandatory_description")}),(0,Z.BX)(q.n,{sx:W,children:[I||(I=(0,Z.tZ)(G.v,{name:"LockOutlined",size:"medium"})),a("account_creation_user_consent_create_account")]}),(0,Z.BX)(q.n,{sx:W,children:[L||(L=(0,Z.tZ)(G.v,{name:"FeatureAutofillOutlined",size:"medium"})),a("account_creation_user_consent_autofill")]})]}),(0,Z.tZ)(O.X,{checked:t.interactionDataConsent,label:a("account_creation_user_consent_optional_checkbox"),onChange:e=>{return"interactionDataConsent",t=e.currentTarget.checked,void n((e=>({...e,interactionDataConsent:t})));var t}}),(0,Z.BX)(P.k,{flexDirection:"column",gap:"8px",sx:{backgroundColor:"ds.container.agnostic.neutral.quiet",padding:"8px"},children:[(0,Z.tZ)(q.n,{children:a("account_creation_user_consent_optional_description")}),(0,Z.BX)(q.n,{sx:W,children:[T||(T=(0,Z.tZ)(G.v,{name:"DashboardOutlined",size:"medium"})),a("account_creation_user_consent_tracking")]}),(0,Z.BX)(q.n,{sx:W,children:[A||(A=(0,Z.tZ)(G.v,{name:"TipOutlined",size:"medium"})),a("account_creation_user_consent_improve")]})]}),(0,Z.tZ)(q.n,{textStyle:"ds.body.reduced.regular",sx:{marginBottom:"24px"},children:a.markup("account_creation_user_consent_disclaimer_markup",{},{linkTarget:"_blank"})}),(0,Z.BX)(P.k,{gap:"12px",justifyContent:"flex-end",children:[(0,Z.tZ)(V.z,{mood:"neutral",intensity:"supershy",size:"large",onClick:async()=>{await((0,U.Ez)("management.uninstallSelf")?chrome.management.uninstallSelf(undefined):Promise.reject(new Error("No management.uninstallSelf support")))},children:a("account_creation_user_consent_decline")}),(0,Z.tZ)(V.z,{intensity:"catchy",size:"large",onClick:async()=>{await e(t)},children:a("account_creation_user_consent_agree")})]})]})};var R=n(91432);const K=({children:e})=>{const{setUserConsent:t,getUserConsent:n}={getIsConsentNeeded:async()=>!0!==(await F.C.getGlobalExtensionSettings()).personalDataConsent,setUserConsent:async e=>await F.C.setGlobalExtensionSettings(e),getUserConsent:async()=>await F.C.getGlobalExtensionSettings()},[a,o]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{void 0===a&&n().then((e=>{null!==e.interactionDataConsent||null!==e.personalDataConsent?o(!1):o(!0)}))}),[n,a]),a?(0,Z.tZ)(R.s,{children:(0,Z.tZ)(J,{handleConsentSet:async e=>{await t(e),o(!1)}})}):e};var Q=n(99494);const Y=e=>{const t={host:e.host,reducer:M.Z,store:e.store,translate:e.translate,routes:e.namedRoutes};return(0,Z.tZ)(f,{store:e.store,children:(0,Z.tZ)(d,{client:e.coreClient,logger:e.logger,children:(0,Z.tZ)(r.wz,{channel:e.carbonChannel,children:(0,Z.tZ)(u.F0,{history:e.history,children:(0,Z.tZ)(a.zt,{store:e.store,children:(0,Z.tZ)(D,{children:(0,Z.tZ)(h.b,{value:{translate:e.translate},children:(0,Z.tZ)(g.u,{portalId:"alert-popup-portal",children:(0,Z.tZ)(o.V,{portalId:m.ex,defaultCloseActionLabel:e.translate("_common_toast_close_label"),sectionName:e.translate("_common_toast_section_name"),itemName:e.translate("_common_toast_item_name"),children:(0,Z.tZ)(u.v1,{value:t,children:(0,Z.tZ)(B,{children:(0,Z.tZ)(z.r,{moduleName:"leeloo-routes",useCaseName:e.history.location.pathname,children:(0,Z.tZ)(K,{children:(0,Z.tZ)(Q.e,{appVersion:e.appVersion,children:e.routes})})})})})})})})})})})})})})}}}]);