"use strict";(globalThis.webpackChunk_dashlane_leeloo=globalThis.webpackChunk_dashlane_leeloo||[]).push([[9969],{39969:(e,t,i)=>{i.r(t),i.d(t,{Connected:()=>W});var a,n=i(14877),s=i(39431),l=i(24507),o=i(19122),r=i(96832),c=i(26849),d=i(8180),_=i(78346),p=i(13134),u=i(14900),m=i(63520),g=i(92077),h=i(88203),b=i(76376),y=i(86498),f=i(82994),w=function(e){return e.AutofillWebAskBeforeAutologin="autofill_web_askBeforeAutologin",e.AutofillWebInjectScriptOnStartDev="autofill_web_injectScriptOnStart_dev",e.ReplaceInputListeners="autofill_web_replaceInputListeners",e.PasskeySupport="autofill_web_passkey_support",e.ImproveImpalaVisibility="autofill_web_improveImpalaVisibility",e.ImproveImpalaVisibilityDev="autofill_web_improveImpalaVisibility_dev",e.DisableEmailPasswordWarningDev="ace_disable_email_password_warning_dev",e.DisableEmailPasswordWarning="ace_disable_email_password_warning",e.AdminInterview="ace_admin_tab_interview",e.AdminInterviewDev="ace_admin_tab_interview_dev",e.SecretsAttachment="ace_secrets_vault_attachment",e.SharedCollectionInSaveWebcard="shared_collection_in_save_webcard_dev",e.UninstallNudges="ace_nudges_uninstall_slack",e.EnableVortex="ace_web_enable_vortex",e.FunAuditLogs="ace_item_fun_auditlogs",e.CloudPasskeyBeta="ace_web_cloud_passkey_beta",e.CloudPasskeyGA="ace_web_cloud_passkey_ga",e.InAppNudgesV1="ace_web_nudges_extension_compromised",e.PhishingAlertInTac="ace_web_phishing_page_tac",e.MLPhishingPreventionWebcard="ace_web_ml_antiphishing_alert",e}({}),k=i(82429),S=i(93853),D=i(30202),v=i(51409),C=i(31062),I=i(9519),A=i(40577),T=i(73704),Z=i(45272),L=i(42670),x=i(61605),E=i(68037),P=i(67406),V=i(36351);const N=({passkeyContent:e,spaceDetails:t,signalEditedValues:i})=>{var n,s;const{translate:l}=(0,h.Z)(),{shouldShowFrozenStateDialog:o}=(0,L.Ub)(),c=null!=(n=t?.teamName)?n:l("webapp_credential_edition_field_space_personal"),{userDisplayName:d,rpId:_,itemName:u,note:m,spaceId:g,id:b}=e;(0,r.useEffect)((()=>{(0,Z.Nc)(T.PageView.ItemPasskeyDetails)}),[]);const y=null!=(s=(0,A.o)(w.CloudPasskeyGA))&&s,f=t=>a=>{const n="string"==typeof a?a:a.target.value;i({...e,[t]:n})},N=Boolean(t?.info.forcedDomainsEnabled&&e.spaceId===t?.teamId||o);return null===o?null:(0,V.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"16px"},children:[(0,V.BX)(E.u,{title:l("webapp_passkey_edition_title_passkey_detail"),additionalSx:{display:"flex",flexDirection:"column",gap:"8px"},description:e.keyAlgorithm!==I.aG.CloudPasskey||y?null:a||(a=(0,V.tZ)(k.C,{label:"beta",mood:"positive",intensity:"quiet"})),children:[(0,V.tZ)(S.n,{readOnly:!0,value:d,label:l("webapp_passkey_edition_field_username"),placeholder:l("webapp_passkey_edition_field_username_placeholder")},"passkeyUsername"),(0,V.tZ)(D.q,{label:l("webapp_credential_edition_field_website"),onChange:(e,t="")=>{if(e instanceof Event&&t)throw new Error("handleChange was called with both a ChangeEvent and key.")},showOpenWebsite:{label:l("webapp_credential_edition_field_website_action_goto"),onClick:()=>{(0,Z.Kz)(new T.UserOpenExternalVaultItemLinkEvent({itemId:b,itemType:T.ItemTypeWithLink.Passkey,domainType:T.DomainType.Web})),(0,x.Yo)(new p.Y(_).getUrlWithFallbackHttpsProtocol())}},value:_}),(0,V.tZ)(v.K,{"data-name":"note",readOnly:o,label:l("webapp_passkey_edition_field_notes"),placeholder:l("webapp_passkey_edition_field_placeholder_no_notes"),value:m,onChange:f("note")})]}),(0,V.BX)(E.u,{title:l("webapp_passkey_edition_title_organisation"),additionalSx:{display:"flex",flexDirection:"column",gap:"8px"},children:[(0,V.tZ)(S.n,{value:null!=u?u:d,onChange:f("itemName"),label:l("webapp_passkey_edition_field_item_name"),placeholder:l("webapp_passkey_edition_field_item_name_placeholder"),readOnly:o},"passkeyItemName"),(0,V.tZ)(C.u,{content:l("webapp_passkey_edition_field_force_categorized",{space:c}),passThrough:!N,children:(0,V.tZ)("div",{children:(0,V.tZ)(P.M,{spaceId:g,isDisabled:N,onChange:e=>f("spaceId")(e),isUsingNewDesign:!0})})})]})]})};var G=i(26555);const U=({item:e})=>{const{routes:t}=(0,b.Xo)(),{translate:i}=(0,h.Z)(),{updateVaultItem:a}=(0,d.u)(n.L),[l,w]=(0,r.useState)(!1),k=(0,g.k6)(),S=(0,y.V)(),{spaceDetails:D}=(0,o.fV)(),[v,C]=(0,r.useState)(e),[I,A]=(0,r.useState)(!1),[T,Z]=(0,r.useState)(!1),L=()=>{(0,g.uX)(t.userPasskeys)},x={confirmDeleteConfirm:i("webapp_passkey_edition_delete_confirm"),confirmDeleteDismiss:i("webapp_passkey_edition_delete_dismiss"),confirmDeleteSubtitle:i("webapp_passkey_edition_delete_text"),confirmDeleteTitle:i("webapp_passkey_edition_delete_header"),deleteSuccessToast:i("webapp_passkey_edition_name_delete_alert",{passkey:e.rpName})},E=()=>{S.showAlert(i("_common_generic_error"),u.BLW.ERROR)},P=()=>{if(D?.info.forcedDomainsEnabled&&v.spaceId!==D.teamId){const e=v.userDisplayName?.split("@")[1];if(D.info.teamDomains.includes(e))return D.teamId}return v.spaceId};return(0,V.BX)(m.zI,{itemHasBeenEdited:T,isViewingExistingItem:!0,isUsingNewDesign:!0,onNavigateOut:L,onClickDelete:()=>w(!0),onSubmit:async()=>{if(!I){A(!0);try{const n=await a({vaultItemType:s.U.Passkey,content:{...v,spaceId:P()},id:e.id});if((0,_.d6)(n)){const a=i("webapp_passkey_edition_name_update_alert",{passkey:e.rpName});S.showAlert(a,u.BLW.SUCCESS),k.push(t.userPasskeys)}else A(!1),E()}catch(e){A(!1),E()}}},formId:"edit_passkey_panel",header:(0,V.tZ)(m.V9,{icon:(0,V.tZ)(G.h,{size:"xlarge",domainURL:new p.Y(v.rpId).getRootDomain()}),title:e.rpName}),children:[(0,V.tZ)(N,{passkeyContent:v,signalEditedValues:t=>{Z(!(0,c.equals)(t,e)),C(t)},spaceDetails:D}),(0,V.tZ)(f.s,{isVisible:l,itemId:e.id,closeConfirmDeleteDialog:()=>w(!1),onDeletionSuccess:L,translations:x,vaultItemType:s.U.Passkey})]})},W=e=>{const{data:t}=(0,l.k)(n.L,"query",{vaultItemTypes:[s.U.Passkey],ids:[`{${e.match.params.uuid}}`]});return t?.passkeysResult.items.length?(0,V.tZ)(o.qc,{lee:e.lee,children:(0,V.tZ)(U,{...e,item:t.passkeysResult.items[0]})}):null}},82994:(e,t,i)=>{i.d(t,{s:()=>g}),i(96832);var a=i(62264),n=i(8180),s=i(51031),l=i(14877),o=i(88203);let r=function(e){return e.LastAdmin="LastAdmin",e.GroupSharing="GroupSharing",e.CollectionSharing="CollectionSharing",e.Generic="Generic",e}({});var c=i(78956),d=i(24731),_=i(36351);const p=({reason:e,translations:t,goToSharingAccess:i,closeCantDeleteDialog:a})=>{const{translate:n}=(0,o.Z)(),s=((e,t)=>{const{groupSharingTitle:i,lastAdminTitle:a,collectionSharingTitle:n,genericErrorTitle:s}=e;switch(t){case r.LastAdmin:return a;case r.GroupSharing:return i;case r.CollectionSharing:return n;case r.Generic:return s;default:return(0,d.U)(t)}})(t,e),l=((e,t)=>{const{groupSharingSubtitle:i,lastAdminSubtitle:a,collectionSharingSubtitle:n,genericErrorSubtitle:s}=e;switch(t){case r.LastAdmin:return a;case r.GroupSharing:return i;case r.CollectionSharing:return n;case r.Generic:return s;default:return(0,d.U)(t)}})(t,e);return(0,_.tZ)(c.Vq,{isOpen:!0,onClose:a,title:null!=s?s:"",closeActionLabel:n("_common_dialog_dismiss_button"),actions:e===r.LastAdmin||r.GroupSharing||r.CollectionSharing?{primary:{children:t.lastAdminActionLabel,onClick:()=>{i(),a()}}}:void 0,children:l})};var u=i(37527);const m=({closeConfirmDeleteDialog:e,onDeleteConfirm:t,translations:i})=>{const{translate:a}=(0,o.Z)(),{confirmDeleteSubtitle:n,confirmDeleteTitle:s,confirmDeleteDismiss:l,confirmDeleteConfirm:r}=i;return(0,_.tZ)(c.Vq,{title:s,onClose:e,isOpen:!0,dialogClassName:u.Ht,closeActionLabel:a("_common_dialog_dismiss_button"),isDestructive:!0,actions:{primary:{children:r,onClick:t,id:"deletion-dialog-confirm-button"},secondary:{children:l,onClick:e,autoFocus:!0,id:"deletion-dialog-dismiss-button"}},children:n})},g=({closeConfirmDeleteDialog:e,goToSharingAccess:t,isVisible:i,itemId:c,onDeletionSuccess:d,sharingStatus:u,translations:g,vaultItemType:h,isShared:b,isSharedViaUserGroup:y,isItemInCollection:f,isLastAdmin:w})=>{const{showToast:k}=(0,a.p)(),{translate:S}=(0,o.Z)(),{deleteVaultItem:D}=(0,n.u)(l.L);if(!i)return null;let v;return(b||u?.isShared)&&(y&&(v=r.GroupSharing),w&&(v=r.LastAdmin),f&&(v=r.CollectionSharing)),v&&t?(0,_.tZ)(p,{reason:v,translations:g,goToSharingAccess:t,closeCantDeleteDialog:e}):(0,_.tZ)(m,{closeConfirmDeleteDialog:e,onDeleteConfirm:async()=>{try{var e;(await D({id:c,vaultItemType:h})).tag===s.rq.Success?(k({description:null!=(e=g.deleteSuccessToast)?e:S("webapp_personal_info_edition_delete_success_toast")}),d()):k({description:S("_common_generic_error"),mood:"danger",isManualDismiss:!0})}catch(e){k({description:S("_common_generic_error"),mood:"danger",isManualDismiss:!0})}},translations:g})}},30202:(e,t,i)=>{i.d(t,{q:()=>l});var a=i(36351),n=i(96832),s=i(93853);const l=(0,n.forwardRef)((({showOpenWebsite:e,actions:t=[],prefix:i,onChange:l,...o},r)=>{const{value:c}=o,[d,_]=(0,n.useState)(c&&""!==c),p=[...t];return d&&e&&p.push({label:e.label,iconName:"ActionOpenExternalLinkOutlined",onClick:t=>{t&&e.onClick(t)},role:"link"}),(0,a.tZ)(s.n,{...o,ref:r,prefix:i,onChange:e=>{_(""!==e.target.value),l?.(e)},actions:p})}));l.displayName="WebsiteField"},9519:(e,t,i)=>{i.d(t,{T5:()=>s,_u:()=>l,aG:()=>a,p3:()=>n});var a=function(e){return e[e.CloudPasskey=-65537]="CloudPasskey",e[e.ES256=-7]="ES256",e}({});function n(e){return Boolean(e)&&"KWPasskey"===e.kwType}function s(e){return n(e)&&-65537===e.KeyAlgorithm}function l(e){return n(e)&&-7===e.KeyAlgorithm}}}]);