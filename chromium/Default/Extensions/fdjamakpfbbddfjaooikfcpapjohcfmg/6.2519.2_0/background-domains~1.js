"use strict";(globalThis.webpackChunk_dashlane_amphora=globalThis.webpackChunk_dashlane_amphora||[]).push([["417"],{36031:function(e,t,a){a.d(t,{m:()=>d});var n=a(36503),i=a(70376),o=a(14820),r=a(51921),s=a(72441),c=a(95106);let d=(0,n.Q)({name:"scim",commands:{updateScimConfiguration:i.G,generateScimToken:o.S},events:{},queries:{scimConfiguration:r.I,scimEndpoint:s.v,provisioningSolution:c.M}})},14820:function(e,t,a){a.d(t,{S:()=>o});var n=a(66122),i=a(15021);class o extends(0,n.g)({scope:i.F.User}){}},70376:function(e,t,a){a.d(t,{G:()=>o});var n=a(66122),i=a(15021);class o extends(0,n.g)({scope:i.F.User}){}},95106:function(e,t,a){a.d(t,{M:()=>o});var n=a(45429),i=a(15021);class o extends(0,n.k)({scope:i.F.User}){}},51921:function(e,t,a){a.d(t,{I:()=>o});var n=a(45429),i=a(15021);class o extends(0,n.k)({scope:i.F.User}){}},72441:function(e,t,a){a.d(t,{v:()=>o});var n=a(45429),i=a(15021);class o extends(0,n.k)({scope:i.F.User}){}},17426:function(e,t,a){a.d(t,{Bs:()=>r,Hh:()=>o,k5:()=>i});var n=a(63762);let i=n.z.object({token:n.z.string(),active:n.z.boolean()}).optional(),o=n.z.nativeEnum({confidentialScim:"confidential-scim",selfHostedScim:"self-hosted-scim",adSync:"adsync",none:"none"}),r=n.z.object({provisioningSolution:o.optional()})},59842:function(e,t,a){a.d(t,{y:()=>v});var n=a(36503),i=a(58072),o=a(35250),r=a(36661),s=a(65893),c=a(29184),d=a(16432),l=a(18687),u=a(58204),m=a(13687),g=a(60197),p=a(71586),S=a(50355),A=a(18310),h=a(98037),N=a(15021);class E extends(0,h.d)({scope:N.F.User}){}var I=a(75900),C=a(59930);let v=(0,n.Q)({name:"confidentialSSOApi",commands:{checkDNSValidation:i.o,clearSettings:o.h,createTeam:r.p,migrateToConfidentialSso:s.Dt,deleteDomain:c.k,enableSso:d.F,loginUserWithEnclaveSSO:l.B,provisionDomain:u.p,testLoginUserWithEnclaveSSO:m.b,updateMetadata:g.o,validateMetadata:p.l,updateGroupProvisioningConfiguration:S.Z5},events:{confidentialSsoSettingsReset:A.z,ssoSolutionChanged:E},queries:{ssoProvisioning:I._,getGroupProvisioningConfiguration:C.$}})},11807:function(e,t,a){a.d(t,{E:()=>o});var n=a(46266),i=a(59842);class o extends(0,n.E)(i.y){}(0,n.K)(i.y,o)},58072:function(e,t,a){a.d(t,{o:()=>o});var n=a(66122),i=a(15021);class o extends(0,n.g)({scope:i.F.User}){}},35250:function(e,t,a){a.d(t,{h:()=>o});var n=a(66122),i=a(15021);class o extends(0,n.g)({scope:i.F.User}){}},36661:function(e,t,a){a.d(t,{p:()=>o});var n=a(66122),i=a(15021);class o extends(0,n.g)({scope:i.F.User}){}},29184:function(e,t,a){a.d(t,{k:()=>o});var n=a(66122),i=a(15021);class o extends(0,n.g)({scope:i.F.User}){}},16432:function(e,t,a){a.d(t,{F:()=>o});var n=a(66122),i=a(15021);class o extends(0,n.g)({scope:i.F.User}){}},18687:function(e,t,a){a.d(t,{B:()=>o});var n=a(66122),i=a(15021);class o extends(0,n.g)({scope:i.F.Device}){}},65893:function(e,t,a){a.d(t,{Dt:()=>c,Fw:()=>s,hw:()=>r});var n=a(66122),i=a(15021),o=a(96272);let r=(0,o.Vj)("SSO_CONNECTOR_KEY_MISSING","SSO Migration failed: SSO connector key is missing"),s=(0,o.Vj)("SSO_CONNECTOR_KEY_FORMAT_INVALID","SSO Migration failed: SSO connector key format is invalid");class c extends(0,n.g)({scope:i.F.User}){}},58204:function(e,t,a){a.d(t,{p:()=>o});var n=a(66122),i=a(15021);class o extends(0,n.g)({scope:i.F.User}){}},13687:function(e,t,a){a.d(t,{b:()=>o});var n=a(66122),i=a(15021);class o extends(0,n.g)({scope:i.F.User}){}},50355:function(e,t,a){a.d(t,{B3:()=>l,HC:()=>d,Y3:()=>m,Z5:()=>g,b2:()=>u,gY:()=>c,hJ:()=>s});var n,i=a(66122),o=a(15021),r=a(96272),s=((n={}).GENERIC_ERROR="GENERIC_ERROR",n.TEAM_NOT_FOUND="TEAM_NOT_FOUND",n.MISMATCHING_ADMIN_PROVISIONING_KEY="MISMATCHING_ADMIN_PROVISIONING_KEY",n.IDP_NOT_FOUND="IDP_NOT_FOUND",n.NO_IDP_CONFIGURATION_UPDATE="NO_IDP_CONFIGURATION_UPDATE",n);let c=(0,r.Vj)("TEAM_NOT_FOUND","Team not found"),d=(0,r.Vj)("MISMATCHING_ADMIN_PROVISIONING_KEY","Mismatching admin provisioning key"),l=(0,r.Vj)("IDP_NOT_FOUND","IDP not found"),u=(0,r.Vj)("NO_IDP_CONFIGURATION_UPDATE","No IDP configuration update"),m=(0,r.Vj)("GENERIC_ERROR","Generic error");class g extends(0,i.g)({scope:o.F.User}){}},60197:function(e,t,a){a.d(t,{o:()=>o});var n=a(66122),i=a(15021);class o extends(0,n.g)({scope:i.F.User}){}},71586:function(e,t,a){a.d(t,{l:()=>o});var n=a(66122),i=a(15021);class o extends(0,n.g)({scope:i.F.User}){}},18310:function(e,t,a){a.d(t,{z:()=>o});var n=a(98037),i=a(15021);class o extends(0,n.d)({scope:i.F.User}){}},59930:function(e,t,a){a.d(t,{$:()=>o});var n=a(45429),i=a(15021);class o extends(0,n.k)({scope:i.F.User}){}},75900:function(e,t,a){a.d(t,{_:()=>o});var n=a(45429),i=a(15021);class o extends(0,n.k)({scope:i.F.User}){}},55314:function(e,t,a){a.d(t,{JU:()=>m,WO:()=>l,X5:()=>i,pI:()=>u});var n=a(63762);n.z.object({groupProvisioningActivated:n.z.boolean()}),n.z.object({idpUuid:n.z.string().uuid(),certificates:n.z.array(n.z.string()),entrypoint:n.z.string(),groupProvisioningActivated:n.z.boolean().optional(),creationDateUnix:n.z.number(),updateDateUnix:n.z.number()});let i=n.z.enum(["valid","pending","expired","invalid"]),o=n.z.enum(["tokenNotFound","invalidToken"]),r=n.z.object({status:i.nullable(),verificationToken:n.z.string(),lastCheckDateUnix:n.z.number(),pendingReason:o.nullable(),expiryDateUnix:n.z.number()}),s=n.z.object({creationDateUnix:n.z.number(),dnsCheckStatus:r,domainName:n.z.string(),idpUuid:n.z.ostring(),updateDateUnix:n.z.number()});n.z.record(n.z.string(),s);let c=n.z.object({subdomainValue:n.z.string().nullable(),txtValue:n.z.string().nullable(),verificationStatus:i.nullable(),tokenFound:n.z.string().nullable(),pendingReason:o.nullable()}),d=n.z.array(n.z.object({domainName:n.z.string().url(),verificationStatus:i,idpUuid:n.z.string().optional().nullable()})),l=n.z.nativeEnum({none:"none",confidentialSaml:"confidential-saml",selfHostedSaml:"self-hosted-saml",ssoConnector:"sso-connector"}),u=n.z.enum(["none","incomplete","complete","enabled"]),m=n.z.object({isInitialized:n.z.boolean(),ssoSolution:l,ssoStatus:u,global:n.z.object({adminProvisioningKey:n.z.string().nullable(),isTeamProvisionedInNitro:n.z.boolean().nullable(),teamUuid:n.z.string().nullable(),ssoCapable:n.z.boolean().nullable(),ssoIsNitroProvider:n.z.boolean().nullable()}),idpApplication:n.z.object({entityId:n.z.string().nullable(),acsUrl:n.z.string().nullable(),signOnUrl:n.z.string().nullable()}),idpMetadata:n.z.object({metadataValue:n.z.string().nullable(),idpUuid:n.z.string().nullable(),groupProvisioningActivated:n.z.boolean().nullable()}),domainSetup:d,domainVerificationInfo:n.z.record(n.z.string().url(),c),enableSSO:n.z.object({ssoEnabled:n.z.boolean().nullable()})})},32683:function(e,t,a){a.d(t,{x:()=>i});let n=["local","staging","prod"];function i(e){return n.some(t=>t===e)}},27458:function(e,t,a){a.d(t,{i:()=>Y});var n=a(21636),i=a(48035),o=a(87253),r=a(22104),s=a(36031),c=a(15021),d=a(17426),l=a(59982),u=a(68238);let m=e=>d.k5.safeParse(e).success,g=void 0;class p extends(0,l.Q)({persist:!1,capacity:u.Y._001KB,initialValue:g,scope:c.F.User,storeName:"confidential-scim-state",storeTypeGuard:m}){}var S=a(94190),A=a(94680),h=a(44577),N=a(306),E=a(59355);class I{async getConfidentialScimConfig(){let e={token:"",active:!1},{teamUuid:t,adminProvisioningKey:a}=await this.getTeamIdentifiers(),n=await this.enclaveApiClient.scim.getScimConfiguration({teamUuid:t,adminProvisioningKey:a});if((0,N.hx)(n))throw Error("cannot get scim configuration");let{active:i,token:o}=(0,N.db)(n);return e.active=i,e.token=o??"",e}async setConfidentialScimConfig(e){let{teamUuid:t,adminProvisioningKey:a}=await this.getTeamIdentifiers();await this.enclaveApiClient.scim.setScimConfiguration({teamUuid:t,adminProvisioningKey:a,token:e.token??"",active:e.active??!1})}async getTeamIdentifiers(){let e=await (0,h.z)(this.teamEnclaveClient.queries.getTeamIdentifiers());if((0,N.hx)(e))throw Error("cannot get team info");let{teamUuid:t,adminProvisioningKey:a}=(0,N.db)(e);if(!a)throw Error("[scimService] - adminProvisioningKey is missing, createTeamInEnclave should be called first");return{teamUuid:t,adminProvisioningKey:a}}constructor(e,t){this.enclaveApiClient=e,this.teamEnclaveClient=t}}I=(0,n.gn)([(0,S.GS)(),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===A.l?Object:A.l,void 0===E.G?Object:E.G])],I);var C=a(72907),v=a(72233),T=a(69853),B=a(62506),y=a(72441),f=a(33031);class O{execute(){return this.confidentialScimStore.state$.pipe((0,C.w)(async e=>{if(!e?.token)return(0,N.Rn)({tag:"Could not load team uuid"});let{teamUuid:t}=await this.confidentialScimService.getTeamIdentifiers();if(!t)return(0,N.Rn)({tag:"Could not load team uuid"});let a=new URL(`scim/${t}`,this.enclaveApiSettings.enclaveUrl);return(0,N.Vp)({endpoint:a.href})}),(0,v.K)(()=>(0,T.of)((0,N.Rn)({tag:"Could not load team uuid"}))))}constructor(e,t,a){this.enclaveApiSettings=e,this.confidentialScimService=t,this.confidentialScimStore=a}}O=(0,n.gn)([(0,B.e)(y.v),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===f.N6?Object:f.N6,void 0===I?Object:I,p])],O);let b=e=>d.Bs.safeParse(e).success,R={};class P extends(0,l.Q)({persist:!1,capacity:u.Y._001KB,initialValue:R,scope:c.F.User,storeName:"provisioning-state",storeTypeGuard:b}){}var U=a(37404),D=a(37368),z=a(70376);class F{async execute({body:e}){let t=await this.confidentialScimStore.getState();try{let a={token:e.token??(t?.token||""),active:e.active??!!t?.active};return await this.confidentialScimStore.set({...a}),await this.confidentialScimService.setConfidentialScimConfig({...t,...e}),(0,N.Vp)(void 0)}catch(e){return await this.confidentialScimStore.set(t),(0,N.Rn)({tag:e.message})}}constructor(e,t){this.confidentialScimService=e,this.confidentialScimStore=t}}F=(0,n.gn)([(0,D.W)(z.G),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===I?Object:I,p])],F);var _=a(14820),L=a(11807),w=a(35444),k=a(49247);class M{async execute(){let e=await this.confidentialScimStore.getState(),{global:{ssoIsNitroProvider:t}}=await this.ssoProvisioningStore.getState();try{t||await this.ssoClient.commands.createTeam(),await this.carbonClient.commands.updateTeamSettings({provisioningSolution:d.Hh.enum.confidentialScim});let e=crypto.randomUUID();return await this.confidentialScimStore.set({token:e,active:!1}),await this.confidentialScimService.setConfidentialScimConfig({token:e,active:!1}),(0,N.Vp)(void 0)}catch(t){return this.confidentialScimStore.set(e),(0,N.Rn)({tag:`Something wrong happened: ${t}`})}}constructor(e,t,a,n,i){this.confidentialScimStore=e,this.confidentialScimService=t,this.ssoClient=a,this.ssoProvisioningStore=n,this.carbonClient=i}}M=(0,n.gn)([(0,D.W)(_.S),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[p,void 0===I?Object:I,void 0===L.E?Object:L.E,void 0===w.M?Object:w.M,void 0===k._?Object:k._])],M);var x=a(51921);class V{execute(){return this.confidentialScimStore.state$.pipe((0,C.w)(async e=>e?(0,N.Vp)(e):this.getInitState()))}async getInitState(){try{let e=await this.scimConfigurationService.getConfidentialScimConfig();return await this.scimStore.set(e),(0,N.Vp)(e)}catch(e){return(0,N.Vp)({active:!1,token:null})}}constructor(e,t,a){this.confidentialScimStore=e,this.scimConfigurationService=t,this.scimStore=a}}V=(0,n.gn)([(0,B.e)(x.I),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[p,void 0===I?Object:I,p])],V);var G=a(53868),K=a(42589),j=a(95106),H=a(64898);class W{execute(){return this.provisioningStore.state$.pipe((0,C.w)(e=>e.provisioningSolution?(0,T.of)((0,N.Vp)(e.provisioningSolution)):this.fetchInfoFromTeamPlanDetails().pipe((0,G.b)(t=>{this.provisioningStore.set({...e,provisioningSolution:t})}),(0,K.U)(N.Vp))))}fetchInfoFromTeamPlanDetails(){return this.teamPlanDetailsClient.queries.getTeamProvisioningInfo().pipe((0,K.U)(e=>{if((0,N.hx)(e))return d.Hh.enum.none;let{provisioningSolution:t}=(0,N.db)(e);if(!t)return d.Hh.enum.none;let a=d.Hh.safeParse(t);return a.success?a.data:d.Hh.enum.none}))}constructor(e,t){this.teamPlanDetailsClient=e,this.provisioningStore=t}}W=(0,n.gn)([(0,B.e)(j.M),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===H.e?Object:H.e,P])],W);class Y{}Y=(0,n.gn)([(0,i.Y)({api:s.m,imports:[o.D,U.D,r.G],handlers:{commands:{updateScimConfiguration:F,generateScimToken:M},events:{},queries:{scimConfiguration:V,scimEndpoint:O,provisioningSolution:W}},stores:[p,P],providers:[I]})],Y)},37404:function(e,t,a){a.d(t,{D:()=>eQ});var n=a(21636),i=a(48035),o=a(79869),r=a(90573),s=a(99481),c=a(88288),d=a(22104),l=a(59842),u=a(94190),m=a(55314),g=a(35444);let p="_dashlane-challenge";class S{async reset(){await this.store.init({isInitialized:!1,ssoSolution:m.WO.enum.none,ssoStatus:m.pI.enum.none,global:{adminProvisioningKey:null,teamUuid:null,ssoIsNitroProvider:null,isTeamProvisionedInNitro:null,ssoCapable:null},idpApplication:{entityId:null,acsUrl:null,signOnUrl:null},idpMetadata:{metadataValue:null,idpUuid:null,groupProvisioningActivated:null},domainSetup:[],domainVerificationInfo:{},enableSSO:{ssoEnabled:null}})}set(e){return this.store.set(e)}constructor(e){this.store=e}}S=(0,n.gn)([(0,u.GS)(),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===g.M?Object:g.M])],S);var A=a(17507);class h extends A.f{}h=(0,n.gn)([(0,u.GS)()],h);var N=a(6223),E=a(44577),I=a(306),C=a(59355),v=a(64898),T=a(94680),B=a(49247);let y=e=>e?`${new URL(e).origin}/saml/callback`:"";class f{async fetchInitialValue(){let e=await this.getIsTeamSsoCapable();if(!e)return{isInitialized:!0,ssoSolution:m.WO.enum.none,ssoStatus:m.pI.enum.none,global:{adminProvisioningKey:null,teamUuid:null,ssoIsNitroProvider:null,isTeamProvisionedInNitro:null,ssoCapable:!1},idpApplication:{entityId:null,acsUrl:null,signOnUrl:null},idpMetadata:{metadataValue:null,idpUuid:null,groupProvisioningActivated:null},domainSetup:[],domainVerificationInfo:{},enableSSO:{ssoEnabled:null}};let{teamUuid:t,adminProvisioningKey:a}=await this.getTeamIdentifiers(),n=await this.getTeamSsoSettings();if(n.ssoSolution===m.WO.enum.confidentialSaml&&!a)throw Error("[InitSsoProvisioningCommand] team is confidential but has no adminProvisioningKey");let i=n.ssoSolution===m.WO.enum.confidentialSaml&&a?await this.getTeamFromEnclave():{domains:{},idps:{},updateDateUnix:0,messageIntegrations:{slackStatus:!1}},o=this.inferSsoStatus(n,i),r=Object.keys(i.idps)[0]??null;return{isInitialized:!0,ssoSolution:n.ssoSolution??m.WO.enum.none,ssoStatus:o,global:{adminProvisioningKey:a??null,isTeamProvisionedInNitro:!!a,ssoIsNitroProvider:n.ssoIsNitroProvider??null,ssoCapable:e,teamUuid:t},idpApplication:{acsUrl:y(this.enclaveApiClient.enclaveUrl),entityId:"dashlane-nitro-sso",signOnUrl:"https://app.dashlane.com"},idpMetadata:{idpUuid:r,metadataValue:n.ssoIdpMetadata??null,groupProvisioningActivated:r?i.idps[r].groupProvisioningActivated??null:null},domainSetup:this.getDomainSetupState(i.domains),domainVerificationInfo:this.getDomainVerificationInfo(i.domains),enableSSO:{ssoEnabled:!!n.ssoEnabled}}}async getIsTeamSsoCapable(){let e=await (0,E.z)(this.teamPlanDetailsClient.queries.getTeamCapabilities());if((0,I.hx)(e))throw Error("[InitSsoProvisioningCommand] unable to retrieve team capabilities");return!!(0,I.db)(e).sso.enabled}async getTeamIdentifiers(){let e=await (0,E.z)(this.teamEnclaveClient.queries.getTeamIdentifiers());if((0,I.hx)(e))throw Error("[InitSsoProvisioningCommand] unable to retrieve team identifiers");return(0,I.db)(e)}async getTeamSsoSettings(){let e=await (0,E.z)(this.teamPlanDetailsClient.queries.getTeamSsoInfo());if((0,I.hx)(e))throw Error("[InitSsoProvisioningCommand] unable to retrieve team settings");return(0,I.db)(e)}inferSsoStatus(e,t){return e.ssoSolution&&e.ssoSolution!==m.WO.enum.none?e.ssoEnabled?m.pI.enum.enabled:e.ssoIdpMetadata||e.ssoIdpEntrypoint||e.ssoServiceProviderUrl||Object.keys(t.domains).length?m.pI.enum.incomplete:m.pI.enum.none:m.pI.enum.none}getDomainSetupState(e){return Object.entries(e).map(([e,t])=>({domainName:e,verificationStatus:t.dnsCheckStatus.status??"pending"}))}getDomainVerificationInfo(e){return Object.entries(e).reduce((e,[t,a])=>(e[t]={txtValue:a.dnsCheckStatus.verificationToken,verificationStatus:m.X5.parse(a.dnsCheckStatus.status),subdomainValue:p,pendingReason:a.dnsCheckStatus.pendingReason,tokenFound:null},e),{})}async getTeamFromEnclave(){let e=await (0,E.z)(this.teamEnclaveClient.queries.getTeamFromEnclave());if((0,I.hx)(e))throw Error("[InitSsoProvisioningCommand] unable to retrieve team from enclave");return(0,I.db)(e)}constructor(e,t,a,n){this.enclaveApiClient=e,this.teamEnclaveClient=t,this.teamPlanDetailsClient=a,this.carbonLegacyClient=n}}f=(0,n.gn)([(0,u.GS)(),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===T.l?Object:T.l,void 0===C.G?Object:C.G,void 0===v.e?Object:v.e,void 0===B._?Object:B._])],f);class O extends(0,s.ne)(){}var b=a(37368),R=a(18687);class P{}class U{async execute(e){let t=e.body.userEmailAddress,a=t.slice(t.indexOf("@")+1),n=await this.enclaveApiClient.authentication.requestLogin({login:t});if((0,I.hx)(n))return n;let{idpAuthorizeUrl:i,teamUuid:o}=(0,I.db)(n),{samlToken:r}=await this.enclaveLoginContext.getSamlFromLogin(i,!0,e.body.tabFocus),s=await this.enclaveApiClient.authentication.confirmLogin({domainName:a,samlResponse:r,teamUuid:o});if((0,I.hx)(s))return s;let c={...(0,I.db)(s),login:e.body.userEmailAddress};return await this.enclaveLoginContext.redirectUserIntoLoginFlow(c),(0,I.Vp)(void 0)}constructor(e,t,a){this.enclaveApiClient=e,this.enclaveLoginContext=t,this.carbonLegacyClient=a}}U=(0,n.gn)([(0,b.W)(R.B),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===T.l?Object:T.l,P,void 0===B._?Object:B._])],U);var D=a(21039),z=a(58204),F=a(83463),_=a(63762);let L=_.z.object({error:_.z.string()}),w=_.z.object({data:_.z.object({samlIdpEntryPoint:_.z.string(),samlIdpCertificate:_.z.string()})}),k=async(e,t)=>{if(null===t)return{samlIdpEntryPoint:"",samlIdpCertificate:""};let a="";if(new F.Y(t).isUrlValid()){let e=await fetch(t);a=await e.text()}else a=t;let{parseMetadataFields:n}=e.commands,i=await n({ssoIdpMetadata:a});if((0,I.d6)(i))return w.parse(i.data).data;throw Error("failed to parse metadata, please validate first.")},M=async(e,t)=>{if(null===t)return;let a=await e({name:"parseMetadataFields",args:[{ssoIdpMetadata:t}]});if(!(0,I.d6)(a))return L.parse(a.error).error};class x{async execute({body:e}){let t=await this.ssoProvisioningStore.getState();if(!t.global.teamUuid)return(0,I.Rn)({tag:"TeamIdNotFound"});if(!t.global.adminProvisioningKey)return(0,I.Rn)({tag:"AdminProvisioningKeyNotFound"});if(!e.domainName)return(0,I.Rn)({tag:"DomainNameNotProvided"});let a=t.idpMetadata.metadataValue?await k(this.carbonLegacyClient,t.idpMetadata.metadataValue):null,n=await this.enclaveApiClient.domains.createDomain({domainName:e.domainName,adminProvisioningKey:t.global.adminProvisioningKey,idpMetadata:a?{certificate:a.samlIdpCertificate,entrypoint:a.samlIdpEntryPoint}:void 0,teamUuid:t.global.teamUuid});if((0,I.hx)(n))return n;let{dnsVerificationToken:i}=(0,I.db)(n),o=[...t.domainSetup,{idpUuid:t.idpMetadata.idpUuid,domainName:e.domainName,verificationStatus:m.X5.enum.pending}],r={...t.domainVerificationInfo,[e.domainName]:{txtValue:i,verificationStatus:m.X5.enum.pending,subdomainValue:p,pendingReason:null,tokenFound:null}};return await this.ssoProvisioningStoreUpdater.set({...t,domainSetup:o,domainVerificationInfo:{...t.domainVerificationInfo,...r}}),(0,I.Vp)(void 0)}constructor(e,t,a,n,i){this.enclaveApiClient=e,this.ssoProvisioningStoreUpdater=t,this.ssoProvisioningStore=a,this.featureFlipsClient=n,this.carbonLegacyClient=i}}x=(0,n.gn)([(0,b.W)(z.p),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===T.l?Object:T.l,void 0===S?Object:S,void 0===g.M?Object:g.M,void 0===D.P?Object:D.P,void 0===B._?Object:B._])],x);var V=a(36661),G=a(17741);let K=_.z.object({adminProvisioningKey:_.z.object({adminProvisioningKey:_.z.ostring().nullable(),itemId:_.z.ostring().nullable()}).optional().nullable()}),j=(e,t)=>{let a=t({path:`userSession.teamAdminData.teams.${e}`}).pipe((0,G.nb)({success:e=>{let t=K.safeParse(e);if(!t.success)throw t.error;return t.data.adminProvisioningKey?.adminProvisioningKey??null},failure:()=>""}));return(0,E.z)(a)};class H{async execute(){let{global:e}=await this.ssoProvisioningStore.getState();if(!e.adminProvisioningKey){let e=await this.teamEnclaveClient.commands.createTeamInEnclave();if((0,I.hx)(e))return(0,I.Rn)({tag:"CreateTeamApiError"})}if(!e.ssoIsNitroProvider)try{await this.setupSsoConfidentialTeam()}catch{return(0,I.Rn)({tag:"CreateTeamApiError"})}return(0,I.Vp)(void 0)}async setupSsoConfidentialTeam(){let e=await this.ssoProvisioningStore.getState();await this.carbonClient.commands.updateTeamSettings({ssoServiceProviderUrl:this.ssoServiceProviderUrl,ssoSolution:m.WO.enum.confidentialSaml}),this.eventEmitter.sendEvent("ssoSolutionChanged",m.WO.enum.confidentialSaml);let t=await (0,E.z)(this.teamPlanDetailsClient.queries.getTeamId());if((0,I.hx)(t))throw Error("Failed to get teamId");let{teamId:a}=(0,I.db)(t);if(!a)throw Error("Failed to get teamId");let n=await j(a,this.carbonClient.queries.carbonState);await this.ssoProvisioningStoreUpdater.set({...e,ssoSolution:m.WO.enum.confidentialSaml,ssoStatus:m.pI.enum.incomplete,global:{...e.global,adminProvisioningKey:n,ssoIsNitroProvider:!0,isTeamProvisionedInNitro:!0}})}constructor(e,t,a,n,i,o,r){this.enclaveApiClient=e,this.teamEnclaveClient=t,this.ssoProvisioningStoreUpdater=a,this.ssoProvisioningStore=n,this.carbonClient=i,this.teamPlanDetailsClient=o,this.eventEmitter=r,this.ssoServiceProviderUrl=new URL(this.enclaveApiClient.enclaveUrl).origin}}H=(0,n.gn)([(0,b.W)(V.p),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===T.l?Object:T.l,void 0===C.G?Object:C.G,void 0===S?Object:S,void 0===g.M?Object:g.M,void 0===B._?Object:B._,void 0===v.e?Object:v.e,void 0===h?Object:h])],H);var W=a(18550),Y=a(65893),Q=a(17426),q=a(15524);let Z=_.z.object({data:_.z.object({deviceAccessKey:_.z.string(),deviceSecretKey:_.z.string()})}),$=_.z.object({data:_.z.object({devicePrivateKey:_.z.string(),devicePublicKey:_.z.string()})}),X=async e=>{let t=await e.commands.registerTeamDevice({platform:q.h.NITRO,deviceName:"Nitro Encryption Service"});if((0,I.hx)(t))return t;let{data:{deviceAccessKey:a,deviceSecretKey:n}}=Z.parse((0,I.db)(t)),i=await e.commands.registerTeamDeviceAccount({deviceAccessKey:a,shouldGenerateDeviceKeyPair:!0});if((0,I.hx)(i))return i;let{data:{devicePrivateKey:o,devicePublicKey:r}}=$.parse((0,I.db)(i));return(0,I.Vp)({deviceAccessKey:a,deviceSecretKey:n,devicePrivateKey:o,devicePublicKey:r})},J=_.z.enum(["sso_connector","encryption_service","nitro_encryption_service","command_line"]),ee=[J.enum.encryption_service,J.enum.nitro_encryption_service,J.enum.sso_connector],et=_.z.object({platform:J,accessKey:_.z.string(),deviceName:_.z.string().nullable(),activated:_.z.boolean(),creationDateUnix:_.z.number(),updateDateUnix:_.z.number()}),ea=_.z.object({data:_.z.object({teamDevices:_.z.array(et)})}),en=async e=>{let{listTeamDevices:t}=e.commands,a=await t();if((0,I.hx)(a))throw Error("Failed to get team devices");let{data:{teamDevices:n}}=ea.parse(a.data),i=n.filter(e=>ee.includes(e.platform)&&e.activated),o=i.filter(e=>e.platform===J.enum.nitro_encryption_service),r=i.filter(e=>e.platform===J.enum.encryption_service),s=i.filter(e=>e.platform===J.enum.sso_connector);return(r.length?r:s.length?s:o).reduce((e,t)=>!e||t.updateDateUnix>e.updateDateUnix?t:e,null)};class ei{async execute({body:e}){let t=await this.ssoProvisioningStore.getState(),a=t.global.teamUuid;if(!a)throw Error("SSO Migration failed: TeamUuid is missing");if(t.ssoSolution===m.WO.enum.ssoConnector){if(!e.ssoConnectorKey)return(0,I.Rn)((0,Y.hw)());if(!RegExp("^[0-9a-f]{8}[-]([0-9a-f]{4}[-]){3}[0-9a-f]{12}\\|[0-9a-zA-Z/+]{86}==$").test(e.ssoConnectorKey))return(0,I.Rn)((0,Y.Fw)())}let n=e.ssoConnectorKey||await this.getSsoConnectorKey(),i=await this.getTeamDomains(),{samlIdpCertificate:o,ssoIdpEntrypoint:r}=await this.getIdpData(),s=await this.getTeamDeviceToMigrate(),c=await this.getScimToken(s.accessKey),d=await X(this.carbonClient);if((0,I.hx)(d))throw Error("SSO Migration failed: Unable to register team device with account with error");let{deviceAccessKey:l,deviceSecretKey:u,devicePublicKey:g,devicePrivateKey:p}=(0,I.db)(d),{adminProvisioningKey:S,team:A}=await this.createTeamForMigration({teamDeviceCredentials:{teamUuid:a,accessKey:l,secretKey:u,sharingPublicKey:g,sharingPrivateKey:p},masterServiceProviderKey:n,domains:i,certificates:[o],entrypoint:r,scimToken:c});return await this.runSideEffects({currentState:t,adminProvisioningKey:S,teamDeviceToMigrate:s,team:A}),(0,I.Vp)(void 0)}async getTeamDomains(){let e=await this.carbonClient.commands.getTeamDomains();if((0,I.hx)(e))throw Error("SSO Migration failed: Unable to retrieve team domains");let t=(0,I.db)(e);if(!t.success)throw Error("SSO Migration failed: Unable to retrieve team domains");return t.domains.map(e=>e.name)}async getIdpData(){let e=await (0,E.z)(this.teamPlanDetails.queries.getTeamSsoInfo());if((0,I.hx)(e))throw Error("SSO Migration failed: Cannot retrieve any SSO information");let{ssoIdpEntrypoint:t,ssoIdpMetadata:a}=(0,I.db)(e);if(!t||!a)throw Error("SSO Migration failed: Cannot retrieve Idp info. ssoIdpEntrypoint or ssoIdpMetadata is missing");let{samlIdpCertificate:n}=await k(this.carbonClient,a);return{samlIdpCertificate:n,ssoIdpEntrypoint:t}}async getSsoConnectorKey(){let e=await (0,E.z)(this.teamPlanDetails.queries.getTeamId());if((0,I.hx)(e))throw Error("SSO Migration failed: Unable to retrieve team id");let t=(0,I.db)(e).teamId??"",a=await (0,E.z)(this.carbonClient.queries.carbonState({path:"userSession.teamAdminData.teams"}));if((0,I.hx)(a))throw Error("SSO Migration failed: Unable to retrieve teamAdminData");let n=_.z.record(_.z.string(),_.z.object({ssoConnectorKey:_.z.object({ssoConnectorKey:_.z.string()})})),i=(0,I.db)(a),o=n.safeParse(i);if(!o.success)throw Error("SSO Migration failed: Unable to retrieve ssoConnectorKey");return o.data[t].ssoConnectorKey.ssoConnectorKey}async getScimToken(e){let t=await this.carbonClient.commands.getTeamDeviceEncryptedConfig({draft:!1,deviceAccessKey:e});if((0,I.hx)(t))throw Error("SSO Migration failed: Unable to retrieve scim token");let a=(0,I.db)(t);if(a.success)return a.data?.configProperties.scimAuthToken||void 0}async getTeamDeviceToMigrate(){let e=await en(this.carbonClient);if(!e)throw Error("SSO Migration failed: no active team device found");return e}getDomainInfoFromTeam(e){return Object.entries(e.domains).reduce((e,[t,a])=>(e.domainSetup.push({domainName:t,verificationStatus:a.dnsCheckStatus.status??"pending"}),e.domainVerificationInfo[t]={txtValue:a.dnsCheckStatus.verificationToken,verificationStatus:m.X5.parse(a.dnsCheckStatus.status),subdomainValue:p,pendingReason:a.dnsCheckStatus.pendingReason,tokenFound:null},e),{domainSetup:(0,W.Ay)([]),domainVerificationInfo:(0,W.Ay)({})})}async runSideEffects({currentState:e,adminProvisioningKey:t,teamDeviceToMigrate:a,team:n}){await this.carbonClient.commands.persistAdminProvisioningKey({adminProvisioningKey:t}),await this.carbonClient.commands.updateTeamSettings({ssoServiceProviderUrl:this.ssoServiceProviderUrl,ssoSolution:m.WO.enum.confidentialSaml,provisioningSolution:Q.Hh.enum.confidentialScim}),this.eventEmitter.sendEvent("ssoSolutionChanged",m.WO.enum.confidentialSaml);let{domainSetup:i,domainVerificationInfo:o}=this.getDomainInfoFromTeam(n),r=Object.entries(n.idps).map(([e])=>e)[0];await this.ssoProvisioningStoreUpdater.set({...e,ssoSolution:m.WO.enum.confidentialSaml,ssoStatus:m.pI.enum.incomplete,global:{...e.global,adminProvisioningKey:t,ssoIsNitroProvider:!0,isTeamProvisionedInNitro:!0},idpMetadata:{...e.idpMetadata,idpUuid:r},domainSetup:i,domainVerificationInfo:o}),await this.carbonClient.commands.deactivateTeamDevice({teamDeviceAccessKey:a.accessKey})}async createTeamForMigration(e){let t=await this.enclaveApiClient.teams.createTeamForMigration(e);if((0,I.hx)(t))throw Error("SSO Migration to confidential failed: Unable to create team for migration");let{adminProvisioningKey:a,team:n}=(0,I.db)(t);return{adminProvisioningKey:a,team:n}}constructor(e,t,a,n,i,o){this.enclaveApiClient=e,this.ssoProvisioningStoreUpdater=t,this.ssoProvisioningStore=a,this.carbonClient=n,this.teamPlanDetails=i,this.eventEmitter=o,this.ssoServiceProviderUrl=new URL(this.enclaveApiClient.enclaveUrl).origin}}ei=(0,n.gn)([(0,b.W)(Y.Dt),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===T.l?Object:T.l,void 0===S?Object:S,void 0===g.M?Object:g.M,void 0===B._?Object:B._,void 0===v.e?Object:v.e,void 0===h?Object:h])],ei);var eo=a(29184);let er=["DOMAIN_NOT_FOUND","DOMAIN_CONFIGURATION_NOT_FOUND"];class es{async execute({body:e}){let t=await this.ssoProvisioningStore.getState();if(!t.global.teamUuid)return(0,I.Rn)({tag:"TeamIdNotFound"});if(!t.global.adminProvisioningKey)return(0,I.Rn)({tag:"AdminProvisioningKeyNotFound"});if(!e.domainName)return(0,I.Rn)({tag:"DomainNameNotProvided"});try{let a=await this.enclaveApiClient.domains.deleteDomain({domainName:e.domainName,teamUuid:t.global.teamUuid,adminProvisioningKey:t.global.adminProvisioningKey});if((0,I.hx)(a))return a}catch(t){let e=t instanceof Error?t.message:"Unable to delete domain.";if(!er.includes(e))throw t}return await this.applyDeleteDomainOnState(t,e.domainName),(0,I.Vp)(void 0)}async applyDeleteDomainOnState(e,t){e.domainSetup=e.domainSetup.filter(e=>e.domainName!==t),delete e.domainVerificationInfo[t],await this.ssoProvisioningStoreUpdater.set(e)}constructor(e,t,a,n){this.enclaveApiClient=e,this.ssoProvisioningStoreUpdater=t,this.ssoProvisioningStore=a,this.featureFlipsClient=n}}es=(0,n.gn)([(0,b.W)(eo.k),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===T.l?Object:T.l,void 0===S?Object:S,void 0===g.M?Object:g.M,void 0===D.P?Object:D.P])],es);var ec=a(94520),ed=a(13687);class el{async execute(){let{global:{adminProvisioningKey:e,teamUuid:t},idpMetadata:{idpUuid:a}}=await this.ssoProvisioningStore.getState();if(!e||!t||!a)return(0,I.Rn)({tag:"MissingCommandParameters"});try{let n=await this.enclaveApiClient.authentication.requestTestLogin({adminProvisioningKey:e,teamUuid:t,idpUuid:a});if((0,I.hx)(n))return n;let{idpAuthorizeUrl:i}=(0,I.db)(n),{samlToken:o}=await this.enclaveLoginContext.getSamlFromLogin(i,!1);return await this.enclaveApiClient.authentication.confirmTestLogin({teamUuid:t,adminProvisioningKey:e,idpUuid:a,samlResponse:o}),await this.enclaveLoginContext.cleanupTestLogin(),(0,I.Vp)(void 0)}catch{return(0,I.Rn)({tag:"FailedToLoginIntoSsoProvider"})}}constructor(e,t,a,n,i){this.enclaveApiClient=e,this.enclaveLoginContext=t,this.platformInfoService=a,this.ssoProvisioningStore=n,this.featureFlips=i}}el=(0,n.gn)([(0,b.W)(ed.b),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===T.l?Object:T.l,P,void 0===ec.t?Object:ec.t,void 0===g.M?Object:g.M,void 0===D.P?Object:D.P])],el);var eu=a(71586);class em{async execute({body:e}){let{commands:{carbon:t}}=this.carbonLegacy,a=await M(t,e.metadata);return a?(0,I.Rn)({tag:a}):(0,I.Vp)(void 0)}constructor(e){this.carbonLegacy=e}}em=(0,n.gn)([(0,b.W)(eu.l),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===B._?Object:B._])],em);var eg=a(60197),ep=a(11807);let eS=async(e,t)=>{let{updateTeamSettings:a}=e.commands;await a({...t})};class eA{async execute({body:e}){try{await this.setupConfidentialTeam()}catch{return(0,I.Rn)({tag:"setup_confidential_team_failed"})}let t=await this.ssoProvisioningStore.getState(),{adminProvisioningKey:a,teamUuid:n}=t.global;if(!a||!n)return(0,I.Rn)({tag:"internal_error"});let{metadata:i}=e,o="",r="";try{let e=await k(this.carbon,i);r=e.samlIdpEntryPoint,o=e.samlIdpCertificate}catch{return(0,I.Rn)({tag:"invalid_metadata_content"})}try{let e=t.idpMetadata.idpUuid,s={adminProvisioningKey:a,teamUuid:n,idpMetadata:{certificates:[o],entrypoint:r}},c=e?await this.enclaveApiClient.idps.updateIdp({...s,idpMetadata:{...s.idpMetadata,idpUuid:e}}):await this.enclaveApiClient.idps.createIdp(s);if((0,I.hx)(c))return c;let{idpUuid:d}=(0,I.db)(c);await this.ssoProvisioningStoreUpdater.set({...t,idpMetadata:{...t.idpMetadata,idpUuid:d,metadataValue:i}});try{await eS(this.carbon,{ssoIdpMetadata:i,ssoIdpEntrypoint:r})}catch(e){return(0,I.Rn)({tag:"save_metadata_failed"})}}catch(e){return(0,I.Rn)({tag:"domain_update_failed"})}return(0,I.Vp)(void 0)}async setupConfidentialTeam(){let{global:e}=await this.ssoProvisioningStore.getState(),{ssoIsNitroProvider:t,adminProvisioningKey:a}=e;return a&&t||await this.ssoClient.commands.createTeam(),(0,I.Vp)(void 0)}constructor(e,t,a,n,i,o){this.enclaveApiClient=e,this.platformInfoService=t,this.ssoProvisioningStoreUpdater=a,this.ssoProvisioningStore=n,this.carbon=i,this.ssoClient=o}}eA=(0,n.gn)([(0,b.W)(eg.o),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===T.l?Object:T.l,void 0===ec.t?Object:ec.t,void 0===S?Object:S,void 0===g.M?Object:g.M,void 0===B._?Object:B._,void 0===ep.E?Object:ep.E])],eA);var eh=a(58072);class eN{async execute(e){let t;let a=await this.ssoProvisioningStore.getState(),{global:{adminProvisioningKey:n},domainVerificationInfo:i,domainSetup:o}=a,r=e.body.domainName;if(!n)return(0,I.Rn)({tag:"AdminProvisioningKeyNotFound"});if(!r)return(0,I.Rn)({tag:"DomainNameNotProvided"});try{let e=await this.enclaveApiClient.domains.checkDnsValidation({domainName:r,adminProvisioningKey:n,teamUuid:a.global.teamUuid??""});if((0,I.hx)(e))return e;t=(0,I.db)(e)}catch{return(0,I.Rn)({tag:"CouldNotVerifyDns"})}let s=i[r];s.txtValue=t.verificationToken,s.verificationStatus=t.status,s.tokenFound=t.tokenFound??null,s.pendingReason=t.pendingReason;let c=o.map(e=>(e.domainName===r&&(e.verificationStatus=t.status),e));return await this.ssoProvisioningStoreUpdater.set({...a,domainSetup:c,domainVerificationInfo:{...i,[r]:s}}),(0,I.Vp)(void 0)}constructor(e,t,a,n){this.enclaveApiClient=e,this.ssoProvisioningStoreUpdater=t,this.ssoProvisioningStore=a,this.featureFlips=n}}eN=(0,n.gn)([(0,b.W)(eh.o),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===T.l?Object:T.l,void 0===S?Object:S,void 0===g.M?Object:g.M,void 0===D.P?Object:D.P])],eN);var eE=a(16432);let eI=async(e,{ssoEnabled:t})=>{let a=await e({name:"updateTeamSettings",args:[{ssoEnabled:t}]});return!(0,I.hx)(a)};class eC{async execute(){let e=await this.ssoProvisioningStore.getState();if(e.enableSSO.ssoEnabled)return(0,I.Rn)({tag:"SsoAlreadyEnabled"});let{commands:{carbon:t}}=this.carbonLegacy;return await eI(t,{ssoEnabled:!0})?(await this.ssoProvisioningStore.set({...e,ssoStatus:m.pI.enum.enabled,global:{...e.global},enableSSO:{...e.enableSSO,ssoEnabled:!0}}),(0,I.Vp)(void 0)):(0,I.Rn)({tag:"EnableSsoFailed"})}constructor(e,t,a){this.ssoProvisioningStoreUpdater=e,this.ssoProvisioningStore=t,this.carbonLegacy=a}}eC=(0,n.gn)([(0,b.W)(eE.F),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===S?Object:S,void 0===g.M?Object:g.M,void 0===B._?Object:B._])],eC);var ev=a(35250),eT=a(86518);let eB=_.z.object({enabled:_.z.boolean()}).optional(),ey=_.z.object({teamInfo:_.z.object({uuid:_.z.ostring().nullable(),ssoSolution:_.z.nativeEnum({selfHostedSaml:"self-hosted-saml",confidentialSaml:"confidential-saml",ssoConnector:"sso-connector",none:"none"}).optional().nullable(),ssoEnabled:_.z.boolean().optional(),ssoIsNitroProvider:_.z.boolean().optional(),ssoServiceProviderUrl:_.z.ostring().nullable(),ssoIdpMetadata:_.z.ostring().nullable(),ssoIdpEntrypoint:_.z.ostring().nullable()}),capabilities:_.z.object({sso:eB})}),ef=_.z.object({data:ey}),eO=_.z.object({message:_.z.string(),reason:_.z.nativeEnum(eT._V)}),eb=async e=>{let{getTeamInfo:t}=e.commands,a=await t();if((0,I.hx)(a))switch(eO.parse(a.error).reason){case eT._V.UNAUTHORIZED:return(0,I.Rn)({tag:"UserNotAuthorized"});case eT._V.UNKNOWN_ERROR:return(0,I.Rn)({tag:"CouldNotGetTeamStatus"});default:throw Error("An unexpected error happened while trying to retrieve team info")}let{data:{teamInfo:n,capabilities:i}}=ef.parse(a.data);return(0,I.Vp)({teamInfo:n,capabilities:i})};class eR{async execute({body:{teamId:e}}){let t=await this.ssoProvisioningStore.getState(),a=await j(e,this.carbon.queries.carbonState),n=null,i=await eb(this.carbon);if((0,I.d6)(i)&&i.data.teamInfo.uuid&&(n=i.data.teamInfo.uuid),!n)return this.appLogger.error("failed to clear settings: teamId was not found"),(0,I.Rn)({tag:"TeamIdNotFound"});if(!a)return this.appLogger.error("failed to clear settings: NitroTeam was not provisoned"),(0,I.Rn)({tag:"NitroTeamNotProvisioned"});try{await this.deleteCurrentTeam({...t,global:{...t.global,adminProvisioningKey:a,teamUuid:n}})}catch(t){let{message:e}=t;if("TEAM_NOT_FOUND"!==e&&"UNKNOWN_ERROR"!==e&&"MISMATCHING_ADMIN_PROVISIONING_KEY"!==e)return this.appLogger.error("failed to clear settings: could not delete Nitro team"),(0,I.Rn)({tag:"CouldNotDeleteNitroTeam"})}let o=await this.removeAdmingProvisioningKey();if((0,I.hx)(o))return this.appLogger.error("failed to clear settings: could not delete admin provisioning key"),o;let r=await this.clearLegacyTeamSettings();return(0,I.hx)(r)?(0,I.Rn)({tag:"CouldNotClearLegacyTeamSettings"}):(await this.ssoProvisioningStoreUpdater.reset(),this.eventEmitter.sendEvent("confidentialSsoSettingsReset",void 0),(0,I.Vp)(void 0))}async deleteCurrentTeam(e){let{global:t}=e;if(!t.adminProvisioningKey)return(0,I.Rn)({tag:"NitroTeamNotProvisioned"});let a={teamUuid:t.teamUuid,adminProvisioningKey:t.adminProvisioningKey};return await this.enclaveApiClient.teams.deleteTeam(a),(0,I.Vp)(void 0)}async clearLegacyTeamSettings(){try{await eS(this.carbon,{provisioningSolution:null,ssoSolution:null,ssoServiceProviderUrl:null,ssoIdpMetadata:null,ssoIdpEntrypoint:null,ssoEnabled:!1}),this.eventEmitter.sendEvent("ssoSolutionChanged",m.WO.enum.none)}catch{return(0,I.Rn)({tag:"CouldNotClearLegacyTeamSettings"})}return(0,I.Vp)(void 0)}async removeAdmingProvisioningKey(){try{let{removeAdminProvisioningKey:e}=this.carbon.commands;await e()}catch{return(0,I.Rn)({tag:"CouldNotDeleteAdminProvisioningKey"})}return(0,I.Vp)(void 0)}constructor(e,t,a,n,i,o){this.enclaveApiClient=e,this.ssoProvisioningStoreUpdater=t,this.ssoProvisioningStore=a,this.appLogger=n,this.carbon=i,this.eventEmitter=o}}eR=(0,n.gn)([(0,b.W)(ev.h),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===T.l?Object:T.l,void 0===S?Object:S,void 0===g.M?Object:g.M,O,void 0===B._?Object:B._,void 0===h?Object:h])],eR);var eP=a(50355);_.z.object({});class eU{async execute({body:e}){let t=await this.ssoProvisioningStore.getState(),{adminProvisioningKey:a,teamUuid:n}=t.global,{idpUuid:i}=t.idpMetadata;if(!a||!n)return(0,I.Rn)((0,eP.Y3)());if(!i)return Promise.reject((0,I.Rn)((0,eP.B3)()));let{groupProvisioningActivated:o}=e;try{await this.enclaveApiClient.idps.updateIdp({adminProvisioningKey:a,teamUuid:n,idpMetadata:{idpUuid:i,groupProvisioningActivated:o}}),await this.ssoProvisioningStoreUpdater.set({...t,idpMetadata:{...t.idpMetadata,groupProvisioningActivated:o}})}catch(e){switch(e.message){case eP.hJ.MISMATCHING_ADMIN_PROVISIONING_KEY:return Promise.reject((0,I.Rn)((0,eP.HC)()));case eP.hJ.TEAM_NOT_FOUND:return Promise.reject((0,I.Rn)((0,eP.gY)()));case eP.hJ.IDP_NOT_FOUND:return Promise.reject((0,I.Rn)((0,eP.B3)()));case eP.hJ.NO_IDP_CONFIGURATION_UPDATE:return Promise.reject((0,I.Rn)((0,eP.b2)()));default:return Promise.reject((0,I.Rn)((0,eP.Y3)()))}}return(0,I.Vp)(void 0)}constructor(e,t,a){this.enclaveApiClient=e,this.ssoProvisioningStoreUpdater=t,this.ssoProvisioningStore=a}}eU=(0,n.gn)([(0,b.W)(eP.Z5),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===T.l?Object:T.l,void 0===S?Object:S,void 0===g.M?Object:g.M])],eU);var eD=a(51870),ez=a(30424);class eF{async handle({body:e}){if("ssoSolutionChanged"===e.eventName){let t=m.WO.safeParse(e.eventData);if(!t.success)throw Error(`[Sso Setup] - Carbon setup wrong sso solution, got: ${e.eventData}`);this.eventEmitter.sendEvent("ssoSolutionChanged",t.data)}}constructor(e){this.eventEmitter=e}}eF=(0,n.gn)([(0,eD.b)(ez.Dj),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===h?Object:h])],eF);var e_=a(81433),eL=a(72907),ew=a(1833),ek=a(53868),eM=a(42589),ex=a(72233),eV=a(69853),eG=a(62506),eK=a(90423),ej=a(75900);class eH{execute(){return this.ssoProvisioningStore.state$.pipe((0,e_.x)(),(0,eL.w)(e=>e.isInitialized?(0,eV.of)((0,I.Vp)(e)):(0,ew.D)(this.ssoStateService.fetchInitialValue()).pipe((0,ek.b)(e=>{this.ssoProvisioningStore.set(e)}),(0,eM.U)(e=>(0,I.Vp)(e)),(0,ex.K)(()=>(0,eV.of)((0,I.Rn)({tag:"Error while fetching the SSO state"}))))))}constructor(e,t,a){this.httpClient=e,this.ssoProvisioningStore=t,this.ssoStateService=a}}eH=(0,n.gn)([(0,eG.e)(ej._),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===eK.e?Object:eK.e,void 0===g.M?Object:g.M,void 0===f?Object:f])],eH);var eW=a(59930);class eY{execute(){return this.ssoProvisioningStore.state$.pipe((0,eM.U)(e=>(0,I.Vp)({groupProvisioningActivated:e.idpMetadata.groupProvisioningActivated??!1})))}constructor(e){this.ssoProvisioningStore=e}}eY=(0,n.gn)([(0,eG.e)(eW.$),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===g.M?Object:g.M])],eY);class eQ{}eQ=(0,n.gn)([(0,i.Y)({api:l.y,handlers:{commands:{loginUserWithEnclaveSSO:U,provisionDomain:x,createTeam:H,migrateToConfidentialSso:ei,deleteDomain:es,testLoginUserWithEnclaveSSO:el,validateMetadata:em,updateMetadata:eA,checkDNSValidation:eN,enableSso:eC,clearSettings:eR,updateGroupProvisioningConfiguration:eU},events:{...(0,i.g)(N.W,{carbonLegacy:eF})},queries:{ssoProvisioning:eH,getGroupProvisioningConfiguration:eY}},configurations:{enclaveLoginContextInfrastructure:{token:P}},imports:[o.X,c.i,d.G,r.G],exports:[g.M],stores:[g.M],providers:[S,h,f,(0,s.d_)(O)],requiredFeatureFlips:["itadmin_tac_encryptionservice_SSOmigration_reset","setup_rollout_reset_confidential_button","setup_rollout_web_ssoconnector_card","setup_rollout_confidential_migration"]})],eQ)},35444:function(e,t,a){a.d(t,{M:()=>d});var n=a(15021),i=a(55314),o=a(59982),r=a(68238);let s=e=>i.JU.safeParse(e).success,c={isInitialized:!1,ssoSolution:i.WO.enum.none,ssoStatus:i.pI.enum.none,global:{adminProvisioningKey:null,teamUuid:null,ssoIsNitroProvider:null,isTeamProvisionedInNitro:null,ssoCapable:null},idpApplication:{entityId:null,acsUrl:null,signOnUrl:null},idpMetadata:{metadataValue:null,idpUuid:null,groupProvisioningActivated:null},domainSetup:[],domainVerificationInfo:{},enableSSO:{ssoEnabled:null}};class d extends(0,o.Q)({persist:!1,capacity:r.Y._010KB,initialValue:c,scope:n.F.User,storeName:"nitro-sso-provisioning-state",storeTypeGuard:s}){}},28330:function(e,t,a){a.d(t,{X:()=>A});var n=a(63762),i=a(18627),o=a(3863),r=a(29109),s=a(99508),c=a(68136),d=a(48102),l=a(85500),u=a(22113),m=a(55295),g=a(15636),p=a(14968);let S=n.z.object({type:n.z.string(),saml:n.z.string()});class A{checkMessageType(e){return!this.samlReceived&&"SamlAssertionIntercepted"===e.type}interceptSamlFromTab(){return new Promise((e,t)=>{if(!this.onMessageListener)return t(Error("OnMessage event listener is not available in current context"));let a=o.$.addListener(e=>{e===this.interceptedTabId&&(o.$.removeListener(a),t(Error("Intercepting SAML - tab closed unexpectedly")))});this.onMessageListener.events$.pipe((0,i.P)()).subscribe(([n])=>{let i=S.safeParse(n);i.success?(this.samlReceived=!0,o.$.removeListener(a),e({samlToken:i.data.saml})):t(Error("Intercepting SAML - received message could not be parsed"))})})}async redirectTabToUrl(e){if(this.interceptedTabId)return await (0,r.V)(this.interceptedTabId,{url:e});{let t=(await (0,s.T)({windowTypes:["normal"]})).id;return await (0,c.U)({windowId:t,url:e})}}async getActiveExtensionTabId(){let e=await (0,d.I)({currentWindow:!0,active:!0}),t=e.length>0?e[0]:null,a=(0,l.A)("");if(t?.id&&t.url?.includes(a))return t.id}async createTabWhenWindowIsAvailable({url:e,active:t}){try{return await (0,c.U)({url:e,active:t})}catch(a){return await new Promise(a=>{let n;let i=async()=>{n&&(u.g.removeListener(n),a(await (0,c.U)({url:e,active:t})))};n=u.g.addListener(i)})}}async getSamlFromLogin(e,t,a){this.samlReceived=!1,this.originalTabId=void 0,this.interceptedTabId&&(await (0,m.O)([this.interceptedTabId]).catch(()=>{}),this.interceptedTabId=void 0);let n=async(t=!0)=>{let a=await this.createTabWhenWindowIsAvailable({url:e,active:t});return this.interceptedTabId=a.id,await this.interceptSamlFromTab()},i=async t=>{this.interceptedTabId=t;let a=this.interceptSamlFromTab();return await (0,r.V)(t,{url:e}),a};return t?this.getActiveExtensionTabId().then(e=>e?i(e):n(a)):this.getActiveExtensionTabId().then(e=>(this.originalTabId=e,n(a)))}async redirectUserIntoLoginFlow(e){let t=Object.entries({ssoToken:e.ssoToken,exists:e.exists,currentAuths:e.currentAuthenticationMethods,expectedAuths:e.expectedAuthenticationMethods,key:e.userServiceProviderKey,login:e.login}).map(e=>`${e[0]}=${encodeURIComponent(e[1].toString())}`).join("&"),a=(0,l.A)(`index.html#/sso?${t}`);await this.redirectTabToUrl(a)}async redirectUserToLoginPage(){let e=(0,l.A)("index.html#/login");await this.redirectTabToUrl(e)}async cleanupTestLogin(){this.interceptedTabId&&await (0,m.O)([this.interceptedTabId]).catch(()=>{}),this.originalTabId&&(0,r.V)(this.originalTabId,{active:!0})}constructor(){this.interceptedTabId=void 0,this.originalTabId=void 0,this.samlReceived=!1;try{this.onMessageListener=new p.j({source:g.p,filter:this.checkMessageType.bind(this)})}catch{}}}},42894:function(e,t,a){a.d(t,{Q:()=>o});var n=a(46266),i=a(42596);class o extends(0,n.E)(i.r){}(0,n.K)(i.r,o)},42596:function(e,t,a){a.d(t,{r:()=>r});var n=a(36503),i=a(22277),o=a(51795);let r=(0,n.Q)({name:"sync",commands:{sync:i.t},queries:{syncProgress:o.F},events:{}})},22277:function(e,t,a){a.d(t,{t:()=>o});var n=a(66122),i=a(15021);class o extends(0,n.g)({scope:i.F.Device}){}},51795:function(e,t,a){a.d(t,{F:()=>o});var n=a(45429),i=a(15021);class o extends(0,n.k)({scope:i.F.Device}){}},82343:function(e,t,a){a.d(t,{L:()=>i,_:()=>o});var n,i=((n={}).READY="ready",n.IN_PROGRESS="in_progress",n.SUCCESS="success",n.FAILURE="failure",n);class o{}},52726:function(e,t,a){a.d(t,{R:()=>f});var n=a(21636),i=a(48035),o=a(15021),r=a(42596),s=a(82343),c=a(56144),d=a(44577),l=a(94190),u=a(49247),m=a(306),g=a(17741);let p=e=>"object"==typeof e&&null!==e&&"status"in e&&Object.values(s.L).includes(e.status);var S=a(96272);class A extends(0,S.Hu)("SyncError","An error occoured while trying to sync the vault"){}class h{async attemptSync(e){await this.carbonLegacy.commands.carbonLegacyLeeloo({name:"sessionForceSync",arg:[{trigger:e}]})}async waitForSync(e){let t=this.getSyncState().pipe((0,c.h)(e=>!!((0,m.d6)(e)&&p(e.data))&&[s.L.FAILURE,s.L.SUCCESS].includes(e.data.status)),(0,g.DZ)(()=>new A),(0,g.lk)(e=>e.status===s.L.FAILURE?(0,m.Rn)({tag:"Sync failed"}):(0,m.Vp)(void 0)));return await this.attemptSync(e),(0,d.z)(t)}getSyncState(){return this.carbonLegacy.queries.carbonState({path:"userSession.sync"}).pipe((0,g.Qn)(e=>{if(!p(e))throw Error("Bad sync state format");return{status:e.status}}))}constructor(e){this.carbonLegacy=e}}h=(0,n.gn)([(0,l.GS)(),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===u._?Object:u._])],h);var N=a(83533);class E{async run(){return await this.syncService.attemptSync(N.Trigger.Periodic),Promise.resolve()}constructor(e){this.syncService=e}}E=(0,n.gn)([(0,l.GS)(),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===s._?Object:s._])],E);var I=a(37368),C=a(22277);class v{execute(e){let{trigger:t}=e.body;return this.syncService.attemptSync(t),Promise.resolve((0,m.Vp)(void 0))}constructor(e){this.syncService=e}}v=(0,n.gn)([(0,I.W)(C.t),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===s._?Object:s._])],v);var T=a(62506),B=a(51795);class y{execute(){return this.syncService.getSyncState()}constructor(e){this.syncService=e}}y=(0,n.gn)([(0,T.e)(B.F),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===s._?Object:s._])],y);class f{}f=(0,n.gn)([(0,i.Y)({api:r.r,handlers:{commands:{sync:v},events:{},queries:{syncProgress:y}},crons:[{handler:E,periodInMinutes:5,name:"periodic-sync-cron",scope:o.F.User}],providers:[{provide:s._,useClass:h}],exports:[s._]})],f)},76315:function(e,t,a){a.d(t,{k:()=>o});var n=a(36503),i=a(7282);let o=(0,n.Q)({name:"customerSupport",commands:{},events:{},queries:{getContacts:i.$I}})},7282:function(e,t,a){a.d(t,{$I:()=>r,td:()=>o});var n=a(45429),i=a(15021);let o=(0,a(96272).Vj)("not_authorized","User is not authorized to get the customer support contacts");class r extends(0,n.k)({scope:i.F.User}){}},50779:function(e,t,a){a.d(t,{R:()=>n});let n=(0,a(96272).Vj)("NOT_ADMIN","User is not an admin")},52087:function(e,t,a){a.d(t,{t:()=>s});var n=a(36503),i=a(75542),o=a(92176),r=a(89505);let s=(0,n.Q)({name:"inviteLink",commands:{toggleInviteLink:i.s,requestUserInviteTokenSending:o.T},events:{},queries:{inviteLinkData:r.$}})},92176:function(e,t,a){a.d(t,{T:()=>o});var n=a(66122),i=a(15021);class o extends(0,n.g)({scope:i.F.User}){}},75542:function(e,t,a){a.d(t,{s:()=>o});var n=a(66122),i=a(15021);class o extends(0,n.g)({scope:i.F.User}){}},89505:function(e,t,a){a.d(t,{$:()=>s,D:()=>r});var n,i=a(45429),o=a(15021),r=((n={}).NOT_LOADED="not_loaded",n.NOT_CREATED="not_created",n.READY="ready",n);class s extends(0,i.k)({scope:o.F.User}){}},7809:function(e,t,a){a.d(t,{t:()=>b});var n=a(36503),i=a(62166),o=a(87516),r=a(35324),s=a(16706),c=a(18364),d=a(57454),l=a(16569),u=a(28672),m=a(53045),g=a(21977),p=a(62256),S=a(92351),A=a(10034),h=a(70930),N=a(81463),E=a(44854),I=a(62555),C=a(86980),v=a(50886),T=a(24520),B=a(16714),y=a(30986),f=a(72704),O=a(66234);let b=(0,n.Q)({name:"teamAdminNotifications",commands:{markB2BPlanDiscontinuedSeen:i.q,markCRDRisksFoundInfoboxSeen:o.e,markIdPFailedNotificationSeen:r.b,markIdPNeedsSeatsInfoboxSeen:s.k,markIdPNeedsSeatsInfoboxInPopupSeen:c.N,markIdPProvisioningsPendingInfoboxSeen:d.r,markNewRestrictSharingPolicySeen:l.o,markNotificationTrialExtendedSeen:u.D,markOfferToExtendFreeTrialSeen:m.R,markStarterRepackagePolicyInfoboxSeen:g.z,markHasSeenWaitingForCRDInsightsInfoboxCommand:p.Y},events:{},queries:{getIdPFailedProvisioningsData:S.It,getIdPFixedProvisioningsData:A.Un,hasSeenB2BPlanDiscontinued:h.z,hasSeenCRDRisksFoundInfobox:N.e,hasSeenIdPFailedNotification:E.g,hasSeenIdPNeedsSeatsInfoboxInPopup:I.k,hasSeenIdPNeedsSeatsInfobox:C.T,hasSeenIdPProvisioningsPendingInfobox:v.S,hasSeenNewRestrictSharingPolicy:T.x,hasSeenNotificationTrialExtended:B.q,hasSeenOfferToExtendFreeTrial:y.U,hasSeenStarterRepackagePolicyInfobox:f.i,hasSeenWaitingForCRDInsightsInfobox:O.u}})},62166:function(e,t,a){a.d(t,{q:()=>o});var n=a(66122),i=a(15021);class o extends(0,n.g)({scope:i.F.User}){}},87516:function(e,t,a){a.d(t,{e:()=>o});var n=a(66122),i=a(15021);class o extends(0,n.g)({scope:i.F.User}){}},62256:function(e,t,a){a.d(t,{Y:()=>o});var n=a(66122),i=a(15021);class o extends(0,n.g)({scope:i.F.User}){}},35324:function(e,t,a){a.d(t,{b:()=>o});var n=a(66122),i=a(15021);class o extends(0,n.g)({scope:i.F.User}){}},18364:function(e,t,a){a.d(t,{N:()=>o});var n=a(66122),i=a(15021);class o extends(0,n.g)({scope:i.F.User}){}},16706:function(e,t,a){a.d(t,{k:()=>o});var n=a(66122),i=a(15021);class o extends(0,n.g)({scope:i.F.User}){}},57454:function(e,t,a){a.d(t,{r:()=>o});var n=a(66122),i=a(15021);class o extends(0,n.g)({scope:i.F.User}){}},16569:function(e,t,a){a.d(t,{o:()=>o});var n=a(66122),i=a(15021);class o extends(0,n.g)({scope:i.F.User}){}},28672:function(e,t,a){a.d(t,{D:()=>o});var n=a(66122),i=a(15021);class o extends(0,n.g)({scope:i.F.User}){}},53045:function(e,t,a){a.d(t,{R:()=>o});var n=a(66122),i=a(15021);class o extends(0,n.g)({scope:i.F.User}){}},21977:function(e,t,a){a.d(t,{z:()=>o});var n=a(66122),i=a(15021);class o extends(0,n.g)({scope:i.F.User}){}},92351:function(e,t,a){a.d(t,{C$:()=>s,It:()=>d,qj:()=>c});var n,i=a(45429),o=a(15021),r=a(96272),s=((n={}).NOT_ADMIN="not_admin",n.SERVER_ERROR="server_error",n);let c=(0,r.Vj)("not_admin","User is not an admin");(0,r.Vj)("server_error","Server error while retrieving IdP Notifications data");class d extends(0,i.k)({scope:o.F.User}){}},10034:function(e,t,a){a.d(t,{Go:()=>r,Un:()=>s});var n=a(45429),i=a(15021),o=a(96272);let r=(0,o.Vj)("not_admin","User is not an admin");(0,o.Vj)("server_error","Server error while retrieving IdP Notifications data");class s extends(0,n.k)({scope:i.F.User}){}},70930:function(e,t,a){a.d(t,{z:()=>i});var n=a(45429);class i extends(0,n.k)(){}},81463:function(e,t,a){a.d(t,{e:()=>i});var n=a(45429);class i extends(0,n.k)(){}},44854:function(e,t,a){a.d(t,{g:()=>i});var n=a(45429);class i extends(0,n.k)(){}},62555:function(e,t,a){a.d(t,{k:()=>i});var n=a(45429);class i extends(0,n.k)(){}},86980:function(e,t,a){a.d(t,{T:()=>i});var n=a(45429);class i extends(0,n.k)(){}},50886:function(e,t,a){a.d(t,{S:()=>i});var n=a(45429);class i extends(0,n.k)(){}},24520:function(e,t,a){a.d(t,{x:()=>i});var n=a(45429);class i extends(0,n.k)(){}},16714:function(e,t,a){a.d(t,{q:()=>i});var n=a(45429);class i extends(0,n.k)(){}},30986:function(e,t,a){a.d(t,{U:()=>i});var n=a(45429);class i extends(0,n.k)(){}},72704:function(e,t,a){a.d(t,{i:()=>i});var n=a(45429);class i extends(0,n.k)(){}},66234:function(e,t,a){a.d(t,{u:()=>i});var n=a(45429);class i extends(0,n.k)(){}},8616:function(e,t,a){a.d(t,{L:()=>u});var n=a(36503),i=a(52206),o=a(19428),r=a(29056),s=a(85844),c=a(75431),d=a(98735),l=a(42895);let u=(0,n.Q)({name:"teamMembers",commands:{proposeMembers:i.og,dismissNonMembersInfobox:o.Y},events:{membersAdded:r.q},queries:{getNonMembersCount:s.H,getNonMembersList:c.Fz,getHasAdminDismissedInfobox:d.K,getMembersList:l.kw}})},19428:function(e,t,a){a.d(t,{Y:()=>o});var n=a(66122),i=a(15021);class o extends(0,n.g)({scope:i.F.User}){}},52206:function(e,t,a){a.d(t,{Wv:()=>S,og:()=>A});var n=a(66122),i=a(15021),o=a(96272);let r=(0,o.Vj)("InvalidOrigin","Invalid origin"),s=(0,o.Vj)("NoFreeSlot","No free slot"),c=(0,o.Vj)("NoFreeSlotFreePlan","No free slot in free plan"),d=(0,o.Vj)("UserTeamInviteTokenNotFound","No invite token to a team available for user"),l=(0,o.Vj)("PaymentFailed","Payment failed"),u=(0,o.Vj)("NotBillingAdmin","User is not the billing admin"),m=(0,o.Vj)("CannotAddSeatDuringGracePeriod","Seats cannot be added during grace period"),g=(0,o.Vj)("UnsupportedPaymentMean","No valid credit card set for this users to add extra seats"),p=(0,o.Vj)("CannotProposeMemberAbove10","Your plan has a maximum of 10 users, to add more users please upgrade your plan");function S(e){switch(e){case"invalid_origin":return r();case"no_free_slot":return s();case"no_free_slot_free_plan":return c();case"USER_TEAM_INVITE_TOKEN_NOT_FOUND":return d();case"payment_failed":return l();case"not_billing_admin":return u();case"cannot_add_seat_during_grace_period":return m();case"unsupported_payment_mean":return g();case"CANNOT_PROPOSE_MEMBER_ABOVE_10":return p();default:throw Error("Unknown server error")}}class A extends(0,n.g)({scope:i.F.User}){}},29056:function(e,t,a){a.d(t,{q:()=>o});var n=a(98037),i=a(15021);class o extends(0,n.d)({scope:i.F.User}){}},98735:function(e,t,a){a.d(t,{K:()=>o});var n=a(45429),i=a(15021);class o extends(0,n.k)({scope:i.F.User}){}},42895:function(e,t,a){a.d(t,{Jy:()=>m,VG:()=>u,Xm:()=>d,kw:()=>g,my:()=>c,oK:()=>s,wE:()=>l});var n,i=a(45429),o=a(15021),r=a(96272),s=((n={}).INVALID_LIMIT="invalid_limit",n.INVALID_PAGE="invalid_page",n.INVALID_TEAMSTATE_GET="invalid_teamstate_get",n.INVALID_TEAMMEMBERS_GET="invalid_teamstate_get",n.NOT_MEMBER="not_member",n);let c=(0,r.Vj)("invalid_limit","Server replied with an invalid limit error"),d=(0,r.Vj)("invalid_page","Server replied with an invalid page error"),l=(0,r.Vj)("invalid_teamstate_get","Server replied with an invalid team state get error"),u=(0,r.Vj)("invalid_teamstate_get","Server replied with an invalid team members get error"),m=(0,r.Vj)("not_member","User is not a member of this team");class g extends(0,i.k)({scope:o.F.User}){}},85844:function(e,t,a){a.d(t,{H:()=>o});var n=a(45429),i=a(15021);class o extends(0,n.k)({scope:i.F.User}){}},75431:function(e,t,a){a.d(t,{Fz:()=>c,R0:()=>r,RD:()=>s});var n=a(63762),i=a(45429),o=a(15021);let r=n.z.object({userId:n.z.number(),login:n.z.string(),premiumStatus:n.z.enum(["free","subscribed","legacy"]),lastActivityDateUnix:n.z.number(),proposedState:n.z.enum(["proposed","not_in_team","in_team","revoked"])}),s=n.z.array(r);class c extends(0,i.k)({scope:o.F.User}){}},26195:function(e,t,a){a.d(t,{B:()=>o});var n=a(36503),i=a(67022);let o=(0,n.Q)({name:"teamPasswordHealth",commands:{},events:{},queries:{getReport:i.z}})},67022:function(e,t,a){a.d(t,{z:()=>o});var n=a(45429),i=a(15021);class o extends(0,n.k)({scope:i.F.User}){}},44790:function(e,t,a){a.d(t,{o:()=>D});var n=a(36503),i=a(46458),o=a(82222),r=a(18661),s=a(81323),c=a(88146),d=a(17144),l=a(16838),u=a(4e4),m=a(15170),g=a(32592),p=a(6189),S=a(81511),A=a(95778),h=a(81627),N=a(53196),E=a(25078),I=a(89648),C=a(93216),v=a(54990),T=a(32307),B=a(93646),y=a(80018),f=a(63907),O=a(48925),b=a(30082),R=a(56175),P=a(57564),U=a(22003);let D=(0,n.Q)({name:"teamPlanDetails",commands:{addSeats:i.E,extendFreeTrial:o.No,requestTeamPlanCancellation:r.y7,editTeamName:s.Q2,editTeamPolicies:c.m,sendFeedback:d.cr,updateBillingAdmin:l.t,refreshAdminCardInfo:u.H,startTierTrial:m.F6,extendTierTrial:g.jF},events:{},queries:{getAdminCardInfo:p._,getIndustryBenchmarkData:S.l,getTeamActiveDirectoryInfo:A.e,getTeamBillingInformation:h._,getTeamCancellationStatus:N.F,getTeamCapabilities:E.Y,getTeamCreationDateUnix:I.T,getTeamDuoInfo:C.Z,getTeamId:v.e,getTeamName:T.j,getTeamRoles:B.R,getTeamPolicies:y.K,getTeamProvisioningInfo:f.j,getTeamSeats:O.W,getTeamSecurityScore:b.R,getTeamSsoInfo:R.m,getTeamTrialStatus:P.P,isTeamCreator:U.G7}})},64898:function(e,t,a){a.d(t,{e:()=>o});var n=a(46266),i=a(44790);class o extends(0,n.E)(i.o){}(0,n.K)(i.o,o)},46458:function(e,t,a){a.d(t,{E:()=>o});var n=a(66122),i=a(15021);class o extends(0,n.g)({scope:i.F.User}){}},81323:function(e,t,a){a.d(t,{Kv:()=>d,Q2:()=>l,QI:()=>c,U8:()=>r,mX:()=>s});var n=a(66122),i=a(15021),o=a(96272);let r=(0,o.Vj)("team_name_already_exists","That team name already exists"),s=(0,o.Vj)("INVALID_TEAM_SETTING_VALUE","The team setting value is invalid"),c=(0,o.Vj)("not_admin","User is not admin"),d=(0,o.Vj)("not_authorized","User is not authorized to perform this action");class l extends(0,n.g)({scope:i.F.User}){}},88146:function(e,t,a){a.d(t,{m:()=>o});var n=a(66122),i=a(15021);class o extends(0,n.g)({scope:i.F.User}){}},82222:function(e,t,a){a.d(t,{AP:()=>d,No:()=>m,RQ:()=>l,gv:()=>c,lO:()=>u,sK:()=>s});var n,i=a(66122),o=a(15021),r=a(96272),s=((n={}).TEAM_NOT_FOUND="TEAM_NOT_FOUND",n.NOT_IN_FREE_TRIAL="TEAM_NOT_FREE_TRIAL",n.IN_GRACE_PERIOD="TEAM_IN_GRACE_PERIOD",n.USER_NOT_ADMIN="not_admin",n);let c=(0,r.Vj)("TEAM_NOT_FOUND","Team not found"),d=(0,r.Vj)("TEAM_NOT_FREE_TRIAL","Team is not in a free trial"),l=(0,r.Vj)("TEAM_IN_GRACE_PERIOD","User trial is already extended. User is in grace period"),u=(0,r.Vj)("not_admin","User is not admin");class m extends(0,i.g)({scope:o.F.User}){}},32592:function(e,t,a){a.d(t,{AS:()=>d,RY:()=>l,ed:()=>c,jF:()=>m,mW:()=>u,rv:()=>s});var n,i=a(66122),o=a(15021),r=a(96272),s=((n={}).TEAM_NOT_FOUND="TEAM_NOT_FOUND",n.NO_ACTIVE_FREE_TRIAL="NO_ACTIVE_FREE_TRIAL",n.FREE_TRIAL_ALREADY_EXTENDED="FREE_TRIAL_ALREADY_EXTENDED",n.USER_IS_NOT_TEAM_ADMIN="USER_IS_NOT_TEAM_ADMIN",n);let c=(0,r.Vj)("TEAM_NOT_FOUND","Team not found"),d=(0,r.Vj)("NO_ACTIVE_FREE_TRIAL","No active trial to extend for the selected team"),l=(0,r.Vj)("FREE_TRIAL_ALREADY_EXTENDED","The team already extend the free trial once"),u=(0,r.Vj)("USER_IS_NOT_TEAM_ADMIN","The given user is not the admin of a team");class m extends(0,i.g)({scope:o.F.User}){}},4e4:function(e,t,a){a.d(t,{H:()=>o});var n=a(66122),i=a(15021);class o extends(0,n.g)({scope:i.F.User}){}},18661:function(e,t,a){a.d(t,{VH:()=>r,fz:()=>s,y7:()=>c});var n=a(66122),i=a(15021),o=a(96272);let r=(0,o.Vj)("TEAM_IN_FREE_TRIAL","Team is in a free trial"),s=(0,o.Vj)("TEAM_IS_DISCONTINUED","Team is discontinued");class c extends(0,n.g)({scope:i.F.User}){}},17144:function(e,t,a){a.d(t,{b6:()=>o,cr:()=>r});var n=a(66122),i=a(15021);let o=(0,a(96272).Vj)("INVALID_FEEDBACK","The provided feedback is invalid and won't be shared");class r extends(0,n.g)({scope:i.F.User}){}},15170:function(e,t,a){a.d(t,{F6:()=>u,IR:()=>d,Nc:()=>l,bO:()=>c,ls:()=>s});var n,i=a(66122),o=a(15021),r=a(96272),s=((n={}).FREE_TRIAL_ALREADY_STARTED="FREE_TRIAL_ALREADY_STARTED",n.TEAM_NOT_FOUND="TEAM_NOT_FOUND",n.ALREADY_ON_TIER_TRIAL="ALREADY_ON_TIER_TRIAL",n);let c=(0,r.Vj)("FREE_TRIAL_ALREADY_STARTED","Already started free trial"),d=(0,r.Vj)("TEAM_NOT_FOUND","Team not found"),l=(0,r.Vj)("ALREADY_ON_TIER_TRIAL","Already on the tier to trial");class u extends(0,i.g)({scope:o.F.User}){}},16838:function(e,t,a){a.d(t,{t:()=>o});var n=a(66122),i=a(15021);class o extends(0,n.g)({scope:i.F.User}){}},6189:function(e,t,a){a.d(t,{_:()=>o});var n=a(45429),i=a(15021);class o extends(0,n.k)({scope:i.F.User}){}},81511:function(e,t,a){a.d(t,{l:()=>o});var n=a(45429),i=a(15021);class o extends(0,n.k)({scope:i.F.User}){}},95778:function(e,t,a){a.d(t,{e:()=>o});var n=a(45429),i=a(15021);class o extends(0,n.k)({scope:i.F.User}){}},81627:function(e,t,a){a.d(t,{_:()=>o});var n=a(45429),i=a(15021);class o extends(0,n.k)({scope:i.F.User}){}},53196:function(e,t,a){a.d(t,{F:()=>o});var n=a(45429),i=a(15021);class o extends(0,n.k)({scope:i.F.User}){}},25078:function(e,t,a){a.d(t,{Y:()=>o});var n=a(45429),i=a(15021);class o extends(0,n.k)({scope:i.F.User}){}},89648:function(e,t,a){a.d(t,{T:()=>o});var n=a(45429),i=a(15021);class o extends(0,n.k)({scope:i.F.User}){}},93216:function(e,t,a){a.d(t,{Z:()=>o});var n=a(45429),i=a(15021);class o extends(0,n.k)({scope:i.F.User}){}},54990:function(e,t,a){a.d(t,{e:()=>o});var n=a(45429),i=a(15021);class o extends(0,n.k)({scope:i.F.User}){}},32307:function(e,t,a){a.d(t,{j:()=>o});var n=a(45429),i=a(15021);class o extends(0,n.k)({scope:i.F.User}){}},80018:function(e,t,a){a.d(t,{K:()=>o});var n=a(45429),i=a(15021);class o extends(0,n.k)({scope:i.F.User}){}},63907:function(e,t,a){a.d(t,{j:()=>o});var n=a(45429),i=a(15021);class o extends(0,n.k)({scope:i.F.User}){}},93646:function(e,t,a){a.d(t,{R:()=>o});var n=a(45429),i=a(15021);class o extends(0,n.k)({scope:i.F.User}){}},48925:function(e,t,a){a.d(t,{W:()=>o});var n=a(45429),i=a(15021);class o extends(0,n.k)({scope:i.F.User}){}},30082:function(e,t,a){a.d(t,{R:()=>o});var n=a(45429),i=a(15021);class o extends(0,n.k)({scope:i.F.User}){}},56175:function(e,t,a){a.d(t,{m:()=>o});var n=a(45429),i=a(15021);class o extends(0,n.k)({scope:i.F.User}){}},57564:function(e,t,a){a.d(t,{P:()=>o});var n=a(45429),i=a(15021);class o extends(0,n.k)({scope:i.F.User}){}},22003:function(e,t,a){a.d(t,{G7:()=>s});var n=a(45429),i=a(15021),o=a(96272);let r=(0,o.Vj)("NOT_LOGGED","Please log the user");(0,o.Vj)("NOT_ADMIN","User is not an admin"),(0,o.Vj)("NOT_MEMBER","User is not a member of the team");class s extends(0,n.k)({scope:i.F.User,noUserError:r()}){}},9610:function(e,t,a){a.d(t,{F:()=>u,Gr:()=>g,Uz:()=>m,lD:()=>d,qo:()=>l,ym:()=>S,yt:()=>p});var n,i,o,r,s,c=a(63762),d=((n={}).Legacy="legacy",n.Starter="starter",n.Team="team",n.Business="business",n.BusinessPlus="businessplus",n.Enterprise="entreprise",n.Standard="standard",n),l=((i={}).ProcessOut="processout",i.Invoice="invoice",i),u=((o={}).USD="usd",o.EUR="eur",o),m=((r={}).Pending="pending",r.Canceled="canceled",r.None="none",r.Unknown="unknown",r);let g={ChoseOtherPasswordManager:"chose_other_password_manager",DownsizedEmployeeCount:"downsized_employee_count",MissingCriticalFeatures:"missing_critical_features",NoInternalUsage:"no_internal_usage",Other:"other",TechnicalIssues:"technical_issues",TooExpensive:"too_expensive"};var p=((s={}).InTeam="in_team",s.NotPremium="not_premium",s.NoPayment="no_payment",s.IsUnpaidFamilyMember="is_unpaid_family_member",s.DefaultSettings="default_settings",s.NoVPNCapability="no_vpn_capability",s.DisabledForFreeUser="disabled_for_free_user",s);let S=c.z.object({allowPersistenceForMasterPassword:c.z.boolean(),allowSharing:c.z.boolean(),sharingRestrictedToTeam:c.z.boolean(),enforce2FA:c.z.boolean(),cryptoForcedPayload:c.z.string(),disableAutoLoginDomains:c.z.array(c.z.string()),enableForcedDomains:c.z.boolean(),enablePersonalSpace:c.z.boolean(),enableRemoveForcedContent:c.z.boolean(),enableVPN:c.z.boolean(),forceAutomaticLogout:c.z.number(),lockOnExit:c.z.boolean(),vaultExportEnabled:c.z.boolean(),collectSensitiveDataAuditLogsEnabled:c.z.boolean(),ssoEnabled:c.z.boolean(),ssoProvisioning:c.z.boolean(),teamDomain:c.z.array(c.z.string()),restrictSharingToTeam:c.z.boolean(),recoveryEnabled:c.z.boolean(),richIconsEnabled:c.z.boolean(),itemVisibilityEnabled:c.z.boolean(),compromisedPasswordInappNudgesEnabled:c.z.boolean(),reusedPasswordInappNudgesEnabled:c.z.boolean(),weakPasswordInappNudgesEnabled:c.z.boolean()})},83461:function(e,t,a){a.d(t,{K:()=>l});var n=a(36503),i=a(7416),o=a(97429),r=a(48355),s=a(33867),c=a(35260),d=a(91680);let l=(0,n.Q)({name:"teamPlanUpdate",commands:{changeTierMidcycle:i.G,computePlanPricingDetails:o.wf,upgradeTeamWithExistingCc:r.gi},events:{},queries:{getTeamOffers:s.g,getMidcycleTierUpgradePrice:c.X,getPlanPricingDetails:d.n}})},7416:function(e,t,a){a.d(t,{G:()=>o});var n=a(66122),i=a(15021);class o extends(0,n.g)({scope:i.F.User}){}},97429:function(e,t,a){a.d(t,{C9:()=>s,rm:()=>r,wf:()=>c});var n=a(66122),i=a(15021),o=a(96272);let r=(0,o.Vj)("not_billing_admin","User is not billing admin"),s=(0,o.Vj)("cannot_add_seat_during_grace_period","Cannot add seats during grace period");class c extends(0,n.g)({scope:i.F.User}){}},48355:function(e,t,a){a.d(t,{AI:()=>s,KW:()=>v,L7:()=>d,Ls:()=>B,NS:()=>g,QF:()=>I,T1:()=>T,ZP:()=>y,Zy:()=>c,_1:()=>S,aY:()=>E,d3:()=>p,fu:()=>A,g3:()=>u,gi:()=>f,hS:()=>N,hY:()=>l,jV:()=>h,oH:()=>m,rj:()=>C});var n,i=a(66122),o=a(15021),r=a(96272),s=((n={}).STARTER_PLAN_NOT_10_SEATS="starter_plan_not_10_seats",n.USER_SUBSCRIBING_NOT_FOUND="user_subscribing_not_found",n.CANNOT_INVOICE_FREE_PLAN="cannot_invoice_free_plan",n.PAYMENT_ERROR_DURING_UPGRADE="payment_error_during_upgrade",n.SEATS_TO_PURCHASE_LOWER_ACTUAL_USAGE="seats_to_purchase_lower_actual_usage",n.NOT_IN_A_TEAM_PLAN="not_in_a_team_plan",n.NOT_TEAM_CAPTAIN="not_team_captain",n.NOT_IN_FREE_TRIAL="not_in_free_trial",n.INVALID_PLAN="invalid_plan",n.WRONG_AMOUNT_TO_PAY="wrong_amount_to_pay",n.SALES_TAX_MISMATCH="SALES_TAX_MISMATCH",n.B2B_PLAN_NOT_FOUND="b2b_plan_not_found",n.SELECTED_PLAN_IS_NOT_VALID="SELECTED_PLAN_IS_NOT_VALID",n.FORBIDDEN_EMAIL_DOMAIN="FORBIDDEN_EMAIL_DOMAIN",n.TEAM_HAS_SSO_ENABLED="TEAM_HAS_SSO_ENABLED",n.VAT_NUMBER_NOT_UPSERTED="VAT_NUMBER_NOT_UPSERTED",n.NO_KEY_FOR_USER="no_key_for_user",n.UNSUPPORTED_PAYMENT_MEAN="unsupported_payment_mean",n);let c=(0,r.Vj)("starter_plan_not_10_seats","Starter Plan is 10 seats"),d=(0,r.Vj)("user_subscribing_not_found","User subscribing does not exist."),l=(0,r.Vj)("cannot_invoice_free_plan","Cannot invoice when Free plan."),u=(0,r.Vj)("payment_error_during_upgrade","Payment error during upgrade"),m=(0,r.Vj)("seats_to_purchase_lower_actual_usage","Seats to purchase is lower than actual team usage"),g=(0,r.Vj)("not_in_a_team_plan","Cannot upgrade, user is not in a team plan"),p=(0,r.Vj)("not_team_captain","The user is not a captain of this team"),S=(0,r.Vj)("not_in_free_trial","This team is not in free trial"),A=(0,r.Vj)("invalid_plan","Offer not allowed"),h=(0,r.Vj)("wrong_amount_to_pay","Amount displayed is too different than real actual price"),N=(0,r.Vj)("SALES_TAX_MISMATCH","Taxes displayed is too different than real actual price"),E=(0,r.Vj)("b2b_plan_not_found","The planId requested to upgrade is not found"),I=(0,r.Vj)("SELECTED_PLAN_IS_NOT_VALID","Selected plan is not valid"),C=(0,r.Vj)("FORBIDDEN_EMAIL_DOMAIN","This user has a forbidden email domain"),v=(0,r.Vj)("TEAM_HAS_SSO_ENABLED","Team needs to disable SSO before purchasing non-SSO offering plans"),T=(0,r.Vj)("VAT_NUMBER_NOT_UPSERTED","VAT number could not be upserted"),B=(0,r.Vj)("no_key_for_user","No key for user"),y=(0,r.Vj)("unsupported_payment_mean","The team is using an unsupported payment mean type.");class f extends(0,i.g)({scope:o.F.User}){}},35260:function(e,t,a){a.d(t,{X:()=>o});var n=a(45429),i=a(15021);class o extends(0,n.k)({scope:i.F.User}){}},91680:function(e,t,a){a.d(t,{n:()=>o});var n=a(45429),i=a(15021);class o extends(0,n.k)({scope:i.F.User}){}},33867:function(e,t,a){a.d(t,{g:()=>o});var n=a(45429),i=a(15021);class o extends(0,n.k)({scope:i.F.User}){}},41721:function(e,t,a){a.d(t,{a:()=>c});var n=a(36503),i=a(85311),o=a(2079),r=a(25523),s=a(29316);let c=(0,n.Q)({name:"teamVat",commands:{deleteTeamVat:i.Hy,upsertTeamVat:o.XW},events:{},queries:{getTeamVat:r.N7,getTaxAmount:s.B}})},85311:function(e,t,a){a.d(t,{Hy:()=>d,zK:()=>c});var n=a(66122),i=a(15021),o=a(96272);class r extends(0,o.Hu)("TeamNotFound","The given user is not part of a single team"){}class s extends(0,o.Hu)("NotBillingAdmin","The user is not Billing Admin"){}function c(e){switch(e){case"TEAM_NOT_FOUND":return new r;case"not_billing_admin":return new s;default:throw Error("Unknown server error")}}class d extends(0,n.g)({scope:i.F.User}){}},2079:function(e,t,a){a.d(t,{XW:()=>l,q5:()=>d});var n=a(66122),i=a(15021),o=a(96272);class r extends(0,o.Hu)("TeamNotFound","The given user is not part of a single team"){}class s extends(0,o.Hu)("NotBillingAdmin","The user is not Billing Admin"){}class c extends(0,o.Hu)("VatNumberNotUpserted","The VAT number couldn't be upserted"){}function d(e){switch(e){case"TEAM_NOT_FOUND":return new r;case"not_billing_admin":return new s;case"VAT_NUMBER_NOT_UPSERTED":return new c;default:throw Error("Unknown server error")}}class l extends(0,n.g)({scope:i.F.User}){}},29316:function(e,t,a){a.d(t,{A:()=>o,B:()=>r});var n=a(45429),i=a(96272);class o extends(0,i.Hu)("GetExpectedTaxInformationFailed","Could not return tax amount"){}class r extends(0,n.k)(){}},25523:function(e,t,a){a.d(t,{K$:()=>d,N7:()=>l});var n=a(45429),i=a(15021),o=a(96272);class r extends(0,o.Hu)("TeamNotFound","The given user is not part of a single team"){}class s extends(0,o.Hu)("VatNumberNotFound","The given Team does not have a VAT number"){}class c extends(0,o.Hu)("NotBillingAdmin","The user is not Billing Admin"){}function d(e){switch(e){case"TEAM_NOT_FOUND":return new r;case"VAT_NUMBER_NOT_FOUND":return new s;case"not_billing_admin":return new c;default:throw Error("Unknown server error")}}class l extends(0,n.k)({scope:i.F.User}){}},47846:function(e,t,a){a.d(t,{F:()=>A});var n=a(21636),i=a(48035),o=a(76315),r=a(42589),s=a(306),c=a(70554),d=a(62506),l=a(7282),u=a(14098),m=a(59242);class g{execute(){return this.fetchContacts()}constructor(e){this.serverApiClient=e,this.fetchContacts=()=>this.serverApiClient.v1.teams.getCustomerSupportContacts().pipe((0,r.U)(e=>{if((0,s.hx)(e))return(0,c.EQ)(e.error,{...(0,u.X)(()=>{throw Error("Unexpected server error while attempting to fetch customer support contacts")}),BusinessError:()=>(0,s.Rn)((0,l.td)())});let{customerSupportContacts:t}=e.data.data,a=Object.entries(t).reduce((e,[t,a])=>("other"!==t&&"phoneNumber"in a&&e.push({phoneNumber:a.phoneNumber,countryName:a.countryName,countryFlag:this.countryCodeToFlag(t)}),e),[]);return(0,s.Vp)({directory:a,calendar:{link:t.other.calendarLink}})})),this.countryCodeToFlag=e=>{let t=e.toUpperCase();return/^[A-Z]{2}$/.test(t)&&[...t].map(e=>String.fromCodePoint(127462+e.charCodeAt(0)-65)).join("")||"\uD83C\uDF0F"}}}g=(0,n.gn)([(0,d.e)(l.$I),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===m.l?Object:m.l])],g);var p=a(4843),S=a(90805);class A{}A=(0,n.gn)([(0,i.Y)({api:o.k,imports:[p.n],providers:[],stores:[S.C],handlers:{commands:{},events:{},queries:{getContacts:g}},domainName:"team-admin"})],A)},4824:function(e,t,a){a.d(t,{F:()=>n});let n=e=>"accepted"===e.status},9827:function(e,t,a){a.d(t,{_:()=>w});var n,i,o,r=a(21636),s=a(48035),c=a(52087),d=((n={}).WebOnboardingInviteLinkTacMigration="web_onboarding_inviteLinkTacMigration",n),l=a(15021),u=a(59982),m=a(68238),g=a(89505);class p extends(0,u.Q)({persist:!1,scope:l.F.User,storeName:"invite-link-team-store",initialValue:{status:g.D.NOT_LOADED},capacity:m.Y._001KB}){}var S=a(60025),A=a(42589),h=a(62506),N=a(306),E=a(44577),I=a(17741),C=a(70554),v=a(649),T=a(94190),B=a(59242),y=a(63762),f=((i={}).TEAM_DOES_NOT_EXIST="TEAM_DOES_NOT_EXIST",i.USER_NOT_PROPOSED_IN_TEAM="USER_NOT_PROPOSED_IN_TEAM",i.USER_TEAM_INVITE_TOKEN_NOT_FOUND="USER_TEAM_INVITE_TOKEN_NOT_FOUND",i);y.z.object({tag:y.z.nativeEnum(f)});var O=((o={}).NOT_ADMIN="NOT_ADMIN",o.TEAM_INVITE_LINK_NOT_FOUND="TEAM_INVITE_LINK_NOT_FOUND",o);y.z.object({tag:y.z.nativeEnum(O)});let b=!1;class R{async shouldRefreshState(){let e=await this.inviteLinkStore.getState(),t=e.status!==g.D.READY,a=e.status===g.D.READY&&e.lastRefreshDate+this.MIN_DELAY_BETWEEN_REFRESHES<Date.now();return t||a}constructor(e,t){this.serverApiClient=e,this.inviteLinkStore=t,this.MIN_DELAY_BETWEEN_REFRESHES=1e3,this.getFunctionalErrorForToken=e=>{switch(e){case f.TEAM_DOES_NOT_EXIST:return{tag:f.TEAM_DOES_NOT_EXIST};case f.USER_NOT_PROPOSED_IN_TEAM:return{tag:f.USER_NOT_PROPOSED_IN_TEAM};case f.USER_TEAM_INVITE_TOKEN_NOT_FOUND:return{tag:f.USER_TEAM_INVITE_TOKEN_NOT_FOUND};default:throw Error(`RequestTeamInviteToken: error ${e}`)}},this.requestUserInviteTokenSending=(e,t)=>(0,E.z)(this.serverApiClient.v1.teams.requestTeamInviteToken({login:e,teamUuid:t}).pipe((0,I.DZ)(e=>(0,C.EQ)(e,{BusinessError:e=>this.getFunctionalErrorForToken(e.code),FetchFailedError:()=>{throw Error("Fetch Failed error")},InternalServerError:v.j,InvalidRequest:v.j,RateLimited:v.j,ServiceUnavailable:v.j,UnspecifiedBadStatus:v.j})),(0,I.Qn)(({data:e})=>e))),this.loadInviteLinkData=async()=>{if(b)return;if(b=!0,!await this.shouldRefreshState()){b=!1;return}let e=await (0,E.z)(this.serverApiClient.v1.teams.getTeamSignUpPageForAdmin().pipe((0,I.Qn)(({data:e})=>e)));if((0,N.hx)(e)){let t="BusinessError"===e.error.tag&&"TEAM_INVITE_LINK_NOT_FOUND"===e.error.code?g.D.NOT_CREATED:g.D.NOT_LOADED;return b=!1,await this.inviteLinkStore.set({status:t})}let{disabled:t,teamKey:a}=e.data;await this.inviteLinkStore.set({teamKey:a,enabled:!t,lastRefreshDate:Date.now(),status:g.D.READY}),b=!1},this.toggleInviteLink=async e=>{let t=await (0,E.z)(this.serverApiClient.v1.teams.toggleTeamSignUpPage({disabled:!e}).pipe((0,I.Qn)(({data:e})=>e)));if((0,N.hx)(t))throw Error(`could't change toggleTeamSignUpPage ${t}`)},this.createInviteLink=async e=>{let t=await (0,E.z)(this.serverApiClient.v1.teams.createTeamSignUpPage({displayName:e}).pipe((0,I.Qn)(({data:e})=>e)));if((0,N.hx)(t))throw Error(`could't create an invite link with createTeamSignUpPage ${t}`)}}}R=(0,r.gn)([(0,T.GS)(),(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[void 0===B.l?Object:B.l,p])],R);class P{execute(){return(0,S.P)(()=>(this.inviteLinkService.loadInviteLinkData(),this.inviteLinkStore.state$.pipe((0,A.U)(e=>{switch(e.status){case g.D.NOT_LOADED:return(0,N.Vp)(null);case g.D.NOT_CREATED:return(0,N.Vp)({teamKey:"",enabled:!1});default:return(0,N.Vp)({teamKey:e.teamKey,enabled:e.enabled})}}))))}constructor(e,t){this.inviteLinkService=e,this.inviteLinkStore=t}}P=(0,r.gn)([(0,h.e)(g.$),(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[void 0===R?Object:R,p])],P);var U=a(4843),D=a(37368),z=a(75542);class F{async execute({body:e}){let{teamName:t,enabled:a}=e,n=await this.inviteLinkStore.getState();return n.status===g.D.NOT_CREATED?await this.inviteLinkService.createInviteLink(t):n.status===g.D.READY&&n.teamKey&&await this.inviteLinkService.toggleInviteLink(a),this.inviteLinkService.loadInviteLinkData(),Promise.resolve((0,N.Vp)(void 0))}constructor(e,t){this.inviteLinkStore=e,this.inviteLinkService=t}}F=(0,r.gn)([(0,D.W)(z.s),(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[p,void 0===R?Object:R])],F);var _=a(92176);class L{async execute({body:e}){let{login:t,teamUuid:a}=e;return await this.inviteLinkService.requestUserInviteTokenSending(t,a),Promise.resolve((0,N.Vp)(void 0))}constructor(e){this.inviteLinkService=e}}L=(0,r.gn)([(0,D.W)(_.T),(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[void 0===R?Object:R])],L);class w{}w=(0,r.gn)([(0,s.Y)({api:c.t,imports:[U.n],providers:[R],stores:[p],handlers:{commands:{toggleInviteLink:F,requestUserInviteTokenSending:L},events:{},queries:{inviteLinkData:P}},requiredFeatureFlips:Object.values(d)})],w)},55905:function(e,t,a){a.d(t,{E:()=>eK});var n,i,o,r,s=a(21636),c=a(48035),d=a(4843),l=a(7809),u=a(90805),m=a(44389),g=a(84651),p=a(15021),S=a(59982),A=a(68238),h=a(20458),N=a(63762),E=((n={}).ActivityLogsInfobox="activityLogsInfobox",n.B2BPlanDiscontinued="b2bPlanDiscontinued",n.NotificationTrialExtended="notificationTrialExtended",n.OfferToExtendFreeTrial="offerToExtendFreeTrial",n.RestrictSharingPolicy="restrictSharingPolicy",n.StarterRepackagePolicyInfobox="starterRepackagePolicyInfobox",n),I=((i={}).ActivityLogsInfobox="activityLogsInfobox",i.B2BPlanDiscontinued="b2bPlanDiscontinued",i.CRDRisksFoundInfobox="crdRisksFoundInfobox",i.IdPFailedNotification="idpFailedNotification",i.IdPNeedsSeatsInfobox="idpNeedsSeatsInfobox",i.IdPProvisioningsPendingInfobox="idpProvisioningsPendingInfobox",i.IdPNeedsSeatsInfoboxInPopup="idpNeedsSeatsInfoboxInPopup",i.NotificationTrialExtended="notificationTrialExtended",i.OfferToExtendFreeTrial="offerToExtendFreeTrial",i.RestrictSharingPolicy="restrictSharingPolicy",i.StarterRepackagePolicyInfobox="starterRepackagePolicyInfobox",i),C=((o={}).B2BPlanDiscontinued="b2bPlanDiscontinued",o.CRDRisksFoundInfobox="crdRisksFoundInfobox",o.IdPFailedNotification="idpFailedNotification",o.IdPNeedsSeatsInfobox="idpNeedsSeatsInfobox",o.IdPProvisioningsPendingInfobox="idpProvisioningsPendingInfobox",o.IdPNeedsSeatsInfoboxInPopup="idpNeedsSeatsInfoboxInPopup",o.NotificationTrialExtended="notificationTrialExtended",o.OfferToExtendFreeTrial="offerToExtendFreeTrial",o.RestrictSharingPolicy="restrictSharingPolicy",o.StarterRepackagePolicyInfobox="starterRepackagePolicyInfobox",o),v=((r={}).B2BPlanDiscontinued="b2bPlanDiscontinued",r.CRDRisksFoundInfobox="crdRisksFoundInfobox",r.CRDWaitingForInsightsInfobox="crdWaitingForInsightsInfobox",r.IdPFailedNotification="idpFailedNotification",r.IdPNeedsSeatsInfobox="idpNeedsSeatsInfobox",r.IdPProvisioningsPendingInfobox="idpProvisioningsPendingInfobox",r.IdPNeedsSeatsInfoboxInPopup="idpNeedsSeatsInfoboxInPopup",r.NotificationTrialExtended="notificationTrialExtended",r.OfferToExtendFreeTrial="offerToExtendFreeTrial",r.RestrictSharingPolicy="restrictSharingPolicy",r.StarterRepackagePolicyInfobox="starterRepackagePolicyInfobox",r);let T=N.z.object({seenNotifications:N.z.record(N.z.nativeEnum(v),N.z.boolean())}),B=e=>T.safeParse(e).success,y=N.z.object({seenNotifications:N.z.record(N.z.nativeEnum(C),N.z.boolean())}),f=e=>y.safeParse(e).success,O=N.z.object({seenNotifications:N.z.record(N.z.nativeEnum(I),N.z.boolean())}),b=e=>O.safeParse(e).success,R=N.z.object({seenNotifications:N.z.record(N.z.nativeEnum(E),N.z.boolean())}),P=e=>R.safeParse(e).success,U={b2bPlanDiscontinued:!1,crdRisksFoundInfobox:!1,crdWaitingForInsightsInfobox:!1,idpFailedNotification:!1,idpNeedsSeatsInfobox:!1,idpProvisioningsPendingInfobox:!1,idpNeedsSeatsInfoboxInPopup:!1,notificationTrialExtended:!1,offerToExtendFreeTrial:!1,restrictSharingPolicy:!1,starterRepackagePolicyInfobox:!1};function D(e){let{content:t,version:a}=e;return 1===a&&P(t)?{seenNotifications:{b2bPlanDiscontinued:t.seenNotifications.b2bPlanDiscontinued,crdRisksFoundInfobox:U.crdRisksFoundInfobox,crdWaitingForInsightsInfobox:U.crdWaitingForInsightsInfobox,idpFailedNotification:U.idpFailedNotification,idpNeedsSeatsInfobox:U.idpNeedsSeatsInfobox,idpNeedsSeatsInfoboxInPopup:U.idpNeedsSeatsInfoboxInPopup,idpProvisioningsPendingInfobox:U.idpProvisioningsPendingInfobox,notificationTrialExtended:t.seenNotifications.notificationTrialExtended,offerToExtendFreeTrial:t.seenNotifications.offerToExtendFreeTrial,restrictSharingPolicy:t.seenNotifications.restrictSharingPolicy,starterRepackagePolicyInfobox:t.seenNotifications.starterRepackagePolicyInfobox}}:2===a&&b(t)?{seenNotifications:{b2bPlanDiscontinued:t.seenNotifications.b2bPlanDiscontinued,crdRisksFoundInfobox:t.seenNotifications.crdRisksFoundInfobox,crdWaitingForInsightsInfobox:U.crdWaitingForInsightsInfobox,idpFailedNotification:t.seenNotifications.idpFailedNotification??U.idpFailedNotification,idpNeedsSeatsInfobox:t.seenNotifications.idpNeedsSeatsInfobox??U.idpNeedsSeatsInfobox,idpNeedsSeatsInfoboxInPopup:t.seenNotifications.idpNeedsSeatsInfoboxInPopup??U.idpNeedsSeatsInfoboxInPopup,idpProvisioningsPendingInfobox:t.seenNotifications.idpProvisioningsPendingInfobox??U.idpProvisioningsPendingInfobox,notificationTrialExtended:t.seenNotifications.notificationTrialExtended,offerToExtendFreeTrial:t.seenNotifications.offerToExtendFreeTrial,restrictSharingPolicy:t.seenNotifications.restrictSharingPolicy,starterRepackagePolicyInfobox:t.seenNotifications.starterRepackagePolicyInfobox}}:3===a&&f(t)?{seenNotifications:{b2bPlanDiscontinued:t.seenNotifications.b2bPlanDiscontinued,crdRisksFoundInfobox:t.seenNotifications.crdRisksFoundInfobox,crdWaitingForInsightsInfobox:U.crdWaitingForInsightsInfobox,idpFailedNotification:t.seenNotifications.idpFailedNotification??U.idpFailedNotification,idpNeedsSeatsInfobox:t.seenNotifications.idpNeedsSeatsInfobox??U.idpNeedsSeatsInfobox,idpNeedsSeatsInfoboxInPopup:t.seenNotifications.idpNeedsSeatsInfoboxInPopup??U.idpNeedsSeatsInfoboxInPopup,idpProvisioningsPendingInfobox:t.seenNotifications.idpProvisioningsPendingInfobox??U.idpProvisioningsPendingInfobox,notificationTrialExtended:t.seenNotifications.notificationTrialExtended??U.notificationTrialExtended,offerToExtendFreeTrial:t.seenNotifications.offerToExtendFreeTrial??U.offerToExtendFreeTrial,restrictSharingPolicy:t.seenNotifications.restrictSharingPolicy??U.restrictSharingPolicy,starterRepackagePolicyInfobox:t.seenNotifications.starterRepackagePolicyInfobox??U.starterRepackagePolicyInfobox}}:{seenNotifications:U}}class z extends(0,S.Q)({storage:{schemaVersion:4,initialValue:{seenNotifications:U},migrateStorageSchema:D,typeGuard:B},persist:!0,isCache:!0,scope:p.F.User,storeName:"team-admin-notifications-store",capacity:A.Y._010KB,codec:h.E}){}let F=N.z.object({failedProvisionings:N.z.union([N.z.object({eventDateUnix:N.z.number(),failedLogins:N.z.array(N.z.string()),nbOfFailedCreations:N.z.number(),requiredSeats:N.z.number(),nbOfPendingProvisionings:N.z.number(),shouldShowNotifications:N.z.object({warningProvisioningsPending:N.z.boolean(),alertFailuresNeedSeats:N.z.boolean()})}),N.z.undefined()]),fixedProvisionings:N.z.union([N.z.array(N.z.object({buyingUserId:N.z.number().nullable(),eventDateUnix:N.z.number(),nbOfSeatsBought:N.z.number()})),N.z.undefined()]),lastRefreshDate:N.z.number(),error:N.z.union([N.z.string(),N.z.undefined()])}),_=e=>F.safeParse(e).success;class L extends(0,S.Q)({storage:{schemaVersion:1,initialValue:{lastRefreshDate:0},typeGuard:_},persist:!0,scope:p.F.User,storeName:"idp-notifications-store",capacity:A.Y._010KB,codec:h.E}){}var w=a(44577),k=a(42589),M=a(53868),x=a(60025),V=a(306),G=a(94190),K=a(59242),j=a(92351),H=a(10034);class W{async refreshState(){let e=await this.teamAdminService.refreshState();if(!e?.isBillingOrFullAdmin){this.idpNotificationsStore.set({lastRefreshDate:0,error:j.C$.NOT_ADMIN});return}let t=await this.idpNotificationsStore.getState();if(t.lastRefreshDate+this.MIN_DELAY_BETWEEN_REFRESHES>Date.now())return;let a=(await this.adminNotificationsStore.getState()).seenNotifications;return(0,w.z)(this.serverApiClient.v1.teams.getIdpNotifications({}).pipe((0,k.U)(t=>{if((0,V.hx)(t))return{lastRefreshDate:Date.now(),error:t.error.message};let a=t.data.data.logs.failedProvisionings,n=a?.nbOfFailedCreations,i=e.seats.remaining,o=n?Math.max(n-i,0):0;return{failedProvisionings:a?.nbOfFailedCreations?{...a,requiredSeats:o,nbOfPendingProvisionings:i,shouldShowNotifications:{warningProvisioningsPending:i>0,alertFailuresNeedSeats:o>0}}:void 0,fixedProvisionings:t.data.data.logs.fixedProvisionings,lastRefreshDate:Date.now()}}),(0,M.b)(async e=>{let n=!1,i=!1,o=!1;e.failedProvisionings&&e.failedProvisionings.eventDateUnix===t.failedProvisionings?.eventDateUnix?e.failedProvisionings.requiredSeats!==t.failedProvisionings.requiredSeats&&(n=!0):(n=!0,o=!0),e.failedProvisionings?.nbOfPendingProvisionings!==t.failedProvisionings?.nbOfPendingProvisionings&&(i=!0),await this.adminNotificationsStore.set({seenNotifications:{...a,...n?{idpNeedsSeatsInfobox:!1,idpNeedsSeatsInfoboxInPopup:!1}:{},idpFailedNotification:!o&&a.idpFailedNotification,idpProvisioningsPendingInfobox:!i&&a.idpProvisioningsPendingInfobox}}),await this.idpNotificationsStore.set(e)})))}constructor(e,t,a,n){this.serverApiClient=e,this.teamAdminService=t,this.idpNotificationsStore=a,this.adminNotificationsStore=n,this.MIN_DELAY_BETWEEN_REFRESHES=500,this.getIdPFailedProvisioningsData=()=>(0,x.P)(()=>(this.refreshState(),this.idpNotificationsStore.state$.pipe((0,k.U)(e=>"not_admin"===e.error?(0,V.Rn)((0,j.qj)()):(0,V.Vp)(e.failedProvisionings))))),this.getIdPFixedProvisioningsData=()=>(0,x.P)(()=>(this.refreshState(),this.idpNotificationsStore.state$.pipe((0,k.U)(e=>"not_admin"===e.error?(0,V.Rn)((0,H.Go)()):(0,V.Vp)(e.fixedProvisionings)))))}}W=(0,s.gn)([(0,G.GS)(),(0,s.w6)("design:type",Function),(0,s.w6)("design:paramtypes",[void 0===K.l?Object:K.l,void 0===m.k?Object:m.k,L,z])],W);var Y=a(61962),Q=a(37368),q=a(21977);class Z{async execute(){let e=await this.store.getState(),t={...e.seenNotifications,starterRepackagePolicyInfobox:!0};return await this.store.set({...e,seenNotifications:t}),Promise.resolve((0,V.Vp)(void 0))}constructor(e){this.store=e}}Z=(0,s.gn)([(0,Q.W)(q.z),(0,s.w6)("design:type",Function),(0,s.w6)("design:paramtypes",[z])],Z);var $=a(62166);class X{async execute(){let e=await this.store.getState(),t={...e.seenNotifications,b2bPlanDiscontinued:!0};return await this.store.set({...e,seenNotifications:t}),Promise.resolve((0,V.Vp)(void 0))}constructor(e){this.store=e}}X=(0,s.gn)([(0,Q.W)($.q),(0,s.w6)("design:type",Function),(0,s.w6)("design:paramtypes",[z])],X);var J=a(87516);class ee{async execute(){let e=await this.store.getState(),t={...e.seenNotifications,crdRisksFoundInfobox:!0};return await this.store.set({...e,seenNotifications:t}),Promise.resolve((0,V.Vp)(void 0))}constructor(e){this.store=e}}ee=(0,s.gn)([(0,Q.W)(J.e),(0,s.w6)("design:type",Function),(0,s.w6)("design:paramtypes",[z])],ee);var et=a(35324);class ea{async execute(){let e=await this.store.getState(),t={...e.seenNotifications,idpFailedNotification:!0};return await this.store.set({...e,seenNotifications:t}),Promise.resolve((0,V.Vp)(void 0))}constructor(e){this.store=e}}ea=(0,s.gn)([(0,Q.W)(et.b),(0,s.w6)("design:type",Function),(0,s.w6)("design:paramtypes",[z])],ea);var en=a(16706);class ei{async execute(){let e=await this.store.getState(),t={...e.seenNotifications,idpNeedsSeatsInfobox:!0};return await this.store.set({...e,seenNotifications:t}),Promise.resolve((0,V.Vp)(void 0))}constructor(e){this.store=e}}ei=(0,s.gn)([(0,Q.W)(en.k),(0,s.w6)("design:type",Function),(0,s.w6)("design:paramtypes",[z])],ei);var eo=a(18364);class er{async execute(){let e=await this.store.getState(),t={...e.seenNotifications,idpNeedsSeatsInfoboxInPopup:!0};return await this.store.set({...e,seenNotifications:t}),Promise.resolve((0,V.Vp)(void 0))}constructor(e){this.store=e}}er=(0,s.gn)([(0,Q.W)(eo.N),(0,s.w6)("design:type",Function),(0,s.w6)("design:paramtypes",[z])],er);var es=a(57454);class ec{async execute(){let e=await this.store.getState(),t={...e.seenNotifications,idpProvisioningsPendingInfobox:!0};return await this.store.set({...e,seenNotifications:t}),Promise.resolve((0,V.Vp)(void 0))}constructor(e){this.store=e}}ec=(0,s.gn)([(0,Q.W)(es.r),(0,s.w6)("design:type",Function),(0,s.w6)("design:paramtypes",[z])],ec);var ed=a(16569);class el{async execute(){let e=await this.store.getState(),t={...e.seenNotifications,restrictSharingPolicy:!0};return await this.store.set({...e,seenNotifications:t}),Promise.resolve((0,V.Vp)(void 0))}constructor(e){this.store=e}}el=(0,s.gn)([(0,Q.W)(ed.o),(0,s.w6)("design:type",Function),(0,s.w6)("design:paramtypes",[z])],el);var eu=a(28672);class em{async execute(){let e=await this.store.getState(),t={...e.seenNotifications,notificationTrialExtended:!0};return await this.store.set({...e,seenNotifications:t}),Promise.resolve((0,V.Vp)(void 0))}constructor(e){this.store=e}}em=(0,s.gn)([(0,Q.W)(eu.D),(0,s.w6)("design:type",Function),(0,s.w6)("design:paramtypes",[z])],em);var eg=a(53045);class ep{async execute(){let e=await this.store.getState(),t={...e.seenNotifications,offerToExtendFreeTrial:!0};return await this.store.set({...e,seenNotifications:t}),Promise.resolve((0,V.Vp)(void 0))}constructor(e){this.store=e}}ep=(0,s.gn)([(0,Q.W)(eg.R),(0,s.w6)("design:type",Function),(0,s.w6)("design:paramtypes",[z])],ep);var eS=a(62256);class eA{async execute(){let e=await this.store.getState(),t={...e.seenNotifications,crdWaitingForInsightsInfobox:!0};return await this.store.set({...e,seenNotifications:t}),Promise.resolve((0,V.Vp)(void 0))}constructor(e){this.store=e}}eA=(0,s.gn)([(0,Q.W)(eS.Y),(0,s.w6)("design:type",Function),(0,s.w6)("design:paramtypes",[z])],eA);var eh=a(62506);class eN{execute(){return this.idpNotificationsDataService.getIdPFailedProvisioningsData()}constructor(e){this.idpNotificationsDataService=e}}eN=(0,s.gn)([(0,eh.e)(j.It),(0,s.w6)("design:type",Function),(0,s.w6)("design:paramtypes",[void 0===W?Object:W])],eN);class eE{execute(){return this.idpNotificationsDataService.getIdPFixedProvisioningsData()}constructor(e){this.idpNotificationsDataService=e}}eE=(0,s.gn)([(0,eh.e)(H.Un),(0,s.w6)("design:type",Function),(0,s.w6)("design:paramtypes",[void 0===W?Object:W])],eE);var eI=a(72704);class eC{execute(){return this.store.state$.pipe((0,k.U)(e=>(0,V.Vp)(!!e.seenNotifications.starterRepackagePolicyInfobox)))}constructor(e){this.store=e}}eC=(0,s.gn)([(0,eh.e)(eI.i),(0,s.w6)("design:type",Function),(0,s.w6)("design:paramtypes",[z])],eC);var ev=a(81433),eT=a(70930);class eB{execute(){return this.store.state$.pipe((0,k.U)(e=>!!e.seenNotifications.b2bPlanDiscontinued),(0,ev.x)(),(0,k.U)(V.Vp))}constructor(e){this.store=e}}eB=(0,s.gn)([(0,eh.e)(eT.z),(0,s.w6)("design:type",Function),(0,s.w6)("design:paramtypes",[z])],eB);var ey=a(81463);class ef{execute(){return this.store.state$.pipe((0,k.U)(e=>!!e.seenNotifications.crdRisksFoundInfobox),(0,ev.x)(),(0,k.U)(V.Vp))}constructor(e){this.store=e}}ef=(0,s.gn)([(0,eh.e)(ey.e),(0,s.w6)("design:type",Function),(0,s.w6)("design:paramtypes",[z])],ef);var eO=a(44854);class eb{execute(){return this.store.state$.pipe((0,k.U)(e=>!!e.seenNotifications.idpFailedNotification),(0,ev.x)(),(0,k.U)(V.Vp))}constructor(e){this.store=e}}eb=(0,s.gn)([(0,eh.e)(eO.g),(0,s.w6)("design:type",Function),(0,s.w6)("design:paramtypes",[z])],eb);var eR=a(86980);class eP{execute(){return this.store.state$.pipe((0,k.U)(e=>!!e.seenNotifications.idpNeedsSeatsInfobox),(0,ev.x)(),(0,k.U)(V.Vp))}constructor(e){this.store=e}}eP=(0,s.gn)([(0,eh.e)(eR.T),(0,s.w6)("design:type",Function),(0,s.w6)("design:paramtypes",[z])],eP);var eU=a(62555);class eD{execute(){return this.store.state$.pipe((0,k.U)(e=>(0,V.Vp)(!!e.seenNotifications.idpNeedsSeatsInfoboxInPopup)))}constructor(e){this.store=e}}eD=(0,s.gn)([(0,eh.e)(eU.k),(0,s.w6)("design:type",Function),(0,s.w6)("design:paramtypes",[z])],eD);var ez=a(50886);class eF{execute(){return this.store.state$.pipe((0,k.U)(e=>!!e.seenNotifications.idpProvisioningsPendingInfobox),(0,ev.x)(),(0,k.U)(V.Vp))}constructor(e){this.store=e}}eF=(0,s.gn)([(0,eh.e)(ez.S),(0,s.w6)("design:type",Function),(0,s.w6)("design:paramtypes",[z])],eF);var e_=a(24520);class eL{execute(){return this.store.state$.pipe((0,k.U)(e=>!!e.seenNotifications.restrictSharingPolicy),(0,ev.x)(),(0,k.U)(V.Vp))}constructor(e){this.store=e}}eL=(0,s.gn)([(0,eh.e)(e_.x),(0,s.w6)("design:type",Function),(0,s.w6)("design:paramtypes",[z])],eL);var ew=a(16714);class ek{execute(){return this.store.state$.pipe((0,k.U)(e=>!!e.seenNotifications.notificationTrialExtended),(0,ev.x)(),(0,k.U)(V.Vp))}constructor(e){this.store=e}}ek=(0,s.gn)([(0,eh.e)(ew.q),(0,s.w6)("design:type",Function),(0,s.w6)("design:paramtypes",[z])],ek);var eM=a(30986);class ex{execute(){return this.store.state$.pipe((0,k.U)(e=>!!e.seenNotifications.offerToExtendFreeTrial),(0,ev.x)(),(0,k.U)(V.Vp))}constructor(e){this.store=e}}ex=(0,s.gn)([(0,eh.e)(eM.U),(0,s.w6)("design:type",Function),(0,s.w6)("design:paramtypes",[z])],ex);var eV=a(66234);class eG{execute(){return this.store.state$.pipe((0,k.U)(e=>!!e.seenNotifications.crdWaitingForInsightsInfobox),(0,ev.x)(),(0,k.U)(V.Vp))}constructor(e){this.store=e}}eG=(0,s.gn)([(0,eh.e)(eV.u),(0,s.w6)("design:type",Function),(0,s.w6)("design:paramtypes",[z])],eG);class eK{}eK=(0,s.gn)([(0,c.Y)({api:l.t,imports:[Y.H,d.n],stores:[L,z,u.C],providers:[W,g.J,m.k],handlers:{commands:{markStarterRepackagePolicyInfoboxSeen:Z,markB2BPlanDiscontinuedSeen:X,markCRDRisksFoundInfoboxSeen:ee,markIdPFailedNotificationSeen:ea,markIdPNeedsSeatsInfoboxSeen:ei,markIdPNeedsSeatsInfoboxInPopupSeen:er,markIdPProvisioningsPendingInfoboxSeen:ec,markNewRestrictSharingPolicySeen:el,markNotificationTrialExtendedSeen:em,markOfferToExtendFreeTrialSeen:ep,markHasSeenWaitingForCRDInsightsInfoboxCommand:eA},events:{},queries:{getIdPFailedProvisioningsData:eN,getIdPFixedProvisioningsData:eE,hasSeenStarterRepackagePolicyInfobox:eC,hasSeenB2BPlanDiscontinued:eB,hasSeenCRDRisksFoundInfobox:ef,hasSeenIdPFailedNotification:eb,hasSeenIdPNeedsSeatsInfobox:eP,hasSeenIdPNeedsSeatsInfoboxInPopup:eD,hasSeenIdPProvisioningsPendingInfobox:eF,hasSeenNewRestrictSharingPolicy:eL,hasSeenNotificationTrialExtended:ek,hasSeenOfferToExtendFreeTrial:ex,hasSeenWaitingForCRDInsightsInfobox:eG}},requiredFeatureFlips:["monetization_extension_group_sharing_repackage"]})],eK)},96044:function(e,t,a){a.d(t,{X:()=>$});var n=a(21636),i=a(48035),o=a(90573),r=a(99481),s=a(4843),c=a(8616),d=a(59982),l=a(68238),u=a(15021),m=a(75431),g=a(63762);let p=g.z.object({adminHasDismissInfobox:g.z.boolean(),nonMembersCount:g.z.number().optional(),nonMembersList:m.RD.optional()}),S=e=>p.safeParse(e).success;class A extends(0,d.Q)({initialValue:{adminHasDismissInfobox:!1},storeTypeGuard:S,persist:!1,scope:u.F.User,storeName:"non-member-store",capacity:l.Y._001KB}){}var h=a(72233),N=a(69853),E=a(62506),I=a(42895),C=a(17741),v=a(306),T=a(4824);class B extends(0,r.ne)(){}var y=a(12723);class f{execute({body:e}){let{teamId:t}=e;return this.getTeamMembersData.get(t).pipe((0,C.Qn)(({members:e,billingAdmins:t})=>({billingAdmins:t,members:e.map(e=>({isTeamCaptain:(0,T.F)(e)&&e.isTeamCaptain,isGroupManager:(0,T.F)(e)&&e.isGroupManager,login:e.login,status:e.status}))})),(0,C.DZ)(e=>this.getFunctionalError(e)),(0,h.K)(e=>(this.logger.error("Could not retrieve list of team members.",{err:e}),(0,N.of)((0,v.Rn)(e)))))}constructor(e,t){this.getTeamMembersData=e,this.logger=t,this.getFunctionalError=e=>{switch(e){case I.oK.INVALID_LIMIT:return(0,I.my)();case I.oK.INVALID_PAGE:return(0,I.Xm)();case I.oK.INVALID_TEAMMEMBERS_GET:return(0,I.VG)();case I.oK.INVALID_TEAMSTATE_GET:return(0,I.wE)();case I.oK.NOT_MEMBER:return(0,I.Jy)();default:throw Error(`RequestTeamInviteToken: error ${e}`)}}}}f=(0,n.gn)([(0,E.e)(I.kw),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===y.G?Object:y.G,B])],f);var O=a(37368),b=a(52206),R=a(44577),P=a(53868),U=a(94190),D=a(59242),z=a(17507);class F extends z.f{}F=(0,n.gn)([(0,U.GS)()],F);class _{async callProposeMembers({proposedMemberLogins:e,force:t,origin:a,notificationOptions:n}){try{return await (0,R.z)(this.serverApiClient.v1.teams.proposeMembers({proposedMemberLogins:e,force:t,origin:a,notificationOptions:n}).pipe((0,C.DZ)(e=>{if("BusinessError"===e.tag)return(0,b.Wv)(e.code);throw Error(e.message)}),(0,C.lk)(e=>(0,v.Vp)(e.data)),(0,P.b)(()=>{this.eventEmitter.sendEvent("membersAdded",void 0)})))}catch(e){throw Error("Propose Members failed")}}constructor(e,t){this.serverApiClient=e,this.eventEmitter=t}}_=(0,n.gn)([(0,U.GS)(),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===D.l?Object:D.l,void 0===F?Object:F])],_);class L{execute({body:{proposedMemberLogins:e,force:t,origin:a,notificationOptions:n}}){return this.proposeMembersService.callProposeMembers({proposedMemberLogins:e,force:t,origin:a,notificationOptions:n})}constructor(e){this.proposeMembersService=e}}L=(0,n.gn)([(0,O.W)(b.og),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===_?Object:_])],L);var w=a(19428);class k{async execute(){return await this.nonMemberStore.set({adminHasDismissInfobox:!0}),(0,v.Vp)(void 0)}constructor(e){this.nonMemberStore=e}}k=(0,n.gn)([(0,O.W)(w.Y),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[A])],k);var M=a(72907),x=a(42589),V=a(81433),G=a(85844),K=a(50779);class j{getCount(){return this.serverApiClient.v1.teams.countDomainUsersNotInTeam({}).pipe((0,x.U)(e=>(0,v.hx)(e)?(0,v.Rn)((0,K.R)()):(0,v.Vp)(e.data.data.usersCount)))}getList(){return this.serverApiClient.v1.teams.getDomainUsersNotInTeam({}).pipe((0,x.U)(e=>(0,v.hx)(e)?(0,v.Rn)((0,K.R)()):(0,v.Vp)(e.data.data.users.map(e=>m.R0.parse(e)))))}constructor(e){this.serverApiClient=e}}j=(0,n.gn)([(0,U.GS)(),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===D.l?Object:D.l])],j);class H{execute(){return this.nonMembersStore.state$.pipe((0,M.w)(e=>void 0!==e.nonMembersCount?(0,N.of)(e.nonMembersCount):this.nonMembersService.getCount().pipe((0,x.U)(t=>(0,v.hx)(t)?0:(this.nonMembersStore.set({...e,nonMembersCount:t.data}),t.data)))),(0,V.x)(),(0,x.U)(v.Vp))}constructor(e,t){this.nonMembersStore=e,this.nonMembersService=t}}H=(0,n.gn)([(0,E.e)(G.H),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[A,void 0===j?Object:j])],H);var W=a(45991);let Y=[];class Q{execute(){return this.nonMembersStore.state$.pipe((0,M.w)(e=>void 0!==e.nonMembersList?(0,N.of)(e.nonMembersList):this.nonMembersService.getList().pipe((0,x.U)(t=>{if((0,v.hx)(t))return Y;let a=t.data;return this.nonMembersStore.set({...e,nonMembersList:a}),a}))),(0,V.x)((e,t)=>(0,W.shallowEqualArrays)(e,t)),(0,x.U)(v.Vp))}constructor(e,t){this.nonMembersStore=e,this.nonMembersService=t}}Q=(0,n.gn)([(0,E.e)(m.Fz),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[A,void 0===j?Object:j])],Q);var q=a(98735);class Z{execute(){return this.nonMembersStore.state$.pipe((0,x.U)(e=>e.adminHasDismissInfobox),(0,V.x)(),(0,x.U)(v.Vp))}constructor(e){this.nonMembersStore=e}}Z=(0,n.gn)([(0,E.e)(q.K),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[A])],Z);class ${}$=(0,n.gn)([(0,i.Y)({api:c.L,imports:[s.n,o.G],providers:[(0,r.d_)(B),_,j,F,y.G],stores:[A],handlers:{commands:{proposeMembers:L,dismissNonMembersInfobox:k},events:{},queries:{getNonMembersCount:H,getNonMembersList:Q,getHasAdminDismissedInfobox:Z,getMembersList:f}},exports:[y.G]})],$)},12723:function(e,t,a){a.d(t,{G:()=>l});var n=a(21636),i=a(17741),o=a(70554),r=a(649),s=a(94190),c=a(14098),d=a(59242);class l{constructor(e){this.serverApiClient=e,this.get=e=>this.serverApiClient.v1.teams.getTeamMembers({teamId:parseInt(e,10),orderBy:"joinedDateUnix",limit:0}).pipe((0,i.Qn)(({data:e})=>e),(0,i.DZ)(e=>(0,o.EQ)(e,{...(0,c.X)(e=>(0,r.j)(e)),BusinessError:e=>e.tag})))}}l=(0,n.gn)([(0,s.GS)(),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===d.l?Object:d.l])],l)},34317:function(e,t,a){a.d(t,{V:()=>A});var n=a(21636),i=a(48035),o=a(4843),r=a(26195),s=a(94190),c=a(59242),d=a(306),l=a(17741),u=a(42589);class m{constructor(e){this.serverApiClient=e,this.getTeamReport=()=>this.getTeamReportData().pipe((0,u.U)(e=>{if((0,d.hx)(e))throw Error("could't retrieve team report");let{data:t}=e;return(0,d.Vp)(t)})),this.getTeamReportData=()=>this.serverApiClient.v1.teams.report({}).pipe((0,l.Qn)(({data:e})=>e),(0,l.DZ)(e=>{throw e}))}}m=(0,n.gn)([(0,s.GS)(),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===c.l?Object:c.l])],m);var g=a(62506),p=a(67022);class S{execute(){return this.teamReportService.getTeamReport()}constructor(e){this.teamReportService=e}}S=(0,n.gn)([(0,g.e)(p.z),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===m?Object:m])],S);class A{}A=(0,n.gn)([(0,i.Y)({api:r.B,imports:[o.n],providers:[m],handlers:{commands:{},events:{},queries:{getReport:S}}})],A)},84651:function(e,t,a){a.d(t,{J:()=>g});var n=a(21636),i=a(90555),o=a(49247),r=a(94190),s=a(306),c=a(44577),d=a(42589),l=a(63762);let u=l.z.array(l.z.object({details:l.z.object({isBillingAdmin:l.z.boolean(),isTeamAdmin:l.z.boolean(),status:l.z.nativeEnum(i.fE)})})),m=e=>u.safeParse(e).success;class g{get isBillingAdmin(){return(0,c.z)(this.isBillingAdmin$)}get isFullRightsAdmin(){return(0,c.z)(this.isFullRightsAdmin$)}spaces$(){return this.carbonLegacyClient.queries.carbonState({path:"userSession.spaceData.spaces"}).pipe((0,d.U)(e=>(0,s.hx)(e)||!m(e.data)||0===e.data.length?[]:e.data.filter(e=>e.details.status===i.fE.Accepted)))}constructor(e){this.carbonLegacyClient=e,this.isBillingAdmin$=this.spaces$().pipe((0,d.U)(e=>e.some(e=>e.details.isBillingAdmin))),this.isFullRightsAdmin$=this.spaces$().pipe((0,d.U)(e=>e.some(e=>e.details.isTeamAdmin)))}}g=(0,n.gn)([(0,r.GS)(),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===o._?Object:o._])],g)},46062:function(e,t,a){a.d(t,{O:()=>n,e:()=>s});let n=(e,t)=>({allowPersistenceForMasterPassword:!e.mpPersistenceDisabled,allowSharing:!e.sharingDisabled,sharingRestrictedToTeam:!!e.sharingRestrictedToTeam,enforce2FA:"newDevice"===e.twoFAEnforced,cryptoForcedPayload:e.cryptoForcedPayload??"disabled",disableAutoLoginDomains:e.autologinDomainDisabledArray??[],enableForcedDomains:!!e.forcedDomainsEnabled,enablePersonalSpace:!!e.personalSpaceEnabled,enableRemoveForcedContent:!!e.removeForcedContentEnabled,enableVPN:!!e.secureWifiEnabled,forceAutomaticLogout:(e.forceAutomaticLogout||"unset").toString(),lockOnExit:!!e.lockOnExit,vaultExportEnabled:!!e.vaultExportEnabled,collectSensitiveDataAuditLogsEnabled:!!e.collectSensitiveDataAuditLogsEnabled,ssoEnabled:!!e.ssoEnabled,ssoProvisioning:"automatic"===e.ssoProvisioning,teamDomain:e.teamDomains??[],restrictSharingToTeam:"boolean"==typeof e.sharingRestrictedToTeam?e.sharingRestrictedToTeam:t.internalSharingOnly.enabled,recoveryEnabled:!!e.recoveryEnabled,richIconsEnabled:!!e.richIconsEnabled,itemVisibilityEnabled:!!e.uvvsReportEnabled,compromisedPasswordInappNudgesEnabled:!!e.compromisedPasswordInappNudgesEnabled,reusedPasswordInappNudgesEnabled:!!e.reusedPasswordInappNudgesEnabled,weakPasswordInappNudgesEnabled:!!e.weakPasswordInappNudgesEnabled}),i=(e,t,a)=>{let n=[];return a?.added&&a.added.forEach(t=>n.push({type:e,value:t})),a?.removed&&a.removed.forEach(e=>n.push({type:t,value:e})),n},o=(e,t)=>void 0!==t?[{type:e,value:t}]:[],r=(e,t)=>void 0!==t?[{type:e,value:!t}]:[],s=(e,t)=>{let a=[...i("add_team_domain","remove_team_domain",t.teamDomain),...i("add_autologin_domain_disabled","remove_autologin_domain_disabled",t.disableAutoLoginDomains),...o("set_forced_domains_enabled",t.enableForcedDomains),...o("set_rm_forced_content_enabled",t.enableRemoveForcedContent),...o("set_vault_export_enabled",t.vaultExportEnabled),...o("set_secure_wifi",t.enableVPN),...o("set_lock_on_exit",t.lockOnExit),...o("set_collect_sensitive_data_audit_logs_enabled",t.collectSensitiveDataAuditLogsEnabled),...o("set_sharing_restricted_to_team",t.restrictSharingToTeam),...r("set_sharing_disabled",t.allowSharing),...o("set_compromised_password_inapp_nudges_enabled",t.compromisedInAppNudgeEnabled),...o("set_weak_password_inapp_nudges_enabled",t.weakInAppNudgeEnabled),...o("set_reused_password_inapp_nudges_enabled",t.reusedInAppNudgeEnabled)];return void 0!==t.enforce2FA&&a.push({type:"set_two_factor_authentication_enforced",value:t.enforce2FA?"newDevice":"disabled"}),void 0!==t.forceAutomaticLogout&&a.push({type:null===t.forceAutomaticLogout?"unset_force_automatic_logout":"set_force_automatic_logout",value:t.forceAutomaticLogout}),void 0!==t.cryptoForcedPayload&&a.push({type:"set_crypto_forced_payload",value:t.cryptoForcedPayload}),void 0!==t.ssoProvisioning&&a.push({type:"set_sso_provisioning",value:t.ssoProvisioning?"automatic":"disabled"}),void 0!==t.richIconsEnabled&&a.push({type:"set_rich_icons_enabled",value:t.richIconsEnabled}),void 0!==t.itemVisibilityEnabled&&a.push({type:"set_uvvs_report_enabled",value:t.itemVisibilityEnabled}),{operations:a,teamId:e}}},61962:function(e,t,a){a.d(t,{H:()=>tU});var n,i=a(21636),o=a(48035),r=a(90573),s=a(99481),c=a(4843),d=a(44790),l=a(8616),u=a(73827),m=a(87055),g=a(84651),p=a(44577),S=a(94190),A=a(59242),h=a(96272),N=((n={}).CannotAddSeatDuringFreeTrial="cannot_add_seat_during_free_trial",n.CannotAddSeatIfDiscontinued="cannot_add_seat_on_soft_discontinued",n.CannotAddSeatDuringGracePeriod="cannot_add_seat_during_grace_period",n.UnsupportedPaymentMean="unsupported_payment_mean",n.UserIsNotBillingAdmin="not_billing_admin",n.PaymentFailed="payment_failed",n);let E=(0,h.Vj)("cannot_add_seat_during_free_trial","Not possible to add seats during free trial"),I=(0,h.Vj)("cannot_add_seat_on_soft_discontinued","Not possible to add seats if team is discontinued"),C=(0,h.Vj)("cannot_add_seat_during_grace_period","Not possible to add seats during grace period"),v=(0,h.Vj)("unsupported_payment_mean","Payment mean is not supported"),T=(0,h.Vj)("not_billing_admin","User is not billing admin"),B=(0,h.Vj)("payment_failed","The payment has failed");var y=a(17741),f=a(70554),O=a(649);class b{addSeats({seats:e}){return(0,p.z)(this.serverApiClient.v1.teams.addSeats({seats:e}).pipe((0,y.DZ)(e=>(0,f.EQ)(e,{BusinessError:e=>this.getAddSeatsFunctionalError(e.code),FetchFailedError:O.j,BadStatus:O.j,InternalServerError:O.j,InvalidRequest:O.j,RateLimited:O.j,ServiceUnavailable:O.j,UnspecifiedBadStatus:O.j})),(0,y.Qn)(e=>e.data)))}constructor(e){this.serverApiClient=e,this.getAddSeatsFunctionalError=e=>{switch(e){case N.CannotAddSeatDuringFreeTrial:return E();case N.CannotAddSeatDuringGracePeriod:return C();case N.CannotAddSeatIfDiscontinued:return I();case N.UnsupportedPaymentMean:return v();case N.UserIsNotBillingAdmin:return T();case N.PaymentFailed:default:return B()}}}}b=(0,i.gn)([(0,S.GS)(),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[void 0===A.l?Object:A.l])],b);var R=a(60025),P=a(42589),U=a(81433),D=a(81102),z=a(20661),F=a(45991),_=a(306),L=a(50779),w=a(9610),k=a(51748),M=a(422),x=a(24122),V=a(45467);let G=e=>{if(!e)return new Date;let t=(0,k.Z)(e,"yyyy-MM-dd",new Date);return"Invalid Date"!==t.toString()?t:new Date(e)},K=(e,t)=>e.setHours(0,0,0,0)>t.setHours(0,0,0,0),j=e=>{let t=G((0,M.Z)(e).toString());return(0,x.Z)(t,"yyyy-MM-dd")===(0,x.Z)(G(new Date().toString()),"yyyy-MM-dd")},H=e=>{let t=new Date,a=(0,M.Z)(e);return a.setDate(a.getDate()+6),K(t,a)},W=e=>(0,V.Z)((0,M.Z)(e),new Date);var Y=a(90805),Q=a(44389);class q{constructor(e,t){this.teamAdminStore=e,this.teamAdminService=t,this.getTeamTrialStatus=()=>(0,R.P)(()=>(this.teamAdminService.refreshState(),this.teamAdminStore.state$.pipe((0,P.U)(e=>e.isBillingOrFullAdmin?{isBillingOrFullAdmin:!0,isFreeTrial:e.billing.isFreeTrial,isGracePeriod:e.billing.isGracePeriod,creationDateUnix:e.creationDateUnix,nextBillingDetailsDateUnix:e.billing.nextBillingDetails.dateUnix,spaceTier:e.billing.planTier,isCompanySizeOver50:e.billing.isCompanySizeOver50,tierTrialOverrideInfo:e.tierTrialOverrideInfo,canUseTierTrial:e.canUseTierTrial}:{isBillingOrFullAdmin:!1}),(0,U.x)(F.shallowEqualObjects),(0,P.U)(({isBillingOrFullAdmin:e,isFreeTrial:t,isGracePeriod:a,creationDateUnix:n,nextBillingDetailsDateUnix:i,spaceTier:o,isCompanySizeOver50:r,tierTrialOverrideInfo:s,canUseTierTrial:c})=>e?(0,_.Vp)({isFreeTrial:t,isGracePeriod:a,isFirstDayOfTrial:j(n),isSecondStageOfTrial:H(n),daysLeftInTrial:s?.tierTrialEndDateUnix?W(s.tierTrialEndDateUnix):W(i),spaceTier:o,isCompanySizeOver50:r,tierTrialOverrideInfo:s,canUseTierTrial:c}):(0,_.Rn)((0,L.R)()))))),this.getTeamBillingDetails=()=>this.teamAdminStore.state$.pipe((0,P.U)(e=>{if(!e.isBillingOrFullAdmin)return{isBillingOrFullAdmin:!1};let{billing:t,seats:a}=e;return{isBillingOrFullAdmin:!0,nextBillingDetailsAmount:t.nextBillingDetails.amount,nextBillingDetailsCurrency:t.nextBillingDetails.currency,nextBillingDetailsDateUnix:t.nextBillingDetails.dateUnix,nextBillingAmountFormatted:t.nextBillingDetails.amount/100,billingType:t.billingMethod,spaceTier:t.planTier,creditCardLastDigits:t.creditCardLastDigits,lastBillingDateUnix:t.lastBillingDateUnix,seatsPaid:a.paid,seatsExtraFree:a.extraFree,usersToBeRenewedCount:t.usersToBeRenewedCount,planDetails:t.planDetails,duration:t.duration}}),(0,U.x)((e,t)=>(0,z.Z)(e,t)),(0,P.U)(({isBillingOrFullAdmin:e,nextBillingDetailsAmount:t,nextBillingDetailsCurrency:a,nextBillingDetailsDateUnix:n,nextBillingAmountFormatted:i,billingType:o,spaceTier:r,creditCardLastDigits:s,lastBillingDateUnix:c,seatsPaid:d,seatsExtraFree:l,usersToBeRenewedCount:u,planDetails:m,duration:g})=>{if(!e)return(0,_.Rn)((0,L.R)());let p={amount:t,currency:"usd"===a?w.F.USD:w.F.EUR,dateUnix:n,amountFormatted:i,pricePerSeat:i/u};return(0,_.Vp)({billingType:o??null,spaceTier:r,creditCardLastDigits:s??null,lastBillingDateUnix:c,nextBillingDetails:p,seatsNumber:d+l,usersToBeRenewedCount:u,daysLeftUntilNextBillingPeriod:W(n),planDetails:{...m,duration:g}})})),this.getTeamCapabilities=()=>this.teamAdminStore.state$.pipe((0,P.U)(e=>("NOT_LOADED"===e.loadingState&&this.teamAdminService.refreshState(),e)),(0,D.n)(e=>"LOADED"!==e.loadingState),(0,P.U)(e=>e.isBillingOrFullAdmin?e.capabilities:null),(0,U.x)((e,t)=>null!==e&&null!==t?(0,z.Z)(e,t):e===t),(0,P.U)(e=>null===e?(0,_.Rn)((0,L.R)()):(0,_.Vp)(e))),this.getTeamCreationDateUnix=()=>this.teamAdminStore.state$.pipe((0,P.U)(e=>"NOT_LOADED"!==e.loadingState&&("LOADING"!==e.loadingState||e.isBillingOrFullAdmin)?!!e.isBillingOrFullAdmin&&e.creationDateUnix:null),(0,U.x)(),(0,P.U)(e=>!1===e?(0,_.Rn)((0,L.R)()):(0,_.Vp)(e))),this.getTeamSeats=()=>(0,R.P)(()=>(this.teamAdminService.refreshState(),this.teamAdminStore.state$.pipe((0,P.U)(e=>e.isBillingOrFullAdmin?(0,_.Vp)(e.seats):(0,_.Rn)((0,L.R)()))))),this.getTeamSecurityScore=()=>this.teamAdminStore.state$.pipe((0,P.U)(e=>e.isBillingOrFullAdmin?(0,_.Vp)(e.securityScore):(0,_.Rn)((0,L.R)()))),this.getIndustryBenchmarkData=()=>this.teamAdminStore.state$.pipe((0,P.U)(e=>!!e.isBillingOrFullAdmin&&e.industryBenchmarkData),(0,U.x)((e,t)=>"boolean"!=typeof e&&"boolean"!=typeof t?(0,F.shallowEqualObjects)(e,t):e===t),(0,P.U)(e=>!1===e?(0,_.Rn)((0,L.R)()):(0,_.Vp)(e))),this.getTeamName=()=>this.teamAdminStore.state$.pipe((0,P.U)(e=>e.isBillingOrFullAdmin?e.teamName:null),(0,U.x)(),(0,P.U)(e=>null===e?(0,_.Rn)((0,L.R)()):(0,_.Vp)(e))),this.getTeamRoles=()=>this.teamAdminStore.state$.pipe((0,P.U)(e=>e.isBillingOrFullAdmin?(0,_.Vp)(e.teamRoles):(0,_.Rn)((0,L.R)()))),this.getTeamActiveDirectoryInfo=()=>this.teamAdminStore.state$.pipe((0,P.U)(e=>e.isBillingOrFullAdmin?(0,_.Vp)(e.settings.activeDirectoryInfo):(0,_.Rn)((0,L.R)()))),this.getTeamDuoInfo=()=>this.teamAdminStore.state$.pipe((0,P.U)(e=>e.isBillingOrFullAdmin?(0,_.Vp)(e.settings.duoInfo):(0,_.Rn)((0,L.R)()))),this.getTeamSsoInfo=()=>this.teamAdminStore.state$.pipe((0,P.U)(e=>e.isBillingOrFullAdmin?(0,_.Vp)(e.settings.ssoInfo):(0,_.Rn)((0,L.R)()))),this.getTeamProvisioningInfo=()=>this.teamAdminStore.state$.pipe((0,P.U)(e=>e.isBillingOrFullAdmin?(0,_.Vp)({provisioningSolution:e.settings.provisioningSolution}):(0,_.Rn)((0,L.R)()))),this.getTeamPolicies=()=>(0,R.P)(()=>(this.teamAdminService.refreshState(),this.teamAdminStore.state$.pipe((0,P.U)(e=>e.isBillingOrFullAdmin?e.policies:null),(0,U.x)((e,t)=>null!==e&&null!==t?(0,z.Z)(e,t):e===t),(0,P.U)(e=>null===e?(0,_.Rn)((0,L.R)()):(0,_.Vp)(e)))))}}q=(0,i.gn)([(0,S.GS)(),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[void 0===Y.C?Object:Y.C,void 0===Q.k?Object:Q.k])],q);var Z=a(82222);class ${constructor(e){this.serverApiClient=e,this.extendFreeTrial=async()=>{let e=await (0,p.z)(this.serverApiClient.v1.teams.extendFreeTrial({}));return(0,_.hx)(e)&&this.getExtendTrialFunctionalError(e.error.message),(0,_.Vp)(void 0)},this.getExtendTrialFunctionalError=e=>{switch(e){case Z.sK.TEAM_NOT_FOUND:return(0,Z.gv)();case Z.sK.NOT_IN_FREE_TRIAL:return(0,Z.AP)();case Z.sK.IN_GRACE_PERIOD:return(0,Z.RQ)();case Z.sK.USER_NOT_ADMIN:return(0,Z.lO)();default:return(0,Z.gv)()}}}}$=(0,i.gn)([(0,S.GS)(),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[void 0===A.l?Object:A.l])],$);var X=a(36884),J=a(53868),ee=a(18661),et=a(49247),ea=a(59982),en=a(68238),ei=a(15021),eo=a(20458);let er=e=>e===w.Uz.Canceled||e===w.Uz.None||e===w.Uz.Pending;class es extends(0,ea.Q)({storage:{schemaVersion:1,initialValue:w.Uz.None,typeGuard:er},persist:!0,scope:ei.F.User,storeName:"plan-cancellation-store",capacity:en.Y._001KB,codec:eo.E}){}class ec{async refreshState(){let e=this.getTickets(),t=this.getIsRenewalStopped();return await (0,p.z)((0,X.a)([e,t]).pipe((0,P.U)(([e,t])=>this.serverToDomainCancelStatusMapper(e,t)),(0,J.b)(e=>{this.planCancellationStore.set(e)})))}constructor(e,t,a){this.serverApiClient=e,this.planCancellationStore=t,this.carbon=a,this.createZendeskCancellationTicket=async e=>{let t=await (0,p.z)(this.serverApiClient.v1.teams.createZendeskCancellationTicket(e));return(0,_.hx)(t)&&this.getBusinessErrorsForCreateZendeskCancellationTicket(t.error.message),(0,_.Vp)(void 0)},this.getZendeskCancellationTicket=()=>(this.refreshState(),this.planCancellationStore.state$.pipe((0,U.x)(),(0,P.U)(_.Vp))),this.getBusinessErrorsForCreateZendeskCancellationTicket=e=>"TEAM_IN_FREE_TRIAL"===e?(0,ee.VH)():"TEAM_IS_DISCONTINUED"===e?(0,ee.fz)():(0,L.R)(),this.serverToDomainCancelStatusMapper=(e,t)=>(0,_.hx)(e)?w.Uz.Unknown:t?w.Uz.Canceled:void 0!==(0,_.db)(e).id?w.Uz.Pending:w.Uz.None,this.getIsRenewalStopped=()=>this.carbon.queries.getNodePremiumStatus().pipe((0,P.U)(e=>{if((0,_.hx)(e))throw Error("Cannot retrieve node premium status from Carbon");return e.data.b2bStatus?.currentTeam?.isRenewalStopped})),this.getTickets=()=>this.serverApiClient.v1.teams.getZendeskCancellationTicket({}).pipe((0,y.DZ)(e=>({tag:e.message})),(0,y.Qn)(e=>e.data))}}ec=(0,i.gn)([(0,S.GS)(),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[void 0===A.l?Object:A.l,es,void 0===et._?Object:et._])],ec);var ed=a(63762);let el=ed.z.enum(["NOT_LOADED","LOADING","LOADED","ERRORED"]),eu=ed.z.object({isTeamCreator:ed.z.boolean().optional(),loadingStatus:el}),em=e=>eu.safeParse(e).success;class eg extends(0,ea.Q)({initialValue:{loadingStatus:el.Enum.NOT_LOADED},storeTypeGuard:em,persist:!1,isCache:!0,scope:ei.F.User,storeName:"team-creator-store",capacity:en.Y._010KB}){}class ep extends(0,ea.Q)({persist:!1,scope:ei.F.Device,storeName:"admin-card-info",initialValue:{last4DigitsFormatted:"",expirationDateFormatted:"",hasCreditCardPaymentMethod:!1,isExpired:!1,billingCountry:"",cardType:""},capacity:en.Y._001KB}){}var eS=a(2582);class eA{populateAdminCardInfoStore(){return this.serverApiClient.v1.premium.getSubscriptionInfo({}).pipe((0,P.U)(e=>{if(!(0,_.d6)(e))throw Error(`Cannot retrieve subscription info. Error: ${e.error} `);let t=e.data.data.b2bSubscription?.billingInformation;return this.cardInfoStore.set({last4DigitsFormatted:this.formatCardLast4Digits(Number(t?.last4)),expirationDateFormatted:t?.exp_year&&t.exp_month?`${t.exp_month}/${t.exp_year.toString().substring(2)}`:"",hasCreditCardPaymentMethod:!!t?.last4,isExpired:this.isBillingMethodExpired(t),billingCountry:t?.country??"",cardType:t?.type??""}),(0,_.Vp)(void 0)}))}constructor(e,t){this.serverApiClient=e,this.cardInfoStore=t,this.isBillingMethodExpired=e=>!!e?.exp_year&&!!e.exp_month&&(0,eS.Z)(new Date(e.exp_year,e.exp_month,0)),this.formatCardLast4Digits=e=>e.toLocaleString("en-US",{minimumIntegerDigits:4,useGrouping:!1})}}eA=(0,i.gn)([(0,S.GS)(),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[void 0===A.l?Object:A.l,ep])],eA);var eh=a(72233),eN=a(69853),eE=a(19855),eI=a(64898),eC=a(69108),ev=a(4824);class eT extends(0,s.ne)(){}var eB=a(12723);class ey{async refreshState(){await this.teamCreatorStore.set({loadingStatus:"LOADING"});let e=await (0,p.z)(this.isTeamAdmin()),t=await (0,p.z)(this.getUserLogin()),a=await (0,p.z)(this.getTeamId());if(!e){await this.teamCreatorStore.set({isTeamCreator:!1,loadingStatus:"LOADED"});return}try{let e=await (0,p.z)(this.getTeamMembersData.get(a));(0,_.hx)(e)?this.teamCreatorStore.set({loadingStatus:"ERRORED"}):this.teamCreatorStore.set({isTeamCreator:this.isTeamCreator(e.data,t),loadingStatus:"LOADED"})}catch(e){this.logger.error("Failed to update team creator store",{error:e}),this.teamCreatorStore.set({loadingStatus:"ERRORED"})}}constructor(e,t,a,n,i,o){this.logger=e,this.permissionsClient=t,this.teamPlanDetailsClient=a,this.getTeamMembersData=n,this.sessionClient=i,this.teamCreatorStore=o,this.isTeamCreator=(e,t)=>{let a=e.members.filter(e=>(0,ev.F)(e)&&e.isTeamCaptain).sort((e,t)=>(e.joinedDateUnix??0)-(t.joinedDateUnix??0));return a[0]?.login===t},this.getTeamId=()=>{let{getTeamId:e}=this.teamPlanDetailsClient.queries;return e().pipe((0,P.U)(e=>(0,_.hx)(e)||!e.data.teamId?"":e.data.teamId))},this.isTeamAdmin=()=>{let{userPermissions:e}=this.permissionsClient.queries;return e().pipe((0,P.U)(e=>{if((0,_.hx)(e))throw Error("is-team-creator: error occurred while retrieving permissions",{cause:{failure:(0,_.Yv)(e)}});return e.data.includes("ALL")}),(0,eh.K)(e=>(this.logger.error("Unable to retrieve user permissions",{error:e}),(0,eN.of)(!1))),(0,U.x)())},this.getUserLogin=()=>{let{selectedOpenedSession:e}=this.sessionClient.queries;return e().pipe((0,P.U)(e=>{if((0,_.d6)(e)&&"string"==typeof e.data&&""!==e.data)return e.data;throw Error("No active login")}))}}}ey=(0,i.gn)([(0,S.GS)(),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[eT,void 0===eC.J?Object:eC.J,void 0===eI.e?Object:eI.e,void 0===eB.G?Object:eB.G,void 0===eE.x?Object:eE.x,eg])],ey);var ef=a(15170),eO=a(32592);class eb{startTierTrial(){return(0,p.z)(this.serverApiClient.v1.teams.startTierTrial({tier:"businessplus"}).pipe((0,y.DZ)(e=>(0,f.EQ)(e,{BusinessError:e=>this.getStartTierTrialFunctionalError(e.code),FetchFailedError:O.j,BadStatus:O.j,InternalServerError:O.j,InvalidRequest:O.j,RateLimited:O.j,ServiceUnavailable:O.j,UnspecifiedBadStatus:O.j})),(0,y.Qn)(()=>!0)))}extendTierTrial(){return(0,p.z)(this.serverApiClient.v1.teams.extendTierTrial({tier:"businessplus"}).pipe((0,y.DZ)(e=>(0,f.EQ)(e,{BusinessError:e=>this.getExtendTierTrialFunctionalError(e.code),FetchFailedError:O.j,BadStatus:O.j,InternalServerError:O.j,InvalidRequest:O.j,RateLimited:O.j,ServiceUnavailable:O.j,UnspecifiedBadStatus:O.j})),(0,y.Qn)(()=>!0)))}constructor(e){this.serverApiClient=e,this.getStartTierTrialFunctionalError=e=>{switch(e){case ef.ls.FREE_TRIAL_ALREADY_STARTED:return(0,ef.bO)();case ef.ls.TEAM_NOT_FOUND:return(0,ef.IR)();case ef.ls.ALREADY_ON_TIER_TRIAL:return(0,ef.Nc)();default:throw Error(`StartTierTrial: error ${e}`)}},this.getExtendTierTrialFunctionalError=e=>{switch(e){case eO.rv.TEAM_NOT_FOUND:return(0,eO.ed)();case eO.rv.NO_ACTIVE_FREE_TRIAL:return(0,eO.AS)();case eO.rv.FREE_TRIAL_ALREADY_EXTENDED:return(0,eO.RY)();case eO.rv.USER_IS_NOT_TEAM_ADMIN:return(0,eO.mW)();default:throw Error(`ExtendTierTrial: error ${e}`)}}}}eb=(0,i.gn)([(0,S.GS)(),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[void 0===A.l?Object:A.l])],eb);var eR=a(96044),eP=a(37368),eU=a(46458);class eD{async execute({body:e}){let{seats:t}=e,a=await this.addSeatsService.addSeats({seats:t});return(0,_.d6)(a)&&await this.teamAdminService.refreshState(),a}constructor(e,t){this.teamAdminService=e,this.addSeatsService=t}}eD=(0,i.gn)([(0,eP.W)(eU.E),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[void 0===Q.k?Object:Q.k,void 0===b?Object:b])],eD);class ez{async execute(){let e=await this.freeTrialService.extendFreeTrial();return(0,_.d6)(e)&&await this.teamAdminService.refreshState(),e}constructor(e,t){this.freeTrialService=e,this.teamAdminService=t}}ez=(0,i.gn)([(0,eP.W)(Z.No),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[void 0===$?Object:$,void 0===Q.k?Object:Q.k])],ez);class eF{async execute(){let e=await this.tierTrialService.extendTierTrial();return(0,_.d6)(e)&&await this.teamAdminService.refreshState(),e}constructor(e,t){this.tierTrialService=e,this.teamAdminService=t}}eF=(0,i.gn)([(0,eP.W)(eO.jF),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[void 0===eb?Object:eb,void 0===Q.k?Object:Q.k])],eF);let e_={[w.Gr.ChoseOtherPasswordManager]:"cancellation_switched_to_competitor",[w.Gr.DownsizedEmployeeCount]:"cancellation_acquisition_or_restructured",[w.Gr.MissingCriticalFeatures]:"cancellation_lack_of_features",[w.Gr.NoInternalUsage]:"cancellation_lack_of_adoption",[w.Gr.Other]:"cancellation_other",[w.Gr.TechnicalIssues]:"cancellation_technical_issues",[w.Gr.TooExpensive]:"cancellation_price"},eL=e=>({reasons:e.map(e=>e_[e])});class ew{async execute({body:e}){let{reasons:t}=e,a=eL(t),n=await this.planCancellationService.createZendeskCancellationTicket(a);return(0,_.d6)(n)&&await this.planCancellationService.refreshState(),n}constructor(e){this.planCancellationService=e}}ew=(0,i.gn)([(0,eP.W)(ee.y7),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[void 0===ec?Object:ec])],ew);var ek=a(81323);class eM{async execute({body:e}){let{teamId:t,newTeamName:a}=e,n=await (0,p.z)(this.serverApiClient.v1.teams.editSettings({teamId:t,operations:[{type:"set_name",value:a}]}));if((0,_.hx)(n))return"code"in n.error&&"team_name_already_exists"===n.error.code?(0,_.Rn)((0,ek.U8)()):"NOT_ADMIN"===n.error.message?(0,_.Rn)((0,ek.QI)()):"NOT_AUTHORIZED"===n.error.message?(0,_.Rn)((0,ek.Kv)()):(0,_.Rn)((0,ek.mX)());return(0,_.Vp)(void 0)}constructor(e){this.serverApiClient=e}}eM=(0,i.gn)([(0,eP.W)(ek.Q2),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[void 0===A.l?Object:A.l])],eM);var ex=a(88146),eV=a(46062);class eG{async execute({body:e}){let{teamId:t,policyUpdates:a}=e;return await (0,p.z)(this.serverApiClient.v1.teams.editSettings((0,eV.e)(t,a))),await this.teamAdminService.refreshState(),(0,_.Vp)(void 0)}constructor(e,t){this.teamAdminService=e,this.serverApiClient=t}}eG=(0,i.gn)([(0,eP.W)(ex.m),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[void 0===Q.k?Object:Q.k,void 0===A.l?Object:A.l])],eG);var eK=a(17144);class ej{async execute({body:e}){let{feedbackBody:t}=e,a=await (0,p.z)(this.serverApiClient.v1.feedback.sendFeedback({title:"A team Admin just wrote to us:",body:t}));return(0,_.hx)(a)?(0,_.Rn)((0,eK.b6)()):(0,_.Vp)(void 0)}constructor(e){this.serverApiClient=e}}ej=(0,i.gn)([(0,eP.W)(eK.cr),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[void 0===A.l?Object:A.l])],ej);var eH=a(16838);class eW{async execute({body:{newAdminEmail:e}}){let t=await (0,p.z)(this.serverApiClient.v1.teams.updateBillingAdmin({newAdminLogin:e}));if((0,_.hx)(t))throw Error(`Unable to update billing admin. ${t.error.message}`);return(0,_.Vp)(void 0)}constructor(e){this.serverApiClient=e}}eW=(0,i.gn)([(0,eP.W)(eH.t),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[void 0===A.l?Object:A.l])],eW);var eY=a(4e4);class eQ{async execute(){return await (0,p.z)(this.cardInfoService.populateAdminCardInfoStore())}constructor(e){this.cardInfoService=e}}eQ=(0,i.gn)([(0,eP.W)(eY.H),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[void 0===eA?Object:eA])],eQ);class eq{async execute(){let e=await this.tierTrialService.startTierTrial();return(0,_.d6)(e)&&await this.teamAdminService.refreshState(),e}constructor(e,t){this.tierTrialService=e,this.teamAdminService=t}}eq=(0,i.gn)([(0,eP.W)(ef.F6),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[void 0===eb?Object:eb,void 0===Q.k?Object:Q.k])],eq);var eZ=a(88826),e$=a(51870);class eX{async handle(){await this.teamAdminService.refreshState()}constructor(e){this.teamAdminService=e}}eX=(0,i.gn)([(0,e$.b)(eZ.M),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[void 0===Q.k?Object:Q.k])],eX);var eJ=a(29056);class e0{async handle(){await this.teamAdminService.refreshState()}constructor(e){this.teamAdminService=e}}e0=(0,i.gn)([(0,e$.b)(eJ.q),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[void 0===Q.k?Object:Q.k])],e0);var e1=a(31142);class e6{async handle(){await this.teamCreatorService.refreshState()}constructor(e){this.teamCreatorService=e}}e6=(0,i.gn)([(0,e$.b)(e1.L),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[void 0===ey?Object:ey])],e6);var e2=a(62506),e5=a(6189);class e4{execute(){return this.cardInfoStore.state$.pipe((0,P.U)(e=>(0,_.Vp)(e)))}constructor(e){this.cardInfoStore=e}}e4=(0,i.gn)([(0,e2.e)(e5._),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[ep])],e4);var e3=a(1833),e8=a(81511);class e9{execute(){return(0,e3.D)(this.getTeamPlanDetailsService.getIndustryBenchmarkData())}constructor(e){this.getTeamPlanDetailsService=e}}e9=(0,i.gn)([(0,e2.e)(e8.l),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[void 0===q?Object:q])],e9);var e7=a(95778);class te{execute(){return this.getTeamPlanDetailsService.getTeamActiveDirectoryInfo()}constructor(e){this.getTeamPlanDetailsService=e}}te=(0,i.gn)([(0,e2.e)(e7.e),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[void 0===q?Object:q])],te);var tt=a(81627);class ta{execute(){return(0,e3.D)(this.getTeamPlanDetailsService.getTeamBillingDetails())}constructor(e){this.getTeamPlanDetailsService=e}}ta=(0,i.gn)([(0,e2.e)(tt._),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[void 0===q?Object:q])],ta);var tn=a(53196);class ti{execute(){return this.planCancellationService.getZendeskCancellationTicket()}constructor(e){this.planCancellationService=e}}ti=(0,i.gn)([(0,e2.e)(tn.F),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[void 0===ec?Object:ec])],ti);var to=a(25078);class tr{execute(){return this.getTeamPlanDetailsService.getTeamCapabilities()}constructor(e){this.getTeamPlanDetailsService=e}}tr=(0,i.gn)([(0,e2.e)(to.Y),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[void 0===q?Object:q])],tr);var ts=a(89648);class tc{execute(){return(0,e3.D)(this.getTeamPlanDetailsService.getTeamCreationDateUnix())}constructor(e){this.getTeamPlanDetailsService=e}}tc=(0,i.gn)([(0,e2.e)(ts.T),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[void 0===q?Object:q])],tc);var td=a(93216);class tl{execute(){return this.getTeamPlanDetailsService.getTeamDuoInfo()}constructor(e){this.getTeamPlanDetailsService=e}}tl=(0,i.gn)([(0,e2.e)(td.Z),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[void 0===q?Object:q])],tl);var tu=a(54990);class tm{execute(){let{carbonState:e}=this.carbon.queries;return e({path:"state.userSession.spaceData.spaces"}).pipe((0,P.U)(e=>{if(!(0,_.d6)(e))throw Error("Cannot retrieve user spaces");let t=e.data.find(e=>"accepted"===e.details.status);return t?t.teamId:null}),(0,U.x)(),(0,P.U)(e=>(0,_.Vp)({teamId:e})))}constructor(e){this.carbon=e}}tm=(0,i.gn)([(0,e2.e)(tu.e),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[void 0===et._?Object:et._])],tm);var tg=a(32307);class tp{execute(){return this.getTeamPlanDetailsService.getTeamName()}constructor(e){this.getTeamPlanDetailsService=e}}tp=(0,i.gn)([(0,e2.e)(tg.j),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[void 0===q?Object:q])],tp);var tS=a(93646);class tA{execute(){return(0,e3.D)(this.getTeamPlanDetailsService.getTeamRoles())}constructor(e){this.getTeamPlanDetailsService=e}}tA=(0,i.gn)([(0,e2.e)(tS.R),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[void 0===q?Object:q])],tA);var th=a(80018);class tN{execute(){return this.getTeamPlanDetailsService.getTeamPolicies()}constructor(e){this.getTeamPlanDetailsService=e}}tN=(0,i.gn)([(0,e2.e)(th.K),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[void 0===q?Object:q])],tN);var tE=a(63907);class tI{execute(){return this.getTeamPlanDetailsService.getTeamProvisioningInfo()}constructor(e){this.getTeamPlanDetailsService=e}}tI=(0,i.gn)([(0,e2.e)(tE.j),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[void 0===q?Object:q])],tI);var tC=a(48925);class tv{execute(){return(0,e3.D)(this.getTeamPlanDetailsService.getTeamSeats())}constructor(e){this.getTeamPlanDetailsService=e}}tv=(0,i.gn)([(0,e2.e)(tC.W),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[void 0===q?Object:q])],tv);var tT=a(30082);class tB{execute(){return(0,e3.D)(this.getTeamPlanDetailsService.getTeamSecurityScore())}constructor(e){this.getTeamPlanDetailsService=e}}tB=(0,i.gn)([(0,e2.e)(tT.R),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[void 0===q?Object:q])],tB);var ty=a(56175);class tf{execute(){return this.getTeamPlanDetailsService.getTeamSsoInfo()}constructor(e){this.getTeamPlanDetailsService=e}}tf=(0,i.gn)([(0,e2.e)(ty.m),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[void 0===q?Object:q])],tf);var tO=a(57564);class tb{execute(){return this.getTeamPlanDetailsService.getTeamTrialStatus()}constructor(e){this.getTeamPlanDetailsService=e}}tb=(0,i.gn)([(0,e2.e)(tO.P),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[void 0===q?Object:q])],tb);var tR=a(22003);class tP{execute(){return this.teamCreatorStore.state$.pipe((0,P.U)(e=>"LOADED"===e.loadingStatus&&void 0!==e.isTeamCreator&&e.isTeamCreator),(0,U.x)(),(0,P.U)(_.Vp))}constructor(e){this.teamCreatorStore=e}}tP=(0,i.gn)([(0,e2.e)(tR.G7),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[eg])],tP);class tU{}tU=(0,i.gn)([(0,o.Y)({api:d.o,imports:[c.n,eR.X,r.G],providers:[(0,s.d_)(eT),b,$,q,Q.k,g.J,ec,eA,ey,eb],stores:[Y.C,es,eg,ep],handlers:{commands:{addSeats:eD,extendFreeTrial:ez,extendTierTrial:eF,requestTeamPlanCancellation:ew,editTeamName:eM,editTeamPolicies:eG,sendFeedback:ej,updateBillingAdmin:eW,refreshAdminCardInfo:eQ,startTierTrial:eq},events:{...(0,o.g)(u.Q,{sessionOpened:eX}),...(0,o.g)(l.L,{membersAdded:e0}),...(0,o.g)(m.J,{permissionsLoaded:e6})},queries:{getAdminCardInfo:e4,getIndustryBenchmarkData:e9,getTeamActiveDirectoryInfo:te,getTeamBillingInformation:ta,getTeamCancellationStatus:ti,getTeamCapabilities:tr,getTeamCreationDateUnix:tc,getTeamDuoInfo:tl,getTeamId:tm,getTeamName:tp,getTeamRoles:tA,getTeamPolicies:tN,getTeamProvisioningInfo:tI,getTeamSeats:tv,getTeamSecurityScore:tB,getTeamSsoInfo:tf,getTeamTrialStatus:tb,isTeamCreator:tP}},requiredFeatureFlips:Object.values({DashHackIndustryBenchmarkDev:"dashhack_web_securityScoreBenchmark",ComputePlanPricingMigration:"ecommerce_web_compute_plan_price_details_migration"})})],tU)},44389:function(e,t,a){a.d(t,{k:()=>y});var n=a(21636),i=a(44577),o=a(42589),r=a(94190),s=a(59242),c=a(306),d=a(84651),l=a(9610);let u=e=>{switch(e){case"legacy":default:return l.lD.Legacy;case"starter":return l.lD.Starter;case"team":return l.lD.Team;case"business":return l.lD.Business;case"businessplus":return l.lD.BusinessPlus;case"entreprise":return l.lD.Enterprise;case"standard":return l.lD.Standard}},m=e=>{switch(e){case"in_team":return l.yt.InTeam;case"not_premium":return l.yt.NotPremium;case"no_payment":return l.yt.NoPayment;case"is_unpaid_family_member":return l.yt.IsUnpaidFamilyMember;case"default_settings":default:return l.yt.DefaultSettings;case"no_vpn_capability":return l.yt.NoVPNCapability;case"disabled_for_free_user":return l.yt.DisabledForFreeUser}},g=e=>"1-20"!==e&&"21-50"!==e&&""!==e;var p=a(46062);let S=e=>{let t;let{enabled:a,info:n}=e;return n&&(t={limit:n.limit??void 0,maxFileSize:n.maxFileSize??void 0,quota:n.quota??void 0,reason:n.reason?m(n.reason):void 0,excludedPolicies:n.excludedPolicies??void 0}),{enabled:a,info:t}},A=e=>{let{activeDirectorySync:t,activityLog:a,phoneSupport:n,canSeeCustomerSupportContacts:i,samlProvisioning:o,scim:r,sso:s,usageReports:c,adminPolicies:d,groupSharing:l,riskDetection:u,nudges:m}=e;return{activeDirectorySync:S(t),activityLog:S(a),phoneSupport:S(n),canSeeCustomerSupportContacts:S(i),samlProvisioning:S(o),scim:S(r),sso:S(s),usageReports:S(c),adminPolicies:S(d),groupSharing:S(l),riskDetection:S(u),nudges:S(m)}},h=(e,t,a,n)=>({...e,billingMethod:(e=>{if(e)return"invoice"===e?l.qo.Invoice:l.qo.ProcessOut})(n?.planDetails?.type),duration:n?.planDetails?.duration,planTier:u(t),isCompanySizeOver50:g(a.companySizeAtRegistration)}),N=e=>new Set(Object.keys(e)),E=(e,t)=>({provisioningSolution:e.provisioningSolution??"none",activeDirectoryInfo:{activeDirectorySyncType:e.activeDirectorySyncType,activeDirectoryToken:e.activeDirectoryToken,activeDirectorySyncStatus:t},duoInfo:{duo:e.duo,duoApiHostname:e.duoApiHostname,duoIntegrationKey:e.duoIntegrationKey,duoSecretKey:e.duoSecretKey,recoveryEnabled:e.recoveryEnabled},ssoInfo:{ssoSolution:e.ssoSolution??"none",ssoEnabled:!!e.ssoEnabled,ssoServiceProviderUrl:e.ssoServiceProviderUrl,ssoIdpMetadata:e.ssoIdpMetadata,ssoIdpEntrypoint:e.ssoIdpEntrypoint,ssoIsNitroProvider:e.ssoIsNitroProvider,uuid:e.uuid}}),I=(e,t)=>{if(!t||!e)return null;let{averageSecurityScore:a,top25Percentile:n}=t,i=Math.abs(e-a);return{averageSecurityScore:a,top25Percentile:n,ratingVSIndustry:e>a?"higher":e<a?"lower":"onPar",deltaVSIndustry:Math.round(10*i)/10}},C=e=>({isCurrentlyOnTrial:e?.isCurrentlyOnTrial,isTeamAlreadyExtendedTierTrial:e?.isTeamAlreadyExtendedTierTrial,tierTrialEndDateUnix:e?.tierTrialEndDateUnix,tierTrialOverride:e?.tierTrialOverride}),v=(e,t,a)=>{let{securityScore:n,industryBenchmarkData:i,creationDateUnix:o,billing:r,capabilities:s,seats:c,planTier:d,info:l,tierTrialOverrideInfo:u,canUseTierTrial:m}=e,{name:g,groupManagers:S,teamCaptains:v}=l;return{isBillingOrFullAdmin:!0,creationDateUnix:o,loadingState:"LOADED",teamName:g,securityScore:n,industryBenchmarkData:I(n,i),seats:c,capabilities:A(s),billing:h(r,d,l,a),teamRoles:{groupManagersIds:S,teamCaptainsIds:N(v)},lastRefreshDate:Date.now(),policies:(0,p.O)(l,s),settings:E(l,t),tierTrialOverrideInfo:C(u),canUseTierTrial:m}};var T=a(90805);let B=null;class y{async refreshState(){let e=await this.isUserTeamAdminService.isBillingAdmin,t=await this.isUserTeamAdminService.isFullRightsAdmin;if(!(e||t)){this.teamAdminStore.set({isBillingOrFullAdmin:!1,loadingState:"LOADED",lastRefreshDate:0});return}let a=await this.teamAdminStore.getState();if(!(a.isBillingOrFullAdmin&&a.lastRefreshDate+this.MIN_DELAY_BETWEEN_REFRESHES>Date.now()))return B||(B=this.refresh(a,t)),await B}async refresh(e,t){this.teamAdminStore.set({...e,loadingState:"LOADING",lastRefreshDate:Date.now()});let a=t?await this.getActiveDirectorySyncStatus():void 0,n=await this.getTeamSubscriptionInfo(),i=await this.getTeamStatus();if(!i)return this.teamAdminStore.set({...e,loadingState:"LOADED",isBillingOrFullAdmin:!1}),B=null,{};let o=v(i,a,n);return this.teamAdminStore.set(o),B=null,o}getActiveDirectorySyncStatus(){return(0,i.z)(this.serverApiClient.v1.teams.getDirectorySyncToken({}).pipe((0,o.U)(e=>{if(!(0,c.hx)(e))return e.data.data.activeDirectorySyncStatus})))}getTeamStatus(){return(0,i.z)(this.serverApiClient.v1.teams.teamStatus({}).pipe((0,o.U)(e=>{if(!(0,c.hx)(e))return e.data.data})))}getTeamSubscriptionInfo(){return(0,i.z)(this.serverApiClient.v1.premium.getSubscriptionInfo({}).pipe((0,o.U)(e=>{if(!(0,c.hx)(e))return e.data.data.b2bSubscription})))}constructor(e,t,a){this.serverApiClient=e,this.isUserTeamAdminService=t,this.teamAdminStore=a,this.MIN_DELAY_BETWEEN_REFRESHES=500}}y=(0,n.gn)([(0,r.GS)(),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===s.l?Object:s.l,void 0===d.J?Object:d.J,void 0===T.C?Object:T.C])],y)},90805:function(e,t,a){a.d(t,{C:()=>I});var n=a(59982),i=a(68238),o=a(15021),r=a(63762),s=a(9610);let c=r.z.union([r.z.object({reason:r.z.union([r.z.custom(),r.z.undefined()]),quota:r.z.union([r.z.object({max:r.z.union([r.z.number(),r.z.undefined()]),remaining:r.z.union([r.z.number(),r.z.undefined()])}),r.z.undefined()]),maxFileSize:r.z.union([r.z.number(),r.z.undefined()]),limit:r.z.union([r.z.number(),r.z.undefined()]),excludedPolicies:r.z.union([r.z.array(r.z.string()),r.z.undefined()])}),r.z.undefined()]),d=r.z.object({paid:r.z.number(),extraFree:r.z.number(),remaining:r.z.number()}),l=r.z.object({billingMethod:r.z.union([r.z.custom(),r.z.undefined()]),creditCardLastDigits:r.z.union([r.z.string(),r.z.undefined()]),duration:r.z.union([r.z.literal("monthly"),r.z.literal("yearly"),r.z.literal("other"),r.z.undefined()]),isCompanySizeOver50:r.z.boolean(),isFreeTrial:r.z.boolean(),isGracePeriod:r.z.boolean(),planTier:r.z.custom(),lastBillingDateUnix:r.z.number(),nextBillingDetails:r.z.object({amount:r.z.number(),currency:r.z.union([r.z.literal("eur"),r.z.literal("usd")]),dateUnix:r.z.number()}),usersToBeRenewedCount:r.z.number(),planDetails:r.z.object({currency:r.z.union([r.z.literal("eur"),r.z.literal("usd")]),priceRanges:r.z.array(r.z.object({startMembers:r.z.number(),price:r.z.number(),equivalentPrice:r.z.number()}))})}),u=r.z.object({enabled:r.z.boolean(),info:c}),m=r.z.object({samlProvisioning:u,sso:u,scim:u,phoneSupport:u,canSeeCustomerSupportContacts:u,activeDirectorySync:u,activityLog:u,usageReports:u,adminPolicies:u,groupSharing:u,riskDetection:u,nudges:u}),g=r.z.object({lastSuccessfulSync:r.z.union([r.z.object({id:r.z.number(),teamId:r.z.number(),status:r.z.string(),proposedCount:r.z.union([r.z.number(),r.z.undefined()]),reproposedCount:r.z.union([r.z.number(),r.z.undefined()]),unproposedCount:r.z.union([r.z.number(),r.z.undefined()]),removedCount:r.z.union([r.z.number(),r.z.undefined()]),validCount:r.z.union([r.z.number(),r.z.undefined()]),durationMs:r.z.number(),eventDateUnix:r.z.number()}),r.z.null()]),lastFailedSync:r.z.union([r.z.object({id:r.z.number(),teamId:r.z.number(),status:r.z.string(),error:r.z.union([r.z.string(),r.z.undefined()]),durationMs:r.z.number(),eventDateUnix:r.z.number()}),r.z.null(),r.z.undefined()]),failedSyncCount:r.z.union([r.z.number(),r.z.undefined()])}),p=r.z.object({provisioningSolution:r.z.nativeEnum({none:"none",confidentialScim:"confidential-scim",selfHostedScim:"self-hosted-scim",adSync:"adsync"}).nullable().optional(),activeDirectoryInfo:r.z.object({activeDirectorySyncType:r.z.union([r.z.string(),r.z.undefined()]),activeDirectoryToken:r.z.union([r.z.string(),r.z.undefined()]),activeDirectorySyncStatus:r.z.union([g,r.z.undefined()])}),duoInfo:r.z.object({duo:r.z.union([r.z.boolean(),r.z.undefined()]),duoApiHostname:r.z.union([r.z.string(),r.z.undefined()]),duoIntegrationKey:r.z.union([r.z.string(),r.z.undefined()]),duoSecretKey:r.z.union([r.z.string(),r.z.undefined()]),recoveryEnabled:r.z.union([r.z.boolean(),r.z.undefined()])}),ssoInfo:r.z.object({ssoEnabled:r.z.boolean(),ssoSolution:r.z.nativeEnum({none:"none",confidentialSaml:"confidential-saml",selfHostedSaml:"self-hosted-saml",ssoConnector:"sso-connector"}).nullable().optional(),ssoIsNitroProvider:r.z.boolean().optional(),ssoServiceProviderUrl:r.z.string().nullable(),ssoIdpMetadata:r.z.string().nullable(),ssoIdpEntrypoint:r.z.string().nullable(),uuid:r.z.string().nullable().optional()})}),S=r.z.enum(["NOT_LOADED","LOADING","LOADED"]),A=r.z.object({isBillingOrFullAdmin:r.z.literal(!0),loadingState:S,lastRefreshDate:r.z.number(),billing:l,seats:d,capabilities:m,securityScore:r.z.number().nullable(),industryBenchmarkData:r.z.custom().nullable(),creationDateUnix:r.z.number(),teamName:r.z.string(),teamRoles:r.z.object({groupManagersIds:r.z.array(r.z.number()),teamCaptainsIds:r.z.set(r.z.string())}),policies:s.ym,settings:p,tierTrialOverrideInfo:r.z.custom().optional(),canUseTierTrial:r.z.boolean()}),h=r.z.object({isBillingOrFullAdmin:r.z.literal(!1),loadingState:S,lastRefreshDate:r.z.number()}),N=r.z.discriminatedUnion("isBillingOrFullAdmin",[A,h]),E=e=>N.safeParse(e).success;class I extends(0,n.Q)({initialValue:{isBillingOrFullAdmin:!1,lastRefreshDate:0,loadingState:"NOT_LOADED"},storeTypeGuard:E,persist:!1,isCache:!0,scope:o.F.User,storeName:"team-admin-store",capacity:i.Y._010KB}){}},8605:function(e,t,a){a.d(t,{c:()=>j});var n,i,o=a(21636),r=a(48035),s=a(4843),c=a(83461),d=a(44577),l=a(94190),u=a(59242),m=((n={}).PaymentMeanIsNotCreditCard="PaymentMeanIsNotCreditCard",n.CurrentPlanStartDateInFuture="CurrentPlanStartDateInFuture",n.ChangeTierMidCycleError="ChangeTierMidCycleError",n.PaymentMeanIsNotInvoice="PaymentMeanIsNotInvoice",n.ChangeTierAmountTooExpensive="ChangeTierAmountTooExpensive",n.ErrorCalculatingTierChange="ErrorCalculatingTierChange",n.InsufficientAmount="InsufficientAmount",n.AssignedPlanSameTierAsCurrentPlan="AssignedPlanSameTierAsCurrentPlan",n.SalesTaxMismatch="SalesTaxMismatch",n.NotBillingAdmin="NotBillingAdmin",n.ChangeTierMidCycleInternalServer="ChangeTierMidCycleInternalServer",n),g=((i={}).NoMtuDuringGracePeriod="NoMtuDuringGracePeriod",i.MidCycleTierUpgradePriceInternalServer="MidCycleTierUpgradePriceInternalServer",i),p=a(17741),S=a(70554),A=a(649),h=a(44389);class N{changeTierMidcycle({amountToPay:e,taxes:t,planId:a,couponCode:n,newTotalNumberOfSeats:i,billingContactEmail:o}){return(0,d.z)(this.serverApiClient.v1.teams.changeTierMidCycleV2({amountToPay:e,taxes:t,planId:a,couponCode:n,newTotalNumberOfSeats:i,billingContactEmail:o}).pipe((0,p.DZ)(e=>(0,S.EQ)(e,{BusinessError:e=>this.getFunctionalError(e.code),FetchFailedError:A.j,BadStatus:A.j,InternalServerError:()=>({tag:m.ChangeTierMidCycleInternalServer}),InvalidRequest:A.j,RateLimited:A.j,ServiceUnavailable:A.j,UnspecifiedBadStatus:A.j})),(0,p.Qn)(e=>e.data)))}getMidcycleTierUpgradePrice({newTotalNumberOfSeats:e,newPlan:t}){return(0,d.z)(this.serverApiClient.v1.teams.getMidCycleTierUpgradePriceV2({newTotalNumberOfSeats:e,newPlan:t}).pipe((0,p.DZ)(e=>(0,S.EQ)(e,{BusinessError:e=>this.getMidCycleTierUpgradePriceFunctionalError(e.code),FetchFailedError:A.j,BadStatus:A.j,InternalServerError:()=>({tag:g.MidCycleTierUpgradePriceInternalServer}),InvalidRequest:A.j,RateLimited:A.j,ServiceUnavailable:A.j,UnspecifiedBadStatus:A.j})),(0,p.Qn)(e=>(this.teamAdminService.refreshState(),e.data))))}constructor(e,t){this.serverApiClient=e,this.teamAdminService=t,this.getFunctionalError=e=>{switch(e){case"PAYMENT_MEAN_IS_NOT_CREDITCARD":return{tag:m.PaymentMeanIsNotCreditCard};case"CURRENT_PLAN_START_DATE_IN_FUTURE":return{tag:m.CurrentPlanStartDateInFuture};case"CHANGE_TIER_MID_CYCLE_ERROR":return{tag:m.ChangeTierMidCycleError};case"PAYMENT_MEAN_IS_NOT_INVOICE":return{tag:m.PaymentMeanIsNotInvoice};case"CHANGE_TIER_AMOUNT_TOO_EXPENSIVE":return{tag:m.ChangeTierAmountTooExpensive};case"ERROR_CALCULATING_TIER_CHANGE_DISCOUNT":return{tag:m.ErrorCalculatingTierChange};case"INSUFFICIENT_AMOUNT":return{tag:m.InsufficientAmount};case"ASSIGNED_PLAN_SAME_TIER_AS_CURRENT_PLAN":return{tag:m.AssignedPlanSameTierAsCurrentPlan};case"sales_tax_mismatch":return{tag:m.SalesTaxMismatch};case"not_billing_admin":return{tag:m.NotBillingAdmin};default:throw Error(`ChangeTierMidCycle: error ${e}`)}},this.getMidCycleTierUpgradePriceFunctionalError=e=>{if("NO_MTU_DURING_GRACE_PERIOD"===e)return{tag:g.NoMtuDuringGracePeriod};throw Error(`MidCycleTierUpgradePriceV2: error ${e}`)}}}N=(0,o.gn)([(0,l.GS)(),(0,o.w6)("design:type",Function),(0,o.w6)("design:paramtypes",[void 0===u.l?Object:u.l,void 0===h.k?Object:h.k])],N);var E=a(15021),I=a(59982),C=a(68238);class v extends(0,I.Q)({persist:!1,scope:E.F.Device,storeName:"plan-pricing-details",initialValue:{renewal:{seatsCount:0,value:0},additionalSeats:{seatsCount:0,value:0},currency:"usd"},capacity:C.Y._001KB}){}var T=a(37368),B=a(97429),y=a(42589),f=a(306);class O{constructor(e,t){this.serverApiClient=e,this.computePlanPricingStore=t,this.computePlanPricingInStore=async e=>{let t=await (0,d.z)(this.serverApiClient.v1.teams.computePlanPricing({seats:e}).pipe((0,y.U)(e=>{if((0,f.hx)(e)){if("BusinessError"===e.error.tag)return"cannot_add_seat_during_grace_period"===e.error.code?(0,f.Rn)((0,B.C9)()):(0,f.Rn)((0,B.rm)());throw Error(e.error.message)}let{renewal:t,additionalSeats:a}=e.data.data;return(0,f.Vp)({renewal:t,additionalSeats:a,currency:t.price.currency})})));if("failure"===t.tag)throw Error(t.error.message);let{renewal:a,additionalSeats:n}=t.data;return this.computePlanPricingStore.set({renewal:{seatsCount:a.seatsCount,value:a.price.value,taxes:a.price.taxes},additionalSeats:{seatsCount:n.seatsCount,value:n.price.value,taxes:n.price.taxes},currency:a.price.currency}),(0,f.Vp)(void 0)}}}O=(0,o.gn)([(0,l.GS)(),(0,o.w6)("design:type",Function),(0,o.w6)("design:paramtypes",[void 0===u.l?Object:u.l,v])],O);class b{async execute({body:{numberOfSeats:e}}){return this.planPricingService.computePlanPricingInStore(e)}constructor(e){this.planPricingService=e}}b=(0,o.gn)([(0,T.W)(B.wf),(0,o.w6)("design:type",Function),(0,o.w6)("design:paramtypes",[void 0===O?Object:O])],b);var R=a(48355);class P{upgradeTeamWithExistingCc({planId:e,countryCode:t,membersNumber:a,amountToPayInCents:n,taxesToPayInCents:i,couponCode:o,vatNumber:r}){return(0,d.z)(this.serverApiClient.v1.teams.upgradeTeamWithExistingCc({planId:e,countryCode:t,membersNumber:a,amountToPayInCents:n,taxesToPayInCents:i,couponCode:o,vatNumber:r}).pipe((0,p.DZ)(e=>(0,S.EQ)(e,{BusinessError:e=>this.getFunctionalError(e.code),FetchFailedError:A.j,BadStatus:A.j,InternalServerError:A.j,InvalidRequest:A.j,RateLimited:A.j,ServiceUnavailable:A.j,UnspecifiedBadStatus:A.j})),(0,p.Qn)(e=>e.data)))}constructor(e){this.serverApiClient=e,this.getFunctionalError=e=>{switch(e){case R.AI.STARTER_PLAN_NOT_10_SEATS:return(0,R.Zy)();case R.AI.USER_SUBSCRIBING_NOT_FOUND:return(0,R.L7)();case R.AI.CANNOT_INVOICE_FREE_PLAN:return(0,R.hY)();case R.AI.PAYMENT_ERROR_DURING_UPGRADE:return(0,R.g3)();case R.AI.SEATS_TO_PURCHASE_LOWER_ACTUAL_USAGE:return(0,R.oH)();case R.AI.NOT_IN_A_TEAM_PLAN:return(0,R.NS)();case R.AI.NOT_TEAM_CAPTAIN:return(0,R.d3)();case R.AI.NOT_IN_FREE_TRIAL:return(0,R._1)();case R.AI.INVALID_PLAN:return(0,R.fu)();case R.AI.WRONG_AMOUNT_TO_PAY:return(0,R.jV)();case R.AI.SALES_TAX_MISMATCH:return(0,R.hS)();case R.AI.B2B_PLAN_NOT_FOUND:return(0,R.aY)();case R.AI.SELECTED_PLAN_IS_NOT_VALID:return(0,R.QF)();case R.AI.FORBIDDEN_EMAIL_DOMAIN:return(0,R.rj)();case R.AI.TEAM_HAS_SSO_ENABLED:return(0,R.KW)();case R.AI.VAT_NUMBER_NOT_UPSERTED:return(0,R.T1)();case R.AI.NO_KEY_FOR_USER:return(0,R.Ls)();case R.AI.UNSUPPORTED_PAYMENT_MEAN:return(0,R.ZP)();default:throw Error(`UpgradeTeamWithExistingCc: error ${e}`)}}}}P=(0,o.gn)([(0,l.GS)(),(0,o.w6)("design:type",Function),(0,o.w6)("design:paramtypes",[void 0===u.l?Object:u.l])],P);var U=a(90805),D=a(84651),z=a(7416);class F{execute({body:{amountToPay:e,taxes:t,planId:a,couponCode:n,newTotalNumberOfSeats:i,billingContactEmail:o}}){return this.midcycleTierService.changeTierMidcycle({amountToPay:e,taxes:t,planId:a,couponCode:n,newTotalNumberOfSeats:i,billingContactEmail:o})}constructor(e){this.midcycleTierService=e}}F=(0,o.gn)([(0,T.W)(z.G),(0,o.w6)("design:type",Function),(0,o.w6)("design:paramtypes",[void 0===N?Object:N])],F);class _{execute({body:{planId:e,countryCode:t,membersNumber:a,amountToPayInCents:n,taxesToPayInCents:i,couponCode:o,vatNumber:r}}){return this.upgradeTeamWithExistingCcService.upgradeTeamWithExistingCc({planId:e,countryCode:t,membersNumber:a,amountToPayInCents:n,taxesToPayInCents:i,couponCode:o,vatNumber:r})}constructor(e){this.upgradeTeamWithExistingCcService=e}}_=(0,o.gn)([(0,T.W)(R.gi),(0,o.w6)("design:type",Function),(0,o.w6)("design:paramtypes",[void 0===P?Object:P])],_);var L=a(62506),w=a(33867);class k{execute({body:{couponCode:e}}){return this.serverApiClient.v1.teams.getTeamOffers({couponCode:e,withStarterOffer:!0}).pipe((0,p.Qn)(e=>e.data),(0,p.DZ)(e=>{throw Error(e.message)}))}constructor(e){this.serverApiClient=e}}k=(0,o.gn)([(0,L.e)(w.g),(0,o.w6)("design:type",Function),(0,o.w6)("design:paramtypes",[void 0===u.l?Object:u.l])],k);var M=a(1833),x=a(35260);class V{execute({body:{newTotalNumberOfSeats:e,newPlan:t}}){return(0,M.D)(this.midcycleTierService.getMidcycleTierUpgradePrice({newTotalNumberOfSeats:e,newPlan:t}))}constructor(e){this.midcycleTierService=e}}V=(0,o.gn)([(0,L.e)(x.X),(0,o.w6)("design:type",Function),(0,o.w6)("design:paramtypes",[void 0===N?Object:N])],V);var G=a(91680);class K{execute(){return this.computePlanPricingStore.state$.pipe((0,y.U)(e=>(0,f.Vp)(e)))}constructor(e){this.computePlanPricingStore=e}}K=(0,o.gn)([(0,L.e)(G.n),(0,o.w6)("design:type",Function),(0,o.w6)("design:paramtypes",[v])],K);class j{}j=(0,o.gn)([(0,r.Y)({api:c.K,imports:[s.n],providers:[N,O,P,h.k,D.J],stores:[v,U.C],handlers:{commands:{changeTierMidcycle:F,computePlanPricingDetails:b,upgradeTeamWithExistingCc:_},events:{},queries:{getTeamOffers:k,getMidcycleTierUpgradePrice:V,getPlanPricingDetails:K}},requiredFeatureFlips:["monetization_extension_policies_repackage","monetization_extension_policies_revert_notice","monetization_extension_existingUserTierTrial"]})],j)},99269:function(e,t,a){a.d(t,{K:()=>O});var n=a(21636),i=a(48035),o=a(4843),r=a(41721),s=a(44577),c=a(36884),d=a(48194),l=a(42589),u=a(94190),m=a(59242),g=a(17741),p=a(306),S=a(85311),A=a(25523),h=a(2079),N=a(29316),E=a(49247);class I{async deleteTeamVat(){return await (0,s.z)(this.serverApiClient.v1.teams.deleteTeamVat().pipe((0,g.DZ)(e=>{if("BusinessError"===e.tag)return(0,S.zK)(e.code);throw Error(e.message)}))),(0,p.Vp)(void 0)}getTeamVat(){return this.serverApiClient.v1.teams.getTeamVat().pipe((0,g.DZ)(e=>{if("BusinessError"===e.tag)return(0,A.K$)(e.code);throw Error(e.message)}),(0,g.lk)(e=>(0,p.Vp)(e.data.vatNumber)))}async upsertTeamVat({newVATNumber:e}){return await (0,s.z)(this.serverApiClient.v1.teams.upsertTeamVat({newVATNumber:e}).pipe((0,g.DZ)(e=>{if("BusinessError"===e.tag)return(0,h.q5)(e.code);throw Error(e.message)}),(0,g.lk)(e=>(0,p.Vp)(e.data))))}getExpectedTaxInformation(e){return(0,c.a)([this.getTeamSubscriptionInformation(),this.getUserLogin()]).pipe((0,d.z)(([t,a])=>{if(!t?.billingInformation)throw Error("Could not retrieve subscription information");let{country:n,address_zip:i}=t.billingInformation;return this.serverApiClient.v1.payments.getExpectedTaxInformation({login:a,zipCode:i??"",country:n??"",taxOrigin:"team",priceInCents:e})}))}constructor(e,t){this.serverApiClient=e,this.carbon=t,this.getTaxAmount=e=>this.getExpectedTaxInformation(e).pipe((0,g.DZ)(e=>{if("BusinessError"===e.tag)return new N.A;throw Error(e.message)}),(0,g.lk)(e=>(0,p.Vp)({amount:e.data.expectedTaxesInCents}))),this.getUserLogin=()=>this.carbon.queries.getUserLogin().pipe((0,l.U)(e=>{if((0,p.d6)(e)&&"string"==typeof e.data)return e.data;throw Error("No active login")})),this.getTeamSubscriptionInformation=()=>{let{getSubscriptionInformation:e}=this.carbon.queries;return e().pipe((0,l.U)(e=>{if(!(0,p.d6)(e))throw Error("Cannot retrieve subscription information from Carbon");return(0,p.db)(e).b2bSubscription}))}}}I=(0,n.gn)([(0,u.GS)(),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===m.l?Object:m.l,void 0===E._?Object:E._])],I);var C=a(37368);class v{execute(){return this.teamVatService.deleteTeamVat()}constructor(e){this.teamVatService=e}}v=(0,n.gn)([(0,C.W)(S.Hy),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===I?Object:I])],v);class T{async execute({body:{newVATNumber:e}}){return await this.teamVatService.upsertTeamVat({newVATNumber:e}),(0,p.Vp)(void 0)}constructor(e){this.teamVatService=e}}T=(0,n.gn)([(0,C.W)(h.XW),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===I?Object:I])],T);var B=a(62506);class y{execute(){return this.teamVatService.getTeamVat()}constructor(e){this.teamVatService=e}}y=(0,n.gn)([(0,B.e)(A.N7),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===I?Object:I])],y);class f{execute({body:e}){let{totalPrice:t}=e;return this.teamVatService.getTaxAmount(t)}constructor(e){this.teamVatService=e}}f=(0,n.gn)([(0,B.e)(N.B),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===I?Object:I])],f);class O{}O=(0,n.gn)([(0,i.Y)({api:r.a,imports:[o.n],providers:[I],handlers:{commands:{deleteTeamVat:v,upsertTeamVat:T},events:{},queries:{getTeamVat:y,getTaxAmount:f}}})],O)},45840:function(e,t,a){a.d(t,{u:()=>r});var n=a(36503),i=a(51005),o=a(66622);let r=(0,n.Q)({name:"teamUserGroups",commands:{},events:{},queries:{getTeamUserGroup:i.T,getTeamUserGroups:o.s}})},51005:function(e,t,a){a.d(t,{T:()=>o});var n=a(45429),i=a(15021);class o extends(0,n.k)({scope:i.F.User}){}},66622:function(e,t,a){a.d(t,{s:()=>o});var n=a(45429),i=a(15021);class o extends(0,n.k)({scope:i.F.User}){}},88134:function(e,t,a){a.d(t,{q:()=>z});var n,i,o=a(21636),r=a(48035),s=a(90573),c=a(99481),d=a(45840);class l extends(0,c.ne)(){}var u=a(62506),m=a(17741),g=a(306),p=a(96272);let S=(0,p.Vj)("USER_HAS_NO_ACTIVE_TEAM","User has no active team space."),A=(0,p.Vj)("USER_GROUP_NOT_FOUND","User group not found.");var h=a(51005),N=a(46266);class E extends(0,N.E)(d.u){}(0,N.K)(d.u,E);class I{execute({body:{groupId:e}}){return this.teamUserGroupsClient.queries.getTeamUserGroups(void 0).pipe((0,m.Qn)(t=>t.find(t=>t.groupId===e)),(0,m.lk)(e=>e?(0,g.Vp)(e):(0,g.Rn)(A())))}constructor(e){this.teamUserGroupsClient=e}}I=(0,o.gn)([(0,u.e)(h.T),(0,o.w6)("design:type",Function),(0,o.w6)("design:paramtypes",[E])],I);var C=a(49247),v=a(63762),T=((n={}).Pending="pending",n.Accepted="accepted",n.Refused="refused",n.Revoked="revoked",n);let B=v.jb(T);var y=((i={}).Admin="admin",i.Limited="limited",i);let f=v.jb(y),O=v.Ry({userId:v.Z_(),status:B.optional(),alias:v.Z_(),permission:f,referrer:v.Z_()}),b=v.Ry({name:v.Z_(),revision:v.Rx(),groupId:v.Z_(),users:v.IX(O),publicKey:v.Z_()}),R=v.IM(v.Z_(),v.Ry({userGroups:v.IX(b)}).optional()),P=v.Ry({teams:R});var U=a(66622);class D{execute(){return this.getTeamUserGroups$()}getTeamId$(){return this.carbonLegacyClient.queries.getActiveSpaces().pipe((0,m.lk)(([e])=>e?(0,g.Vp)(e.teamId):(0,g.Rn)(S())))}getUserTeamAdminData$(){return this.carbonLegacyClient.queries.carbonState({path:"state.userSession.teamAdminData"}).pipe((0,m.Qn)(e=>{let t=P.safeParse(e);return t.success?t.data:(this.logger.debug("Couldn't parse user session team admin data",{error:t.error}),e)}))}getTeamAdminData$(e){return this.getUserTeamAdminData$().pipe((0,m.Qn)(t=>{let{teams:a}=t;return a[e]}))}getTeamUserGroups$(){return this.getTeamId$().pipe((0,m._l)(e=>this.getTeamAdminData$(e)),(0,m.Qn)(e=>e?.userGroups??[]))}constructor(e,t){this.carbonLegacyClient=e,this.logger=t}}D=(0,o.gn)([(0,u.e)(U.s),(0,o.w6)("design:type",Function),(0,o.w6)("design:paramtypes",[void 0===C._?Object:C._,l])],D);class z{}z=(0,o.gn)([(0,r.Y)({api:d.u,imports:[s.G],handlers:{commands:{},events:{},queries:{getTeamUserGroup:I,getTeamUserGroups:D}},stores:[],providers:[(0,c.d_)(l)]})],z)},82199:function(e,t,a){a.d(t,{j:()=>i});var n=a(238);let i={[n.c.AR]:{"AR-1-C":{code:"C",name:"Ciudad Aut\xf3noma de Buenos Aires"},"AR-1-B":{code:"B",name:"Buenos Aires"},"AR-1-K":{code:"K",name:"Catamarca"},"AR-1-H":{code:"H",name:"Chaco"},"AR-1-U":{code:"U",name:"Chubut"},"AR-1-X":{code:"X",name:"C\xf3rdoba"},"AR-1-W":{code:"W",name:"Corrientes"},"AR-1-E":{code:"E",name:"Entre R\xedos"},"AR-1-P":{code:"P",name:"Formosa"},"AR-1-Y":{code:"Y",name:"Jujuy"},"AR-1-L":{code:"L",name:"La Pampa"},"AR-1-F":{code:"F",name:"La Rioja"},"AR-1-M":{code:"M",name:"Mendoza"},"AR-1-N":{code:"N",name:"Misiones"},"AR-1-Q":{code:"Q",name:"Neuqu\xe9n"},"AR-1-R":{code:"R",name:"R\xedo Negro"},"AR-1-A":{code:"A",name:"Salta"},"AR-1-J":{code:"J",name:"San Juan"},"AR-1-D":{code:"D",name:"San Luis"},"AR-1-Z":{code:"Z",name:"Santa Cruz"},"AR-1-S":{code:"S",name:"Santa Fe"},"AR-1-G":{code:"G",name:"Santiago del Estero"},"AR-1-V":{code:"V",name:"Tierra del Fuego"},"AR-1-T":{code:"T",name:"Tucum\xe1n"}},[n.c.FR]:{"FR-0-42":{code:"42",name:"Alsace"},"FR-0-72":{code:"72",name:"Aquitaine"},"FR-0-83":{code:"83",name:"Auvergne"},"FR-0-25":{code:"25",name:"Basse-Normandie"},"FR-0-26":{code:"26",name:"Bourgogne"},"FR-0-53":{code:"53",name:"Bretagne"},"FR-0-24":{code:"24",name:"Centre"},"FR-0-21":{code:"21",name:"Champagne-Ardenne"},"FR-0-94":{code:"94",name:"Corse"},"FR-0-43":{code:"43",name:"Franche-Comte"},"FR-0-01":{code:"01",name:"Guadeloupe"},"FR-0-03":{code:"03",name:"Guyane"},"FR-0-23":{code:"23",name:"Haute-Normandie"},"FR-0-11":{code:"11",name:"Ile-de-France"},"FR-0-04":{code:"04",name:"La Reunion"},"FR-0-91":{code:"91",name:"Languedoc-Roussillon"},"FR-0-74":{code:"74",name:"Limousin"},"FR-0-41":{code:"41",name:"Lorraine"},"FR-0-02":{code:"02",name:"Martinique"},"FR-0-73":{code:"73",name:"Midi-Pyrenees"},"FR-0-31":{code:"31",name:"Nord-Pas-de-Calais"},"FR-0-52":{code:"52",name:"Pays de la Loire"},"FR-0-22":{code:"22",name:"Picardie"},"FR-0-54":{code:"54",name:"Poitou-Charentes"},"FR-0-93":{code:"93",name:"Provence-Alpes-Cote d'Azur"},"FR-0-82":{code:"82",name:"Rhone-Alpes"},"FR-1-01":{code:"01",name:"Ain"},"FR-1-02":{code:"02",name:"Aisne"},"FR-1-03":{code:"03",name:"Allier"},"FR-1-04":{code:"04",name:"Alpes (Hte-Provence)"},"FR-1-05":{code:"05",name:"Hautes Alpes"},"FR-1-06":{code:"06",name:"Alpes-Maritimes"},"FR-1-07":{code:"07",name:"Ardeche"},"FR-1-08":{code:"08",name:"Ardennes"},"FR-1-09":{code:"09",name:"Ariege"},"FR-1-10":{code:"10",name:"Aube"},"FR-1-11":{code:"11",name:"Aude"},"FR-1-12":{code:"12",name:"Aveyron"},"FR-1-67":{code:"67",name:"Bas-Rhin"},"FR-1-13":{code:"13",name:"Bouches-du-Rhone"},"FR-1-14":{code:"14",name:"Calvados"},"FR-1-15":{code:"15",name:"Cantal"},"FR-1-16":{code:"16",name:"Charente"},"FR-1-17":{code:"17",name:"Charente-Maritime"},"FR-1-18":{code:"18",name:"Cher"},"FR-1-19":{code:"19",name:"Correze"},"FR-1-97":{code:"97",name:"Corse-du-Nord"},"FR-1-20":{code:"20",name:"Corse-du-Sud"},"FR-1-21":{code:"21",name:"Cote-d'Or"},"FR-1-22":{code:"22",name:"Cotes-d'Armor"},"FR-1-23":{code:"23",name:"Creuse"},"FR-1-96":{code:"96",name:"D.O.M. T.O.M"},"FR-1-24":{code:"24",name:"Dordogne"},"FR-1-25":{code:"25",name:"Doubs"},"FR-1-26":{code:"26",name:"Drome"},"FR-1-91":{code:"91",name:"Essonne"},"FR-1-27":{code:"27",name:"Eure"},"FR-1-28":{code:"28",name:"Eure-et-Loir"},"FR-1-29":{code:"29",name:"Finist\xe8re"},"FR-1-30":{code:"30",name:"Gard"},"FR-1-31":{code:"31",name:"Haute Garonne"},"FR-1-32":{code:"32",name:"Gers"},"FR-1-33":{code:"33",name:"Gironde"},"FR-1-99":{code:"99",name:"Guyane"},"FR-1-100":{code:"100",name:"Haute-Corse"},"FR-1-68":{code:"68",name:"Haut-Rhin"},"FR-1-92":{code:"92",name:"Hauts-de-Seine"},"FR-1-34":{code:"34",name:"Herault"},"FR-1-35":{code:"35",name:"Ille-et-Vilaine"},"FR-1-36":{code:"36",name:"Indre"},"FR-1-37":{code:"37",name:"Indre-et-Loire"},"FR-1-38":{code:"38",name:"Isere"},"FR-1-39":{code:"39",name:"Jura"},"FR-1-40":{code:"40",name:"Landes"},"FR-1-41":{code:"41",name:"Loir-et-Cher"},"FR-1-42":{code:"42",name:"Loire"},"FR-1-43":{code:"43",name:"Haute Loire"},"FR-1-44":{code:"44",name:"Loire-Atlantique"},"FR-1-45":{code:"45",name:"Loiret"},"FR-1-46":{code:"46",name:"Lot"},"FR-1-47":{code:"47",name:"Lot-et-Garonne"},"FR-1-48":{code:"48",name:"Lozere"},"FR-1-49":{code:"49",name:"Maine-et-Loire"},"FR-1-50":{code:"50",name:"Manche"},"FR-1-51":{code:"51",name:"Marne"},"FR-1-52":{code:"52",name:"Haute Marne"},"FR-1-53":{code:"53",name:"Mayenne"},"FR-1-54":{code:"54",name:"Meurthe-et-Moselle"},"FR-1-55":{code:"55",name:"Meuse"},"FR-1-56":{code:"56",name:"Morbihan"},"FR-1-57":{code:"57",name:"Moselle"},"FR-1-58":{code:"58",name:"Nievre"},"FR-1-59":{code:"59",name:"Nord"},"FR-1-60":{code:"60",name:"Oise"},"FR-1-61":{code:"61",name:"Orne"},"FR-1-75":{code:"75",name:"Paris"},"FR-1-62":{code:"62",name:"Pas-de-Calais"},"FR-1-63":{code:"63",name:"Puy-de-D\xf4me"},"FR-1-65":{code:"65",name:"Hautes Pyrenees"},"FR-1-64":{code:"64",name:"Pyrenees-Atlantiques"},"FR-1-66":{code:"66",name:"Pyrenees-Orientales"},"FR-1-69":{code:"69",name:"Rhone"},"FR-1-103":{code:"103",name:"R\xe9union"},"FR-1-70":{code:"70",name:"Haute Saone"},"FR-1-71":{code:"71",name:"Saone-et-Loire"},"FR-1-72":{code:"72",name:"Sarthe"},"FR-1-73":{code:"73",name:"Savoie"},"FR-1-74":{code:"74",name:"Haute Savoie"},"FR-1-76":{code:"76",name:"Seine-Maritime"},"FR-1-93":{code:"93",name:"Seine-Saint-Denis"},"FR-1-77":{code:"77",name:"Seine-et-Marne"},"FR-1-79":{code:"79",name:"Deux Sevres"},"FR-1-80":{code:"80",name:"Somme"},"FR-1-81":{code:"81",name:"Tarn"},"FR-1-82":{code:"82",name:"Tarn-et-Garonne"},"FR-1-90":{code:"90",name:"Territoire-de-Belfort"},"FR-1-95":{code:"95",name:"Val-d'Oise"},"FR-1-94":{code:"94",name:"Val-de-Marne"},"FR-1-83":{code:"83",name:"Var"},"FR-1-84":{code:"84",name:"Vaucluse"},"FR-1-85":{code:"85",name:"Vendee"},"FR-1-86":{code:"86",name:"Vienne"},"FR-1-87":{code:"87",name:"Haute Vienne"},"FR-1-88":{code:"88",name:"Vosges"},"FR-1-89":{code:"89",name:"Yonne"},"FR-1-78":{code:"78",name:"Yvelines"}},[n.c.GB]:{"GB-0-67":{code:"67",name:"Aberdeenshire"},"GB-0-68":{code:"68",name:"Angus"},"GB-0-69":{code:"69",name:"Antrim"},"GB-0-70":{code:"70",name:"Ards"},"GB-0-71":{code:"71",name:"Argyll"},"GB-0-72":{code:"72",name:"Armagh"},"GB-0-01":{code:"01",name:"Avon"},"GB-0-73":{code:"73",name:"Ayrshire"},"GB-0-74":{code:"74",name:"Ballymena"},"GB-0-75":{code:"75",name:"Ballymoney"},"GB-0-76":{code:"76",name:"Banbridge"},"GB-0-77":{code:"77",name:"Banffshire"},"GB-0-78":{code:"78",name:"Bath & NthEstSomerset"},"GB-0-02":{code:"02",name:"Bedfordshire"},"GB-0-79":{code:"79",name:"Belfast"},"GB-0-03":{code:"03",name:"Berkshire"},"GB-0-80":{code:"80",name:"Berwickshire"},"GB-0-81":{code:"81",name:"Blackburn"},"GB-0-82":{code:"82",name:"Blackpool"},"GB-0-04":{code:"04",name:"Borders"},"GB-0-83":{code:"83",name:"Bournemouth"},"GB-0-84":{code:"84",name:"Bracknell Forest"},"GB-0-85":{code:"85",name:"Brighton & Hove"},"GB-0-86":{code:"86",name:"Bristol"},"GB-0-05":{code:"05",name:"Buckinghamshire"},"GB-0-87":{code:"87",name:"Caithness"},"GB-0-06":{code:"06",name:"Cambridgeshire"},"GB-0-88":{code:"88",name:"Carrickfergus"},"GB-0-89":{code:"89",name:"Castlereagh"},"GB-0-07":{code:"07",name:"Central"},"GB-0-08":{code:"08",name:"Cheshire"},"GB-0-91":{code:"91",name:"Clackmannanshire"},"GB-0-12":{code:"12",name:"Cleveland"},"GB-0-09":{code:"09",name:"Clwyd"},"GB-0-92":{code:"92",name:"Coleraine"},"GB-0-93":{code:"93",name:"Cookstown"},"GB-0-10":{code:"10",name:"Cornwall"},"GB-0-94":{code:"94",name:"Craigavon"},"GB-0-11":{code:"11",name:"Cumbria"},"GB-0-95":{code:"95",name:"Darlington"},"GB-0-13":{code:"13",name:"Derbyshire"},"GB-0-16":{code:"16",name:"Devon"},"GB-0-14":{code:"14",name:"Dorset"},"GB-0-96":{code:"96",name:"Down"},"GB-0-97":{code:"97",name:"Dumfries a. Galloway"},"GB-0-98":{code:"98",name:"Dumfriesshire"},"GB-0-99":{code:"99",name:"Dunbartonshire"},"GB-0-100":{code:"100",name:"Dungannon"},"GB-0-15":{code:"15",name:"Durham"},"GB-0-17":{code:"17",name:"Dyfed"},"GB-0-101":{code:"101",name:"East Lothian"},"GB-0-102":{code:"102",name:"East Riding"},"GB-0-103":{code:"103",name:"East Sussex"},"GB-0-18":{code:"18",name:"Essex"},"GB-0-104":{code:"104",name:"Fermanagh"},"GB-0-19":{code:"19",name:"Fife"},"GB-0-20":{code:"20",name:"Gloucestershire"},"GB-0-22":{code:"22",name:"Grampian"},"GB-0-36":{code:"36",name:"Greater London"},"GB-0-21":{code:"21",name:"Greater Manchester"},"GB-0-23":{code:"23",name:"Gwent"},"GB-0-24":{code:"24",name:"Gwynedd"},"GB-0-105":{code:"105",name:"Halton"},"GB-0-25":{code:"25",name:"Hampshire"},"GB-0-106":{code:"106",name:"Hartlepool"},"GB-0-29":{code:"29",name:"Hereford and Worcs."},"GB-0-107":{code:"107",name:"Herefordshire"},"GB-0-27":{code:"27",name:"Hertfordshire"},"GB-0-108":{code:"108",name:"Highland"},"GB-0-28":{code:"28",name:"Humberside"},"GB-0-109":{code:"109",name:"Inverness-Shire"},"GB-0-110":{code:"110",name:"Isle Of Arran"},"GB-0-111":{code:"111",name:"Isle Of Barra"},"GB-0-112":{code:"112",name:"Isle Of Benbecula"},"GB-0-113":{code:"113",name:"Isle Of Bute"},"GB-0-114":{code:"114",name:"Isle Of Canna"},"GB-0-115":{code:"115",name:"Isle Of Coll"},"GB-0-116":{code:"116",name:"Isle Of Colonsay"},"GB-0-117":{code:"117",name:"Isle Of Cumbrae"},"GB-0-118":{code:"118",name:"Isle Of Eigg"},"GB-0-119":{code:"119",name:"Isle Of Gigha"},"GB-0-120":{code:"120",name:"Isle Of Harris"},"GB-0-121":{code:"121",name:"Isle Of Iona"},"GB-0-122":{code:"122",name:"Isle Of Islay"},"GB-0-123":{code:"123",name:"Isle Of Jura"},"GB-0-124":{code:"124",name:"Isle Of Lewis"},"GB-0-126":{code:"126",name:"Isle Of Mull"},"GB-0-127":{code:"127",name:"Isle Of North Uist"},"GB-0-128":{code:"128",name:"Isle Of Rum"},"GB-0-129":{code:"129",name:"Isle Of Scalpay"},"GB-0-131":{code:"131",name:"Isle Of Skye"},"GB-0-132":{code:"132",name:"Isle Of South Uist"},"GB-0-133":{code:"133",name:"Isle Of Tiree"},"GB-0-31":{code:"31",name:"Isle of Wight"},"GB-0-130":{code:"130",name:"Isles Of Scilly"},"GB-0-32":{code:"32",name:"Kent"},"GB-0-134":{code:"134",name:"Kincardineshire"},"GB-0-135":{code:"135",name:"Kingston-Upon-Hull"},"GB-0-136":{code:"136",name:"Kirkcudbrightshire"},"GB-0-137":{code:"137",name:"Lanarkshire"},"GB-0-33":{code:"33",name:"Lancashire"},"GB-0-138":{code:"138",name:"Larne"},"GB-0-139":{code:"139",name:"Leicester City"},"GB-0-34":{code:"34",name:"Leicestershire"},"GB-0-140":{code:"140",name:"Limavady"},"GB-0-35":{code:"35",name:"Lincolnshire"},"GB-0-141":{code:"141",name:"Lisburn"},"GB-0-142":{code:"142",name:"London"},"GB-0-143":{code:"143",name:"Londonderry"},"GB-0-37":{code:"37",name:"Lothian"},"GB-0-144":{code:"144",name:"Luton"},"GB-0-145":{code:"145",name:"Magherafelt"},"GB-0-39":{code:"39",name:"Merseyside"},"GB-0-38":{code:"38",name:"Mid Glamorgan"},"GB-0-146":{code:"146",name:"Middlesbrough"},"GB-0-65":{code:"65",name:"Middlesex"},"GB-0-147":{code:"147",name:"Midlothian"},"GB-0-148":{code:"148",name:"Milton Keynes"},"GB-0-149":{code:"149",name:"Morayshire"},"GB-0-150":{code:"150",name:"Moyle"},"GB-0-151":{code:"151",name:"Nairn"},"GB-0-152":{code:"152",name:"Newbury"},"GB-0-153":{code:"153",name:"Newry and Mourne"},"GB-0-154":{code:"154",name:"Newtownabbey"},"GB-0-41":{code:"41",name:"Norfolk"},"GB-0-155":{code:"155",name:"North Down"},"GB-0-156":{code:"156",name:"North Humberside"},"GB-0-157":{code:"157",name:"North Lincolnshire"},"GB-0-158":{code:"158",name:"North Somerset"},"GB-0-62":{code:"62",name:"North Yorkshire"},"GB-0-40":{code:"40",name:"Northamptonshire"},"GB-0-43":{code:"43",name:"Northumberland"},"GB-0-159":{code:"159",name:"Nottingham City"},"GB-0-42":{code:"42",name:"Nottinghamshire"},"GB-0-160":{code:"160",name:"NthEast Lincolnshire"},"GB-0-161":{code:"161",name:"Omagh"},"GB-0-162":{code:"162",name:"Orkney"},"GB-0-44":{code:"44",name:"Oxfordshire"},"GB-0-163":{code:"163",name:"Peeblesshire"},"GB-0-164":{code:"164",name:"Perthshire"},"GB-0-165":{code:"165",name:"Peterborough"},"GB-0-166":{code:"166",name:"Plymouth"},"GB-0-167":{code:"167",name:"Poole"},"GB-0-168":{code:"168",name:"Portsmouth"},"GB-0-45":{code:"45",name:"Powys"},"GB-0-169":{code:"169",name:"Reading"},"GB-0-170":{code:"170",name:"Redcar and Cleveland"},"GB-0-171":{code:"171",name:"Renfrewshire"},"GB-0-172":{code:"172",name:"Rochester Up. Medway"},"GB-0-173":{code:"173",name:"Ross-Shire"},"GB-0-175":{code:"175",name:"Roxburghshire"},"GB-0-176":{code:"176",name:"Rutland"},"GB-0-26":{code:"26",name:"Scotland"},"GB-0-177":{code:"177",name:"Shetland"},"GB-0-48":{code:"48",name:"Shropshire"},"GB-0-178":{code:"178",name:"Slough"},"GB-0-50":{code:"50",name:"Somerset"},"GB-0-47":{code:"47",name:"South Glamorgan"},"GB-0-179":{code:"179",name:"South Humberside"},"GB-0-63":{code:"63",name:"South Yorkshire"},"GB-0-180":{code:"180",name:"Southampton"},"GB-0-181":{code:"181",name:"Southend"},"GB-0-51":{code:"51",name:"Staffordshire"},"GB-0-182":{code:"182",name:"Sth. Gloucestershire"},"GB-0-183":{code:"183",name:"Stirlingshire"},"GB-0-184":{code:"184",name:"Stockton-on-Tees"},"GB-0-185":{code:"185",name:"Strabane"},"GB-0-46":{code:"46",name:"Strathclyde"},"GB-0-49":{code:"49",name:"Suffolk"},"GB-0-53":{code:"53",name:"Surrey"},"GB-0-52":{code:"52",name:"Sussex"},"GB-0-186":{code:"186",name:"Sutherland"},"GB-0-54":{code:"54",name:"Tayside"},"GB-0-187":{code:"187",name:"Thamesdown"},"GB-0-188":{code:"188",name:"Thurrock"},"GB-0-189":{code:"189",name:"Torbay"},"GB-0-55":{code:"55",name:"Tyne and Wear"},"GB-0-190":{code:"190",name:"Tyrone"},"GB-0-191":{code:"191",name:"Warrington"},"GB-0-56":{code:"56",name:"Warwickshire"},"GB-0-57":{code:"57",name:"West Glamorgan"},"GB-0-192":{code:"192",name:"West Lothian"},"GB-0-59":{code:"59",name:"West Midlands"},"GB-0-193":{code:"193",name:"West Sussex"},"GB-0-64":{code:"64",name:"West Yorkshire"},"GB-0-194":{code:"194",name:"Western Isles"},"GB-0-195":{code:"195",name:"Wigtownshire"},"GB-0-58":{code:"58",name:"Wiltshire"},"GB-0-196":{code:"196",name:"Windsor & Maidenhead"},"GB-0-197":{code:"197",name:"Wokingham"},"GB-0-60":{code:"60",name:"Worcestershire"},"GB-0-198":{code:"198",name:"Wrekin"},"GB-0-199":{code:"199",name:"York"},"GB-0-61":{code:"61",name:"Yorkshire"},"GB-0-1001":{code:"1001",name:"Blaenau Gwent"},"GB-0-1002":{code:"1002",name:"Bridgend"},"GB-0-1003":{code:"1003",name:"Caerphilly"},"GB-0-1004":{code:"1004",name:"Cardiff"},"GB-0-1005":{code:"1005",name:"Carmarthenshire"},"GB-0-1006":{code:"1006",name:"Ceredigion"},"GB-0-1007":{code:"1007",name:"Channel Islands"},"GB-0-1008":{code:"1008",name:"Conwy"},"GB-0-1009":{code:"1009",name:"Denbighshire"},"GB-0-1010":{code:"1010",name:"East Ayrshire"},"GB-0-1011":{code:"1011",name:"East Dunbartonshire"},"GB-0-1012":{code:"1012",name:"East Renfrewshire"},"GB-0-1013":{code:"1013",name:"Edinburgh City"},"GB-0-1014":{code:"1014",name:"Falkirk"},"GB-0-1015":{code:"1015",name:"Flintshire"},"GB-0-1016":{code:"1016",name:"Glasgow"},"GB-0-1017":{code:"1017",name:"Inverclyde"},"GB-0-1018":{code:"1018",name:"Isle of Anglesey"},"GB-0-1019":{code:"1019",name:"Isle of Man"},"GB-0-1020":{code:"1020",name:"Merthyr Tydfil"},"GB-0-1021":{code:"1021",name:"Monmouthshire"},"GB-0-1022":{code:"1022",name:"Moray"},"GB-0-1023":{code:"1023",name:"Neath Port Talbot"},"GB-0-1024":{code:"1024",name:"Newport"},"GB-0-1025":{code:"1025",name:"North Ayrshire"},"GB-0-1026":{code:"1026",name:"North Lanarkshire"},"GB-0-1027":{code:"1027",name:"Pembrokeshire"},"GB-0-1028":{code:"1028",name:"Rhondda Cynon Taff"},"GB-0-1029":{code:"1029",name:"South Ayrshire"},"GB-0-1030":{code:"1030",name:"South Lanarkshire"},"GB-0-1031":{code:"1031",name:"Stirling"},"GB-0-1032":{code:"1032",name:"Swansea"},"GB-0-1033":{code:"1033",name:"The Vale of Glamorgan"},"GB-0-1034":{code:"1034",name:"Torfaen"},"GB-0-1035":{code:"1035",name:"West Dunbartonshire"},"GB-0-1036":{code:"1036",name:"Wrexham"}},[n.c.US]:{"US-0-AL":{code:"AL",name:"Alabama"},"US-0-AK":{code:"AK",name:"Alaska"},"US-0-AS":{code:"AS",name:"American Samoa"},"US-0-AZ":{code:"AZ",name:"Arizona"},"US-0-AR":{code:"AR",name:"Arkansas"},"US-0-AA":{code:"AA",name:"Armed Forces America"},"US-0-AE":{code:"AE",name:"Armed Forces Europe"},"US-0-AP":{code:"AP",name:"Armed Forces Pacific"},"US-0-CA":{code:"CA",name:"California"},"US-0-CEI":{code:"CEI",name:"Canton & Enderbury Islands"},"US-0-CO":{code:"CO",name:"Colorado"},"US-0-CT":{code:"CT",name:"Connecticut"},"US-0-DC":{code:"DC",name:"District of Columbia"},"US-0-DE":{code:"DE",name:"Delaware"},"US-0-FL":{code:"FL",name:"Florida"},"US-0-GA":{code:"GA",name:"Georgia"},"US-0-GU":{code:"GU",name:"Guam"},"US-0-HI":{code:"HI",name:"Hawaii"},"US-0-IA":{code:"IA",name:"Iowa"},"US-0-ID":{code:"ID",name:"Idaho"},"US-0-IL":{code:"IL",name:"Illinois"},"US-0-IN":{code:"IN",name:"Indiana"},"US-0-KS":{code:"KS",name:"Kansas"},"US-0-KY":{code:"KY",name:"Kentucky"},"US-0-LA":{code:"LA",name:"Louisiana"},"US-0-MA":{code:"MA",name:"Massachusetts"},"US-0-MD":{code:"MD",name:"Maryland"},"US-0-ME":{code:"ME",name:"Maine"},"US-0-MP":{code:"MP",name:"Mariana Islands"},"US-0-MI":{code:"MI",name:"Michigan"},"US-0-MN":{code:"MN",name:"Minnesota"},"US-0-MS":{code:"MS",name:"Mississippi"},"US-0-MO":{code:"MO",name:"Missouri"},"US-0-MT":{code:"MT",name:"Montana"},"US-0-NE":{code:"NE",name:"Nebraska"},"US-0-NV":{code:"NV",name:"Nevada"},"US-0-NH":{code:"NH",name:"New Hampshire"},"US-0-NJ":{code:"NJ",name:"New Jersey"},"US-0-NM":{code:"NM",name:"New Mexico"},"US-0-NY":{code:"NY",name:"New York"},"US-0-NC":{code:"NC",name:"North Carolina"},"US-0-ND":{code:"ND",name:"North Dakota"},"US-0-NMI":{code:"NMI",name:"North Mariana Islands"},"US-0-OH":{code:"OH",name:"Ohio"},"US-0-OK":{code:"OK",name:"Oklahoma"},"US-0-OR":{code:"OR",name:"Oregon"},"US-0-PW":{code:"PW",name:"Palau"},"US-0-PA":{code:"PA",name:"Pennsylvania"},"US-0-PR":{code:"PR",name:"Puerto Rico"},"US-0-RI":{code:"RI",name:"Rhode Island"},"US-0-SC":{code:"SC",name:"South Carolina"},"US-0-SD":{code:"SD",name:"South Dakota"},"US-0-TN":{code:"TN",name:"Tennessee"},"US-0-TX":{code:"TX",name:"Texas"},"US-0-UT":{code:"UT",name:"Utah"},"US-0-VT":{code:"VT",name:"Vermont"},"US-0-VI":{code:"VI",name:"Virgin Islands, US"},"US-0-VA":{code:"VA",name:"Virginia"},"US-0-WA":{code:"WA",name:"Washington"},"US-0-WV":{code:"WV",name:"West Virginia"},"US-0-WI":{code:"WI",name:"Wisconsin"},"US-0-WY":{code:"WY",name:"Wyoming"}},[n.c.CA]:{"CA-0-AB":{code:"AB",name:"Alberta"},"CA-0-BC":{code:"BC",name:"British Columbia"},"CA-0-MB":{code:"MB",name:"Manitoba"},"CA-0-NB":{code:"NB",name:"New Brunswick"},"CA-0-NL":{code:"NL",name:"Newfoundland and Labrador"},"CA-0-NS":{code:"NS",name:"Nova Scotia"},"CA-0-NT":{code:"NT",name:"Northwest Territories"},"CA-0-NU":{code:"NU",name:"Nunavut"},"CA-0-ON":{code:"ON",name:"Ontario"},"CA-0-PE":{code:"PE",name:"Prince Edward Island"},"CA-0-QC":{code:"QC",name:"Qu\xe9bec"},"CA-0-SK":{code:"SK",name:"Saskatchewan"},"CA-0-YT":{code:"YT",name:"Yukon"}},[n.c.AU]:{"AU-0-SA":{code:"SA",name:"South Australia"},"AU-0-WA":{code:"WA",name:"Western Australia"},"AU-0-NSW":{code:"NSW",name:"New South Wales"},"AU-0-QLD":{code:"QLD",name:"Queensland"},"AU-0-TAS":{code:"TAS",name:"Tasmania"},"AU-0-VIC":{code:"VIC",name:"Victoria"},"AU-0-ACT":{code:"ACT",name:"Australian Capital Territory"},"AU-0-JBT":{code:"JBT",name:"Jervis Bay Territory"},"AU-0-NT":{code:"NT",name:"Northern Territory"}},[n.c.IE]:{"IE-0-05":{code:"05",name:"Carlow"},"IE-0-04":{code:"04",name:"Clare"},"IE-0-03":{code:"03",name:"Cork"},"IE-0-07":{code:"07",name:"Donegal"},"IE-0-06":{code:"06",name:"Dublin"},"IE-0-10":{code:"10",name:"Galway"},"IE-0-13":{code:"13",name:"Cavan"},"IE-0-14":{code:"14",name:"Kerry"},"IE-0-11":{code:"11",name:"Kildare"},"IE-0-12":{code:"12",name:"Kilkenny"},"IE-0-19":{code:"19",name:"Laois"},"IE-0-18":{code:"18",name:"Leitrim"},"IE-0-17":{code:"17",name:"Limerick"},"IE-0-16":{code:"16",name:"Longford"},"IE-0-20":{code:"20",name:"Louth"},"IE-0-23":{code:"23",name:"Mayo"},"IE-0-22":{code:"22",name:"Meath"},"IE-0-21":{code:"21",name:"Monaghan"},"IE-0-24":{code:"24",name:"Offaly"},"IE-0-25":{code:"25",name:"Roscommon"},"IE-0-26":{code:"26",name:"Sligo"},"IE-0-27":{code:"27",name:"Tipperary"},"IE-0-29":{code:"29",name:"Waterford"},"IE-0-31":{code:"31",name:"Westmeath"},"IE-0-32":{code:"32",name:"Wexford"},"IE-0-30":{code:"30",name:"Wicklow"}},[n.c.ES]:{"ES-0-AN":{code:"AN",name:"Andalucia"},"ES-0-AR":{code:"AR",name:"Arag\xf3n"},"ES-0-AS":{code:"AS",name:"Asturias, Principado de"},"ES-0-CN":{code:"CN",name:"Canarias"},"ES-0-CB":{code:"CB",name:"Cantabria"},"ES-0-CM":{code:"CM",name:"Castilla-La Mancha"},"ES-0-CL":{code:"CL",name:"Castilla y Le\xf3n"},"ES-0-CT":{code:"CT",name:"Catalu\xf1a"},"ES-0-EX":{code:"EX",name:"Extremadura"},"ES-0-GA":{code:"GA",name:"Galicia"},"ES-0-IB":{code:"IB",name:"Illes Balears"},"ES-0-RI":{code:"RI",name:"La Rioja"},"ES-0-MD":{code:"MD",name:"Madrid, Comunidad de"},"ES-0-MC":{code:"MC",name:"Murcia, Regi\xf3n de"},"ES-0-NC":{code:"NC",name:"Navarra, Comunidad Foral de"},"ES-0-PV":{code:"PV",name:"Pa\xeds Vasco"},"ES-0-VC":{code:"VC",name:"Valenciana, Comunitat"},"ES-0-CE":{code:"CE",name:"Ceuta"},"ES-0-ML":{code:"ML",name:"Melilla"},"ES-1-C":{code:"C",name:"A Coru\xf1a"},"ES-1-VI":{code:"VI",name:"\xc1lava"},"ES-1-AB":{code:"AB",name:"Albacete"},"ES-1-A":{code:"A",name:"Alicante"},"ES-1-AL":{code:"AL",name:"Almer\xeda"},"ES-1-O":{code:"O",name:"Asturias"},"ES-1-AV":{code:"AV",name:"\xc1vila"},"ES-1-BA":{code:"BA",name:"Badajoz"},"ES-1-PM":{code:"PM",name:"Illes Balears"},"ES-1-B":{code:"B",name:"Barcelona"},"ES-1-BU":{code:"BU",name:"Burgos"},"ES-1-CC":{code:"CC",name:"C\xe1ceres"},"ES-1-CA":{code:"CA",name:"C\xe1diz"},"ES-1-S":{code:"S",name:"Cantabria"},"ES-1-CS":{code:"CS",name:"Castell\xf3n"},"ES-1-CR":{code:"CR",name:"Ciudad Real"},"ES-1-CO":{code:"CO",name:"C\xf3rdoba"},"ES-1-CU":{code:"CU",name:"Cuenca"},"ES-1-GI":{code:"GI",name:"Girona"},"ES-1-GR":{code:"GR",name:"Granada"},"ES-1-GU":{code:"GU",name:"Guadalajara"},"ES-1-SS":{code:"SS",name:"Gipuzkoa"},"ES-1-H":{code:"H",name:"Huelva"},"ES-1-HU":{code:"HU",name:"Huesca"},"ES-1-J":{code:"J",name:"Ja\xe9n"},"ES-1-LO":{code:"LO",name:"La Rioja"},"ES-1-GC":{code:"GC",name:"Las Palmas"},"ES-1-LE":{code:"LE",name:"Le\xf3n"},"ES-1-L":{code:"L",name:"Lleida"},"ES-1-LU":{code:"LU",name:"Lugo"},"ES-1-M":{code:"M",name:"Madrid"},"ES-1-MA":{code:"MA",name:"M\xe1laga"},"ES-1-MU":{code:"MU",name:"Murcia"},"ES-1-NA":{code:"NA",name:"Navarra"},"ES-1-OR":{code:"OR",name:"Ourense"},"ES-1-P":{code:"P",name:"Palencia"},"ES-1-PO":{code:"PO",name:"Pontevedra"},"ES-1-SA":{code:"SA",name:"Salamanca"},"ES-1-TF":{code:"TF",name:"Santa Cruz de Tenerife"},"ES-1-SG":{code:"SG",name:"Segovia"},"ES-1-SE":{code:"SE",name:"Sevilla"},"ES-1-SO":{code:"SO",name:"Soria"},"ES-1-T":{code:"T",name:"Tarragona"},"ES-1-TE":{code:"TE",name:"Teruel"},"ES-1-TO":{code:"TO",name:"Toledo"},"ES-1-V":{code:"V",name:"Valencia"},"ES-1-VA":{code:"VA",name:"Valladolid"},"ES-1-BI":{code:"BI",name:"Bizkaia"},"ES-1-ZA":{code:"ZA",name:"Zamora"},"ES-1-Z":{code:"Z",name:"Zaragoza"}},[n.c.MX]:{"MX-0-DIF":{code:"DIF",name:"Distrito Federal"},"MX-0-AGU":{code:"AGU",name:"Aguascalientes"},"MX-0-BCN":{code:"BCN",name:"Baja California"},"MX-0-BCS":{code:"BCS",name:"Baja California Sur"},"MX-0-CAM":{code:"CAM",name:"Campeche"},"MX-0-COA":{code:"COA",name:"Coahuila"},"MX-0-COL":{code:"COL",name:"Colima"},"MX-0-CHP":{code:"CHP",name:"Chiapas"},"MX-0-CHH":{code:"CHH",name:"Chihuahua"},"MX-0-DUR":{code:"DUR",name:"Durango"},"MX-0-GUA":{code:"GUA",name:"Guanajuato"},"MX-0-GRO":{code:"GRO",name:"Guerrero"},"MX-0-HID":{code:"HID",name:"Hidalgo"},"MX-0-JAL":{code:"JAL",name:"Jalisco"},"MX-0-MEX":{code:"MEX",name:"M\xe9xico"},"MX-0-MIC":{code:"MIC",name:"Michoac\xe1n"},"MX-0-MOR":{code:"MOR",name:"Morelos"},"MX-0-NAY":{code:"NAY",name:"Nayarit"},"MX-0-NLE":{code:"NLE",name:"Nuevo Le\xf3n"},"MX-0-OAX":{code:"OAX",name:"Oaxaca"},"MX-0-PUE":{code:"PUE",name:"Puebla"},"MX-0-QUE":{code:"QUE",name:"Quer\xe9taro"},"MX-0-ROO":{code:"ROO",name:"Quintana Roo"},"MX-0-SLP":{code:"SLP",name:"San Luis Potos\xed"},"MX-0-SIN":{code:"SIN",name:"Sinaloa"},"MX-0-SON":{code:"SON",name:"Sonora"},"MX-0-TAB":{code:"TAB",name:"Tabasco"},"MX-0-TAM":{code:"TAM",name:"Tamaulipas"},"MX-0-TLA":{code:"TLA",name:"Tlaxcala"},"MX-0-VER":{code:"VER",name:"Veracruz"},"MX-0-YUC":{code:"YUC",name:"Yucat\xe1n"},"MX-0-ZAC":{code:"ZAC",name:"Zacatecas"}},[n.c.CO]:{"CO-0-DC":{code:"DC",name:"Distrito Capital de Bogot\xe1"},"CO-0-AMA":{code:"AMA",name:"Amazonas"},"CO-0-ANT":{code:"ANT",name:"Antioquia"},"CO-0-ARA":{code:"ARA",name:"Arauca"},"CO-0-ATL":{code:"ATL",name:"Atl\xe1ntico"},"CO-0-BOL":{code:"BOL",name:"Bol\xedvar"},"CO-0-BOY":{code:"BOY",name:"Boyac\xe1"},"CO-0-CAL":{code:"CAL",name:"Caldas"},"CO-0-CAQ":{code:"CAQ",name:"Caquet\xe1"},"CO-0-CAS":{code:"CAS",name:"Casanare"},"CO-0-CAU":{code:"CAU",name:"Cauca"},"CO-0-CES":{code:"CES",name:"Cesar"},"CO-0-COR":{code:"COR",name:"C\xf3rdoba"},"CO-0-CUN":{code:"CUN",name:"Cundinamarca"},"CO-0-CHO":{code:"CHO",name:"Choc\xf3"},"CO-0-GUA":{code:"GUA",name:"Guain\xeda"},"CO-0-GUV":{code:"GUV",name:"Guaviare"},"CO-0-HUI":{code:"HUI",name:"Huila"},"CO-0-LAG":{code:"LAG",name:"La Guajira"},"CO-0-MAG":{code:"MAG",name:"Magdalena"},"CO-0-MET":{code:"MET",name:"Meta"},"CO-0-NAR":{code:"NAR",name:"Nari\xf1o"},"CO-0-NSA":{code:"NSA",name:"Norte de Santander"},"CO-0-PUT":{code:"PUT",name:"Putumayo"},"CO-0-QUI":{code:"QUI",name:"Quind\xedo"},"CO-0-RIS":{code:"RIS",name:"Risaralda"},"CO-0-SAP":{code:"SAP",name:"San Andr\xe9s, Providencia y Santa Catalina"},"CO-0-SAN":{code:"SAN",name:"Santander"},"CO-0-SUC":{code:"SUC",name:"Sucre"},"CO-0-TOL":{code:"TOL",name:"Tolima"},"CO-0-VAC":{code:"VAC",name:"Valle del Cauca"},"CO-0-VAU":{code:"VAU",name:"Vaup\xe9s"},"CO-0-VID":{code:"VID",name:"Vichada"}},[n.c.PE]:{"PE-0-CAL":{code:"CAL",name:"El Callao"},"PE-0-LMA":{code:"LMA",name:"Municipalidad Metropolitana de Lima"},"PE-0-AMA":{code:"AMA",name:"Amazonas"},"PE-0-ANC":{code:"ANC",name:"Ancash"},"PE-0-APU":{code:"APU",name:"Apur\xedmac"},"PE-0-ARE":{code:"ARE",name:"Arequipa"},"PE-0-AYA":{code:"AYA",name:"Ayacucho"},"PE-0-CAJ":{code:"CAJ",name:"Cajamarca"},"PE-0-CUS":{code:"CUS",name:"Cusco"},"PE-0-HUV":{code:"HUV",name:"Huancavelica"},"PE-0-HUC":{code:"HUC",name:"Hu\xe1nuco"},"PE-0-ICA":{code:"ICA",name:"Ica"},"PE-0-JUN":{code:"JUN",name:"Jun\xedn"},"PE-0-LAL":{code:"LAL",name:"La Libertad"},"PE-0-LAM":{code:"LAM",name:"Lambayeque"},"PE-0-LIM":{code:"LIM",name:"Lima"},"PE-0-LOR":{code:"LOR",name:"Loreto"},"PE-0-MDD":{code:"MDD",name:"Madre de Dios"},"PE-0-MOQ":{code:"MOQ",name:"Moquegua"},"PE-0-PAS":{code:"PAS",name:"Pasco"},"PE-0-PIU":{code:"PIU",name:"Piura"},"PE-0-PUN":{code:"PUN",name:"Puno"},"PE-0-SAM":{code:"SAM",name:"San Mart\xedn"},"PE-0-TAC":{code:"TAC",name:"Tacna"},"PE-0-TUM":{code:"TUM",name:"Tumbes"},"PE-0-UCA":{code:"UCA",name:"Ucayali"}},[n.c.CL]:{"CL-0-AI":{code:"AI",name:"Ais\xe9n del General Carlos Iba\xf1ez del Campo"},"CL-0-AN":{code:"AN",name:"Antofagasta"},"CL-0-AR":{code:"AR",name:"Araucan\xeda"},"CL-0-AP":{code:"AP",name:"Arica y Parinacota"},"CL-0-AT":{code:"AT",name:"Atacama"},"CL-0-BI":{code:"BI",name:"Biob\xedo"},"CL-0-CO":{code:"CO",name:"Coquimbo"},"CL-0-LI":{code:"LI",name:"Libertador General Bernardo O'Higgins"},"CL-0-LL":{code:"LL",name:"Los Lagos"},"CL-0-LR":{code:"LR",name:"Los R\xedos"},"CL-0-MA":{code:"MA",name:"Magallanes y la Ant\xe1rtica Chilena"},"CL-0-ML":{code:"ML",name:"Maule"},"CL-0-RM":{code:"RM",name:"Metropolitana de Santiago"},"CL-0-TA":{code:"TA",name:"Tarapac\xe1"},"CL-0-VS":{code:"VS",name:"Valpara\xedso"}},[n.c.DE]:{"DE-0-BW":{code:"BW",name:"Baden-W\xfcrttemberg"},"DE-0-BY":{code:"BY",name:"Bayern"},"DE-0-BE":{code:"BE",name:"Berlin"},"DE-0-BB":{code:"BB",name:"Brandenburg"},"DE-0-HB":{code:"HB",name:"Bremen"},"DE-0-HH":{code:"HH",name:"Hamburg"},"DE-0-HE":{code:"HE",name:"Hessen"},"DE-0-MV":{code:"MV",name:"Mecklenburg-Vorpommern"},"DE-0-NI":{code:"NI",name:"Niedersachsen"},"DE-0-NW":{code:"NW",name:"Nordrhein-Westfalen"},"DE-0-RP":{code:"RP",name:"Rheinland-Pfalz"},"DE-0-SL":{code:"SL",name:"Saarland"},"DE-0-SN":{code:"SN",name:"Sachsen"},"DE-0-ST":{code:"ST",name:"Sachsen-Anhalt"},"DE-0-SH":{code:"SH",name:"Schleswig-Holstein"},"DE-0-TH":{code:"TH",name:"Th\xfcringen"}},[n.c.IT]:{"IT-0-65":{code:"65",name:"Abruzzo"},"IT-0-77":{code:"77",name:"Basilicata"},"IT-0-78":{code:"78",name:"Calabria"},"IT-0-72":{code:"72",name:"Campania"},"IT-0-45":{code:"45",name:"Emilia-Romagna"},"IT-0-36":{code:"36",name:"Friuli-Venezia Giulia"},"IT-0-62":{code:"62",name:"Lazio"},"IT-0-42":{code:"42",name:"Liguria"},"IT-0-25":{code:"25",name:"Lombardia"},"IT-0-57":{code:"57",name:"Marche"},"IT-0-67":{code:"67",name:"Molise"},"IT-0-21":{code:"21",name:"Piemonte"},"IT-0-75":{code:"75",name:"Puglia"},"IT-0-88":{code:"88",name:"Sardegna"},"IT-0-82":{code:"82",name:"Sicilia"},"IT-0-52":{code:"52",name:"Toscana"},"IT-0-32":{code:"32",name:"Trentino Alto Adige"},"IT-0-55":{code:"55",name:"Umbria"},"IT-0-23":{code:"23",name:"Valle d'Aosta"},"IT-0-34":{code:"34",name:"Veneto"},"IT-1-AG":{code:"AG",name:"Agrigento"},"IT-1-AL":{code:"AL",name:"Alessandria"},"IT-1-AN":{code:"AN",name:"Ancona"},"IT-1-AO":{code:"AO",name:"Aosta"},"IT-1-AR":{code:"AR",name:"Arezzo"},"IT-1-AP":{code:"AP",name:"Ascoli Piceno"},"IT-1-AT":{code:"AT",name:"Asti"},"IT-1-AV":{code:"AV",name:"Avellino"},"IT-1-BA":{code:"BA",name:"Bari"},"IT-1-BT":{code:"BT",name:"Barletta-Andria-Trani"},"IT-1-BL":{code:"BL",name:"Belluno"},"IT-1-BN":{code:"BN",name:"Benevento"},"IT-1-BG":{code:"BG",name:"Bergamo"},"IT-1-BI":{code:"BI",name:"Biella"},"IT-1-BO":{code:"BO",name:"Bologna"},"IT-1-BZ":{code:"BZ",name:"Bolzano"},"IT-1-BS":{code:"BS",name:"Brescia"},"IT-1-BR":{code:"BR",name:"Brindisi"},"IT-1-CA":{code:"CA",name:"Cagliari"},"IT-1-CL":{code:"CL",name:"Caltanissetta"},"IT-1-CB":{code:"CB",name:"Campobasso"},"IT-1-CI":{code:"CI",name:"Carbonia-Iglesias"},"IT-1-CE":{code:"CE",name:"Caserta"},"IT-1-CT":{code:"CT",name:"Catania"},"IT-1-CZ":{code:"CZ",name:"Catanzaro"},"IT-1-CH":{code:"CH",name:"Chieti"},"IT-1-CO":{code:"CO",name:"Como"},"IT-1-CS":{code:"CS",name:"Cosenza"},"IT-1-CR":{code:"CR",name:"Cremona"},"IT-1-KR":{code:"KR",name:"Crotone"},"IT-1-CN":{code:"CN",name:"Cuneo"},"IT-1-EN":{code:"EN",name:"Enna"},"IT-1-FM":{code:"FM",name:"Fermo"},"IT-1-FE":{code:"FE",name:"Ferrara"},"IT-1-FI":{code:"FI",name:"Firenze"},"IT-1-FG":{code:"FG",name:"Foggia"},"IT-1-FC":{code:"FC",name:"Forl\xec-Cesena"},"IT-1-FR":{code:"FR",name:"Frosinone"},"IT-1-GE":{code:"GE",name:"Genova"},"IT-1-GO":{code:"GO",name:"Gorizia"},"IT-1-GR":{code:"GR",name:"Grosseto"},"IT-1-IM":{code:"IM",name:"Imperia"},"IT-1-IS":{code:"IS",name:"Isernia"},"IT-1-SP":{code:"SP",name:"La Spezia"},"IT-1-AQ":{code:"AQ",name:"L'Aquila"},"IT-1-LT":{code:"LT",name:"Latina"},"IT-1-LE":{code:"LE",name:"Lecce"},"IT-1-LC":{code:"LC",name:"Lecco"},"IT-1-LI":{code:"LI",name:"Livorno"},"IT-1-LO":{code:"LO",name:"Lodi"},"IT-1-LU":{code:"LU",name:"Lucca"},"IT-1-MC":{code:"MC",name:"Macerata"},"IT-1-MN":{code:"MN",name:"Mantova"},"IT-1-MS":{code:"MS",name:"Massa-Carrara"},"IT-1-MT":{code:"MT",name:"Matera"},"IT-1-VS":{code:"VS",name:"Medio Campidano"},"IT-1-ME":{code:"ME",name:"Messina"},"IT-1-MI":{code:"MI",name:"Milano"},"IT-1-MO":{code:"MO",name:"Modena"},"IT-1-MB":{code:"MB",name:"Monza e Brianza"},"IT-1-NA":{code:"NA",name:"Napoli"},"IT-1-NO":{code:"NO",name:"Novara"},"IT-1-NU":{code:"NU",name:"Nuoro"},"IT-1-OG":{code:"OG",name:"Ogliastra"},"IT-1-OT":{code:"OT",name:"Olbia-Tempio"},"IT-1-OR":{code:"OR",name:"Oristano"},"IT-1-PD":{code:"PD",name:"Padova"},"IT-1-PA":{code:"PA",name:"Palermo"},"IT-1-PR":{code:"PR",name:"Parma"},"IT-1-PV":{code:"PV",name:"Pavia"},"IT-1-PG":{code:"PG",name:"Perugia"},"IT-1-PU":{code:"PU",name:"Pesaro e Urbino"},"IT-1-PE":{code:"PE",name:"Pescara"},"IT-1-PC":{code:"PC",name:"Piacenza"},"IT-1-PI":{code:"PI",name:"Pisa"},"IT-1-PT":{code:"PT",name:"Pistoia"},"IT-1-PN":{code:"PN",name:"Pordenone"},"IT-1-PZ":{code:"PZ",name:"Potenza"},"IT-1-PO":{code:"PO",name:"Prato"},"IT-1-RG":{code:"RG",name:"Ragusa"},"IT-1-RA":{code:"RA",name:"Ravenna"},"IT-1-RC":{code:"RC",name:"Reggio Calabria"},"IT-1-RE":{code:"RE",name:"Reggio Emilia"},"IT-1-RI":{code:"RI",name:"Rieti"},"IT-1-RN":{code:"RN",name:"Rimini"},"IT-1-RM":{code:"RM",name:"Roma"},"IT-1-RO":{code:"RO",name:"Rovigo"},"IT-1-SA":{code:"SA",name:"Salerno"},"IT-1-SS":{code:"SS",name:"Sassari"},"IT-1-SV":{code:"SV",name:"Savona"},"IT-1-SI":{code:"SI",name:"Siena"},"IT-1-SR":{code:"SR",name:"Siracusa"},"IT-1-SO":{code:"SO",name:"Sondrio"},"IT-1-TA":{code:"TA",name:"Taranto"},"IT-1-TE":{code:"TE",name:"Teramo"},"IT-1-TR":{code:"TR",name:"Terni"},"IT-1-TO":{code:"TO",name:"Torino"},"IT-1-TP":{code:"TP",name:"Trapani"},"IT-1-TN":{code:"TN",name:"Trento"},"IT-1-TV":{code:"TV",name:"Treviso"},"IT-1-TS":{code:"TS",name:"Trieste"},"IT-1-UD":{code:"UD",name:"Udine"},"IT-1-VA":{code:"VA",name:"Varese"},"IT-1-VE":{code:"VE",name:"Venezia"},"IT-1-VB":{code:"VB",name:"Verbano-Cusio-Ossola"},"IT-1-VC":{code:"VC",name:"Vercelli"},"IT-1-VR":{code:"VR",name:"Verona"},"IT-1-VV":{code:"VV",name:"Vibo Valentia"},"IT-1-VI":{code:"VI",name:"Vicenza"},"IT-1-VT":{code:"VT",name:"Viterbo"}},[n.c.CH]:{"CH-0-AG":{code:"AG",name:"Aargau"},"CH-0-AR":{code:"AR",name:"Appenzell Ausserrhoden"},"CH-0-AI":{code:"AI",name:"Appenzell Innerrhoden"},"CH-0-BL":{code:"BL",name:"Basel-Landschaft"},"CH-0-BS":{code:"BS",name:"Basel-Stadt"},"CH-0-BE":{code:"BE",name:"Berne"},"CH-0-FR":{code:"FR",name:"Fribourg"},"CH-0-GE":{code:"GE",name:"Gen\xe8ve"},"CH-0-GL":{code:"GL",name:"Glarus"},"CH-0-GR":{code:"GR",name:"Graub\xfcnden"},"CH-0-JU":{code:"JU",name:"Jura"},"CH-0-LU":{code:"LU",name:"Luzern"},"CH-0-NE":{code:"NE",name:"Neuch\xe2tel"},"CH-0-NW":{code:"NW",name:"Nidwalden"},"CH-0-OW":{code:"OW",name:"Obwalden"},"CH-0-SG":{code:"SG",name:"Sankt Gallen"},"CH-0-SH":{code:"SH",name:"Schaffhausen"},"CH-0-SZ":{code:"SZ",name:"Schwyz"},"CH-0-SO":{code:"SO",name:"Solothurn"},"CH-0-TG":{code:"TG",name:"Thurgau"},"CH-0-TI":{code:"TI",name:"Ticino"},"CH-0-UR":{code:"UR",name:"Uri"},"CH-0-VS":{code:"VS",name:"Valais"},"CH-0-VD":{code:"VD",name:"Vaud"},"CH-0-ZG":{code:"ZG",name:"Zug"},"CH-0-ZH":{code:"ZH",name:"Z\xfcrich"}},[n.c.BE]:{"BE-0-BRU":{code:"BRU",name:"Bruxelles-Capitale, R\xe9gion de"},"BE-0-VLG":{code:"VLG",name:"Vlaamse Gewest"},"BE-0-WAL":{code:"WAL",name:"R\xe9gion wallonne"},"BE-1-VAN":{code:"VAN",name:"Antwerpen"},"BE-1-WBR":{code:"WBR",name:"Brabant wallon"},"BE-1-WHT":{code:"WHT",name:"Hainaut"},"BE-1-WLG":{code:"WLG",name:"Li\xe8ge"},"BE-1-VLI":{code:"VLI",name:"Limburg"},"BE-1-WLX":{code:"WLX",name:"Luxembourg"},"BE-1-WNA":{code:"WNA",name:"Namur"},"BE-1-VOV":{code:"VOV",name:"Oost-Vlaanderen"},"BE-1-VBR":{code:"VBR",name:"Vlaams-Brabant"},"BE-1-VWV":{code:"VWV",name:"West-Vlaanderen"}},[n.c.SE]:{"SE-0-K":{code:"K",name:"Blekinge l\xe4n"},"SE-0-W":{code:"W",name:"Dalarnas l\xe4n"},"SE-0-I":{code:"I",name:"Gotlands l\xe4n"},"SE-0-X":{code:"X",name:"G\xe4vleborgs l\xe4n"},"SE-0-N":{code:"N",name:"Hallands l\xe4n"},"SE-0-Z":{code:"Z",name:"J\xe4mtlands l\xe4n"},"SE-0-F":{code:"F",name:"J\xf6nk\xf6pings l\xe4n"},"SE-0-H":{code:"H",name:"Kalmar l\xe4n"},"SE-0-G":{code:"G",name:"Kronobergs l\xe4n"},"SE-0-BD":{code:"BD",name:"Norrbottens l\xe4n"},"SE-0-M":{code:"M",name:"Sk\xe5ne l\xe4n"},"SE-0-AB":{code:"AB",name:"Stockholms l\xe4n"},"SE-0-D":{code:"D",name:"S\xf6dermanlands l\xe4n"},"SE-0-C":{code:"C",name:"Uppsala l\xe4n"},"SE-0-S":{code:"S",name:"V\xe4rmlands l\xe4n"},"SE-0-AC":{code:"AC",name:"V\xe4sterbottens l\xe4n"},"SE-0-Y":{code:"Y",name:"V\xe4sternorrlands l\xe4n"},"SE-0-U":{code:"U",name:"V\xe4stmanlands l\xe4n"},"SE-0-O":{code:"O",name:"V\xe4stra G\xf6talands l\xe4n"},"SE-0-T":{code:"T",name:"\xd6rebro l\xe4n"},"SE-0-E":{code:"E",name:"\xd6sterg\xf6tlands l\xe4n"}},[n.c.NO]:{"NO-0-2":{code:"2",name:"Akershus"},"NO-0-9":{code:"9",name:"Aust-Agder"},"NO-0-6":{code:"6",name:"Buskerud"},"NO-0-20":{code:"20",name:"Finnmark"},"NO-0-4":{code:"4",name:"Hedmark"},"NO-0-12":{code:"12",name:"Hordaland"},"NO-0-15":{code:"15",name:"M\xf8re og Romsdal"},"NO-0-18":{code:"18",name:"Nordland"},"NO-0-17":{code:"17",name:"Nord-Tr\xf8ndelag"},"NO-0-5":{code:"5",name:"Oppland"},"NO-0-3":{code:"3",name:"Oslo"},"NO-0-11":{code:"11",name:"Rogaland"},"NO-0-14":{code:"14",name:"Sogn og Fjordane"},"NO-0-16":{code:"16",name:"S\xf8r-Tr\xf8ndelag"},"NO-0-8":{code:"8",name:"Telemark"},"NO-0-19":{code:"19",name:"Troms"},"NO-0-10":{code:"10",name:"Vest-Agder"},"NO-0-7":{code:"7",name:"Vestfold"},"NO-0-1":{code:"1",name:"\xd8stfold"},"NO-0-22":{code:"22",name:"Jan Mayen"},"NO-0-21":{code:"21",name:"Svalbard"}},[n.c.NL]:{"NL-0-DR":{code:"DR",name:"Drenthe"},"NL-0-FL":{code:"FL",name:"Flevoland"},"NL-0-FR":{code:"FR",name:"Frysl\xe2n"},"NL-0-GE":{code:"GE",name:"Gelderland"},"NL-0-GR":{code:"GR",name:"Groningen"},"NL-0-LI":{code:"LI",name:"Limburg"},"NL-0-NB":{code:"NB",name:"Noord-Brabant"},"NL-0-NH":{code:"NH",name:"Noord-Holland"},"NL-0-OV":{code:"OV",name:"Overijssel"},"NL-0-UT":{code:"UT",name:"Utrecht"},"NL-0-ZE":{code:"ZE",name:"Zeeland"},"NL-0-ZH":{code:"ZH",name:"Zuid-Holland"}},[n.c.PT]:{"PT-0-1":{code:"1",name:"Aveiro"},"PT-0-2":{code:"2",name:"Beja"},"PT-0-3":{code:"3",name:"Braga"},"PT-0-4":{code:"4",name:"Bragan\xe7a"},"PT-0-5":{code:"5",name:"Castelo Branco"},"PT-0-6":{code:"6",name:"Coimbra"},"PT-0-7":{code:"7",name:"\xc9vora"},"PT-0-8":{code:"8",name:"Faro"},"PT-0-9":{code:"9",name:"Guarda"},"PT-0-10":{code:"10",name:"Leiria"},"PT-0-11":{code:"11",name:"Lisboa"},"PT-0-12":{code:"12",name:"Portalegre"},"PT-0-13":{code:"13",name:"Porto"},"PT-0-14":{code:"14",name:"Santar\xe9m"},"PT-0-15":{code:"15",name:"Set\xfabal"},"PT-0-16":{code:"16",name:"Viana do Castelo"},"PT-0-17":{code:"17",name:"Vila Real"},"PT-0-18":{code:"18",name:"Viseu"},"PT-0-20":{code:"20",name:"Regi\xe3o Aut\xf3noma dos A\xe7ores"},"PT-0-30":{code:"30",name:"Regi\xe3o Aut\xf3noma da Madeira"}}}},54637:function(e,t,a){a.d(t,{B:()=>g});var n=a(36503),i=a(94482),o=a(92893),r=a(69533),s=a(22187),c=a(62423),d=a(63426),l=a(45967),u=a(90696),m=a(3998);let g=(0,n.Q)({name:"importOrchestrator",commands:{executeDataTranslation:i.Y,resetImport:o.O,startDataRetrieval:r.C,setImportSource:s._,setDefaultSpace:c.K},events:{},queries:{importStep:d.s,importSource:l.l,isFileUploaded:u.Z,importDefaultSpace:m.R}})},94482:function(e,t,a){a.d(t,{Y:()=>o});var n=a(66122),i=a(15021);class o extends(0,n.g)({scope:i.F.User}){}},92893:function(e,t,a){a.d(t,{O:()=>o});var n=a(66122),i=a(15021);class o extends(0,n.g)({scope:i.F.User}){}},62423:function(e,t,a){a.d(t,{K:()=>o});var n=a(66122),i=a(15021);class o extends(0,n.g)({scope:i.F.User}){}},22187:function(e,t,a){a.d(t,{_:()=>o});var n=a(66122),i=a(15021);class o extends(0,n.g)({scope:i.F.User}){}},69533:function(e,t,a){a.d(t,{C:()=>o});var n=a(66122),i=a(15021);class o extends(0,n.g)({scope:i.F.User}){}},87226:function(e,t,a){a.d(t,{$7:()=>p,DQ:()=>d,NP:()=>r,OM:()=>u,Xn:()=>c,Zx:()=>S,gS:()=>A,k4:()=>g,kj:()=>l,pD:()=>s,yo:()=>m});var n,i,o=a(96272),r=((n={}).NOT_STARTED="not_started",n.ITEM_RETRIEVAL="item_retrieval",n.PROCESSING="processing",n.PREVIEW="preview",n.IMPORTING="importing",n.COMPLETED="completed",n),s=((i={}).BITWARDEN_CSV="bitwarden_csv",i.DASHLANE_DASH="dashlane_dash",i.LASTPASS_DIRECT="lastpass_direct",i.CHROME_CSV="chrome_csv",i.EDGE_CSV="edge_csv",i.FIREFOX_CSV="firefox_csv",i.KEEPASS_CSV="keepass_csv",i.KEEPER_CSV="keeper_csv",i.LASTPASS_CSV="lastpass_csv",i.ONE_PASSWORD_CSV="one_password_csv",i.OTHER_CSV="other_csv",i.SAFARI_CSV="safari_csv",i);let c="WRONG_STEP_ERROR",d=(0,o.Vj)(c,"Wrong step"),l="NO_UPLOADED_DATA_ERROR",u=(0,o.Vj)(l,"No data uploaded to the store"),m="DECRYPTION_ERROR",g=(0,o.Vj)(m,"Could not decrypt data"),p="FORMATTING_ERROR",S=(0,o.Vj)(p,"Parsing failed"),A="ON_UPLOAD_FILE_IMPORT"},44008:function(e,t,a){a.d(t,{c:()=>i});var n,i=((n={}).ImportOrchestratorGrapheneMigration="activationRetention_web_vaultImportOrchestrator_grapheneMigration_dev",n)},3998:function(e,t,a){a.d(t,{R:()=>o});var n=a(45429),i=a(15021);class o extends(0,n.k)({scope:i.F.User}){}},45967:function(e,t,a){a.d(t,{l:()=>o});var n=a(45429),i=a(15021);class o extends(0,n.k)({scope:i.F.User}){}},63426:function(e,t,a){a.d(t,{s:()=>o});var n=a(45429),i=a(15021);class o extends(0,n.k)({scope:i.F.User}){}},90696:function(e,t,a){a.d(t,{Z:()=>o});var n=a(45429),i=a(15021);class o extends(0,n.k)({scope:i.F.User}){}},19298:function(e,t,a){a.r(t),a.d(t,{createUnableToReachS3ServerError:()=>er.Jd,vaultSearchApi:()=>K.R,IsFreeUserFrozenQuery:()=>Z.k,UpdateVaultItemCommand:()=>c.K,geographicStates:()=>eD.j,CreatedEvent:()=>m.J,EventType:()=>u.t,PhoneType:()=>R.z,ExecuteDataTranslationCommand:()=>eA.Y,SecureFilesFlips:()=>el.a,PASSWORD_LIMIT_FEATURE_FLIPS:()=>$.t,isLegacyPasskey:()=>y._u,vaultNotificationsApi:()=>F.e,StartDataRetrievalCommand:()=>eN.C,DECRYPTION_ERROR:()=>ef.yo,VaultItemsCrudFeatureFlips:()=>z.j,createInvalidFileError:()=>er.Wr,RemoveTemporaryAttachmentCommand:()=>ei.E,createForbiddenLastAdminError:()=>d.V$,EmitTemporaryVaultItemEventCommand:()=>u.c,DomainIconDetailsSchema:()=>v.N,AttachToVaultItemCommand:()=>ea.b,CanUserAddNewPasswordQuery:()=>Q.K,banks:()=>eU,createItemNotFoundError:()=>d.sA,ImportDefaultSpaceQuery:()=>eB.R,VaultSearchQuery:()=>H.W,OperationType:()=>x.C,VaultSearchRankedQuery:()=>W.$,createFormattingError:()=>ef.Zx,PasswordHistoryItemType:()=>eb.me,Country:()=>C.c,PasswordHistoryFilter:()=>eb.rf,createVaultItemNotFoundError:()=>er.xy,vaultItemsCrudApi:()=>i.L,createForbiddenGroupItemError:()=>d.Vf,CollectionsQuery:()=>V.I,DeleteCollectionCommand:()=>k.T,SetDefaultSpaceCommand:()=>eI.K,DeleteSecureFileCommand:()=>ee._8,UploadSecureFileErrors:()=>er.sd,vaultOrganizationApi:()=>w.v,DeleteVaultItemCommand:()=>d.io,IsFileUploadedQuery:()=>eT.Z,RemoveAllTemporaryAttachmentCommand:()=>eo.j,SetVaultNotificationsStatusCommand:()=>_.x,createIncompleteDeletionError:()=>s.nO,FilterOperators:()=>A.l,createDecryptingError:()=>ef.k4,VaultItemType:()=>U.U,SecureNoteSchema:()=>P._,IdentityTitle:()=>b.t,ProgressStatus:()=>es.m,ImportSteps:()=>ef.NP,ImportOrchestratorFeatureFlips:()=>ey.c,NoteColors:()=>P.L,ImportSourceQuery:()=>ev.l,DeleteSecureFileCommandErrors:()=>ee.j6,ON_UPLOAD_FILE_IMPORT_KEY:()=>ef.gS,allowedMimeTypes:()=>em.X,WebAuthnKeyAlgorithm:()=>y.aG,createSecureFileQuotaUpdateError:()=>ee.qC,RichIconsEnabledQuery:()=>I.M,secureFilesApi:()=>X.e,createUnableToQueryVaultItemError:()=>er.TW,VaultOrganizationClient:()=>G.C,EmailType:()=>O,VaultItemTypeToResultDictionary:()=>D.N,DownloadSecureFileCommand:()=>et.J,NO_UPLOADED_DATA_ERROR:()=>ef.kj,ResetImportCommand:()=>eh.O,createUnableToLinkError:()=>er.Jn,createUserNotLoggedInError:()=>er.$t,UPLOAD_SECURE_FILE_KEY:()=>ep.I,passwordHistoryApi:()=>eO.T,DomainIconDetailsQuery:()=>S.s,GetSecureFileProgressQuery:()=>es.J,createNitroDeleteFailedError:()=>d.T$,DeletedEvent:()=>g.s,GetTemporarySecureFileAttachmentsQuery:()=>ed.b,PaymentCardColorType:()=>f.X,GetPasswordLimitStatusQuery:()=>q.r,ImportSources:()=>ef.pD,VaultItemsQuery:()=>E.W,DeleteVaultItemsCommand:()=>s.cR,isPasskey:()=>y.p3,VaultSearchClient:()=>j.T,GetVaultNotificationsStatusQuery:()=>L.M,GetSecureFileQuotaQuery:()=>ec.l,SecureFilesClient:()=>J.v,GetPasswordHistoryQuery:()=>eb.mD,VaultItemsCrudClient:()=>o.L,ImportStepQuery:()=>eC.s,createMaxFileSizeError:()=>er.Qm,createWrongStepError:()=>ef.DQ,DeleteChangeHistoryForVaultItemsCommand:()=>l.X,WRONG_STEP_ERROR:()=>ef.Xn,DomainIconDetailsMapSchema:()=>v.x,MAX_FILE_SIZE:()=>ep.T,UpdatedEvent:()=>p.V,createNoRemoteFileError:()=>ee.Kg,DeleteVaultItemsCommandErrors:()=>s.c4,GetPasswordGenerationSettingsQuery:()=>eP.$,createNoUploadDataError:()=>ef.OM,SortDirection:()=>N.S,createUnableToUpdateVaultItemError:()=>er.fK,CreateVaultItemCommand:()=>r._,CredentialSchema:()=>B,SetImportSourceCommand:()=>eE._,CreateCollectionCommand:()=>M.e,FetchSecureFileQuotaCommand:()=>en.S,UpdateCollectionCommand:()=>x.s,GetHasPasswordHistoryQuery:()=>eR.e,isCloudPasskey:()=>y.T5,CredentialsGloballyProtectedQuery:()=>h.R,DeleteVaultItemCommandErrors:()=>d.kx,allowedExtensions:()=>eu.L,passwordLimitApi:()=>Y.Z,importOrchestratorApi:()=>eS.B,isValidFileExtension:()=>eg.g,FORMATTING_ERROR:()=>ef.$7});var n,i=a(41681),o=a(47244),r=a(58429),s=a(57033),c=a(58380),d=a(53978),l=a(86933),u=a(9852),m=a(37883),g=a(85689),p=a(87824),S=a(69140),A=a(36649),h=a(3078),N=a(84809),E=a(42230),I=a(15804),C=a(238),v=a(19242),T=a(63762);let B=T.z.object({alternativeUsername:T.z.string(),email:T.z.string(),itemName:T.z.string(),password:T.z.string(),username:T.z.string(),URL:T.z.string(),linkedURLs:T.z.array(T.z.string())});var y=a(79755),f=a(40226),O=((n={}).Perso="PERSO",n.Pro="PRO",n.NoType="NO_TYPE",n),b=a(79018),R=a(60066),P=a(96160),U=a(57178),D=a(23791),z=a(86716),F=a(6502),_=a(48721),L=a(30547),w=a(4631),k=a(51105),M=a(39771),x=a(17242),V=a(94314),G=a(4495),K=a(36127),j=a(34211),H=a(93822),W=a(47996),Y=a(63365),Q=a(48467),q=a(83352),Z=a(4073),$=a(69393),X=a(57429),J=a(95538),ee=a(4767),et=a(33522),ea=a(78517),en=a(62274),ei=a(97903),eo=a(77593),er=a(67468),es=a(58959),ec=a(98323),ed=a(84864),el=a(39828),eu=a(35345),em=a(41317),eg=a(91688),ep=a(20709),eS=a(54637),eA=a(94482),eh=a(92893),eN=a(69533),eE=a(22187),eI=a(62423),eC=a(63426),ev=a(45967),eT=a(90696),eB=a(3998),ey=a(44008),ef=a(87226),eO=a(4625),eb=a(56414),eR=a(4118),eP=a(18095);let eU={[C.c.AR]:[{localizedString:"Banco Credicoop",code:"BANCOCREDICOOP"},{localizedString:"Banco de la Naci\xf3n Argentina",code:"BANCODELANACIONARGEN"},{localizedString:"Banco Hipotecario",code:"BANCOHIPOTECARIO"},{localizedString:"Banco Ita\xfa Argentina",code:"BANCOITAUARGENTINA"},{localizedString:"Banco Macro",code:"BANCOMACRO"},{localizedString:"Banco Patagonia",code:"BANCOPATAGONIA"},{localizedString:"Banco Santander R\xedo",code:"BANCOSANTANDERRIO"},{localizedString:"Bank of the City of Buenos Aires",code:"BANKOFTHECITYOFBUENO"},{localizedString:"Bank of the Province of Buenos Aires",code:"BANKOFTHEPROVINCEOFB"},{localizedString:"BBVA Banco Franc\xe9s",code:"BBVABANCOFRANCES"},{localizedString:"Central Bank of Argentina",code:"CENTRALBANKOFARGENTI"},{localizedString:"Citibank Argentina",code:"CITIBANKARGENTINA"},{localizedString:"Grupo Financiero Galicia",code:"GRUPOFINANCIEROGALIC"},{localizedString:"HSBC Bank Argentina",code:"HSBCBANKARGENTINA"},{localizedString:"Municipal Bank of Rosario",code:"MUNICIPALBANKOFROSAR"},{localizedString:"New Bank of Santa Fe",code:"NEWBANKOFSANTAFE"},{localizedString:"Other",code:"NO_TYPE"}],[C.c.AT]:[{localizedString:"Adria Bank",code:"ADRIABANK"},{localizedString:"Allianz Investmentbank",code:"ALLIANZINVESTMENTBAN"},{localizedString:"Alpenbank",code:"ALPENBANK"},{localizedString:"American Express Bank Ltd",code:"AMERICANEXPRESSBANKL"},{localizedString:"Anglo Irish Bank",code:"ANGLOIRISHBANK"},{localizedString:"Austria Wirtschaftsservice Gesellschaft",code:"AUSTRIAWIRTSCHAFTSSE"},{localizedString:"Banco do Brasil",code:"BANCODOBRASIL"},{localizedString:"Bank Austria Creditanstalt",code:"BANKAUSTRIACREDITANS"},{localizedString:"Bank f\xfcr \xc4rzte und Freie Berufe",code:"BANKFURARZTEUNDFREIE"},{localizedString:"Bank f\xfcr Tirol und Vorarlberg",code:"BANKFURTIROLUNDVORAR"},{localizedString:"Bank Gutmann",code:"BANKGUTMANN"},{localizedString:"Bankhaus Carl Sp\xe4ngler & Co",code:"BANKHAUSCARLSPANGLER"},{localizedString:"Bankhaus Krentschker & Co",code:"BANKHAUSKRENTSCHKERC"},{localizedString:"Bankhaus Schelhammer & Schattera",code:"BANKHAUSSCHELHAMMERS"},{localizedString:"Bank Sal.Oppenheim jr. & Cie",code:"BANKSALOPPENHEIMJRCI"},{localizedString:"Bank Vontobel \xd6sterreich",code:"BANKVONTOBELOSTERREI"},{localizedString:"Bank Winter & Co",code:"BANKWINTERCO"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Raiffeisen Bank",code:"RAIFFEISENBANK"}],[C.c.AU]:[{localizedString:"AMP Bank Limited",code:"AMPBANKLIMITED"},{localizedString:"Australia and New Zealand Banking Group",code:"AUSTRALIAANDNEWZEALA"},{localizedString:"Auswide Bank",code:"AUSWIDEBANK"},{localizedString:"Bank Australia",code:"BANKAUSTRALIA"},{localizedString:"Bank of Melbourne",code:"BANKOFMELBOURNE"},{localizedString:"Bank of Queensland Limited",code:"BANKOFQUEENSLANDLIMI"},{localizedString:"Bank of Sydney",code:"BANKOFSYDNEY"},{localizedString:"Bank of Western Australia",code:"BANKOFWESTERNAUSTRAL"},{localizedString:"Bank SA",code:"BANKSA"},{localizedString:"BankVic",code:"BANKVIC"},{localizedString:"Bendigo and Adelaide Bank Limited",code:"BENDIGOANDADELAIDEBA"},{localizedString:"Beyond Bank Australia",code:"BEYONDBANKAUSTRALIA"},{localizedString:"Commonwealth Bank of Australia",code:"COMMONWEALTHBANKOFAU"},{localizedString:"Corporation (Australia) Limited",code:"CORPORATIONAUSTRALIA"},{localizedString:"Defence Bank",code:"DEFENCEBANK"},{localizedString:"Delphi Bank",code:"DELPHIBANK"},{localizedString:"G&C Mutual Bank",code:"GCMUTUALBANK"},{localizedString:"Heritage Bank",code:"HERITAGEBANK"},{localizedString:"Hume Bank",code:"HUMEBANK"},{localizedString:"IMB Bank",code:"IMBBANK"},{localizedString:"Macquarie Bank Limited",code:"MACQUARIEBANKLIMITED"},{localizedString:"Members Equity Bank Pty Limited",code:"MEMBERSEQUITYBANKPTY"},{localizedString:"MyState Bank",code:"MYSTATEBANK"},{localizedString:"National Australia Bank Limited",code:"NATIONALAUSTRALIABAN"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"P&N Bank",code:"PNBANK"},{localizedString:"Police Bank",code:"POLICEBANK"},{localizedString:"Queensland Teachers Mutual Bank (QTMB)",code:"QUEENSLANDTEACHERSMU"},{localizedString:"Rural Bank Limited",code:"RURALBANKLIMITED"},{localizedString:"St. George Bank Limited,",code:"STGEORGEBANKLIMITED"},{localizedString:"Suncorp-Metway Limited",code:"SUNCORPMETWAYLIMITED"},{localizedString:"Teachers Mutual Bank Limited",code:"TEACHERSMUTUALBANKLI"},{localizedString:"UBank, a division of National Australia Bank",code:"UBANKADIVISIONOFNATI"},{localizedString:"Victoria Teachers Mutual Bank",code:"VICTORIATEACHERSMUTU"},{localizedString:"Westpac Banking Corporation",code:"WESTPACBANKINGCORPOR"}],[C.c.BE]:[{localizedString:"Argenta",code:"ARGENTA"},{localizedString:"Attijariwafa Bank Europe Belgium",code:"ATTIJARIWAFABANKEURO"},{localizedString:"AXA Bank",code:"AXABANK"},{localizedString:"Banca Monte Paschi Belgio",code:"BANCAMONTEPASCHIBELG"},{localizedString:"BBVA B\xe9lgica",code:"BBVABELGICA"},{localizedString:"Belfius Banque",code:"BELFIUSBANQUE"},{localizedString:"Beobank",code:"BEOBANK"},{localizedString:"BKCP Banque",code:"BKCPBANQUE"},{localizedString:"BNP Paribas Fortis",code:"BNPPARIBASFORTIS"},{localizedString:"bpost bank",code:"BPOSTBANK"},{localizedString:"Crelan",code:"CRELAN"},{localizedString:"Europabank",code:"EUROPABANK"},{localizedString:"Hello Bank!",code:"HELLOBANK"},{localizedString:"ING Belgium",code:"INGBELGIUM"},{localizedString:"KBC Bank",code:"KBCBANK"},{localizedString:"Keytrade Bank",code:"KEYTRADEBANK"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Rabobank.be",code:"RABOBANKBE"},{localizedString:"Record Bank",code:"RECORDBANK"},{localizedString:"Santander Consumer Finance",code:"SANTANDERCONSUMERFIN"},{localizedString:"Triodos Bank Banque Triodos",code:"TRIODOSBANKBANQUETRI"},{localizedString:"VDK Spaarbank NV",code:"VDKSPAARBANKNV"}],[C.c.BR]:[{localizedString:"Banco Bradesco Financiamentos",code:"BANCOBRADESCOFINANCI"},{localizedString:"Banco do Brasil",code:"BANCODOBRASIL"},{localizedString:"Banco do Estado do Rio Grande do Sul S/A",code:"BANCODOESTADODORIOGR"},{localizedString:"Banco Ita\xfa",code:"BANCOITAU"},{localizedString:"Banco J Safra S/A",code:"BANCOJSAFRASA"},{localizedString:"Banco PanAmericano S/A",code:"BANCOPANAMERICANOSA"},{localizedString:"Banco Santander",code:"BANCOSANTANDER"},{localizedString:"Caixa Econ\xf4mica Federal",code:"CAIXAECONOMICAFEDERA"},{localizedString:"Citibank",code:"CITIBANK"},{localizedString:"HSBC",code:"HSBC"},{localizedString:"Other",code:"NO_TYPE"}],[C.c.CA]:[{localizedString:"B2B Bank",code:"B2BBANK"},{localizedString:"Bank of Montreal",code:"BANKOFMONTREAL"},{localizedString:"Bank of Nova Scotia",code:"BANKOFNOVASCOTIA"},{localizedString:"Bridgewater Bank",code:"BRIDGEWATERBANK"},{localizedString:"Canadian Imperial Bank of Commerce",code:"CANADIANIMPERIALBANK"},{localizedString:"Canadian Tire Bank",code:"CANADIANTIREBANK"},{localizedString:"Canadian Western Bank",code:"CANADIANWESTERNBANK"},{localizedString:"CFF Bank",code:"CFFBANK"},{localizedString:"Citizens Bank of Canada",code:"CITIZENSBANKOFCANADA"},{localizedString:"Continental Bank of Canada",code:"CONTINENTALBANKOFCAN"},{localizedString:"CS Alterna Bank",code:"CSALTERNABANK"},{localizedString:"DirectCash Bank",code:"DIRECTCASHBANK"},{localizedString:"Equitable Bank",code:"EQUITABLEBANK"},{localizedString:"First Nations Bank of Canada",code:"FIRSTNATIONSBANKOFCA"},{localizedString:"General Bank of Canada",code:"GENERALBANKOFCANADA"},{localizedString:"Hollis Canadian Bank",code:"HOLLISCANADIANBANK"},{localizedString:"HomEquity Bank",code:"HOMEQUITYBANK"},{localizedString:"Laurentian Bank of Canada",code:"LAURENTIANBANKOFCANA"},{localizedString:"Manulife Bank of Canada",code:"MANULIFEBANKOFCANADA"},{localizedString:"National Bank of Canada",code:"NATIONALBANKOFCANADA"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Pacific & Western Bank of Canada",code:"PACIFICWESTERNBANKOF"},{localizedString:"President's Choice Bank",code:"PRESIDENTSCHOICEBANK"},{localizedString:"RedBrick Bank",code:"REDBRICKBANK"},{localizedString:"Rogers Bank",code:"ROGERSBANK"},{localizedString:"Royal Bank of Canada",code:"ROYALBANKOFCANADA"},{localizedString:"Tangerine Bank",code:"TANGERINEBANK"},{localizedString:"Toronto-Dominion Bank",code:"TORONTODOMINIONBANK"},{localizedString:"Wealth One Bank of Canada",code:"WEALTHONEBANKOFCANAD"},{localizedString:"Zag Bank",code:"ZAGBANK"}],[C.c.CH]:[{localizedString:"AIG Private Bank",code:"AIGPRIVATEBANK"},{localizedString:"Amtsersparniskasse Thun",code:"AMTSERSPARNISKASSETH"},{localizedString:"Anker Bank",code:"ANKERBANK"},{localizedString:"Arab Bank Switzerland",code:"ARABBANKSWITZERLAND"},{localizedString:"Banca dello Stato del Cantone Ticino",code:"BANCADELLOSTATODELCA"},{localizedString:"Bank Ehinger",code:"BANKEHINGER"},{localizedString:"Bank for International Settlements (BIS)",code:"BANKFORINTERNATIONAL"},{localizedString:"Bank Leu",code:"BANKLEU"},{localizedString:"Bankredit - Banca di Credito e Commercio",code:"BANKREDITBANCADICRED"},{localizedString:"Bank von Ernst",code:"BANKVONERNST"},{localizedString:"Banque Cantonale Vaudoise (BCV)",code:"BANQUECANTONALEVAUDO"},{localizedString:"Banque Diamantaire Anversoise",code:"BANQUEDIAMANTAIREANV"},{localizedString:"Banque Edouard Constant",code:"BANQUEEDOUARDCONSTAN"},{localizedString:"Banque Nationale Suisse - Banca Nazionale Svizzera",code:"BANQUENATIONALESUISS"},{localizedString:"Banque Piguet & Cie S.A.",code:"BANQUEPIGUETCIESA"},{localizedString:"Banque SCS Alliance",code:"BANQUESCSALLIANCE"},{localizedString:"BEKBnet/BCBE",code:"BEKBNETBCBE"},{localizedString:"BHE - Bank f\xfcr Handel & Effekten",code:"BHEBANKFURHANDELEFFE"},{localizedString:"BNP - Banque Nationale de Paris",code:"BNPBANQUENATIONALEDE"},{localizedString:"BSI - Banca della Svizzera Italiana",code:"BSIBANCADELLASVIZZER"},{localizedString:"Clariden Bank",code:"CLARIDENBANK"},{localizedString:"Cr\xe9dit Lyonnais Suisse",code:"CREDITLYONNAISSUISSE"},{localizedString:"Credit Suisse",code:"CREDITSUISSE"},{localizedString:"Discount Bank Group (DBTC/DBSA)",code:"DISCOUNTBANKGROUPDBT"},{localizedString:"Habib Bank AG Z\xfcrich",code:"HABIBBANKAGZURICH"},{localizedString:"Hottinger & Cie",code:"HOTTINGERCIE"},{localizedString:"Maerki, Baumann & Co. AG, Privatbank",code:"MAERKIBAUMANNCOAGPRI"},{localizedString:"Migrosbank",code:"MIGROSBANK"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Pictet & Cie",code:"PICTETCIE"},{localizedString:"Raiffeisen Internet",code:"RAIFFEISENINTERNET"},{localizedString:"Royal Bank of Canada",code:"ROYALBANKOFCANADA"},{localizedString:"SBC Warburg Dillon Read (WDR)",code:"SBCWARBURGDILLONREAD"},{localizedString:"Schwyzer Kantonalbank",code:"SCHWYZERKANTONALBANK"},{localizedString:"Skandia Bank",code:"SKANDIABANK"},{localizedString:"Solothurner Bank SoBa",code:"SOLOTHURNERBANKSOBA"},{localizedString:"Sparkassa Berneck",code:"SPARKASSABERNECK"},{localizedString:"St. Gallische Kantonalbank",code:"STGALLISCHEKANTONALB"},{localizedString:"Swiss Bank Corporation",code:"SWISSBANKCORPORATION"},{localizedString:"Thurgauer Kantonalbank",code:"THURGAUERKANTONALBAN"},{localizedString:"Union Bank of Switzerland",code:"UNIONBANKOFSWITZERLA"},{localizedString:"Wegelin & Co. Privatbankiers",code:"WEGELINCOPRIVATBANKI"},{localizedString:"Zuger Kantonalbank",code:"ZUGERKANTONALBANK"},{localizedString:"Z\xfcrcher Kantonalbank",code:"ZURCHERKANTONALBANK"}],[C.c.CL]:[{localizedString:"Banco BICE",code:"BANCOBICE"},{localizedString:"Banco Bilbao Vizcaya Argentaria (BBVA)",code:"BANCOBILBAOVIZCAYAAR"},{localizedString:"Banco Consorcio",code:"BANCOCONSORCIO"},{localizedString:"Banco de Chile",code:"BANCODECHILE"},{localizedString:"Banco de Cr\xe9dito e Inversiones",code:"BANCODECREDITOEINVER"},{localizedString:"Banco del Desarrollo",code:"BANCODELDESARROLLO"},{localizedString:"Banco del Estado de Chile",code:"BANCODELESTADODECHIL"},{localizedString:"Banco Edwards-Citi",code:"BANCOEDWARDSCITI"},{localizedString:"Banco Falabella",code:"BANCOFALABELLA"},{localizedString:"Banco Internacional",code:"BANCOINTERNACIONAL"},{localizedString:"Banco Ita\xfa-Chile",code:"BANCOITAUCHILE"},{localizedString:"Banco Paris",code:"BANCOPARIS"},{localizedString:"Banco Penta",code:"BANCOPENTA"},{localizedString:"Banco Ripley",code:"BANCORIPLEY"},{localizedString:"Banco Santander Chile",code:"BANCOSANTANDERCHILE"},{localizedString:"Banco Security",code:"BANCOSECURITY"},{localizedString:"Central Bank of Chile",code:"CENTRALBANKOFCHILE"},{localizedString:"Corpbanca",code:"CORPBANCA"},{localizedString:"Deutsche Bank Chile",code:"DEUTSCHEBANKCHILE"},{localizedString:"HSBC Bank Chile",code:"HSBCBANKCHILE"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Rabobank",code:"RABOBANK"},{localizedString:"Scotiabank Sud Americano",code:"SCOTIABANKSUDAMERICA"}],[C.c.CO]:[{localizedString:"AVVillas",code:"AVVILLAS"},{localizedString:"Banagrario",code:"BANAGRARIO"},{localizedString:"Bancam\xeda",code:"BANCAMIA"},{localizedString:"Banco de Bogot\xe1",code:"BANCODEBOGOTA"},{localizedString:"Banco de la Rep\xfablica",code:"BANCODELAREPUBLICA"},{localizedString:"Banco de Occidente",code:"BANCODEOCCIDENTE"},{localizedString:"Bancolombia",code:"BANCOLOMBIA"},{localizedString:"Banco Popular",code:"BANCOPOPULAR"},{localizedString:"Banco Santander",code:"BANCOSANTANDER"},{localizedString:"BBVA Colombia",code:"BBVACOLOMBIA"},{localizedString:"Caja Social",code:"CAJASOCIAL"},{localizedString:"Citibank Colombia",code:"CITIBANKCOLOMBIA"},{localizedString:"Colmena",code:"COLMENA"},{localizedString:"Colpatria",code:"COLPATRIA"},{localizedString:"Davivienda",code:"DAVIVIENDA"},{localizedString:"GBN Sudameris",code:"GBNSUDAMERIS"},{localizedString:"Helm",code:"HELM"},{localizedString:"HSBC Colombia",code:"HSBCCOLOMBIA"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Procredit",code:"PROCREDIT"},{localizedString:"RBS Colombia",code:"RBSCOLOMBIA"}],[C.c.DE]:[{localizedString:"BayernLB",code:"BAYERNLB"},{localizedString:"Commerzbank",code:"COMMERZBANK"},{localizedString:"Deutsche Bank",code:"DEUTSCHEBANK"},{localizedString:"DZ Bank",code:"DZBANK"},{localizedString:"Eurohypo AG",code:"EUROHYPOAG"},{localizedString:"HSH Nordbank",code:"HSHNORDBANK"},{localizedString:"HVB Group (HypoVereinsbank)",code:"HVBGROUPHYPOVEREINSB"},{localizedString:"Hypo Real Estate Group (HRE Group)",code:"HYPOREALESTATEGROUPH"},{localizedString:"Kfw Bankgruppe",code:"KFWBANKGRUPPE"},{localizedString:"Landesbank Baden-W\xfcrttemberg",code:"LANDESBANKBADENWURTT"},{localizedString:"Landesbank Berlin (LBB)",code:"LANDESBANKBERLINLBB"},{localizedString:"Landesbank Hessen-Th\xfcringen (Helaba)",code:"LANDESBANKHESSENTHUR"},{localizedString:"Nord/LB (Norddeutsche Landesbank)",code:"NORDLBNORDDEUTSCHELA"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"N26",code:"NUMBERTWENTYSIX"},{localizedString:"Postbank AG",code:"POSTBANKAG"},{localizedString:"Sparkasse",code:"SPARKASSE"},{localizedString:"WGZ Bank (Westdeutsche Genossenschafts-Zentralbank)",code:"WGZBANKWESTDEUTSCHEG"}],[C.c.DK]:[{localizedString:"Alm Brand Bank",code:"ALMBRANDBANK"},{localizedString:"Arbejdernes Landsbank",code:"ARBEJERNESLANDSBANK"},{localizedString:"Danske Bank",code:"DANSKEBANK"},{localizedString:"FIH Erhversbank",code:"FIHERHVERSBANK"},{localizedString:"Jyske Bank",code:"JYSKEBANK"},{localizedString:"Nordea",code:"NORDEA"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Nykredit Bank",code:"NYKREDITBANK"},{localizedString:"Spar Nord Bank",code:"SPARNORDBANK"},{localizedString:"Syd Bank",code:"SYDBANK"},{localizedString:"Vestjysk Bank",code:"VESTJYSKBANK"}],[C.c.EC]:[{localizedString:"Banco Amazonas",code:"BANCOAMAZONAS"},{localizedString:"Banco Bolivariano",code:"BANCOBOLIVARIANO"},{localizedString:"Banco Capital",code:"BANCOCAPITAL"},{localizedString:"Banco Cofiec",code:"BANCOCOFIEC"},{localizedString:"Banco Comercial de Manab\xed",code:"BANCOCOMERCIALDEMANA"},{localizedString:"Banco Coopnacional",code:"BANCOCOOPNACIONAL"},{localizedString:"Banco de Guayaquil",code:"BANCODEGUAYAQUIL"},{localizedString:"Banco del Austro",code:"BANCODELAUSTRO"},{localizedString:"Banco Delbank",code:"BANCODELBANK"},{localizedString:"Banco del Litoral",code:"BANCODELLITORAL"},{localizedString:"Banco de Loja",code:"BANCODELOJA"},{localizedString:"Banco del Pac\xedfico",code:"BANCODELPACIFICO"},{localizedString:"Banco de Machala",code:"BANCODEMACHALA"},{localizedString:"Banco D-Miro",code:"BANCODMIRO"},{localizedString:"Banco Finca",code:"BANCOFINCA"},{localizedString:"Banco General Rumi\xf1ahui",code:"BANCOGENERALRUMINAHU"},{localizedString:"Banco Internacional",code:"BANCOINTERNACIONAL"},{localizedString:"Banco Pichincha",code:"BANCOPICHINCHA"},{localizedString:"Banco Prom\xe9rica",code:"BANCOPROMERICA"},{localizedString:"Banco Solidario",code:"BANCOSOLIDARIO"},{localizedString:"Banco Sudamericano",code:"BANCOSUDAMERICANO"},{localizedString:"Citibank Ecuador",code:"CITIBANKECUADOR"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"ProCredit Bank",code:"PROCREDITBANK"},{localizedString:"Produbanco",code:"PRODUBANCO"}],[C.c.ES]:[{localizedString:"Banca March",code:"BANCAMARCH"},{localizedString:"Banco Esfinge",code:"BANCOESFINGE"},{localizedString:"Banco Esp\xedritu Santo",code:"BANCOESPIRITUSANTO"},{localizedString:"Banco Fimestic",code:"BANCOFIMESTIC"},{localizedString:"Banco Inversi\xf3n",code:"BANCOINVERSION"},{localizedString:"Banco Popular Espa\xf1ol",code:"BANCOPOPULARESPANOL"},{localizedString:"Banco Sabadell",code:"BANCOSABADELL"},{localizedString:"Banco Santander",code:"BANCOSANTANDER"},{localizedString:"Bankia",code:"BANKIA"},{localizedString:"Bankinter",code:"BANKINTER"},{localizedString:"Bankpyme",code:"BANKPYME"},{localizedString:"Barclays Bank",code:"BARCLAYSBANK"},{localizedString:"BBVA",code:"BBVA"},{localizedString:"BCH Broker",code:"BCHBROKER"},{localizedString:"CaixaBank",code:"CAIXABANK"},{localizedString:"Citibank",code:"CITIBANK"},{localizedString:"Deutsche Bank",code:"DEUTSCHEBANK"},{localizedString:"E-Cortal",code:"ECORTAL"},{localizedString:"Fiare Banca \xc8tica p\xe1gina web de Fiare",code:"FIAREBANCAETICAPAGIN"},{localizedString:"Fibanc",code:"FIBANC"},{localizedString:"Fibane",code:"FIBANE"},{localizedString:"Ibercaja",code:"IBERCAJA"},{localizedString:"ING Direct",code:"INGDIRECT"},{localizedString:"InterCaja Social .ES",code:"INTERCAJASOCIALES"},{localizedString:"Merrill Lynch",code:"MERRILLLYNCH"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Openbank",code:"OPENBANK"},{localizedString:"Salomon Smith Barney",code:"SALOMONSMITHBARNEY"},{localizedString:"Schroders",code:"SCHRODERS"},{localizedString:"Triodos Bank",code:"TRIODOSBANK"},{localizedString:"UNO-e",code:"UNOE"}],[C.c.FI]:[{localizedString:"Aktia Savings Bank",code:"AKTIASAVINGSBANK"},{localizedString:"Bank of \xc5land",code:"BANKOFALAND"},{localizedString:"eQ Bank",code:"EQBANK"},{localizedString:"Evli Bank",code:"EVLIBANK"},{localizedString:"Helsinki OP Bank",code:"HELSINKIOPBANK"},{localizedString:"Kaupthing Bank",code:"KAUPTHINGBANK"},{localizedString:"Nordea Bank Finland",code:"NORDEABANKFINLAND"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"OP-Kotipankki",code:"OPKOTIPANKKI"},{localizedString:"Pohjola Bank",code:"POHJOLABANK"},{localizedString:"Sampo Bank",code:"SAMPOBANK"},{localizedString:"S-Bank",code:"SBANK"},{localizedString:"SEB Gyllenberg Private Bank",code:"SEBGYLLENBERGPRIVATE"},{localizedString:"Suomen AsuntoHypoPankki",code:"SUOMENASUNTOHYPOPANK"},{localizedString:"Tapiola Bank",code:"TAPIOLABANK"}],[C.c.FR]:[{localizedString:"Axa Banque",code:"AXA"},{localizedString:"Banque Populaire",code:"BANQPOPUL"},{localizedString:"La Banque Postale",code:"BANQPOSTA"},{localizedString:"Banque Casino",code:"BANQUECASINO"},{localizedString:"Banque de France",code:"BANQUEDEFRANCE"},{localizedString:"Barclays",code:"BARCLAYS"},{localizedString:"BforBank",code:"BFORBANK"},{localizedString:"BNP Paribas",code:"BNP"},{localizedString:"Boursorama Banque",code:"BOURSORAMA"},{localizedString:"BRED",code:"BRED"},{localizedString:"Caisse d'\xc9pargne",code:"CAISSEEPAR"},{localizedString:"Carrefour-Banque",code:"CARREFOURBANQUE"},{localizedString:"CIC",code:"CIC"},{localizedString:"Cr\xe9dit Mutuel de Bretagne",code:"CMB"},{localizedString:"Cr\xe9dit Mutuel Nord Europe",code:"CMNE"},{localizedString:"Cr\xe9dit Agricole",code:"CREDAGRIC"},{localizedString:"Cr\xe9dit Coop\xe9ratif",code:"CREDCOOPE"},{localizedString:"Cr\xe9dit Foncier",code:"CREDFONCI"},{localizedString:"Cr\xe9dit Mutuel",code:"CREDMUTUEL"},{localizedString:"Cr\xe9dit du Nord",code:"CREDNORD"},{localizedString:"Fortuneo Banque",code:"FORTUNEOBANQUE"},{localizedString:"Groupama Banque",code:"GROUPAMA"},{localizedString:"HSBC",code:"HSBC"},{localizedString:"ING Direct",code:"INGDIRECT"},{localizedString:"LCL",code:"LCL"},{localizedString:"Autre",code:"NO_TYPE"},{localizedString:"Soci\xe9t\xe9 G\xe9n\xe9rale",code:"SOGE"}],[C.c.GB]:[{localizedString:"Barclays Bank",code:"BARCLAYS"},{localizedString:"Coutts",code:"COUTTS"},{localizedString:"HBOS",code:"HBOS"},{localizedString:"HSBC",code:"HSBC"},{localizedString:"Lloyds Banking Group",code:"LLOYDS"},{localizedString:"NatWest",code:"NATWEST"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Royal Bank of Scotland (RBS)",code:"RBS"},{localizedString:"Santander",code:"SANTANDER"},{localizedString:"Standard Chartered",code:"STANDCHAR"},{localizedString:"Virgin Money",code:"VIRGINMONEY"},{localizedString:"Yorkshire Bank",code:"YORKSHIRE"},{localizedString:"Yorkshire Building Society",code:"YORKSHIREBS"}],[C.c.GT]:[{localizedString:"Agromercantil",code:"AGROMERCANTIL"},{localizedString:"Azteca Bank",code:"AZTECABANK"},{localizedString:"BAC Bank",code:"BACBANK"},{localizedString:"Bank of Antigua",code:"BANKOFANTIGUA"},{localizedString:"Bantrab Bank",code:"BANTRABBANK"},{localizedString:"Citi Bank",code:"CITIBANK"},{localizedString:"Credito Hipotecario Bank",code:"CREDITOHIPOTECARIOBA"},{localizedString:"De Credito Bank",code:"DECREDITOBANK"},{localizedString:"Ficohsa Bank",code:"FICOHSABANK"},{localizedString:"G&T Continental Bank",code:"GTCONTINENTALBANK"},{localizedString:"Industrial bank",code:"INDUSTRIALBANK"},{localizedString:"Inmobiliario Bank",code:"INMOBILIARIOBANK"},{localizedString:"Internacional Bank",code:"INTERNACIONALBANK"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Reformador Bank",code:"REFORMADORBANK"},{localizedString:"Vivibanco Bank",code:"VIVIBANCOBANK"}],[C.c.HK]:[{localizedString:"Bank of China",code:"BANKOFCHINA"},{localizedString:"Bank of East Asia, The",code:"BANKOFEASTASIATHE"},{localizedString:"China CITIC Bank International",code:"CHINACITICBANKINTERN"},{localizedString:"China Construction Bank",code:"CHINACONSTRUCTIONBAN"},{localizedString:"Chiyu Banking Corporation",code:"CHIYUBANKINGCORPORAT"},{localizedString:"Chong Hing Bank",code:"CHONGHINGBANK"},{localizedString:"Citibank",code:"CITIBANK"},{localizedString:"Dah Sing Bank",code:"DAHSINGBANK"},{localizedString:"DBS Bank",code:"DBSBANK"},{localizedString:"Fubon Bank",code:"FUBONBANK"},{localizedString:"Hang Seng Bank",code:"HANGSENGBANK"},{localizedString:"Hongkong and Shanghai Banking Corporation, The",code:"HONGKONGANDSHANGHAIB"},{localizedString:"Industrial and Commercial Bank of China",code:"INDUSTRIALANDCOMMERC"},{localizedString:"Nanyang Commercial Bank",code:"NANYANGCOMMERCIALBAN"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"OCBC Wing Hang Bank",code:"OCBCWINGHANGBANK"},{localizedString:"Public Bank",code:"PUBLICBANK"},{localizedString:"Shanghai Commercial Bank",code:"SHANGHAICOMMERCIALBA"},{localizedString:"Standard Chartered Bank",code:"STANDARDCHARTEREDBAN"},{localizedString:"Tai Sang Bank",code:"TAISANGBANK"},{localizedString:"Tai Yau Bank",code:"TAIYAUBANK"},{localizedString:"Wing Lung Bank",code:"WINGLUNGBANK"}],[C.c.IE]:[{localizedString:"ACC Bank",code:"ACCBANK"},{localizedString:"Allied Irish Banks",code:"ALLIEDIRISHBANKS"},{localizedString:"Anglo Irish Bank",code:"ANGLOIRISHBANK"},{localizedString:"Bank of Ireland",code:"BANKOFIRELAND"},{localizedString:"Barclays Bank Ireland",code:"BARCLAYSBANKIRELAND"},{localizedString:"Bear Stearns Bank",code:"BEARSTEARNSBANK"},{localizedString:"Capmark Bank Europe",code:"CAPMARKBANKEUROPE"},{localizedString:"Citibank Europe",code:"CITIBANKEUROPE"},{localizedString:"Fortis Prime Fund Solutions Bank",code:"FORTISPRIMEFUNDSOLUT"},{localizedString:"Goldman Sachs Bank",code:"GOLDMANSACHSBANK"},{localizedString:"Goldman Sachs Private Bank",code:"GOLDMANSACHSPRIVATEB"},{localizedString:"Helaba Dublin Landesbank Hessen-Th\xfcringen International",code:"HELABADUBLINLANDESBA"},{localizedString:"Hewlett-Packard International Bank",code:"HEWLETTPACKARDINTERN"},{localizedString:"Hypo Public Finance Bank",code:"HYPOPUBLICFINANCEBAN"},{localizedString:"Intesa Sanpaolo Bank Ireland",code:"INTESASANPAOLOBANKIR"},{localizedString:"Irish Life & Permanent",code:"IRISHLIFEPERMANENT"},{localizedString:"JP Morgan Bank",code:"JPMORGANBANK"},{localizedString:"KBC Bank Ireland",code:"KBCBANKIRELAND"},{localizedString:"LGT Bank",code:"LGTBANK"},{localizedString:"Merrill Lynch International Bank",code:"MERRILLLYNCHINTERNAT"},{localizedString:"Naspa Dublin",code:"NASPADUBLIN"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Pfizer International Bank Europe",code:"PFIZERINTERNATIONALB"},{localizedString:"PFPC Bank",code:"PFPCBANK"}],[C.c.IN]:[{localizedString:"ABN AMRO India",code:"ABNAMROINDIA"},{localizedString:"Abu Dhabi Commercial Bank India",code:"ABUDHABICOMMERCIALBA"},{localizedString:"Allahabad Bank",code:"ALLAHABADBANK"},{localizedString:"Andhra Bank",code:"ANDHRABANK"},{localizedString:"Axis Bank Limited",code:"AXISBANKLIMITED"},{localizedString:"Canara Bank",code:"CANARABANK"},{localizedString:"Central Bank of India",code:"CENTRALBANKOFINDIA"},{localizedString:"Centurion Bank of Punjab",code:"CENTURIONBANKOFPUNJA"},{localizedString:"Citibank India",code:"CITIBANKINDIA"},{localizedString:"Corporation Bank",code:"CORPORATIONBANK"},{localizedString:"DCB (Development Credit Bank Ltd)",code:"DCBDEVELOPMENTCREDIT"},{localizedString:"Dena Bank",code:"DENABANK"},{localizedString:"Deutsche Bank",code:"DEUTSCHEBANK"},{localizedString:"Guardian Souharda Sahakari Bank Niyamita",code:"GUARDIANSOUHARDASAHA"},{localizedString:"HDFC Bank",code:"HDFCBANK"},{localizedString:"IDBI Bank",code:"IDBIBANK"},{localizedString:"Indian Bank",code:"INDIANBANK"},{localizedString:"Indian Overseas Bank",code:"INDIANOVERSEASBANK"},{localizedString:"IndusInd Bank Ltd",code:"INDUSINDBANKLTD"},{localizedString:"ING Vysya Bank",code:"INGVYSYABANK"},{localizedString:"Maharshtra Bank",code:"MAHARSHTRABANK"},{localizedString:"Mandvi Bank",code:"MANDVIBANK"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Oriental Bank of Commerce",code:"ORIENTALBANKOFCOMMER"},{localizedString:"Saraswat Bank",code:"SARASWATBANK"},{localizedString:"South Indian Bank",code:"SOUTHINDIANBANK"},{localizedString:"Standard Chartered Bank",code:"STANDARDCHARTEREDBAN"},{localizedString:"State Bank of Hyderabad",code:"STATEBANKOFHYDERABAD"},{localizedString:"State Bank of Saurashtra",code:"STATEBANKOFSAURASHTR"},{localizedString:"Syndicate Bank",code:"SYNDICATEBANK"},{localizedString:"The Federal Bank Ltd",code:"THEFEDERALBANKLTD"},{localizedString:"UCO Bank",code:"UCOBANK"},{localizedString:"Union Bank of India",code:"UNIONBANKOFINDIA"}],[C.c.IT]:[{localizedString:"Banca Carige",code:"BANCACARIGE"},{localizedString:"Banca Pop. Milano",code:"BANCAPOPMILANO"},{localizedString:"Banco Popolare",code:"BANCOPOPOLARE"},{localizedString:"B Monte Paschi Siena",code:"BMONTEPASCHISIENA"},{localizedString:"Credito Emiliano",code:"CREDITOEMILIANO"},{localizedString:"Intesa Sanpaolo",code:"INTESASANPAOLO"},{localizedString:"Mediobanca",code:"MEDIOBANCA"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Ubi Banca",code:"UBIBANCA"},{localizedString:"Unicredit - Capitalia",code:"UNICREDITCAPITALIA"}],[C.c.JP]:[{localizedString:"Chiba Kgy Bank",code:"CHIBAKOGYOBANK"},{localizedString:"Mitsubishi UFJ Financial Group",code:"MITSUBISHIUFJFINANCI"},{localizedString:"Mitsubishi UFJ Trust and Banking Corporation",code:"MITSUBISHIUFJTRUSTAN"},{localizedString:"Mizuho Bank",code:"MIZUHOBANK"},{localizedString:"Mizuho Corporate Bank",code:"MIZUHOCORPORATEBANK"},{localizedString:"Mizuho Financial Group",code:"MIZUHOFINANCIALGROUP"},{localizedString:"Mizuho Trust & Banking Co.",code:"MIZUHOTRUSTBANKINGCO"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Sumitomo Mitsui Banking Corporation",code:"SUMITOMOMITSUIBANKIN"},{localizedString:"Sumitomo Mitsui Financial Group",code:"SUMITOMOMITSUIFINANC"},{localizedString:"The Bank of Tokyo-Mitsubishi UFJ",code:"THEBANKOFTOKYOMITSUB"},{localizedString:"The Master Trust Bank of Japan",code:"THEMASTERTRUSTBANKOF"},{localizedString:"The Sensh Bank",code:"THESENSHUBANK"},{localizedString:"Trust & Custody Services Bank",code:"TRUSTCUSTODYSERVICES"}],[C.c.LU]:[{localizedString:"Banque et Caisse d'Epargne de l'Etat, Luxembourg (BCEE)",code:"BANQUEETCAISSEDEPARG"},{localizedString:"Banque G\xe9n\xe9rale du Luxembourg",code:"BANQUEGENERALEDULUXE"},{localizedString:"Banque IPPA et Associes Luxembourg",code:"BANQUEIPPAETASSOCIES"},{localizedString:"Banque UCL",code:"BANQUEUCL"},{localizedString:"Die Sparkasse Bremen",code:"DIESPARKASSEBREMEN"},{localizedString:"KBL",code:"KBL"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Robeco Bank",code:"ROBECOBANK"},{localizedString:"SGZ-Bank International",code:"SGZBANKINTERNATIONAL"},{localizedString:"WestLB International",code:"WESTLBINTERNATIONAL"}],[C.c.MX]:[{localizedString:"Banamex",code:"BANAMEX"},{localizedString:"Banca Afirme",code:"BANCAAFIRME"},{localizedString:"Banco Azteca",code:"BANCOAZTECA"},{localizedString:"Banco del Bajio",code:"BANCODELBAJIO"},{localizedString:"Banco J.P. Morgan",code:"BANCOJPMORGAN"},{localizedString:"Bank of America Mexico",code:"BANKOFAMERICAMEXICO"},{localizedString:"Banorte",code:"BANORTE"},{localizedString:"BanRegio",code:"BANREGIO"},{localizedString:"BBVA Bancomer",code:"BBVABANCOMER"},{localizedString:"Deutsche Bank Mexico",code:"DEUTSCHEBANKMEXICO"},{localizedString:"HSBC Mexico",code:"HSBCMEXICO"},{localizedString:"Inbursa",code:"INBURSA"},{localizedString:"ING Bank Mexico",code:"INGBANKMEXICO"},{localizedString:"Interacciones",code:"INTERACCIONES"},{localizedString:"Invex Controladora",code:"INVEXCONTROLADORA"},{localizedString:"Ixe Banco",code:"IXEBANCO"},{localizedString:"Mifel",code:"MIFEL"},{localizedString:"Monex",code:"MONEX"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Santander Mexico",code:"SANTANDERMEXICO"},{localizedString:"Scotiabank Inverlat",code:"SCOTIABANKINVERLAT"}],[C.c.NL]:[{localizedString:"ABN Amro",code:"ABNAMRO"},{localizedString:"Amsterdam Trade Bank",code:"AMSTERDAMTRADEBANK"},{localizedString:"ASN Bank",code:"ASNBANK"},{localizedString:"Bank Mendes Gans",code:"BANKMENDESGANS"},{localizedString:"Bank Nederlandse Gemeenten",code:"BANKNEDERLANDSEGEMEE"},{localizedString:"BinckBank",code:"BINCKBANK"},{localizedString:"Bunq",code:"BUNQ"},{localizedString:"Credit Europe Bank",code:"CREDITEUROPEBANK"},{localizedString:"Demir Halk Bank",code:"DEMIRHALKBANK"},{localizedString:"Friesland Bank",code:"FRIESLANDBANK"},{localizedString:"GE Artesia Bank",code:"GEARTESIABANK"},{localizedString:"ING Group",code:"INGGROUP"},{localizedString:"Kempen & Co",code:"KEMPENCO"},{localizedString:"Nederlandse Waterschapsbank",code:"NEDERLANDSEWATERSCHA"},{localizedString:"Netherlands Development Finance Company",code:"NETHERLANDSDEVELOPME"},{localizedString:"NIBC Bank",code:"NIBCBANK"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Rabobank",code:"RABOBANK"},{localizedString:"SNS Bank",code:"SNSBANK"},{localizedString:"Triodos Bank",code:"TRIODOSBANK"},{localizedString:"Van Lanschot",code:"VANLANSCHOT"}],[C.c.NO]:[{localizedString:"Bolig- og N\xe6ringsbanken",code:"BOLIGOGNAERINGSBANKE"},{localizedString:"Cresco",code:"CRESCO"},{localizedString:"DnB NOR Bank",code:"DNBNORBANK"},{localizedString:"Fokus Bank",code:"FOKUSBANK"},{localizedString:"Landkreditt Bank",code:"LANDKREDITTBANK"},{localizedString:"Netfonds Bank",code:"NETFONDSBANK"},{localizedString:"Nordea Bank Norge",code:"NORDEABANKNORGE"},{localizedString:"Nordlandsbanken",code:"NORDLANDSBANKEN"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Pareto Bank",code:"PARETOBANK"},{localizedString:"Santander Consumer Bank",code:"SANTANDERCONSUMERBAN"},{localizedString:"SEB Privatbanken",code:"SEBPRIVATBANKEN"},{localizedString:"Storebrand Bank",code:"STOREBRANDBANK"},{localizedString:"Verdibanken",code:"VERDIBANKEN"},{localizedString:"Voss Veksel- og Landmandsbank",code:"VOSSVEKSELOGLANDMAND"},{localizedString:"yA Bank",code:"YABANK"}],[C.c.NZ]:[{localizedString:"ANZ Bank of New Zealand Limited",code:"ANZBANKOFNEWZEALANDL"},{localizedString:"ASB Bank Limited",code:"ASBBANKLIMITED"},{localizedString:"Australia and New Zealand Banking Group",code:"AUSTRALIAANDNEWZEALA"},{localizedString:"Bank of Baroda (New Zealand) Limited",code:"BANKOFBARODANEWZEALA"},{localizedString:"Bank of China (New Zealand) Limited",code:"BANKOFCHINANEWZEALAN"},{localizedString:"Bank of India (New Zealand) Limited",code:"BANKOFINDIANEWZEALAN"},{localizedString:"Bank of New Zealand",code:"BANKOFNEWZEALAND"},{localizedString:"China Construction Bank",code:"CHINACONSTRUCTIONBAN"},{localizedString:"Citibank N.A.",code:"CITIBANKNA"},{localizedString:"Commonwealth Bank of Australia",code:"COMMONWEALTHBANKOFAU"},{localizedString:"Deutsche Bank AG",code:"DEUTSCHEBANKAG"},{localizedString:"Heartland Bank Limited",code:"HEARTLANDBANKLIMITED"},{localizedString:"ICBC",code:"ICBC"},{localizedString:"JPMorgan Chase Bank N.A.",code:"JPMORGANCHASEBANKNA"},{localizedString:"Kiwibank Limited",code:"KIWIBANKLIMITED"},{localizedString:"Kookmin Bank",code:"KOOKMINBANK"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Rabobank Nederland",code:"RABOBANKNEDERLAND"},{localizedString:"Rabobank New Zealand Limited",code:"RABOBANKNEWZEALANDLI"},{localizedString:"Southland Building Society",code:"SOUTHLANDBUILDINGSOC"},{localizedString:"The Bank of Tokyo-Mitsubishi UFJ",code:"THEBANKOFTOKYOMITSUB"},{localizedString:"The Co-operative Bank Limited",code:"THECOOPERATIVEBANKLI"},{localizedString:"The Hongkong and Shanghai Banking Corp",code:"THEHONGKONGANDSHANGH"},{localizedString:"TSB Bank Limited",code:"TSBBANKLIMITED"},{localizedString:"Westpac Banking Corporation",code:"WESTPACBANKINGCORPOR"},{localizedString:"Westpac New Zealand Limited",code:"WESTPACNEWZEALANDLIM"}],[C.c.PE]:[{localizedString:"Agrobanco",code:"AGROBANCO"},{localizedString:"Banco Azteca",code:"BANCOAZTECA"},{localizedString:"Banco Central de Reserva del Per\xfa",code:"BANCOCENTRALDERESERV"},{localizedString:"Banco de Comercio",code:"BANCODECOMERCIO"},{localizedString:"Banco del Trabajo",code:"BANCODELTRABAJO"},{localizedString:"Banco de Materiales",code:"BANCODEMATERIALES"},{localizedString:"Banco Falabella",code:"BANCOFALABELLA"},{localizedString:"Banco Financiero",code:"BANCOFINANCIERO"},{localizedString:"Banco Interamericano de Finanzas",code:"BANCOINTERAMERICANOD"},{localizedString:"Banco Ripley",code:"BANCORIPLEY"},{localizedString:"BBVA",code:"BBVA"},{localizedString:"BCP",code:"BCP"},{localizedString:"Citibank",code:"CITIBANK"},{localizedString:"Deutsche Bank",code:"DEUTSCHEBANK"},{localizedString:"HSBC",code:"HSBC"},{localizedString:"Interbank",code:"INTERBANK"},{localizedString:"Mibanco",code:"MIBANCO"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Santander",code:"SANTANDER"},{localizedString:"Scotiabank",code:"SCOTIABANK"},{localizedString:"Standard Chartered",code:"STANDARDCHARTERED"}],[C.c.PH]:[{localizedString:"Al-Amanah Islamic Investment Bank of the Philippines",code:"ALAMANAHISLAMICINVES"},{localizedString:"Asia United Bank",code:"ASIAUNITEDBANK"},{localizedString:"Australia and New Zealand Banking Group",code:"AUSTRALIAANDNEWZEALA"},{localizedString:"Bangkok Bank",code:"BANGKOKBANK"},{localizedString:"Bank of America, N.A.",code:"BANKOFAMERICANA"},{localizedString:"Bank of China",code:"BANKOFCHINA"},{localizedString:"Bank of Commerce",code:"BANKOFCOMMERCE"},{localizedString:"Bank of the Philippine Islands",code:"BANKOFTHEPHILIPPINEI"},{localizedString:"BDO Private Bank",code:"BDOPRIVATEBANK"},{localizedString:"BDO Unibank",code:"BDOUNIBANK"},{localizedString:"Chinabank",code:"CHINABANK"},{localizedString:"Citibank",code:"CITIBANK"},{localizedString:"CTBC Bank",code:"CTBCBANK"},{localizedString:"Deutsche Bank",code:"DEUTSCHEBANK"},{localizedString:"Development Bank of the Philippines",code:"DEVELOPMENTBANKOFTHE"},{localizedString:"EastWest Bank",code:"EASTWESTBANK"},{localizedString:"ING Group",code:"INGGROUP"},{localizedString:"JPMorgan Chase",code:"JPMORGANCHASE"},{localizedString:"Land Bank of the Philippines",code:"LANDBANKOFTHEPHILIPP"},{localizedString:"Maybank Philippines, Inc.",code:"MAYBANKPHILIPPINESIN"},{localizedString:"Mega International Commercial Bank",code:"MEGAINTERNATIONALCOM"},{localizedString:"Metropolitan Bank and Trust Company",code:"METROPOLITANBANKANDT"},{localizedString:"Mizuho Bank, Ltd.",code:"MIZUHOBANKLTD"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Philippine Bank of Communications",code:"PHILIPPINEBANKOFCOMM"},{localizedString:"Philippine National Bank",code:"PHILIPPINENATIONALBA"},{localizedString:"Philippine Veterans Bank",code:"PHILIPPINEVETERANSBA"},{localizedString:"Philtrust Bank",code:"PHILTRUSTBANK"},{localizedString:"Rizal Commercial Banking Corporation",code:"RIZALCOMMERCIALBANKI"},{localizedString:"Robinsons Bank",code:"ROBINSONSBANK"},{localizedString:"Security Bank",code:"SECURITYBANK"},{localizedString:"Standard Chartered Bank",code:"STANDARDCHARTEREDBAN"},{localizedString:"The Bank of Tokyo-Mitsubishi UFJ, Ltd.",code:"THEBANKOFTOKYOMITSUB"},{localizedString:"The Hongkong and Shanghai Banking Corporation",code:"THEHONGKONGANDSHANGH"},{localizedString:"Union Bank of the Philippines",code:"UNIONBANKOFTHEPHILIP"},{localizedString:"United Coconut Planters Bank",code:"UNITEDCOCONUTPLANTER"}],[C.c.PT]:[{localizedString:"Atlantico - Banco Portugu\xeas do Atl\xe2ntico",code:"ATLANTICOBANCOPORTUG"},{localizedString:"Banco 7",code:"BANCO7"},{localizedString:"Banco BPI",code:"BANCOBPI"},{localizedString:"Banco Comercial Portugu\xeas",code:"BANCOCOMERCIALPORTUG"},{localizedString:"Banco de Portugal",code:"BANCODEPORTUGAL"},{localizedString:"Banco Espirito Santo",code:"BANCOESPIRITOSANTO"},{localizedString:"Banco Internacional de Cr\xe9dito, S.A.",code:"BANCOINTERNACIONALDE"},{localizedString:"Banco Mello",code:"BANCOMELLO"},{localizedString:"Banif - Banco Internacional do Funchal",code:"BANIFBANCOINTERNACIO"},{localizedString:"Barclays Netbanking Portugal",code:"BARCLAYSNETBANKINGPO"},{localizedString:"Caixa Geral de Dep\xf3sitos",code:"CAIXAGERALDEDEPOSITO"},{localizedString:"Cisf - Banco de Investimento, S.A.",code:"CISFBANCODEINVESTIME"},{localizedString:"Other",code:"NO_TYPE"}],[C.c.SE]:[{localizedString:"ABN AMRO Bank Sweden",code:"ABNAMROBANKSWEDEN"},{localizedString:"First Baltic Savings",code:"FIRSTBALTICSAVINGS"},{localizedString:"F\xf6reningsSparbanken (Swedbank)",code:"FORENINGSSPARBANKENS"},{localizedString:"JP Bank",code:"JPBANK"},{localizedString:"Nordbanken",code:"NORDBANKEN"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"\xd6stg\xf6ta Enskilda Bank",code:"OSTGOTAENSKILDABANK"},{localizedString:"Skandia Banken",code:"SKANDIABANKEN"},{localizedString:"Skandinaviska Enskilda Banken",code:"SKANDINAVISKAENSKILD"},{localizedString:"Sparbanken Sverige - Swedbank",code:"SPARBANKENSVERIGESWE"},{localizedString:"Stadshypotek",code:"STADSHYPOTEK"},{localizedString:"Svenska Handelsbanken-SHB",code:"SVENSKAHANDELSBANKEN"},{localizedString:"Sveriges Riksbank",code:"SVERIGESRIKSBANK"},{localizedString:"Trygg Hansa",code:"TRYGGHANSA"},{localizedString:"Westra Wermlands Sparbank",code:"WESTRAWERMLANDSSPARB"}],[C.c.SG]:[{localizedString:"Bank of America",code:"BANKOFAMERICA"},{localizedString:"Barclays bank",code:"BARCLAYSBANK"},{localizedString:"Citibank",code:"CITIBANK"},{localizedString:"Developmental Bank of Singapore",code:"DEVELOPMENTALBANKOFS"},{localizedString:"HSBC",code:"HSBC"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"OCBC Bank",code:"OCBCBANK"},{localizedString:"Post Office Savings Bank",code:"POSTOFFICESAVINGSBAN"},{localizedString:"Standard Chartered Bank",code:"STANDARDCHARTEREDBAN"},{localizedString:"State Bank of India",code:"STATEBANKOFINDIA"},{localizedString:"United Overseas Bank",code:"UNITEDOVERSEASBANK"}],[C.c.US]:[{localizedString:"Ally Bank",code:"ALLY"},{localizedString:"American Express",code:"AMERICANEXPRESS"},{localizedString:"Associated Bank",code:"ASSOCIATED"},{localizedString:"Bank of the West",code:"BANKWEST"},{localizedString:"Barclays Bank",code:"BARCLAYS"},{localizedString:"BMO Harris Bank",code:"BMO"},{localizedString:"Bank of America",code:"BOA"},{localizedString:"Branch Banking and Trust Company",code:"BRANCH"},{localizedString:"Capital One",code:"CAPITALONE"},{localizedString:"Charles Schwab Bank",code:"CHARSCHWA"},{localizedString:"Chase Bank USA",code:"CHASE"},{localizedString:"Citibank",code:"CITIBANK"},{localizedString:"Citizens Bank of Pennsylvania",code:"CITIZENS"},{localizedString:"City National Bank",code:"CITYNATIONAL"},{localizedString:"Compass Bank",code:"COMPASS"},{localizedString:"CU Hawaii",code:"CUHAWAII"},{localizedString:"Discover Bank",code:"DISCOVER"},{localizedString:"E-Trade Bank",code:"ETRADE"},{localizedString:"Fifth Third Bank",code:"FIFTHTHIRD"},{localizedString:"First-Citizens Bank and Trust Company",code:"FIRSTCITIZENS"},{localizedString:"Fortune Bank",code:"FORTUNEBANK"},{localizedString:"Harris National Association",code:"HARRIS"},{localizedString:"HSBC Bank USA",code:"HSBC"},{localizedString:"Hudson City Savings Bank",code:"HUDSONCITY"},{localizedString:"The Huntington National Bank",code:"HUNTINGTON"},{localizedString:"ING Bank, fsb",code:"INGBANK"},{localizedString:"JPMorgan Chase Bank",code:"JPMORGAN"},{localizedString:"Keybank",code:"KEYBANK"},{localizedString:"Manufacturers and Traders Trust Company",code:"MANUFACTUR"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"New York Community Bank",code:"NYCOMMUNITY"},{localizedString:"The Bank of New York Mellon",code:"NYMELLON"},{localizedString:"PNC Bank",code:"PNC"},{localizedString:"Banco Popular de Puerto Rico",code:"PUERTORICO"},{localizedString:"RBC Bank",code:"RBC"},{localizedString:"RBS Citizens",code:"RBS"},{localizedString:"Regions Bank",code:"REGIONS"},{localizedString:"Sovereign Bank",code:"SOVEREIGN"},{localizedString:"State Street Bank and Trust Co.",code:"STATESTREET"},{localizedString:"SunTrust Bank",code:"SUNTRUST"},{localizedString:"Silicon Valley Bank",code:"SVB"},{localizedString:"Synovus Bank",code:"SYNOVUS"},{localizedString:"TD Bank",code:"TDBANK"},{localizedString:"UBS Bank",code:"UBS"},{localizedString:"Union Bank",code:"UNION"},{localizedString:"USAA Federal Savings Bank",code:"USAAFEDERAL"},{localizedString:"U.S. Bank",code:"USBANK"},{localizedString:"Wells Fargo",code:"WELLSFARGO"}],[C.c.VE]:[{localizedString:"100% Banco",code:"100BANCO"},{localizedString:"Bancaribe",code:"BANCARIBE"},{localizedString:"Banco Bicentenario",code:"BANCOBICENTENARIO"},{localizedString:"Banco de Venezuela",code:"BANCODEVENEZUELA"},{localizedString:"Banco Industrial de Venezuela",code:"BANCOINDUSTRIALDEVEN"},{localizedString:"Banco Mercantil",code:"BANCOMERCANTIL"},{localizedString:"Banco Nacional de Cr\xe9dito",code:"BANCONACIONALDECREDI"},{localizedString:"Banco Occidental de Descuento",code:"BANCOOCCIDENTALDEDES"},{localizedString:"Banco Venezolano de Cr\xe9dito",code:"BANCOVENEZOLANODECRE"},{localizedString:"Bandes",code:"BANDES"},{localizedString:"Banesco",code:"BANESCO"},{localizedString:"BBVA Provincial",code:"BBVAPROVINCIAL"},{localizedString:"Central Bank of Venezuela",code:"CENTRALBANKOFVENEZUE"},{localizedString:"Fondo Com\xfan",code:"FONDOCOMUN"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Sofitasa",code:"SOFITASA"},{localizedString:"Women's Development Bank",code:"WOMENSDEVELOPMENTBAN"}],[C.c.ZA]:[{localizedString:"Absa",code:"ABSA"},{localizedString:"Capitec Banking Group",code:"CAPITECBANKINGGROUP"},{localizedString:"FNB",code:"FNB"},{localizedString:"Investec Bank",code:"INVESTECBANK"},{localizedString:"Nedbank",code:"NEDBANK"},{localizedString:"Other",code:"NO_TYPE"},{localizedString:"Standard Bank",code:"STANDARDBANK"}]};var eD=a(82199)},4625:function(e,t,a){a.d(t,{T:()=>s});var n=a(36503),i=a(18095),o=a(56414),r=a(4118);let s=(0,n.Q)({name:"passwordHistory",commands:{},events:{},queries:{getPasswordGenerationSettings:i.$,getPasswordHistory:o.mD,hasPasswordHistory:r.e}})},18095:function(e,t,a){a.d(t,{$:()=>o});var n=a(45429),i=a(15021);class o extends(0,n.k)({scope:i.F.User,useCache:!0}){}},56414:function(e,t,a){a.d(t,{mD:()=>d,me:()=>s,rf:()=>c});var n,i,o=a(45429),r=a(15021),s=((n={}).Credential="credential",n.Generated="generated",n),c=((i={}).All="all",i.Saved="saved",i.Unsaved="unsaved",i);class d extends(0,o.k)({scope:r.F.User}){}},4118:function(e,t,a){a.d(t,{e:()=>o});var n=a(45429),i=a(15021);class o extends(0,n.k)({scope:i.F.User}){}},63365:function(e,t,a){a.d(t,{Z:()=>s});var n=a(36503),i=a(48467),o=a(83352),r=a(4073);let s=(0,n.Q)({name:"passwordLimit",commands:{},events:{},queries:{canUserAddNewPassword:i.K,getPasswordLimitStatus:o.r,isFreeUserFrozen:r.k}})},69393:function(e,t,a){a.d(t,{t:()=>n});let n={B2CRestrictPasswordFreePlan:"b2c_web_restrict_password_free_plan_dev",B2CFreeUserFrozenState:"b2c_web_free_users_frozen_state",B2CPreventCopy:"b2c_ecommerce_web_restrict_free_copy_passwords"}},48467:function(e,t,a){a.d(t,{K:()=>o});var n=a(45429),i=a(15021);class o extends(0,n.k)({scope:i.F.User}){}},83352:function(e,t,a){a.d(t,{r:()=>o});var n=a(45429),i=a(15021);class o extends(0,n.k)({scope:i.F.User}){}},4073:function(e,t,a){a.d(t,{k:()=>o});var n=a(45429),i=a(15021);class o extends(0,n.k)({scope:i.F.User,useCache:!0}){}},57429:function(e,t,a){a.d(t,{e:()=>g});var n=a(36503),i=a(97903),o=a(4767),r=a(33522),s=a(62274),c=a(78517),d=a(77593),l=a(58959),u=a(98323),m=a(84864);let g=(0,n.Q)({name:"secureFiles",commands:{deleteSecureFile:o._8,downloadSecureFile:r.J,fetchSecureFileQuota:s.S,attachToVaultItem:c.b,removeTemporaryAttachment:i.E,removeAllTemporaryAttachment:d.j},events:{},queries:{getSecureFileProgress:l.J,getSecureFileQuota:u.l,getTemporarySecureFileAttachments:m.b}})},95538:function(e,t,a){a.d(t,{v:()=>o});var n=a(46266),i=a(57429);class o extends(0,n.E)(i.e){}(0,n.K)(i.e,o)},78517:function(e,t,a){a.d(t,{b:()=>o});var n=a(66122),i=a(15021);class o extends(0,n.g)({scope:i.F.User}){}},4767:function(e,t,a){a.d(t,{Kg:()=>c,_8:()=>l,j6:()=>s,qC:()=>d});var n,i=a(66122),o=a(15021),r=a(96272),s=((n={}).NO_REMOTE_FILE="no-remote-file",n.SECURE_FILE_QUOTA_UPDATE="secure-file-quota-update",n);let c=(0,r.Vj)("no-remote-file","The user doesn't have access to this secure file or it has already been deleted."),d=(0,r.Vj)("secure-file-quota-update","The secure file quota state update failed.");class l extends(0,i.g)({scope:o.F.User}){}},33522:function(e,t,a){a.d(t,{J:()=>o});var n=a(66122),i=a(15021);class o extends(0,n.g)({scope:i.F.User}){}},62274:function(e,t,a){a.d(t,{S:()=>o});var n=a(66122),i=a(15021);class o extends(0,n.g)({scope:i.F.User}){}},77593:function(e,t,a){a.d(t,{j:()=>o});var n=a(66122),i=a(15021);class o extends(0,n.g)({scope:i.F.User}){}},97903:function(e,t,a){a.d(t,{E:()=>o});var n=a(66122),i=a(15021);class o extends(0,n.g)({scope:i.F.User}){}},20709:function(e,t,a){a.d(t,{I:()=>n,T:()=>i});let n="UPLOAD_SECURE_FILE_KEY",i=0xf00000},67468:function(e,t,a){a.d(t,{$t:()=>s,Jd:()=>d,Jn:()=>m,Qm:()=>r,TW:()=>l,Wr:()=>c,fK:()=>g,sd:()=>o,xy:()=>u});var n,i=a(96272),o=((n={}).MAX_FILE_SIZE_ERROR="max-file-size-error",n.USER_NOT_LOGGED_IN="user-not-logged-in",n.INVALID_FILE="invalid-file",n.UNABLE_TO_REACH_S3_SERVER="unable-to-reach-s3-server",n.UNABLE_TO_QUERY_VAULT_ITEM="unable-to-query-vault-item",n.VAULT_ITEM_NOT_FOUND="vault-item-not-found",n.UNABLE_TO_LINK="unable-to-link",n.UNABLE_TO_UPDATE_VAULT_ITEM="unable-to-update-vault-item",n);let r=(0,i.Vj)("max-file-size-error","Uploaded attachment exceeding 15mb limit."),s=(0,i.Vj)("user-not-logged-in","User not currently logged in."),c=(0,i.Vj)("invalid-file","File is not of a valid format."),d=(0,i.Vj)("unable-to-reach-s3-server","Unable to reach server S3"),l=(0,i.Vj)("unable-to-query-vault-item","Unable to query vault item."),u=(0,i.Vj)("vault-item-not-found","No vault item found with this Id."),m=(0,i.Vj)("unable-to-link","Unable to link attachment to vault item."),g=(0,i.Vj)("unable-to-update-vault-item","Unable to update vault item.")},39828:function(e,t,a){a.d(t,{a:()=>i});var n,i=((n={}).SecureFilesMigration="sharingVault_web_secureFilesMigration",n)},58959:function(e,t,a){a.d(t,{J:()=>s,m:()=>r});var n,i=a(45429),o=a(15021),r=((n={}).NotStarted="NotStarted",n.Started="Started",n.Linked="Linked",n.Fetched="Fetched",n.Ciphered="Ciphered",n.Completed="Completed",n.Error="Error",n);class s extends(0,i.k)({scope:o.F.User}){}},98323:function(e,t,a){a.d(t,{l:()=>o});var n=a(45429),i=a(15021);class o extends(0,n.k)({scope:i.F.User}){}},84864:function(e,t,a){a.d(t,{b:()=>o});var n=a(45429),i=a(15021);class o extends(0,n.k)({scope:i.F.User}){}},91688:function(e,t,a){a.d(t,{g:()=>o});var n=a(35345),i=a(41317);function o(e,t){let a=e.split(".").pop()?.toLowerCase()??"";return"rar"===a&&!t||i.X.includes(t)&&n.L.includes(`.${a}`)}},35345:function(e,t,a){a.d(t,{L:()=>n});let n=[".docx",".doc",".xlsx",".xls",".ppt",".pptx",".pdf",".txt",".zip",".key",".png",".jpg",".jpeg",".gif",".tiff",".bmp",".heif",".heic",".odt",".avi",".ogg",".m4a",".mov",".mp3",".mp4",".mpg",".wav",".ods",".rar",".7z",".mkv",".raw",".db",".aac",".3gp",".webm",".flac",".csv",".wmv",".tar",".odp",".odg",".gzip"]},41317:function(e,t,a){a.d(t,{X:()=>n});let n=["application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/pdf","text/plain","application/zip","application/x-zip-compressed","multipart/x-zip","application/pkcs8","application/x-iwork-keynote-sffkey","image/png","image/jpeg","image/gif","image/tiff","image/bmp","image/heic","image/heif","image/heic-sequence","image/heif-sequence","application/vnd.oasis.opendocument.text","video/avi","video/msvideo","video/x-msvideo","audio/ogg","video/ogg","video/quicktime","audio/mpeg","audio/mp4","video/mp4","video/mpeg","audio/wav","audio/x-wav","video/x-ms-wmv","application/vnd.oasis.opendocument.spreadsheet","application/x-rar-compressed","application/x-rar","application/vnd.rar","application/x-7z-compressed","video/x-matroska","video/raw","application/x-sqlite3","application/x-ole-storage","audio/aac","audio/x-aac","video/3gpp","audio/webm","video/webm","audio/flac","application/gzip","application/tar","application/x-tar","application/tar+gzip","application/x-compressed-tar","application/x-gzip","application/octet-stream","application/vnd.oasis.opendocument.presentation","application/vnd.oasis.opendocument.graphics"]},41681:function(e,t,a){a.d(t,{L:()=>h});var n=a(36503),i=a(53978),o=a(58429),r=a(57033),s=a(86933),c=a(58380),d=a(9852),l=a(37883),u=a(85689),m=a(87824),g=a(69140),p=a(42230),S=a(15804),A=a(3078);let h=(0,n.Q)({name:"vaultItemsCrud",commands:{deleteVaultItem:i.io,createVaultItem:o._,deleteVaultItems:r.cR,deleteChangeHistoryForVaultItems:s.X,updateVaultItem:c.K,emitTemporaryVaultItemEvent:d.c},events:{created:l.J,deleted:u.s,updated:m.V},queries:{domainIconDetails:g.s,query:p.W,richIconsEnabled:S.M,credentialsGloballyProtected:A.R}})},47244:function(e,t,a){a.d(t,{L:()=>o});var n=a(46266),i=a(41681);class o extends(0,n.E)(i.L){}(0,n.K)(i.L,o)},58429:function(e,t,a){a.d(t,{_:()=>o});var n=a(66122),i=a(15021);class o extends(0,n.g)({scope:i.F.User}){}},86933:function(e,t,a){a.d(t,{X:()=>o});var n=a(66122),i=a(15021);class o extends(0,n.g)({scope:i.F.User}){}},53978:function(e,t,a){a.d(t,{T$:()=>l,V$:()=>d,Vf:()=>c,io:()=>u,kx:()=>r,sA:()=>s});var n=a(66122),i=a(15021),o=a(96272);let r=Object.freeze({NOT_FOUND:"NOT_FOUND",FORBIDDEN_GROUP_ITEM:"FORBIDDEN_GROUP_ITEM",FORBIDDEN_LAST_ADMIN:"FORBIDDEN_LAST_ADMIN",NITRO_DELETE_FAILED:"NITRO_DELETE_FAILED"}),s=(0,o.Vj)(r.NOT_FOUND,"The Vault Item to be deleted couldn't be found."),c=(0,o.Vj)(r.FORBIDDEN_GROUP_ITEM,"The Vault Item cannot be deleted while shared via user group."),d=(0,o.Vj)(r.FORBIDDEN_LAST_ADMIN,"The Vault Item cannot be deleted while the current user is the last admin."),l=(0,o.Vj)(r.NITRO_DELETE_FAILED,"The data stored in Nitro for this vault item could not be deleted.");class u extends(0,n.g)({scope:i.F.User}){}},57033:function(e,t,a){a.d(t,{c4:()=>r,cR:()=>c,nO:()=>s});var n=a(66122),i=a(15021),o=a(96272);let r=Object.freeze({INCOMPLETE_DELETION:"INCOMPLETE_DELETION"}),s=e=>({...(0,o.Vj)(r.INCOMPLETE_DELETION,"At least some of the Vault Items couldn't be deleted")(),failedDeletionIds:e});class c extends(0,n.g)({scope:i.F.User}){}},9852:function(e,t,a){a.d(t,{c:()=>s,t:()=>r});var n,i=a(66122),o=a(15021),r=((n={}).Deleted="deleted",n.Updated="updated",n.Created="created",n);class s extends(0,i.g)({scope:o.F.User}){}},58380:function(e,t,a){a.d(t,{K:()=>o});var n=a(66122),i=a(15021);class o extends(0,n.g)({scope:i.F.User}){}},23154:function(e,t,a){a.d(t,{D:()=>o});var n=a(98037),i=a(15021);class o extends(0,n.d)({scope:i.F.User}){}},37883:function(e,t,a){a.d(t,{J:()=>i});var n=a(23154);class i extends n.D{}},85689:function(e,t,a){a.d(t,{s:()=>i});var n=a(23154);class i extends n.D{}},87824:function(e,t,a){a.d(t,{V:()=>i});var n=a(23154);class i extends n.D{}},86716:function(e,t,a){a.d(t,{j:()=>i});var n,i=((n={}).PasskeysInVaultDev="vault_web_passkey_dev",n.PasskeysInVaultProd="vault_web_passkey_prod",n)},3078:function(e,t,a){a.d(t,{R:()=>o});var n=a(45429),i=a(15021);class o extends(0,n.k)({scope:i.F.User}){}},69140:function(e,t,a){a.d(t,{s:()=>o});var n=a(45429),i=a(15021);class o extends(0,n.k)({scope:i.F.User,useCache:!0}){}},36649:function(e,t,a){a.d(t,{l:()=>i});var n,i=((n={}).Equal="equal",n.LessThan="lessThan",n.GreaterThan="greaterThan",n)},15804:function(e,t,a){a.d(t,{M:()=>o});var n=a(45429),i=a(15021);class o extends(0,n.k)({scope:i.F.User}){}},84809:function(e,t,a){a.d(t,{S:()=>i});var n,i=((n={}).Ascend="ascend",n.Descend="descend",n)},42230:function(e,t,a){a.d(t,{W:()=>o});var n=a(45429),i=a(15021);class o extends(0,n.k)({scope:i.F.User}){}},238:function(e,t,a){a.d(t,{c:()=>i});var n,i=((n={}).NO_TYPE="NO_TYPE",n.UNIVERSAL="UNIVERSAL",n.AD="AD",n.AE="AE",n.AF="AF",n.AG="AG",n.AI="AI",n.AL="AL",n.AM="AM",n.AO="AO",n.AQ="AQ",n.AR="AR",n.AS="AS",n.AT="AT",n.AU="AU",n.AW="AW",n.AX="AX",n.AZ="AZ",n.BA="BA",n.BB="BB",n.BD="BD",n.BE="BE",n.BF="BF",n.BG="BG",n.BH="BH",n.BI="BI",n.BJ="BJ",n.BL="BL",n.BM="BM",n.BN="BN",n.BO="BO",n.BR="BR",n.BS="BS",n.BT="BT",n.BV="BV",n.BW="BW",n.BY="BY",n.BZ="BZ",n.CA="CA",n.CC="CC",n.CD="CD",n.CF="CF",n.CG="CG",n.CH="CH",n.CI="CI",n.CK="CK",n.CL="CL",n.CM="CM",n.CN="CN",n.CO="CO",n.CR="CR",n.CU="CU",n.CV="CV",n.CX="CX",n.CY="CY",n.CZ="CZ",n.DE="DE",n.DJ="DJ",n.DK="DK",n.DM="DM",n.DO="DO",n.DZ="DZ",n.EC="EC",n.EE="EE",n.EG="EG",n.EH="EH",n.ER="ER",n.ES="ES",n.ET="ET",n.FI="FI",n.FJ="FJ",n.FK="FK",n.FM="FM",n.FO="FO",n.FR="FR",n.GA="GA",n.GB="GB",n.GD="GD",n.GE="GE",n.GF="GF",n.GG="GG",n.GH="GH",n.GI="GI",n.GL="GL",n.GM="GM",n.GN="GN",n.GP="GP",n.GQ="GQ",n.GR="GR",n.GS="GS",n.GT="GT",n.GU="GU",n.GW="GW",n.GY="GY",n.HK="HK",n.HM="HM",n.HN="HN",n.HR="HR",n.HT="HT",n.HU="HU",n.ID="ID",n.IE="IE",n.IL="IL",n.IM="IM",n.IN="IN",n.IO="IO",n.IQ="IQ",n.IR="IR",n.IS="IS",n.IT="IT",n.JE="JE",n.JM="JM",n.JO="JO",n.JP="JP",n.KE="KE",n.KG="KG",n.KH="KH",n.KI="KI",n.KM="KM",n.KN="KN",n.KP="KP",n.KR="KR",n.KW="KW",n.KY="KY",n.KZ="KZ",n.LA="LA",n.LB="LB",n.LC="LC",n.LI="LI",n.LK="LK",n.LR="LR",n.LS="LS",n.LT="LT",n.LU="LU",n.LV="LV",n.LY="LY",n.MA="MA",n.MC="MC",n.MD="MD",n.ME="ME",n.MF="MF",n.MG="MG",n.MH="MH",n.MK="MK",n.ML="ML",n.MM="MM",n.MN="MN",n.MO="MO",n.MP="MP",n.MQ="MQ",n.MR="MR",n.MS="MS",n.MT="MT",n.MU="MU",n.MV="MV",n.MW="MW",n.MX="MX",n.MY="MY",n.MZ="MZ",n.NA="NA",n.NC="NC",n.NE="NE",n.NF="NF",n.NG="NG",n.NI="NI",n.NL="NL",n.NO="NO",n.NP="NP",n.NR="NR",n.NU="NU",n.NZ="NZ",n.OM="OM",n.PA="PA",n.PE="PE",n.PF="PF",n.PG="PG",n.PH="PH",n.PK="PK",n.PL="PL",n.PM="PM",n.PN="PN",n.PR="PR",n.PS="PS",n.PT="PT",n.PW="PW",n.PY="PY",n.QA="QA",n.RE="RE",n.RO="RO",n.RS="RS",n.RU="RU",n.RW="RW",n.SA="SA",n.SB="SB",n.SC="SC",n.SD="SD",n.SE="SE",n.SG="SG",n.SH="SH",n.SI="SI",n.SJ="SJ",n.SK="SK",n.SL="SL",n.SM="SM",n.SN="SN",n.SO="SO",n.SR="SR",n.ST="ST",n.SV="SV",n.SY="SY",n.SZ="SZ",n.TC="TC",n.TD="TD",n.TF="TF",n.TG="TG",n.TH="TH",n.TJ="TJ",n.TK="TK",n.TL="TL",n.TM="TM",n.TN="TN",n.TO="TO",n.TR="TR",n.TT="TT",n.TV="TV",n.TW="TW",n.TZ="TZ",n.UA="UA",n.UG="UG",n.UM="UM",n.US="US",n.UY="UY",n.UZ="UZ",n.VA="VA",n.VC="VC",n.VE="VE",n.VG="VG",n.VI="VI",n.VN="VN",n.VU="VU",n.WF="WF",n.WS="WS",n.XK="XK",n.YE="YE",n.YT="YT",n.ZA="ZA",n.ZM="ZM",n.ZW="ZW",n)},19242:function(e,t,a){a.d(t,{N:()=>r,x:()=>s});var n=a(63762);let i=["crawled","xs","sm","sm@2x","md","md.tiff","xmd","xmd@2x","l","l@2x","xl","xl@2x","46x30","46x30@2x","50x33","50x33@2x","56x56","56x56@2x","118x98","118x98@2x","160x106","160x106@2x"];n.z.enum(i);let o=i.reduce((e,t)=>e.setKey(t,n.z.string().optional().nullable()),n.z.object({})),r=n.z.object({backgroundColor:n.z.string(),mainColor:n.z.string(),urls:o}),s=n.z.map(n.z.string(),r)},79755:function(e,t,a){a.d(t,{T5:()=>r,_u:()=>s,aG:()=>i,p3:()=>o});var n,i=((n={})[n.CloudPasskey=-65537]="CloudPasskey",n[n.ES256=-7]="ES256",n);function o(e){return!!e&&"KWPasskey"===e.kwType}function r(e){return o(e)&&-65537===e.keyAlgorithm}function s(e){return o(e)&&-7===e.keyAlgorithm}},40226:function(e,t,a){a.d(t,{X:()=>i});var n,i=((n={}).Black="BLACK",n.Blue1="BLUE1",n.Blue2="BLUE2",n.Gold="GOLD",n.Green1="GREEN1",n.Green2="GREEN2",n.Orange="ORANGE",n.Red="RED",n.Silver="SILVER",n.White="WHITE",n)},79018:function(e,t,a){a.d(t,{t:()=>i});var n,i=((n={}).Mr="MR",n.Mrs="MRS",n.Miss="MISS",n.Ms="MS",n.Mx="MX",n.NoneOfThese="NONEOFTHESE",n)},60066:function(e,t,a){a.d(t,{z:()=>i});var n,i=((n={}).Any="ANY",n.Fax="FAX",n.Landline="LANDLINE",n.Mobile="MOBILE",n.WorkFax="WORKFAX",n.WorkLandline="WORKLANDLINE",n.WorkMobile="WORKMOBILE",n)},96160:function(e,t,a){a.d(t,{L:()=>o,_:()=>r});var n,i=a(63762),o=((n={}).BLUE="BLUE",n.BROWN="BROWN",n.GRAY="GRAY",n.GREEN="GREEN",n.ORANGE="ORANGE",n.PINK="PINK",n.PURPLE="PURPLE",n.RED="RED",n.YELLOW="YELLOW",n);let r=i.z.object({color:i.z.string(),isSecured:i.z.boolean(),title:i.z.string(),content:i.z.string(),categoryId:i.z.string()})},57178:function(e,t,a){a.d(t,{U:()=>i});var n,i=((n={}).Address="KWAddress",n.BankAccount="KWBankStatement",n.Company="KWCompany",n.Credential="KWAuthentifiant",n.DriversLicense="KWDriverLicence",n.Email="KWEmail",n.FiscalId="KWFiscalStatement",n.IdCard="KWIDCard",n.Identity="KWIdentity",n.Passkey="KWPasskey",n.Passport="KWPassport",n.PaymentCard="KWPaymentMean_creditCard",n.Phone="KWPhone",n.Secret="KWSecret",n.SecureNote="KWSecureNote",n.SocialSecurityId="KWSocialSecurityStatement",n.Website="KWPersonalWebsite",n)},23791:function(e,t,a){a.d(t,{N:()=>i});var n=a(57178);let i={[n.U.Address]:"addressesResult",[n.U.BankAccount]:"bankAccountsResult",[n.U.Company]:"companiesResult",[n.U.Credential]:"credentialsResult",[n.U.DriversLicense]:"driversLicensesResult",[n.U.Email]:"emailsResult",[n.U.FiscalId]:"fiscalIdsResult",[n.U.IdCard]:"idCardsResult",[n.U.Identity]:"identitiesResult",[n.U.Passkey]:"passkeysResult",[n.U.Passport]:"passportsResult",[n.U.PaymentCard]:"paymentCardsResult",[n.U.Phone]:"phonesResult",[n.U.Secret]:"secretsResult",[n.U.SecureNote]:"secureNotesResult",[n.U.SocialSecurityId]:"socialSecurityIdsResult",[n.U.Website]:"websitesResult"}},6502:function(e,t,a){a.d(t,{e:()=>r});var n=a(36503),i=a(48721),o=a(30547);let r=(0,n.Q)({name:"vaultNotifications",commands:{setVaultNotificationsStatus:i.x},events:{},queries:{getVaultNotificationsStatus:o.M}})},48721:function(e,t,a){a.d(t,{x:()=>o});var n=a(66122),i=a(15021);class o extends(0,n.g)({scope:i.F.User}){}},30547:function(e,t,a){a.d(t,{M:()=>o});var n=a(45429),i=a(15021);class o extends(0,n.k)({scope:i.F.User}){}},4631:function(e,t,a){a.d(t,{v:()=>c});var n=a(36503),i=a(51105),o=a(39771),r=a(17242),s=a(94314);let c=(0,n.Q)({name:"vaultOrganization",commands:{deleteCollection:i.T,createCollection:o.e,updateCollection:r.s},events:{},queries:{queryCollections:s.I}})},39771:function(e,t,a){a.d(t,{e:()=>o});var n=a(66122),i=a(15021);class o extends(0,n.g)({scope:i.F.User}){}},51105:function(e,t,a){a.d(t,{T:()=>o});var n=a(66122),i=a(15021);class o extends(0,n.g)({scope:i.F.User}){}},17242:function(e,t,a){a.d(t,{C:()=>r,s:()=>s});var n,i=a(66122),o=a(15021),r=((n={}).SUBSTRACT_VAULT_ITEMS="subtract_vault_items",n.APPEND_VAULT_ITEMS="append_vault_items",n);class s extends(0,i.g)({scope:o.F.User}){}},94314:function(e,t,a){a.d(t,{I:()=>o});var n=a(45429),i=a(15021);class o extends(0,n.k)({scope:i.F.User}){}},4495:function(e,t,a){a.d(t,{C:()=>o});var n=a(46266),i=a(4631);class o extends(0,n.E)(i.v){}(0,n.K)(i.v,o)},36127:function(e,t,a){a.d(t,{R:()=>r});var n=a(36503),i=a(47996),o=a(93822);let r=(0,n.Q)({name:"vaultSearch",commands:{},events:{},queries:{vaultSearchRanked:i.$,search:o.W}})},34211:function(e,t,a){a.d(t,{T:()=>o});var n=a(46266),i=a(36127);class o extends(0,n.E)(i.R){}(0,n.K)(i.R,o)},47996:function(e,t,a){a.d(t,{$:()=>o});var n=a(45429),i=a(15021);class o extends(0,n.k)({scope:i.F.User}){}},93822:function(e,t,a){a.d(t,{W:()=>o});var n=a(45429),i=a(15021);class o extends(0,n.k)({scope:i.F.User}){}},11278:function(e,t,a){a.d(t,{F:()=>e3});var n=a(21636),i=a(93906),o=a(48035),r=a(54637),s=a(44008),c=a(15021),d=a(59982),l=a(68238),u=a(87226);class m extends(0,d.Q)({persist:!1,scope:c.F.User,storeName:"import-store",initialValue:{step:u.NP.NOT_STARTED},capacity:l.Y._100KB}){}var g=a(44577),p=a(66407),S=a(49247),A=a(94190),h=a(306),N=a(38750),E=a(83463);let I=e=>{let t=["Folder","Title","Login","Password","Website Address","Notes","Shared Folder"],a=Math.max(0,e-t.length);return a&&t.push(...[...Array(a).keys()].map((e,t)=>`Custom ${t+1}`)),t},C=(e,t)=>{Object.keys(e).forEach(a=>{let n=e[a];"TFC:Keeper"===n?delete e[a]:"string"==typeof n&&n.startsWith("otpauth://")&&(t.OtpUrl=n,delete e[a])})};var v=a(75116);let T={Title:new Set(["title","name"]),Content:new Set(["note","notes","comments","extra","content"]),Category:new Set(["category","grouping","tags","folders","folder","tag","collection","collections"])},B={Title:new Set(["title","name","account","site name"]),Login:new Set(["username","login","login_username","login name","user name"]),Url:new Set(["url","website","domain","login_url","login url","login_uri","web site","website address"]),Email:new Set(["email"]),Password:new Set(["password","login_password"]),OtpUrl:new Set(["first one-time password","login_otp","login_totp","otp","otpauth","otpurl","otpsecret","totp"]),Note:new Set(["note","notes","comments","extra"]),Category:new Set(["category","grouping","tags","folders","folder","tag","collection","collections"])},y={CardNumber:new Set(["number","cardnumber","cc_number"]),CCNote:new Set(["notes","ccnote","note"]),OwnerName:new Set(["name on card","ownername","account_name"]),SecurityCode:new Set(["security code","securitycode","code"]),ExpireMonth:new Set(["exp_month","expiremonth","expiration_month"]),ExpireYear:new Set(["exp_year","expireyear","expiration_year"]),Name:new Set(["name"])},f={BankAccountName:new Set(["bank name","bankaccountname","account_name"]),BankAccountIBAN:new Set(["iban number","account number","account_number","bankaccountiban"]),BankAccountBIC:new Set(["swift code","routing number","routing_number","bankaccountbic"]),BankAccountOwner:new Set(["account_holder"]),BankAccountBank:new Set(["issuing_bank"]),LocaleFormat:new Set(["country"])},O={[N.RO.CREDENTIAL]:B,[N.RO.NOTE]:T,[N.RO.PAYMENT_CARD]:y,[N.RO.BANK_ACCOUNT]:f,[N.RO.COLLECTION]:{}},b=new Set(["type","item type"]),R={[N.RO.NOTE]:["securenote","note","secure note"],[N.RO.CREDENTIAL]:["password","login","credential"],[N.RO.BANK_ACCOUNT]:["bankaccount","bank"],[N.RO.PAYMENT_CARD]:["paymentcard","payment_card","creditcard","debitcard"],[N.RO.COLLECTION]:[]};var P=a(71749),U=a(70727),D=a(17886),z=a(13477);let F=e=>e===u.pD.LASTPASS_CSV?eN:null,_=(e,t)=>"title"===e?null:t,L=(e,t)=>{switch(e){case"reprompt":if("0"===t)return null;break;case"name":if("--"===t)return null;break;case"type":return null}return t},w=e=>{switch(e){case u.pD.SAFARI_CSV:return _;case u.pD.BITWARDEN_CSV:return L;case u.pD.LASTPASS_CSV:return eE;default:return null}};var k=a(66878),M=a(70410);let x=()=>`{${(0,M.Z)().toUpperCase()}}`,V=()=>Math.round(Date.now()/1e3),G=(0,k.Z)(""),K=e=>{let t=G(e).trim();return t.length>=4?t.slice(-4):""},j=e=>{if(!e)return D.Vc.PAYMENT_TYPE_VISA;let t=(e,t)=>t.some(t=>e.startsWith(t));if(e.startsWith("4"))return D.Vc.PAYMENT_TYPE_VISA;if(t(e,["34","37"]))return D.Vc.PAYMENT_TYPE_AMEX;if(t(e,["50","51","52","53","54","55"]))return D.Vc.PAYMENT_TYPE_MASTERCARD;if(t(e,["6011","65"]))return D.Vc.PAYMENT_TYPE_DISCOVER;if(t(e,["300","301","302","303","304","305","36","38"]))return D.Vc.PAYMENT_TYPE_DINERSCLUB;else if(t(e,["2123","2131","1800","3"]))return D.Vc.PAYMENT_TYPE_JCB;else return D.Vc.PAYMENT_TYPE_MASTERCARD},H=e=>{let t=V(),a=G(e.cardNumber).replace(/ /g,"");return{kwType:"KWPaymentMean_creditCard",Bank:"US-NO_TYPE",CardNumber:a,CardNumberLastDigits:K(a),CreationDatetime:t,Color:(0,k.Z)(D.LR.BLUE_1,e.color),ExpireMonth:G(e.expireMonth),ExpireYear:G(e.expireYear),Id:x(),IssueNumber:"",Name:(0,k.Z)("Card",e.cardName),OwnerName:G(e.ownerName),CCNote:G(e.personalNote),LocaleFormat:p.cH.US,SecurityCode:G(e.securityCode),SpaceId:e.spaceId||"",StartYear:"",StartMonth:"",Type:j(a),UserModificationDatetime:t,LastBackupTime:0}},W=e=>{let t=V();return{kwType:"KWBankStatement",Id:x(),LastBackupTime:0,LocaleFormat:e.country,SpaceId:G(e.spaceId),CreationDatetime:t,UserModificationDatetime:t,BankAccountName:G(e.name),BankAccountOwner:G(e.owner),BankAccountIBAN:G(e.IBAN),BankAccountBIC:G(e.BIC),BankAccountBank:G(e.bank)}},Y=e=>{let t=V();return{kwType:"KWCollection",Id:x(),LastBackupTime:0,LastUse:t,LocaleFormat:p.cH.UNIVERSAL,SpaceId:e.spaceId,CreationDatetime:t,UserModificationDatetime:t,Name:e.name,VaultItems:e.vaultItems.map(e=>({Id:e.id,Type:e.type}))}};var Q=a(24522);let q=e=>"string"==typeof e?e.replace(RegExp("([^	\n\r --\uD800\uDC00-\uDBFF\uDFFF])","gu"),""):e,Z=e=>(0,Q.Z)(q,e),$=e=>{let t=Z(e),a=V();return{kwType:"KWSecureNote",CreationDatetime:a,Id:x(),LocaleFormat:p.cH.US,SpaceId:t.spaceId||"",UserModificationDatetime:a,LastBackupTime:0,Title:t.title||"Untitled note",Content:t.content||"",Secured:t.secured||!1,Type:t.type,Attachments:t.attachments||[]}},X=(e,t)=>{for(let a in e)t.includes(a)||delete e[a]},J=(e,t,a,n,i)=>{let o="";if((0,P.G)(e))o=e.Note??"";else if((0,U.g)(e))e.Note&&(e.Content=e.Note,delete e.Note),o=e.Content;else{if(!(0,D.HQ)(e))return;o=e.CCNote}let r=!!o,s=!1,c={...e,...a};for(let e in c)if(!n.includes(e)&&!t.get(e)?.matched&&c[e]&&(i?i(e.toLocaleLowerCase(),c[e]):c[e])){let t=r&&!s?`


`:`
`;o+=`${t}${e}: ${c[e]}`,s=!0}o=o.trim(),(0,P.G)(e)?e.Note=o:(0,U.g)(e)?e.Content=o:(0,D.HQ)(e)&&(e.CCNote=o)},ee=e=>{let t=e.Url?.trim()??"",a=e.Url?.split(",")??[""];if(a.length>1&&new E.Y(a[0]).isUrlValid()&&a.slice(1).some(e=>new E.Y(e).isUrlValid())){let[a,...n]=e.Url?.split(",")??[];t=a.trim(),e.LinkedServices={associated_domains:[]},n.forEach(t=>{let a=new E.Y(t.trim());a.isUrlValid()&&e.LinkedServices?.associated_domains.push({domain:a.getPIIStrippedURL(),source:z.k.Manual})})}let n=new E.Y(t);e.Url=n.isUrlValid()?t:"";let i=new E.Y(e.Title?.trim());(!e.Title||i.isUrlValid({requireEtld:!0})&&i.getRootDomain()===n.getRootDomain())&&(e.Title=n.getRootDomain()??"")},et=(e,t,a)=>{let n=V();return{Title:"",Email:"",Login:"",Password:"",Note:"",...e,kwType:"KWAuthentifiant",Id:x(),CreationDatetime:n,LastBackupTime:0,LastUse:n,LocaleFormat:t??p.cH.UNIVERSAL,Url:e.Url??"",UseFixedUrl:e.UseFixedUrl??!1,TrustedUrlGroup:e.TrustedUrlGroup??[],SpaceId:a??"",SubdomainOnly:!1,SecondaryLogin:"",Category:"",AutoLogin:!0,AutoProtected:!1,Strength:0}},ea=(e,t)=>$({content:e.Content||"",title:e.Title||"",secured:!1,type:U.Q["0"],spaceId:t||""}),en=(e,t)=>H({ownerName:e.OwnerName??"",cardName:e.Name??"",cardNumber:e.CardNumber??"",securityCode:e.SecurityCode??"",expireMonth:e.ExpireMonth??"",expireYear:e.ExpireYear??"",...e,spaceId:t}),ei=(e,t,a)=>W({name:e.BankAccountName??"",owner:e.BankAccountOwner??"",IBAN:e.BankAccountIBAN??"",BIC:e.BankAccountBIC??"",bank:e.BankAccountBank??"",country:t??p.cH.US,...e,spaceId:a??""}),eo=(e,t)=>{let a=Object.keys(t),n={};return e.forEach((e,i)=>{let o=a.find(a=>t[a].has(e));n[o??e]={supported:!!o,index:i}}),n},er=(e,t,a,n,i)=>Object.entries(e).reduce((e,[t,i])=>{let o=n.get(t)?.matched;return n.has(t)&&o&&(e[o]=a?a(t,"string"==typeof i?i:""):i),e},t({},i)),es=(e,t,a)=>{let n=["Title","Content","Category","Secured","Type","LocaleFormat","SpaceId","kwType","Id","LastBackupTime","CreationDate","UpdateDate","limitedPermissions","CreationDatetime","UserModificationDatetime","LastUse","Attachments"],i=w(t),o=er(e,ea,i,a);return J(o,a,e,n,i),X(o,n),o},ec=(e,t,a,n)=>{let i=["Name","CardNumber","CardNumberLastDigits","OwnerName","SecurityCode","ExpireMonth","ExpireYear","StartMonth","StartYear","IssueNumber","Color","Bank","CCNote","Type","LocaleFormat","SpaceId","kwType","Id","LastBackupTime","CreationDatetime","UserModificationDatetime","LastUse","Attachments"],o=w(t),r=er(e,en,o,a,n);return J(r,a,e,i,o),X(r,i),r},ed=(e,t,a)=>{let n=er(e,ei,w(t),a);return X(n,["BankAccountName","BankAccountOwner","BankAccountIBAN","BankAccountBIC","BankAccountBank","LocaleFormat","SpaceId","kwType","Id","LastBackupTime","CreationDatetime","UserModificationDatetime","LastUse","Attachments"]),n},el=(e,t,a,n)=>{let i=["Title","Email","Login","SecondaryLogin","Password","Strength","Category","Url","UseFixedUrl","TrustedUrlGroup","LocaleFormat","SpaceId","kwType","Id","LastBackupTime","CreationDatetime","LastUse","Note","SubdomainOnly","AutoLogin","AutoProtected","OtpSecret","UserSelectedUrl","Checked","Status","SharedObject","ModificationDatetime","NumberUse","Type","Server","Port","Alias","SID","ConnectionOptions","domainIcon","limitedPermissions","LinkedServices","UserModificationDatetime","Attachments","OtpUrl"],o=w(t),r=er(e,et,o,a,n);return t===u.pD.KEEPER_CSV&&C(e,r),J(r,a,e,i,o),X(r,i),ee(r),r},eu=(e,t)=>{let a=Object.entries(eo(e,O[t])).reduce((e,[t,a])=>({...e,[a.index]:a.supported?t:""}),{});return e.map((e,t)=>({original:e,matched:a[t]??""}))},em=(e,t)=>{let a=null,n=F(t);if(n&&(a=n(e)),!a){for(let t in e)if(b.has(t)&&(a=Object.keys(R).find(a=>R[a]?.includes(e[t].toLocaleLowerCase()))))break;if(!a){let t=Object.keys(e).map(e=>e.toLocaleLowerCase()),n={};Object.entries(O).forEach(([a,i])=>{Object.values(i).forEach(i=>{n[a]=(n[a]||0)+[...i].filter(a=>t.includes(a)&&e[a]).length})}),a=Object.keys(n).reduce((e,t)=>n[e]>n[t]?e:t)}}return a||N.RO.NOTE},eg=e=>!!e.length&&Object.values(Object.values(O)).reduce((e,t)=>[...e,...Object.values(t).map(e=>Array.from(e))],[]).flat().some(t=>e.includes(t)),ep="http://sn",eS={NoteType:"NoteType"},eA=e=>{let t={};try{switch(e.split("\n").forEach(e=>{let[a,n]=e.split(":");t[a]=n}),t.NoteType){case"Bank Account":{let e={BankAccountName:t["Bank Name"],BankAccountOwner:"",BankAccountIBAN:t["IBAN Number"]?t["IBAN Number"]:t["Account Number"],BankAccountBIC:t["SWIFT Code"]?t["SWIFT Code"]:t["Routing Number"],BankAccountBank:"",kwType:p.dJ.KWBankStatement};return{type:"Bank Account",data:e}}case"Credit Card":{let e,a;let n=t["Expiration Date"];if(n){let[t,i]=n.split(",");e=(e=`${(0,v.Z)(new Date(`${t} 1`))+1}`).length<=2?e:"",a=4!==i.length||isNaN(Number(i))?"":i}let i={CardNumber:t.Number,OwnerName:t["Name on Card"],SecurityCode:t["Security Code"],ExpireMonth:e,ExpireYear:a,CCNote:t.Notes,kwType:p.dJ.KWPaymentMean_creditCard};delete t[eS.NoteType],delete t["Expiration Date"],delete t.Language,t["Payment Type"]=t.Type,delete t[eS.NoteType];let o=Object.keys(i),r=Object.values(i);return Object.keys(t).forEach(e=>{(o.includes(e)||r.includes(t[e]))&&delete t[e]}),{type:"Credit Card",data:{...t,...i}}}default:return null}}catch{return null}},eh=(e,t,a,n,i)=>{if(e.url?.includes(ep)){delete e.url;let o=eA(e.extra),r=o?.type==="Bank Account"?f:o?.type==="Credit Card"?y:T;switch(Object.keys(o?.data??{}).forEach(e=>{let t=Object.keys(r).find(t=>r[t].has(e.toLocaleLowerCase()));!i.has(e)&&e&&i.set(e,{original:e,matched:t??""})}),o?.type){case"Bank Account":{let a={baseDataModel:ed(o.data,t,i),rawData:e};n.bankAccounts.push(a);return}case"Credit Card":{let r={baseDataModel:ec(o.data,t,i,a),rawData:e};n.paymentCards.push(r);return}default:{let a={baseDataModel:es(e,t,i),rawData:e};n.notes.push(a);return}}}},eN=e=>{if(e.url?.includes(ep)){let t=e.extra.split("\n"),a="";for(let e=0;e<t.length;e++){let[n,i]=t[e]?t[e].split(":"):[];n===eS.NoteType&&(a=i)}switch(a){case"Bank Account":return N.RO.BANK_ACCOUNT;case"Credit Card":return N.RO.PAYMENT_CARD;default:return N.RO.NOTE}}return null},eE=(e,t)=>{switch(e){case"fav":if(!t||t.includes("0"))return null;break;case"grouping":if(!t||t.includes("(none)"))return null}return t},eI=(e,t,a)=>{t===u.pD.ONE_PASSWORD_CSV&&(e.Category=(e.Category??"").replaceAll(";",",")),(e.Category??"").split(",").forEach(t=>{let n=a.collections.find(e=>e.baseDataModel.Name===t);n||(n={baseDataModel:Y({name:t,vaultItems:[],spaceId:""}),rawData:{}},a.collections.push(n)),n.baseDataModel.VaultItems.push({Id:e.Id,Type:e.kwType})})},eC=(e,t,a,n)=>{let i={baseDataModel:es(e,t,a),rawData:e};i.baseDataModel.Category&&eI(i.baseDataModel,t,n),n.notes.push(i)},ev=(e,t,a,n)=>{let i={baseDataModel:ed(t,e,n),rawData:t};a.bankAccounts.push(i)},eT=(e,t,a,n,i)=>{let o={baseDataModel:ec(t,e,i,a),rawData:t};n.paymentCards.push(o)},eB=/^otpauth:\/\/.*/,ey=(e,t,a,n,i)=>{let o={baseDataModel:el(e,t,a,n),rawData:e};o.baseDataModel.Category&&eI(o.baseDataModel,t,i),o.baseDataModel.OtpUrl&&!eB.test(o.baseDataModel.OtpUrl)&&(o.baseDataModel.OtpUrl="otpauth://totp/?secret="+o.baseDataModel.OtpUrl);let r=new E.Y(o.baseDataModel.Url);o.baseDataModel.Url&&r.isUrlValid()&&(o.baseDataModel.Url=r.getPIIStrippedURL()),i.credentials.push(o)},ef=(e,t,a,n)=>{let i={credentials:[],notes:[],bankAccounts:[],paymentCards:[],collections:[]},o=new Map;for(let r=0;r<e.length;r++){let s=e[r].reduce((e,a,n)=>(e[t[n]]=a,e),{}),c=em(s,a),d=eu(t,c),l=new Map;if(d.forEach(e=>{o.has(e.original)&&(o.get(e.original)?.matched||!e.matched)||o.set(e.original,e),e.matched&&l.set(e.original,e)}),[N.RO.BANK_ACCOUNT,N.RO.NOTE,N.RO.PAYMENT_CARD].includes(c)&&a===u.pD.LASTPASS_CSV){eh(s,a,n,i,l);continue}switch(c){case N.RO.CREDENTIAL:ey(s,a,l,n,i);break;case N.RO.PAYMENT_CARD:eT(a,s,n,i,l);break;case N.RO.BANK_ACCOUNT:ev(a,s,i,l);break;case N.RO.NOTE:default:eC(s,a,l,i)}}return{...i,headers:[...o.values()]}},eO=(e,t)=>{let a;let n=/(?=["'])(?:"[^"\\]*(?:\\[\s\S][^"\\]*)*"|'[^'\\]*(?:\\[\s\S][^'\\]*)*')|,,|,\n/gi;for(;a=n.exec(e.trim());){let e=",,"===a[0]?a.index:a.index-1;a.input[e]&&","!==a.input[e]&&t.push([]),",\n"!==a[0]&&t[t.length-1].push(a[0].replace(new RegExp(/","/gi),",").replace(new RegExp(/^"|"$/gi),"").replace(new RegExp(/^,,$/gi),""))}},eb=(e,t)=>{let a;let n=/(,|\r?\n|\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^,\r\n]*))/gi;for(;a=n.exec(e.trim());)a[1].length&&","!==a[1]&&t.push([]),t[t.length-1].push(void 0!==a[2]?a[2].replace(RegExp('^"|"$|"(?=,")|(?<=",)"|""',"gi"),'"'):a[3])},eR=(e,t)=>{let a=[[]];if(e.startsWith('"')?eO(e,a):eb(e,a),t===u.pD.KEEPER_CSV){let e=a.reduce((e,t)=>Math.max(e,t.length),0);a.unshift(I(e))}let[n,...i]=a;return{csvHead:n,csvRows:i}},eP=(e,t,a)=>{let n={credentials:[],notes:[],paymentCards:[],bankAccounts:[],headers:[],collections:[]};if(!e)return n;let{csvHead:i,csvRows:o}=eR(e,t),r=i.map(e=>e.toLowerCase());return o.length&&eg(r)?ef(o,r,t,a):n},eU=(e,t)=>{let{headers:a,...n}=eP(e.data,e.importSource,t);return{headers:a,items:Object.values(n).flat()}};class eD{constructor(e,t){this.store=e,this.carbon=t,this.executeDataTranslation=async e=>{let t=await this.store.getState();if(t.step!==u.NP.ITEM_RETRIEVAL)return(0,h.Rn)((0,u.DQ)());if(!t.importSource||!t.rawData)return(0,h.Rn)((0,u.OM)());let{rawData:a,importSource:n}=t;await this.store.set({step:u.NP.PROCESSING,importSource:n,rawData:a,decryptionSettings:e});let i=eU({data:a,importSource:n},await this.getPlatformCountry());return 0===i.items.length?(0,h.Rn)((0,u.Zx)()):(this.store.set({step:u.NP.PREVIEW,importSource:n,previewHeaders:i.headers,previewItems:this.getParsedPreviewItems(i),defaultSpace:""}),(0,h.Vp)(void 0))},this.getPlatformCountry=async()=>{let e=await (0,g.z)(this.carbon.queries.getPlatformInfo());if(!(0,h.d6)(e))throw Error("Failed to get platform info from carbon");let t=e.data;return p.cH[t.country]},this.getParsedPreviewItems=e=>{let t=e.items.map(e=>({id:e.baseDataModel.Id,rawItem:e.rawData,shouldBeImported:!0,type:e.baseDataModel.kwType??"",item:{kwType:e.baseDataModel.kwType??"KWSecureNote",...e.baseDataModel}})),a={};return t.forEach(e=>{a[e.id]=e}),a}}}eD=(0,n.gn)([(0,A.GS)(),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[m,void 0===S._?Object:S._])],eD);var ez=a(37368),eF=a(94482);class e_{async execute({body:{decryptionSettings:e}}){return this.dataTranslationService.executeDataTranslation(e)}constructor(e){this.dataTranslationService=e}}e_=(0,n.gn)([(0,ez.W)(eF.Y),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===eD?Object:eD])],e_);var eL=a(92893);class ew{async execute(){return await this.store.set({step:u.NP.NOT_STARTED}),Promise.resolve((0,h.Vp)(void 0))}constructor(e){this.store=e}}ew=(0,n.gn)([(0,ez.W)(eL.O),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[m])],ew);var ek=a(69533);class eM{async execute(){return(await this.store.getState()).step!==u.NP.NOT_STARTED?(0,h.Rn)((0,u.DQ)()):(await this.store.set({step:u.NP.ITEM_RETRIEVAL,isFileUploaded:!1}),Promise.resolve((0,h.Vp)(void 0)))}constructor(e){this.store=e}}eM=(0,n.gn)([(0,ez.W)(ek.C),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[m])],eM);var ex=a(22187);class eV{async execute({body:e}){let{importSource:t}=e,a=await this.store.getState();return a.step!==u.NP.ITEM_RETRIEVAL?(0,h.Rn)((0,u.DQ)()):(await this.store.set({...a,importSource:t}),Promise.resolve((0,h.Vp)(void 0)))}constructor(e){this.store=e}}eV=(0,n.gn)([(0,ez.W)(ex._),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[m])],eV);var eG=a(62423);class eK{async execute({body:e}){let t=await this.store.getState();return t.step!==u.NP.PREVIEW?(0,h.Rn)((0,u.DQ)()):(await this.store.set({...t,defaultSpace:e}),Promise.resolve((0,h.Vp)(void 0)))}constructor(e){this.store=e}}eK=(0,n.gn)([(0,ez.W)(eG.K),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[m])],eK);var ej=a(62325),eH=a(51870),eW=a(72151);class eY extends ej.P{async handleUploadedFile({content:e}){let t=new TextDecoder().decode(e),a=await this.importStore.getState();if(a.step!==u.NP.ITEM_RETRIEVAL)throw Error("Wrong Step");return await this.importStore.set({...a,rawData:t,isFileUploaded:!0}),Promise.resolve(void 0)}constructor(e){super(u.gS),this.importStore=e}}eY=(0,n.gn)([(0,eH.b)(eW.W),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[m])],eY);var eQ=a(42589),eq=a(81433),eZ=a(62506),e$=a(63426);class eX{execute(){return this.importStore.state$.pipe((0,eQ.U)(e=>e.step),(0,eq.x)(),(0,eQ.U)(h.Vp))}constructor(e){this.importStore=e}}eX=(0,n.gn)([(0,eZ.e)(e$.s),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[m])],eX);var eJ=a(45991),e0=a(45967);class e1{execute(){return this.importStore.state$.pipe((0,eQ.U)(e=>e.step===u.NP.NOT_STARTED||void 0===e.importSource?(0,h.Rn)((0,u.DQ)()):(0,h.Vp)(e.importSource)),(0,eq.x)(eJ.shallowEqualObjects))}constructor(e){this.importStore=e}}e1=(0,n.gn)([(0,eZ.e)(e0.l),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[m])],e1);var e6=a(90696);class e2{execute(){return this.store.state$.pipe((0,eQ.U)(e=>e.step!==u.NP.ITEM_RETRIEVAL?(0,h.Rn)((0,u.DQ)()):(0,h.Vp)(e.isFileUploaded)),(0,eq.x)())}constructor(e){this.store=e}}e2=(0,n.gn)([(0,eZ.e)(e6.Z),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[m])],e2);var e5=a(3998);class e4{execute(){return this.importStore.state$.pipe((0,eQ.U)(e=>e.step===u.NP.IMPORTING||e.step===u.NP.PREVIEW?(0,h.Vp)({defaultSpace:e.defaultSpace}):(0,h.Rn)((0,u.DQ)())))}constructor(e){this.importStore=e}}e4=(0,n.gn)([(0,eZ.e)(e5.R),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[m])],e4);class e3{}e3=(0,n.gn)([(0,o.Y)({api:r.B,stores:[m],requiredFeatureFlips:Object.values(s.c),providers:[eD],handlers:{commands:{executeDataTranslation:e_,resetImport:ew,startDataRetrieval:eM,setImportSource:eV,setDefaultSpace:eK},events:{...(0,o.g)(i.a,{fileUploaded:eY})},queries:{importStep:eX,importSource:e1,isFileUploaded:e2,importDefaultSpace:e4}},domainName:"vault"})],e3)},19285:function(e,t,a){a.d(t,{U:()=>P});var n=a(21636),i=a(48035),o=a(4625),r=a(63762),s=a(49247),c=a(62506),d=a(17741),l=a(18095);let u=(e,t)=>e.or(r.z.any().transform(()=>t)),m=r.z.object({GeneratorDefaultAvoidAmbiguousChars:u(r.z.boolean(),!0),GeneratorDefaultSize:u(r.z.number().int().min(1),16),GeneratorDefaultDigits:u(r.z.boolean(),!0),GeneratorDefaultLetters:u(r.z.boolean(),!0),GeneratorDefaultSymbols:u(r.z.boolean(),!0)}).default({}).transform(e=>({avoidAmbiguous:e.GeneratorDefaultAvoidAmbiguousChars,length:e.GeneratorDefaultSize,digits:e.GeneratorDefaultDigits,letters:e.GeneratorDefaultLetters,symbols:e.GeneratorDefaultSymbols}));class g{execute(){return this.carbonLegacyClient.queries.carbonState({path:"userSession.personalSettings"}).pipe((0,d.Qn)(m.parse))}constructor(e){this.carbonLegacyClient=e}}g=(0,n.gn)([(0,c.e)(l.$),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===s._?Object:s._])],g);var p=a(1833),S=a(44577),A=a(306),h=a(49499),N=a(56414),E=a(57178),I=a(84809),C=a(66407),v=a(83463),T=a(74558),B=a(44893);class y{execute({body:e}){return(0,p.D)(this.createHistoryList(e))}getPage(e,t,a){return t&&a?e.slice(a*(t-1),a*t):e}async createHistoryList(e){let{carbonStateList:t}=this.carbonLegacyClient.queries,a=await (0,S.z)(t({paths:["userSession.personalData.generatedPasswords","userSession.personalData.changeHistories"]}));if((0,A.hx)(a)||!Array.isArray(a.data[0])||!Array.isArray(a.data[1]))throw Error("Failure getting password history state from carbon");let n=a.data[0],i=a.data[1],o=await (0,S.z)(this.vaultRepository.getQuarantinedSpacesTeamIds$()),r=[];e.typeFilter===N.rf.Saved||e.credentialId||(r=n.filter(e=>!o.includes(e.SpaceId)&&!e.AuthId).map(e=>({type:N.me.Generated,name:e.Domain??"",domain:e.Domain,password:e.Password,timestamp:e.GeneratedDate,id:e.Id,isProtected:!1})));let s=[];if(e.typeFilter!==N.rf.Unsaved){let t=[],a=[];i.forEach(e=>{let n=!e.SpaceId||!o.includes(e.SpaceId),i=e.ObjectType===C.iU.AUTHENTIFIANT,r=!!e.ChangeSets;i&&n&&r&&(t.push(e),a.push(e.ObjectId))});let n=await (0,S.z)(this.vaultRepository.fetchVaultItems$({vaultItemTypes:[E.U.Credential],ids:a})),r=await (0,S.z)(this.sharingItemsClient.queries.getPermissionForItems({itemIds:a}));if((0,A.hx)(n)||(0,A.hx)(r))throw Error("Failed to get password history credential or sharing data ");let c=(0,A.db)(n).credentialsResult.items,d=(0,A.db)(r);s=t.reduce((t,a)=>{let n=c.find(e=>e.id===a.ObjectId);if(!n||e.credentialId&&`{${e.credentialId}}`!==n.id)return t;let i=d[a.ObjectId],o=!!i,r=i?.capabilities.canReveal;if(o&&!r)return t;let s=n.itemName,l=n.URL,u=new v.Y(l).getRootDomain(),m=s||u,g=n.email||n.username,p=(0,T.Ue)(e.searchFilter||"");return((0,T.Ue)(s).includes(p)||(0,T.Ue)(g).includes(p)||(0,T.Ue)(l).includes(p))&&a.ChangeSets.forEach(e=>{if(!e.ChangedProperties?.some(e=>"password"===e.toLowerCase()))return;let a={type:N.me.Credential,name:m,login:g,domain:l||e.CurrentData.Url,password:e.CurrentData.Password,timestamp:e.ModificationDate,id:e.Id,credentialId:n.id,isProtected:!!n.isSecured,spaceId:n.spaceId};t.push(a)}),t},[])}let c=r.concat(s).sort((t,a)=>"timestamp"===e.sorting.property?e.sorting.direction===I.S.Ascend?t.timestamp-a.timestamp:a.timestamp-t.timestamp:e.sorting.direction===I.S.Ascend?t.name.localeCompare(a.name):a.name.localeCompare(t.name)),d=this.getPage(c,e.pageNumber,e.pageSize);return(0,A.Vp)({items:d,totalItems:c.length})}constructor(e,t,a){this.carbonLegacyClient=e,this.sharingItemsClient=t,this.vaultRepository=a}}y=(0,n.gn)([(0,c.e)(N.mD),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===s._?Object:s._,void 0===h.s?Object:h.s,void 0===B.g?Object:B.g])],y);var f=a(36884),O=a(42589),b=a(4118);class R{execute({body:e}){let t=this.carbonLegacyClient.queries.carbonState({path:"userSession.personalData.changeHistories"}),a=this.vaultRepository.getQuarantinedSpacesTeamIds$(),n=this.sharingItemsClient.queries.getPermissionForItem({itemId:e.id});return(0,f.a)([t,a,n]).pipe((0,O.U)(([t,a,n])=>{if((0,A.hx)(t)||!Array.isArray(t.data))throw Error("Failure getting password history state from carbon");if(!((0,A.d6)(n)&&n.data.capabilities.canReveal))return(0,A.Vp)(!1);let i=t.data.some(t=>{let n=t.ObjectId===e.id,i=t.ObjectType===C.iU.AUTHENTIFIANT,o=!a.includes(t.SpaceId);return!!n&&!!i&&!!o&&t.ChangeSets.some(e=>e.ChangedProperties.some(e=>"password"===e.toLowerCase()))});return(0,A.Vp)(i)}))}constructor(e,t,a){this.carbonLegacyClient=e,this.sharingItemsClient=t,this.vaultRepository=a}}R=(0,n.gn)([(0,c.e)(b.e),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===s._?Object:s._,void 0===h.s?Object:h.s,void 0===B.g?Object:B.g])],R);class P{}P=(0,n.gn)([(0,i.Y)({api:o.T,handlers:{commands:{},events:{},queries:{getPasswordGenerationSettings:g,getPasswordHistory:y,hasPasswordHistory:R}},providers:[B.g],domainName:"vault"})],P)},18942:function(e,t,a){a.d(t,{a:()=>f});var n=a(21636),i=a(48035),o=a(63365),r=a(69393),s=a(36884),c=a(42589),d=a(62506),l=a(306),u=a(48467),m=a(81433),g=a(72907),p=a(69853),S=a(49247),A=a(94190),h=a(57178),N=a(44893);class E{constructor(e,t){this.carbon=e,this.vaultRepository=t,this.isPasswordLimitEnabled=()=>this._getPasswordsLimitCapability().pipe((0,c.U)(e=>e?.enabled??!1)),this.getNumberOfPasswordsLeft=()=>{let e=this._getCredentialCount(),t=this._getPasswordsLimitCapability().pipe((0,c.U)(e=>e?.info?.limit));return(0,s.a)([e,t]).pipe((0,c.U)(([e,t])=>{if("number"==typeof t)return t-e}))},this.isFreeUserFrozen=()=>this._getPasswordsLimitCapability().pipe((0,c.U)(e=>e?.enabled&&e.info?.action==="enforce_freeze"&&e.info?.limit),(0,m.x)()).pipe((0,g.w)(e=>e?this._getCredentialCount().pipe((0,c.U)(t=>t>e)):(0,p.of)(!1))),this.getCurrentPasswordLimit=()=>this._getPasswordsLimitCapability().pipe((0,c.U)(e=>{if(e?.enabled&&!e.info?.limit&&e.info?.limit!==0)throw Error("Cannot get password limit from server");return e?.info?.limit})),this._getPasswordsLimitCapability=()=>this.carbon.queries.getNodePremiumStatus().pipe((0,c.U)(e=>{if(!(0,l.d6)(e))throw Error("Cannot retrieve node premium status from carbon");return l.db(e).capabilities?.passwordsLimit})),this._getCredentialCount=()=>this.vaultRepository.fetchVaultItems$({vaultItemTypes:[h.U.Credential]}).pipe((0,c.U)(e=>{if(!(0,l.d6)(e))throw Error("Cannot retrieve credentials from vault");return(0,l.db)(e).credentialsResult.matchCount}))}}E=(0,n.gn)([(0,A.GS)(),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===S._?Object:S._,void 0===N.g?Object:N.g])],E);class I{execute(){let e=this.passwordLimitRepository.isPasswordLimitEnabled(),t=this.passwordLimitRepository.getNumberOfPasswordsLeft();return(0,s.a)(e,t).pipe((0,c.U)(([e,t])=>e&&"number"==typeof t?(0,l.Vp)(t>0):(0,l.Vp)(!0)))}constructor(e){this.passwordLimitRepository=e}}I=(0,n.gn)([(0,d.e)(u.K),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===E?Object:E])],I);var C=a(45991),v=a(83352);class T{execute(){let e=this.passwordLimitRepository.isPasswordLimitEnabled(),t=this.passwordLimitRepository.getNumberOfPasswordsLeft(),a=this.passwordLimitRepository.getCurrentPasswordLimit();return(0,s.a)([e,t,a]).pipe((0,c.U)(([e,t,a])=>e&&"number"==typeof t&&"number"==typeof a?{hasLimit:e,passwordsLeft:t,limit:a}:{hasLimit:!1}),(0,m.x)(C.shallowEqualObjects),(0,c.U)(l.Vp))}constructor(e){this.passwordLimitRepository=e}}T=(0,n.gn)([(0,d.e)(v.r),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===E?Object:E])],T);var B=a(4073);class y{execute(){return this.passwordLimitRepository.isFreeUserFrozen().pipe((0,m.x)(),(0,c.U)(l.Vp))}constructor(e){this.passwordLimitRepository=e}}y=(0,n.gn)([(0,d.e)(B.k),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===E?Object:E])],y);class f{}f=(0,n.gn)([(0,i.Y)({api:o.Z,stores:[],handlers:{commands:{},events:{},queries:{canUserAddNewPassword:I,getPasswordLimitStatus:T,isFreeUserFrozen:y}},providers:[N.g,E],requiredFeatureFlips:[...Object.values(r.t)]})],f)},63691:function(e,t,a){a.d(t,{E:()=>ey});var n=a(21636),i=a(48035),o=a(79869),r=a(37809),s=a(4843),c=a(87253),d=a(57429),l=a(39828),u=a(93906),m=a(44577),g=a(49247),p=a(94190),S=a(90423),A=a(14098),h=a(76217),N=a(17721),E=a(59242),I=a(83267),C=a(14006),v=a(49),T=a(306),B=a(70554),y=a(67468),f=a(58959),O=a(20709),b=a(91688),R=a(95538),P=a(19855),U=a(59982),D=a(68238),z=a(15021);class F extends(0,U.Q)({persist:!1,scope:z.F.User,storeName:"temporary-secure-file-attachment",initialValue:{},capacity:D.Y._001KB}){async get(e){return(await this.getState())[e]}async remove(e){let t=await this.getState();delete t[e],await this.set({...t})}async setAttachment(e,t){let a=await this.getState();await this.set({...a,[e]:{...t}})}async updateAttachment(e,t){let a=await this.getState(),n=t(a[e]);await this.set({...a,[e]:n})}}class _ extends(0,U.Q)({initialValue:{},scope:z.F.User,storeName:"secure-files-progress",persist:!1,capacity:D.Y._001KB}){async updateStatus(e,t,a){let n=await this.getState();if(t===f.m.Error){if(!a)throw Error("Missing attachment error.");this.set({...n,[e]:{status:t,error:a}})}else this.set({...n,[e]:{status:t}})}}let L=e=>({id:e.Id,type:e.Type,version:1,filename:e.Filename,downloadKey:e.DownloadKey,cryptoKey:e.CryptoKey,localSize:e.LocalSize,remoteSize:e.RemoteSize,creationDatetime:e.CreationDatetime,userModificationDatetime:e.UserModificationDatetime,owner:e.Owner});class w{async uploadSecureFile(e,t,a){let n=await this.getLoggedUser();if((0,T.hx)(n)||!n.data)return(0,T.Rn)((0,y.$t)());let i=n.data,o=function(){let e=crypto.randomUUID();return`{${e.toUpperCase()}}`}(),r={id:o,filename:e,localSize:a.byteLength,owner:i,type:t,creationDatetime:this.getCreateCurrentDate(),cryptoKey:"",downloadKey:"",remoteSize:0,userModificationDatetime:0,version:1},s=this.validateSecureFile(e,t,a.byteLength);if(await this.temporarySecureFileAttachmentStore.setAttachment(o,r),(0,T.hx)(s))return await this.progressStore.updateStatus(o,f.m.Error,s.error),s;await this.progressStore.updateStatus(o,f.m.Started);let{encryptedContent:c,secureFileInfo:d}=await this.createSecureFile(o,a,e,t,i);await this.progressStore.updateStatus(o,f.m.Ciphered);let l=await this.getUploadInfo(d.RemoteSize,d.Id);if((0,T.hx)(l))return await this.progressStore.updateStatus(o,f.m.Error,l.error),l;let{key:u,fields:m,acl:g,url:p}=l.data;d.DownloadKey=u,await this.progressStore.updateStatus(o,f.m.Linked);let S=this.createUploadBody(c,m,u,g),A=await this.uploadToS3(p,S);if((0,T.hx)(A))return await this.progressStore.updateStatus(o,f.m.Error,A.error),A;await this.progressStore.updateStatus(o,f.m.Fetched),await this.carbonClient.commands.commitSecureFile({secureFileInfo:d}),await this.secureFileClient.commands.fetchSecureFileQuota(),await this.progressStore.updateStatus(o,f.m.Completed);let h=L(d);return await this.temporarySecureFileAttachmentStore.setAttachment(o,h),(0,T.Vp)(h)}getLoggedUser(){return(0,m.z)(this.session.queries.selectedOpenedSession())}async uploadToS3(e,t){try{let a=await (0,m.z)(this.httpClient.post(e,t,{observe:"response"}));if(!(0,T.d6)(a))return(0,B.EQ)(a.error,{...(0,A.X)(e=>{throw Error("Unexpected server error while attempting to upload remote secure file",{cause:e})}),BadStatus:()=>(0,T.Rn)((0,y.Jd)())});return a.data.ok?(0,T.Vp)(a.data):(0,T.Rn)((0,y.Jd)())}catch(e){throw Error("Unexpectedly unable to upload secure file",{cause:e})}}createUploadBody(e,t,a,n){let i=new FormData;for(let e of Object.keys(t))i.append(e,t[e]);return i.append("key",`${a}`),i.append("acl",`${n}`),i.append("file",new Blob([e])),i}async getUploadInfo(e,t){try{let a=await (0,m.z)(this.serverApiClient.v1.securefile.getUploadLink({contentLength:e,secureFileInfoId:t}));return(0,B.EQ)(a,{success:e=>(0,T.Vp)(e.data.data),failure:e=>(0,B.EQ)(e.error,{...(0,A.X)(e=>{throw Error("Unexpected server error while attempting to retrieve upload key",{cause:e})}),BusinessError:()=>(0,T.Rn)((0,y.Jn)())})})}catch(e){throw Error("Unexpectedly unable to retrieve upload key",{cause:e})}}validateSecureFile(e,t,a){if(a>O.T)return(0,T.Rn)((0,y.Qm)());let n=(0,b.g)(e,t);return n?(0,T.Vp)(n):(0,T.Rn)((0,y.Wr)())}async createSecureFile(e,t,a,n,i){let o=await this.keyGenerator.generate(),r=await this.flexibleEncryptor.encrypt(o,t,C.oo,v.gO),s=this.createSecureFileInfo(e,t.byteLength,o,r.byteLength,a,n,i);return{encryptedContent:r,secureFileInfo:s}}getCreateCurrentDate(){return Math.floor(Date.now()/1e3)}createSecureFileInfo(e,t,a,n,i,o,r){let s=this.getCreateCurrentDate();return{kwType:"KWSecureFileInfo",Id:e,CryptoKey:(0,I.s)(a),Filename:i,LocalSize:t,RemoteSize:n,Type:o,CreationDatetime:s,UserModificationDatetime:s,Owner:r,LastBackupTime:0,DownloadKey:""}}constructor(e,t,a,n,i,o,r,s,c){this.secureFileClient=e,this.carbonClient=t,this.keyGenerator=a,this.flexibleEncryptor=n,this.serverApiClient=i,this.httpClient=o,this.temporarySecureFileAttachmentStore=r,this.progressStore=s,this.session=c}}w=(0,n.gn)([(0,p.GS)(),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===R.v?Object:R.v,void 0===g._?Object:g._,void 0===h.c?Object:h.c,void 0===N._?Object:N._,void 0===E.l?Object:E.l,void 0===S.e?Object:S.e,F,_,void 0===P.x?Object:P.x])],w);var k=a(66407),M=a(78405),x=a(37368),V=a(4767),G=a(20458),K=a(51721);let j=e=>!!(e&&(0,K.K)(e))&&"remaining"in e;class H extends(0,U.Q)({persist:!0,storage:{initialValue:{remaining:0,max:0},typeGuard:j,schemaVersion:1},scope:z.F.User,storeName:"secure-file-quota",capacity:D.Y._001KB,codec:G.E}){}let W=e=>e.error&&"object"==typeof e.error&&"reason"in e.error&&"number"==typeof e.error.reason?e.error.reason:null;class Y{async execute({body:e}){try{let t=await this.carbonLegacyClient.commands.deleteVaultModuleItem({id:e.id,kwType:k.dJ.KWSecureFileInfo});if(!(0,T.d6)(t)){let a=(0,T.Yv)(t),n=W(a);if(n!==M.M.NOT_FOUND)throw Error("Unexpected failure while attemping to delete personal data item in Carbon",{cause:{failure:a,reason:n,id:e.id}})}}catch(e){throw Error("Unexpectedly unable to attempt deleting personal data item in Carbon",{cause:e})}let t=await (0,m.z)(this.serverApiClient.v1.securefile.deleteSecureFile({secureFileInfoId:e.id}));if(!(0,T.d6)(t))return(0,B.EQ)(t.error,{...(0,A.X)(e=>{throw Error("Unexpected server error while attempting to delete remote secure file",{cause:e})}),BusinessError:()=>(0,T.Rn)((0,V.Kg)())});let{quota:a}=(0,T.db)(t).data;return await this.secureFilesQuotaStore.set(a),(0,T.Vp)(void 0)}constructor(e,t,a){this.carbonLegacyClient=e,this.serverApiClient=t,this.secureFilesQuotaStore=a}}Y=(0,n.gn)([(0,x.W)(V._8),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===g._?Object:g._,void 0===E.l?Object:E.l,H])],Y);var Q=a(91984),q=a(16620),Z=a(33522),$=a(97702);class X{async execute({body:e}){let{cryptoKey:t,downloadKey:a,filename:n,type:i}=e;await this.progressStore.updateStatus(a,f.m.Started);let o=await this.getDownloadLink(a);if(!(0,T.d6)(o))return o;let r=(0,T.db)(o);await this.progressStore.updateStatus(a,f.m.Linked);let s=await this.fetchDownloadLinkContent(r);if(!(0,T.d6)(s))return s;await this.progressStore.updateStatus(a,f.m.Fetched);let c=(0,$.R)(t),d=await this.decryptContent(c,(0,T.db)(s));return await this.progressStore.updateStatus(a,f.m.Ciphered),await this.downloadFile(n,i,d),await this.progressStore.updateStatus(a,f.m.Completed),(0,T.Vp)(void 0)}async getDownloadLink(e){try{let t=await (0,m.z)(this.serverApiClient.v1.securefile.getDownloadLink({key:e}));if(!(0,T.d6)(t))return(0,B.EQ)(t.error,{...(0,A.X)(e=>{throw Error("Unexpected server error while attempting to download remote secure file",{cause:e})}),BusinessError:()=>(0,T.Rn)((0,V.Kg)())});return(0,T.Vp)(t.data.data.url)}catch(e){throw Error("Unexpectedly unable to retrieve download link",{cause:e})}}async fetchDownloadLinkContent(e){let t=await this.fetchContent(e);if(!(0,T.d6)(t))return t;try{return(0,T.Vp)(new Uint8Array((0,T.db)(t)))}catch(e){throw Error("Unexpectedly unable to deserialize downloaded content",{cause:e})}}async fetchContent(e){try{let t=await (0,m.z)(this.httpClient.get(e,{observe:"body",responseType:"arraybuffer"}));if(!(0,T.d6)(t))return(0,B.EQ)(t.error,{...(0,A.X)(e=>{throw Error("Unexpectedly unable to fetch download link content",{cause:e})}),BadStatus:()=>(0,T.Rn)((0,V.Kg)())});return(0,T.Vp)(t.data)}catch(e){throw Error("Unexpectedly unable to fetch download link content",{cause:e})}}async decryptContent(e,t){try{return await this.flexibleDecryptor.decrypt(e,t)}catch(e){throw Error("Unexpectedly unable to decrypt downloaded content",{cause:e})}}async downloadFile(e,t,a){try{return await this.fileDownloadService.downloadFile(e,t,a)}catch(e){throw Error("Unexpectedly unable to download deciphered content",{cause:e})}}constructor(e,t,a,n,i){this.serverApiClient=e,this.flexibleDecryptor=t,this.fileDownloadService=a,this.progressStore=n,this.httpClient=i}}X=(0,n.gn)([(0,x.W)(Z.J),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===E.l?Object:E.l,void 0===q.a?Object:q.a,void 0===Q._?Object:Q._,_,void 0===S.e?Object:S.e])],X);var J=a(70410),ee=a(62274);class et{async execute(){let e=await (0,m.z)(this.serverApiClient.v1.securefile.getUploadLink({contentLength:0,secureFileInfoId:(0,J.Z)()}));if((0,T.hx)(e))throw Error("Unabled to get quota data from server.");let{max:t,remaining:a}=(0,T.db)(e).data.quota;return await this.secureFilesQuotaStore.set({max:t,remaining:a}),(0,T.Vp)(void 0)}constructor(e,t){this.secureFilesQuotaStore=e,this.serverApiClient=t}}et=(0,n.gn)([(0,x.W)(ee.S),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[H,void 0===E.l?Object:E.l])],et);var ea=a(57178),en=a(78517),ei=a(47244),eo=a(58060);class er{async execute({body:{vaultItemId:e,attachment:t}}){let a=await this.addAttachmentToVaultItem(e,t);return(0,T.hx)(a)?(this.anomalyReporter.commands.reportAnomaly({criticality:"warning",message:"failed to add new attachment to vault item",moduleName:"secure-files",useCaseName:"AttachToVaultItemCommand",applicationComponent:"",anomalyType:"other"}),a):(0,T.Vp)(void 0)}async addAttachmentToVaultItem(e,t){let a=await (0,m.z)(this.vaultItemsCrud.queries.query({ids:[e],vaultItemTypes:[ea.U.SecureNote,ea.U.Secret]}));if((0,T.hx)(a))return(0,T.Rn)((0,y.TW)());let{secretsResult:n,secureNotesResult:i}=a.data,o=n.items[0]??i.items[0];if(!o)return(0,T.Rn)((0,y.xy)());let r=(o.attachments??[]).concat(t),s=await this.vaultItemsCrud.commands.updateVaultItem({vaultItemType:o.kwType,id:o.id,content:{...o,attachments:r}});return(0,T.hx)(s)?(0,T.Rn)((0,y.fK)()):(await this.temporarySecureFileAttachmentStore.remove(t.id),(0,T.Vp)(void 0))}constructor(e,t,a){this.vaultItemsCrud=e,this.temporarySecureFileAttachmentStore=t,this.anomalyReporter=a}}er=(0,n.gn)([(0,x.W)(en.b),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===ei.L?Object:ei.L,F,void 0===eo.G?Object:eo.G])],er);var es=a(97903);class ec{async execute({body:{attachmentId:e}}){let t=await this.secureFilesClient.commands.deleteSecureFile({id:e});return(0,T.hx)(t)?t:(await this.temporarySecureFileAttachment.remove(e),(0,T.Vp)(void 0))}constructor(e,t){this.temporarySecureFileAttachment=e,this.secureFilesClient=t}}ec=(0,n.gn)([(0,x.W)(es.E),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[F,void 0===R.v?Object:R.v])],ec);var ed=a(77593);class el{async execute(){let e=Object.keys(await this.temporarySecureFileAttachment.getState()).map(e=>this.secureFilesClient.commands.deleteSecureFile({id:e}));return(await Promise.all(e)).some(T.hx)&&this.anomalyReporter.commands.reportAnomaly({criticality:"warning",message:"failed to delete secure files from discarding vault item",moduleName:"secure-files",useCaseName:"RemoveAllTemporaryAttachmentCommand",applicationComponent:"",anomalyType:"other"}),await this.temporarySecureFileAttachment.clear(),(0,T.Vp)(void 0)}constructor(e,t,a){this.temporarySecureFileAttachment=e,this.secureFilesClient=t,this.anomalyReporter=a}}el=(0,n.gn)([(0,x.W)(ed.j),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[F,void 0===R.v?Object:R.v,void 0===eo.G?Object:eo.G])],el);var eu=a(62325),em=a(51870),eg=a(72151);class ep extends eu.P{async handleUploadedFile(e){let{id:t,fileName:a,mimeType:n,content:i}=e,o=!!t;if(!a||!n)return;let r=await this.uploadSecureFileService.uploadSecureFile(a,n,i);if((0,T.hx)(r)){this.anomalyReporter.commands.reportAnomaly({criticality:"warning",message:"failed to upload secure file",moduleName:"secure-files",useCaseName:"SecureFileUploadedEventHandler",applicationComponent:"",anomalyType:"other"});return}let{data:s}=r;o&&await this.secureFiles.commands.attachToVaultItem({vaultItemId:t,attachment:s})}constructor(e,t,a){super(O.I),this.uploadSecureFileService=e,this.secureFiles=t,this.anomalyReporter=a}}ep=(0,n.gn)([(0,em.b)(eg.W),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===w?Object:w,void 0===R.v?Object:R.v,void 0===eo.G?Object:eo.G])],ep);var eS=a(42589),eA=a(29742),eh=a(62506);class eN{execute({body:e}){return this.progressStore.state$.pipe((0,eS.U)(t=>t[e.secureFileKey]??{status:f.m.NotStarted}),(0,eS.U)(T.Vp),(0,eA.x)(()=>{e.clearOnUnsubscribe&&this.progressStore.clear()}))}constructor(e){this.progressStore=e}}eN=(0,n.gn)([(0,eh.e)(f.J),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[_])],eN);var eE=a(98323);class eI{execute(){return this.quotaStore.state$.pipe((0,eS.U)(e=>(0,T.Vp)(e)))}constructor(e){this.quotaStore=e}}eI=(0,n.gn)([(0,eh.e)(eE.l),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[H])],eI);var eC=a(36884),ev=a(84864);let eT=(e,t)=>Object.fromEntries(Object.entries(e).map(([e,a])=>[e,t(a)]));class eB{execute({body:{clearOnUnsubscribe:e}}){return(0,eC.a)([this.secureFileAttachmentStore.state$,this.progressStore.state$]).pipe((0,eS.U)(([e,t])=>{let a=eT(e,e=>t[e.id]??{status:f.m.NotStarted});return{attachmentById:e,progressById:a}}),(0,eS.U)(T.Vp),(0,eA.x)(()=>{e&&this.secureFileAttachmentStore.clear()}))}constructor(e,t){this.secureFileAttachmentStore=e,this.progressStore=t}}eB=(0,n.gn)([(0,eh.e)(ev.b),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[F,_])],eB);class ey{}ey=(0,n.gn)([(0,i.Y)({api:d.e,imports:[o.X,s.n,c.D,r.l],providers:[w],handlers:{commands:{deleteSecureFile:Y,downloadSecureFile:X,fetchSecureFileQuota:et,attachToVaultItem:er,removeTemporaryAttachment:ec,removeAllTemporaryAttachment:el},events:{...(0,i.g)(u.a,{fileUploaded:ep})},queries:{getSecureFileProgress:eN,getSecureFileQuota:eI,getTemporarySecureFileAttachments:eB}},stores:[_,H,F],domainName:"vault",requiredFeatureFlips:[l.a.SecureFilesMigration]})],ey)},6908:function(e,t,a){a.d(t,{z:()=>eU});var n=a(21636),i=a(48035),o=a(87253),r=a(41681),s=a(86716),c=a(22104),d=a(17507),l=a(94190);class u extends d.f{}u=(0,n.gn)([(0,l.GS)()],u);var m=a(37368),g=a(306),p=a(49247),S=a(57178),A=a(58429),h=a(17886),N=a(52235),E=a(79018),I=a(40226),C=a(60066),v=a(238);let T={[E.t.Mr]:"MR",[E.t.Mrs]:"MME",[E.t.Miss]:"MLLE",[E.t.Ms]:"MS",[E.t.Mx]:"MX",[E.t.NoneOfThese]:"NONE_OF_THESE"},B={[I.X.Black]:h.LR.BLACK,[I.X.Blue1]:h.LR.BLUE_1,[I.X.Blue2]:h.LR.BLUE_2,[I.X.Gold]:h.LR.GOLD,[I.X.Green1]:h.LR.GREEN_1,[I.X.Green2]:h.LR.GREEN_2,[I.X.Orange]:h.LR.ORANGE,[I.X.Red]:h.LR.RED,[I.X.Silver]:h.LR.SILVER,[I.X.White]:h.LR.WHITE},y={[C.z.Any]:N.z.PHONE_TYPE_ANY,[C.z.Fax]:N.z.PHONE_TYPE_FAX,[C.z.Landline]:N.z.PHONE_TYPE_LANDLINE,[C.z.Mobile]:N.z.PHONE_TYPE_MOBILE,[C.z.WorkFax]:N.z.PHONE_TYPE_WORK_FAX,[C.z.WorkLandline]:N.z.PHONE_TYPE_WORK_LANDLINE,[C.z.WorkMobile]:N.z.PHONE_TYPE_WORK_MOBILE},f=e=>e?Date.parse(e)/1e3:null,O={[S.U.Address]:e=>({addressFull:e.streetName,addressName:e.itemName,linkedPhone:e.linkedPhoneId,...e}),[S.U.BankAccount]:e=>({...e,bank:e.bankCode,localeFormat:e.country||v.c.US,name:e.accountName,owner:e.ownerName}),[S.U.Company]:e=>({name:e.companyName,...e}),[S.U.Credential]:e=>({login:e.username,otpUrl:e.otpURL,otpSecret:e.otpSecret,secondaryLogin:e.alternativeUsername,title:e.itemName,url:e.URL,linkedWebsites:{addedByUser:e.linkedURLs},protectWithMasterPassword:e.isSecured,useAutoLogin:e.autoLogin,onlyAutofillExactDomain:e.onlyForThisSubdomain,...e}),[S.U.DriversLicense]:e=>({...e,country:e.country??v.c.US,expirationDate:f(e.expirationDate),idNumber:e.idNumber??"",issueDate:f(e.issueDate),name:e.idName??"",spaceId:e.spaceId??"",state:e.state??""}),[S.U.Email]:e=>({email:e.emailAddress,emailName:e.itemName,...e}),[S.U.FiscalId]:e=>({...e,country:e.country??v.c.US,idNumber:e.fiscalNumber??"",spaceId:e.spaceId??"",teledeclarantNumber:e.teledeclarantNumber??""}),[S.U.IdCard]:e=>({...e,country:e.country??v.c.US,expirationDate:f(e.expirationDate),idNumber:e.idNumber??"",issueDate:f(e.issueDate),name:e.idName??"",spaceId:e.spaceId??""}),[S.U.Identity]:e=>({...e,title:e.title?T[e.title]:void 0}),[S.U.Passkey]:e=>({...e}),[S.U.Passport]:e=>({...e,country:e.country??v.c.US,expirationDate:f(e.expirationDate),idNumber:e.idNumber??"",issueDate:f(e.issueDate),name:e.idName??"",spaceId:e.spaceId??"",deliveryPlace:e.issuePlace??""}),[S.U.PaymentCard]:e=>({...e,cardName:e.itemName,color:e.color?B[e.color]:void 0,personalNote:e.note}),[S.U.Phone]:e=>({...e,phoneName:e.itemName,number:e.phoneNumber,type:e.type?y[e.type]:void 0}),[S.U.Secret]:e=>({...e,secured:e.isSecured}),[S.U.SecureNote]:e=>({secured:e.isSecured,...e}),[S.U.SocialSecurityId]:e=>({...e,country:e.country??v.c.US,idNumber:e.idNumber??"",name:e.idName??"",spaceId:e.spaceId??""}),[S.U.Website]:e=>({name:e.itemName,website:e.URL,...e})};class b{async execute({body:e}){let{vaultItemType:t,content:a,shouldSkipSync:n,origin:i}=e;if([S.U.DriversLicense,S.U.FiscalId,S.U.IdCard,S.U.Passport,S.U.SocialSecurityId].includes(t))return this.createId(t,a);if(t===S.U.Passkey)return this.createPasskey(a);let{commands:o}=this.carbonLegacyClient,r=await o.carbonLegacyLeeloo({name:"savePersonalDataItem",arg:[{kwType:t,origin:i||"MANUAL",content:O[t](a),shouldSkipSync:n}]});if((0,g.hx)(r))return this.handleError(t);let s=(0,g.db)(r).carbonResult;return this.handleSuccess(t,s.itemId)}handleError(e){return Promise.resolve((0,g.Rn)({tag:"error",errorMessage:`Failed to create ${e}`}))}handleSuccess(e,t){return this.eventEmitter.sendEvent("created",{ids:[t],vaultItemType:e}),Promise.resolve((0,g.Vp)({id:t}))}async createId(e,t){let{commands:{addDriverLicense:a,addFiscalId:n,addIdCard:i,addPassport:o,addSocialSecurityId:r}}=this.carbonLegacyClient,s={[S.U.DriversLicense]:a,[S.U.FiscalId]:n,[S.U.IdCard]:i,[S.U.Passport]:o,[S.U.SocialSecurityId]:r},c=await s[e](O[e](t));return(0,g.hx)(c)?this.handleError(e):this.handleSuccess(e,(0,g.db)(c).id)}async createPasskey(e){let{commands:{addPasskey:t}}=this.carbonLegacyClient,a=await t(e);return(0,g.hx)(a)?this.handleError(S.U.Passkey):this.handleSuccess(S.U.Passkey,(0,g.db)(a).id)}constructor(e,t){this.carbonLegacyClient=e,this.eventEmitter=t}}b=(0,n.gn)([(0,m.W)(A._),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===p._?Object:p._,void 0===u?Object:u])],b);var R=a(44577),P=a(75048),U=a(83533),D=a(51721),z=a(57033),F=a(42894),_=a(58060),L=a(32755),w=a(37937),k=a(43909),M=a(49499),x=a(64898),V=a(83463),G=a(69602),K=a(44893);let j=e=>(0,D.K)(e)&&"success"in e&&!1===e.success&&"error"in e&&(0,D.K)(e.error)&&"errors"in e.error&&Array.isArray(e.error.errors)&&e.error.errors.every(e=>(0,D.K)(e)&&"id"in e&&"string"==typeof e.id),H=e=>e.error.errors,W=Object.freeze({criticality:"critical",moduleName:"VaultItemsCrudModule",useCaseName:"DeleteVaultItemsBulkCommand",applicationComponent:"",anomalyType:"other"});class Y{async createActivityLogs(e){let t={};try{let a=await (0,R.z)(this.teamPlanDetailsClient.queries.getTeamId());if((0,g.d6)(a)){let{teamId:n}=(0,g.db)(a);n&&await Promise.allSettled(e.map(async e=>{try{let a=await this.vaultRepository.getCredential(e);a.SpaceId===n&&(t[e]=(0,G.Y)(L.b.UserDeletedCredential,{domain_url:new V.Y(a.Url).getRootDomain()}))}catch(e){this.anomalyReporter.commands.reportAnomaly({...W,message:"Unexpected error while retrieving credential to be deleted for activity logs",additionalInfo:String(e)})}}))}}catch(e){this.anomalyReporter.commands.reportAnomaly({...W,message:"Unexpected error while creating activity logs for credentials to be deleted",additionalInfo:String(e)})}return t}async doSharingConditionChecks({vaultItemType:e,vaultItemIds:t}){let a={canBeDeleted:[],cannotBeDeleted:[]};return await Promise.all(t.map(async t=>{try{let n=await this.sharingItemsClient.commands.refuseSharedItemBeforeDeletion({vaultItemId:t});(0,g.hx)(n)?(a.cannotBeDeleted.push(t),this.anomalyReporter.commands.reportAnomaly({...W,message:"Unexpected failure returned by the sharing conditions check of a vault item to delete in bulk",additionalInfo:JSON.stringify({vaultItemType:e,failure:(0,g.Yv)(n)})})):a.canBeDeleted.push(t)}catch(n){a.cannotBeDeleted.push(t),this.anomalyReporter.commands.reportAnomaly({...W,message:"Unexpected error occurred while handling sharing conditions of the vault item to delete in bulk",additionalInfo:JSON.stringify({vaultItemType:e,error:String(n)})})}})),a}async execute({body:e}){let{ids:t,vaultItemType:a,ignoreSharing:n=!1}=e,i=Array.from(new Set(t)),{found:o,notFound:r}=await this.vaultRepository.vaultItemsOfTypeExist(i,a);r.length>0&&this.anomalyReporter.commands.reportAnomaly({...W,message:"Vault items to delete could not be found",additionalInfo:JSON.stringify({vaultItemType:a,notFound:r.length,found:o.length})});let s=o,c=[...r];if(!n&&(0,k.RP)(a)){let e=await this.doSharingConditionChecks({vaultItemType:a,vaultItemIds:s});s=e.canBeDeleted,c.push(...e.cannotBeDeleted)}let d=!n&&s.length>0&&a===S.U.Credential?await this.createActivityLogs(s):null,l=s.length>0?await this.carbonLegacyClient.commands.deleteVaultModuleItemsBulk({kwType:a,items:s.map(e=>({id:e}))}):null;if(null!==l&&(0,g.hx)(l))throw Error("Unexpected failure trying to bulk-delete vault items of type from Carbon",{cause:{failure:(0,g.Yv)(l)}});let u=s,m=l&&(0,g.db)(l);if(j(m)){let e=H(m);u=(0,P.Z)(s,e.map(({id:e})=>e)),this.anomalyReporter.commands.reportAnomaly({...W,message:"Errors returned by Carbon when attempting to delete Vault Items in Bulk",additionalInfo:JSON.stringify({vaultItemType:a,carbonDeletionErrors:e})})}u.length>0&&(this.eventEmitter.sendEvent("deleted",{ids:u,vaultItemType:a}),this.carbonLegacyClient.commands.removeItemsFromCollections({ids:u})),this.syncClient.commands.sync({trigger:U.Trigger.Save});let p=d&&u.map(e=>d[e]).filter(Boolean);return(Array.isArray(p)&&p.length>0&&this.activityLogsClient.commands.storeActivityLogs({activityLogs:p}),u.length!==i.length)?(0,g.Rn)((0,z.nO)(c)):(0,g.Vp)(void 0)}constructor(e,t,a,n,i,o,r,s){this.carbonLegacyClient=e,this.eventEmitter=t,this.syncClient=a,this.vaultRepository=n,this.sharingItemsClient=i,this.teamPlanDetailsClient=o,this.activityLogsClient=r,this.anomalyReporter=s}}Y=(0,n.gn)([(0,m.W)(z.cR),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===p._?Object:p._,void 0===u?Object:u,void 0===F.Q?Object:F.Q,void 0===K.g?Object:K.g,void 0===M.s?Object:M.s,void 0===x.e?Object:x.e,void 0===w._?Object:w._,void 0===_.G?Object:_.G])],Y);var Q=a(63154),q=a(9810),Z=a(91682),$=a(53978),X=a(79755),J=a(94680);let ee=e=>(0,D.K)(e)&&"success"in e&&!1===e.success&&"error"in e&&(0,D.K)(e.error),et=e=>e.error,ea=e=>"reason"in e&&"string"==typeof e.reason?e.reason:null,en=Object.freeze({criticality:"critical",moduleName:"VaultItemsCrudModule",useCaseName:"DeleteVaultItemCommand",applicationComponent:"",anomalyType:"other"});class ei{async createActivityLog(e){try{let[t,a]=await Promise.all([(0,R.z)(this.teamPlanDetailsClient.queries.getTeamId()),this.vaultRepository.getCredential(e)]);if((0,g.d6)(t)&&(0,g.db)(t).teamId===a.SpaceId)return(0,G.Y)(L.b.UserDeletedCredential,{domain_url:new V.Y(a.Url).getRootDomain()})}catch(e){this.anomalyReporter.commands.reportAnomaly({...en,message:"Unexpected error while creating the activity log for a credential to be deleted",additionalInfo:String(e)})}}async checkSharingDeleteRestrictions(e,t){if((0,k.RP)(e))try{let a=await this.sharingItemsClient.commands.refuseSharedItemBeforeDeletion({vaultItemId:t});if((0,g.hx)(a)){let t=(0,g.Yv)(a);switch(this.anomalyReporter.commands.reportAnomaly({...en,message:"Unexpected failure returned by the sharing conditions check of the vault item to delete",additionalInfo:JSON.stringify({vaultItemType:e,failure:t})}),t.tag){case Z.m$.FORBIDDEN_GROUP_ITEM:return(0,g.Rn)((0,Z.Vf)());case Z.m$.FORBIDDEN_LAST_ADMIN:return(0,g.Rn)((0,$.V$)());default:throw Error("Unhandled failure returned by the sharing conditions check of the vault item to delete",{cause:{failure:t}})}}}catch(e){throw Error("Unexpected error occurred while handling sharing conditions of the vault item to delete",{cause:e})}return(0,g.Vp)(void 0)}async deletePasskeyOnNitro(e){let t=await (0,R.z)(this.vaultRepository.fetchVaultItems$({vaultItemTypes:[S.U.Passkey],ids:[e]})),a=(0,g.db)(t).passkeysResult.items;if(1!==a.length)return this.anomalyReporter.commands.reportAnomaly({...en,message:"Passkey item to delete could not be retrieved",additionalInfo:JSON.stringify({vaultItemType:S.U.Passkey})}),(0,g.Rn)((0,$.sA)());let n=a[0];if((0,X.T5)(n)){let{passkeys:e}=this.enclaveApiClient,t=await e.deletePasskey({passkeyId:n.cloudPasskey.PasskeyId,encryptionKey:{uuid:n.cloudPasskey.PasskeyEncryptionKeyId,key:n.cloudPasskey.PasskeyEncryptionKey}});if((0,g.hx)(t)&&t.error.code!==q.r.PASSKEY_NOT_FOUND)return this.anomalyReporter.commands.reportAnomaly({...en,message:"Unable to delete the passkey in Nitro",additionalInfo:JSON.stringify({vaultItemType:S.U.Passkey})}),(0,g.Rn)((0,$.T$)())}return(0,g.Vp)(void 0)}async execute({body:e}){let{vaultItemType:t,id:a,ignoreSharing:n=!1}=e,{notFound:i}=await this.vaultRepository.vaultItemsOfTypeExist([a],t);if(i.length>0)return this.anomalyReporter.commands.reportAnomaly({...en,message:"Vault item to delete could not be found",additionalInfo:JSON.stringify({vaultItemType:t})}),(0,g.Rn)((0,$.sA)());if(!n){let e=await this.checkSharingDeleteRestrictions(t,a);if((0,g.hx)(e))return e}if(t===S.U.Passkey){let e=await this.deletePasskeyOnNitro(a);if((0,g.hx)(e))return e}let o=n||t!==S.U.Credential?null:await this.createActivityLog(a)??null,r=await this.carbonLegacyClient.commands.deleteVaultModuleItem({id:a,kwType:t});if((0,g.hx)(r))throw Error("Unexpected failure trying to delete vault item of type from Carbon",{cause:{failure:(0,g.Yv)(r)}});let s=(0,g.db)(r);if(ee(s)){let e=et(s),a=ea(e);if(a===Q.zC.NOT_FOUND)return this.anomalyReporter.commands.reportAnomaly({...en,criticality:"warning",message:"Vault item to delete could not be found during Carbon deletion",additionalInfo:JSON.stringify({vaultItemType:t})}),(0,g.Rn)((0,$.sA)());throw Error("Unexpected failure trying to delete vault item of type from Carbon",{cause:{vaultItemType:t,error:e,reason:a}})}return this.eventEmitter.sendEvent("deleted",{ids:[a],vaultItemType:t}),await this.carbonLegacyClient.commands.removeItemsFromCollections({ids:[a]}),await this.syncClient.commands.sync({trigger:U.Trigger.Save}),null!==o&&this.activityLogsClient.commands.storeActivityLogs({activityLogs:[o]}),(0,g.Vp)(void 0)}constructor(e,t,a,n,i,o,r,s,c){this.carbonLegacyClient=e,this.eventEmitter=t,this.syncClient=a,this.vaultRepository=n,this.sharingItemsClient=i,this.teamPlanDetailsClient=o,this.activityLogsClient=r,this.anomalyReporter=s,this.enclaveApiClient=c}}ei=(0,n.gn)([(0,m.W)($.io),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===p._?Object:p._,void 0===u?Object:u,void 0===F.Q?Object:F.Q,void 0===K.g?Object:K.g,void 0===M.s?Object:M.s,void 0===x.e?Object:x.e,void 0===w._?Object:w._,void 0===_.G?Object:_.G,void 0===J.l?Object:J.l])],ei);var eo=a(86933);let er=Object.freeze({criticality:"critical",moduleName:"VaultItemsCrudModule",useCaseName:"DeleteChangeHistoryForVaultItemsCommand",applicationComponent:"",anomalyType:"other"}),es=e=>(0,D.K)(e)&&"success"in e&&!1===e.success&&"error"in e&&(0,D.K)(e.error)&&"errors"in e.error&&Array.isArray(e.error.errors)&&e.error.errors.every(e=>(0,D.K)(e)&&"id"in e&&"string"==typeof e.id),ec=e=>e.error.errors;class ed{async execute({body:e}){let{ids:t}=e,a=Array.from(new Set(t)),n=await (0,R.z)(this.carbonLegacyClient.queries.carbonState({path:"userSession.personalData.changeHistories"}));if((0,g.hx)(n)||!Array.isArray(n.data))throw Error("Failure getting password history state from carbon");let i=n.data.filter(e=>a.includes(e.ObjectId)),o=await this.carbonLegacyClient.commands.deleteVaultModuleItemsBulk({kwType:"KWDataChangeHistory",items:i.map(e=>({id:e.Id}))});if((0,g.hx)(o))throw Error("Unexpected failure trying to delete change histories from Carbon",{cause:{failure:(0,g.Yv)(o)}});let r=(0,g.db)(o);if(es(r)){let e=ec(r);this.anomalyReporter.commands.reportAnomaly({...er,message:"Errors returned by Carbon when attempting to delete Change Histories",additionalInfo:JSON.stringify({carbonDeletionErrors:e})})}return(0,g.Vp)(void 0)}constructor(e,t){this.carbonLegacyClient=e,this.anomalyReporter=t}}ed=(0,n.gn)([(0,m.W)(eo.X),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===p._?Object:p._,void 0===_.G?Object:_.G])],ed);var el=a(58380);class eu{async execute({body:e}){let{content:t,id:a,vaultItemType:n,shouldSkipSync:i}=e;if([S.U.DriversLicense,S.U.FiscalId,S.U.IdCard,S.U.Passport,S.U.SocialSecurityId].includes(n))return this.updateId(n,t,a);if(n===S.U.Passkey)return this.updatePasskey(t,a);let{commands:o}=this.carbonLegacyClient,r=await o.carbonLegacyLeeloo({name:"savePersonalDataItem",arg:[{kwType:n,origin:"MANUAL",content:{...O[n](t),id:a},shouldSkipSync:i}]});return(0,g.hx)(r)?Promise.resolve((0,g.Rn)({tag:"error",errorMessage:`Failed to update ${n}`})):(this.eventEmitter.sendEvent("updated",{ids:[a],vaultItemType:n}),Promise.resolve((0,g.Vp)(void 0)))}handleError(e){return Promise.resolve((0,g.Rn)({tag:"error",errorMessage:`Failed to update ${e}`}))}handleSuccess(e,t){return this.eventEmitter.sendEvent("updated",{ids:[t],vaultItemType:e}),Promise.resolve((0,g.Vp)(void 0))}async updateId(e,t,a){let{commands:{editDriverLicense:n,editFiscalId:i,editIdCard:o,editPassport:r,editSocialSecurityId:s}}=this.carbonLegacyClient,c={[S.U.DriversLicense]:n,[S.U.FiscalId]:i,[S.U.IdCard]:o,[S.U.Passport]:r,[S.U.SocialSecurityId]:s},d=await c[e]({...O[e](t),id:a});return(0,g.hx)(d)?this.handleError(e):this.handleSuccess(e,a)}async updatePasskey(e,t){let{commands:{updatePasskey:a}}=this.carbonLegacyClient,n=await a({...e,id:t});return(0,g.hx)(n)?this.handleError(S.U.Passkey):this.handleSuccess(S.U.Passkey,t)}constructor(e,t){this.carbonLegacyClient=e,this.eventEmitter=t}}eu=(0,n.gn)([(0,m.W)(el.K),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===p._?Object:p._,void 0===u?Object:u])],eu);var em=a(9852);class eg{execute({body:e}){let{ids:t,eventType:a}=e;return this.eventEmitter.sendEvent(a,{ids:t,vaultItemType:S.U.Credential}),Promise.resolve((0,g.Vp)(void 0))}constructor(e){this.eventEmitter=e}}eg=(0,n.gn)([(0,m.W)(em.c),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===u?Object:u])],eg);var ep=a(62506),eS=a(69140),eA=a(17741),eh=a(94846),eN=a(76957),eE=a(87169),eI=a(19242);let eC=e=>eI.x.safeParse(e).success;class ev{execute({body:{domain:e}}){let{queries:{carbonState:t}}=this.carbonLegacyClient;return t({path:"userSession.iconsCache.domains"}).pipe((0,eA.Qn)(t=>{if(!eC(t))throw Error("Bad domain icons cache format");return t.get((0,eN.k)(this.md5Hasher.compute((0,eE.u)(e))))}))}constructor(e,t){this.carbonLegacyClient=e,this.md5Hasher=t}}ev=(0,n.gn)([(0,ep.e)(eS.s),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===p._?Object:p._,void 0===eh.f?Object:eh.f])],ev);var eT=a(42230);class eB{execute({body:e}){return this.vaultRepository.fetchVaultItems$(e)}constructor(e){this.vaultRepository=e}}eB=(0,n.gn)([(0,ep.e)(eT.W),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===K.g?Object:K.g])],eB);var ey=a(3078);class ef{execute(){let{queries:{carbonState:e}}=this.carbonLegacyClient;return e({path:"userSession.personalSettings.ProtectPasswords"}).pipe((0,eA.Qn)(e=>{if("boolean"!=typeof e)throw Error("Fail to get ProtectPasswords setting");return e}))}constructor(e){this.carbonLegacyClient=e}}ef=(0,n.gn)([(0,ep.e)(ey.R),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===p._?Object:p._])],ef);var eO=a(15804),eb=a(69877);let eR=e=>{if(!e||!(0,eb.u)(e.spaces))return{richIconsEnabled:!0};let t=e.spaces.find(e=>"accepted"===e.status);return{richIconsEnabled:t?.info.richIconsEnabled??!0}};class eP{get(){let{getNodePremiumStatus:e}=this.carbon.queries;return e().pipe((0,eA.Qn)(eR))}execute(){return this.get().pipe((0,eA.Qn)(e=>e.richIconsEnabled))}constructor(e){this.carbon=e}}eP=(0,n.gn)([(0,ep.e)(eO.M),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===p._?Object:p._])],eP);class eU{}eU=(0,n.gn)([(0,i.Y)({api:r.L,handlers:{commands:{createVaultItem:b,deleteVaultItems:Y,deleteVaultItem:ei,deleteChangeHistoryForVaultItems:ed,updateVaultItem:eu,emitTemporaryVaultItemEvent:eg},events:{},queries:{domainIconDetails:ev,query:eB,credentialsGloballyProtected:ef,richIconsEnabled:eP}},imports:[o.D,c.G],providers:[u,K.g],requiredFeatureFlips:Object.values(s.j),domainName:"vault"})],eU)},14952:function(e,t,a){a.d(t,{K:()=>C});var n=a(21636),i=a(48035),o=a(6502),r=a(59982),s=a(68238),c=a(15021),d=a(20458);let l=e=>!!e&&"object"==typeof e&&"isCollectionGuidedIntroEnabled"in e,u={isCollectionGuidedIntroEnabled:!0,hasSeenFreeUserFrozenState:!1};class m extends(0,r.Q)({persist:!0,storage:{initialValue:u,typeGuard:l,schemaVersion:2,migrateStorageSchema:()=>({isCollectionGuidedIntroEnabled:!0,hasSeenFreeUserFrozenState:!1})},scope:c.F.User,storeName:"vault-notifications",capacity:s.Y._001KB,codec:d.E}){}var g=a(37368),p=a(306),S=a(48721);class A{async execute({body:e}){let{notificationName:t,isEnabled:a}=e;try{let e=await this.store.getState();return await this.store.set({...e,[t]:a}),(0,p.Vp)(void 0)}catch{throw Error("SetVaultNotificationsStatus command from vault-core failed")}}constructor(e){this.store=e}}A=(0,n.gn)([(0,g.W)(S.x),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[m])],A);var h=a(42589),N=a(62506),E=a(30547);class I{execute(){return this.store.state$.pipe((0,h.U)(p.Vp))}constructor(e){this.store=e}}I=(0,n.gn)([(0,N.e)(E.M),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[m])],I);class C{}C=(0,n.gn)([(0,i.Y)({api:o.e,handlers:{commands:{setVaultNotificationsStatus:A},events:{},queries:{getVaultNotificationsStatus:I}},stores:[m]})],C)},33762:function(e,t,a){a.d(t,{H:()=>D});var n=a(21636),i=a(48035),o=a(4631),r=a(44577),s=a(51105),c=a(37368),d=a(49247),l=a(306),u=a(83533),m=a(32755),g=a(37937),p=a(17741);let S=e=>!!Array.isArray(e)&&(0===e.length||e.every(e=>"string"==typeof e.Id&&"string"==typeof e.Name&&Array.isArray(e.VaultItems)));function A(e,t){let{queries:{carbonState:a}}=e;return a({path:"userSession.personalData.collections"}).pipe((0,p.Qn)(e=>{if(!S(e))throw Error("Collection array has a wrong format");return{collections:(t&&t.length>0?e.filter(e=>t.includes(e.Id)):e).map(e=>({id:e.Id,name:e.Name,spaceId:e.SpaceId??"",vaultItems:e.VaultItems.map(e=>({id:e.Id,type:e.Type}))}))}}))}function h(e,t,a,n){let i=new u.UserUpdateCollectionEvent({collectionId:a,action:t,itemCount:n,isShared:!1});return e.commands.carbon({name:"logEvent",args:[{event:i}]})}var N=a(69602);class E{async execute({body:e}){let{id:t,name:a=""}=e,n=await (0,r.z)(A(this.carbonLegacyClient,[t]));if((0,l.hx)(n))throw Error(`Failed to fetch additional collection info: ${n.error}`);let i=await this.carbonLegacyClient.commands.carbon({name:"deleteCollection",args:[{id:t}]});if((0,l.hx)(i))throw Error(`Failed to delete collection: ${i.error}`);h(this.carbonLegacyClient,u.CollectionAction.Delete,t,n.data.collections[0]?.vaultItems?.length);let o=(0,N.Y)(m.b.UserDeletedCollection,{collection_name:a});return this.activityLogs.commands.storeActivityLogs({activityLogs:[o]}),Promise.resolve((0,l.Vp)(void 0))}constructor(e,t){this.carbonLegacyClient=e,this.activityLogs=t}}E=(0,n.gn)([(0,c.W)(s.T),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===d._?Object:d._,void 0===g._?Object:g._])],E);var I=a(39771),C=a(18550);let v=e=>"object"==typeof e&&null!==e&&(0,C.l$)(e,"id")&&"string"==typeof e.id&&(0,C.l$)(e,"success")&&"boolean"==typeof e.success;class T{async execute({body:e}){let{content:{name:t,spaceId:a="",vaultItems:n=[]}}=e,i=await this.carbonLegacy.commands.carbon({name:"addCollection",args:[{name:t,spaceId:a,vaultItems:n}]});if((0,l.hx)(i))throw Error(`Failed to create collection: ${i.error}`);if(!v(i.data.carbonResult))throw Error("Failed to find created collection id");if(a){let e=[(0,N.Y)(m.b.UserCreatedCollection,{collection_name:t})];this.activityLogs.commands.storeActivityLogs({activityLogs:e})}return h(this.carbonLegacy,u.CollectionAction.Add,i.data.carbonResult.id,n.length),n.length&&h(this.carbonLegacy,u.CollectionAction.AddCredential,i.data.carbonResult.id,n.length),(0,l.Vp)({id:i.data.id})}constructor(e,t){this.activityLogs=e,this.activityLogs=e,this.carbonLegacy=t}}T=(0,n.gn)([(0,c.W)(I.e),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===g._?Object:g._,void 0===d._?Object:d._])],T);var B=a(17242),y=a(57178),f=a(47244),O=a(83463);class b{async execute({body:e}){let t;let{id:a,collection:n,operationType:i=B.C.APPEND_VAULT_ITEMS}=e,o=await (0,r.z)(A(this.carbonLegacyClient,[a]));if((0,l.hx)(o))throw Error(`Failed to fetch additional collection info: ${o.error}`);let s=o.data.collections[0];if(n.vaultItems){let e=await (0,r.z)(this.vaultItemsCrudClient.queries.query({vaultItemTypes:[y.U.Credential,y.U.SecureNote],ids:n.vaultItems.map(e=>e.id)}));if((0,l.hx)(e))throw Error("Unable to find items in collection");let a=e.data.credentialsResult.items,o=e.data.secureNotesResult.items,c=[...a.map(e=>({id:e.id,type:y.U.Credential,url:e.URL})),...o.map(e=>({id:e.id,type:y.U.SecureNote}))];t={id:n.id,name:n.name,spaceId:n.spaceId,vaultItems:c},s.vaultItems=this.mutateCollectionVaultItems(s,i,c)}else t={id:n.id,name:n.name,spaceId:n.spaceId};let c=await this.carbonLegacyClient.commands.carbon({name:"updateCollection",args:[{id:s.id,name:n.name??s.name,spaceId:n.spaceId??s.spaceId,vaultItems:s.vaultItems}]});if((0,l.hx)(c))throw Error(`Failed to update collection: ${c.error}`);return this.handleLogs(s,t,i),Promise.resolve((0,l.Vp)(void 0))}handleLogs(e,t,a){let n=null,i={};if(t.name&&(h(this.carbonLegacyClient,u.CollectionAction.Edit,e.id,e.vaultItems.length),t.name!==e.name&&(n=m.b.UserRenamedCollection,i.collection_name=t.name,i.old_collection_name=e.name)),t.vaultItems&&(h(this.carbonLegacyClient,a===B.C.SUBSTRACT_VAULT_ITEMS?u.CollectionAction.DeleteCredential:u.CollectionAction.AddCredential,e.id,1),t.vaultItems[0]?.type===y.U.Credential&&(n=a===B.C.APPEND_VAULT_ITEMS?m.b.UserAddedCredentialToCollection:m.b.UserRemovedCredentialFromCollection,i.collection_name=e.name,i.domain_url=new O.Y(t.vaultItems[0].url).getRootDomain())),e.spaceId&&n){let e=(0,N.Y)(n,i);this.activityLogs.commands.storeActivityLogs({activityLogs:[e]})}}getDeduplicatedList(e){return[...new Map(e.map(e=>[e.id,e])).values()]}mutateCollectionVaultItems(e,t,a){return t===B.C.SUBSTRACT_VAULT_ITEMS?e.vaultItems.filter(e=>!a.some(t=>t.id===e.id)):this.getDeduplicatedList([...e.vaultItems,...a])}constructor(e,t,a){this.carbonLegacyClient=e,this.activityLogs=t,this.vaultItemsCrudClient=a}}b=(0,n.gn)([(0,c.W)(B.s),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===d._?Object:d._,void 0===g._?Object:g._,void 0===f.L?Object:f.L])],b);var R=a(94314),P=a(62506);class U{execute({body:e}){let{ids:t}=e;return A(this.carbonLegacyClient,t)}constructor(e){this.carbonLegacyClient=e}}U=(0,n.gn)([(0,P.e)(R.I),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===d._?Object:d._])],U);class D{}D=(0,n.gn)([(0,i.Y)({api:o.v,handlers:{commands:{deleteCollection:E,createCollection:T,updateCollection:b},events:{},queries:{queryCollections:U}},requiredFeatureFlips:["vault_web_popupSavedState_release"]})],D)},69602:function(e,t,a){a.d(t,{Y:()=>n});let n=(e,t)=>({date_time:new Date().getTime(),log_type:e,properties:t,schema_version:"1.0.0",uuid:crypto.randomUUID().toUpperCase()})},69877:function(e,t,a){a.d(t,{u:()=>n});let n=e=>(function(e,t){if(!Array.isArray(e))return!1;if(0===e.length)return!0;let a=e[0];for(let e=0;e<t.length;e++){let n=t[e];if(!Object.prototype.hasOwnProperty.call(a,n))return!1}return!0})(e,["teamId"])},74558:function(e,t,a){a.d(t,{Ho:()=>i,Ue:()=>s,p6:()=>r,pu:()=>o});var n=a(24122);function i(e,t){return e in t}function o(e){let t={};for(let a in e)t[a.charAt(0).toLowerCase()+a.slice(1)]=e[a];return t}let r=e=>{if(!e||3!==e.split("-").length)return"";let t=e.split("-"),a=Number(t[0]),i=Number(t[1])-1,o=Number(t[2]);return(0,n.Z)(new Date(a,i,o),"yyyy-MM-dd")},s=e=>"string"!=typeof e?"":e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase()},44893:function(e,t,a){a.d(t,{g:()=>em});var n=a(21636),i=a(36884),o=a(42589),r=a(69853),s=a(72907),c=a(81433),d=a(44577),l=a(94190),u=a(306),m=a(17741),g=a(63154),p=a(49247),S=a(57178),A=a(23791),h=a(53978),N=a(36649),E=a(74558),I=a(84809);function C(e,t){return!!Array.isArray(e)&&(0===e.length||e[0].kwType===t)}let v=e=>C(e,S.U.Secret),T=e=>{let{LocaleFormat:t,Secured:a,...n}=e;return{...(0,E.pu)(n),isSecured:a}};var B=a(1010);let y=e=>C(e,S.U.Credential),f=e=>C(e,S.U.Address),O=e=>C(e,S.U.Company),b=e=>C(e,S.U.Email),R=e=>C(e,S.U.Identity),P=e=>C(e,S.U.Phone),U=e=>C(e,S.U.Website);var D=a(69877);let z=e=>{let{AddressName:t,LinkedPhone:a,StreetName:n,AddressFull:i,StateLevel2:o,...r}=e;return{...(0,E.pu)(r),itemName:t,linkedPhoneId:a,streetName:n||i}},F=e=>C(e,S.U.BankAccount),_=e=>{let{BankAccountName:t,BankAccountOwner:a,BankAccountIBAN:n,BankAccountBIC:i,BankAccountBank:o,...r}=e,s=o?.split("-"),c=s?.length>1?s[1]??o:o;return{...(0,E.pu)(r),accountName:t,bankCode:c||"",BIC:i,country:r.LocaleFormat,IBAN:n,ownerName:a}},L=e=>{let{Name:t,PersonalNote:a,LocaleFormat:n,...i}=e;return{...(0,E.pu)(i),companyName:t}},w=e=>{let{CreationDatetime:t,Email:a,Id:n,LastBackupTime:i,LastUse:o,LinkedServices:r,Login:s,Note:c,OtpSecret:d,OtpUrl:l,Password:u,SecondaryLogin:m,SpaceId:g,Title:p,Url:S,UserModificationDatetime:A,UserSelectedUrl:h,kwType:N,AutoProtected:I,AutoLogin:C,SubdomainOnly:v}=e;return{...(0,E.pu)({CreationDatetime:t,Email:a,Id:n,LastBackupTime:i,LastUse:o,Note:c,Password:u,SpaceId:g,UserModificationDatetime:A}),alternativeUsername:m,itemName:p??"",linkedURLs:r?.associated_domains.map(e=>e.domain)??[],kwType:N,otpURL:l,otpSecret:d,URL:S||h||"",username:s,isSecured:I??!1,autoLogin:C??!1,onlyForThisSubdomain:v??!1}},k=e=>C(e,S.U.DriversLicense),M=e=>C(e,S.U.FiscalId),x=e=>C(e,S.U.IdCard),V=e=>C(e,S.U.Passport),G=e=>C(e,S.U.SocialSecurityId),K=e=>e?[e.FirstName,e.MiddleName,e.LastName,e.LastName2].filter(Boolean).join(" "):"",j=(e,t)=>{let{DeliveryDate:a,ExpireDate:n,Fullname:i,Number:o,DateOfBirth:r,Sex:s,...c}=e;return{...(0,E.pu)(c),idName:K(t)||i||"",idNumber:o,issueDate:(0,E.p6)(a),expirationDate:(0,E.p6)(n),country:c.LocaleFormat}},H=e=>{let{EmailName:t,Email:a,Type:n,LocaleFormat:i,...o}=e;return{...(0,E.pu)(o),itemName:t,emailAddress:a,type:n}},W=e=>{let{kwType:t}=e;return{...(0,E.pu)(e),kwType:t,country:e.LocaleFormat}},Y=(e,t)=>{let{DateOfBirth:a,DeliveryDate:n,ExpireDate:i,Fullname:o,Number:r,Sex:s,...c}=e;return{...(0,E.pu)(c),idName:K(t)||o||"",idNumber:r,issueDate:(0,E.p6)(n),expirationDate:(0,E.p6)(i),country:c.LocaleFormat}};var Q=a(79018);let q={"":void 0,MR:Q.t.Mr,MME:Q.t.Mrs,MLLE:Q.t.Miss,MS:Q.t.Ms,MX:Q.t.Mx,NONE_OF_THESE:Q.t.NoneOfThese},Z=e=>{let{Title:t,LocaleFormat:a,...n}=e;return{...(0,E.pu)(n),title:q[t]}},$=e=>C(e,S.U.Passkey),X=(e,t)=>{let{DeliveryDate:a,DeliveryPlace:n,ExpireDate:i,Fullname:o,Number:r,DateOfBirth:s,Sex:c,...d}=e;return{...(0,E.pu)(d),idName:K(t)||o||"",idNumber:r||"",issueDate:(0,E.p6)(a),issuePlace:n||"",expirationDate:(0,E.p6)(i),country:d.LocaleFormat}},J=e=>C(e,S.U.PaymentCard);var ee=a(40226);let et={BLACK:ee.X.Black,BLUE_1:ee.X.Blue1,BLUE_2:ee.X.Blue2,GOLD:ee.X.Gold,GREEN_1:ee.X.Green1,GREEN_2:ee.X.Green2,ORANGE:ee.X.Orange,RED:ee.X.Red,SILVER:ee.X.Silver,WHITE:ee.X.White},ea=e=>{let{Name:t,CCNote:a,Color:n,Bank:i,CardNumberLastDigits:o,IssueNumber:r,StartMonth:s,StartYear:c,Type:d,LocaleFormat:l,...u}=e;return{...(0,E.pu)(u),itemName:t,color:et[n],note:a||""}};var en=a(52235),ei=a(60066);let eo={[en.z.PHONE_TYPE_ANY]:ei.z.Any,[en.z.PHONE_TYPE_FAX]:ei.z.Fax,[en.z.PHONE_TYPE_LANDLINE]:ei.z.Landline,[en.z.PHONE_TYPE_MOBILE]:ei.z.Mobile,[en.z.PHONE_TYPE_WORK_FAX]:ei.z.WorkFax,[en.z.PHONE_TYPE_WORK_LANDLINE]:ei.z.WorkLandline,[en.z.PHONE_TYPE_WORK_MOBILE]:ei.z.WorkMobile},er=e=>{let{PhoneName:t,Number:a,Type:n,...i}=e;return{...(0,E.pu)(i),itemName:t,phoneNumber:a,type:eo[n]}},es=e=>C(e,S.U.SecureNote);var ec=a(96160);let ed=e=>{let{Secured:t,Type:a,Category:n,LocaleFormat:i,...o}=e;return{...(0,E.pu)(o),isSecured:t,color:ec.L[a]||ec.L.GRAY}},el=(e,t)=>{let{DateOfBirth:a,LinkedIdentity:n,Sex:i,SocialSecurityFullname:o,SocialSecurityNumber:r,...s}=e;return{...(0,E.pu)(s),idName:K(t)||o||"",idNumber:r,country:s.LocaleFormat}},eu=e=>{let{Website:t,Name:a,PersonalNote:n,LocaleFormat:i,...o}=e;return{...(0,E.pu)(o),itemName:a,URL:t}};class em{mapTypeToCarbonPath(e){return g.kY[e]}initializeVaultItemsQueryParams(e){let{ids:t,pageSize:a,pageNumber:n,propertyFilters:i,propertySorting:o}=e;this.ids=t,this.propertyFilters=i,this.propertySorting=o,this.pageSize=a,this.pageNumber=n}fetchVaultItems$(e,t,a){let{vaultItemTypes:n,...r}=e;this.initializeVaultItemsQueryParams(r),this.additionalFilterFunc=t,this.needDashlaneLinkedWebsites=a;let s=(0,i.a)(n.map(e=>this.getVaultItems$TypeDictionary[e]())),c=this.getEmptyVaultItemsQueryResult();return s.pipe((0,o.U)(e=>(e.forEach(e=>{if("failure"===e.tag)throw Error("Error while fetching vault items");Object.assign(c,e.data)}),(0,u.Vp)(c))))}getDashlaneDefinedLinkedWebsites$(e){if((0,u.d6)(e)&&y(e.data)&&this.needDashlaneLinkedWebsites){let t=e.data,a=t.map(({URL:e})=>e);return this.linkedWebsitesClient.queries.getMultipleDashlaneDefinedLinkedWebsites({urls:a}).pipe((0,m.Qn)(e=>t.map((t,a)=>({...t,linkedURLs:[...t.linkedURLs,...e[a]]}))))}return(0,r.of)(e)}getVaultItems$(e,t,a){return(0,i.a)([this.getCarbonVaultItems$(e,t),this.getCarbonVaultItems$(S.U.Identity,R),this.getQuarantinedSpacesTeamIds$()],(e,t,n)=>{var i;return(0,u.Vp)((i=this.ids,e.flatMap(e=>{if(n.includes(e.SpaceId)||i&&!i.some(t=>t.toUpperCase()===e.Id.toUpperCase()))return[];e.LastUse||(e.LastUse=-1);let o=e.LinkedIdentity?t.find(t=>t.Id===e.LinkedIdentity):void 0;return a(e,o)})))}).pipe((0,s.w)(this.getDashlaneDefinedLinkedWebsites$.bind(this)),(0,m.Qn)(t=>{var a,n;let i=function(e,t){if(!t||!e.length||!(0,E.Ho)(t.property,e[0]))return e;let a=t.property,n=t.direction||I.S.Ascend;return e.sort((e,t)=>{let i=e[a],o=t[a];return i||o?i?o?function(e,t,a){let n=Number(e),i=Number(t);return"string"==typeof e&&"string"==typeof t?a===I.S.Ascend?e.localeCompare(t):t.localeCompare(e):"number"==typeof e&&"number"==typeof t?a===I.S.Ascend?e-t:t-e:isNaN(n)||isNaN(i)?0:a===I.S.Ascend?n-i:i-n}(i,o,n):n===I.S.Ascend?1:-1:n===I.S.Ascend?-1:1:0})}((a=this.propertyFilters,n=this.additionalFilterFunc,a||n?t.filter(e=>(!a||!!a.every(t=>{let a=t.property;return(0,E.Ho)(a,e)&&function(e,t,a=N.l.Equal){return({[N.l.Equal]:()=>e===t,[N.l.LessThan]:()=>e<t,[N.l.GreaterThan]:()=>e>t})[a]()}(e[a],t.value,t.operator)}))&&(n?.(e)??!0)):t),this.propertySorting);return{[A.N[e]]:{items:this.getPage(i),matchCount:i.length}}}))}getPage(e){return this.pageNumber&&this.pageSize?e.slice(this.pageSize*(this.pageNumber-1),this.pageSize*this.pageNumber):e}getCarbonVaultItems$(e,t){let{queries:{carbonState:a}}=this.carbonLegacyClient,n=this.mapTypeToCarbonPath(e);return a({path:`userSession.personalData.${n}`}).pipe((0,o.U)(a=>{if((0,u.hx)(a)||!t(a.data))throw Error(`Bad ${A.N[e]} format`);return a.data}))}getQuarantinedSpacesTeamIds$(){let{queries:{carbonState:e}}=this.carbonLegacyClient;return e({path:"userSession.spaceData.spaces"}).pipe((0,o.U)(e=>{if((0,u.hx)(e)||!(0,D.u)(e.data))throw Error("Bad spaces format");return e.data.filter(e=>this.isPremiumStatusSpaceQuarantined(e.details))}),(0,o.U)(e=>e.map(e=>e.teamId).sort()),(0,c.x)((e,t)=>JSON.stringify(e)!==JSON.stringify(t)))}isPremiumStatusSpaceQuarantined(e){return"accepted"!==e.status.toLowerCase()&&!!e.info.removeForcedContentEnabled}async shouldRefuseSharedItemBeforeVaultItemDeletion(e,t){let a=await (0,d.z)(e.queries.getSharingStatusForItem({itemId:t}));if((0,u.hx)(a))throw Error("Unexpected failure while attempting to retrieve sharing status of item to be deleted",{cause:{failure:(0,u.Yv)(a)}});let{isSharedViaUserGroup:n,isShared:i}=(0,u.db)(a);if(!i)return(0,u.Vp)(!1);if(n)return(0,u.Rn)((0,h.Vf)());let o=await (0,d.z)(e.queries.getIsLastAdminForItem({itemId:t}));if((0,u.hx)(o))throw Error("Unexpected failure while attempting to determine if we're the last admin of shared item to be deleted",{cause:{failure:(0,u.Yv)(o)}});let{isLastAdmin:r}=(0,u.db)(o);return r?(0,u.Rn)((0,h.V$)()):(0,u.Vp)(!0)}constructor(e,t){this.carbonLegacyClient=e,this.linkedWebsitesClient=t,this.getVaultItems$TypeDictionary={[S.U.Address]:()=>this.getVaultItems$(S.U.Address,f,z),[S.U.BankAccount]:()=>this.getVaultItems$(S.U.BankAccount,F,_),[S.U.Company]:()=>this.getVaultItems$(S.U.Company,O,L),[S.U.Credential]:()=>this.getVaultItems$(S.U.Credential,y,w),[S.U.DriversLicense]:()=>this.getVaultItems$(S.U.DriversLicense,k,j),[S.U.Email]:()=>this.getVaultItems$(S.U.Email,b,H),[S.U.FiscalId]:()=>this.getVaultItems$(S.U.FiscalId,M,W),[S.U.IdCard]:()=>this.getVaultItems$(S.U.IdCard,x,Y),[S.U.Identity]:()=>this.getVaultItems$(S.U.Identity,R,Z),[S.U.Passkey]:()=>this.getVaultItems$(S.U.Passkey,$,E.pu),[S.U.Passport]:()=>this.getVaultItems$(S.U.Passport,V,X),[S.U.PaymentCard]:()=>this.getVaultItems$(S.U.PaymentCard,J,ea),[S.U.Phone]:()=>this.getVaultItems$(S.U.Phone,P,er),[S.U.Secret]:()=>this.getVaultItems$(S.U.Secret,v,T),[S.U.SecureNote]:()=>this.getVaultItems$(S.U.SecureNote,es,ed),[S.U.SocialSecurityId]:()=>this.getVaultItems$(S.U.SocialSecurityId,G,el),[S.U.Website]:()=>this.getVaultItems$(S.U.Website,U,eu)},this.getEmptyVaultItemsQueryResult=()=>({addressesResult:this.getEmptyItemsQueryResult(),bankAccountsResult:this.getEmptyItemsQueryResult(),companiesResult:this.getEmptyItemsQueryResult(),credentialsResult:this.getEmptyItemsQueryResult(),driversLicensesResult:this.getEmptyItemsQueryResult(),emailsResult:this.getEmptyItemsQueryResult(),fiscalIdsResult:this.getEmptyItemsQueryResult(),idCardsResult:this.getEmptyItemsQueryResult(),identitiesResult:this.getEmptyItemsQueryResult(),passkeysResult:this.getEmptyItemsQueryResult(),passportsResult:this.getEmptyItemsQueryResult(),paymentCardsResult:this.getEmptyItemsQueryResult(),phonesResult:this.getEmptyItemsQueryResult(),secretsResult:this.getEmptyItemsQueryResult(),secureNotesResult:this.getEmptyItemsQueryResult(),socialSecurityIdsResult:this.getEmptyItemsQueryResult(),websitesResult:this.getEmptyItemsQueryResult()}),this.getEmptyItemsQueryResult=()=>({items:[],matchCount:0}),this.vaultItemsOfTypeExist=async(e,t)=>{let a=this.mapTypeToCarbonPath(t),{queries:{carbonState:n}}=this.carbonLegacyClient;return(0,d.z)(n({path:`userSession.personalData.${a}`}).pipe((0,o.U)(a=>{if((0,u.hx)(a)||!Array.isArray(a.data))throw Error(`Unexpected error fetching vault item for ${t}`);let n=[],i=[];for(let t of e)a.data.some(e=>e.Id===t)?n.push(t):i.push(t);return{found:n,notFound:i}})))},this.getCredential=async e=>{let t=this.mapTypeToCarbonPath(S.U.Credential),{queries:{carbonState:a}}=this.carbonLegacyClient;return(0,d.z)(a({path:`userSession.personalData.${t}`}).pipe((0,o.U)(t=>{if((0,u.hx)(t)||!y(t.data))throw Error("Unexpected error fetching credential");let a=t.data.find(t=>t.Id===e);if(!a)throw Error("Credential not found in vault");return a})))}}}em=(0,n.gn)([(0,l.GS)(),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===p._?Object:p._,void 0===B.X?Object:B.X])],em)},31676:function(e,t,a){a.d(t,{U:()=>I});var n=a(21636),i=a(48035),o=a(36127),r=a(36884),s=a(72907),c=a(42589),d=a(62506),l=a(306),u=a(49219),m=a(57178),g=a(93822),p=a(4495),S=a(44893);class A{execute({body:{vaultItemTypes:e,searchQuery:t,needDashlaneLinkedWebsites:a=!1,...n}}){this.searchQuery=t;let{queries:{queryCollections:i}}=this.vaultOrganizationClient,{queries:{sharedCollectionsWithItems:o}}=this.sharingCollectionsClient;return(0,r.a)([i({}),o()]).pipe((0,s.w)(([t,i])=>{if((0,l.hx)(t)||(0,l.hx)(i))throw Error("Error querying collections");this.collections=t.data.collections.concat(i.data);let o=e??Object.values(m.U);return this.vaultRepository.fetchVaultItems$({vaultItemTypes:o,...n},this.isVaultItemMatch,a)}),(0,c.U)(t=>{let a;if((0,l.hx)(t))throw Error("Error");let n=t.data;if(e)a={items:[],matchCount:0};else{let e=this.collections.filter(e=>this.isMatch(e));a={items:e,matchCount:e.length}}return(0,l.Vp)({...n,collectionsResult:a})}))}isMatch(e,t=""){return t+=Object.values(e).filter(e=>"object"!=typeof e||Array.isArray(e)).map(e=>Array.isArray(e)?e.toString():e).join(this.separator),this.normalizeString(t).includes(this.normalizeString(this.searchQuery))}constructor(e,t,a){this.vaultRepository=e,this.vaultOrganizationClient=t,this.sharingCollectionsClient=a,this.separator=",",this.collections=[],this.searchQuery="",this.normalizeString=e=>"string"!=typeof e?"":e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase(),this.isVaultItemMatch=e=>{let t="";return this.collections.forEach(a=>{a.vaultItems.some(t=>t.id===e.id)&&(t+=`${a.name}${this.separator}`)}),this.isMatch(e,t)}}}A=(0,n.gn)([(0,d.e)(g.W),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===S.g?Object:S.g,void 0===p.C?Object:p.C,void 0===u.L?Object:u.L])],A);var h=a(47996),N=a(69853);class E{execute({body:e}){let{vaultItemTypes:t,searchQuery:a,pageSize:n,pageNumber:i,areProtectedItemsUnlocked:o,excludeCollections:d,isFilter:u,...g}=e;if(this.searchQuery=a.trim(),!u&&!this.searchQuery)return(0,N.of)((0,l.Vp)({items:[],matchCount:0}));let{queries:{queryCollections:p}}=this.vaultOrganizationClient,{queries:{sharedCollectionsWithItems:S}}=this.sharingCollectionsClient;return(0,r.a)([p({}),S()]).pipe((0,s.w)(([e,a])=>{if((0,l.hx)(e)||(0,l.hx)(a))throw Error("Error querying collections");this.collections=d?[]:e.data.collections.concat(a.data);let n=t??Object.values(m.U);return this.vaultRepository.fetchVaultItems$({vaultItemTypes:n,...g})}),(0,c.U)(e=>{if((0,l.hx)(e))throw Error("Error");let t=e.data,a=[],r={collectionsResult:{items:this.collections,matchCount:this.collections.length},...t};Object.keys(r).forEach(e=>{r[e].items.forEach(t=>{if(u&&!this.searchQuery){a.push({item:t,priority:"00"});return}let n=t.isSecured??!1,i=this.getPrimarySearchFields(e),r=this.getSecondarySearchFields(e,o,n),s=this.searchStartsWith(t,this.searchQuery,i),c=s||this.searchStartsWith(t,this.searchQuery,r),d=!!s||!!c||this.searchContains(t,this.searchQuery,i),l=!!s||!!c||!!d||this.searchContains(t,this.searchQuery,r),m=this.calculatePriority(s,d,c,l,e);m&&a.push({item:t,priority:m})})},[]);let s=a.length,c=a.sort((e,t)=>Number(t.priority)-Number(e.priority)).map(({item:e})=>e);return n&&i&&(c=c.slice(n*(i-1),n*i)),(0,l.Vp)({items:c,matchCount:s})}))}constructor(e,t,a){this.vaultRepository=e,this.vaultOrganizationClient=t,this.sharingCollectionsClient=a,this.collections=[],this.searchQuery="",this.getPrimarySearchFields=e=>{switch(e){case"addressesResult":case"credentialsResult":case"emailsResult":case"passkeysResult":case"paymentCardsResult":case"phonesResult":case"websitesResult":return["itemName"];case"bankAccountsResult":return["accountName"];case"companiesResult":return["companyName"];case"driversLicensesResult":case"idCardsResult":case"passportsResult":case"socialSecurityIdsResult":return["idName"];case"fiscalIdsResult":return["fiscalNumber"];case"identitiesResult":return["fullName"];case"secretsResult":case"secureNotesResult":return["title"];case"collectionsResult":return["name"];default:return[]}},this.getSecondarySearchFields=(e,t,a)=>{switch(e){case"addressesResult":return["building","city","door","floor","streetName","zipCode"];case"bankAccountsResult":return["ownerName","bankCode"];case"companiesResult":return["jobTitle"];case"credentialsResult":return["email","username","URL","linkedURLs","note","alternativeUsername"];case"driversLicensesResult":case"fiscalIdsResult":case"idCardsResult":case"collectionsResult":default:return[];case"emailsResult":return["emailAddress"];case"identitiesResult":return["firstName","middleName","lastName","pseudo"];case"passkeysResult":return["userDisplayName","rpName","note"];case"passportsResult":case"socialSecurityIdsResult":return["idNumber"];case"paymentCardsResult":return t?["ownerName","note","cardNumber"]:["ownerName"];case"phonesResult":return["phoneNumber"];case"secretsResult":case"secureNotesResult":return t||!a?["content"]:[];case"websitesResult":return["URL"]}},this.getItemTypePriority=e=>{switch(e){case"passkeysResult":return"01";case"phonesResult":return"02";case"websitesResult":return"03";case"identitiesResult":return"04";case"emailsResult":return"05";case"companiesResult":return"06";case"addressesResult":return"07";case"socialSecurityIdsResult":return"08";case"passportsResult":return"09";case"idCardsResult":return"10";case"fiscalIdsResult":return"11";case"driversLicensesResult":return"12";case"paymentCardsResult":return"13";case"bankAccountsResult":return"14";case"collectionsResult":return"15";case"secretsResult":return"16";case"secureNotesResult":return"17";case"credentialsResult":return"18";default:return"00"}},this.calculatePriority=(e,t,a,n,i)=>e||t||a||n?`${Number(e)}${Number(t)}${Number(a)}${Number(n)}${this.getItemTypePriority(i)}`:null,this.normalizeString=e=>"string"!=typeof e?"":e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase(),this.searchStartsWith=(e,t,a)=>{for(let n of a)if(this.normalizeString(e[n]?.toString()??"").startsWith(this.normalizeString(t)))return!0;return!1},this.searchContains=(e,t,a)=>{let n="";for(let t of a){let a=e[t];n+=this.normalizeString(a?.toString()??"")}return n.includes(this.normalizeString(t))}}}E=(0,n.gn)([(0,d.e)(h.$),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[void 0===S.g?Object:S.g,void 0===p.C?Object:p.C,void 0===u.L?Object:u.L])],E);class I{}I=(0,n.gn)([(0,i.Y)({api:o.R,handlers:{commands:{},events:{},queries:{search:A,vaultSearchRanked:E}},providers:[S.g]})],I)},31303:function(e,t,a){a.d(t,{z:()=>c});var n=a(36503),i=a(9645),o=a(48485),r=a(8201),s=a(70018);let c=(0,n.Q)({name:"vpnNotifications",commands:{markVpnProviderSeen:i.M,markInstallVpnSeen:o.b},events:{},queries:{hasSeenVpnProvider:r.D,hasSeenInstallVpn:s.w}})},48485:function(e,t,a){a.d(t,{b:()=>o});var n=a(66122),i=a(15021);class o extends(0,n.g)({scope:i.F.User}){}},9645:function(e,t,a){a.d(t,{M:()=>o});var n=a(66122),i=a(15021);class o extends(0,n.g)({scope:i.F.User}){}},70018:function(e,t,a){a.d(t,{w:()=>i});var n=a(45429);class i extends(0,n.k)(){}},8201:function(e,t,a){a.d(t,{D:()=>i});var n=a(45429);class i extends(0,n.k)(){}},87141:function(e,t,a){a.d(t,{u:()=>b});var n,i=a(21636),o=a(48035),r=a(31303),s=a(15021),c=a(59982),d=a(68238),l=a(20458),u=a(63762),m=((n={}).VpnProvider="vpnProvider",n.InstallVpn="installVpn",n);let g=u.z.object({notifications:u.z.record(u.z.nativeEnum(m),u.z.boolean())}),p=e=>g.safeParse(e).success;class S extends(0,c.Q)({storage:{schemaVersion:1,initialValue:{notifications:{vpnProvider:!1,installVpn:!1}},typeGuard:p},persist:!0,scope:s.F.User,storeName:"vpn-notifications-store",capacity:d.Y._010KB,codec:l.E}){}var A=a(37368),h=a(306),N=a(9645);class E{async execute(){let e=await this.store.getState(),t={...e.notifications,vpnProvider:!0};return await this.store.set({...e,notifications:t}),(0,h.Vp)(void 0)}constructor(e){this.store=e}}E=(0,i.gn)([(0,A.W)(N.M),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[S])],E);var I=a(48485);class C{async execute(){let e=await this.store.getState(),t={...e.notifications,installVpn:!0};return await this.store.set({...e,notifications:t}),(0,h.Vp)(void 0)}constructor(e){this.store=e}}C=(0,i.gn)([(0,A.W)(I.b),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[S])],C);var v=a(42589),T=a(62506),B=a(8201);class y{execute(){return this.store.state$.pipe((0,v.U)(e=>(0,h.Vp)(!!e.notifications.vpnProvider)))}constructor(e){this.store=e}}y=(0,i.gn)([(0,T.e)(B.D),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[S])],y);var f=a(70018);class O{execute(){return this.store.state$.pipe((0,v.U)(e=>(0,h.Vp)(!!e.notifications.installVpn)))}constructor(e){this.store=e}}O=(0,i.gn)([(0,T.e)(f.w),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[S])],O);class b{}b=(0,i.gn)([(0,o.Y)({api:r.z,stores:[S],handlers:{commands:{markVpnProviderSeen:E,markInstallVpnSeen:C},events:{},queries:{hasSeenVpnProvider:y,hasSeenInstallVpn:O}}})],b)}}]);