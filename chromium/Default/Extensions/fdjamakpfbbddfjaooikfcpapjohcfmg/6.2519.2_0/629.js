"use strict";(globalThis.webpackChunk_dashlane_leeloo=globalThis.webpackChunk_dashlane_leeloo||[]).push([[629],{82994:(e,t,a)=>{a.d(t,{s:()=>g}),a(96832);var n=a(62264),i=a(8180),s=a(51031),o=a(14877),l=a(88203);let r=function(e){return e.LastAdmin="LastAdmin",e.GroupSharing="GroupSharing",e.CollectionSharing="CollectionSharing",e.Generic="Generic",e}({});var c=a(78956),d=a(24731),u=a(36351);const m=({reason:e,translations:t,goToSharingAccess:a,closeCantDeleteDialog:n})=>{const{translate:i}=(0,l.Z)(),s=((e,t)=>{const{groupSharingTitle:a,lastAdminTitle:n,collectionSharingTitle:i,genericErrorTitle:s}=e;switch(t){case r.LastAdmin:return n;case r.GroupSharing:return a;case r.CollectionSharing:return i;case r.Generic:return s;default:return(0,d.U)(t)}})(t,e),o=((e,t)=>{const{groupSharingSubtitle:a,lastAdminSubtitle:n,collectionSharingSubtitle:i,genericErrorSubtitle:s}=e;switch(t){case r.LastAdmin:return n;case r.GroupSharing:return a;case r.CollectionSharing:return i;case r.Generic:return s;default:return(0,d.U)(t)}})(t,e);return(0,u.tZ)(c.Vq,{isOpen:!0,onClose:n,title:null!=s?s:"",closeActionLabel:i("_common_dialog_dismiss_button"),actions:e===r.LastAdmin||r.GroupSharing||r.CollectionSharing?{primary:{children:t.lastAdminActionLabel,onClick:()=>{a(),n()}}}:void 0,children:o})};var p=a(37527);const h=({closeConfirmDeleteDialog:e,onDeleteConfirm:t,translations:a})=>{const{translate:n}=(0,l.Z)(),{confirmDeleteSubtitle:i,confirmDeleteTitle:s,confirmDeleteDismiss:o,confirmDeleteConfirm:r}=a;return(0,u.tZ)(c.Vq,{title:s,onClose:e,isOpen:!0,dialogClassName:p.Ht,closeActionLabel:n("_common_dialog_dismiss_button"),isDestructive:!0,actions:{primary:{children:r,onClick:t,id:"deletion-dialog-confirm-button"},secondary:{children:o,onClick:e,autoFocus:!0,id:"deletion-dialog-dismiss-button"}},children:i})},g=({closeConfirmDeleteDialog:e,goToSharingAccess:t,isVisible:a,itemId:c,onDeletionSuccess:d,sharingStatus:p,translations:g,vaultItemType:_,isShared:D,isSharedViaUserGroup:S,isItemInCollection:b,isLastAdmin:C})=>{const{showToast:f}=(0,n.p)(),{translate:y}=(0,l.Z)(),{deleteVaultItem:I}=(0,i.u)(o.L);if(!a)return null;let T;return(D||p?.isShared)&&(S&&(T=r.GroupSharing),C&&(T=r.LastAdmin),b&&(T=r.CollectionSharing)),T&&t?(0,u.tZ)(m,{reason:T,translations:g,goToSharingAccess:t,closeCantDeleteDialog:e}):(0,u.tZ)(h,{closeConfirmDeleteDialog:e,onDeleteConfirm:async()=>{try{var e;(await I({id:c,vaultItemType:_})).tag===s.rq.Success?(f({description:null!=(e=g.deleteSuccessToast)?e:y("webapp_personal_info_edition_delete_success_toast")}),d()):f({description:y("_common_generic_error"),mood:"danger",isManualDismiss:!0})}catch(e){f({description:y("_common_generic_error"),mood:"danger",isManualDismiss:!0})}},translations:g})}},42521:(e,t,a)=>{a.d(t,{Jh:()=>l,UE:()=>s,ZP:()=>r});var n=a(96832),i=a(26849);const s=(0,i.compose)(i.not,i.isEmpty,i.trim,(0,i.defaultTo)("")),o=/.+@.+\..+/,l=e=>o.test(e.trim());class r extends n.Component{constructor(e){super(e),this.setInternalState=e=>{this.setState({internal:{...this.state.internal,...e}})},this.setUpdatedValues=e=>{const{signalEditedValues:t,onValuesUpdated:a}=this.props,n={...this.state.values,...e};this.setState({values:n},(()=>{t&&t(this.hasFormBeenEdited()),a&&a(n)}))},this.handleChange=(e,t="")=>{if(e instanceof Event&&t)throw new Error("handleChange was called with both a ChangeEvent and key.");const a=e?.target?{[e.target.dataset.name]:e.target.value}:{[t]:e};this.setUpdatedValues(a)},this.handleChanges=e=>{this.setUpdatedValues(e)},this.validateValues=e=>{if(0===Object.keys(e).length)return!0;const t=(0,i.reduce)(((t,a)=>(t[a]=e[a]?(0,i.compose)(i.not,e[a]):()=>!1,t)),{},Object.keys(this.state.values)),a=(0,i.evolve)(t,this.state.values);return this.setState({errors:a}),(0,i.all)((0,i.equals)(!1),(0,i.values)(a))},this.hasFormBeenEdited=()=>!(0,i.equals)(this.state.values,this.props.currentValues),this.getValues=()=>this.state.values;const t=Object.keys(e.currentValues).reduce(((e,t)=>(e[t]=!1,e)),{});this.state={internal:{},values:e.currentValues,errors:t}}componentDidUpdate(e){(0,i.equals)(this.props.currentValues,e.currentValues)||this.setState({values:this.props.currentValues})}}},629:(e,t,a)=>{a.r(t),a.d(t,{Connected:()=>d}),a(96832);var n=a(24507),i=a(14877),s=a(39431),o=a(62606),l=a(86816),r=a(36351);const c=(0,l.Y)({getDeleteTitle:e=>e("webapp_personal_info_edition_delete_title_company"),getItemTypeDescription:e=>e("webapp_personal_info_edition_header_company_description"),getTitle:e=>e.companyName,vaultItemType:s.U.Company,renderForm:(e,t,a,n)=>{const i={jobTitle:t.jobTitle,companyName:t.companyName,spaceId:t.spaceId};return(0,r.tZ)(o.$,{lee:e,currentValues:i,signalEditedValues:n,ref:a})}}),d=e=>{const{data:t}=(0,n.k)(i.L,"query",{vaultItemTypes:[s.U.Company],ids:[`{${e.match.params.uuid}}`]});return(0,r.tZ)(c,{...e,item:t?.companiesResult.items[0]})}},62606:(e,t,a)=>{a.d(t,{$:()=>c});var n=a(93853),i=a(42670),s=a(42521),o=a(67406),l=a(68037),r=a(36351);class c extends s.ZP{isFormValid(){return this.validateValues({companyName:s.UE})}render(){var e;const t=this.props.lee.translate.namespace("webapp_personal_info_edition_company_"),{shouldShowFrozenStateDialog:a}=this.context;return(0,r.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"16px"},children:[(0,r.BX)(l.u,{title:t("content_card_details_label"),additionalSx:{display:"flex",flexDirection:"column",gap:"8px"},children:[(0,r.tZ)(n.n,{required:!0,label:t("name_label"),placeholder:t("placeholder_no_name"),"data-name":"companyName",value:this.state.values.companyName,error:this.state.errors.companyName,onChange:this.handleChange,readOnly:!!a}),(0,r.tZ)(n.n,{label:t("jobTitle_label"),placeholder:t("placeholder_no_jobTitle"),"data-name":"jobTitle",value:this.state.values.jobTitle,onChange:this.handleChange,readOnly:!!a})]}),(0,r.tZ)(o.M,{isUsingNewDesign:!0,wrapInContentCard:!0,contentCardLabel:t("content_card_organization_label"),labelSx:o.e,spaceId:null!=(e=this.state.values.spaceId)?e:"",onChange:e=>this.handleChange(e,"spaceId"),disabled:!!a})]})}}c.contextType=i.CQ},86816:(e,t,a)=>{a.d(t,{Y:()=>b});var n=a(96832),i=a(94138),s=a(73704),o=a(39431),l=a(14877),r=a(8180),c=a(14900),d=a(63520),u=a(82994),m=a(92077),p=a(86498),h=a(88203),g=a(45272),_=a(36351);const D={DELETE_CONFIRM:"webapp_personal_info_edition_delete_confirm",DELETE_DISMISS:"webapp_personal_info_edition_delete_dismiss",DELETE_SUBTITLE:"webapp_personal_info_edition_delete_subtitle"},S={[o.U.Address]:"address",[o.U.Company]:"company",[o.U.Email]:"email",[o.U.Identity]:"name",[o.U.Phone]:"phone-number",[o.U.Website]:"website"};function b(e){const{getItemTypeDescription:t,getDeleteTitle:a,getTitle:b,vaultItemType:C,renderForm:f}=e;return({lee:e,item:y,match:I})=>{const T=(0,n.useRef)(null),v=(0,p.V)(),{translate:E}=(0,h.Z)(),{routes:V}=(0,m.Xo)(),{updateVaultItem:w}=(0,r.u)(l.L),[U,L]=(0,n.useState)(!1),[A,Z]=(0,n.useState)(!1);if((0,n.useEffect)((()=>{const e={[o.U.Address]:s.PageView.ItemAddressDetails,[o.U.Company]:s.PageView.ItemCompanyDetails,[o.U.Email]:s.PageView.ItemEmailDetails,[o.U.Identity]:s.PageView.ItemIdentityDetails,[o.U.Phone]:s.PageView.ItemPhoneDetails,[o.U.Website]:s.PageView.ItemWebsiteDetails};(0,g.Nc)(e[C])}),[]),!y)return null;const x=()=>{(0,g.Nc)(s.PageView.ItemPersonalInfoList),(0,m.uX)(V.userPersonalInfo)},N=y?b(y,E):"",P={confirmDeleteConfirm:E(D.DELETE_CONFIRM),confirmDeleteDismiss:E(D.DELETE_DISMISS),confirmDeleteSubtitle:E(D.DELETE_SUBTITLE),confirmDeleteTitle:a(E)};return(0,_.BX)(d.zI,{isUsingNewDesign:!0,isViewingExistingItem:Boolean(I.params?.uuid),itemHasBeenEdited:U,onNavigateOut:x,onSubmit:async()=>{y.id&&Boolean(T.current?.isFormValid())&&(await(async()=>{const e=T.current?.getValues();e&&"success"!==(await w({vaultItemType:C,content:e,id:y.id})).tag&&v.showAlert(E("_common_generic_error"),c.BLW.ERROR)})(),x())},onClickDelete:()=>Z(!0),ignoreCloseOnEscape:A,formId:"edit_personalinfo_panel",header:(0,_.tZ)(d.V9,{icon:(0,_.tZ)(i.A,{type:S[C],size:"xlarge"}),title:N,titleDescription:t(E)}),children:[f(e,y,T,(()=>L(!0))),(0,_.tZ)(u.s,{isVisible:A,itemId:y.id,closeConfirmDeleteDialog:()=>Z(!1),onDeletionSuccess:x,translations:P,vaultItemType:C})]})}}}}]);