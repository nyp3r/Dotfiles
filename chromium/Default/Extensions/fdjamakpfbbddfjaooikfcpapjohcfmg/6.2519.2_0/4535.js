(globalThis.webpackChunk_dashlane_leeloo=globalThis.webpackChunk_dashlane_leeloo||[]).push([[4535],{78892:(e,t,n)=>{"use strict";n.d(t,{p:()=>U});var i=n(96832),o=n(95727),a=n(90248),l=n(73704),s=n(51031),r=n(45272),c=n(18108),d=n(81701),_=n(80936),u=n(36351);const p=(0,i.createContext)({}),h=(0,i.createContext)({}),m=({children:e,vaultItem:t,isAddCollectionDisabled:n,signalEditedValues:a,setHasOpenedDialogs:m,setCollectionsToUpdate:f})=>{const{vaultItemId:b,spaceId:g}=t,T=(0,c.E)(),[C,I]=(0,i.useState)(""),[S,E]=(0,i.useState)(!1),{allCollections:O}=(0,o.bA)(),N=(0,_.I)(),x=N.status===s.rq.Success&&N.isDisabled,[y,w]=(0,i.useState)((()=>""===b?[]:O.flatMap((e=>e.vaultItems.some((e=>e.id===b))?{...e,initiallyExisting:!0,hasBeenDeleted:!1}:[])))),v=(e=>""!==e&&(T.status===s.rq.Success&&T.data.length>0?T?.data:[]).some((t=>t.teamId===e)))(g)?g:"",D=(0,i.useMemo)((()=>y.filter((e=>!e.hasBeenDeleted))),[y]),A=(0,i.useMemo)((()=>O.filter((e=>!D.some((t=>t.id===e.id))))),[O,D]),Z=e=>{const t=e(y);f?.(t),w(t)},R={setInput:I,setIsInputVisible:E,onSubmit:(e=C,t)=>{if((e=e.trim()).length<=0)return;const n=y.findIndex((t=>t.name===e&&(x||v===t.spaceId)));if(-1===n)Z((n=>{var i;const o=[...n],a=O.find((t=>t.name===e&&(x||t.spaceId===v)));return o.push({id:null!=(i=a?.id)?i:"",name:e,spaceId:v,isShared:a?.isShared,vaultItems:[],initiallyExisting:!1,hasBeenDeleted:!1,itemPermission:t}),(0,d.p)(o)}));else{const e=y[n];e.initiallyExisting&&e.hasBeenDeleted&&Z((e=>{const t=[...e];return t[n].hasBeenDeleted=!1,t}))}a?.(!0),I("")},onDelete:e=>{const t=y.findIndex((t=>t.name===e));if(-1===t)return;const n=y[t];Z((e=>{const i=[...e];return n.initiallyExisting?i[t].hasBeenDeleted=!0:i.splice(t,1),i})),(0,r.Nc)(l.PageView.CollectionDelete),a?.(!0)},clearVaultItemCollections:()=>Z((e=>e.flatMap((e=>e.initiallyExisting?{...e,hasBeenDeleted:!0}:[]))))};return(0,u.tZ)(p.Provider,{value:{input:C,itemSpaceId:v,isInputVisible:S,filteredCollections:A,vaultItemCollections:y,vaultItemCollectionsToDisplay:D,setHasOpenedDialogs:m,vaultItem:t,isAddCollectionDisabled:n},children:(0,u.tZ)(h.Provider,{value:R,children:e})})},f=()=>(0,i.useContext)(p),b=()=>(0,i.useContext)(h);var g,T=n(68999),C=n(47124),I=n(84925),S=n(13252),E=n(88203),O=n(67678),N=n(33918),x=n(71951),y=n(30894),w=n(68819),v=n(24507);const D=({id:e,hasCollections:t,setHasOpenedDialogs:n,isDisabled:o=!1,isItemMPProtected:l})=>{var s;const{openProtectedItemsUnlocker:r}=(0,y.tY)(),{translate:c}=(0,E.Z)(),d=(0,i.useRef)(null),{isInputVisible:_,itemSpaceId:p,filteredCollections:h,input:m,vaultItem:D}=f(),{vaultItemTitle:A,vaultItemId:Z}=D,R=(0,v.k)(I.X,"getPermissionForItem",{itemId:Z}),P=R.data?.capabilities.canShare,{openDialog:L,closeDialog:k}=(0,O.R)(),{setInput:B,setIsInputVisible:M,onSubmit:U}=b(),F=(e,t)=>{U(t,e),k(),n?.(!1),d.current?.focus()},H=()=>{k(),n?.(!1)};return _?(0,u.tZ)(a.x5,{collections:h,id:e,input:m,inputRef:d,spaceId:p,selectionAsDropdown:!0,onSubmit:t=>{const i=h.find((e=>e.name===t&&e.spaceId===p)),o=()=>{i?.isShared&&!P?(L(s||(s=(0,u.tZ)(x.Q,{onClose:H}))),n?.(!0)):i?.isShared?(L((0,u.tZ)(N.B,{onSubmit:F,onClose:H,itemTitle:A,collectionName:i.name})),n?.(!0)):F(S.y3.Admin,t)};if(l)return r({action:w.P.Copy,itemType:w.R.Password,showNeverAskOption:!0,credentialId:e,successCallback:o});o()},setInput:B,onBlur:e=>{e.currentTarget.contains(e.relatedTarget)||window.setTimeout((()=>{M(!1)}),100)}}):(0,u.tZ)(T.z,{onClick:()=>M(!0),layout:"iconLeading",intensity:"supershy",disabled:o,mood:"neutral",icon:g||(g=(0,u.tZ)(C.JO,{name:"ActionAddOutlined"})),children:c(t?"webapp_collections_input_placeholder_add_another":"webapp_collections_input_placeholder_add_new")})},A=e=>(0,u.tZ)("div",{sx:{flex:"1",display:"flex",flexDirection:"column"},...e});var Z,R=n(51728);const P=({hasMultipleCollections:e,...t})=>{const{vaultItem:n}=f(),o=(0,R.b)(n.spaceId),{translate:a}=(0,E.Z)();return(0,u.tZ)("label",{sx:{display:"flex",width:"149px",justifyContent:"flex-end",fontWeight:"600",textAlign:"right"},...t,children:(0,u.BX)("span",{sx:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[o&&(0,u.BX)(i.Fragment,{children:[`${o}`,Z||(Z=(0,u.tZ)("br",{}))]}),a(e?"webapp_credentials_header_row_category":"webapp_credential_edition_field_category")]})})},L=e=>(0,u.tZ)("div",{sx:{display:"flex",flexDirection:"row"},...e});var k=n(63847);const B="collectionsFieldId",M=(0,i.forwardRef)((({hasLabel:e=!0,isItemMPProtected:t},n)=>{const{vaultItemCollections:o,vaultItemCollectionsToDisplay:l,isAddCollectionDisabled:s,setHasOpenedDialogs:r}=f(),{onDelete:c,clearVaultItemCollections:d}=b(),_=l?.length>0;return(0,i.useImperativeHandle)(n,(()=>({getVaultItemCollections:()=>o,clearVaultItemCollections:d}))),(0,u.BX)(L,{sx:{gap:"24px",alignItems:!_&&"center"},children:[e?(0,u.tZ)(P,{hasMultipleCollections:l?.length>1,htmlFor:B,sx:{marginTop:_&&"15px"}}):null,(0,u.BX)(A,{sx:{..._&&{gap:"8px",marginTop:"10px"}},children:[(0,u.tZ)(k.k,{as:"ul",gap:"8px","data-testid":"collectionsList",children:l.map((e=>(0,u.tZ)(a.KH,{onDismiss:()=>c(e.name),isShared:e.isShared,children:e.name},`collections_field_li_${e.name}`)))}),(0,u.tZ)(D,{id:B,hasCollections:_,setHasOpenedDialogs:r,isDisabled:s,isItemMPProtected:t})]})]})})),U=(0,i.forwardRef)((({vaultItem:e,isAddCollectionDisabled:t,signalEditedValues:n,setHasOpenedDialogs:i,hasLabel:a,isItemMPProtected:l,setCollectionsToUpdate:s},r)=>{const{isCollectionsLoading:c}=(0,o.bA)();return c?null:(0,u.tZ)(m,{vaultItem:e,signalEditedValues:n,setHasOpenedDialogs:i,isAddCollectionDisabled:t,setCollectionsToUpdate:s,children:(0,u.tZ)(M,{ref:r,hasLabel:a,isItemMPProtected:l})})}))},86541:(e,t,n)=>{"use strict";n.d(t,{SecureNoteTabs:()=>i});let i=function(e){return e[e.CONTENT=0]="CONTENT",e[e.DOCUMENT_STORAGE=1]="DOCUMENT_STORAGE",e[e.MORE_OPTIONS=2]="MORE_OPTIONS",e[e.SHARED_ACCESS=3]="SHARED_ACCESS",e}({})},30743:(e,t,n)=>{"use strict";n.d(t,{h:()=>D});var i=n(96832),o=n(83849),a=n.n(o),l=n(24731);var s,r,c=n(15567),d=n.n(c),_=n(2730),u=n.n(_),p=n(36351);const h=312,m="info";class f extends i.Component{constructor(e){super(e),this.showTooltip=()=>{this.setState({isTooltipVisible:!0})},this.hideTooltip=()=>{this.setState({isTooltipVisible:!1})},this.renderIcon=()=>{const{type:e=m}=this.props;switch(e){case"info":return s||(s=(0,p.tZ)(u(),{}));case"question":return r||(r=(0,p.tZ)(d(),{}));default:(0,l.U)(e)}return null},this.state={isTooltipVisible:!1}}render(){const{iconClassNames:e=[],maxWidth:t=h,children:n}=this.props,i=this.renderIcon();return(0,p.BX)("div",{className:"container--nIJjYvifKn",onMouseEnter:this.showTooltip,onMouseLeave:this.hideTooltip,children:[(0,p.tZ)("div",{className:a()("iconContainer--Qd32ya5v0T",...e),children:i}),(0,p.BX)("div",{className:a()("tooltipContainer--Yos9HnS8si",{"tooltipDisplayed--ibyWhutbpT":this.state.isTooltipVisible}),style:{maxWidth:`${t}px`},children:[n,(0,p.tZ)("div",{className:"triangle--n9NwQgxSAc"})]})]})}}var b=n(86541),g=n(68819),T=n(30894),C=n(63520),I=n(73630),S=n(88203);const E=({title:e,disabled:t=!1,onChange:n})=>{const{translate:i}=(0,S.Z)(),o=i("webapp_secure_notes_addition_field_placeholder_no_title");return(0,p.tZ)(I.Z,{sx:{display:"block",width:"100%"},tooltipText:e||o,children:(0,p.tZ)("input",{sx:{color:"ds.text.neutral.catchy",backgroundColor:"transparent",border:"none",fontSize:"24px",lineHeight:"30px",fontWeight:"600",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",width:"100%",fontFamily:"'GT Walsheim Pro', 'Helvetica', 'Arial', 'sans-serif'","&:focus":{outline:"none",border:"none"}},placeholder:o,value:e||"",disabled:t,onChange:n})})};var O=n(3045),N=n(18504);const{CONTENT:x,DOCUMENT_STORAGE:y,MORE_OPTIONS:w,SHARED_ACCESS:v}=b.SecureNoteTabs,D=({attachmentsCount:e,setActiveTab:t,backgroundColor:n,disabled:i,displayDocumentStorage:o,displaySharedAccess:a,displayMoreOptions:l,isSecured:s,recipientsCount:r,title:c,setTitle:d})=>{const{translate:_}=(0,S.Z)(),{areProtectedItemsUnlocked:u,openProtectedItemsUnlocker:h}=(0,O.t)(),m=[{id:"tab-note-detail",contentId:"content-note-detail",title:_("webapp_secure_notes_edition_field_tab_title_details"),onSelect:()=>t(x)}],b=()=>{!u&&s?((0,T.jF)(),h({itemType:g.R.SecureNoteSetting,successCallback:()=>t(y)})):t(y)};if(a&&m.push({id:"tab-shared-access",contentId:"content-shared-access",title:`${_("webapp_secure_notes_edition_field_tab_title_shared_access")} (${r})`,onSelect:()=>t(v)}),o){const t=(0,p.tZ)(f,{children:(0,p.tZ)("p",{children:_("webapp_secure_notes_edition_field_tab_title_attachments_tooltips")})}),n=e?` (${e})`:"";m.push({id:"tab-document-storage",contentId:"content-document-storage",title:`${_("webapp_secure_notes_edition_field_tab_title_attachments")}${n}`,onSelect:b,tabIconElement:t})}return l&&m.push({id:"tab-more-options",contentId:"content-more-options",title:_("webapp_secure_notes_edition_field_tab_title_options"),onSelect:()=>t(w)}),(0,p.tZ)(C.V9,{icon:(0,p.tZ)(N.G,{noteColor:n,size:"xlarge"}),title:(0,p.tZ)(E,{title:c,disabled:i,onChange:e=>d(e.target.value)}),tabs:m})}},32021:(e,t,n)=>{"use strict";n.d(t,{T:()=>se});var i=n(55139),o=n(73704),a=n(13252),l=n(77377),s=n(47595),r=n(24294),c=n(86541),d=n(96832),_=n(62264),u=n(5063),p=n(93853),h=n(59115),m=n(75968),f=n(31062),b=n(80610),g=n(88203),T=n(29020),C=n(36351);const I=({isMaxSizeReached:e,currentSize:t,maxSize:n=ne})=>{const{translate:i}=(0,g.Z)(),o=e?i("webapp_secure_notes_edition_field_text_content_over_limit",{overLimit:t.toLocaleString(),maxSize:n.toLocaleString()}):`${t.toLocaleString()} /${n.toLocaleString()} ${i("webapp_secure_notes_edition_field_text_content_size")}`;return(0,C.tZ)(T.n,{textStyle:"ds.body.helper.regular",color:e?"ds.text.danger.quiet":"ds.text.neutral.quiet",sx:{fontSize:"11px",textAlign:"left"},children:o})};var S=n(67406);const E=["BLUE","GRAY","PURPLE","PINK","RED","BROWN","GREEN","ORANGE","YELLOW"];var O=n(30894),N=n(68819),x=n(5961),y=n.n(x),w=n(77270),v=n(51409),D=n(68999),A=n(47124);let Z=function(e){return e.BOLD="bold",e.CODE="code",e.ITALIC="italic",e.LINK="link",e.SUBSUBTITLE="subsubtitle",e.SUBTITLE="subtitle",e.TITLE="title",e}({});const R=e=>(t,n)=>{var i;const{formatPrefix:o,cursorOffsetStart:a,cursorOffsetEnd:l}=e,s=null!=(i=e.formatSuffix)?i:"",{start:r,end:c}=n,d=t.slice(r,c),_=((e,t,n)=>{const i=!n||e.endsWith(n);return e.startsWith(t)&&i})(d,o,s),u=((e,t,n,i)=>e.start===e.end?(e.start=e.start+n,e.end=e.end+n,e):(e.end=t?e.end-n-i:e.end+n+i,e))(n,_,a,l);return _?{updatedContent:[t.slice(0,r),t.slice(r+o.length,c-s.length),t.slice(c)].join(""),updatedSelectionRange:u}:{updatedContent:[t.slice(0,r),o,d,s,t.slice(c)].join(""),updatedSelectionRange:u}},P={[Z.TITLE]:{icon:(0,C.tZ)(A.JO,{name:"FormattingHeading1Outlined"}),label:"Heading",format:R({formatPrefix:"# ",cursorOffsetStart:2,cursorOffsetEnd:0})},[Z.SUBTITLE]:{icon:(0,C.tZ)(A.JO,{name:"FormattingHeading2Outlined"}),label:"Subheading",format:R({formatPrefix:"## ",cursorOffsetStart:3,cursorOffsetEnd:0})},[Z.SUBSUBTITLE]:{icon:(0,C.tZ)(A.JO,{name:"FormattingHeading3Outlined"}),label:"Subsubheading",format:R({formatPrefix:"### ",cursorOffsetStart:4,cursorOffsetEnd:0})},[Z.BOLD]:{icon:(0,C.tZ)(A.JO,{name:"FormattingBoldOutlined"}),label:"Bold",format:R({formatPrefix:"**",formatSuffix:"**",cursorOffsetStart:2,cursorOffsetEnd:2})},[Z.ITALIC]:{icon:(0,C.tZ)(A.JO,{name:"FormattingItalicOutlined"}),label:"Italic",format:R({formatPrefix:"_",formatSuffix:"_",cursorOffsetStart:1,cursorOffsetEnd:1})},[Z.CODE]:{icon:(0,C.tZ)(A.JO,{name:"FormattingCodeOutlined"}),label:"Code",format:R({formatPrefix:"`",formatSuffix:"`",cursorOffsetStart:1,cursorOffsetEnd:1})},[Z.LINK]:{icon:(0,C.tZ)(A.JO,{name:"LinkOutlined"}),label:"Link",format:(e,t)=>{const{start:n,end:i}=t,o=e.slice(n,i),a=((e,t,n)=>(e.start===e.end?(e.start=e.start+1,e.end=e.end+1):(e.start=e.end+3,e.end=e.end+6),e))(t);return{updatedContent:[e.slice(0,n),"[",o,"](url)",e.slice(i)].join(""),updatedSelectionRange:a}}}},L="webapp_secure_notes_content_markdown_preview",k=({fieldRef:e,content:t,isPreviewing:n,setContent:i,setIsPreviewing:o})=>{const{translate:a}=(0,g.Z)(),l=n=>()=>{var o,a;const l=P[n].format,{updatedContent:s,updatedSelectionRange:r}=l(t,{start:null!=(o=e.current?.selectionStart)?o:0,end:null!=(a=e.current?.selectionEnd)?a:0});i(s),setTimeout((()=>{e.current&&(e.current.focus(),e.current.selectionStart=r.start,e.current.selectionEnd=r.end)}),200)};return(0,C.BX)("div",{sx:{display:"flex",height:"50px",justifyContent:"space-between",alignItems:"center",boxSizing:"border-box",marginTop:"16px",backgroundColor:"ds.background.alternate",borderRadius:"8px"},children:[(0,C.tZ)("div",{sx:{gap:"4px"},children:Object.keys(P).map((e=>(0,C.tZ)(D.z,{mood:"neutral",intensity:"supershy",layout:"iconOnly",icon:P[e].icon,onClick:l(e),disabled:n,"aria-label":P[e].label,title:P[e].label,name:P[e].label},e)))}),t?(0,C.tZ)("div",{sx:{padding:"8px 10px"},children:(0,C.tZ)(D.z,{"aria-label":a(L),onClick:()=>o(!n),layout:"iconTrailing",intensity:"quiet",size:"small",mood:"neutral",icon:n?"ActionHideFilled":"ActionRevealFilled",children:a(L)})}):null]})},B=e=>e.replace(/\n/gi,"&nbsp; \n");var M=n(82207),U=n(79432),F=n(33988),H=n(54350);const G=i.w.SupportMarkdownInSecureNotes,V="webapp_secure_notes_form_content_label",z="webapp_secure_note_edition_action_show_note_content",X="webapp_secure_note_edition_action_hide_note_content",Y="webapp_secure_note_edition_action_copy_note_content",W=({fieldRef:e,value:t,title:n,isSecured:i,placeholder:o,disabled:a,readonly:l,isEditing:s,setContent:r,spaceId:c})=>{const[_,u]=(0,d.useState)(!1),{translate:p}=(0,g.Z)(),h=(0,w._)(),m=(0,F.F)(),{isMPLessUser:f}=(0,H.Z)(),b=!m&&!f,{areProtectedItemsUnlocked:T,openProtectedItemsUnlocker:I}=(0,O.tY)(),{logCopiedSecureNoteContent:S,logRevealSecureNoteContent:E}=(0,U.D)(),x=Boolean(t.length),A=Boolean(c),Z=Boolean(h.data?.[G]),[R,P]=(0,d.useState)(""===t),L=i&&!T,W=(0,d.useCallback)(((e,t)=>new Promise(((n,i)=>{if(e||!L||!b)return t(),n();I({action:O.P7.Show,itemType:N.R.SecureNote,successCallback:()=>(t(),n()),cancelCallback:i})}))),[L,I]),$=()=>{i&&n&&A&&!R&&E(n),P((e=>!e))},J=()=>{W(R,$).catch((()=>{P(!1)}))};return(0,C.tZ)("div",{sx:{display:"flex",flex:"1 1",whiteSpace:"pre-wrap",wordWrap:"break-word",cursor:"text"},children:Z?(0,C.BX)("div",{sx:{display:"flex",flexDirection:"column",flexGrow:1},children:[!a&&(0,C.tZ)(k,{content:t,setContent:r,fieldRef:e,isPreviewing:_,setIsPreviewing:e=>u(e)}),_?(0,C.tZ)("div",{className:"markdown--ARo1hBXSLa",children:(0,C.tZ)(y(),{source:B(t),softBreak:"br"})}):(0,C.tZ)(v.K,{label:p(V),ref:e,name:n,className:"textarea--Ix1kh7fRYF",sx:{width:"100%",padding:"10px 0px"},placeholder:o,value:!R&&x&&i?"••••••••":t,disabled:a,readOnly:!R&&x&&i||l,onChange:e=>{r(e.target.value)},actions:[...i?[(0,C.tZ)(D.z,{layout:"iconOnly",icon:R?"ActionHideOutlined":"ActionRevealOutlined",mood:"brand",intensity:"supershy",sx:{marginRight:"16px"},onClick:J,"aria-label":p(R?X:z),tooltip:p(R?X:z)},"secure-note-content-visibility")]:[],...x?[(0,C.tZ)(M.m,{data:t,checkProtected:()=>L,copyLabel:p(Y),itemType:N.R.SecureNote,tooltipLocation:"right"},"copy-secure-note-content")]:[]]})]}):(0,C.tZ)(v.K,{label:p(V),ref:e,name:n,sx:{width:"100%",padding:"10px 0px"},placeholder:o,readOnly:!R&&x&&i||l,onChange:e=>r(e.target.value),value:!R&&x&&i?"••••••••":t,actions:[...i?[(0,C.tZ)(D.z,{layout:"iconOnly",icon:R?"ActionHideOutlined":"ActionRevealOutlined",mood:"brand",intensity:"supershy",sx:{marginRight:"16px"},onClick:J,"aria-label":p(R?X:z),tooltip:p(R?X:z)},"secure-note-content-visibility")]:[],...x?[(0,C.tZ)(M.m,{data:t,checkProtected:()=>L,copyLabel:p(Y),itemType:N.R.SecureNote,tooltipLocation:"right",onCopy:()=>{s&&n&&A&&S(n)}},"copy-secure-note-content")]:[]]})})},$=({title:e,content:t,isSecured:n,setContent:i,canEdit:o,readonly:a,isEditing:l,spaceId:s})=>{const{translate:r}=(0,g.Z)(),c=(0,d.useRef)(null);return(0,C.tZ)(W,{title:e,fieldRef:c,placeholder:r(a?"webapp_secure_notes_edition_disabled_label":"webapp_secure_notes_addition_field_placeholder_no_content"),isSecured:n,value:t,readonly:a||!o,setContent:i,isEditing:l,spaceId:s})};var J=n(78892),K=n(68037),j=n(74434);var q=n(42670);const Q={NO_CATEGORY:"webapp_secure_notes_addition_no_category",PERSONAL_SPACE:"webapp_form_field_personal_space",INFO_BOX_ATTACHMENTS:"webapp_secure_notes_infobox_has_attachments",INFO_BOX_SHARED:"webapp_secure_notes_infobox_shared",SECURITY_LABEL:"webapp_secure_notes_addition_field_tab_option_security_label",CONTENT_NOTE_DETAILS:"webapp_secure_notes_form_content_note_details",CONTENT_NOTE_DETAILS_TITLE:"webapp_secure_notes_form_content_note_details_title",CONTENT_ITEM_ORGANIZATION:"webapp_secure_notes_form_content_item_organization",CONTENT_ITEM_ORGANIZATION_FORCED_CATEGORIZATION:"webapp_credential_edition_field_force_categorized",CONTENT_ITEM_ORGANIZATION_COLOR:"webapp_secure_notes_form_content_item_organization_color",CONTENT_PREFERENCES:"webapp_secure_notes_form_content_preferences",SECURITY_TITLE:"webapp_secure_notes_addition_field_tab_option_security_title",SECURITY_DESCRIPTION:"webapp_secure_notes_addition_field_tab_option_security_description",CHANGE_SECURED_SETTING_ON:"webapp_secure_notes_edition_unlocker_on_success",CHANGE_SECURED_SETTING_OFF:"webapp_secure_notes_edition_unlocker_off_success",COLORS:{BLUE:"webapp_secure_notes_addition_field_type_option_blue",BROWN:"webapp_secure_notes_addition_field_type_option_brown",GRAY:"webapp_secure_notes_addition_field_type_option_gray",GREEN:"webapp_secure_notes_addition_field_type_option_green",ORANGE:"webapp_secure_notes_addition_field_type_option_orange",PINK:"webapp_secure_notes_addition_field_type_option_pink",PURPLE:"webapp_secure_notes_addition_field_type_option_purple",RED:"webapp_secure_notes_addition_field_type_option_red",YELLOW:"webapp_secure_notes_addition_field_type_option_yellow"}},ee={title:"webapp_secure_notes_edition_unlocker_title_on",subtitle:"webapp_secure_notes_edition_unlocker_description_on"},te={title:"webapp_secure_notes_edition_unlocker_title_off",subtitle:"webapp_secure_notes_edition_unlocker_description_off"},ne=1e4,ie=({title:e,color:t,spaceId:n,content:i,isSecured:o,isNewItem:a,isShared:l,canEdit:s,isAddToCollectionDisabled:r,isDisabled:c,isDisableSecureNotesFFActive:T,hasAttachment:x,secureNoteValues:y,onModifyData:w,onCollectionsToUpdate:v,onSpaceIdChange:D,onTitleChange:A,onContentChange:Z,onColorChange:R,onIsSubmitDisabled:P,onIsSecuredChange:L,setHasDialogsOpenedByChildren:k})=>{const[B,M]=(0,d.useState)(!1),{translate:U}=(0,g.Z)(),{showToast:G}=(0,_.p)(),V=(0,F.F)(),{isMPLessUser:z}=(0,H.Z)(),X=(0,d.useRef)(null),{areProtectedItemsUnlocked:Y,openProtectedItemsUnlocker:W}=(0,O.tY)(),ie=X.current?.getVaultItemCollections(),{shouldShowFrozenStateDialog:oe}=(0,q.Ub)(),ae=!V&&!z,le=!!y.id,se=function(e,t,n){return t.filter((t=>e[t])).map((t=>({icon:n,label:`${e[t]}`,value:t})))}(E.reduce(((e,t)=>(e[t]=U(Q.COLORS[t]),e)),{}),E,(re=t,(0,C.tZ)("span",{className:"icon--eBGJiUqyZ5",style:{backgroundColor:(0,j.N)(re)}})));var re;const ce=e=>{L(e),G({description:U(e?Q.CHANGE_SECURED_SETTING_ON:Q.CHANGE_SECURED_SETTING_OFF),closeActionLabel:U("_common_dialog_dismiss_button")})},de=Boolean(ie?.some((e=>e.isShared)))||!s||c||l;return(0,d.useEffect)((()=>{i.length>ne&&!B?(M(!0),P(!0)):i.length<ne&&B&&(M(!1),P(!1))}),[i.length,B,P]),(0,C.BX)(d.Fragment,{children:[(l||x)&&(0,C.tZ)(u.k,{mood:"neutral",size:"small",title:U(l?Q.INFO_BOX_SHARED:Q.INFO_BOX_ATTACHMENTS),sx:{margin:"10px 0px"}}),(0,C.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"16px"},children:[(0,C.BX)(K.u,{title:U(Q.CONTENT_NOTE_DETAILS),children:[(0,C.tZ)(p.n,{label:U(Q.CONTENT_NOTE_DETAILS_TITLE),value:e,readOnly:c||l&&!s,onChange:e=>A(e.target.value)}),(0,C.tZ)($,{title:e,content:i,isSecured:o,setContent:Z,canEdit:s,readonly:c||T,isEditing:le,spaceId:n}),(0,C.tZ)(I,{isMaxSizeReached:B,currentSize:i.length})]}),(0,C.BX)(K.u,{title:U(Q.CONTENT_ITEM_ORGANIZATION),additionalSx:{display:"flex",flexDirection:"column",gap:"8px"},children:[(0,C.tZ)(h.m,{value:t,"data-name":"colorSelect",label:U(Q.CONTENT_ITEM_ORGANIZATION_COLOR),onChange:R,readOnly:c,children:se.map((e=>(0,C.tZ)(m.$,{value:e.value,children:e.label},e.value)))}),(0,C.tZ)(f.u,{wrapTrigger:!0,content:U(Q.CONTENT_ITEM_ORGANIZATION_FORCED_CATEGORIZATION,{space:n}),passThrough:!de,children:(0,C.tZ)(S.M,{spaceId:null!=n?n:"",disabled:de,onChange:e=>{n!==e&&(D(e),X.current?.clearVaultItemCollections())},defaultSpaceId:null!=n?n:"",isUsingNewDesign:!0})}),(0,C.tZ)(J.p,{hasLabel:!1,vaultItem:{spaceId:null!=n?n:"",vaultItemId:y.id,vaultItemTitle:e},ref:X,signalEditedValues:w,isAddCollectionDisabled:!!oe||x||r,setHasOpenedDialogs:k,setCollectionsToUpdate:v})]}),ae?(0,C.tZ)(K.u,{title:U(Q.CONTENT_PREFERENCES),children:(0,C.tZ)(b.X,{id:"securityToggle",label:U(Q.SECURITY_TITLE),description:U(Q.SECURITY_DESCRIPTION),checked:o,onChange:()=>{const e=!o;Y||a?ce(e):((0,O.jF)(),W({itemType:N.R.SecureNoteSetting,options:{fieldsKeys:e?ee:te,translated:!1},successCallback:()=>ce(e)}))}})}):null]})]})},{CONTENT:oe,DOCUMENT_STORAGE:ae,SHARED_ACCESS:le}=c.SecureNoteTabs,se=({activeTab:e,secureNoteValues:t,attachments:n,content:c,handleFileInfoDetached:_,hasAttachment:u,canManageAccess:p,canEdit:h,isShared:m,isUploading:f,isDisabled:b,onModifyData:g,onModalDisplayStateChange:T,setHasDialogsOpenedByChildren:I,isAddToCollectionDisabled:S,...E})=>{const O=(0,l.w)(i.w.DisableSecureNotes);return(0,C.BX)(d.Fragment,{children:[(0,C.tZ)("div",{"aria-labelledby":"tab-note-detail",id:"content-note-detail",children:e===oe&&(0,C.tZ)(ie,{secureNoteValues:t,content:c,isNewItem:!1,canEdit:h,isShared:m,isDisabled:b,isDisableSecureNotesFFActive:O,hasAttachment:u,onModifyData:g,setHasDialogsOpenedByChildren:I,isAddToCollectionDisabled:S,...E})}),e===le&&(0,C.tZ)("div",{"aria-labelledby":"tab-shared-access",id:"content-shared-access",children:(0,C.tZ)(r.u,{canManageAccess:p,id:t.id,type:a.y2.SecureNote})}),e===ae&&(0,C.tZ)("div",{"aria-labelledby":"tab-document-storage",id:"content-document-storage",children:(0,C.tZ)(s.P,{attachments:n,additionalProps:{itemId:t.id,itemType:o.ItemType.SecureNote,handleFileInfoDetached:e=>{_(e)},onModalDisplayStateChange:T,isUploading:f}})})]})}},85163:(e,t,n)=>{"use strict";n.d(t,{Q:()=>_});var i=n(8180),o=n(83459),a=n(13252),l=n(46525),s=n(86342),r=n(30309);const c=e=>!e.initiallyExisting&&!e.hasBeenDeleted,d=e=>e.initiallyExisting&&!e.hasBeenDeleted,_=()=>{const{createCollection:e,updateCollection:t}=(0,i.u)(l.v),{addItemsToCollections:n,removeItemFromCollections:_}=(0,i.u)(o.a);return{addNoteToCollections:async(i,o)=>{const l=[],u=[];for(const n of o){var p;d(n)||(n.isShared?c(n)?l.push({collectionId:n.id,permission:null!=(p=n.itemPermission)?p:a.y3.Limited}):u.push(n.id):(n.vaultItems=[{id:i,type:r.dJ.KWSecureNote}],n.id?await t({id:n.id,collection:n,operationType:n.hasBeenDeleted?s.C.SUBSTRACT_VAULT_ITEMS:s.C.APPEND_VAULT_ITEMS}):await e({content:n})))}l.length&&await n({collectionPermissions:l,itemIds:[i],shouldSkipSync:u.length>0}),u.length&&await _({collectionIds:u,itemId:i})}}}},2730:(e,t,n)=>{var i=n(96832);function o(e){return i.createElement("svg",e,i.createElement("g",{fill:"none",fillRule:"evenodd"},[i.createElement("path",{className:"tooltip-modern-icon-stroke",d:"M.5 8.5a8 8 0 1 1 16 0 8 8 0 0 1-16 0zm8-1v5",key:0}),i.createElement("path",{className:"tooltip-modern-icon-fill",d:"M9.5 4.5a1 1 0 1 0-2 0 1 1 0 1 0 2 0",key:1})]))}o.defaultProps={width:"17",height:"17"},e.exports=o,o.default=o},15567:(e,t,n)=>{var i=n(96832);function o(e){return i.createElement("svg",e,i.createElement("path",{d:"M6.547 7.25c0-1 1-2 2.5-2s2.5.75 2.5 2c0 1-.5 1.5-1.5 2.25s-1 1.25-1 1.75m-8.5-1.5a8.5 8.5 0 1 1 17 0 8.5 8.5 0 0 1-17 0Zm9 4a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0Z",className:"tooltip-modern-icon-stroke"}))}o.defaultProps={width:"17",height:"17",viewBox:"0 0 19 19",fill:"none"},e.exports=o,o.default=o}}]);