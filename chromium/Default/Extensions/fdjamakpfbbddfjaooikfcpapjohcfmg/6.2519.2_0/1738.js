"use strict";(globalThis.webpackChunk_dashlane_leeloo=globalThis.webpackChunk_dashlane_leeloo||[]).push([[1738],{31738:(e,t,a)=>{a.r(t),a.d(t,{BankAccountAddView:()=>C});var n=a(96832),o=a(8180),r=a(78346),c=a(94138),s=a(14877),i=a(44105),u=a(39431),l=a(14900),m=a(73704),d=a(86498),p=a(76376),_=a(39649),b=a(49023),f=a(88203),g=a(45272),y=a(92077),S=a(42670),h=a(63520),k=a(79255),w=a(24507),N=a(93314);var I,v=a(36351);const B="_common_generic_error",C=({lee:e})=>{var t;const[a,C]=(0,n.useState)(!1),[R,V]=(0,n.useState)(!1),[E,A]=(0,n.useState)(new Set),U=(0,n.useRef)(null),{createVaultItem:L}=(0,o.u)(s.L),{routes:T}=(0,p.Xo)(),{openDialog:Z,shouldShowFrozenStateDialog:D}=(0,S.Ub)();(0,n.useEffect)((()=>{(0,g.Nc)(m.PageView.ItemBankStatementCreate);const e=setTimeout((()=>{U.current?.focus()}),b.sc);return()=>clearTimeout(e)}),[]),(0,n.useEffect)((()=>{D&&Z()}),[D]);const[P,z]=(0,n.useState)({bankCode:"",country:i.c[e.globalState.locale.country]||i.c.US,IBAN:"",BIC:"",accountName:"",ownerName:"",spaceId:null!=(t=(0,_.B)(e.globalState))?t:""}),O=(e=>{const{data:t}=(0,w.k)(s.L,"query",{vaultItemTypes:[u.U.Identity],propertyFilters:null!==e?[{property:"spaceId",value:e}]:void 0,propertySorting:{property:"lastUse",direction:N.S.Descend}});return t&&t.identitiesResult.matchCount?(e=>{var t;const{firstName:a,lastName:n}=null!=(t=e.filter(Boolean).find((e=>""!==e.firstName.trim()||""!==e.lastName.trim())))?t:{firstName:"",lastName:""};return[a,n].join(" ").trim()})(t.identitiesResult.items):""})(P.spaceId),W=""!==O;(0,n.useEffect)((()=>{""!==O&&z((e=>({...e,owner:O})))}),[W]);const{translate:x}=(0,f.Z)(),{showAlert:F}=(0,d.V)(),X=()=>{(0,g.Nc)(m.PageView.ItemPaymentList),(0,y.uX)(T.userPayments)},j=(0,n.useCallback)(((e,t=!1)=>{z((t=>({...t,...e}))),t||C(!0)}),[]);return(0,v.tZ)(h.zI,{isUsingNewDesign:!0,isViewingExistingItem:!1,itemHasBeenEdited:a,formId:"bank-account-add-form",onNavigateOut:X,onSubmit:async()=>{if(R)return;const e=(0,k.e)(P);if(!e.isValid)return A(e.errorSet);V(!0);try{const e=await L({vaultItemType:u.U.BankAccount,content:P});(0,r.d6)(e)?(F(P.accountName?x("webapp_payment_edition_bank_account_name_save_alert",{accountName:P.accountName}):x("webapp_payment_edition_bank_account_generic_save_alert"),l.BLW.SUCCESS),X()):(F(x(B),l.BLW.ERROR),V(!1))}catch(e){F(x(B),l.BLW.ERROR),V(!1)}},header:(0,v.tZ)(h.V9,{icon:I||(I=(0,v.tZ)(c.A,{type:"bank-account",size:"xlarge"})),title:x("webapp_payment_edition_header_add_bank_account")}),children:(0,v.tZ)(k.o,{bankAccount:P,errors:E,ref:U,onValueChanged:j,variant:"add"})})}}}]);