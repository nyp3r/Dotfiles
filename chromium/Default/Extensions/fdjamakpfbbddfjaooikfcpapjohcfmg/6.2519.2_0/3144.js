"use strict";(globalThis.webpackChunk_dashlane_leeloo=globalThis.webpackChunk_dashlane_leeloo||[]).push([[3144],{78892:(e,t,i)=>{i.d(t,{p:()=>M});var n=i(96832),a=i(95727),l=i(90248),s=i(73704),o=i(51031),d=i(45272),r=i(18108),c=i(81701),p=i(80936),u=i(36351);const _=(0,n.createContext)({}),h=(0,n.createContext)({}),m=({children:e,vaultItem:t,isAddCollectionDisabled:i,signalEditedValues:l,setHasOpenedDialogs:m,setCollectionsToUpdate:b})=>{const{vaultItemId:g,spaceId:w}=t,f=(0,r.E)(),[y,v]=(0,n.useState)(""),[C,x]=(0,n.useState)(!1),{allCollections:k}=(0,a.bA)(),I=(0,p.I)(),D=I.status===o.rq.Success&&I.isDisabled,[Z,E]=(0,n.useState)((()=>""===g?[]:k.flatMap((e=>e.vaultItems.some((e=>e.id===g))?{...e,initiallyExisting:!0,hasBeenDeleted:!1}:[])))),P=(e=>""!==e&&(f.status===o.rq.Success&&f.data.length>0?f?.data:[]).some((t=>t.teamId===e)))(w)?w:"",S=(0,n.useMemo)((()=>Z.filter((e=>!e.hasBeenDeleted))),[Z]),R=(0,n.useMemo)((()=>k.filter((e=>!S.some((t=>t.id===e.id))))),[k,S]),L=e=>{const t=e(Z);b?.(t),E(t)},U={setInput:v,setIsInputVisible:x,onSubmit:(e=y,t)=>{if((e=e.trim()).length<=0)return;const i=Z.findIndex((t=>t.name===e&&(D||P===t.spaceId)));if(-1===i)L((i=>{var n;const a=[...i],l=k.find((t=>t.name===e&&(D||t.spaceId===P)));return a.push({id:null!=(n=l?.id)?n:"",name:e,spaceId:P,isShared:l?.isShared,vaultItems:[],initiallyExisting:!1,hasBeenDeleted:!1,itemPermission:t}),(0,c.p)(a)}));else{const e=Z[i];e.initiallyExisting&&e.hasBeenDeleted&&L((e=>{const t=[...e];return t[i].hasBeenDeleted=!1,t}))}l?.(!0),v("")},onDelete:e=>{const t=Z.findIndex((t=>t.name===e));if(-1===t)return;const i=Z[t];L((e=>{const n=[...e];return i.initiallyExisting?n[t].hasBeenDeleted=!0:n.splice(t,1),n})),(0,d.Nc)(s.PageView.CollectionDelete),l?.(!0)},clearVaultItemCollections:()=>L((e=>e.flatMap((e=>e.initiallyExisting?{...e,hasBeenDeleted:!0}:[]))))};return(0,u.tZ)(_.Provider,{value:{input:y,itemSpaceId:P,isInputVisible:C,filteredCollections:R,vaultItemCollections:Z,vaultItemCollectionsToDisplay:S,setHasOpenedDialogs:m,vaultItem:t,isAddCollectionDisabled:i},children:(0,u.tZ)(h.Provider,{value:U,children:e})})},b=()=>(0,n.useContext)(_),g=()=>(0,n.useContext)(h);var w,f=i(68999),y=i(47124),v=i(84925),C=i(13252),x=i(88203),k=i(67678),I=i(33918),D=i(71951),Z=i(30894),E=i(68819),P=i(24507);const S=({id:e,hasCollections:t,setHasOpenedDialogs:i,isDisabled:a=!1,isItemMPProtected:s})=>{var o;const{openProtectedItemsUnlocker:d}=(0,Z.tY)(),{translate:r}=(0,x.Z)(),c=(0,n.useRef)(null),{isInputVisible:p,itemSpaceId:_,filteredCollections:h,input:m,vaultItem:S}=b(),{vaultItemTitle:R,vaultItemId:L}=S,U=(0,P.k)(v.X,"getPermissionForItem",{itemId:L}),T=U.data?.capabilities.canShare,{openDialog:O,closeDialog:W}=(0,k.R)(),{setInput:B,setIsInputVisible:A,onSubmit:M}=g(),N=(e,t)=>{M(t,e),W(),i?.(!1),c.current?.focus()},F=()=>{W(),i?.(!1)};return p?(0,u.tZ)(l.x5,{collections:h,id:e,input:m,inputRef:c,spaceId:_,selectionAsDropdown:!0,onSubmit:t=>{const n=h.find((e=>e.name===t&&e.spaceId===_)),a=()=>{n?.isShared&&!T?(O(o||(o=(0,u.tZ)(D.Q,{onClose:F}))),i?.(!0)):n?.isShared?(O((0,u.tZ)(I.B,{onSubmit:N,onClose:F,itemTitle:R,collectionName:n.name})),i?.(!0)):N(C.y3.Admin,t)};if(s)return d({action:E.P.Copy,itemType:E.R.Password,showNeverAskOption:!0,credentialId:e,successCallback:a});a()},setInput:B,onBlur:e=>{e.currentTarget.contains(e.relatedTarget)||window.setTimeout((()=>{A(!1)}),100)}}):(0,u.tZ)(f.z,{onClick:()=>A(!0),layout:"iconLeading",intensity:"supershy",disabled:a,mood:"neutral",icon:w||(w=(0,u.tZ)(y.JO,{name:"ActionAddOutlined"})),children:r(t?"webapp_collections_input_placeholder_add_another":"webapp_collections_input_placeholder_add_new")})},R=e=>(0,u.tZ)("div",{sx:{flex:"1",display:"flex",flexDirection:"column"},...e});var L,U=i(51728);const T=({hasMultipleCollections:e,...t})=>{const{vaultItem:i}=b(),a=(0,U.b)(i.spaceId),{translate:l}=(0,x.Z)();return(0,u.tZ)("label",{sx:{display:"flex",width:"149px",justifyContent:"flex-end",fontWeight:"600",textAlign:"right"},...t,children:(0,u.BX)("span",{sx:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[a&&(0,u.BX)(n.Fragment,{children:[`${a}`,L||(L=(0,u.tZ)("br",{}))]}),l(e?"webapp_credentials_header_row_category":"webapp_credential_edition_field_category")]})})},O=e=>(0,u.tZ)("div",{sx:{display:"flex",flexDirection:"row"},...e});var W=i(63847);const B="collectionsFieldId",A=(0,n.forwardRef)((({hasLabel:e=!0,isItemMPProtected:t},i)=>{const{vaultItemCollections:a,vaultItemCollectionsToDisplay:s,isAddCollectionDisabled:o,setHasOpenedDialogs:d}=b(),{onDelete:r,clearVaultItemCollections:c}=g(),p=s?.length>0;return(0,n.useImperativeHandle)(i,(()=>({getVaultItemCollections:()=>a,clearVaultItemCollections:c}))),(0,u.BX)(O,{sx:{gap:"24px",alignItems:!p&&"center"},children:[e?(0,u.tZ)(T,{hasMultipleCollections:s?.length>1,htmlFor:B,sx:{marginTop:p&&"15px"}}):null,(0,u.BX)(R,{sx:{...p&&{gap:"8px",marginTop:"10px"}},children:[(0,u.tZ)(W.k,{as:"ul",gap:"8px","data-testid":"collectionsList",children:s.map((e=>(0,u.tZ)(l.KH,{onDismiss:()=>r(e.name),isShared:e.isShared,children:e.name},`collections_field_li_${e.name}`)))}),(0,u.tZ)(S,{id:B,hasCollections:p,setHasOpenedDialogs:d,isDisabled:o,isItemMPProtected:t})]})]})})),M=(0,n.forwardRef)((({vaultItem:e,isAddCollectionDisabled:t,signalEditedValues:i,setHasOpenedDialogs:n,hasLabel:l,isItemMPProtected:s,setCollectionsToUpdate:o},d)=>{const{isCollectionsLoading:r}=(0,a.bA)();return r?null:(0,u.tZ)(m,{vaultItem:e,signalEditedValues:i,setHasOpenedDialogs:n,isAddCollectionDisabled:t,setCollectionsToUpdate:o,children:(0,u.tZ)(A,{ref:d,hasLabel:l,isItemMPProtected:s})})}))},63144:(e,t,i)=>{i.d(t,{S:()=>It});var n=i(96832),a=i(63082),l=i(73704),s=i(24507),o=i(51031),d=i(14900),r=i(13134),c=i(86498),p=i(5465),u=i(88203),_=i(45272);let h=function(e){return e[e.SECONDARY_LOGIN=0]="SECONDARY_LOGIN",e[e.OTP_CODE=1]="OTP_CODE",e}({});const m=e=>Boolean(e.otpURL)||Boolean(e.otpSecret),b=e=>{const{username:t,alternativeUsername:i}=e;return Boolean(t)||Boolean(i)};var g=i(67406),w=i(30894),f=i(68819),y=i(82207),v=i(5063),C=i(48038),x=i(80610),k=i(10291),I=i(36351);const D={title:"webapp_lock_items_require_master_password_for_credential_title_on",subtitle:"webapp_lock_items_require_master_password_for_credential_subtitle_on",confirm:"webapp_lock_items_require_master_password_confirm_on_for_credential"},Z={title:"webapp_lock_items_require_master_password_for_credential_title_off",subtitle:"webapp_lock_items_require_master_password_for_credential_subtitle_off",confirm:"webapp_lock_items_require_master_password_confirm_off_for_credential"},E=({name:e,title:t,description:i,setValue:a,isMpProtected:l=!1,value:s,disabled:o=!1})=>{const{areProtectedItemsUnlocked:d,openProtectedItemsUnlocker:r}=(0,w.tY)(),c=(0,n.useCallback)((e=>{const t=e.target.checked,i=async()=>{await a(t)};return l&&!d?((0,k.jF)(),r({itemType:f.R.SecuritySettings,options:{fieldsKeys:t?D:Z,translated:!1},successCallback:i})):i()}),[d,l,r,a]),p=`setting-${e}`;return(0,I.tZ)(x.X,{label:t,description:i,checked:s,onChange:c,id:p,disabled:o})};var P=i(32197),S=i(33988),R=i(54350);const L="webapp_credential_edition_field_options_always_log_me",U="webapp_credential_edition_field_options_always_log_me_details",T="webapp_credential_edition_field_options_added_by_user_only",O="webapp_credential_edition_field_options_added_by_user_only_details",W="webapp_credential_edition_field_options_always_require_master_password",B="webapp_credential_edition_field_options_always_require_master_password_details",A="webapp_credential_edition_field_options_always_require_master_password_disable_feedback_markup",M=({credentialPreferences:e,isNewCredential:t,url:i,isPreferenceDisabled:a=!1,update:l})=>{const s=(0,P.q)(),o=(0,n.useMemo)((()=>{if(!i)return!1;try{return new URL(i),!0}catch(e){try{return new URL("https://"+i),!0}catch(e){return!1}}}),[i]),{translate:r}=(0,u.Z)(),c=(0,S.F)(),p=(0,R.Z)(),_=!c&&!p.isMPLessUser,h=t=>l({...e,requireMasterPassword:t});return(0,I.BX)("div",{children:[o?null:(0,I.tZ)(v.k,{mood:"warning",size:"small",title:r("webapp_credential_edition_field_options_no_url_warning"),sx:{marginBottom:"8px"}}),(0,I.tZ)(E,{name:"useAutoLogin",description:r(U),isMpProtected:!1,title:r(L),setValue:t=>l({...e,useAutoLogin:t}),value:e.useAutoLogin,disabled:!o||a}),(0,I.tZ)(E,{name:"onlyAutofillExactDomain",isMpProtected:!1,title:r(T),description:r(O),setValue:t=>l({...e,onlyAutofillExactDomain:t}),value:e.onlyAutofillExactDomain,disabled:!o||a}),_?s.status===C.rq.Success?(0,I.tZ)(E,{name:"requireMasterPassword",isMpProtected:!t,title:r(W),description:(0,I.BX)("div",{children:[s.data?(0,I.tZ)("div",{sx:{marginBottom:"8px",color:d.colors.midGreen00},children:r.markup(A)}):null,(0,I.tZ)("span",{children:r(B)})]}),setValue:h,value:!!s.data||e.requireMasterPassword,disabled:!o||s.data||a}):(0,I.tZ)(E,{name:"requireMasterPassword",isMpProtected:!t,title:r(W),description:r(B),setValue:h,value:e.requireMasterPassword,disabled:!o||a}):null]})};var N=i(78892),F=i(61605),q=i(33840),V=i(39378);const X=(e,t)=>{const i=new r.Y(t);(0,q.k)(e,t),(0,F.Yo)(i.getUrlWithFallbackHttpsProtocol())};var G=i(68999),z=i(25337);const H=({credential:e})=>{const{translate:t}=(0,u.Z)(),[i,a]=(0,n.useState)(null),l=(0,n.useCallback)((e=>a(e)),[]),s=(0,n.useCallback)((()=>a(null)),[]);return(0,I.BX)(n.Fragment,{children:[(0,I.tZ)(G.z,{"aria-label":t("webapp_credential_edition_autochange"),layout:"iconOnly",icon:"ActionRefreshOutlined",mood:"brand",intensity:"supershy",onClick:()=>l(e.id),disabled:!e.canEdit,tooltip:t("webapp_credential_edition_autochange")}),i&&(0,I.tZ)(z.R,{credentialId:i,dismissCallback:s})]})},K=(0,n.memo)(H);var Y=i(84985),j=i(30202),$=i(83849),J=i.n($);const Q=({disableHover:e=!1,...t})=>{const[i,a]=n.useState(!1),{children:[l,...s]=[]}=t;return(0,I.BX)("div",{className:"buttonsContainer--TiPIoxROXR",onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),children:[l,t.enabled&&(0,I.tZ)("span",{className:J()("buttons--p98QFrEo3f",{"visible--aWYlZRshE_":e||i}),children:s})]})};var ee=i(54712),te=i(26849),ie=i(57459),ne=i(58549),ae=i.n(ne),le=i(73630);const se={container:"container--Qypu77vxOn",containerMultiLine:"containerMultiLine--ncWYFwQEnR",_field:"_field--KII5X4xmLN",input:"input--Iq10hxAz32 _field--KII5X4xmLN",inputRow:"inputRow--gdD_j5S1R8",textarea:"textarea--VpIWTZemV2 _field--KII5X4xmLN",label:"label--Ww_r49kt_J",text:"text--oXyCzpUMwG",value:"value--aD7nWEqBIq",multiline:"multiline--fdPM1KFHPT"},oe=e=>{navigator.clipboard.writeText(e.replaceAll(" ",""))};class de extends n.Component{constructor(e){super(e),this.field=void 0,this.handleChange=e=>{this.setState({selectionRangeStart:e.target.selectionStart,selectionRangeEnd:e.target.selectionEnd}),this.props.onChange&&this.props.onChange(e)},this.state={fieldHtmlId:(0,ie.Z)(),selectionRangeStart:null,selectionRangeEnd:null}}componentDidUpdate(){null!==this.state.selectionRangeStart&&null!==this.state.selectionRangeEnd&&this.field.setSelectionRange(this.state.selectionRangeStart,this.state.selectionRangeEnd)}shouldComponentUpdate(e,t){return!((0,te.equals)(this.props.value,e.value)&&(0,te.equals)(this.props.error,e.error)&&(0,te.equals)(this.props.mask,e.mask)&&(0,te.equals)(this.props.label,e.label)&&(0,te.equals)(this.state.selectionRangeStart,t.selectionRangeStart)&&(0,te.equals)(this.state.selectionRangeEnd,t.selectionRangeEnd))}getValue(){return this.field.value}focus(){this.field.focus()}getTextarea(){var e;return(0,I.tZ)(ee.Z,{inputRef:e=>{this.field=e},id:this.state.fieldHtmlId,disabled:this.props.disabled,value:null!=(e=this.props.value)?e:"",name:this.props.name,"data-name":this.props.dataName,sx:{borderColor:this.props.error&&"ds.border.danger.standard.idle"},className:se.textarea,placeholder:this.props.placeholder,onBlur:this.props.handleFieldBlur,onKeyDown:this.props.onFieldKeyDown,onChange:this.handleChange,readOnly:this.props.readOnly})}getInput(){var e;const t={onBlur:this.props.handleFieldBlur,onChange:this.handleChange,disabled:this.props.disabled,readOnly:this.props.readOnly,value:null!=(e=this.props.value)?e:""},i={ref:e=>{this.field=e},id:this.state.fieldHtmlId,autoComplete:"off",className:J()(se.input,{[se.error]:Boolean(this.props.error)}),sx:{...this.props.error&&{"::placeholder":{color:"ds.text.danger.quiet"},minWidth:"fit-content"},border:"1px solid",borderColor:this.props.error?"ds.border.danger.standard.idle":"transparent"},name:this.props.name,"data-name":this.props.dataName,type:this.props.type||"text",placeholder:this.props.placeholder,onKeyDown:this.props.onFieldKeyDown};return this.props.mask?(0,I.tZ)(ae(),{...t,...this.props.maskProps,mask:this.props.mask,onCopy:()=>oe(t.value),onCut:()=>oe(t.value),children:e=>(0,I.tZ)("input",{...i,...e})}):(0,I.BX)("div",{className:se.inputRow,children:[(0,I.tZ)("input",{...i,...t}),(0,I.tZ)("div",{hidden:!this.props.error||"string"!=typeof this.props.error,sx:{color:"ds.text.danger.quiet"},className:se.errorMessage,children:this.props.error})]})}render(){const e="password"!==this.props.type?this.props.value||this.props.placeholder:"";return(0,I.BX)("div",{className:J()(se.container,this.props.multiLine?se.containerMultiLine:null),children:[this.props.label&&(0,I.tZ)("label",{className:se.label,sx:{color:"ds.text.neutral.catchy"},htmlFor:this.state.fieldHtmlId,children:(0,I.tZ)("span",{className:se.text,title:this.props.label,children:this.props.label})}),(0,I.tZ)(le.Z,{tooltipText:e,className:J()(se.value,{[se.placeholder]:!this.props.value,[se.multiline]:this.props.multiLine}),children:this.props.multiLine?this.getTextarea():this.getInput()})]})}}var re;de.defaultProps={maskProps:{maskChar:""}};const ce="webapp_credential_edition_field_website",pe="webapp_credential_edition_field_placeholder_no_url",ue="webapp_credential_edition_field_website_action_goto",_e=({url:e,hasUrlError:t,disabled:i,editViewButtonEnabled:n,isWebsiteFieldReadonly:a,handleChange:l,handleGoToWebsite:s,isUsingNewDesign:o=!1})=>{const{translate:r}=(0,u.Z)();return o?(0,I.tZ)(j.q,{"data-name":"URL",label:r(ce),placeholder:r(pe),disabled:i||!e&&a,value:e,error:t,readOnly:!!e&&a,onChange:l,sx:{marginTop:"8px"},showOpenWebsite:n?{label:r(ue),onClick:s}:void 0}):(0,I.BX)(Q,{enabled:n,disableHover:!0,children:[(0,I.tZ)(de,{label:r(ce),placeholder:r(pe),dataName:"URL",disabled:i,value:e,error:t,readOnly:a,onChange:l}),(0,I.tZ)(d.ua7,{placement:"top",content:r(ue),children:(0,I.tZ)(G.z,{mood:"neutral",intensity:"supershy",type:"button",onClick:s,sx:{border:"none",minWidth:"fit-content",padding:"10px"},role:"link","aria-label":r(ue),children:re||(re=(0,I.tZ)(d.RTC,{}))})})]})},he=({children:e,url:t,hasUrlError:i,isWebsiteFieldReadonly:n,editViewButtonEnabled:a,handleMainWebsiteChange:l,handleGoToWebsite:s})=>(0,I.BX)("div",{children:[(0,I.tZ)(_e,{url:t,hasUrlError:i,editViewButtonEnabled:a,handleChange:l,handleGoToWebsite:s,isWebsiteFieldReadonly:n,isUsingNewDesign:!0}),e]}),me=({url:e,hasUrlError:t,handleMainWebsiteChange:i,handleChanges:a,handleGoToWebsite:l})=>{const[s,o]=n.useState(!1),[d,r]=n.useState([]);return n.useEffect((()=>{d.length&&o(!0),a({linkedURLs:d})}),[d]),(0,I.tZ)(he,{url:e,hasUrlError:t,isWebsiteFieldReadonly:!1,editViewButtonEnabled:!1,handleMainWebsiteChange:i,handleGoToWebsite:l,children:(0,I.tZ)(Y.a,{linkedWebsitesList:d,credentialId:"",isListEditable:!0,isEditing:s,showUrlProtocol:!0,updateLinkedWebsitesList:r})})};var be=i(29020);const ge=({totalLinkedWebsitesLength:e})=>{const{translate:t}=(0,u.Z)();return e>0?(0,I.tZ)(be.n,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.quiet",sx:{marginTop:"12px",marginLeft:"12px"},children:t("webapp_credential_edition_linked_websites_title_with_count",{count:e})}):null};var we=i(39506);const fe=({url:e,linkedWebsitesAddedByUser:t,dashlaneDefinedLinkedWebsites:i,hasUrlError:n,editViewButtonEnabled:a,canEdit:l=!0,handleChange:s,handleGoToWebsite:o,onClickAddNewWebsite:d,isWebsiteFieldReadonly:r})=>{const{translate:c}=(0,u.Z)(),p=t.length+(i&&i.length>1?i.length:0);return(0,I.tZ)(he,{url:e,hasUrlError:n,editViewButtonEnabled:a,handleMainWebsiteChange:s,handleGoToWebsite:o,isWebsiteFieldReadonly:r,children:(0,I.BX)("div",{sx:{display:"flex",justifyContent:p>0?"space-between":"flex-end"},children:[(0,I.tZ)(ge,{totalLinkedWebsitesLength:p}),d&&l?(0,I.tZ)(we.E,{handleOnClickAddLinkedWebsiteButton:d,disabled:r,label:c(p>0?"webapp_credential_edition_linked_websites_manage":"webapp_credential_edition_linked_websites_add_website")}):null]})})};var ye=i(68037),ve=i(32690),Ce=i(93853),xe=i(81986),ke=i(51409),Ie=i(31062);const De=({options:e,onOptionsChanged:t})=>{const{translate:i}=(0,u.Z)(),a=(0,n.useCallback)((i=>{const n=i.currentTarget.checked;t({...e,digits:n})}),[t,e]),l=(0,n.useCallback)((i=>{const n=i.currentTarget.checked;t({...e,letters:n})}),[t,e]),s=(0,n.useCallback)((i=>{const n=i.currentTarget.checked;t({...e,symbols:n})}),[t,e]),o=(0,n.useCallback)((i=>{const n=i.currentTarget.checked;t({...e,avoidAmbiguous:!n})}),[t,e]);return(0,I.BX)("div",{sx:{display:"flex",justifyContent:"space-between",marginTop:"8px",marginBottom:"8px"},children:[(0,I.BX)("div",{children:[(0,I.tZ)(x.X,{label:i("webapp_credential_edition_field_generator_use_letters"),onChange:l,checked:e.letters,disabled:e.letters&&!e.digits}),(0,I.tZ)(x.X,{label:i("webapp_credential_edition_field_generator_use_digits"),onChange:a,checked:e.digits,disabled:e.digits&&!e.letters})]}),(0,I.BX)("div",{children:[(0,I.tZ)(x.X,{label:i("webapp_credential_edition_field_generator_use_symbols"),onChange:s,checked:e.symbols}),(0,I.tZ)(x.X,{label:i("webapp_credential_edition_field_generator_similar_characters"),onChange:o,checked:!e.avoidAmbiguous})]})]})},Ze=({length:e,onLengthChanged:t})=>{const{translate:i}=(0,u.Z)(),[a,l]=(0,n.useState)(e);return(0,I.tZ)("div",{"aria-label":i("webapp_credential_edition_field_generator_min_max_a11y",{min:4,max:40}),sx:{"> div":{"> label":{color:"ds.text.neutral.quiet"},"> p":{color:"ds.text.neutral.quiet"}}},children:(0,I.tZ)(d.iRW,{label:i("webapp_credential_edition_field_generator_password_length",{length:a}),min:4,max:40,step:1,onChange:e=>{l(e)},onChangeComplete:t,value:a})})},Ee=({options:e,handleSettingsChange:t,handleGenerateNewPassword:i,handleClose:n})=>{const{translate:a}=(0,u.Z)();return(0,I.BX)(d.T5p,{gap:"10px",sx:{padding:"10px"},children:[(0,I.BX)(d.T5p,{gap:"10px",sx:{textAlign:"left",padding:"10px",borderRadius:"4px"},children:[(0,I.tZ)(Ze,{length:e.length,onLengthChanged:i=>{t({...e,length:i})}}),(0,I.tZ)(De,{onOptionsChanged:e=>{t(e)},options:e})]}),(0,I.tZ)(G.z,{fullsize:!0,mood:"brand",intensity:"catchy",onClick:i,children:a("webapp_credential_edition_button_generate_another_password")}),(0,I.tZ)(G.z,{fullsize:!0,mood:"neutral",intensity:"quiet",onClick:n,children:a("webapp_credential_edition_button_close_password_generator")})]})},Pe=({generatorSettings:e,setGeneratorSettings:t,handleChangePassword:i,handleClose:a})=>{const s=e=>{p.C.generatePassword({settings:e}).then((e=>{e.success&&i(e.password)})).finally((()=>{(0,_.Kz)(new l.UserGeneratePasswordEvent({hasDigits:e.digits,hasLetters:e.letters,hasSymbols:e.symbols,hasSimilar:!e.avoidAmbiguous,length:e.length}))}))};return(0,n.useEffect)((()=>{s(e)}),[e]),(0,I.tZ)(ye.u,{additionalSx:{backgroundColor:"ds.container.agnostic.neutral.quiet",marginTop:"8px"},children:(0,I.tZ)(Ee,{options:e,handleSettingsChange:e=>{t(e),s(e)},handleGenerateNewPassword:()=>{s(e)},handleClose:a})})};var Se=i(62264),Re=i(63847),Le=i(40577),Ue=i(17459),Te=i(9190),Oe=i(47124);const We=({size:e=Oe.C,percentage:t,...i})=>{const[a,l]=(0,n.useMemo)((()=>{const e=Math.min(100,Math.max(0,t));let i=0;function n(e){return[Math.cos(2*Math.PI*e),Math.sin(2*Math.PI*e)]}return[e/100,1-e/100].map((e=>{const[t,a]=n(i);i+=e;const[l,s]=n(i);return[`M ${t} ${a}`,`A 1 1 0 ${e>.5?1:0} 1 ${l} ${s}`,"L 0 0"].join(" ")}))}),[t]);return(0,I.BX)("svg",{viewBox:"-1 -1 2 2",sx:{transform:"rotate(-90deg) scale(1, -1)",width:`ds.icon.${e}`,minWidth:`ds.icon.${e}`,height:`ds.icon.${e}`},...i,children:[(0,I.tZ)("path",{d:a,sx:{fill:"ds.container.expressive.brand.catchy.idle"}}),(0,I.tZ)("path",{d:l,sx:{fill:"ds.container.agnostic.neutral.standard"}})]})};We.displayName="Countdown";var Be=i(64447);function Ae(e=0,t=1){return Math.floor(Math.random()*(t-e))+e}function Me(e,t=Ae(0,e.length)){return e.slice(0,t)+Ae(0,10)+e.slice(t+1)}const Ne=10;const Fe=({code:e,onTimerEnd:t,validityEndDate:i,validityPeriod:a})=>{const[l,s]=(0,n.useState)(!1),o=(0,n.useRef)(null),[d,r]=(0,n.useState)(a),c=Math.max(Math.floor(d/1e3),0),p=(0,n.useCallback)((()=>{s(!0),t?.()}),[t]),{shuffledCode:u}=function({shouldShuffle:e,codeLength:t}){const i=n.useRef(null),[a,l]=n.useState(function(e){return"0".repeat(e).split("").map((()=>Ae(0,10))).join("")}(t)),s=n.useCallback((()=>{let e=Me(a);for(;e===a;)e=Me(e);l(e)}),[a]);return n.useEffect((()=>(e&&(i.current=window.setTimeout(s,Ne)),()=>{if(i.current)return window.clearTimeout(i.current)})),[s,e]),{shuffledCode:a}}({shouldShuffle:!e||l,codeLength:e?e.length:6}),_=(e=>{const t=Math.floor(e.length/2);return[e.slice(0,t)," ",e.slice(t)].join("")})(!e||l?u:e),h=(0,n.useCallback)((()=>{l&&s(!1);const e=i-Date.now();r(Math.max(i-Date.now(),0)),o.current&&e<=0?p():o.current=window.setTimeout(h,Math.min(1e3,e))}),[l,p,i]);return(0,n.useEffect)((()=>(h(),()=>{if(o.current)return clearTimeout(o.current)})),[h]),{secondsLeft:c,percentageOfTimeLeft:d/a*100,formattedCode:_}},qe={padding:"10px"},Ve=({id:e,label:t,feedback:i,code:a,action:l,validityEndDate:s,validityPeriod:o,onTimerEnd:d,onFocus:r,onBlur:c,"aria-describedby":p,className:u,..._})=>{const[h,m]=(0,n.useState)(!1),{inputID:b,describedByIDs:g,feedbackWithID:w}=(0,Te.F)({id:e,feedback:i,ariaDescribedBy:p}),{formattedCode:f,percentageOfTimeLeft:y,secondsLeft:v}=Fe({code:a,validityEndDate:s,validityPeriod:o,onTimerEnd:d});return(0,I.BX)(Ue.n,{label:t,labelFor:b,isFocused:h,feedback:w,readOnly:!0,suffixSlot:(0,I.BX)(n.Fragment,{children:[(0,I.tZ)("div",{sx:qe,children:(0,I.tZ)(Ie.u,{content:v,wrapTrigger:!0,children:(0,I.tZ)(We,{percentage:y})})}),l?(0,I.tZ)(G.z,{tooltip:l.label,layout:"iconOnly",intensity:"supershy","aria-label":l.label,icon:l.iconName,onClick:()=>{l.onClick(a)},role:l.role},l.label):null]}),className:u,children:[(0,I.tZ)(be.n,{"aria-hidden":!0,textStyle:"ds.body.standard.monospace",color:"ds.text.neutral.catchy",children:f}),(0,I.tZ)(Be.T,{children:(0,I.tZ)("input",{id:b,type:"text",onFocus:(...e)=>{r?.(...e),m(!0)},onBlur:(...e)=>{c?.(...e),m(!1)},"aria-describedby":g,..._,value:a,readOnly:!0})})]})};Ve.displayName="OTPField";var Xe=i(45636);const Ge=({secretOrUrl:e,onCopy:t,onDelete:i,isEditable:a})=>{const{translate:l}=(0,u.Z)(),{data:s,status:d}=(0,Xe.v6)(e);if(d!==o.rq.Success||null==s)return null;const[r,c,p]=d===o.rq.Success&&s?[s.code,s.validityTime,s.validityEndDate]:[null,Xe.xE,1/0];return(0,I.BX)(n.Fragment,{children:[(0,I.tZ)(Ve,{sx:{marginTop:"8px"},action:r?{iconName:"ActionCopyOutlined",label:l("webapp_credential_edition_field_generic_action_copy"),onClick:async()=>{if(r)try{await navigator.clipboard.writeText(r),t(!0,void 0)}catch(e){t(!1,e)}}}:void 0,code:null!=r?r:"",label:l("webapp_credential_edition_field_security_code"),validityEndDate:p,validityPeriod:c,"data-testid":"otp-field"}),a?(0,I.tZ)(Re.k,{justifyContent:"flex-end",children:(0,I.tZ)(G.z,{sx:{mt:"8px"},size:"small",icon:"ActionCloseOutlined",layout:"iconTrailing",intensity:"supershy",mood:"brand",onClick:i,children:l("webapp_credential_otp_code_remove_button")})}):null]})};var ze=i(78956);const He="webapp_credential_otp_code_remove_dialog_cancel_button",Ke=({onCancel:e,onSubmit:t,isOpen:i})=>{const{translate:n}=(0,u.Z)();return(0,I.tZ)(ze.Vq,{isOpen:i,actions:{primary:{children:n("webapp_credential_otp_code_remove_dialog_confirm_button"),onClick:t},secondary:{children:n(He)}},isDestructive:!0,closeActionLabel:n(He),onClose:e,title:n("webapp_credential_otp_code_remove_dialog_title"),children:(0,I.tZ)(be.n,{children:n("webapp_credential_otp_code_remove_dialog_description")})})},Ye=({secretOrUrl:e,isEditable:t,onCopy:i,onSubmit:a,onDelete:l,onUndoDelete:s,setHasOpenedDialogs:o})=>{const{translate:d}=(0,u.Z)(),{showToast:r,closeToast:c}=(0,Se.p)(),[p,_]=(0,n.useState)(!1),h=()=>{o?.(!1),_(!1)},m=(0,Le.o)("sharingVault_web_otp_setup_dev");return e?(0,I.BX)(n.Fragment,{children:[(0,I.tZ)(Ge,{secretOrUrl:e,isEditable:t&&!!m,onCopy:i,onDelete:()=>{o?.(!0),_(!0)}}),(0,I.tZ)(Ke,{onCancel:h,onSubmit:()=>{l();const t=r({description:d("webapp_credential_otp_code_removed_success_toast"),action:{label:d("webapp_credential_otp_code_removed_success_toast_undo_button"),onClick:()=>{s?.(e),c(t)}}});h()},isOpen:p})]}):t&&m&&a?(0,I.tZ)(Re.k,{justifyContent:"flex-end",children:(0,I.tZ)(G.z,{sx:{mt:"8px"},size:"small",icon:"ArrowRightOutlined",layout:"iconTrailing",intensity:"supershy",mood:"brand",onClick:a,children:d("webapp_credential_edition_field_otp_setup_title")})}):null};var je=i(99990),$e=i(73875),Je=i(79432);const Qe="webapp_credential_edition_field_email",et="webapp_credential_edition_field_placeholder_no_email",tt="webapp_credential_edition_field_login",it="webapp_credential_edition_field_placeholder_no_login",nt="webapp_credential_edition_field_name",at="webapp_credential_edition_field_placeholder_no_title",lt="webapp_credential_edition_field_note",st="webapp_credential_edition_field_placeholder_no_note",ot="webapp_credential_edition_field_password",dt="webapp_credential_edition_field_password_action_hide",rt="webapp_credential_edition_field_placeholder_no_password",ct="webapp_credential_edition_field_password_action_show",pt="webapp_credential_edition_field_secondary_login",ut="webapp_credential_edition_field_placeholder_no_secondary_login",_t="webapp_credential_edition_field_force_categorized",ht="webapp_credential_edition_field_generator_generate_tooltip",mt="webapp_credential_edition_field_generator_strength/none",bt="webapp_credential_edition_field_generator_strength/weak",gt="webapp_credential_edition_field_generator_strength/very_guessable",wt="webapp_credential_edition_field_generator_strength/somewhat_guessable",ft="webapp_credential_edition_field_generator_strength/safely_unguessable",yt="webapp_credential_edition_field_generator_strength/very_unguessable",vt="webapp_credential_box_title_login_details",Ct="webapp_credential_box_title_organisation",xt="webapp_credential_box_title_preferences",kt="webapp_credential_edition_frozen_limited_rights_icon",It=(0,n.forwardRef)((({activeSpaces:e,areProtectedItemsUnlocked:t,dashlaneDefinedLinkedWebsites:i,editableValues:v,isNewItem:C,onClickAddNewWebsite:x,onClickSetup2FAToken:k,openProtectedItemsUnlocker:D,readonlyValues:Z,setEditableValues:E,setHasOpenedDialogs:P,signalEditedValues:L,isAddToCollectionDisabled:U},T)=>{var O,W,B,A,F;const[q,z]=(0,n.useState)({showingPassword:!1,showGeneratePassword:!1,credentialsGloballyRequireMP:!1,defaultSpaceId:null!=(O=v.spaceId)?O:""}),H=(0,s.k)(a.T,"getPasswordGenerationSettings"),[Y,j]=(0,n.useState)(!1),{translate:$}=(0,u.Z)(),J=(0,n.useRef)(null),Q=(0,c.V)(),ee=(0,S.F)(),{isMPLessUser:te}=(0,R.Z)(),{logRevealCredentialField:ie,logCopiedCredentialField:ne}=(0,Je.D)();(0,n.useImperativeHandle)(T,(()=>({isFormValid:()=>!0,getVaultItemCollections:()=>J.current?.getVaultItemCollections()})));const{data:ae,status:le}=(se=v.password,(0,s.k)(je.d,"scoreForPassword",{password:se}));var se;(0,n.useEffect)((()=>{p.C.arePasswordsProtected().then((e=>{z((t=>({...t,credentialsGloballyRequireMP:e})))}))}),[]),(0,n.useEffect)((()=>{C&&!Y&&E((e=>{return{...e,itemName:(t=v.URL,(0,V.capitalize)(new r.Y(t).getRootDomainName()))};var t}))}),[C,v.URL]);const oe=()=>{z((e=>({...e,showGeneratePassword:!e.showGeneratePassword})))},de=()=>!!v.password&&(void 0!==t?!t&&(v.requireMasterPassword||q.credentialsGloballyRequireMP):void 0),re=!C&&!ee&&!te&&de()&&!q.showingPassword,ce=(e,t="")=>{if(e instanceof Event&&t)throw new Error("handleChange was called with both a ChangeEvent and key.");if(Z.canEdit||"spaceId"===t){const i=e?.target?{[e.target.dataset.name]:e.target.value}:{[t]:e},n=Object.keys(i)[0];E({...v,[n]:i[n]})}};let pe=v.spaceId;Z.forceCategorizedSpace?.teamName&&(pe=Z.forceCategorizedSpace?.teamId);const ue=e?.find((e=>e.teamId===pe)),_e=null!=(W=ue?.teamName)?W:"webapp_credential_edition_field_space_personal",he=e=>{v.spaceId!==e&&e!==q.defaultSpaceId&&(z((t=>({...t,defaultSpaceId:e}))),J.current?.clearVaultItemCollections(),ce(e,"spaceId"))},be=t=>{if(e&&e.length>0&&e[0].info?.teamAdmins?.length>0)for(const n of e[0].info.teamAdmins)if(t.target.value.includes(n)){var i;z({...q,defaultSpaceId:null!=(i=e[0].teamId)?i:""});break}},ge=e=>{E({...v,...e})},we=(e=>{const t={[h.OTP_CODE]:m(e),[h.SECONDARY_LOGIN]:b(e)};return(e,i)=>t[e]||!!i})(v);(0,n.useEffect)((()=>{var e;he(null!=(e=q.defaultSpaceId)?e:"")}),[q]);const De=async(e,t)=>{const i=v.URL,n=v.email||v.username||v.alternativeUsername,a=Boolean(v.spaceId),s=new r.Y(i).getRootDomain();(0,_.Kz)(new l.UserCopyVaultItemFieldEvent({itemType:l.ItemType.Credential,field:e,itemId:Z.id,isProtected:!(e!==l.Field.Password||!v.requireMasterPassword&&!q.credentialsGloballyRequireMP)})),(0,_.Kz)(new l.AnonymousCopyVaultItemFieldEvent({itemType:l.ItemType.Credential,field:e,domain:{id:await(0,l.hashDomain)(s),type:l.DomainType.Web}})),e===l.Field.Password&&a&&ne({credentialLogin:n,credentialURL:i}),t||Q.showAlert($("_common_generic_error"),d.BLW.ERROR)},Ze=De.bind(void 0,l.Field.Email),Ee=De.bind(void 0,l.Field.Login),Se=De.bind(void 0,l.Field.OtpCode),Re=De.bind(void 0,l.Field.Password),Le=De.bind(void 0,l.Field.SecondaryLogin),Ue=function(e,t,i,n,a,l,s,o){const d=!e&&i.password,r=!(i.password&&t.isDiscontinuedUser||l.showGeneratePassword);if(d){const e=[];return t.canCopy&&e.push((0,I.tZ)(y.m,{buttonId:"copyPasswordButton",itemId:t.id,disabled:void 0===n(),data:i.password,checkProtected:n,onCopy:a},"copy-password")),t.canEdit&&e.push((0,I.tZ)(K,{credential:{id:t.id,canEdit:t.canEdit}},"password-change")),e}return r?[(0,I.tZ)(G.z,{"aria-label":s(ht),layout:"iconOnly",mood:"brand",intensity:"supershy",onClick:o,disabled:!t.canEdit,icon:"FeaturePasswordGeneratorOutlined",tooltip:s(ht)},"generate-password")]:[]}(C,Z,v,de,Re,q,$,oe),Te=Boolean(J.current?.getVaultItemCollections()?.some((e=>e.isShared))),Oe=Boolean(Z.forceCategorizedSpace)||Te||Z.isDiscontinuedUser,We=(0,$e.l)(),Be=(0,$e.R)(),Ae=!C&&(!Z.canReveal||de());return(0,I.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"16px"},children:[(0,I.BX)(ye.u,{title:$(vt),additionalSx:{display:"flex",flexDirection:"column",gap:"8px"},additionalInfo:We&&!Z.canReveal?{content:$(kt),icon:"SharedOutlined"}:null,children:[C?(0,I.tZ)(me,{url:v.URL,hasUrlError:!1,handleMainWebsiteChange:ce,handleChanges:ge,handleGoToWebsite:()=>X(Z.id,v.URL)}):null,C?null:(0,I.tZ)(ve.s,{"data-name":"email",label:$(Qe),placeholder:$(et),readOnly:!!v.email&&(!Z.canEdit||Z.isDiscontinuedUser),disabled:!v.email&&(!Z.canEdit||Z.isDiscontinuedUser),value:v.email,onChange:e=>{ce(e),be(e)},actions:[(0,I.tZ)(y.m,{data:v.email,onCopy:Ze},"copy-email")]}),(0,I.tZ)(Ce.n,{"data-name":"username",label:$(tt),placeholder:$(it),readOnly:!!v.username&&(!Z.canEdit||Z.isDiscontinuedUser),disabled:!v.username&&(!Z.canEdit||Z.isDiscontinuedUser),value:v.username,onChange:e=>{ce(e),be(e)},actions:!C&&Boolean(v.username)?[(0,I.tZ)(y.m,{data:v.username,onCopy:Ee},"copy-login")]:void 0}),we(h.SECONDARY_LOGIN,v.alternativeUsername)?(0,I.tZ)(Ce.n,{"data-name":"alternativeUsername",label:$(pt),placeholder:$(ut),value:v.alternativeUsername,readOnly:!!v.alternativeUsername&&(!Z.canEdit||Z.isDiscontinuedUser),disabled:!v.alternativeUsername&&(!Z.canEdit||Z.isDiscontinuedUser),onChange:ce,actions:v.alternativeUsername?[(0,I.tZ)(y.m,{data:v.alternativeUsername,onCopy:Le},"copy-secondary-login")]:void 0}):null,(0,I.tZ)(xe.Z,{id:"password","data-name":"password",label:$(ot),placeholder:$(rt),toggleVisibilityLabel:{hide:$(dt),show:$(ct)},value:Ae?"●●●●●●●●●●●●●●●●":v.password,disabled:!C&&!Z.canReveal||!v.password&&Z.isDiscontinuedUser,onCopy:Be?e=>e.preventDefault():void 0,readOnly:!C&&de()||!C&&!Z.canEdit||Z.isDiscontinuedUser&&!!v.password,onFocus:e=>{if(re){const{currentTarget:t}=e,i=()=>{t?.focus()};D({action:w.P7.Show,itemType:f.R.Password,showNeverAskOption:!0,credentialId:Z.id,successCallback:i})}},onChange:ce,onValueVisibilityChangeRequest:e=>{e&&(async(e,t,i,n)=>{const a=new r.Y(e).getRootDomain(),s=!!i||!!n;t&&((0,_.Kz)(new l.UserRevealVaultItemFieldEvent({field:l.Field.Password,isProtected:s,itemId:t,itemType:l.ItemType.Credential})),(0,_.Kz)(new l.AnonymousRevealVaultItemFieldEvent({field:l.Field.Password,itemType:l.ItemType.Credential,domain:{id:await(0,l.hashDomain)(a),type:l.DomainType.Web}})))})(v.URL,Z.id,v.requireMasterPassword,q.credentialsGloballyRequireMP);const t=v.URL,i=v.email||v.username||v.alternativeUsername,n=Boolean(v.spaceId);return re?new Promise(((e,a)=>{D({action:w.P7.Show,itemType:f.R.Password,showNeverAskOption:!0,credentialId:Z.id,successCallback:()=>(n&&ie({credentialURL:t,credentialLogin:i}),z({...q,showingPassword:!0}),e()),cancelCallback:()=>a()})})):(n&&e&&ie({credentialURL:t,credentialLogin:i}),z({...q,showingPassword:e}),Promise.resolve())},actions:Ue,passwordStrength:v.password&&void 0!==ae&&le===o.rq.Success?{score:ae,description:{NoScore:$(mt),TooGuessable:$(bt),VeryGuessable:$(gt),SomewhatGuessable:$(wt),SafelyUnGuessable:$(ft),VeryUnGuessable:$(yt)},descriptionId:ae.toString()}:void 0}),q.showGeneratePassword&&H.status===o.rq.Success?(0,I.tZ)(Pe,{generatorSettings:H.data,setGeneratorSettings:e=>{z((t=>({...t,generatorSettings:e})))},handleChangePassword:e=>{ce(e,"password")},handleClose:oe}):null,(0,I.tZ)(Ye,{secretOrUrl:v.otpURL||v.otpSecret||"",isEditable:!!Z.canEdit&&!Z.isDiscontinuedUser,onCopy:Se,onSubmit:k,onDelete:()=>ge({otpSecret:"",otpURL:""}),onUndoDelete:e=>ge({otpSecret:"",otpURL:e}),setHasOpenedDialogs:P}),C?null:(0,I.tZ)(fe,{url:v.URL,linkedWebsitesAddedByUser:Z.linkedURLs.length>0?Z.linkedURLs:v.linkedURLs,dashlaneDefinedLinkedWebsites:i,hasUrlError:!1,editViewButtonEnabled:!C&&Boolean(v.URL),canEdit:Z.canEdit,handleChange:ce,handleGoToWebsite:()=>X(Z.id,v.URL),onClickAddNewWebsite:x,isWebsiteFieldReadonly:Z.isDiscontinuedUser||!Z.canEdit}),(0,I.tZ)(ke.K,{"data-name":"note","test-id":"credential_edit_note_value",label:$(lt),placeholder:$(st),value:v.note,readOnly:!!v.note&&(!Z.canEdit||Z.isDiscontinuedUser),disabled:!v.note&&(!Z.canEdit||Z.isDiscontinuedUser),onChange:ce})]}),(0,I.BX)(ye.u,{title:$(Ct),additionalSx:{display:"flex",flexDirection:"column",gap:"8px"},children:[(0,I.tZ)(Ce.n,{"data-name":"itemName",label:$(nt),placeholder:$(at),value:v.itemName,readOnly:!!v.itemName&&(!Z.canEdit||Z.isDiscontinuedUser),disabled:!v.itemName&&(!Z.canEdit||Z.isDiscontinuedUser),onChange:e=>{Y||j(!0),ce(e)}}),(0,I.tZ)(Ie.u,{content:$(_t,{space:_e}),passThrough:!Oe,wrapTrigger:!0,children:(0,I.tZ)(g.M,{spaceId:null!=(B=v.spaceId)?B:"",disabled:Oe,onChange:he,defaultSpaceId:null!=(A=q.defaultSpaceId)?A:"",isUsingNewDesign:!0})}),(0,I.tZ)(N.p,{hasLabel:!1,isItemMPProtected:re,vaultItem:{spaceId:null!=(F=v.spaceId)?F:"",vaultItemId:Z.id,vaultItemTitle:v.itemName},ref:J,signalEditedValues:L,setHasOpenedDialogs:P,isAddCollectionDisabled:Z.isDiscontinuedUser||U})]}),(0,I.tZ)(ye.u,{title:$(xt),children:(0,I.tZ)(M,{isNewCredential:!!C,credentialPreferences:{useAutoLogin:v.useAutoLogin,requireMasterPassword:!!v.requireMasterPassword,onlyAutofillExactDomain:!!v.onlyAutofillExactDomain},update:e=>(ge({useAutoLogin:e.useAutoLogin,requireMasterPassword:e.requireMasterPassword,onlyAutofillExactDomain:e.onlyAutofillExactDomain}),Promise.resolve()),isPreferenceDisabled:Z.isDiscontinuedUser,url:v.URL})})]})}));It.displayName="CredentialForm"},45636:(e,t,i)=>{i.d(t,{v6:()=>s,xE:()=>l});var n=i(46478),a=i(24507);const l=3e4;function s(e){return(0,a.k)(n.i,"otpCodeForSecretOrUrl",{secretOrUrl:e})}},39506:(e,t,i)=>{i.d(t,{E:()=>l});var n=i(68999),a=i(36351);const l=({disabled:e=!1,handleOnClickAddLinkedWebsiteButton:t,label:i})=>(0,a.tZ)(n.z,{sx:{mt:"8px"},size:"small",layout:"iconTrailing",icon:"ArrowRightOutlined",onClick:t,disabled:e,mood:"brand",intensity:"supershy",children:i})},17534:(e,t,i)=>{i.d(t,{Bq:()=>p,SJ:()=>d,cS:()=>u,wb:()=>r});var n=i(73704),a=i(13134),l=i(5465),s=i(45272),o=i(61605);const d=(e,t)=>[...e,...t].filter(Boolean).some((i=>!(e.includes(i)&&t.includes(i)))),r=async(e,t)=>{const i=t.filter((t=>t&&!e.linkedURLs.includes(t))).map((e=>new a.Y(e).getRootDomain())),n=i.map((async t=>await l.C.getCredentialsByDomain(((e,t)=>({domain:e,sortToken:{sortCriteria:[{field:"lastUse",direction:"descend"}],uniqField:"id"},filterToken:{filterCriteria:[{field:"email",value:t,type:"equals"}]}}))(t,e.email))));return(await Promise.all(n)).map(((e,t)=>({...e,linkedWebsite:i[t]}))).filter((e=>e.matchingCount>0)).map((e=>({credentialName:e.items[0].title,linkedWebsite:e.linkedWebsite})))},c=async e=>await Promise.all(e.map((e=>(0,n.hashDomain)(new a.Y(e).getRootDomain())))),p=async(e,t)=>{const i=t.filter((t=>t&&!e.linkedURLs.includes(t))),l=e.linkedURLs.filter((e=>e&&!t.includes(e))),o=new a.Y(e.URL).getRootDomain();(0,s.Kz)(new n.AnonymousUpdateCredentialEvent({action:n.Action.Edit,associatedWebsitesAddedList:await c(i),associatedWebsitesRemovedList:await c(l),fieldList:[n.Field.AssociatedWebsitesList],domain:{type:n.DomainType.Web,id:await(0,n.hashDomain)(o)},space:e.spaceId?n.Space.Professional:n.Space.Personal})),(0,s.Kz)(new n.UserUpdateVaultItemEvent({action:n.Action.Edit,itemId:e.id,itemType:n.ItemType.Credential,fieldsEdited:[n.Field.AssociatedWebsitesList],space:e.spaceId?n.Space.Professional:n.Space.Personal}))},u=async(e,t)=>{const i=new a.Y(e);(0,s.Kz)(new n.UserOpenExternalVaultItemLinkEvent({domainType:n.DomainType.Web,itemId:t,itemType:n.ItemTypeWithLink.Credential})),(0,s.Kz)(new n.AnonymousOpenExternalVaultItemLinkEvent({itemType:n.ItemTypeWithLink.Credential,domain:{id:await(0,n.hashDomain)(i.getRootDomain()),type:n.DomainType.Web}})),(0,o.Yo)(i.getUrlWithFallbackHttpsProtocol())}},84985:(e,t,i)=>{i.d(t,{a:()=>w});var n,a=i(96832),l=i(39378),s=i.n(l),o=i(30202),d=i(68999),r=i(47124),c=i(88203),p=i(39506),u=i(17534),_=i(36351);const h="webapp_credential_linked_websites_action_delete",m="webapp_credential_linked_websites_action_goto",b=e=>{const t=e.match(/^(?:\w+:\/\/)?(.*)$/);return t&&t.length>=2?t[1]:e},g=({linkedWebsitesList:e,credentialId:t,isListEditable:i=!1,isEditing:l=!1,showUrlProtocol:g=!1,updateLinkedWebsitesList:w})=>{const{translate:f}=(0,c.Z)(),y=a.useRef(null),[v,C]=a.useState(!1),[x,k]=a.useState(e.length),[I,D]=a.useState(e.map(((e,t)=>({linkedWebsite:e,id:t})))),Z=e=>{C(!0);const t=x+1;D([...I,{linkedWebsite:"",id:t}]),k(t),e?.preventDefault(),e?.stopPropagation()},E=e=>{const{name:t,value:i}=e.target,n=Number(t),a=I.findIndex((e=>e.id===n));if(-1!==a){const e=s().cloneDeep(I);e[a].linkedWebsite=i,D(e)}},P=e=>{"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),Z())};return a.useEffect((()=>{l&&Z()}),[]),a.useEffect((()=>{x!==e.length&&y.current?.focus()}),[x]),a.useEffect((()=>{w?.(I.map((({linkedWebsite:e})=>e))),(e=>{e.every((e=>e.linkedWebsite))?C(!1):C(!0)})(I)}),[w,JSON.stringify(I)]),(0,_.tZ)("div",{children:i?(0,_.BX)("div",{children:[I.map((({linkedWebsite:e,id:i},a)=>(0,_.tZ)(o.q,{className:"row",name:i.toString(),label:"example.com",labelPersists:!1,placeholder:f("webapp_credential_linked_websites_new_website_placeholder"),ref:y,onChange:E,onKeyDown:P,value:e,showOpenWebsite:{label:f(m),onClick:()=>(0,u.cS)(e,t)},actions:[(0,_.tZ)(d.z,{"data-testid":"delete-button",layout:"iconOnly",mood:"brand",intensity:"supershy",onClick:()=>(e=>{D(I.filter((t=>t.id!==e)))})(i),"aria-label":f(h),icon:n||(n=(0,_.tZ)(r.JO,{name:"ActionDeleteOutlined"})),tooltip:f(h)},"delete")],sx:{marginTop:0===a?"0px":"8px"}},i))),(0,_.tZ)("div",{sx:{display:"flex",justifyContent:"flex-end"},children:(0,_.tZ)(p.E,{disabled:v,handleOnClickAddLinkedWebsiteButton:Z,label:f("webapp_credential_edition_linked_websites_add_website")})})]}):(0,_.tZ)("div",{children:I.map((({linkedWebsite:e,id:i},n)=>(0,_.tZ)(o.q,{className:"readonly-row",label:"example.com",labelPersists:!1,readOnly:!0,value:g?e:b(e),showOpenWebsite:{label:f(m),onClick:()=>(0,u.cS)(e,t)},sx:{marginTop:0===n?"0px":"8px"}},i)))})})},w=a.memo(g)},30202:(e,t,i)=>{i.d(t,{q:()=>s});var n=i(36351),a=i(96832),l=i(93853);const s=(0,a.forwardRef)((({showOpenWebsite:e,actions:t=[],prefix:i,onChange:s,...o},d)=>{const{value:r}=o,[c,p]=(0,a.useState)(r&&""!==r),u=[...t];return c&&e&&u.push({label:e.label,iconName:"ActionOpenExternalLinkOutlined",onClick:t=>{t&&e.onClick(t)},role:"link"}),(0,n.tZ)(l.n,{...o,ref:d,prefix:i,onChange:e=>{p(""!==e.target.value),s?.(e)},actions:u})}));s.displayName="WebsiteField"}}]);