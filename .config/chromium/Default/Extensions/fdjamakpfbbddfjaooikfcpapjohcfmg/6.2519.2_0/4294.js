"use strict";(globalThis.webpackChunk_dashlane_leeloo=globalThis.webpackChunk_dashlane_leeloo||[]).push([[4294],{79808:(e,i,t)=>{t.d(i,{r:()=>c});var s=t(24507),n=t(84925);const c=e=>(0,s.k)(n.X,"sharedAccessForItem",{itemId:e})},24294:(e,i,t)=>{t.d(i,{u:()=>ie});var s=t(40577),n=t(96832),c=t(14900),M=t(8180),r=t(51031),a=t(83459),l=t(84925),o=t(13252),u=t(78346),N=t(88203),I=t(43194),g=t(61832),D=t(82429),d=t(32814),j=t(4967),T=t(73670);const p={groupIconWrapper:"groupIconWrapper--OSeY3Q_kAF"};var A=t(36351);const y=()=>(0,A.tZ)("div",{className:p.groupIconWrapper,children:(0,A.tZ)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik05Ljk0NDc1IDE1LjQ4OTJDMTAuMDMwNCAxNS4yMjgzIDEwLjE1NzQgMTQuOTMyNiAxMC4zNDQ3IDE0LjYzOTJDMTAuODQ4NiAxMy44NTAzIDExLjg1MjYgMTIuOTcxMiAxMy45OTc3IDEyLjk3MTJDMTYuMTQyOSAxMi45NzEyIDE3LjE0NjggMTMuODUwMiAxNy42NTA1IDE0LjYzOTJDMTcuODM3OCAxNC45MzI1IDE3Ljk2NDggMTUuMjI4MyAxOC4wNTA0IDE1LjQ4OTJIOS45NDQ3NVpNMTkuNzE1NiAxNi4yMTA1TDE5LjcxNTYgMTYuMjA5NUwxOS43MTU1IDE2LjIwNzJMMTkuNzE1MiAxNi4yMDE0TDE5LjcxNDIgMTYuMTg1M0MxOS43MTM0IDE2LjE3MjcgMTkuNzEyMyAxNi4xNTYzIDE5LjcxMDYgMTYuMTM2MkMxOS43MDczIDE2LjA5NjEgMTkuNzAxOSAxNi4wNDE1IDE5LjY5MzMgMTUuOTc0NEMxOS42NzYxIDE1Ljg0MDUgMTkuNjQ1OCAxNS42NTU0IDE5LjU5MjcgMTUuNDM2MUMxOS40ODcyIDE0Ljk5OTggMTkuMjg4IDE0LjQxMyAxOC45MTAxIDEzLjgyMTNDMTguMTI3NiAxMi41OTU4IDE2LjY0NjcgMTEuNDYwNCAxMy45OTc3IDExLjQ2MDRDMTEuMzQ4NyAxMS40NjA0IDkuODY3NzUgMTIuNTk1OCA5LjA4NTE2IDEzLjgyMTJDOC43MDcyOSAxNC40MTI5IDguNTA3OTkgMTQuOTk5OCA4LjQwMjQzIDE1LjQzNkM4LjM0OTM2IDE1LjY1NTQgOC4zMTkwNyAxNS44NDA0IDguMzAxODQgMTUuOTc0M0M4LjI5MzIyIDE2LjA0MTQgOC4yODc4MiAxNi4wOTYgOC4yODQ0OCAxNi4xMzYxQzguMjgyODEgMTYuMTU2MiA4LjI4MTY1IDE2LjE3MjcgOC4yODA4NSAxNi4xODUzTDguMjc5OTIgMTYuMjAxM0w4LjI3OTYzIDE2LjIwNzFMOC4yNzk1MiAxNi4yMDk0TDguMjc5NDcgMTYuMjEwNUw4LjI0NTAyIDE3SDE5Ljc1TDE5LjcxNTYgMTYuMjEwNVoiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0xMS43NTA1IDYuNzc2OThDMTEuNzUwNSA1LjUyNTQgMTIuNzU2NiA0LjUxMDc5IDEzLjk5NzcgNC41MTA3OUMxNS4yMzg4IDQuNTEwNzkgMTYuMjQ1IDUuNTI1NCAxNi4yNDUgNi43NzY5OEMxNi4yNDUgNy4wMDQ5MyAxNi4yMTE2IDcuMjI1MDIgMTYuMTQ5NSA3LjQzMjU1TDE3LjM0ODkgOC40NjU1NkMxNy42MDEyIDcuOTU3NDIgMTcuNzQzMSA3LjM4MzkyIDE3Ljc0MzEgNi43NzY5OEMxNy43NDMxIDQuNjkxMDEgMTYuMDY2MyAzIDEzLjk5NzcgM0MxMS45MjkyIDMgMTAuMjUyMyA0LjY5MTAxIDEwLjI1MjMgNi43NzY5OEMxMC4yNTIzIDguODYyOTQgMTEuOTI5MiAxMC41NTQgMTMuOTk3NyAxMC41NTRDMTUuMDMxNCAxMC41NTQgMTUuOTY3MyAxMC4xMzE3IDE2LjY0NTEgOS40NDg4TDE1LjQ5OTkgOC40NjI1QzE1LjEwMTggOC44MjM1IDE0LjU3NTIgOS4wNDMxNiAxMy45OTc3IDkuMDQzMTZDMTIuNzU2NiA5LjA0MzE2IDExLjc1MDUgOC4wMjg1NiAxMS43NTA1IDYuNzc2OThaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNNS4wOTAxNCAxMy44MjEyQzUuODI2MjUgMTIuNjY4NiA3LjE4MDI1IDExLjU5NTYgOS41NDI5NyAxMS40NzIyTDcuNTk0OTkgMTMuNDkwOUM2Ljk5MzM0IDEzLjgxMTUgNi42MDY1NSAxNC4yMzcxIDYuMzQ5NzIgMTQuNjM5MkM2LjE2MjM4IDE0LjkzMjYgNi4wMzUzOCAxNS4yMjgzIDUuOTQ5NzMgMTUuNDg5Mkg2Ljc4NjQyQzYuNzI2MDIgMTUuNzQ3OCA2LjYzNTgyIDE2LjgzNDIgNi42MTQ0OSAxN0g0LjI1TDQuNDA3NDEgMTUuNDM2QzQuNTEyOTcgMTQuOTk5OCA0LjcxMjI3IDE0LjQxMjkgNS4wOTAxNCAxMy44MjEyWiIgZmlsbD0id2hpdGUiLz4KPHBhdGggZD0iTTkuNjMwMzkgOS4wMTIyMUM4LjU2NjQ0IDguODMzMzQgNy43NTU0MyA3LjkwMDY3IDcuNzU1NDMgNi43NzY5OEM3Ljc1NTQzIDUuNjUzMyA4LjU2NjQzIDQuNzIwNjMgOS42MzAzOCA0LjU0MTc1QzkuOTExOTMgMy45ODM4MSAxMC4yOTU2IDMuNDg3MDYgMTAuNzU2NSAzLjA3NjU0QzEwLjUxMyAzLjAyNjM1IDEwLjI2MDkgMyAxMC4wMDI3IDNDNy45MzQxNCAzIDYuMjU3MjUgNC42OTEwMSA2LjI1NzI1IDYuNzc2OThDNi4yNTcyNSA4Ljg2Mjk1IDcuOTM0MTQgMTAuNTU0IDEwLjAwMjcgMTAuNTU0QzEwLjI2MDkgMTAuNTU0IDEwLjUxMyAxMC41Mjc2IDEwLjc1NjYgMTAuNDc3NEMxMC4yOTU2IDEwLjA2NjkgOS45MTE5NSA5LjU3MDE1IDkuNjMwMzkgOS4wMTIyMVoiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0xLjA5MDE0IDEzLjgyMTJDMS44MjYyNSAxMi42Njg2IDMuMTgwMjUgMTEuNTk1NiA1LjU0Mjk3IDExLjQ3MjJMMy41OTQ5OSAxMy40OTA5QzIuOTkzMzQgMTMuODExNSAyLjYwNjU1IDE0LjIzNyAyLjM0OTcyIDE0LjYzOTJDMi4xNjIzOCAxNC45MzI2IDIuMDM1MzggMTUuMjI4MyAxLjk0OTczIDE1LjQ4OTJIMi43ODY0MkMyLjcyNjAxIDE1Ljc0NzggMi42MzU4MiAxNi44MzQyIDIuNjE0NDkgMTdIMC4yNUwwLjQwNzQxIDE1LjQzNkMwLjUxMjk3NSAxNC45OTk4IDAuNzEyMjY3IDE0LjQxMjkgMS4wOTAxNCAxMy44MjEyWiIgZmlsbD0id2hpdGUiLz4KPHBhdGggZD0iTTUuNjMwMzkgOS4wMTIyMUM0LjU2NjQ0IDguODMzMzMgMy43NTU0MyA3LjkwMDY3IDMuNzU1NDMgNi43NzY5OEMzLjc1NTQzIDUuNjUzMyA0LjU2NjQzIDQuNzIwNjMgNS42MzAzOCA0LjU0MTc1QzUuOTExOTMgMy45ODM4MSA2LjI5NTU5IDMuNDg3MDYgNi43NTY1NCAzLjA3NjUzQzYuNTEzMDMgMy4wMjYzNSA2LjI2MDkxIDMgNi4wMDI2OCAzQzMuOTM0MTQgMyAyLjI1NzI1IDQuNjkxMDEgMi4yNTcyNSA2Ljc3Njk4QzIuMjU3MjUgOC44NjI5NCAzLjkzNDE0IDEwLjU1NCA2LjAwMjY4IDEwLjU1NEM2LjI2MDkyIDEwLjU1NCA2LjUxMzA0IDEwLjUyNzYgNi43NTY1NyAxMC40Nzc0QzYuMjk1NjEgMTAuMDY2OSA1LjkxMTk1IDkuNTcwMTUgNS42MzAzOSA5LjAxMjIxWiIgZmlsbD0id2hpdGUiLz4KPC9zdmc+Cg==",className:p.groupIcon})});var z,x,m=t(58037),L=t(68999);const O=({cancelStatus:e,vaultItemId:i,setCancelStatus:t,recipientId:s})=>{const{translate:a}=(0,N.Z)(),u=e===g.V.Loading,I={type:o.IP.User,alias:s},{revokeSharedItem:D}=(0,M.u)(l.X);(0,n.useEffect)((()=>{let i;return e===g.V.Failure&&(i=window.setTimeout((()=>t(null)),2e3)),()=>{clearTimeout(i)}}),[e,t]);const d=e?()=>t(null):()=>t(g.V.Confirm);return e===g.V.Failure?(0,A.BX)("div",{sx:{color:"ds.text.danger.standard",display:"flex",alignItems:"center"},children:[z||(z=(0,A.tZ)(c.aNP,{color:"ds.text.danger.standard"})),"Â ",a("webapp_shared_access_cancel_failure")]}):(0,A.BX)("div",{children:[(0,A.tZ)(L.z,{intensity:e?"quiet":"supershy",disabled:u,onClick:d,size:"small",children:a(e?"webapp_shared_access_cancel":"webapp_shared_access_cancel_invitation")}),e?(0,A.tZ)(L.z,{mood:"danger",intensity:"catchy",sx:{ml:"16px"},disabled:u,size:"small",onClick:()=>(async()=>{t(g.V.Loading);const e=await(async()=>{try{return(await D({vaultItemId:i,recipient:I})).tag===r.rq.Success}catch(e){return!1}})();t(e?g.V.Success:g.V.Failure)})(),children:u?x||(x=(0,A.tZ)(c.HoD,{})):a("webapp_shared_access_confirm")}):null]})};var E;const U=({vaultItemId:e,onUserSelected:i,openEditPermissionsDialog:t,member:s,canManageAccess:c})=>{const[M,r]=(0,n.useState)(null),a=(0,m.j)()?.login,{translate:l}=(0,N.Z)();if(M===g.V.Success)return null;const{sharingPermissionLevel:u,status:I,recipientType:p}=s,z="full"===u?o.y3.Admin:o.y3.Limited,x=a===s.recipientId,L=c&&a!==s.recipientId,U="pending"===I?(0,A.tZ)(O,{recipientId:s.recipientId,vaultItemId:e,cancelStatus:M,setCancelStatus:r}):(0,A.tZ)(T.M,{disabled:!c,icon:"ActionEditOutlined",layout:"iconLeading",intensity:"supershy",onClick:()=>{i&&i(s.recipientId),t(s,z,p)},content:l("webapp_sharing_collection_access_description_tooltip"),tooltipSx:{textWrap:"wrap",maxWidth:"240px"},size:"small",children:l("webapp_shared_access_edit_permissions")});return(0,A.tZ)("li",{sx:{alignItems:"center",display:"flex",minHeight:"48px",position:"relative"},children:(0,A.tZ)(j.r,{infoAction:L?U:null,logo:s.recipientType===o.IP.Group?E||(E=(0,A.tZ)(y,{})):(0,A.tZ)(d.q,{email:s.recipientName,size:36}),title:s.recipientName,permissionBadge:(0,A.tZ)(D.C,{mood:z===o.y3.Admin?"brand":"danger",label:l(z===o.y3.Admin?"webapp_sharing_permissions_full_rights":"webapp_sharing_permissions_limited_rights")}),disabled:M===g.V.Loading,titleLogo:x?(0,A.tZ)(D.C,{label:l("webapp_shared_access_you_badge").toUpperCase(),layout:"labelOnly",sx:{marginLeft:"4px"}}):null})},s.recipientId)};var w=t(79808),k=t(68037),h=t(14341);const S=({id:e,canManageAccess:i})=>{const{translate:t}=(0,N.Z)(),[s,D]=(0,n.useState)(!1),[d,j]=(0,n.useState)(null),[T,p]=(0,n.useState)(void 0),{data:y,status:z}=(0,w.r)(e),{updatePermissionForCollectionItem:x,removeItemFromCollections:m}=(0,M.u)(a.a),{revokeSharedItem:L,updateSharedItemPermission:O}=(0,M.u)(l.X);if(z!==r.rq.Success)return(0,A.tZ)(c.HoD,{color:"ds.container.expressive.brand.catchy.idle",size:50,sx:{alignSelf:"center",m:"20px"}});if(!y)return null;const{users:E,groups:S,collections:C}=y,_=e=>{d&&j({...d,step:e})},Q=async()=>{if(!d)return;const{recipient:i,permission:t,recipientType:s}=d;D(!0);const n="revoke"===t?await(async(i,t)=>{try{if(t===o.IP.Collection){const t=await m({collectionIds:[i.recipientId],itemId:e});return!!(0,u.d6)(t)}return(await L({vaultItemId:e,recipient:(0,h.d)(i)})).tag===r.rq.Success}catch(e){return!1}})(i,s):await(async(i,t,s)=>{try{if(s===o.IP.Collection){const s=await x({itemId:e,collection:{collectionId:i.recipientId,permission:t}});return!!(0,u.d6)(s)}return(await O({vaultItemId:e,recipient:(0,h.d)(i),permission:t})).tag===r.rq.Success}catch(e){return!1}})(i,t,s);if(n){const e="revoke"===t?g.PermissionDialogStep.RevokeSuccess:g.PermissionDialogStep.Success;_(e)}else _(g.PermissionDialogStep.Failure);D(!1)},Z=(e,i,t)=>{const s={recipient:e,recipientType:t,permission:i,originPermission:i,step:g.PermissionDialogStep.Permission,name:e.recipientName};j(s)},Y=S?.length>0,b=C?.length>0,v=E?.length>0,P=!(T&&E.find((e=>e.recipientId!==T&&"full"===e.sharingPermissionLevel)))&&d?.recipient.recipientType===o.IP.User,f="collection"===d?.recipientType;return(0,A.BX)("div",{sx:{flex:"1",overflowY:"auto"},children:[(0,A.BX)("ul",{sx:{flex:"1"},children:[b?(0,A.tZ)(k.u,{title:t("webapp_shared_access_collections"),additionalSx:{marginBottom:"16px"},children:C.map((t=>(0,A.tZ)(U,{canManageAccess:i,member:t,vaultItemId:e,openEditPermissionsDialog:Z},t.recipientId)))}):null,Y?(0,A.tZ)(k.u,{title:t("webapp_shared_access_groups_card_title"),additionalSx:{marginBottom:"16px"},children:S.map((t=>(0,A.tZ)(U,{canManageAccess:i,member:t,vaultItemId:e,openEditPermissionsDialog:Z},t.recipientId)))}):null,v?(0,A.tZ)(k.u,{title:t("webapp_shared_access_individuals_card_title"),children:E.map((t=>(0,A.tZ)(U,{canManageAccess:i,member:t,onUserSelected:e=>p(e),vaultItemId:e,openEditPermissionsDialog:Z},t.recipientId)))}):null]}),d&&(0,A.tZ)(I.E,{isOpen:!0,isCollectionItemPermission:f,shouldRevokeBeDisabled:P||void 0,loading:s,onCancelRevoke:()=>{d&&j({...d,step:g.PermissionDialogStep.Permission})},onConfirmRevoke:Q,onDismiss:()=>j(null),onSelectPermission:e=>{d&&j({...d,permission:e})},onValidatePermission:()=>{"revoke"===d?.permission?j({...d,step:g.PermissionDialogStep.ConfirmRevoke}):Q()},permission:d.permission,recipient:d.recipient,step:d.step})]})};var C=t(24507),_=t(14646),Q=t(75881),Z=t(52826);const Y=({currentUserId:e,canManageAccess:i,collection:t})=>{const s={};return i&&e&&e!==t.recipientId&&(t.status===o.qb.Pending?s.onCancel=()=>{}:(s.onRevokeAccess=()=>{},s.onUpdatePermissions=()=>{})),0===Object.keys(s).length?null:(0,A.tZ)(Z.M,{...s})};var b,v=t(35068),P=t(31423),f=t(97958),G=t(50185);const R=({children:e,title:i})=>{const{translate:t}=(0,N.Z)();return(0,A.tZ)(k.u,{title:i,additionalSx:{marginBottom:"16px"},children:(0,A.BX)(v.i,{"aria-label":t("webapp_sharing_center_shared_items_title"),children:[(0,A.BX)(P.s,{children:[(0,A.tZ)(f.b,{isRowHeader:!0,width:"3fr",children:t("webapp_sharing_center_shared_items_item_name")}),(0,A.tZ)(f.b,{width:"1.5fr",children:t("webapp_sharing_center_shared_items_permission")}),b||(b=(0,A.tZ)(f.b,{}))]}),(0,A.tZ)(G.i,{children:e})]})})};var B,J=t(88605),X=t(41657);const V=({collections:e,canManageAccess:i,currentUserId:t,type:s})=>{const{translate:n}=(0,N.Z)();return(0,A.tZ)(R,{title:n("webapp_shared_access_collections"),children:e.map((e=>(0,A.tZ)(X.A,{permission:(0,A.tZ)(J.J,{type:s,permission:e.sharingPermissionLevel}),title:(0,A.tZ)(_.s,{thumbnail:B||(B=(0,A.tZ)(Q.R,{type:"user"})),title:e.recipientName}),actions:(0,A.tZ)(Y,{currentUserId:t,canManageAccess:i,collection:e})},e.recipientId)))})},W=({currentUserId:e,canManageAccess:i,group:t})=>{const s={};return i&&e&&e!==t.recipientId&&(t.status===o.qb.Pending?s.onCancel=()=>{}:(s.onRevokeAccess=()=>{},s.onUpdatePermissions=()=>{})),0===Object.keys(s).length?null:(0,A.tZ)(Z.M,{...s})};var q;const F=({groups:e,canManageAccess:i,currentUserId:t,type:s})=>{const{translate:n}=(0,N.Z)();return(0,A.tZ)(R,{title:n("webapp_shared_access_groups_card_title"),children:e.map((e=>{const n={};return i&&t&&t!==e.recipientId&&(e.status===o.qb.Pending?n.onCancel=()=>{}:(n.onRevokeAccess=()=>{},n.onUpdatePermissions=()=>{})),(0,A.tZ)(X.A,{permission:(0,A.tZ)(J.J,{type:s,permission:e.sharingPermissionLevel}),title:(0,A.tZ)(_.s,{thumbnail:q||(q=(0,A.tZ)(Q.R,{type:"user"})),title:e.recipientName}),actions:(0,A.tZ)(W,{currentUserId:t,canManageAccess:i,group:e})},e.recipientId)}))})};var H=t(14969);const K=({currentUserId:e,canManageAccess:i,user:t})=>{const s={};return i&&e&&e!==t.recipientId&&(t.status===o.qb.Pending?s.onCancel=()=>{}:(s.onRevokeAccess=()=>{},s.onUpdatePermissions=()=>{})),0===Object.keys(s).length?null:(0,A.tZ)(Z.M,{...s})},$=({users:e,canManageAccess:i,currentUserId:t,type:s})=>{const{translate:n}=(0,N.Z)();return(0,A.tZ)(R,{title:n("webapp_shared_access_individuals_card_title"),children:e.map((e=>{const n={};return i&&t&&t!==e.recipientId&&(e.status===o.qb.Pending?n.onCancel=()=>{}:(n.onRevokeAccess=()=>{},n.onUpdatePermissions=()=>{})),(0,A.tZ)(X.A,{permission:(0,A.tZ)(J.J,{type:s,permission:e.sharingPermissionLevel}),title:(0,A.tZ)(_.s,{thumbnail:(0,A.tZ)(H.q,{userAvatarURL:e.recipientName}),title:e.recipientName}),actions:(0,A.tZ)(K,{currentUserId:t,canManageAccess:i,user:e})},e.recipientId)}))})},ee=({id:e,type:i,canManageAccess:t})=>{const s=(0,m.j)()?.login,{status:n,data:M}=(0,C.k)(l.X,"sharedAccessForItem",{itemId:e});if(n!==r.rq.Success)return(0,A.tZ)(c.HoD,{color:"ds.container.expressive.brand.catchy.idle",size:50,sx:{alignSelf:"center",m:"20px"}});if(void 0===M)return null;const{collections:a,groups:o,users:u}=M;return(0,A.BX)("div",{sx:{flex:"1",overflowY:"auto"},children:[a.length>0?(0,A.tZ)(V,{collections:a,canManageAccess:t,currentUserId:s,type:i}):null,o.length>0?(0,A.tZ)(F,{groups:o,canManageAccess:t,currentUserId:s,type:i}):null,u.length>0?(0,A.tZ)($,{users:u,canManageAccess:t,currentUserId:s,type:i}):null]})},ie=e=>{const i=(0,s.o)("sharing_Web_GranularPermissions_dev");return null===i?null:!0===i?(0,A.tZ)(ee,{...e}):(0,A.tZ)(S,{...e})}}}]);