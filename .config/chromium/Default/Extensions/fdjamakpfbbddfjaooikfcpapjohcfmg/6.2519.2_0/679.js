"use strict";(globalThis.webpackChunk_dashlane_leeloo=globalThis.webpackChunk_dashlane_leeloo||[]).push([[679],{31590:(e,a,t)=>{t.d(a,{Wn:()=>b,s_:()=>p});var i=t(7973),n=t(711),l=t(75968),r=t(63847),d=t(59115);var o=t(88203),c=t(36351);const _=e=>(0,i.Z)((0,n.Z)(new Date,e),"MM"),s=new Array(12).fill(null).map(((e,a)=>_(a))).map((e=>(0,c.tZ)(l.$,{value:e,children:e},e))),p=e=>2===e.length?`20${e}`:e,u=(new Date).getFullYear(),m=/^\d{4}$/,b=({month:e,year:a,disabled:t,onYearChange:i,onMonthChange:n})=>{const{translate:p}=(0,o.Z)(),b=(e=>m.test(e)?Number(e):u)(a),y=(([e,a],t="ASC",i)=>{const n=(null!=i?i:(new Date).getFullYear())+e,l=Math.abs(a-e)+1,r=new Array(l).fill(null).map(((e,a)=>({label:(n+a).toString(),value:n+a})));return"ASC"===t?r:r.sort((({value:e},{value:a})=>a-e))})([0,30],"ASC",b).map((e=>(0,c.tZ)(l.$,{value:JSON.stringify(e.value),children:e.label},e.value)));return(0,c.BX)(r.k,{gap:"8px",children:[(0,c.tZ)(d.m,{"data-name":"card-expiration-month",label:p("webapp_field_expiry_date_month"),value:_(Number(e)-1),onChange:e=>{n(e)},readOnly:t,sx:{flex:1},children:s}),(0,c.tZ)(d.m,{"data-name":"card-expiration-year",label:p("webapp_field_expiry_date_year"),value:a,onChange:e=>{i(e)},readOnly:t,sx:{flex:1},children:y})]})}},10679:(e,a,t)=>{t.d(a,{gd:()=>Z,u:()=>R});var i=t(96832),n=t(53214),l=t(73704),r=t(93853),d=t(21062),o=t(51409),c=t(68999),_=t(59115),s=t(75968),p=t(88203),u=t(45272),m=t(42670),b=t(82207),y=t(30894),h=t(68819),C=t(67406),g=t(68037),f=t(31590),w=t(79432),v=t(36351);const x="webapp_payment_edition_field_card_action_show_note",N="webapp_payment_edition_field_card_action_hide_note",V="webapp_payment_edition_field_cardColor_",k=e=>a=>{a&&(0,u.Kz)(new l.UserCopyVaultItemFieldEvent({itemType:l.ItemType.CreditCard,field:e,itemId:a,isProtected:!0}))},O={[n.X.Black]:`${V}BLACK`,[n.X.Blue1]:`${V}BLUE_1`,[n.X.Blue2]:`${V}BLUE_2`,[n.X.Gold]:`${V}GOLD`,[n.X.Green1]:`${V}GREEN_1`,[n.X.Green2]:`${V}GREEN_2`,[n.X.Orange]:`${V}ORANGE`,[n.X.Red]:`${V}RED`,[n.X.Silver]:`${V}SILVER`,[n.X.White]:`${V}WHITE`},Z=({itemId:e,errors:a,paymentCardContent:t,onValueChanged:V,showCopyAlert:Z,variant:R})=>{const{cardNumber:S,color:I,expireMonth:$,expireYear:X,itemName:B,note:M,ownerName:A,securityCode:D="",spaceId:F}=t,{translate:E}=(0,p.Z)(),{shouldShowFrozenStateDialog:L}=(0,m.Ub)(),{logRevealCreditCardField:P,logCopiedCreditCardField:T}=(0,w.D)(),U=Boolean(S.length),G=Boolean(D.length),Y=Boolean(M.length),z=Boolean(F),q=(0,i.useCallback)((e=>a=>{const t="string"==typeof a?a:a.target.value,i="cardNumber"===e?t.replaceAll(" ",""):t;V({[e]:i})}),[V]),{areProtectedItemsUnlocked:H,openProtectedItemsUnlocker:K}=(0,y.tY)(),[W,j]=(0,i.useState)(!U),J=(0,i.useCallback)((a=>{e&&(0,u.Kz)(new l.UserRevealVaultItemFieldEvent({field:a,isProtected:!0,itemId:e,itemType:l.ItemType.CreditCard}))}),[e]),Q=(0,i.useCallback)(((e,a)=>new Promise(((t,i)=>{if(e||H)return a(),t();K({action:h.P.Show,itemType:h.R.CreditCard,successCallback:()=>(a(),t()),cancelCallback:i})}))),[H,K]),ee=(0,i.useCallback)((()=>{W||(J(l.Field.CardNumber),z&&P({field:"number",name:B})),j((e=>!e))}),[W,J,z,P,B]),ae=!H,te=(a,t)=>{a(e),Z&&Z(E(t))},[ie,ne]=(0,i.useState)(""===D),[le,re]=(0,i.useState)(""===M),de=(0,i.useCallback)((()=>{ie||(J(l.Field.SecurityCode),z&&P({field:"cvv",name:B})),ne((e=>!e))}),[ie,J,z,P,B]),oe=()=>re((e=>!e)),ce=Object.values(n.X).map((e=>({label:E(O[e]),value:e}))),_e=U?W?S:"●●●● ●●●● ●●●● ●●●●":"";return(0,v.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"16px"},children:[(0,v.BX)(g.u,{title:E("webapp_payment_edition_content_card_details_label"),additionalSx:{display:"flex",flexDirection:"column",gap:"8px"},children:[(0,v.tZ)(r.n,{"data-name":"ownerName",value:A,label:E("webapp_payment_edition_field_ownerName"),placeholder:E("webapp_payment_edition_field_placeholder_no_ownerName"),onChange:q("ownerName"),disabled:!!L}),(0,v.tZ)(d.N,{"data-name":"cardNumber",required:!0,formatter:W?"card":void 0,label:E("webapp_payment_edition_field_cardNumber"),placeholder:E("webapp_payment_edition_field_placeholder_no_cardNumber"),isValueInitiallyVisible:W,toggleVisibilityLabel:{hide:E("webapp_payment_edition_field_card_action_hide_card_number"),show:E("webapp_payment_edition_field_card_action_show_card_number")},onValueVisibilityChangeRequest:()=>Q(W,ee),onCopy:e=>{e.preventDefault(),navigator.clipboard.writeText(_e),z&&T({field:"number",name:B})},readOnly:!W&&U||!!L,value:_e,actions:"edit"===R?[(0,v.tZ)(b.m,{data:S,checkProtected:()=>ae,copyLabel:E("webapp_payment_edition_field_card_action_copy_card_number"),onCopy:()=>{te(k(l.Field.CardNumber),"webapp_payment_edition_field_cardNumber_copied"),z&&T({field:"number",name:B})}},"copy-card-number")]:void 0,onChange:q("cardNumber"),error:a?.has("cardNumber")},`cardNumber${W}`),(0,v.tZ)(d.N,{readOnly:!ie&&G||!!L,value:ie?D:"●●●",label:E("webapp_payment_edition_field_securityCode"),placeholder:E("webapp_payment_edition_field_placeholder_no_securityCode"),onValueVisibilityChangeRequest:()=>Q(ie,de),isValueInitiallyVisible:ie,toggleVisibilityLabel:{hide:E("webapp_payment_edition_field_card_action_hide_security_code"),show:E("webapp_payment_edition_field_card_action_show_security_code")},actions:"edit"===R?[(0,v.tZ)(b.m,{checkProtected:()=>ae,data:D,copyLabel:E("webapp_payment_edition_field_card_action_copy_security_code"),onCopy:()=>{te(k(l.Field.CardNumber),"webapp_payment_edition_field_securityCode_copied"),z&&T({field:"cvv",name:B})}},"copy-security-code")]:void 0,onChange:q("securityCode"),error:a?.has("securityCode")},`securityCode${ie}`),(0,v.tZ)(f.Wn,{month:$,year:X,onYearChange:q("expireYear"),onMonthChange:q("expireMonth")}),(0,v.tZ)(o.K,{sx:{"textarea, .readOnlyMask":{variant:"text.ds.body.standard.monospace"}},label:E("webapp_payment_edition_field_notes"),placeholder:E("webapp_payment_edition_field_placeholder_no_notes"),"data-name":"note",readOnly:!le&&Y||!!L,value:le||!Y?M:"••••",onChange:q("note"),actions:[(0,v.tZ)(c.z,{layout:"iconOnly",icon:le?"ActionHideOutlined":"ActionRevealOutlined",mood:"brand",intensity:"supershy",sx:{marginRight:"16px"},onClick:()=>{Q(le,oe).catch((()=>{re(!1)}))},"aria-label":E(le?N:x),tooltip:E(le?N:x)},"card-note-visibility"),..."edit"===R?[(0,v.tZ)(b.m,{data:M,checkProtected:()=>ae,copyLabel:E("webapp_payment_edition_field_card_action_copy_note"),onCopy:()=>te(k(l.Field.Note),"webapp_payment_edition_field_notes_copied"),itemType:h.R.CreditCard,tooltipLocation:"right"},"copy-note")]:[]],"data-testid":"credential_edit_note_value"})]}),(0,v.BX)(g.u,{title:E("webapp_payment_edition_content_card_organization_label"),additionalSx:{display:"flex",flexDirection:"column",gap:"8px"},children:[(0,v.tZ)(r.n,{value:B,label:E("webapp_payment_edition_field_cardname"),placeholder:E("webapp_payment_edition_field_placeholder_no_cardname"),onChange:q("itemName"),disabled:!!L},"cardname"),(0,v.tZ)(_.m,{label:E("webapp_payment_edition_field_cardColor"),placeholder:E(O[I]),value:I,onChange:q("color"),disabled:!!L,children:ce.map((e=>(0,v.tZ)(s.$,{value:e.value,children:e.label},e.value)))},`cardColor${I}`),(0,v.tZ)(C.M,{isUsingNewDesign:!0,spaceId:null!=F?F:"",labelSx:C.e,onChange:e=>q("spaceId")(e),disabled:!!L})]})]})},R=e=>{const a=new Set;return e.cardNumber&&0!==e.cardNumber.length||a.add("cardNumber"),a.size>0?{isValid:!1,errorSet:a}:{isValid:!0}}},21062:(e,a,t)=>{t.d(a,{N:()=>_});var i=t(36351),n=t(96832),l=t(61490);const r={iban:{mask:"**** **** **** **** **** **** ****"},card:{mask:[{mask:"0000 000000 00000",regex:/^3[47]/},{mask:"000000 0000000000000",regex:/^62/,numberOfCharacters:19},{mask:"0000 000000 0000",regex:/^(3[689]|30[0-59])/,numberOfCharacters:14},{mask:"0000 0000 00000",regex:/^(5[0678]|6)/,numberOfCharacters:13},{mask:"0000 000000 00000",regex:/^(5[0678]|6)/,numberOfCharacters:15},{mask:"0000 0000 0000 0000 000",regex:/^(5[0678]|6)/,numberOfCharacters:19},{mask:"0000 00000 000000",regex:/^1/,numberOfCharacters:15},{mask:"0000 0000 0000 000000000",regex:/^[0-9]/}],dispatch:(e,a)=>{const t=(a.value+e).replace(/\D/g,"");return a.compiledMasks.find((e=>{const a=e;return a.numberOfCharacters?a.regex.test(t)&&t.length===a.numberOfCharacters:a.regex.test(t)}))}}};var d=t(95097),o=t(93853),c=t(9190);const _=(0,n.forwardRef)((({toggleVisibilityLabel:e,value:a,formatter:t,isValueInitiallyVisible:_=!1,onValueVisibilityChange:s,onValueVisibilityChangeRequest:p,autoHideTimer:u,onChange:m,actions:b=[],...y},h)=>{const{content:C,setContent:g,inputRef:f}=(0,c.t)({defaultValue:y.defaultValue,ref:h,value:a}),w=((e,a)=>{const t=(0,n.useMemo)((()=>{if(a)return(e=>l.ZP.createMask(r[e]))(a)}),[a]);return(0,n.useMemo)((()=>e&&t?(t.resolve(e),t.value):e),[t,e])})(C,t),{isValueVisible:v,toggleValueVisibility:x}=(0,d.P)({isValueInitiallyVisible:_,autoHideTimer:u,onValueVisibilityChange:s,onValueVisibilityChangeRequest:p}),N=[{label:v?e.hide:e.show,iconName:v?"ActionHideOutlined":"ActionRevealOutlined",onClick:x},...b];return(0,i.tZ)(o.n,{internalProps:{isObfuscated:!v},...y,ref:f,value:w,type:v?"text":"password",actions:N,onChange:e=>{m&&m(e),g(e.target.value)},sx:{"input, .readOnlyMask":{variant:"text.ds.body.standard.monospace"}}})}));_.displayName="ObfuscatedField"}}]);