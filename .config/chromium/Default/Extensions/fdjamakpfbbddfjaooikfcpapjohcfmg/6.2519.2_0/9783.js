"use strict";(globalThis.webpackChunk_dashlane_leeloo=globalThis.webpackChunk_dashlane_leeloo||[]).push([[9783],{75239:(e,t,n)=>{n.d(t,{C:()=>d});var a=n(96832),i=n(48038),r=n(5465),s=n(64997),o=n(65454),l=n(3843);const c=e=>!(!e?.exp_year||!e?.exp_month)&&(0,l.Z)(new Date(e.exp_year,e.exp_month,0)),d=({b2c:e,handleCardUpdate:t,pollInterval:n=3e3,timeoutAmount:l=6e5})=>{const[d,_]=(0,a.useState)(!1),[u,m]=(0,a.useState)({}),[p,g]=(0,a.useState)(),h=(0,s.Z)(),y=h.status!==i.rq.Success||!h.data,b=h?.status===i.rq.Success&&h.data?h.data[e?"b2cSubscription":"b2bSubscription"]?.billingInformation:void 0,S=b?.last4?Number(b.last4).toLocaleString("en-US",{minimumIntegerDigits:4,useGrouping:!1}):void 0,x=b?.type?(0,o.v)(b.type):void 0,f=b?.exp_year,v=b?.exp_month,C=f&&v?`${v}/${f.toString().substring(2)}`:"",E=(0,a.useCallback)((()=>{d&&_(!1),p&&clearTimeout(p)}),[d,p]);return(0,a.useEffect)((()=>E),[]),(0,a.useEffect)((()=>{if(d){const e=setInterval((()=>{r.C.refreshSubscriptionInformation()}),n);if(!p){const e=window.setTimeout(E,l);g(e)}return()=>clearInterval(e)}}),[n,d,E,l,p]),(0,a.useEffect)((()=>{if(d&&u){const e=u.last4DigitsFormatted!==S||u.expFormatted!==C;if(e&&(E(),t)){const n=!u.last4DigitsFormatted;t(e,n)}}}),[d,S,C,u,u.expFormatted,u.last4DigitsFormatted,E,t]),{loading:y,billingInformation:b,hasCreditCardPaymentMethod:!!b?.last4,last4Digits:b?.last4,last4DigitsFormatted:S,cardSvg:x,isExpired:c(b),expYear:b?.exp_year,expMonth:b?.exp_month,expFormatted:C,pollUntilCardUpdate:()=>{_(!0),m({last4DigitsFormatted:S,expFormatted:C})}}}},37466:(e,t,n)=>{n.d(t,{a:()=>s});var a=n(63847),i=n(11538),r=n(36351);const s=({scopedToPage:e=!1})=>(0,r.tZ)(a.k,{justifyContent:"center",alignItems:"center",sx:{backgroundColor:"rgba(245, 247, 247, 0.7)",...e?{}:{position:"absolute",top:0,left:0,right:0,height:"100%"}},children:(0,r.tZ)(i.Z,{containerStyle:{marginTop:"-90px",...e?{position:"relative",height:"90vh"}:{}}})})},12783:(e,t,n)=>{n.d(t,{r:()=>p});var a=n(96832),i=n(68999),r=n(73704),s=n(40577),o=n(23765),l=n(88203),c=n(44),d=n(45272),_=n(68691),u=n(63794),m=n(36351);const p=()=>{var e;const{translate:t}=(0,l.Z)(),n=null!=(e=(0,c.f)())?e:"",p=(0,_.C)(),g=(0,s.o)(o.G.ActivationRetentionWebTalkToSales),h=(0,a.useRef)(),y=(0,a.useRef)(0),b=(0,a.useRef)(null);if(null===p)return null;const S=!!p&&p.isFreeTrial,x=!!p&&p.isCompanySizeOver50;return g&&S&&x?(0,m.tZ)(i.z,{size:"medium",mood:"brand",intensity:"supershy","data-testid":"contact-sales",layout:"iconLeading",icon:"ItemEmailOutlined",onClick:()=>{(0,d.Kz)(new r.UserClickEvent({button:r.Button.BookCall})),b.current=window.open(u.c6),h.current=window.setInterval((()=>{b.current?.postMessage({email:n},u.c6),y.current++,y.current>=10&&window.clearInterval(h.current)}),3e3)},children:t("webapp_top_header_menu_contact_sales_button")}):null}},78060:(e,t,n)=>{n.d(t,{m:()=>s});var a=n(24507),i=n(51031),r=n(32734);const s=()=>{const{data:e,status:t}=(0,a.k)(r.o,"isTeamCreator");return t!==i.rq.Success?{status:t}:{status:t,isTeamCreator:e}}},28207:(e,t,n)=>{n.d(t,{u:()=>s});var a=n(24507),i=n(51031),r=n(32734);const s=()=>{const{data:e,error:t,status:n}=(0,a.k)(r.o,"getTeamCreationDateUnix");return n!==i.rq.Success?{status:n,error:t}:null===e?{status:i.rq.Loading}:{status:n,teamCreationDate:e}}},5822:(e,t,n)=>{n.d(t,{V:()=>s});var a=n(24507),i=n(51031),r=n(32734);const s=()=>{const{data:e,status:t}=(0,a.k)(r.o,"getTeamId");return t!==i.rq.Success?{status:t}:{status:t,teamId:null===e.teamId?null:Number(e.teamId)}}},3090:(e,t,n)=>{n.d(t,{e:()=>a});const a=({refusedMembers:e={}}={})=>Object.keys(e).length>0},78763:(e,t,n)=>{n.d(t,{cZ:()=>X,QK:()=>U});var a=n(96832),i=n(78956),r=n(29020),s=n(22522),o=n(37332),l=n(73704),c=n(88203),d=n(68691),_=n(45272),u=n(92077),m=n(6135),p=n(14856),g=n(68999),h=n(36351);const y={CONTAINER:{display:"flex",padding:"16px 8px",justifyContent:"space-between",alignItems:"center",gap:"8px"},ITEM:{display:"flex",gap:"16px",alignItems:"flex-start"}},b=({title:e,description:t,iconName:n,button:a})=>{const{content:i,onClick:s,isUpgradeButton:o,isRoleLink:l}=a;return(0,h.BX)("div",{sx:y.CONTAINER,children:[(0,h.BX)("div",{sx:y.ITEM,children:[(0,h.tZ)(p.v,{name:n,size:"small",mood:"brand"}),(0,h.BX)("div",{sx:{gap:" 4px",maxWidth:"320px"},children:[(0,h.tZ)(r.n,{textStyle:"ds.title.block.small",color:"ds.text.neutral.catchy",children:e}),(0,h.tZ)(r.n,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.quiet",children:t})]})]}),(0,h.tZ)(g.z,{mood:o?"brand":"neutral",intensity:"quiet",icon:o?"PremiumOutlined":void 0,layout:o?"iconLeading":void 0,role:l?"link":void 0,onClick:s,size:"small",children:i})]})};var S=n(61605),x=n(19471);let f=function(e){return e.SECURITY_GUIDANCE="security_guidance",e.TRAINING="training",e.SEND_MESSAGE="send_message",e}({});const v={[f.SECURITY_GUIDANCE]:x.mA,[f.TRAINING]:x.J0,[f.SEND_MESSAGE]:x.hc},C={[f.SECURITY_GUIDANCE]:l.CallToAction.RequestDemo,[f.TRAINING]:l.CallToAction.RegisterWebinar,[f.SEND_MESSAGE]:l.CallToAction.SendEmail},E=(e,t)=>{const n=[l.CallToAction.SendEmail,l.CallToAction.RequestDemo,l.CallToAction.RegisterWebinar,l.CallToAction.Dismiss];n.push(t?l.CallToAction.ContactPhoneSupport:l.CallToAction.RequestUpgrade),(0,_.Kz)(new l.UserCallToActionEvent({callToActionList:n,chosenAction:C[e],hasChosenNoAction:!1})),(0,S.Yo)(v[e])};var Z=n(62264),k=n(82429),D=n(75017),T=n(91025),I=n(60055),A=n(24507),w=n(51031);const O=e=>{const t=new Date(e);return new Intl.DateTimeFormat([],{weekday:void 0,hour:"numeric",minute:void 0,hour12:!0,timeZoneName:void 0,timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone}).format(t)};var N;const R=({flag:e,name:t})=>(0,h.BX)(r.n,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.catchy",children:[(0,h.tZ)("span",{role:"img","aria-hidden":!1,children:e}),"Â ",t]}),L=({onDismiss:e})=>{const{translate:t}=(0,c.Z)(),{showToast:n}=(0,Z.p)(),o=()=>e(),{opening:l,closing:d,timezone:_}=((e,t)=>{const n="-"+String(Math.abs(-5)).padStart(2,"0"),a=new Date(`1970-01-01T${e.toString().padStart(2,"0")}:00:00${n}:00`),i=new Date(`1970-01-01T${t.toString().padStart(2,"0")}:00:00${n}:00`);var r;return{opening:O(a),closing:O(i),timezone:null!=(r=new Intl.DateTimeFormat([],{timeZoneName:"short"}).formatToParts(new Date).find((e=>"timeZoneName"===e.type))?.value)?r:""}})(9,18),u=(0,A.k)(T.k,"getContacts"),m=u.status===w.rq.Success;return(0,a.useEffect)((()=>{u.status===w.rq.Error&&(n({mood:"danger",description:u.error.tag===I.DX.NOT_AUTHORIZED?t.markup("team_phone_support_dialog_error_not_authorized_markup",{link:"https://support.dashlane.com/hc/"}):t("_common_generic_error")}),o())}),[u.status]),(0,h.tZ)(i.Vq,{isOpen:!0,disableScrolling:!0,title:t("team_phone_support_dialog_title"),closeActionLabel:t("_common_dialog_dismiss_button"),onClose:o,footerSlot:(0,h.tZ)(g.z,{layout:"iconLeading",icon:"ArrowLeftOutlined",intensity:"supershy",mood:"brand",onClick:o,children:t("_common_action_back")}),children:m?(0,h.BX)("div",{sx:{display:"flex",gap:"16px",flexDirection:"column"},children:[(0,h.tZ)(r.n,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",children:t("team_phone_support_dialog_text_omnix")}),(0,h.BX)("div",{sx:{display:"flex",gap:"8px",flexDirection:"row"},children:[(0,h.tZ)(k.C,{mood:"brand",intensity:"quiet",iconName:"FeedbackInfoOutlined",layout:"iconLeading",label:t("team_phone_support_dialog_language_limitation")}),(0,h.tZ)(k.C,{mood:"brand",intensity:"quiet",iconName:"TimeOutlined",layout:"iconLeading",label:t("team_phone_support_dialog_opening_hours",{openingHours:`${l}â€“${d} ${_}`})})]}),(0,h.BX)("div",{children:[(0,h.BX)("div",{sx:{backgroundColor:"ds.container.agnostic.neutral.quiet",padding:"16px",borderRadius:"8px",marginBottom:"8px"},children:[(0,h.tZ)("div",{sx:{display:"flex",flexDirection:"row",flexWrap:"wrap"},children:u.data.directory.map((e=>(0,h.BX)("div",{sx:{display:"flex",gap:"8px",width:"180px",padding:"8px",flexDirection:"column"},children:[(0,h.tZ)(R,{flag:e.countryFlag,name:e.countryName}),(0,h.tZ)(r.n,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.quiet",children:e.phoneNumber})]},e.countryName)))}),(0,h.BX)("div",{sx:{marginTop:"16px",padding:"8px"},children:[(0,h.tZ)(R,{flag:"ðŸŒ",name:t("team_phone_support_dialog_other_regions")}),(0,h.tZ)(D.Q,{href:u.data.calendar.link,isExternal:!0,sx:{padding:"8px 0px"},children:t("team_phone_support_dialog_make_appointment_calendar_calendly")})]})]}),(0,h.tZ)(r.n,{textStyle:"ds.body.helper.regular",color:"ds.text.neutral.quiet",children:t("team_phone_support_dialog_footer_terms_sharing_phone_numbers")}),(0,h.tZ)(r.n,{textStyle:"ds.body.helper.regular",color:"ds.text.neutral.quiet",children:t("team_phone_support_dialog_footer_terms_fees_responsibility")})]})]}):(0,h.tZ)("div",{sx:{minHeight:"380px",display:"flex",justifyContent:"center",alignItems:"center"},children:N||(N=(0,h.tZ)(s.Z,{size:44,"data-testid":"phone-support-dialog-loader"}))})})};var B;const M="team_contact_support_phone_support_title",P="team_contact_support_phone_support_subtitle",U=Object.freeze({FULL:"full",LIMITED:"limited",NULL:null}),X=({onDismiss:e})=>{const{translate:t}=(0,c.Z)(),{routes:n}=(0,u.Xo)(),p=(0,d.C)(),g=(0,m.S)(),y=(0,u.k6)(),[v,C]=(0,a.useState)(!0),[Z,k]=(0,a.useState)(!1),D=()=>{C(!1),k(!0)},T=null===g||null===p,I=(0,a.useMemo)((()=>g?.canSeeCustomerSupportContacts.enabled?{type:U.FULL,title:"team_contact_support_access_phone_support_title",description:"team_contact_support_omnix_access_phone_support_subtitle",button:"team_contact_support_access_phone_support_button"}:g?.phoneSupport.enabled?{type:U.LIMITED,title:M,description:P,button:"team_contact_support_request_call"}:{type:U.NULL,title:M,description:P,button:"team_contact_support_upgrade_to_business_cta"}),[g]),A=!!I.type,w=()=>((e,t)=>{const n=[l.CallToAction.SendEmail,l.CallToAction.RequestDemo,l.CallToAction.RegisterWebinar,l.CallToAction.Dismiss];n.push(t?l.CallToAction.ContactPhoneSupport:l.CallToAction.RequestUpgrade),(0,_.Kz)(new l.UserCallToActionEvent({callToActionList:n,hasChosenNoAction:!0})),e()})(e,A),O=p?.isFreeTrial||p?.isGracePeriod;return(0,a.useEffect)((()=>{(0,_.Nc)(l.PageView.TacModalContactSupport)}),[]),(0,h.BX)(a.Fragment,{children:[(0,h.tZ)(i.Vq,{isOpen:v,onClose:w,closeActionLabel:t("_common_dialog_dismiss_button"),title:t("team_contact_support_dialog_title"),children:T?(0,h.tZ)(r.n,{sx:{textAlign:"center"},children:B||(B=(0,h.tZ)(s.Z,{size:44}))}):(0,h.BX)(a.Fragment,{children:[(0,h.tZ)(r.n,{sx:{marginBottom:"16px"},children:t("team_contact_support_dialog_text")}),(0,h.BX)("div",{sx:{gap:"8px"},children:[(0,h.tZ)(b,{title:t(I.title),description:t(I.description),iconName:"ItemPhoneHomeOutlined",button:{content:t(I.button),onClick:()=>((e,t,n,a,i,r,s,o)=>{const c=[l.CallToAction.SendEmail,l.CallToAction.RequestDemo,l.CallToAction.RegisterWebinar,l.CallToAction.Dismiss];return a?(c.push(l.CallToAction.ContactPhoneSupport),(0,_.Kz)(new l.UserCallToActionEvent({callToActionList:c,chosenAction:l.CallToAction.ContactPhoneSupport,hasChosenNoAction:!1})),a===U.FULL?e():(0,S.Yo)(x.$b)):n||!s&&!o?(c.push(l.CallToAction.RequestUpgrade),(0,_.Kz)(new l.UserCallToActionEvent({callToActionList:c,chosenAction:l.CallToAction.RequestUpgrade,hasChosenNoAction:!1})),t(),i.push(`${r.teamAccountChangePlanRoutePath}?plan=business`)):(c.push(l.CallToAction.RequestUpgrade),(0,_.Kz)(new l.UserCallToActionEvent({callToActionList:c,chosenAction:l.CallToAction.RequestUpgrade,hasChosenNoAction:!1})),t(),i.push(r.teamAccountCheckoutRoutePath))})(D,w,A,I.type,y,n,p?.isFreeTrial,p?.isGracePeriod),isUpgradeButton:!A,isRoleLink:A||p?.isFreeTrial||p?.isGracePeriod}}),O?(0,h.BX)(a.Fragment,{children:[(0,h.tZ)(o.i,{sx:{margin:"8px 0"}}),(0,h.tZ)(b,{title:t("team_contact_support_security_guidance_title"),description:t("team_contact_support_security_guidance_subtitle"),iconName:"ProtectionOutlined",button:{content:t("team_contact_support_request_demo"),onClick:()=>E(f.SECURITY_GUIDANCE,A),isRoleLink:!0}})]}):null,(0,h.tZ)(o.i,{sx:{margin:"8px 0"}}),(0,h.tZ)(b,{title:t("team_contact_support_training_title"),description:t("team_contact_support_training_subtitle"),iconName:"AccountSettingsOutlined",button:{content:t("team_contact_support_register_for_webinar"),onClick:()=>E(f.TRAINING,A),isRoleLink:!0}}),(0,h.tZ)(o.i,{sx:{margin:"8px 0"}}),(0,h.tZ)(b,{title:t("team_contact_support_help_customer_support_title"),description:t("team_contact_support_help_customer_support_subtitle"),iconName:"ItemEmailOutlined",button:{content:t("team_contact_support_send_message"),onClick:()=>E(f.SEND_MESSAGE,A),isRoleLink:!0}})]})]})}),Z?(0,h.tZ)(L,{onDismiss:()=>{k(!1),C(!0)}}):null]})}},48637:(e,t,n)=>{n.d(t,{Z:()=>QD,n:()=>YD});var a=n(59522),i=n(92077),r=n(96832),s=n(48038),o=n(62264),l=n(22522),c=n(63847),d=n(22903),_=n(29020),u=n(73704),m=n(24507),p=n(32734),g=n(45836),h=n(27144),y=n(45272),b=n(88203),S=n(75239);const x={borderStyle:"solid",borderColor:"ds.border.neutral.quiet.idle",borderWidth:"1px",borderRadius:"8px",backgroundColor:"ds.container.agnostic.neutral.supershy",padding:"32px"},f={borderStyle:"solid",borderColor:"ds.border.neutral.quiet.idle",borderWidth:"1px",backgroundColor:"ds.container.agnostic.neutral.supershy",padding:"24px",borderRadius:"8px"},v={padding:"10px 8px",width:"40px",height:"40px",borderRadius:"8px",backgroundColor:"ds.container.expressive.brand.quiet.idle"};var C,E=n(36351);const Z=()=>{const{translate:e}=(0,b.Z)(),{loading:t,last4DigitsFormatted:n,expFormatted:a,cardSvg:i}=(0,S.C)({});return t?C||(C=(0,E.tZ)(l.Z,{})):(0,E.BX)(c.k,{flexDirection:"column",gap:"16px",sx:f,children:[(0,E.tZ)(d.X,{as:"h2",color:"ds.text.neutral.catchy",children:e("team_account_addseats_success_credit_card_header")}),(0,E.BX)(c.k,{flexDirection:"column",gap:"8px",children:[(0,E.BX)(c.k,{alignItems:"center",gap:"8px",children:[i,(0,E.BX)(_.n,{color:"ds.text.neutral.standard",children:["â€¢â€¢â€¢â€¢ ",n]})]}),(0,E.tZ)(c.k,{children:(0,E.tZ)(_.n,{color:"ds.text.neutral.standard",children:e("team_account_addseats_success_credit_card_expires",{expirationDate:a})})})]})]})};var k,D=n(68999),T=n(47124);const I=()=>{const{translate:e}=(0,b.Z)(),{routes:t}=(0,i.Xo)(),n=(0,i.k6)();return(0,E.tZ)("div",{children:(0,E.tZ)(D.z,{mood:"neutral",intensity:"supershy",onClick:()=>{n.length>1?n.goBack():(0,i.uX)(t.teamAccountRoutePath)},children:(0,E.BX)(c.k,{alignItems:"center",children:[k||(k=(0,E.tZ)(T.JO,{size:"medium",name:"ArrowLeftOutlined"})),(0,E.tZ)(_.n,{color:"ds.text.neutral.standard",textStyle:"ds.title.block.medium",sx:{marginLeft:"14px"},children:e("_common_action_back")})]})})})};var A=n(64997);const w=()=>{const e=(0,A.Z)(),t=e.status!==s.rq.Success||!e.data,n=e?.status===s.rq.Success?e?.data?.b2bSubscription?.billingInformation:null,a=n?.country;return{loading:t,billingCountry:a}};var O=n(39378),N=n(38452),R=n(18854),L=n(42670);const B={alignItems:"center",backgroundColor:"ds.background.alternate",borderBottom:"1px solid ds.border.neutral.quiet.idle",display:"flex",height:"80px",justifyContent:"flex-end",padding:"0 48px"},M=({children:e})=>(0,E.tZ)("header",{sx:B,children:e}),P={LAYOUT_CONTAINER:{display:"flex",flexDirection:"column",overflowY:"hidden"},MAIN_AREA:{display:"flex",backgroundColor:"ds.background.alternate",height:" 100vh",position:"relative",overflowY:"hidden",width:"100vw"},CONTENT:{display:"flex",flexFlow:"column",width:"100%",overflowY:"auto"},SIDE_NAV:{backgroundColor:"ds.container.agnostic.inverse.standard",nav:{backgroundColor:"ds.container.agnostic.inverse.standard"}}},U=e=>{const{brand:t,children:n,header:a,sideNav:i,banner:r,dialog:s,bottomButton:o}=e;return(0,E.tZ)("div",{sx:P.LAYOUT_CONTAINER,children:(0,E.BX)("div",{sx:P.MAIN_AREA,children:[(0,E.BX)("div",{sx:P.SIDE_NAV,children:[(0,E.tZ)("div",{children:t}),(0,E.tZ)("div",{style:{height:"calc(100% - 160px)",overflow:"auto"},children:i}),(0,E.tZ)("div",{style:{height:"80px"},children:o})]}),(0,E.BX)("div",{sx:P.CONTENT,children:[r?(0,E.tZ)("div",{sx:{flex:"0 auto"},children:r}):null,(0,E.tZ)("div",{sx:{flex:"0 auto"},children:a}),(0,E.tZ)("main",{sx:{display:"flex",flexFlow:"column",flex:1},children:n})]}),s?(0,E.BX)("div",{children:[s," "]}):null]})})};var X=n(63071),z=n(37332),F=n(7544),q=n(77270),G=n(51031),V=n(7508),j=n(97607),W=n(61605),H=n(9882),$=n(68691),K=n(69898),Y=n(30926),Q=n(97962),J=n(78956),ee=n(81433),te=n(8180),ne=n(78346);const ae=r.createContext(null),ie="NETWORK ERROR",re=({globalReportError:e,children:t})=>{const[n,a]=r.useState([]),{translate:i}=(0,b.Z)(),s=e=>{n.find((t=>t.title===e.title&&t.message===e.message))||a((t=>[...t,e]))};return(0,E.tZ)(ae.Provider,{value:{queue:n,addAlertToQueue:s,popAlertFromQueue:()=>{a((e=>e.slice(1)))},reportTACError:(t,n)=>{t.message.toUpperCase()===ie&&s({title:i("_common_alert_network_error_title"),message:i("_common_alert_network_error_message")}),e(t,n)}},children:t})},se=()=>{const e=r.useContext(ae);if(!e)throw new Error("useAlertQueue must be called from within an AlertQueueProvider");return e},oe=({onDismiss:e,onFeedbackSent:t})=>{const[n,a]=(0,r.useState)(!0),[i,s]=(0,r.useState)(!1),[o,l]=(0,r.useState)(!1),{translate:c}=(0,b.Z)(),{reportTACError:d}=se(),m=(0,r.useRef)(null),[g,h]=(0,r.useState)(""),{sendFeedback:S}=(0,te.u)(p.o);(0,r.useEffect)((()=>{(0,y.Nc)(u.PageView.TacAccountSendFeedback,u.BrowseComponent.Tac)}),[]);return(0,E.BX)(J.Vq,{isOpen:!0,onClose:()=>{(0,y.Kz)(new u.UserCallToActionEvent({hasChosenNoAction:!0})),e()},actions:{primary:{children:c("team_feedback_dialog_button_ok"),onClick:()=>(async()=>{s(!0),l(!1);const e=await S({feedbackBody:g});(0,ne.d6)(e)?((0,y.Kz)(new u.UserCallToActionEvent({callToActionList:[u.CallToAction.SendEmail],chosenAction:u.CallToAction.SendEmail,hasChosenNoAction:!1})),t()):(d(new Error(e.error.message)),s(!1),l(!0))})(),disabled:n||i}},title:c("team_feedback_dialog_upd_title"),closeActionLabel:c("_common_dialog_dismiss_button"),children:[(0,E.tZ)(_.n,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.quiet",children:c.markup("team_feedback_dialog_upd_text_markup",{},{linkTarget:"_blank"})}),(0,E.tZ)(ee.o,{sx:{resize:"vertical",maxHeight:"300px"},value:g,ref:m,placeholder:c("team_feedback_dialog_upd_textarea_label"),onChange:e=>{var t;h(null!=(t=m?.current?.value)?t:"");const n=!e.target.value;a(n)}}),o?(0,E.tZ)(_.n,{color:"ds.text.danger.quiet",textStyle:"ds.body.standard.strong",children:c.markup("team_feedback_dialog_error_markup")}):null]})};var le;const ce=({onDismiss:e})=>{const{translate:t}=(0,b.Z)();return(0,E.tZ)(J.Vq,{isOpen:!0,onClose:e,closeActionLabel:t("_common_dialog_dismiss_button"),title:t("team_feedback_result_dialog_title"),children:(0,E.BX)("div",{sx:{display:"flex",gap:"20px",alignItems:"center"},children:[le||(le=(0,E.tZ)(T.JO,{name:"FeedbackSuccessOutlined",size:"xlarge",color:"ds.text.positive.standard"})),(0,E.tZ)("div",{children:(0,E.tZ)(_.n,{textStyle:"ds.body.standard.regular",children:`${t("team_feedback_result_body_title")}. ${t("team_feedback_result_body_text")}`})})]})})};var de=function(e){return e[e.FeedbackPopup=0]="FeedbackPopup",e[e.ResultPopup=1]="ResultPopup",e[e.Done=2]="Done",e}(de||{});const _e=({onDismiss:e,onSend:t})=>{const[n,a]=(0,r.useState)(de.FeedbackPopup);let i;const s=()=>{clearTimeout(i),a(de.Done),t()};return(0,E.BX)("div",{children:[n===de.FeedbackPopup&&(0,E.tZ)(oe,{onDismiss:e,onFeedbackSent:()=>{a(de.ResultPopup),i=window.setTimeout((()=>{s()}),1e4)}}),n===de.ResultPopup&&(0,E.tZ)(ce,{onDismiss:s})]})};var ue=n(78763),me=n(19471),pe=n(82429),ge=n(15607);const he=()=>{const e=(0,$.C)(),t=(0,ge.lZ)(),{translate:n}=(0,b.Z)();if(!e||t.isLoading||void 0===t.isTeamSoftDiscontinued||void 0===t.isTrial)return null;const a=e.daysLeftInTrial,i=e.isGracePeriod,r=t.isTeamSoftDiscontinued&&t.isTrial;return(0,E.tZ)(pe.C,{label:r?n("trial_ended_discontinued"):i?n("free_trial_extended_badge"):n("trial_days_left_badge",{count:a}),mood:r?"danger":i?"warning":"brand",layout:"labelOnly",intensity:i?"catchy":"quiet",sx:{marginTop:"3px"}})};var ye=n(12783);var be,Se,xe,fe;const ve=({lee:e})=>{var t;const[n,a]=(0,r.useState)(!1),[s,o]=(0,r.useState)(!1),[l,c]=(0,r.useState)(!1),d=(0,q._)(),_=d.status===G.rq.Success&&d.data[V.C.B2bReferralProd],m=(0,$.C)(),p=null!=(t=(0,Q.f)())?t:"",{translate:h}=(0,b.Z)(),S=(0,H.a)(e.dispatchGlobal),{routes:x}=(0,i.Xo)(),f=n?(0,E.tZ)(_e,{onDismiss:()=>a(!1),onSend:()=>a(!1)}):null,v=s?(0,E.tZ)(ue.cZ,{onDismiss:()=>o(!1)}):null,C=!m?.isFreeTrial&&(m?.spaceTier===g.lD.Team||m?.spaceTier===g.lD.Starter),Z=m?.isFreeTrial,k=e.permission.adminAccess.hasBillingAccess;return(0,E.BX)(r.Fragment,{children:[(0,E.BX)("div",{className:"teamAccountDropdown--XD04fGIw1S",children:[be||(be=(0,E.tZ)(ye.r,{})),(0,E.tZ)(X.h_,{align:"end",children:(0,E.BX)("div",{className:"dropdownMenu--Uz1kni0KIt",children:[(0,E.tZ)(X.sB,{showCaret:!0,mood:"neutral",intensity:"supershy",sx:{zIndex:99},children:h("team_account")}),(0,E.BX)(X.Nv,{children:[(0,E.tZ)(Y.I,{login:p}),Se||(Se=(0,E.tZ)(z.i,{})),Z&&k?(0,E.tZ)(F.h,{onSelect:()=>{(0,y.Kz)(new u.UserClickEvent({button:u.Button.BuyDashlane,clickOrigin:u.ClickOrigin.AccountDropdown})),(0,i.uX)(x.teamAccountCheckoutRoutePath)},label:h("team_buy_dashlane"),badge:xe||(xe=(0,E.tZ)(he,{}))}):null,k?(0,E.tZ)(F.h,{onSelect:()=>(0,i.uX)(x.teamAccountRoutePath),label:h("team_plan")}):null,(0,E.tZ)(F.h,{onSelect:()=>{(0,i.uX)("/")},label:h("team_webapp")}),_&&k?(0,E.tZ)(F.h,{onSelect:()=>{(0,y.Kz)(new u.UserClickEvent({button:u.Button.ReferABusiness,clickOrigin:u.ClickOrigin.AccountDropdown}));const e=(0,j.G3)();(0,W.Yo)(`${me.p9}?utm_source=product&utm_medium=tac&utm_campaign=b2breferralprogram&lang=${e}`)},label:h("team_refer_business")}):null,C&&k?(0,E.tZ)(F.h,{onSelect:()=>(0,i.uX)(`${x.teamAccountChangePlanRoutePath}`),label:h("team_upgrade")}):null,(0,E.tZ)(F.h,{onSelect:()=>(0,W.Yo)(me.Pr),label:h("team_service_status")}),(0,E.tZ)(F.h,{onSelect:()=>(0,W.Yo)(me.FX),label:h("team_support")}),k?(0,E.tZ)(F.h,{onSelect:()=>o(!0),label:h("team_contact_support_menu_item")}):null,(0,E.tZ)(F.h,{onSelect:()=>a(!0),label:h("team_feedback")}),fe||(fe=(0,E.tZ)(z.i,{})),(0,E.tZ)(F.h,{onSelect:()=>{S()},isDestructive:!0,label:h("team_logout")})]})]})})]}),l?(0,E.tZ)(K.F,{isShown:l,setIsShown:c,isFromVault:!1}):null,f,v]})};var Ce=n(14900),Ee=n(16166),Ze=n(95870),ke=n(5862),De=n(55139),Te=n(79846);const Ie=r.createContext(null),Ae=({children:e})=>{const[t,n]=r.useState(!1);return(0,E.tZ)(Ie.Provider,{value:{hasNewBreaches:t,setHasNewBreaches:n},children:e})},we=()=>{const e=r.useContext(Ie);if(!e)throw new Error("useSideNavNotification must be called from within an SideNavNotificationProvider");return e};var Oe=n(23619);function Ne(e){var t;const n=(0,Oe.U)(),a=(0,$.C)();if(!a)return null;let i;return i="hasFullAccess"in e&&e.hasFullAccess||e.hasBillingAccess,{shouldShowBuyOrUpgradePaywall:null!=(t=i)&&t,isTrialOrGracePeriod:a.isFreeTrial||a.isGracePeriod,planType:a.spaceTier,accountSubscriptionCode:null!=n?n:""}}var Re=n(22640),Le=n(5465);function Be(e){const[t,n]=r.useState(!0),[a,i]=r.useState({}),[s,o]=r.useState(null),[l,c]=r.useState(null),[d,_]=r.useState(null);return r.useEffect((()=>{if(void 0===e)return;const t=new AbortController;return(async()=>{n(!0);try{const{teamInfo:{ssoServiceProviderUrl:e,ssoIdpMetadata:n,ssoEnabled:a,recoveryEnabled:r,duoSecretKey:s,duoIntegrationKey:o,duoApiHostname:l,duo:d,activeDirectoryToken:u,activeDirectorySyncType:m,activeDirectorySyncStatus:p,uuid:g},capabilities:h,planTier:y}=await async function(){const e=await Le.C.getTeamInfo();if(e.success){const{data:{teamInfo:t,planTier:n,capabilities:a,seats:i}}=e;return{teamInfo:t,planTier:n,capabilities:a,seats:i}}{const{message:t}=e;throw new Error(`getTeamInfo: failed with error: ${t}`)}}();if(t.signal.aborted)return;i({ssoServiceProviderUrl:e,ssoIdpMetadata:n,ssoEnabled:a,recoveryEnabled:r,duoSecretKey:s,duoIntegrationKey:o,duoApiHostname:l,duo:d,activeDirectoryToken:u,activeDirectorySyncType:m,activeDirectorySyncStatus:p,uuid:g}),_(y),c(h)}catch(e){const t=new Error(`useTeamSettings: ${e}`);o(t)}finally{n(!1)}})(),()=>{t.abort()}}),[e]),{teamSettingsLoading:t,teamSettingsError:s,teamSettings:a,updateTeamSettings:async t=>{if(null===e)return;const n={teamId:e,settings:t};try{await(0,Re.jy)(n)}catch(e){var r;throw new Error(null!=(r=e?.additionalInfo?.message)?r:"Failed to save metadata")}const s={...a,...t};i(s)},planTier:d,teamCapabilities:l}}var Me=n(19122),Pe=n(40577),Ue=n(80443),Xe=n(14943),ze=n(2337);const Fe=()=>{const e=(0,Xe.Y)(),t=(0,Pe.o)("monetization_extension_policies_repackage"),n=(0,$.C)();if(e.status!==G.rq.Success||!t)return{hasStarterPaywall:!1,hasTrialBusinessPaywall:!1,hasExcludedPolicy:()=>!1};const a=e.data.capabilities?.adminPolicies?.info.excludedPolicies||[],i="full"===(0,ze.R)(e.data);return{hasStarterPaywall:(0,Ue.f1)(e.data)&&i,hasTrialBusinessPaywall:(0,Ue.NG)(e.data)&&i&&!!n?.isFreeTrial,hasExcludedPolicy:e=>a.includes(e)}},qe=(0,r.createContext)(!1),Ge=({children:e})=>{const t=(0,Pe.o)("setup_rollout_splunk_integration_prod");return(0,E.tZ)(qe.Provider,{value:!!t,children:e})};var Ve=n(15192),je=n(84133);const We=({settingsRoute:e,children:t})=>{const{translate:n}=(0,b.Z)(),a=(0,Ve.k6)(),i=(0,je.h)(),{unseen:r,setAsSeen:s}=(0,Te.m)(Ze.O.AccountRecoveryAvailableAdminTooltip);return!r||i.status!==G.rq.Success||i.data?(0,E.tZ)("div",{children:t}):(0,E.tZ)(Ce.ua7,{sx:{width:"312px",minWidth:"312px",textAlign:"left"},trigger:"persist",placement:"left",offset:[0,30],arrowSize:12,content:(0,E.BX)(c.k,{gap:"8px",sx:{padding:"8px"},children:[(0,E.tZ)(Ce.nvN,{size:"large",as:"h3",sx:{fontWeight:600,color:"ds.text.inverse.catchy"},children:n("team_account_recovery_popover_title")}),(0,E.tZ)(Ce.nvN,{color:"white",size:"x-small",children:n("team_account_recovery_popover_description")}),(0,E.BX)(c.k,{gap:"8px",justifyContent:"flex-end",sx:{width:"100%",marginTop:"8px"},children:[(0,E.tZ)(D.z,{type:"button",mood:"neutral",size:"small","data-testid":"ar-tooltip-dismiss",onClick:()=>s(),children:n("team_account_recovery_popover_dismiss")}),(0,E.tZ)(D.z,{type:"button",mood:"brand",size:"small","data-testid":"ar-tooltip-go-to-settings",onClick:()=>{s(),a.push(e)},children:n("team_account_recovery_popover_go_to_settings")})]})]}),children:(0,E.tZ)("div",{children:t})})},He={CONTAINER:{alignItems:"center",borderRadius:"4px",cursor:"pointer",display:"flex",padding:"4px 12px",minHeight:"40px"},CONTAINER_ON_HOVER:{"&:hover":{backgroundColor:"ds.container.expressive.neutral.supershy.hover"}},CONTAINER_COLLAPSED:{textStyle:"ds.title.block.small",alignItems:"center",flexDirection:"column",padding:"6px"},CONTAINER_SELECTED:{backgroundColor:"ds.container.expressive.neutral.supershy.active"},END_ADORNMENT:{flex:"1 1 auto"},END_ADORNMENT_COLLAPSED:{display:"none"},ICON:{marginBottom:"0",marginRight:"16px",minWidth:"20px",svg:{fill:"ds.text.inverse.catchy"},"&:hover":{svg:{fill:"ds.text.inverse.catchy"}}},ICON_COLLAPSED:{marginBottom:"4px",marginRight:"0"},LABEL:{color:"ds.text.inverse.catchy",hyphens:"auto",minWidth:"0",wordWrap:"break-word",flex:"1 1 auto"},LABEL_COLLAPSED:{textStyle:"ds.title.block.small",textAlign:"center",width:"100%"},LABEL_CONTAINER:{display:"flex",alignItems:"center",flexDirection:"row",gap:"2px 12px",width:"100%",flexWrap:"wrap"},NOTIFICATION:{alignSelf:"flex-start",backgroundColor:"ds.container.expressive.warning.catchy.idle",borderRadius:"50%",flexShrink:"0",height:"8px",marginLeft:"4px",width:"8px"},NOTIFICATION_COLLAPSED:{position:"absolute",right:"18px"},TEXT_MEDIUM:{textStyle:"ds.title.block.medium"}},$e=({collapsed:e,hasNotification:t,icon:n,label:a,endAdornment:i,selected:r,inAccordion:s=!1,...o})=>{const l=(0,Ee.jM)([He.CONTAINER,e?He.CONTAINER_COLLAPSED:He.TEXT_MEDIUM,r&&!s?He.CONTAINER_SELECTED:{},s?{padding:0,minHeight:"none"}:He.CONTAINER_ON_HOVER]),c=(0,Ee.jM)([He.ICON,e?He.ICON_COLLAPSED:{}]),d=(0,Ee.jM)([He.LABEL,e?He.LABEL_COLLAPSED:He.TEXT_MEDIUM]),_=(0,Ee.jM)([He.NOTIFICATION,e?He.NOTIFICATION_COLLAPSED:{}]);return(0,E.BX)("span",{sx:l,...o,children:[(0,E.BX)("span",{sx:c,children:[" ",n," "]}),i?(0,E.BX)("div",{sx:He.LABEL_CONTAINER,children:[(0,E.tZ)("span",{sx:d,children:a}),(0,E.tZ)("div",{sx:e?He.END_ADORNMENT_COLLAPSED:{},children:i})]}):(0,E.tZ)("span",{sx:d,children:a}),t?(0,E.tZ)("span",{sx:_}):null]})},Ke="tooltipMenuOption--uuMY2Xcfk0";var Ye,Qe,Je,et,tt,nt,at,it,rt,st,ot,lt,ct,dt,_t,ut,mt,pt,gt=n(15394);const ht="team_settings_menu_title_directory_sync",yt="team_settings_menu_title_events_reporting",bt="team_settings_menu_title_single_sign_on",St="team_upgrade_label",xt="team_new_label",ft="webapp_sidemenu_group_upgrade_label",vt="webapp_sidemenu_category_integrations",Ct="team_sidemenu_public_api",Et="team_side_menu_mass_deployment_label",Zt={backgroundColor:"ds.container.agnostic.inverse.standard"," > summary > div":{width:"-webkit-fill-available"},"&[open] > summary > div":{width:"-webkit-fill-available"}," > summary > div > div > svg":{margin:"8px 4px 8px 0"},"&[open]":{padding:0},"&[open] > div:nth-of-type(1)":{pointerEvents:"auto",padding:0},"svg, svg:hover":{fill:"ds.text.inverse.catchy"}},kt=De.w.BBCOM238Duo,Dt=ke.v.RiskDetectionV2Prod,Tt=ke.v.RiskDetectionV2OnDemand,It=(e,t)=>{var n;return(null!=(n=t?.[e].length)?n:0)>0},At=({isCollapsed:e=!1,permissionChecker:t,routes:n,teamNotifications:s})=>{var o;const{translate:l}=(0,b.Z)(),c={DUO:`${n.teamSettingsRoutePath}${a.B9.DUO}`,MASTER_PASSWORD_POLICIES:`${n.teamSettingsRoutePath}${a.B9.MASTER_PASSWORD_POLICIES}`,POLICIES:`${n.teamSettingsRoutePath}${a.B9.POLICIES}`},_={INTEGRATIONS:`${n.teamIntegrationsRoutePath}`,DIRECTORY_SYNC:`${n.teamIntegrationsRoutePath}${a.Nr.DIRECTORY_SYNC}`,SSO:`${n.teamIntegrationsRoutePath}${a.Nr.SSO}`,SIEM:`${n.teamIntegrationsRoutePath}${a.Nr.SIEM}`,NUDGES:`${n.teamIntegrationsRoutePath}${a.Nr.NUDGES}`,PUBLIC_API:`${n.teamIntegrationsRoutePath}${a.Nr.PUBLIC_API}`,ANTIPHISHING:`${n.teamIntegrationsRoutePath}${a.Nr.ANTIPHISHING}`,MASS_DEPLOYMENT:`${n.teamIntegrationsRoutePath}${a.Nr.MASS_DEPLOYMENT}`},m=(0,i.TH)(),{unseen:p}=(0,Te.m)(Ze.O.TacDarkWebInsightsNewBadge),{hasNewBreaches:h}=we(),S=(0,q._)();let x=!1,f=!1,v=!1,C=!1,Z=!1;var k,D,I,A,w;S.status===G.rq.Success&&(x=null!=(k=S.data?.[kt])&&k,f=null!=(D=S.data[Dt]||S.data[Tt])&&D,v=null!=(I=S.data.ace_tac_slack_integration)&&I,C=null!=(A=S.data?.ace_web_phishing_page_tac)&&A,Z=null!=(w=S.data?.[ke.v.CRDEnhancements])&&w);const{shouldShowBuyOrUpgradePaywall:O,planType:N,isTrialOrGracePeriod:R}=null!=(o=Ne(t.adminAccess))?o:{},{teamId:L}=(0,Me.fV)(),B=Be(L),M=(0,gt.rp)(["nudges"]),P=(0,gt.rp)(["riskDetection"]),U=(0,r.useContext)(qe),X=(0,gt.rp)(["autofillWithPhishingPrevention"]),{hasStarterPaywall:z,hasTrialBusinessPaywall:F}=Fe(),V=O&&(N===g.lD.Team||N===g.lD.Starter),j=!M&&!(null==R||R),W=!P&&!(null==R||R),H=M||R,$=P||R,K=N===g.lD.Standard,Y=!!B.teamCapabilities?.groupSharing.info?.limit||K,Q=z||F,J=(0,Ee.jM)([He.CONTAINER,He.CONTAINER_ON_HOVER,e?He.CONTAINER_COLLAPSED:{}]),ee=({requiredPermission:e,children:n,...a})=>t.adminAccess.hasPermissionLevel(e)?(0,E.tZ)(Ce.KJW,{...a,children:n}):null;return(0,E.BX)(Ce.t7v,{collapsed:e,children:[(0,E.BX)(Ce.sMA,{sx:{pointerEvents:"auto",backgroundColor:"ds.container.agnostic.inverse.standard",marginBottom:"40px"},children:[(0,E.tZ)(ee,{requiredPermission:"FULL",collapsed:e,children:(0,E.tZ)(i.rU,{to:n.teamDashboardRoutePath,children:(0,E.tZ)($e,{collapsed:e,icon:Ye||(Ye=(0,E.tZ)(T.JO,{name:"DashboardOutlined"})),label:l("team_general"),selected:m.pathname===n.teamDashboardRoutePath})})}),(0,E.tZ)(ee,{requiredPermission:"FULL",collapsed:e,children:(0,E.tZ)(i.rU,{to:n.teamMembersRoutePath,children:(0,E.tZ)($e,{collapsed:e,icon:Qe||(Qe=(0,E.tZ)(T.JO,{name:"UsersOutlined"})),label:l("team_members"),selected:m.pathname===n.teamMembersRoutePath})})}),(0,E.tZ)(ee,{requiredPermission:"GROUP_READ",collapsed:e,children:(0,E.tZ)(i.rU,{to:n.teamGroupsRoutePath,children:(0,E.tZ)($e,{collapsed:e,icon:Je||(Je=(0,E.tZ)(T.JO,{name:"GroupOutlined"})),label:l("team_groups"),selected:m.pathname===n.teamGroupsRoutePath,endAdornment:Y?(0,E.tZ)(pe.C,{mood:"brand",intensity:"catchy",label:l(ft),layout:"iconLeading",iconName:"PremiumOutlined"}):null})})}),(0,E.tZ)(ee,{requiredPermission:"FULL",collapsed:e,children:(0,E.tZ)(i.rU,{to:n.teamActivityRoutePath,children:(0,E.tZ)($e,{collapsed:e,hasNotification:It("accountRecoveryRequests",s),icon:et||(et=(0,E.tZ)(T.JO,{name:"ActivityLogOutlined"})),label:l("team_activity"),selected:m.pathname.includes(n.teamActivityRoutePath)})})})]}),t.adminAccess.hasFullAccess?(0,E.BX)(r.Fragment,{children:[(0,E.tZ)(d.X,{as:"h3",textStyle:"ds.title.supporting.small",color:"ds.text.inverse.quiet",sx:{marginTop:"16px",marginLeft:"14px",marginBottom:"4px"},children:l("webapp_sidemenu_category_advanced_tools")}),(0,E.BX)(Ce.sMA,{children:[f?(0,E.tZ)(ee,{requiredPermission:"FULL",collapsed:e,children:(0,E.tZ)(i.rU,{to:n.credentialRiskMonitoring,children:(0,E.tZ)($e,{collapsed:e,icon:tt||(tt=(0,E.tZ)(T.JO,{name:"RiskDetectionOutlined"})),label:l("team_sidemenu_risk_detection"),endAdornment:W?(0,E.tZ)(pe.C,{mood:"brand",intensity:"catchy",label:l(ft),layout:"iconLeading",iconName:"PremiumOutlined"}):$?(0,E.tZ)(pe.C,{mood:"brand",intensity:"catchy",label:l(xt),"data-testid":"crd-new-badge"}):null})})}):null,v?(0,E.tZ)(ee,{requiredPermission:"FULL",collapsed:e,children:(0,E.tZ)(i.rU,{to:_.NUDGES,onClick:()=>(0,y.Nc)(u.PageView.ToolsNudges),children:(0,E.tZ)($e,{collapsed:e,icon:nt||(nt=(0,E.tZ)(T.JO,{name:"FeatureAutomationsOutlined"})),label:l("webapp_sidemenu_nudges"),selected:m.pathname===_.NUDGES,endAdornment:j?(0,E.tZ)(pe.C,{mood:"brand",intensity:"catchy",label:l(ft),layout:"iconLeading",iconName:"PremiumOutlined","data-testid":"nudges-upgrade-badge"}):H?(0,E.tZ)(pe.C,{mood:"brand",intensity:"catchy",label:l(xt),"data-testid":"nudges-new-badge"}):null})})}):null,C?(0,E.tZ)(ee,{requiredPermission:"FULL",collapsed:e,children:(0,E.tZ)(i.rU,{to:_.ANTIPHISHING,children:(0,E.tZ)($e,{collapsed:e,icon:at||(at=(0,E.tZ)(T.JO,{name:"PhishingAlertOutlined"})),label:l("team_side_menu_phishing_alert_label"),selected:m.pathname===_.ANTIPHISHING,endAdornment:X?null:(0,E.tZ)(pe.C,{mood:"brand",intensity:"catchy",label:l(ft),layout:"iconLeading",iconName:"PremiumOutlined","data-testid":"phishing-alert-upgrade-badge"})})})}):null,(0,E.tZ)(ee,{requiredPermission:"FULL",collapsed:e,children:(0,E.tZ)(i.rU,{to:n.teamDarkWebInsightsRoutePath,onClick:()=>{(0,y.Kz)(new u.UserOpenDomainDarkWebMonitoringEvent({accessPath:u.AccessPath.NavLeftMenuButton,isFirstVisit:p}))},children:(0,E.tZ)($e,{collapsed:e,icon:it||(it=(0,E.tZ)(T.JO,{name:"FeatureDarkWebMonitoringOutlined"})),label:l("team_dashboard_dark_web_insights_heading"),selected:m.pathname===n.teamDarkWebInsightsRoutePath,hasNotification:h})})})]}),(0,E.tZ)(d.X,{as:"h3",textStyle:"ds.title.supporting.small",color:"ds.text.inverse.quiet",sx:{marginTop:"16px",marginLeft:"14px",marginBottom:"4px"},children:l("team_settings")}),(0,E.BX)(Ce.sMA,{children:[(0,E.tZ)(ee,{requiredPermission:"FULL",collapsed:e,children:(0,E.tZ)(i.rU,{to:c.POLICIES,style:{width:"100%"},children:(0,E.tZ)($e,{icon:rt||(rt=(0,E.tZ)(T.JO,{name:"SettingsOutlined"})),collapsed:e,label:l("team_settings_menu_title_policies"),selected:m.pathname===c.POLICIES,endAdornment:Q?(0,E.tZ)(pe.C,{mood:"brand",intensity:"catchy",label:l(St),layout:"iconLeading",iconName:"PremiumOutlined"}):null})})}),(0,E.tZ)(We,{settingsRoute:c.MASTER_PASSWORD_POLICIES,children:(0,E.tZ)(ee,{requiredPermission:"FULL",collapsed:e,children:(0,E.tZ)(i.rU,{to:c.MASTER_PASSWORD_POLICIES,children:(0,E.tZ)($e,{icon:st||(st=(0,E.tZ)(T.JO,{name:"RecoveryKeyOutlined"})),label:l("team_settings_menu_title_account_recovery"),collapsed:e,selected:m.pathname===c.MASTER_PASSWORD_POLICIES})})})}),x?(0,E.tZ)(ee,{requiredPermission:"FULL",collapsed:e,children:(0,E.tZ)(i.rU,{to:c.DUO,children:(0,E.tZ)($e,{icon:ot||(ot=(0,E.tZ)(T.JO,{name:"LaptopCheckmarkOutlined"})),label:l("team_settings_tab_duo"),collapsed:e,selected:m.pathname===c.DUO})})}):null,e?(0,E.tZ)(Ce.ua7,{placement:"right",offset:[0,15],hoverCloseDelay:500,sx:{padding:"4px 0","svg, svg:hover":{fill:"ds.text.inverse.catchy"}},content:(0,E.BX)("div",{sx:{width:"148px"},children:[(0,E.tZ)(i.rU,{to:_.SSO,sx:{textDecoration:"none"},children:(0,E.BX)("div",{className:Ke,children:[l(bt),V?(0,E.tZ)(pe.C,{mood:"brand",intensity:"catchy",label:l(St),layout:"iconLeading",iconName:"PremiumOutlined","data-testid":"sso-badge"}):null]})}),(0,E.tZ)(i.rU,{to:_.DIRECTORY_SYNC,sx:{textDecoration:"none"},children:(0,E.tZ)("div",{className:Ke,children:l(ht)})}),Z?(0,E.tZ)(i.rU,{to:_.MASS_DEPLOYMENT,sx:{textDecoration:"none"},children:(0,E.tZ)("div",{className:Ke,children:l(Et)})}):null,U?(0,E.tZ)(i.rU,{to:_.SIEM,sx:{textDecoration:"none"},children:(0,E.tZ)("div",{className:Ke,children:l(yt)})}):null,(0,E.tZ)(i.rU,{to:_.PUBLIC_API,sx:{textDecoration:"none"},children:(0,E.tZ)("div",{className:Ke,children:l(Ct)})})]}),children:(0,E.tZ)("div",{tabIndex:0,children:(0,E.tZ)(ee,{requiredPermission:"FULL",collapsed:e,children:(0,E.tZ)(i.rU,{to:_.INTEGRATIONS,children:(0,E.tZ)($e,{collapsed:e,icon:lt||(lt=(0,E.tZ)(T.JO,{name:"ConfigureOutlined"})),label:l(vt),selected:!1})})})})}):(0,E.BX)(Ce.UlM,{size:"large",open:!0,sx:{...Zt,"> summary":(0,Ee.jM)([J,m.pathname===_.INTEGRATIONS?He.CONTAINER_SELECTED:{}])},children:[(0,E.tZ)(Ce._Oh,{children:(0,E.tZ)(ee,{requiredPermission:"FULL",collapsed:e,children:(0,E.tZ)(i.rU,{to:_.INTEGRATIONS,children:(0,E.tZ)($e,{collapsed:e,icon:ct||(ct=(0,E.tZ)(T.JO,{name:"ConfigureOutlined"})),label:l(vt),inAccordion:!0,endAdornment:K?(0,E.tZ)(pe.C,{mood:"brand",intensity:"catchy",label:l(ft),layout:"iconLeading",iconName:"PremiumOutlined"}):null})})})}),(0,E.BX)(Ce.rN7,{children:[(0,E.tZ)(ee,{requiredPermission:"FULL",collapsed:e,children:(0,E.tZ)(i.rU,{to:_.SSO,children:(0,E.tZ)($e,{icon:dt||(dt=(0,E.tZ)("span",{})),label:l(bt),endAdornment:V?(0,E.tZ)(pe.C,{mood:"brand",intensity:"catchy",label:l(St),layout:"iconLeading",iconName:"PremiumOutlined","data-testid":"sso-badge"}):null,selected:m.pathname===_.SSO})})}),(0,E.tZ)(ee,{requiredPermission:"FULL",collapsed:e,children:(0,E.tZ)(i.rU,{to:_.DIRECTORY_SYNC,children:(0,E.tZ)($e,{icon:_t||(_t=(0,E.tZ)("span",{})),label:l(ht),selected:m.pathname===_.DIRECTORY_SYNC})})}),Z?(0,E.tZ)(ee,{requiredPermission:"FULL",collapsed:e,children:(0,E.tZ)(i.rU,{to:_.MASS_DEPLOYMENT,children:(0,E.tZ)($e,{icon:ut||(ut=(0,E.tZ)("span",{})),label:l(Et),selected:m.pathname===_.MASS_DEPLOYMENT})})}):null,U?(0,E.tZ)(ee,{requiredPermission:"FULL",collapsed:e,children:(0,E.tZ)(i.rU,{to:_.SIEM,children:(0,E.tZ)($e,{icon:mt||(mt=(0,E.tZ)("span",{})),label:l(yt),selected:m.pathname===_.SIEM})})}):null,(0,E.tZ)(ee,{requiredPermission:"FULL",collapsed:e,children:(0,E.tZ)(i.rU,{to:_.PUBLIC_API,children:(0,E.tZ)($e,{icon:pt||(pt=(0,E.tZ)("span",{})),label:l(Ct),selected:m.pathname===_.PUBLIC_API})})})]})]})]})]}):null]})};var wt,Ot=n(42938);const Nt=({isCollapsed:e=!1})=>{const{translate:t}=(0,b.Z)();return(0,E.tZ)("div",{sx:{width:e?"96px":"256px"},children:(0,E.tZ)("div",{"data-testid":"logo-header",sx:{display:"flex",flexDirection:"column",alignItems:e?"center":"baseline",padding:e?"none":"20px 24px",justifyContent:"center",height:"80px !important",borderBottom:"1px solid ds.border.neutral.quiet.idle !important"},children:e?(0,E.tZ)("div",{sx:{position:"relative",right:"3px"},children:wt||(wt=(0,E.tZ)(Ce.NJ6,{color:"ds.text.inverse.catchy",height:39,width:39}))}):(0,E.tZ)(Ot.T,{height:40,name:"DashlaneLockup",title:t("_common_dashlane_logo_title"),color:"ds.text.inverse.catchy"})})})};n(50801);const Rt="webapp_sidemenu_open_vault_cta",Lt=({isCollapsed:e})=>{const{translate:t}=(0,b.Z)(),[n,a]=(0,r.useState)(!1);return(0,E.BX)("div",{sx:{display:"flex",justifyContent:"center",borderTop:"1px solid",position:"fixed",bottom:"0",borderTopColor:"ds.border.neutral.quiet.idle",backgroundColor:"ds.container.agnostic.inverse.standard",width:e?"96px":"256px"},children:[(0,E.tZ)(D.z,{layout:e?"iconOnly":"iconLeading","aria-label":t(Rt),fullsize:!e,sx:{margin:"20px 25px"},icon:"VaultOutlined",mood:"brand",intensity:"catchy",onClick:()=>{(0,W.nL)(me.rC)},children:t(Rt)}),n?(0,E.tZ)(K.F,{isShown:n,setIsShown:a,isFromVault:!1}):null]})};var Bt=n(77429);const Mt=(0,r.createContext)({}),Pt=({children:e})=>{const[t,n]=(0,r.useState)(!1),[a,i]=(0,r.useState)({lastBillingDetails:void 0,lastAdditionalSeatsDetails:void 0}),s=(0,r.useMemo)((()=>({isAddSeatsSuccessOpen:t,setIsAddSeatsSuccessPageOpen:n,setSeatDetails:i,upsellDetails:a})),[t,a]);return(0,E.tZ)(Mt.Provider,{value:s,children:e})},Ut=()=>(0,r.useContext)(Mt);var Xt;const zt=()=>document.documentElement.clientWidth<1371,Ft=()=>{},qt=r.createContext(Ft),Gt=({children:e,lee:t})=>{const[n,a]=(0,r.useState)(zt()),[s,o]=(0,r.useState)(),{routes:l}=(0,i.Xo)(),c=t.permission.adminAccess,d=c.hasBillingAccess||c.hasFullAccess;(0,r.useEffect)((()=>{const e=(0,O.throttle)((()=>{const e=zt();e&&!n?a(!0):!e&&n&&a(!1)}),100);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[n]);const _=(0,N.kA)(t.globalState),u=(0,E.BX)(M,{children:[s,(0,E.tZ)(ve,{lee:t})]}),m=(0,E.tZ)(Nt,{isCollapsed:n}),p=(0,E.tZ)(At,{isCollapsed:n,permissionChecker:t.permission,routes:l,teamNotifications:_?.notifications}),g=(0,E.tZ)(Lt,{isCollapsed:n}),h=(0,E.tZ)(Bt.Q6,{adminAccess:t.permission.adminAccess}),y=d?Xt||(Xt=(0,E.tZ)(R.XA,{})):null;return(0,E.tZ)(qt.Provider,{value:o,children:(0,E.tZ)(L.AH,{adminAccess:c,children:(0,E.tZ)(Pt,{children:(0,E.tZ)(U,{brand:m,header:u,sideNav:p,bottomButton:g,banner:h,dialog:y,children:e})})})})};var Vt=n(41721);const jt=()=>{const{data:e,status:t}=(0,m.k)(Vt.K,"getTeamOffers",{});return t!==G.rq.Success?null:e};var Wt=n(23914);const Ht=({label:e,value:t})=>(0,E.BX)(c.k,{justifyContent:"flex-end",sx:{padding:"0 10px"},children:[e?(0,E.tZ)("div",{sx:{display:"flex",alignItems:"center",flex:1},children:e}):null,t?(0,E.tZ)("div",{sx:{display:"flex",alignItems:"center"},children:t}):null]});var $t=n(75017);const Kt="team_account_teamplan_changeplan_order_summary_minimum_active_seats_tooltip",Yt=({isAmountAllowed:e,absoluteMinimum:t,relativeMinimum:n})=>{const{translate:a}=(0,b.Z)(),{routes:r}=(0,i.Xo)(),s=e?"ds.text.neutral.quiet":"ds.text.danger.quiet",o=a("team_account_teamplan_changeplan_order_summary_minimum_active_seats",{count:n});return(0,E.tZ)(Ht,{label:(0,E.BX)(c.k,{gap:"5px",children:[(0,E.tZ)(_.n,{textStyle:"ds.body.reduced.regular",color:s,children:o}),(0,E.tZ)(T.JO,{color:s,name:"FeedbackInfoOutlined","data-testid":"FeedbackInfoOutlined",size:"small",tooltip:e?a(Kt):t===n?a("team_account_teamplan_changeplan_order_summary_minimum_seats_absolute_tooltip",{count:t}):a(Kt)})]}),value:e?(0,E.tZ)($t.Q,{size:"small",as:i.rU,to:r.teamMembersRoutePath,replace:!0,children:a("team_account_teamplan_changeplan_order_summary_review_active_seats_link")}):null})};var Qt,Jt,en=n(53092);const tn=({children:e,currency:t,handleClear:n,promoCode:a,promoPrice:i,setIsEditing:s,subTotal:o,isEditing:l})=>{const{translate:d}=(0,b.Z)();return(0,E.BX)(r.Fragment,{children:[(0,E.BX)(c.k,{gap:"4px",fullWidth:!0,alignItems:"center",justifyContent:"space-between",sx:{padding:"0 10px"},children:[(0,E.tZ)(c.k,{alignItems:"center",gap:"4px",children:(0,E.tZ)(_.n,{textStyle:"ds.body.standard.regular",color:"ds.text.positive.quiet",children:d("team_account_teamplan_changeplan_order_summary_promo_code_discount",{discount:i&&o?Math.round(i/o*100):0})})}),(0,E.tZ)("div",{children:i&&t?(0,E.tZ)(_.n,{textStyle:"ds.body.standard.regular",color:"ds.text.positive.quiet",children:d.price(t,(u=i,u?-u/100:0))}):null})]}),e,!l&&(0,E.tZ)(c.k,{gap:"6px",fullWidth:!0,sx:{padding:"0 10px"},children:(0,E.tZ)("div",{sx:{flex:1},children:(0,E.tZ)(en.C,{actions:[(0,E.tZ)(D.z,{"data-testid":"promo_code_button_edit",icon:Qt||(Qt=(0,E.tZ)(T.JO,{name:"ActionEditOutlined"})),intensity:"supershy",layout:"iconOnly",mood:"brand",onClick:()=>s(!0)},"edit"),(0,E.tZ)(D.z,{"data-testid":"promo_code_button_delete",icon:Jt||(Jt=(0,E.tZ)(T.JO,{name:"ActionDeleteOutlined"})),intensity:"supershy",layout:"iconOnly",mood:"brand",onClick:n},"delete")],label:d("team_account_teamplan_changeplan_order_summary_promo_code_label"),labelPersists:!0,mood:"positive",value:a})})})]});var u};var nn;const an=({costData:e,currency:t,currentSpaceTier:n,handleClear:a,isAmountAllowed:i,isEditing:s,promoCode:o,promoPrice:l,selectedOffer:d,setIsEditing:u,setSelectedSeatsQty:m,signalAmountValidHandler:p,subTotal:h,taxCopy:y})=>{const{translate:S}=(0,b.Z)(),x=n===g.lD.Starter?10:e.currentSeats;(0,r.useEffect)((()=>{m(x)}),[x]);const f=n===g.lD.Team||n===g.lD.Starter||n===g.lD.Standard?e.currentActiveSeats>2?e.currentActiveSeats:2:e.currentSeats,v=e.totalSeats===e.currentActiveSeats||!i,C=()=>t&&e?.proratedDiscount?(0,E.tZ)(Ht,{label:(0,E.BX)(c.k,{alignItems:"center",gap:"5px",children:[(0,E.tZ)(_.n,{textStyle:"ds.body.standard.strong",color:"ds.text.neutral.catchy",children:S("team_account_teamplan_changeplan_order_summary_prorated_discount")}),(0,E.tZ)(T.JO,{"aria-label":S("team_account_teamplan_changeplan_order_summary_prorated_discount_tooltip"),color:"ds.text.neutral.quiet",name:"FeedbackInfoOutlined",size:"small",tooltip:S("team_account_teamplan_changeplan_order_summary_prorated_discount_tooltip")})]}),value:(0,E.tZ)(_.n,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",children:S.price(t,e.proratedDiscount/100)})}):null,Z=()=>t?(0,E.tZ)(Ht,{label:(0,E.tZ)(_.n,{textStyle:"ds.body.standard.strong",color:"ds.text.neutral.catchy",children:S(y)}),value:(0,E.tZ)(_.n,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",children:S.price(t,e.tax/100)})}):null;return(0,E.tZ)(r.Fragment,{children:d&&t?(0,E.BX)(r.Fragment,{children:[(0,E.tZ)(Ht,{label:(0,E.tZ)(_.n,{textStyle:"ds.body.standard.strong",color:"ds.text.neutral.catchy",children:S("team_post_trial_checkout_number_of_seats",{totalSeats:e.totalSeats})}),value:(0,E.tZ)("div",{sx:{width:"146px"},children:(0,E.tZ)(Wt.w,{id:"numberOfUsers",inputWidth:"66px",label:"",ariaLabel:S("team_account_teamplan_upgrade_premium_number_of_seats_free_to_paid"),minValue:f,onChange:m,signalAmountValidHandler:p,defaultValue:Math.max(x,10)})})}),v?(0,E.tZ)(Yt,{isAmountAllowed:i,absoluteMinimum:2,relativeMinimum:f}):null,(0,E.tZ)(Ht,{label:(0,E.tZ)(_.n,{textStyle:"ds.body.standard.strong",color:"ds.text.neutral.catchy",children:S("team_account_teamplan_changeplan_order_summary_seats_upgraded",{upgradedSeats:Math.min(e.currentSeats,e.totalSeats)})}),value:(0,E.tZ)(_.n,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",children:S.price(t,e.upgradedSeatsPrice/100)})}),e.addedSeats?(0,E.tZ)(Ht,{label:(0,E.tZ)(_.n,{textStyle:"ds.body.standard.strong",color:"ds.text.neutral.catchy",children:S("team_account_teamplan_changeplan_order_summary_seats_new",{newSeats:e.addedSeats})}),value:(0,E.tZ)(_.n,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",children:S.price(t,e.addedSeatsPrice/100)})}):null,nn||(nn=(0,E.tZ)(z.i,{})),(0,E.tZ)(Ht,{label:(0,E.tZ)(_.n,{textStyle:"ds.body.standard.strong",color:"ds.text.neutral.catchy",children:S("team_account_teamplan_changeplan_order_summary_subtotal")}),value:(0,E.tZ)(_.n,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",children:S.price(t,e.subtotal/100)})}),o?(0,E.BX)(tn,{currency:t,handleClear:a,isEditing:s,promoCode:o,promoPrice:l,setIsEditing:u,subTotal:h,children:[C(),Z()]}):(0,E.BX)(r.Fragment,{children:[C(),Z()]})]}):null})};var rn=n(5063);let sn=function(e){return e.FORM="form",e.SUCCESS="success",e}({}),on=function(e){return e.CREDIT_CARD="credit-card",e.INVOICE="invoice",e}({});var ln=n(10994),cn=n(48372);const dn=({offer:e,selectedSeatsQty:t=0})=>{const n=[...e.priceRanges].sort(((e,t)=>e.startMembers-t.startMembers));return n.reduce(((e,n)=>n.startMembers<t&&n.startMembers>e.startMembers?n:e),n[0])},_n=({offer:e,selectedSeatsQty:t,priceTarget:n="price"})=>dn({offer:e,selectedSeatsQty:t})[n]/(e.duration.includes("y")?12:1),un=({offer:e,selectedSeatsQty:t})=>dn({offer:e,selectedSeatsQty:t}).price*t/12,mn=e=>!!e.name.match(/_team_/u),pn=e=>!!e.name.match(/_business_/u);var gn=n(55525);function hn({total:e,onError:t,initialSkip:n}){const[a,i]=(0,r.useState)(!1),[s,o]=(0,r.useState)(),[l,c]=(0,r.useState)({}),[d,_]=(0,r.useState)(e),u=(0,r.useRef)(e),p=(0,r.useCallback)((0,O.debounce)((e=>{_(e)}),500),[]);(0,r.useEffect)((()=>{l[e]?o(l[e]):e!==u.current&&(u.current=e,p(e))}),[e,l,p]);const g=(0,m.k)(gn.a,"getTaxAmount",{totalPrice:d},{initialSkip:null!=n?n:!!l[d]});return(0,r.useEffect)((()=>{if(g.status===G.rq.Loading)i(!0);else if(g.status===G.rq.Success&&g.data){i(!1);const e={amount:g.data.amount};o(e),c((t=>({...t,[d]:e})))}else g.status===G.rq.Error&&(t?.(),i(!1),o(void 0))}),[g.status,g.data,t,d]),(0,r.useEffect)((()=>()=>{p.cancel()}),[p]),{isLoading:a,taxInformation:s}}var yn=n(20565);const bn=({title:e,children:t,headingLevel:n="h2",sx:a})=>(0,E.tZ)(yn.Z,{sx:{...a},children:(0,E.BX)(c.k,{flexDirection:"column",flexWrap:"nowrap",sx:{height:"100%"},children:[e?"string"==typeof e?(0,E.tZ)(d.X,{as:n,color:"ds.text.neutral.standard",children:e}):e:null,(0,E.tZ)("div",{sx:{flex:1},children:t})]})});var Sn,xn,fn=n(16782);const vn=({selectedOffer:e,currency:t,costData:n})=>{const{translate:a}=(0,b.Z)(),{isLoading:i,taxInformation:r}=hn({total:n.renewalPrice}),{loading:s,billingCountry:o}=w();if(s)return Sn||(Sn=(0,E.tZ)(l.Z,{"data-testid":"order-summary-footer-loader"}));const d="US"===o?"team_account_teamplan_changeplan_order_summary_footer_renewal":"team_account_teamplan_changeplan_order_summary_renewal_vat",m=!i&&void 0!==r?.amount&&r?.amount>0,p=m&&r?.amount?n.renewalPrice+r.amount:void 0,g=m?d:"team_account_teamplan_changeplan_order_summary_footer_header",h=m?p:n.renewalPrice;return(0,E.BX)(c.k,{sx:{flexDirection:"column",gap:"12px",padding:"10px"},children:[e&&t&&h?(0,E.BX)(_.n,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.standard",children:[a(g,{price:a.price(t,h/100),date:a.shortDate(n.renewalDate,fn.qG.ll)}),xn||(xn=(0,E.tZ)("br",{})),a("team_post_trial_checkout_cancel_subscription")]}):null,(0,E.tZ)(_.n,{textStyle:"ds.body.helper.regular",color:"ds.text.neutral.quiet",children:a.markup("team_account_teamplan_changeplan_order_summary_footer_markup",{privacyPolicyUrl:me.Bz,termsUrl:me.sz},{linkTarget:"_blank",onLinkClicked:e=>{e===me.Bz?(0,y.Kz)(new u.UserCallToActionEvent({callToActionList:[u.CallToAction.PrivacyPolicy],chosenAction:u.CallToAction.PrivacyPolicy,hasChosenNoAction:!1})):e===me.sz&&(0,y.Kz)(new u.UserCallToActionEvent({callToActionList:[u.CallToAction.TermsOfService],chosenAction:u.CallToAction.TermsOfService,hasChosenNoAction:!1}))}})})]})},Cn={display:"flex",alignItems:"center",padding:"12px 8px",borderRadius:"8px",justifyContent:"space-between",backgroundColor:"ds.container.agnostic.neutral.quiet"},En=({selectedOffer:e,currency:t,costData:n})=>{const{translate:a}=(0,b.Z)();return e&&t?(0,E.BX)("div",{sx:Cn,"data-testid":"order-summary-plan-name",children:[(0,E.tZ)(_.n,{textStyle:"ds.title.block.small",color:"ds.text.brand.quiet",children:pn(e)?a("team_account_teamplan_changeplan_plans_business_name"):a("team_account_teamplan_changeplan_plans_team_name")}),(0,E.tZ)(_.n,{textStyle:"ds.body.reduced.regular",color:"ds.text.brand.quiet",children:a("team_post_trial_checkout_order_summary_seat_year",{cost:a.price(t,n.seatPrice/100,{notation:"compact"})})})]}):(0,E.tZ)("div",{sx:Cn,children:(0,E.tZ)(_.n,{textStyle:"ds.body.reduced.regular",color:"ds.text.brand.quiet",children:a("team_account_teamplan_changeplan_order_summary_select_plan")})})},Zn="team_account_teamplan_changeplan_order_summary_promo_code_cta",kn=({setShowInput:e})=>{const{translate:t}=(0,b.Z)();return(0,E.tZ)(c.k,{sx:{padding:"0 10px"},children:(0,E.tZ)(D.z,{"aria-label":t(Zn),"data-testid":"promo_code_button_enter",intensity:"supershy",onClick:()=>e?e(!0):null,size:"small",sx:{padding:0},children:(0,E.tZ)(_.n,{textStyle:"ds.body.reduced.link",color:"ds.text.brand.standard",children:t(Zn)})})})};var Dn,Tn=n(93853);const In=({handleCancel:e,hasError:t,isLoading:n,handleSubmit:a,onChange:i,promoCode:r})=>{const{translate:s}=(0,b.Z)();return(0,E.tZ)(c.k,{gap:"6px",fullWidth:!0,sx:{padding:"0 10px"},children:(0,E.tZ)("div",{sx:{flex:1},children:(0,E.tZ)(Tn.n,{actions:t?[(0,E.tZ)(D.z,{"data-testid":"promo_code_button_clear",icon:Dn||(Dn=(0,E.tZ)(T.JO,{name:"ActionClearContentFilled"})),intensity:"supershy",layout:"iconOnly",mood:"danger",onClick:e},"error")]:[(0,E.tZ)(D.z,{disabled:n,"data-testid":"promo_code_button_submit",intensity:"quiet",onClick:a,children:s("team_account_teamplan_changeplan_order_summary_promo_code_apply")},"apply")],autoFocus:!0,"data-testid":"promo_code_input",error:t,feedback:t?{id:"promo_code_error",text:s("team_account_teamplan_changeplan_order_summary_promo_code_invalid_error")}:void 0,label:s("team_account_teamplan_changeplan_order_summary_promo_code_label"),labelPersists:!0,onChange:i?e=>i(e?.target?.value):void 0,value:r})})})},An=({handleCancel:e,handleSubmit:t,hasError:n,isEditing:a,isLoading:i,onChange:r,promoCode:s,setShowInput:o,showInput:l})=>!s||l||a?l||a?(0,E.tZ)(In,{handleCancel:e,hasError:n,isLoading:i,handleSubmit:t,onChange:r,promoCode:s}):(0,E.tZ)(kn,{setShowInput:o}):null;var wn,On,Nn;const Rn=({currency:e,currentSeats:t,currentActiveSeats:n,currentSpaceTier:a,selectedSeatsQty:i,selectedOffer:s,email:o,emailValid:d,onSuccess:p,onError:g,setSelectedSeatsQty:h,setOrderSummaryData:x,handleClickAddBillingInfo:f,paymentMethodType:v,taxCopy:C})=>{const{translate:Z}=(0,b.Z)(),{billingInformation:k}=(0,S.C)({b2c:!1}),T=k?.last4,{changePromoCode:I,cancelPromoCode:A,clearPromoCode:w,currentPromoCode:O,hasError:N,isLoading:R,promoCode:L,setShowInput:B,showInput:M,teamOffers:P,validatePromoCode:U}=function({selectedOffer:e,selectedSeatsQty:t}){const[n,a]=(0,r.useState)(""),[i,s]=(0,r.useState)(""),[o,l]=(0,r.useState)(),[c,d]=(0,r.useState)(!1),[_,u]=(0,r.useState)(!1),[p,g]=(0,r.useState)(!1),[h,y]=(0,r.useState)(t),[b,S]=(0,r.useState)(e),{data:x,status:f}=(0,m.k)(Vt.K,"getTeamOffers",{couponCode:i}),v=(0,r.useCallback)((()=>{if(!i)return!1;if(f===G.rq.Error&&!x)return g(!1),d(!0),u(!0),!1;if(f===G.rq.Loading&&!x)return g(!0),!1;const n=dn({offer:x.businessOffer,selectedSeatsQty:t}),r=n.price!==n.equivalentPrice,s=dn({offer:x.teamOffer,selectedSeatsQty:t}),o=s.price!==s.equivalentPrice;return(e&&pn(e)?r:o)?(g(!1),a(i),l((()=>x)),d(!1),u(!1),!0):(g(!1),d(!0),u(!0),!1)}),[i,f,x,t,e]);return(0,r.useEffect)((()=>{t!==h&&(y(t),v())}),[h,t,v]),(0,r.useEffect)((()=>{e?.name!==b?.name&&(S(e),v())}),[e,b,v]),{cancelPromoCode:()=>{s(c?"":n),d(!1)},changePromoCode:e=>{s(e),c&&d(!1)},clearPromoCode:()=>{a(""),s(""),l(void 0),d(!1)},currentPromoCode:i,hasError:c,isLoading:p,promoCode:n,setIsLoading:g,setShowInput:u,showInput:_,teamOffers:o,validatePromoCode:v}}({selectedOffer:s,selectedSeatsQty:i}),{isSaving:X,costData:F,changeTierMidCycle:q,isTaxLoading:V,isProratedDiscountLoading:j,isMidCycleGracePeriod:H}=function({selectedOffer:e,currentSeats:t,currentActiveSeats:n,selectedSeatsQty:a,discountedTeamOffers:i,promoCode:s,email:o,onSuccess:l,onError:c}){var d,_;const[u,p]=(0,r.useState)(!1),{translate:g}=(0,b.Z)(),{changeTierMidcycle:h}=(0,te.u)(Vt.K),y=!!s,S=!!e&&pn(e),x=!!e&&mn(e),f=i&&e?S?i.businessOffer:x?i.teamOffer:i.starterOffer:e,{isLoading:v,midCycleTierUpgradePrice:C,isMidCycleGracePeriod:E}=function({newTotalNumberOfSeats:e,planName:t,onError:n}){const a=(0,m.k)(Vt.K,"getMidcycleTierUpgradePrice",{newTotalNumberOfSeats:e,newPlan:null!=t?t:""},{initialSkip:!e||!t});switch(a.status){case G.rq.Loading:return{isLoading:!0};case G.rq.Error:return n?.(),{isLoading:!1,isMidCycleGracePeriod:"NoMtuDuringGracePeriod"===a.error.tag};case G.rq.Success:return{isLoading:!1,midCycleTierUpgradePrice:a.data}}}({newTotalNumberOfSeats:a,planName:f?.name}),Z=f?dn({offer:f,selectedSeatsQty:a}):null,k=null!=(d=Z?.equivalentPrice)?d:0,D=null!=(_=Z?.price)?_:0,T=y?k:D,I=(a-t)*T,A=Math.min(t,a)*T,w=a*T,O=w-(void 0!==D?a*D:w),N=void 0!==C?.discountAmount?w+C.discountAmount:void 0,R=N?N-O:N,L=C?.nextBillingDateUnix?(0,ln.Z)(C.nextBillingDateUnix):(0,cn.Z)(new Date,1),{isLoading:B,taxInformation:M}=hn({total:null!=R?R:0}),P=B||void 0===M?.amount?0:M.amount,U=B||void 0===M?.amount||void 0===R?void 0:R+P;return{isSaving:u,changeTierMidCycle:async e=>{if(void 0===R||!M||!f)return void c("Error with retrieving midCycleTierUpgradePrice, tax information or target offer");p((()=>!0));const t=await h({amountToPay:R,taxes:P,planId:f.name,couponCode:e||s,newTotalNumberOfSeats:a,billingContactEmail:""!==o?o:void 0});if(p((()=>!1)),t.error){const e=(e=>{switch(e){case"PaymentMeanIsNotCreditCard":return"The team does not have a credit card payment mean";case"CurrentPlanStartDateInFuture":return"The current plan start date must be in the past";case"ChangeTierMidCycleError":return"Team is ineligible to change tier mid cycle";case"PaymentMeanIsNotInvoice":return"Team Payment mean is not invoice";case"ChangeTierAmountTooExpensive":return"The amount to pay entered is more than 10 times the recommended price";case"ErrorCalculatingTierChange":return"Unable to calculate prorated discount for mid cycle tier change";case"InsufficientAmount":return"Credit Card payment must be zero or more than 50 cents";case"AssignedPlanSameTierAsCurrentPlan":return"The assigned plan tier cannot be the same as the team's current plan";case"SalesTaxMismatch":return"Tax amount sent does not correspond to the supposed taxed amount";case"NotBillingAdmin":return"User is not a billing admin";default:return g("team_account_teamplan_changeplan_error_generic")}})(t.error.tag);c(e)}else l()},isMidCycleGracePeriod:null!=E&&E,isProratedDiscountLoading:v,isTaxLoading:B,costData:{seatPrice:T,currentSeats:t,currentActiveSeats:n,totalSeats:a,addedSeats:a>=t?a-t:0,removedSeats:a<=t?t-a:0,upgradedSeatsPrice:A,addedSeatsPrice:I,subtotal:w,proratedDiscount:C?.discountAmount,tax:P,pretaxTotal:N,promoPrice:O,total:U,renewalPrice:w,renewalDate:L}}}({selectedOffer:s,discountedTeamOffers:P,currentSeats:t,currentActiveSeats:n,selectedSeatsQty:i,promoCode:L,email:o,onSuccess:p,onError:g}),[$,K]=(0,r.useState)(!0),[Y,Q]=(0,r.useState)(!1),J=F?.promoPrice,ee=F?.renewalPrice,ne="invoice"===v?"team_post_trial_checkout_request_purchase_order":"team_account_teamplan_changeplan_order_summary_confirm_and_pay",ae=F.total&&e?(0,E.tZ)(_.n,{textStyle:"ds.specialty.spotlight.small",color:"ds.text.neutral.catchy",children:Z.price(e,F.total/100)}):null;return(0,E.tZ)(bn,{title:Z("team_account_teamplan_changeplan_order_summary_header"),children:(0,E.BX)(c.k,{flexDirection:"column",gap:"16px",sx:{marginTop:"16px"},children:[(0,E.tZ)(En,{selectedOffer:s,currency:e,costData:F}),(0,E.tZ)(an,{costData:F,currency:e,currentSpaceTier:a,handleClear:()=>{Q(!1),w()},isAmountAllowed:$,isEditing:Y,promoCode:L,promoPrice:J,selectedOffer:s,setIsEditing:Q,setSelectedSeatsQty:h,signalAmountValidHandler:e=>{K(e)},subTotal:ee,taxCopy:C}),s&&e?(0,E.tZ)(An,{handleCancel:()=>{Q(!1),A()},handleSubmit:()=>{Q(!1),U()},hasError:N,isEditing:Y,isLoading:R,onChange:I,promoCode:O,setShowInput:B,showInput:M}):null,wn||(wn=(0,E.tZ)(z.i,{})),(0,E.tZ)(Ht,{label:(0,E.tZ)(_.n,{textStyle:"ds.body.standard.strong",color:"ds.text.neutral.catchy",children:Z("team_account_teamplan_total")}),value:!e||V||j||!s?On||(On=(0,E.tZ)(l.Z,{size:23,mood:"neutral"})):ae}),X?(0,E.tZ)(D.z,{size:"large",sx:{width:"100%"},type:"button",disabled:!0,children:Nn||(Nn=(0,E.tZ)(l.Z,{}))}):(0,E.BX)(r.Fragment,{children:[H&&(0,E.tZ)(rn.k,{title:Z("team_account_teamplan_changeplan_error_mtu_grace"),mood:"danger"}),(0,E.tZ)(D.z,{"data-testid":"btn-confirm-and-pay",size:"large",sx:{width:"100%"},type:"button",disabled:!s||!d||R||!$||H||v===on.CREDIT_CARD&&!T,onClick:()=>"invoice"===v?((0,y.Kz)(new u.UserClickEvent({button:u.Button.RequestPurchaseOrder})),void(0,W.Yo)(me.nq)):(async()=>{(!N&&L===O||await U())&&((0,y.Kz)(new u.UserClickEvent({clickOrigin:u.ClickOrigin.OrderSummary,button:u.Button.ConfirmUpgrade})),q(O),x(F))})(),children:Z(ne)})]}),T?(0,E.tZ)(vn,{selectedOffer:s,currency:e,costData:F}):(0,E.BX)(c.k,{flexDirection:"row",justifyContent:"space-between",alignItems:"baseline",sx:{marginTop:"8px"},children:[(0,E.tZ)(_.n,{textStyle:"ds.body.standard.regular",color:"ds.text.warning.quiet",children:Z(i>20?"team_post_trial_checkout_payment_method_required":"team_post_trial_checkout_credit_card_required")}),(0,E.tZ)($t.Q,{color:"ds.text.brand.standard",isExternal:!0,onClick:f,sx:{marginRight:"8px"},children:Z("team_post_trial_checkout_add_credit_card")})]})]})})},Ln=()=>{const{translate:e}=(0,b.Z)(),t=(0,Xe.Y)(),n=jt();if(!n||t.status!==s.rq.Success)return{hasLimitedOffer:!1};const a=!(0,Ue.NG)(t.data),{businessOffer:i}=n,r=_n({offer:i}),o=_n({offer:i,priceTarget:"equivalentPrice"});return{hasLimitedOffer:a&&r!==o,translatedPrice:e.price(i.currency,r/100,{notation:"compact"}),translatedEquivalentPrice:e.price(i.currency,o/100,{notation:"compact"})}};var Bn,Mn,Pn=n(56341);const Un=({plan:e,handleSelectClick:t,selected:n})=>{const{translate:a}=(0,b.Z)();if(!e)return null;const{currentPlan:i,currentTrial:r,limitedOffer:s,heading:o,price:d,equivalentPrice:u,planName:m,footer:p,priceDescription1:g,priceDescription2:h,features:y,infobox:S,showRecommendedBadge:x,isStandardPlanRestricted:f}=e;return(0,E.BX)(c.k,{flexDirection:"column",sx:{minHeight:"480px",display:"flex",flexDirection:"column",borderRadius:"4px",border:"1px solid "+(i||f?"transparent":n?"ds.border.brand.standard.active":"ds.border.neutral.quiet.idle"),flexGrow:"1",flexShrink:0,width:"188px",backgroundColor:i||f?"ds.container.expressive.neutral.supershy.hover":null,padding:"16px",gap:"16px"},children:[(0,E.BX)(c.k,{flexDirection:"column",gap:"16px",children:[(0,E.BX)(c.k,{flexDirection:"column",gap:"4px",children:[(0,E.tZ)(_.n,{"data-testid":`plan-heading-${m}`,textStyle:"ds.body.standard.strong",children:a(o.key)}),(0,E.BX)("div",{sx:{minHeight:"16px"},children:[i&&(0,E.tZ)(pe.C,{label:a("team_account_teamplan_changeplan_plans_plan_current")}),r&&(0,E.tZ)(pe.C,{label:a("team_account_teamplan_changeplan_plans_plan_current_trial")}),x&&(0,E.tZ)(pe.C,{mood:"brand",intensity:"catchy",label:a("team_account_teamplan_changeplan_plans_plan_recommended")}),s&&(0,E.tZ)(pe.C,{mood:"brand",intensity:"catchy",label:a("team_account_teamplan_changeplan_plans_plan_limited_offer")})]})]}),(0,E.BX)(c.k,{flexDirection:"column",children:[(0,E.BX)(c.k,{gap:"4px",children:["string"==typeof d?(0,E.tZ)(_.n,{color:i?"ds.text.neutral.quiet":"ds.text.neutral.catchy",textStyle:"ds.specialty.spotlight.medium",children:d}):null===d?Bn||(Bn=(0,E.tZ)(l.Z,{size:44,mood:"neutral"})):(0,E.tZ)(_.n,{textStyle:"ds.specialty.spotlight.small",color:i?"ds.text.neutral.quiet":"ds.text.neutral.catchy",sx:{marginBottom:"10px"},children:a(d.key)}),u&&(0,E.BX)(_.n,{textStyle:"ds.title.block.medium",color:"ds.text.neutral.quiet",sx:{whiteSpace:"break-spaces"},children:[a("team_account_teamplan_changeplan_plans_previous_price"),Mn||(Mn=(0,E.tZ)("br",{})),(0,E.tZ)("span",{sx:{textDecoration:"line-through"},children:u})]})]}),(0,E.BX)(c.k,{flexDirection:"column",sx:{height:"48px"},children:[(0,E.tZ)(_.n,{textStyle:"ds.body.reduced.strong",color:"ds.text.neutral.quiet",children:a(g.key,g.variables)}),(0,E.tZ)(_.n,{textStyle:"ds.body.reduced.strong",color:"ds.text.neutral.quiet",children:a(h.key,h.variables)})]})]})]}),S?(0,E.tZ)(rn.k,{mood:i?"neutral":"brand",title:a(S.key),description:S.link?(0,E.tZ)($t.Q,{href:S.link,mood:"neutral",isExternal:!0,children:a("team_account_teamplan_changeplan_plans_learn_more")}):null}):null,f?(0,E.tZ)(rn.k,{mood:"neutral",title:a("team_post_trial_checkout_pricing_tile_standard_plan_restricted_infobox")}):null,f?null:n?(0,E.tZ)(D.z,{disabled:!0,mood:"brand",intensity:"quiet",size:"small",type:"button",fullsize:!0,"data-testid":`btn-${m}-selected`,layout:"iconLeading",icon:"CheckmarkOutlined",children:a("team_account_teamplan_changeplan_plans_selected")}):t?(0,E.tZ)(D.z,{mood:"brand",intensity:"quiet",size:"small",onClick:t,fullsize:!0,"data-testid":`btn-${m}-select`,children:a("team_account_teamplan_changeplan_plans_select")}):"businessPlus"===m?(0,E.tZ)(D.z,{mood:"brand",intensity:"quiet",size:"small",onClick:()=>{(0,W.Yk)(me.q_,{medium:"checkout",campaign:"business-plus-upgrade",source:"product",content:"trial"})},fullsize:!0,children:a("team_post_trial_checkout_plan_selection_biz_plus_card_button_text")}):S?null:(0,E.tZ)("div",{sx:{height:"32px",width:"100%"}}),(0,E.tZ)(c.k,{flexDirection:"column",gap:"8px",children:y.map((({key:e,icon:t,variables:n,loading:r})=>(0,E.BX)(c.k,{sx:{display:"flex",alignItems:"center",gap:"9px",flexWrap:"nowrap",strong:{color:i?null:"ds.text.neutral.catchy"}},children:[(0,E.tZ)("div",{sx:{width:"10px"},children:(0,E.tZ)(T.JO,{size:"xsmall",color:"ds.text.neutral.catchy",name:"check"===t?"CheckmarkOutlined":"ActionAddOutlined"})}),r?(0,E.tZ)(c.k,{alignItems:"center",justifyContent:"center",sx:{flexGrow:"1"},children:(0,E.tZ)(l.Z,{size:32,color:Pn.O.lightTheme.ds.text.neutral.catchy})}):(0,E.tZ)(_.n,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.quiet",children:e.includes("markup")?a.markup(e,n):a(e,n)})]},e)))}),s?(0,E.tZ)(rn.k,{mood:"brand",title:a("team_account_teamplan_changeplan_plans_limited_price_infobox")}):null,p?(0,E.tZ)(c.k,{alignItems:"center",gap:"9px",sx:{paddingLeft:"20px"},children:(0,E.tZ)(_.n,{textStyle:"ds.body.reduced.strong",color:"ds.text.neutral.quiet",children:p.key.includes("markup")?a.markup(p.key):a(p.key)})}):null]})},Xn={standard:{planName:"standard",price:null,heading:{key:"manage_subscription_plan_name_standard"},priceDescription1:{key:"team_post_trial_checkout_plan_selection_standard_card_seats"},priceDescription2:{key:"team_account_teamplan_changeplan_plans_billed_anually"},features:[{icon:"check",key:"team_post_trial_checkout_plan_selection_standard_card_feature_coverage"},{icon:"check",key:"team_account_teamplan_changeplan_plans_passwords"},{icon:"check",key:"team_account_teamplan_changeplan_plans_collections"},{icon:"check",key:"team_account_teamplan_changeplan_plans_admin_console"},{icon:"check",key:"team_post_trial_checkout_plan_selection_standard_card_feature_health_score"},{icon:"check",key:"team_account_teamplan_changeplan_plans_standard_activity_logs"},{icon:"check",key:"team_account_teamplan_changeplan_plans_account_recovery"},{icon:"check",key:"team_audit_log_category_dark_web_monitoring"}]},business:{planName:"business",price:null,heading:{key:"team_account_teamplan_changeplan_plans_business_name_V2"},priceDescription1:{key:"team_account_teamplan_changeplan_plans_per_seat_month"},priceDescription2:{key:"team_account_teamplan_changeplan_plans_billed_anually"},features:[{key:"team_post_trial_checkout_plan_selection_biz_card_feature_everything_in_standard_markup",icon:"check"},{key:"team_account_teamplan_changeplan_plans_unlimited_seats"},{key:"team_post_trial_checkout_plan_selection_biz_card_feature_sharing"},{key:"team_account_teamplan_changeplan_plans_phishing"},{key:"team_account_teamplan_changeplan_plans_sso_integration"},{key:"team_account_teamplan_changeplan_plans_scim_provisioning"},{key:"team_post_trial_checkout_plan_selection_biz_card_feature_siem"},{key:"team_account_teamplan_changeplan_plans_activity_logs"},{key:"team_post_trial_checkout_plan_selection_biz_card_feature_policies"},{key:"team_account_teamplan_changeplan_plans_vpn_for_wifi_protection"},{key:"team_account_teamplan_changeplan_plans_free_friends_family_plan"}]}},zn=(e={})=>({...Xn,...e}),Fn={standard:[{icon:"check",key:"team_account_teamplan_changeplan_plans_coverage"},{icon:"check",key:"team_account_teamplan_changeplan_plans_passwords"},{icon:"check",key:"team_account_teamplan_changeplan_plans_collections"},{icon:"check",key:"team_account_teamplan_changeplan_plans_admin_console"},{icon:"check",key:"team_account_teamplan_changeplan_plans_password_dashboard"},{icon:"check",key:"team_account_teamplan_changeplan_plans_standard_activity_logs"},{icon:"check",key:"team_account_teamplan_changeplan_plans_account_recovery"},{icon:"check",key:"team_audit_log_category_dark_web_monitoring"}],standardUpgradeBusiness:[{key:"team_account_teamplan_changeplan_plans_everything_in_standard_markup",icon:"check"},{icon:"check",key:"team_account_teamplan_changeplan_plans_unlimited_seats"},{icon:"check",key:"team_account_teamplan_changeplan_plans_sharing_controls"},{icon:"check",key:"team_account_teamplan_changeplan_plans_phishing"},{icon:"check",key:"team_account_teamplan_changeplan_plans_sso_integration"},{icon:"check",key:"team_account_teamplan_changeplan_plans_scim_provisioning"},{icon:"check",key:"team_account_teamplan_changeplan_plans_siem"},{icon:"check",key:"team_account_teamplan_changeplan_plans_advanced_activity_logs"},{icon:"check",key:"team_account_teamplan_changeplan_plans_security_policies"},{icon:"check",key:"team_account_teamplan_changeplan_plans_vpn_for_wifi_protection"},{icon:"check",key:"team_account_teamplan_changeplan_plans_free_family"}],starter:[{icon:"check",key:"team_account_teamplan_changeplan_plans_unlimited_passwords"},{icon:"check",key:"team_account_teamplan_changeplan_plans_secure_sharing"},{icon:"check",key:"team_account_teamplan_changeplan_plans_business_and_personal_spaces"},{icon:"check",key:"team_account_teamplan_changeplan_plans_dark_web_insights"}],team:[{key:"team_account_teamplan_changeplan_plans_team_unlimited_users",icon:"check"},{key:"team_account_teamplan_changeplan_plans_team_security_dashboard",icon:"check"},{key:"team_account_teamplan_changeplan_plans_team_policy_management",icon:"check"},{key:"team_account_teamplan_changeplan_plans_team_advanced_reporting",icon:"check"},{key:"team_account_teamplan_changeplan_plans_team_group_sharing",icon:"check"},{key:"team_account_teamplan_changeplan_plans_team_active_directory_integration",icon:"check"},{key:"team_account_teamplan_changeplan_plans_team_dark_web_insights",icon:"check"},{key:"team_account_teamplan_changeplan_plans_team_vpn_via_hotspot_shield",icon:"check"},{key:"team_account_teamplan_changeplan_plans_team_activity_logs",icon:"check"},{key:"team_account_teamplan_changeplan_plans_team_real_time_phishing_alerts",icon:"check"}],teamUpgradeBusiness:[{key:"team_account_teamplan_changeplan_plans_everything_in_team_markup",icon:"check"},{key:"team_account_teamplan_changeplan_plans_single_sign_on_integration",icon:"check"},{key:"team_account_teamplan_changeplan_plans_scim_provisioning",icon:"check"},{key:"team_account_teamplan_changeplan_plans_siem_integration",icon:"check"},{key:"team_account_teamplan_changeplan_plans_prohibit_sharing_outside_company",icon:"check"},{key:"team_account_teamplan_changeplan_plans_secrets_management",icon:"check"},{key:"team_account_teamplan_changeplan_plans_free_friends_family_plan",icon:"check"}],business:[{key:"team_account_teamplan_changeplan_plans_everything_in_starter_markup",icon:"check"},{icon:"check",key:"team_account_teamplan_changeplan_plans_unlimited_seats"},{icon:"check",key:"team_account_teamplan_changeplan_plans_sso_integration"},{icon:"check",key:"team_account_teamplan_changeplan_plans_scim_provisioning"},{icon:"check",key:"team_account_teamplan_changeplan_plans_activity_logs"},{icon:"check",key:"team_account_teamplan_changeplan_plans_enterprise"},{icon:"check",key:"team_account_teamplan_changeplan_plans_free_friends_family_plan"},{icon:"check",key:"team_account_teamplan_changeplan_plans_phone_support"},{icon:"check",key:"team_account_teamplan_changeplan_plans_vpn_for_wifi_protection"},{icon:"check",key:"team_account_teamplan_changeplan_plans_phishing"}],businessPlus:[{key:"team_post_trial_checkout_plan_selection_biz_plus_card_feature_everything_markup",icon:"check"},{key:"team_post_trial_checkout_plan_selection_biz_plus_card_feature_hundred_plus",icon:"check"},{key:"team_post_trial_checkout_plan_selection_biz_plus_card_feature_nudges_markup",icon:"check"},{key:"team_post_trial_checkout_plan_selection_biz_plus_card_feature_risk_detection_markup",icon:"check"},{key:"team_post_trial_checkout_plan_selection_biz_plus_card_feature_deployment",icon:"check"},{key:"team_post_trial_checkout_plan_selection_biz_plus_card_feature_security",icon:"check"},{key:"team_post_trial_checkout_plan_selection_biz_plus_card_feature_onboarding",icon:"check"}]},qn=(e,t,n)=>{const{translate:a}=(0,b.Z)(),i=e?.businessOffer?.currency,{businessSeatPrice:r,starterSeatPrice:s,teamSeatPrice:o,standardMonthlyPrice:l,standardYearlyPrice:c}=(e=>({businessSeatPrice:e?.businessOffer?_n({offer:e.businessOffer}):null,starterSeatPrice:e?.starterOffer?_n({offer:e.starterOffer}):null,teamSeatPrice:e?.teamOffer?_n({offer:e.teamOffer}):null,standardMonthlyPrice:e?.entryLevelOffer?un({offer:e.entryLevelOffer,selectedSeatsQty:10}):null,standardYearlyPrice:e?.entryLevelOffer?(({offer:e,selectedSeatsQty:t})=>dn({offer:e,selectedSeatsQty:t}).price*t)({offer:e.entryLevelOffer,selectedSeatsQty:10}):null}))(e),d=(_=e?.starterOffer,_?_.priceRanges[1].startMembers-1:0);var _;const u=((e,t,n,a)=>{const{currency:i,businessSeatPrice:r,starterSeatPrice:s,teamSeatPrice:o,standardMonthlyPrice:l,standardYearlyPrice:c,starterSeats:d,monthlyStarterPrice:_}=e,u=e=>((e,t,n)=>e&&t?n.price(t,e/100,{notation:e/100%1==0?"compact":"standard"}):null)(e,i,t);return{standard:{...Xn.standard,currentPlan:a===g.lD.Standard,price:u(l),priceDescription1:{key:"team_account_teamplan_changeplan_plans_per_month_members"},priceDescription2:{key:"team_account_teamplan_changeplan_plans_billed_at_annually",variables:{yearlyPrice:u(c)}},infobox:{key:"team_account_teamplan_changeplan_plans_upgrade_infobox"},features:[...Fn.standard]},standardUpgradeBusiness:{planName:"business",price:u(r),heading:{key:"team_account_teamplan_changeplan_plans_business_name_V2"},priceDescription1:{key:"team_account_teamplan_changeplan_plans_per_seat_month"},priceDescription2:{key:"team_account_teamplan_changeplan_plans_billed_anually"},features:[...Fn.standardUpgradeBusiness]},team:{currentPlan:!0,planName:"team",price:u(o),heading:{key:"team_account_teamplan_changeplan_plans_name_V2"},priceDescription1:{key:"team_account_teamplan_changeplan_plans_per_seat_month"},priceDescription2:{key:"team_account_teamplan_changeplan_plans_billed_anually"},infobox:{key:"team_account_teamplan_changeplan_plans_teams_infobox",link:"https://support.dashlane.com/hc/en-us/articles/18804218734354-FAQ-about-the-changes-to-Team-plan-pricing"},features:[...Fn.team]},teamUpgradeBusiness:{planName:"business",price:u(r),heading:{key:"team_account_teamplan_changeplan_plans_business_name_V2"},priceDescription1:{key:"team_account_teamplan_changeplan_plans_per_seat_month"},priceDescription2:{key:"team_account_teamplan_changeplan_plans_billed_anually"},features:[...Fn.teamUpgradeBusiness]},starter:{currentPlan:!0,planName:"starter",price:u(s),heading:{key:"team_account_teamplan_changeplan_plans_starter_name"},priceDescription1:{key:"team_account_teamplan_changeplan_plans_per_seat_month"},priceDescription2:{key:"team_account_teamplan_changeplan_plans_billed_monthly_at",variables:{numberSeats:d,monthlyPrice:u(_)}},features:[{key:"team_account_teamplan_changeplan_plans_seats_flat_rate_markup",icon:"check",loading:!s,variables:{numberSeats:d,monthlyPrice:u(_)}},...Fn.starter],footer:{key:"team_account_teamplan_changeplan_plans_starter_upgrade_markup"}},business:{...Xn.business,price:u(r),equivalentPrice:n.hasLimitedOffer&&r&&i?n.translatedEquivalentPrice:null,limitedOffer:n.hasLimitedOffer,features:[...Fn.business]},businessPlus:{planName:"businessPlus",price:{key:"team_post_trial_checkout_plan_selection_biz_plus_card_price"},heading:{key:"team_account_teamplan_omnix"},priceDescription1:{key:"team_post_trial_checkout_plan_selection_biz_plus_card_coverage"},priceDescription2:{key:"team_account_teamplan_changeplan_plans_billed_anually"},features:[...Fn.businessPlus]}}})({currency:i,businessSeatPrice:r,starterSeatPrice:s,teamSeatPrice:o,standardMonthlyPrice:l,standardYearlyPrice:c,starterSeats:d,monthlyStarterPrice:e?.starterOffer&&s?d*s:0},a,n,t);return zn(u)},Gn=({selectedOffer:e,handleSelection:t,teamOffers:n,currentSpaceTier:a})=>{const{translate:i}=(0,b.Z)(),s=Ln(),o=qn(n,a,s),l=a===g.lD.Starter,d=a===g.lD.Standard,_=a===g.lD.Team,{businessOffer:u}=n;return(0,E.tZ)(bn,{headingLevel:"h1",title:i("team_account_teamplan_changeplan_plans"),children:(0,E.tZ)(c.k,{gap:"16px",flexWrap:"nowrap",sx:{paddingTop:"16px"},children:d&&o.standardUpgradeBusiness?(0,E.BX)(r.Fragment,{children:[(0,E.tZ)(Un,{plan:o.standard}),o.standardUpgradeBusiness&&(0,E.tZ)(Un,{plan:o.standardUpgradeBusiness,handleSelectClick:()=>t(u),selected:!!e&&e.name===u.name}),o.businessPlus&&(0,E.tZ)(Un,{plan:o.businessPlus})]}):l&&o.starter?(0,E.BX)(r.Fragment,{children:[o.starter&&(0,E.tZ)(Un,{plan:o.starter}),(0,E.tZ)(Un,{plan:o.business,handleSelectClick:()=>t(u),selected:!!e&&e.name===u.name})]}):_&&o.team?(0,E.BX)(r.Fragment,{children:[o.team&&(0,E.tZ)(Un,{plan:o.team}),o.teamUpgradeBusiness&&(0,E.tZ)(Un,{plan:o.teamUpgradeBusiness,handleSelectClick:()=>t(u),selected:!!e&&e.name===u.name}),o.businessPlus&&(0,E.tZ)(Un,{plan:o.businessPlus})]}):(0,E.BX)(r.Fragment,{children:[(0,E.tZ)(Un,{plan:o.standard}),(0,E.tZ)(Un,{plan:o.business,handleSelectClick:()=>t(u),selected:!!e&&e.name===u.name}),o.businessPlus&&(0,E.tZ)(Un,{plan:o.businessPlus})]})})})};var Vn,jn=n(80610),Wn=n(48827),Hn=n(10051);const $n=({email:e,emailValid:t,setEmail:n,setEmailValid:a})=>{const{translate:i}=(0,b.Z)(),s=(0,Wn.G)(),[o,l]=r.useState(!1);return s?.email?(0,E.BX)(bn,{title:i("team_account_teamplan_changeplan_billing_contact_header"),children:[Vn||(Vn=(0,E.tZ)("br",{})),(0,E.tZ)(_.n,{color:"ds.text.neutral.quiet",className:"automation-tests-tac-billing",children:i.markup("team_account_teamplan_changeplan_billing_contact_copy_markup",{billContactEmail:s.email})}),(0,E.tZ)("div",{style:{margin:"20px 0px"},children:(0,E.tZ)(jn.X,{"data-testid":"additionalEmailCheckbox",label:i("team_account_teamplan_changeplan_billing_contact_checkbox_label"),checked:o,onChange:e=>{n(""),a(!0),l(e.currentTarget.checked)}})}),o?(0,E.tZ)(ee.o,{"data-testid":"additionalEmailInput",type:"text",onChange:e=>n(e.currentTarget.value),onBlur:e=>(e=>{(0,Hn.vV)(e.currentTarget.value)?a(!0):a(!1)})(e),value:e,feedback:t?void 0:{id:"error-message",text:i("team_account_teamplan_changeplan_billing_contact_input_warning"),type:"error"}}):null]}):null};var Kn,Yn,Qn,Jn,ea,ta;const na=({targetPlan:e})=>{const{translate:t}=(0,b.Z)(),{data:n}=(({targetPlan:e})=>{const{routes:t}=(0,i.Xo)(),n={DIRECTORY_SYNC:`${t.teamIntegrationsRoutePath}${a.Nr.DIRECTORY_SYNC}`,POLICIES:`${t.teamSettingsRoutePath}${a.B9.POLICIES}`,SSO:`${t.teamIntegrationsRoutePath}${a.Nr.SSO}`};return{data:{team:{header:"team_account_teamplan_changeplan_success_team_header",description:"team_account_teamplan_changeplan_success_team_description",alert:"team_account_teamplan_changeplan_success_team_alert",features:[{header:"team_account_teamplan_changeplan_success_features_vpn_header",description:"team_account_teamplan_changeplan_success_features_vpn_description",icon:Kn||(Kn=(0,E.tZ)(Ce.Qut,{size:24})),actions:[{mood:"brand",intensity:"catchy",content:"team_account_teamplan_changeplan_success_features_actions_turn_on_vpn_access",link:n.POLICIES},{external:!0,mood:"neutral",intensity:"quiet",content:"team_account_teamplan_changeplan_success_features_actions_see_setup_guide",link:"https://support.dashlane.com/hc/articles/360000037900#title1"}]},{header:"team_account_teamplan_changeplan_success_features_protection_header",description:"team_account_teamplan_changeplan_success_features_protection_description",icon:Yn||(Yn=(0,E.tZ)(Ce.c6E,{size:24})),actions:[{mood:"brand",intensity:"catchy",content:"team_account_teamplan_changeplan_success_features_actions_add_seats",link:`${t.teamAccountRoutePath}?showSeatsDialog=true`}]}]},business:{header:"team_account_teamplan_changeplan_success_business_header",description:"team_account_teamplan_changeplan_success_business_description",alert:"team_account_teamplan_changeplan_success_business_alert",features:[{header:"team_account_teamplan_changeplan_success_sso_header",description:"team_account_teamplan_changeplan_success_sso_copy",icon:Qn||(Qn=(0,E.tZ)(Ce.oEX,{size:24})),actions:[{mood:"brand",intensity:"catchy",content:"team_account_teamplan_changeplan_success_features_actions_start_setup",link:n.SSO},{external:!0,mood:"neutral",intensity:"quiet",content:"team_account_teamplan_changeplan_success_features_actions_see_setup_guide",link:"https://support.dashlane.com/hc/articles/360015973719-Set-up-SSO-and-SCIM-with-Azure-AD"}]},{header:"team_account_teamplan_changeplan_success_features_scim_header",description:"team_account_teamplan_changeplan_success_features_scim_description",icon:Jn||(Jn=(0,E.tZ)(Ce.kpp,{size:24})),actions:[{mood:"brand",intensity:"catchy",content:"team_account_teamplan_changeplan_success_features_actions_start_setup",link:n.DIRECTORY_SYNC},{external:!0,mood:"neutral",intensity:"quiet",content:"team_account_teamplan_changeplan_success_features_actions_see_setup_guide",link:"https://support.dashlane.com/hc/articles/360015973719#h_01FTXPSRCV3CY1QVY1B5S5TD0J"}]},{header:"team_account_teamplan_changeplan_success_features_friends_and_family_header",description:"team_account_teamplan_changeplan_success_features_friends_and_family_description",icon:ea||(ea=(0,E.tZ)(Ce.c6E,{size:24})),actions:[{external:!0,mood:"brand",intensity:"catchy",content:"team_account_teamplan_changeplan_success_features_actions_learn_more",link:"https://www.dashlane.com/plans/family"}]},{header:"team_account_teamplan_changeplan_success_features_phone_support_header",description:"team_account_teamplan_changeplan_success_features_phone_support_description",icon:ta||(ta=(0,E.tZ)(Ce.qWc,{size:24})),actions:[{external:!0,mood:"brand",intensity:"catchy",content:"team_account_teamplan_changeplan_success_features_actions_schedule_a_call",link:"https://calendly.com/dashlane-support/call_back_form",logEvent:new u.UserCallToActionEvent({callToActionList:[u.CallToAction.ContactPhoneSupport],chosenAction:u.CallToAction.ContactPhoneSupport,hasChosenNoAction:!1})}]}]}}[e]}})({targetPlan:e}),{alert:s,show:o}=(0,Ce.VYq)({message:t(n.alert),severity:Ce.BLW.SUCCESS,size:Ce.k3y.SMALL,dismissDelay:5e3});return(0,r.useEffect)((()=>{o()}),[]),(0,E.BX)(r.Fragment,{children:[(0,E.tZ)("div",{style:{bottom:"12px",position:"absolute",marginLeft:"auto",marginRight:"auto",left:0,right:0,width:"600px"},children:s}),(0,E.BX)(bn,{title:t(n.header),sx:{width:"632px",padding:"32px",borderRadius:"8px"},children:[(0,E.tZ)("div",{style:{marginTop:"8px"},children:(0,E.tZ)(Ce.nvN,{size:"medium",color:Pn.O.lightTheme.ds.text.neutral.quiet,children:t(n.description)})}),(0,E.tZ)(c.k,{sx:{marginTop:"32px",display:"flex",flexDirection:"column",borderBottom:`1px solid ${Pn.O.lightTheme.ds.border.neutral.quiet.idle}`},children:n.features.map((e=>(0,E.tZ)(c.k,{flexDirection:"column",sx:{display:"flex",flexDirection:"column",borderTop:`1px solid ${Pn.O.lightTheme.ds.border.neutral.quiet.idle}`,padding:"32px 0"},children:(0,E.BX)(c.k,{gap:"16px",flexWrap:"nowrap",children:[(0,E.tZ)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:"40px",height:"40px",borderRadius:"8px",backgroundColor:Pn.O.lightTheme.ds.container.expressive.brand.quiet.idle},children:e.icon}),(0,E.BX)(c.k,{flexDirection:"column",gap:"8px",children:[(0,E.tZ)(Ce.nvN,{bold:!0,color:Pn.O.lightTheme.ds.text.neutral.catchy,children:t(e.header)}),(0,E.tZ)(Ce.nvN,{size:"x-small",color:Pn.O.lightTheme.ds.text.neutral.quiet,children:t(e.description)}),(0,E.tZ)(c.k,{gap:"8px",children:e.actions.map((e=>e.external?(0,E.tZ)("a",{href:e.link,target:"_blank",rel:"noopener noreferrer",children:(0,E.tZ)(D.z,{mood:e.mood,intensity:e.intensity,size:"small",type:"button",onClick:()=>{e.logEvent&&(0,y.Kz)(e.logEvent)},children:t(e.content)})},e.content):(0,E.tZ)(i.rU,{to:e.link,children:(0,E.tZ)(D.z,{mood:e.mood,intensity:e.intensity,size:"small",type:"button",children:t(e.content)})},e.content)))})]})]})},e.header)))})]})]})};var aa,ia,ra,sa=n(7973);const oa=({currency:e,selectedOffer:t,costData:n})=>{const{translate:a}=(0,b.Z)(),{loading:i,billingCountry:r}=w();if(i)return aa||(aa=(0,E.tZ)(l.Z,{}));const s="US"===r?"team_account_teamplan_changeplan_order_summary_tax":"team_account_teamplan_vat";return(0,E.BX)(c.k,{flexDirection:"column",gap:"24px",sx:{borderStyle:"solid",borderColor:"ds.border.neutral.quiet.idle",borderWidth:"1px",borderRadius:"8px",backgroundColor:"ds.container.agnostic.neutral.supershy",padding:"24px"},children:[(0,E.BX)(c.k,{justifyContent:"space-between",alignItems:"center",children:[(0,E.tZ)(d.X,{as:"h2",textStyle:"ds.title.section.medium",children:a("team_account_teamplan_changeplan_order_summary_header")}),(0,E.tZ)(_.n,{textStyle:"ds.body.helper.regular",color:"ds.text.neutral.catchy",children:(0,sa.Z)(new Date,"MM/dd/yyyy")})]}),(0,E.tZ)(En,{selectedOffer:t,currency:e,costData:n}),(0,E.BX)(c.k,{flexDirection:"column",gap:"16px",children:[(0,E.tZ)(_.n,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.catchy",sx:{padding:"0 10px",fontWeight:"light"},children:a("team_account_teamplan_changeplan_order_summary_seats_total",{totalSeats:n.totalSeats})}),(0,E.tZ)(Ht,{label:(0,E.tZ)(_.n,{color:"ds.text.neutral.standard",children:a("team_account_teamplan_changeplan_order_summary_subtotal")}),value:e?(0,E.tZ)(_.n,{color:"ds.text.neutral.standard",children:a.price(e,n.subtotal/100)}):null}),n.tax&&e?(0,E.tZ)(Ht,{label:(0,E.tZ)(_.n,{color:"ds.text.neutral.quiet",children:a(s)}),value:(0,E.tZ)(_.n,{color:"ds.text.neutral.quiet",children:a.price(e,n.tax/100)})}):null,n?.proratedDiscount?(0,E.tZ)(Ht,{label:(0,E.BX)(c.k,{alignItems:"center",gap:"5px",children:[(0,E.tZ)(_.n,{color:"ds.text.neutral.quiet",children:a("team_account_teamplan_changeplan_order_summary_prorated_discount")}),(0,E.tZ)(Ce.ua7,{content:a("team_account_teamplan_changeplan_order_summary_prorated_discount_tooltip"),children:ia||(ia=(0,E.tZ)(T.JO,{name:"FeedbackInfoOutlined",size:"large",color:"ds.text.neutral.quiet"}))})]}),value:e?(0,E.tZ)(_.n,{color:"ds.text.neutral.quiet",children:a.price(e,n.proratedDiscount/100)}):null}):null,n?.promoPrice?(0,E.tZ)(Ht,{label:(0,E.tZ)(_.n,{color:"ds.text.neutral.quiet",children:a("team_account_teamplan_upgrade_premium_coupon")}),value:e?(0,E.BX)(_.n,{color:"ds.text.neutral.quiet",children:["-",a.price(e,n.promoPrice/100)]}):null}):null,ra||(ra=(0,E.tZ)(z.i,{})),"number"==typeof n?.total?(0,E.tZ)(Ht,{label:(0,E.tZ)(_.n,{textStyle:"ds.title.block.medium",children:a("team_account_teamplan_total")}),value:e?(0,E.tZ)(_.n,{textStyle:"ds.title.block.medium",children:a.price(e,n.total/100)}):null}):null]})]})};var la=n(88355),ca=n(86498);const da=/^((AT)(U\d{8})|(BE)(0\d{9}|\d{10})|(BG)(\d{9,10})|(CHE)(\d{9})|(CY)(\d{8}[A-Z])|(CZ)(\d{8,10})|(DE)(\d{9})|(DK)(\d{8})|(EE)(\d{9})|(GB)(\d{5,12})|(EL|GR)(\d{9})|(ES)([\dA-Z]\d{7}[\dA-Z])|(FI)(\d{8})|(FR)([\dA-Z]{2}\d{9})|(HU)(\d{8})|(HR)(\d{11})|(IE)(\d{7}[A-Z]{1,2})|(IT)(\d{11})|(LT)(\d{9}|\d{12})|(LU)(\d{8})|(LV)(\d{11})|(MT)(\d{8})|(NL)(\d{9}(B\d{2}|BO2))|(PL)(\d{10})|(PT)(\d{9})|(RO)(\d{2,10})|(SE)(\d{12})|(SI)(\d{8})|(SK)(\d{10})|(\d{9}MVA))$/i,_a=e=>{const t=e.replaceAll(/\./g,"");return da.test(t)},ua="team_account_vat_number_add_description",ma="team_account_vat_number";var pa=function(e){return e[e.ADD=0]="ADD",e[e.UPDATE=1]="UPDATE",e}(pa||{}),ga=function(e){return e.INITIAL_VIEW="initialView",e.EDIT="edit",e.SAVE="save",e.SAVING="saving",e}(ga||{});const ha=({isInAccountSummary:e})=>{const{translate:t}=(0,b.Z)(),[n,a]=(0,r.useState)(""),[i,s]=(0,r.useState)("cancel"),[o,l]=(0,r.useState)(!1),[c,d]=(0,r.useState)(pa.ADD),[u,p]=(0,r.useState)(ga.INITIAL_VIEW),g=(0,ca.V)(),{deleteTeamVat:h,upsertTeamVat:y}=(0,te.u)(gn.a),S=(0,m.k)(gn.a,"getTeamVat");(0,r.useEffect)((()=>{S.status===G.rq.Success&&""!==S.data?(a(S.data),s("delete"),p(ga.EDIT)):p(ga.INITIAL_VIEW)}),[S.status,S.data]);const x=e=>e&&!_a(e)?t("team_account_vat_number_invalid"):null,f={vatNumber:n},v=c===pa.ADD?"team_account_vat_number_add_success":"team_account_vat_number_update_success";return(0,E.BX)(r.Fragment,{children:[""===n&&(e?(0,E.tZ)(_.n,{color:"ds.text.neutral.quiet",textStyle:"ds.body.standard.regular",children:t(ua)}):(0,E.tZ)(Ce.nvN,{color:"ds.text.neutral.quiet",size:"medium",children:t(ua)})),u===ga.INITIAL_VIEW?(0,E.tZ)("div",{sx:{marginTop:"16px"},children:(0,E.tZ)(D.z,{mood:"neutral",intensity:"quiet",icon:"ActionAddOutlined",layout:"iconLeading",onClick:()=>{p(ga.SAVE)},children:t("team_account_vat_number_add_label")})}):(0,E.tZ)("div",{sx:{marginTop:"16px"},children:(0,E.tZ)(la.J9,{initialValues:f,onSubmit:u===ga.SAVE?async e=>{p(ga.SAVING),"success"===(await y({newVATNumber:e.vatNumber})).tag&&(a(e.vatNumber),l(!0),p(ga.EDIT),s("delete"),setTimeout((()=>{l(!1)}),2e3))}:u===ga.EDIT?()=>{l(!1),p(ga.SAVE),d(pa.UPDATE)}:()=>{},children:({errors:e,resetForm:n,touched:r,values:o})=>(0,E.tZ)(la.l0,{children:(0,E.BX)(Ce.T5p,{gap:"16px",gridTemplateColumns:"2fr 0.25fr 1fr",children:[(0,E.BX)(Ce.dDn,{gridColumn:"1 / 2",children:[(0,E.tZ)(la.gN,{name:"vatNumber",validate:x,children:({field:{onChange:e,...n}})=>(0,E.tZ)(ee.o,{label:t(ma),disabled:u===ga.EDIT,onChange:t=>{e(t),u===ga.EDIT&&(p(ga.SAVE),l(!1))},...n,sx:{input:{textTransform:"uppercase"}}})}),e.vatNumber&&r.vatNumber&&(0,E.tZ)(Ce.nvN,{color:"ds.text.danger.quiet",size:"x-small",children:e.vatNumber})]}),(0,E.tZ)(Ce.dDn,{gridColumn:"2 / 3",sx:{marginTop:"16px"},children:u===ga.SAVING?(0,E.tZ)(D.z,{intensity:"catchy",layout:"labelOnly",disabled:!0,type:"submit",children:t("team_account_name_saving_label")}):u===ga.SAVE?(0,E.tZ)(D.z,{intensity:"catchy",layout:"labelOnly",disabled:""===o.vatNumber,type:"submit",children:t("team_settings_button_save_label")}):(0,E.tZ)(D.z,{mood:"neutral",intensity:"quiet",icon:"ActionEditOutlined",layout:"iconLeading",disabled:""===o.vatNumber,type:"submit",children:t("team_account_name_edit_label")})}),(0,E.tZ)(Ce.dDn,{gridColumn:"3 / 4",sx:{marginTop:"16px"},children:"cancel"===i?(0,E.tZ)(D.z,{mood:"neutral",intensity:"quiet",layout:"labelOnly",disabled:u===ga.SAVING,onClick:()=>p(ga.INITIAL_VIEW),children:t("_common_action_cancel")}):(0,E.tZ)(D.z,{mood:"neutral",intensity:"quiet",icon:"ActionDeleteOutlined",layout:"iconLeading",disabled:u===ga.SAVING,onClick:()=>{n({values:f}),(async()=>{"success"===(await h()).tag&&(a(""),p(ga.INITIAL_VIEW),s("cancel"),d(pa.ADD),g.showAlert(t("team_account_vat_number_delete_success_alert"),Ce.BLW.SUCCESS))})()},children:t("team_account_delete_label")})})]})})})}),o&&(0,E.tZ)(Ce.nvN,{color:"ds.text.positive.quiet",size:"x-small",children:t(v)})]})},ya=({isInAccountSummary:e})=>{const{translate:t}=(0,b.Z)();return(0,E.tZ)("div",{children:e?(0,E.BX)("div",{sx:{marginTop:"24px"},children:[(0,E.tZ)(d.X,{color:"ds.text.neutral.catchy",as:"h2",textStyle:"ds.title.section.medium",children:t(ma)}),(0,E.tZ)("div",{sx:{marginTop:"16px"},children:(0,E.tZ)(ha,{isInAccountSummary:e})})]}):(0,E.tZ)(bn,{title:t(ma),children:(0,E.tZ)("div",{sx:{marginTop:"16px"},children:(0,E.tZ)(ha,{isInAccountSummary:e})})})})};let ba=function(e){return e.FORM="form",e.SUCCESS="success",e}({});const Sa=({contactSupport:e=!1})=>{const{translate:t}=(0,b.Z)();return(0,E.BX)(bn,{title:(0,E.tZ)(_.n,{textStyle:"ds.title.supporting.small",color:"ds.text.neutral.quiet",sx:{marginBottom:"18px"},children:t("team_account_teamplan_changeplan_questions_header")}),children:[(0,E.tZ)($t.Q,{color:"ds.text.brand.standard",href:me.Vr,isExternal:!0,onClick:()=>{(0,y.Kz)(new u.UserOpenHelpCenterEvent({helpCenterArticleCta:u.HelpCenterArticleCta.HelpCenter}))},sx:{marginBottom:"10px"},children:t("team_account_teamplan_changeplan_questions_visit_help_center")}),e?(0,E.tZ)($t.Q,{color:"ds.text.brand.standard",href:me.to,isExternal:!0,onClick:()=>{(0,y.Kz)(new u.UserCallToActionEvent({callToActionList:[u.CallToAction.ContactCustomerSupport],chosenAction:u.CallToAction.ContactCustomerSupport,hasChosenNoAction:!1}))},children:t("team_account_teamplan_changeplan_questions_customer_support")}):(0,E.tZ)($t.Q,{color:"ds.text.brand.standard",href:me.tz,isExternal:!0,onClick:()=>{(0,y.Kz)(new u.UserCallToActionEvent({callToActionList:[u.CallToAction.SeeAllPlans],chosenAction:u.CallToAction.SeeAllPlans,hasChosenNoAction:!1}))},children:t("team_account_teamplan_changeplan_questions_compare_plans")})]})};var xa,fa,va,Ca=n(23466),Ea=n(87196),Za=n(83175),ka=n(86834),Da=n(50506);const Ta=!1,Ia=(e,t)=>e?t===on.INVOICE?"1px solid ds.border.brand.standard.active":"1px solid ds.border.neutral.quiet.idle":"none",Aa=({handleClickAddBillingInfo:e,handleClickEditBillingInfo:t,paymentLoading:n,premiumStatus:a,seats:i,setPaymentMethodType:o,setPaymentLoading:u})=>{var m;const{translate:p}=(0,b.Z)(),[g,h]=(0,r.useState)(on.CREDIT_CARD);(0,r.useEffect)((()=>{o(g)}),[g,o]),(0,r.useEffect)((()=>{i<21&&h(on.CREDIT_CARD)}),[i]);const{loading:y,billingInformation:x}=(0,S.C)({b2c:Ta}),f=x?.last4,v=(C=x?.country,(0,Da.S)(C)===Da.n.EUROPE);var C;const Z=i>20||v;return a.status!==s.rq.Success||!a.data||y?xa||(xa=(0,E.tZ)(l.Z,{})):(0,E.BX)(yn.Z,{children:[(0,E.tZ)(d.X,{as:"h2",children:p("team_post_trial_checkout_payment_selection_heading")}),(0,E.tZ)(Ca.E,{groupName:"options",value:g,onChange:e=>h(e.target.value),children:(0,E.BX)(c.k,{gap:"16px",flexDirection:"row",flexWrap:"nowrap",children:[(0,E.tZ)("div",{sx:{width:"50%",border:g===on.CREDIT_CARD?"1px solid ds.border.brand.standard.active":"1px solid ds.border.neutral.quiet.idle",borderRadius:"8px",padding:"24px"},children:(0,E.tZ)(Ea.Y,{label:(0,E.BX)(c.k,{flexDirection:"column",alignItems:"center",sx:{marginLeft:"-40px",gap:"8px"},children:[va||(va=(0,E.tZ)(T.JO,{name:"ItemPaymentOutlined",color:"ds.text.neutral.standard",size:"large"})),(0,E.tZ)(_.n,{color:"ds.text.neutral.standard",textStyle:"ds.body.standard.strong",children:p("team_post_trial_checkout_payment_selection_credit_card_description")}),n?m||(m=(0,E.tZ)(Za.J,{b2c:Ta,setPaymentLoading:u})):f?(0,E.BX)(c.k,{justifyContent:"space-between",sx:{width:"100%",padding:"8px 8px 0"},children:[fa||(fa=(0,E.tZ)(ka.I,{b2c:Ta,isAppStoreUser:!1,isGooglePlayUser:!1})),(0,E.tZ)(D.z,{"aria-label":p("team_post_trial_checkout_payment_selection_edit_billing_info"),layout:"iconOnly",icon:"ActionEditOutlined",intensity:"supershy",onClick:t})]}):(0,E.tZ)(D.z,{mood:"brand",intensity:"catchy",size:"large",icon:"ActionAddOutlined",layout:"iconLeading",onClick:e,children:p("team_post_trial_checkout_payment_selection_add_billing_info")})]}),value:on.CREDIT_CARD})}),(0,E.tZ)("div",{sx:{width:"50%",borderRadius:"8px",border:Ia(Z,g),backgroundColor:Z?"ds.container.agnostic.neutral.supershy":"ds.container.agnostic.neutral.quiet",padding:"24px"},children:(0,E.tZ)(Ea.Y,{label:(0,E.BX)(c.k,{flexDirection:"column",alignItems:"center",sx:{marginLeft:"-40px",gap:"8px"},children:[(0,E.tZ)(T.JO,{name:"ItemTaxNumberOutlined",color:Z?"ds.text.neutral.catchy":"ds.text.neutral.quiet",size:"large"}),(0,E.tZ)(_.n,{color:Z?"ds.text.neutral.catchy":"ds.text.neutral.quiet",textStyle:"ds.body.standard.strong",children:p("team_post_trial_checkout_payment_selection_invoice_radio_description")}),Z?(0,E.tZ)(_.n,{color:"ds.text.neutral.standard",sx:{textAlign:"center"},children:p("team_post_trial_checkout_payment_selection_invoice_enabled_description")}):(0,E.tZ)(rn.k,{title:p("team_post_trial_checkout_payment_selection_invoice_infobox_label")})]}),value:on.INVOICE,disabled:!Z})})]})})]})};var wa=n(9216);const Oa=({setPaymentLoading:e,premiumStatus:t,isB2C:n=!1})=>{const{pollUntilCardUpdate:a}=(0,S.C)({b2c:n,handleCardUpdate:e=>{e&&t.status===s.rq.Success&&(0,wa.dV)(t.data,u.FlowStep.Complete)}});return{handleClickAddBillingInfo:()=>{a(),e(!0),(0,y.Kz)(new u.UserClickEvent({button:u.Button.AddPaymentInfo})),(0,y.Kz)(new u.UserAddNewPaymentMethodEvent({flowStep:u.FlowStep.Start}))},handleClickEditBillingInfo:()=>{a(),e(!0),(0,y.Kz)(new u.UserClickEvent({button:u.Button.UpdatePaymentMethod})),t.status===s.rq.Success&&(0,wa.dV)(t.data,u.FlowStep.Start)}}};var Na,Ra,La,Ba,Ma;const Pa=()=>{var e,t,n;const{translate:a}=(0,b.Z)(),S=jt(),x=(0,h.s)(),f=(0,r.useContext)(qt),{showToast:v}=(0,o.p)(),{data:C,status:k}=(0,m.k)(p.o,"getTeamSeats"),{loading:D,billingCountry:T}=w(),A=(0,Xe.Y)(),[O,N]=(0,r.useState)(0),[R,L]=(0,r.useState)(),[B,M]=(0,r.useState)(""),[P,U]=(0,r.useState)(!0),[X,z]=(0,r.useState)(ba.FORM),[F,q]=(0,r.useState)(),[G,V]=(0,r.useState)(""),[j,W]=(0,r.useState)(on.CREDIT_CARD),[H,$]=(0,r.useState)(!1),{handleClickAddBillingInfo:K,handleClickEditBillingInfo:Y}=Oa({setPaymentLoading:$,premiumStatus:A}),Q=(null!=(e=C?.paid)?e:0)+(null!=(t=C?.extraFree)?t:0),J=Q-(null!=(n=C?.remaining)?n:0),ee=x?.spaceTier;if((0,r.useEffect)((()=>{""!==G&&v({mood:"danger",description:G}),V("")}),[G]),(0,r.useEffect)((()=>(X===ba.FORM?f(Na||(Na=(0,E.tZ)(I,{}))):f(null),()=>{f(null)})),[X]),(0,r.useEffect)((()=>{S&&("business"!==(0,i.CN)().get("plan")&&ee!==g.lD.Team&&ee!==g.lD.Starter&&ee!==g.lD.Standard||L(S.businessOffer))}),[S]),D||k!==s.rq.Success||!C||!x||!S||!ee)return Ra||(Ra=(0,E.tZ)(l.Z,{mood:"brand"}));const te=S.businessOffer.currency,ne=T&&"US"!==T?"team_account_teamplan_vat":"team_account_teamplan_changeplan_order_summary_tax";return(0,E.tZ)(c.k,{sx:{margin:"45px",width:"1180px"},children:(0,E.BX)(c.k,{flexDirection:"column",gap:"8px",children:[X===ba.FORM?(0,E.BX)(r.Fragment,{children:[(0,E.BX)(c.k,{flexDirection:"column",gap:"16px",sx:{padding:"0 8px 32px"},children:[(0,E.tZ)(d.X,{textStyle:"ds.title.section.large",color:"ds.text.neutral.catchy",as:"h1",children:a("team_account_teamplan_changeplan_title")}),(0,E.tZ)(_.n,{color:"ds.text.neutral.standard",textStyle:"ds.body.standard.regular",children:a("team_account_teamplan_changeplan_description")})]}),(0,E.BX)(c.k,{gap:"8px",children:[(0,E.tZ)("div",{sx:{width:"750px"},children:(0,E.BX)(c.k,{flexDirection:"column",flexWrap:"nowrap",gap:"8px",children:[(0,E.tZ)(Gn,{teamOffers:S,currentSpaceTier:ee,selectedOffer:R,handleSelection:e=>{(e=>{(0,y.Kz)(new u.UserClickEvent({clickOrigin:u.ClickOrigin.Plans,button:mn(e)?u.Button.SelectTeamPlan:pn(e)?u.Button.SelectBusinessPlan:u.Button.SelectStarterPlan}))})(e),L(e)}}),(0,E.tZ)(Aa,{handleClickAddBillingInfo:K,handleClickEditBillingInfo:Y,paymentLoading:H,premiumStatus:A,seats:O,setPaymentLoading:$,setPaymentMethodType:W}),"US"!==T&&(La||(La=(0,E.tZ)(ya,{isInAccountSummary:!1}))),(0,E.tZ)($n,{email:B,emailValid:P,setEmail:M,setEmailValid:U})]})}),(0,E.tZ)("div",{sx:{width:"370px"},children:(0,E.BX)(c.k,{flexDirection:"column",gap:"8px",children:[(0,E.tZ)(Rn,{currentSeats:Q,currentActiveSeats:J,currentSpaceTier:ee,selectedSeatsQty:O,currency:te,selectedOffer:R,email:B,emailValid:P,onSuccess:()=>{z((()=>ba.SUCCESS))},onError:e=>{V(e)},setSelectedSeatsQty:N,setOrderSummaryData:q,handleClickAddBillingInfo:K,paymentMethodType:j,taxCopy:ne}),Ba||(Ba=(0,E.tZ)(Sa,{contactSupport:!0}))]})})]})]}):null,X===ba.SUCCESS&&F&&R?(0,E.BX)(c.k,{flexWrap:"nowrap",gap:"16px",children:[(0,E.tZ)(c.k,{flexDirection:"column",sx:{flexGrow:"2",maxWidth:"752px"},children:(0,E.tZ)(na,{targetPlan:pn(R)?"business":"team"})}),(0,E.BX)(c.k,{gap:"16px",flexDirection:"column",sx:{flexGrow:"1",width:"368px"},children:[(0,E.tZ)(oa,{currency:te,selectedOffer:R,costData:F}),Ma||(Ma=(0,E.tZ)(Z,{}))]})]}):null]})})};var Ua,Xa=n(98368),za=n(18329),Fa=n(135),qa=n(86717),Ga=n(5822);const Va={display:"flex",alignItems:"center",padding:"12px 8px",borderRadius:"8px",justifyContent:"space-between",backgroundColor:"ds.container.agnostic.neutral.quiet"},ja="team_post_trial_checkout_number_of_seats",Wa=({numberOfMembers:e,planPrice:t,selectedOffer:n,selectedSeatsQty:a,setPlanPrice:s,setSelectedSeatsQty:o,setIsSeatsQtyValid:l})=>{const{translate:d}=(0,b.Z)(),u=(0,Ve.k6)(),{routes:m}=(0,i.Xo)(),p=e>oi?e:oi,[g,h]=(0,r.useState)(Math.max(a,p));if((0,r.useEffect)((()=>{if(n){const e=dn({offer:n}).equivalentPrice;s(e),pn(n)?o(Math.max(g,10)):(10!==a&&h(a),o(10))}}),[n]),!n)return(0,E.tZ)("div",{sx:Va,children:(0,E.tZ)(_.n,{textStyle:"ds.body.standard.strong",color:"ds.text.brand.quiet",children:d("team_account_teamplan_changeplan_order_summary_select_plan")})});const y=n.currency,S=10*t,x=pn(n)?{planName:d("team_account_teamplan_changeplan_plans_business_name"),planPrice:d("team_post_trial_checkout_order_summary_seat_year",{cost:d.price(y,t/100,{notation:"compact"})})}:{planName:d("manage_subscription_plan_name_dashlane_standard"),planPrice:d("team_post_trial_checkout_standard_order_summary_seat_year",{cost:d.price(y,S/100,{notation:"compact"})})};return(0,E.BX)(r.Fragment,{children:[(0,E.BX)("div",{sx:Va,children:[(0,E.tZ)(_.n,{textStyle:"ds.title.block.small",color:"ds.text.brand.quiet",children:x.planName}),(0,E.tZ)(_.n,{textStyle:"ds.body.reduced.regular",color:"ds.text.brand.quiet",children:x.planPrice})]}),(0,E.BX)(c.k,{justifyContent:"flex-end",sx:{padding:pn(n)?"0 10px":"16px 10px 8px"},children:[(0,E.tZ)("div",{sx:{display:"flex",alignItems:"center",flex:1},children:(0,E.tZ)(_.n,{textStyle:"ds.body.standard.strong",color:"ds.text.neutral.catchy",children:d(ja)})}),(0,E.tZ)("div",{sx:{display:"flex",alignItems:"center"},children:(0,E.tZ)("div",{sx:{width:"146px"},children:pn(n)?(0,E.tZ)(Wt.w,{id:"checkoutNumberOfSeats",inputWidth:"66px",label:"",ariaLabel:d(ja),minValue:p,onChange:e=>{o(e),h(e),l(!(e<p))},defaultValue:a},`seats-${a}`):(0,E.tZ)("div",{id:"standard-seats",sx:{float:"right"},children:Ua||(Ua=(0,E.tZ)(_.n,{textStyle:"ds.body.standard.strong",color:"ds.text.neutral.catchy",children:10}))})})})]}),pn(n)&&a<=p&&(0,E.BX)(c.k,{justifyContent:"flex-end",sx:{padding:"0 10px"},children:[(0,E.tZ)(c.k,{flexDirection:"row",alignItems:"center",sx:{flex:1},children:(0,E.tZ)(_.n,{textStyle:"ds.body.reduced.regular",color:a<p?"ds.text.danger.quiet":"ds.text.neutral.quiet",children:(0,E.BX)(c.k,{flexDirection:"row",alignItems:"center",gap:"4px",children:[d("team_post_trial_checkout_minimum_users",{numberOfMembers:p}),(0,E.tZ)(T.JO,{color:a<p?"ds.text.danger.quiet":"ds.text.neutral.quiet",name:"FeedbackInfoOutlined",tooltip:{content:e>oi?d("team_post_trial_checkout_number_of_seats_tooltip"):d("team_post_trial_checkout_number_of_seats_tooltip_plan_minimum",{minNumOfSeats:oi})}})]})})}),e>oi&&(0,E.tZ)(c.k,{flexDirection:"row",alignItems:"center",children:(0,E.tZ)($t.Q,{onClick:()=>u.push(m.teamMembersRoutePath),children:d("team_post_trial_checkout_review_active_users")})})]})]})},Ha=({children:e,currency:t,hasError:n,isLoading:a,onCancel:i,onChange:s,onClear:o,onSubmit:l,promoCode:c,promoPrice:d,setShowInput:_,showInput:u,subtotal:m})=>{const[p,g]=(0,r.useState)(!1),h=()=>{o&&(g(!1),o())};return u||p?(0,E.BX)(r.Fragment,{children:[c&&p&&(0,E.tZ)(tn,{currency:t,handleClear:h,isEditing:p,promoCode:c,promoPrice:d,setIsEditing:g,subTotal:m}),e,(0,E.tZ)(In,{hasError:n,isLoading:a,handleCancel:()=>{i&&(g(!1),i())},handleSubmit:()=>{l&&(g(!1),l())},onChange:s,promoCode:c})]}):c&&!p?(0,E.tZ)(tn,{currency:t,handleClear:h,isEditing:p,promoCode:c,promoPrice:d,setIsEditing:g,subTotal:m,children:e}):(0,E.BX)(r.Fragment,{children:[e,(0,E.tZ)(kn,{setShowInput:_})]})};var $a=n(51060);const Ka=e=>{switch(e){case $a.AI.B2B_PLAN_NOT_FOUND:return u.PaymentStatus.B2bPlanNotFound;case $a.AI.INVALID_PLAN:return u.PaymentStatus.InvalidPlan;case $a.AI.NOT_IN_A_TEAM_PLAN:return u.PaymentStatus.NotInATeamPlan;case $a.AI.NOT_TEAM_CAPTAIN:return u.PaymentStatus.NotTeamCaptain;case $a.AI.NOT_IN_FREE_TRIAL:return u.PaymentStatus.NotInFreeTrial;case $a.AI.NO_KEY_FOR_USER:return u.PaymentStatus.NoKeyForUser;case $a.AI.FORBIDDEN_EMAIL_DOMAIN:return u.PaymentStatus.ForbiddenEmailDomain;case $a.AI.CANNOT_INVOICE_FREE_PLAN:return u.PaymentStatus.CannotInvoiceFreePlan;case $a.AI.SALES_TAX_MISMATCH:return u.PaymentStatus.SalesTaxMismatch;case $a.AI.SEATS_TO_PURCHASE_LOWER_ACTUAL_USAGE:return u.PaymentStatus.SeatsToPurchaseLowerActualUsage;case $a.AI.SELECTED_PLAN_IS_NOT_VALID:return u.PaymentStatus.SelectedPlanIsNotValid;case $a.AI.STARTER_PLAN_NOT_10_SEATS:return u.PaymentStatus.StarterPlanNot10Seats;case $a.AI.TEAM_HAS_SSO_ENABLED:return u.PaymentStatus.TeamHasSsoEnabled;case $a.AI.UNSUPPORTED_PAYMENT_MEAN:return u.PaymentStatus.SelectedPlanIsNotValid;case $a.AI.USER_SUBSCRIBING_NOT_FOUND:return u.PaymentStatus.UserSubscribingNotFound;case $a.AI.VAT_NUMBER_NOT_UPSERTED:return u.PaymentStatus.VatNumberNotUpserted;case $a.AI.WRONG_AMOUNT_TO_PAY:return u.PaymentStatus.WrongAmountToPay;default:return u.PaymentStatus.PaymentErrorDuringUpgrade}};var Ya;const Qa=({billingCountry:e,isSeatsQtyValid:t,paymentMethodType:n,planPrice:a,selectedOffer:i,selectedSeatsQty:s,setErrorMessage:o,setHasTax:d,setOrderSummaryData:p,setPostTrialCheckoutState:g,setRenewalPrice:h})=>{const{translate:S}=(0,b.Z)(),[x,f]=(0,r.useState)(!1),{upgradeTeamWithExistingCc:v}=(0,te.u)(Vt.K),C=a*s,{changePromoCode:Z,clearPromoCode:k,currentPromoCode:I,discountedSeatPrice:A,hasError:w,isLoading:O,planId:N,setShowInput:R,showInput:L,validatePromoCode:B}=(({selectedOffer:e,selectedSeatsQty:t})=>{const[n,a]=(0,r.useState)(""),[i,s]=(0,r.useState)(""),[o,l]=(0,r.useState)(0),[c,d]=(0,r.useState)(!1),[_,u]=(0,r.useState)(!1),[p,g]=(0,r.useState)(!1),[h,y]=(0,r.useState)(t),[b,S]=(0,r.useState)(e),[x,f]=(0,r.useState)(""),{data:v,status:C}=(0,m.k)(Vt.K,"getTeamOffers",{couponCode:i}),E=(0,r.useCallback)((()=>{if(!i||!e)return!1;if(C===G.rq.Error&&!v)return g(!1),d(!0),u(!0),!1;if(C===G.rq.Loading&&!v)return g(!0),!1;const n=!pn(e)&&v.entryLevelOffer?v.entryLevelOffer:v.businessOffer,r=dn({offer:n,selectedSeatsQty:t});return r.price!==r.equivalentPrice?(g(!1),a(i),l(r.price),f(n.name),d(!1),u(!1),!0):(g(!1),d(!0),u(!0),l(0),!1)}),[i,e,t,v,C]);return(0,r.useEffect)((()=>{t!==h&&(y(t),E())}),[h,t,E]),(0,r.useEffect)((()=>{e?.name!==b?.name&&(S(e),E())}),[e,b,E]),{cancelPromoCode:()=>{c?(a(""),s(""),l(0),f("")):s(n),d(!1),u(!1)},clearPromoCode:()=>{a(""),s(""),d(!1),l(0),f("")},changePromoCode:e=>{s(e),c&&d(!1)},currentPromoCode:i,discountedSeatPrice:o,hasError:c,isLoading:p,planId:x,promoCode:n,setIsLoading:g,setShowInput:u,showInput:_,validatePromoCode:E}})({selectedOffer:i,selectedSeatsQty:s}),M=A*s,P=C-M,U=0!==A?M:C,{isLoading:X,taxInformation:F}=hn({total:U,initialSkip:void 0===e});(0,r.useEffect)((()=>{if(void 0!==F?.amount){d(F.amount>0);const e=0!==A?(C-M)/C:0,t=F.amount/(1-e),n=C+t;h(Math.round(n))}}),[d,h,C,M,A,F?.amount]);const q=e&&"US"!==e?"team_account_teamplan_vat":"team_account_teamplan_changeplan_order_summary_tax",V=!X&&F?.amount||0,j=V?U+V:void 0,H="invoice"===n?"team_post_trial_checkout_request_purchase_order":"team_account_teamplan_changeplan_order_summary_confirm_and_pay";if(!i)return null;const $=X&&"invoice"!==n||!t;return(0,E.BX)(r.Fragment,{children:[(0,E.tZ)(z.i,{sx:{margin:"8px 0"}}),(0,E.tZ)(Ht,{label:(0,E.tZ)(_.n,{textStyle:"ds.body.standard.strong",color:"ds.text.neutral.catchy",children:S("team_account_teamplan_changeplan_order_summary_subtotal")}),value:(0,E.tZ)(_.n,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",children:S.price(i.currency,C/100)})}),(0,E.tZ)(Ha,{currency:i.currency,hasError:w,isLoading:O,onChange:Z,onClear:k,onSubmit:B,promoCode:I,promoPrice:P,setShowInput:R,showInput:L,subtotal:C,children:(0,E.tZ)(Ht,{label:(0,E.tZ)(_.n,{textStyle:"ds.body.standard.strong",color:"ds.text.neutral.catchy",children:(0,E.BX)(c.k,{flexDirection:"row",gap:"4px",children:[S(q),(0,E.tZ)(T.JO,{color:"ds.text.neutral.quiet",name:"FeedbackInfoOutlined",tooltip:{content:S("team_account_teamplan_changeplan_order_summary_tax_tooltip")}})]})}),value:(0,E.tZ)(_.n,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",children:S.price(i.currency,V/100)})})}),(0,E.tZ)(z.i,{sx:{margin:"8px 0"}}),(0,E.tZ)(Ht,{label:(0,E.tZ)(_.n,{textStyle:"ds.body.standard.strong",color:"ds.text.neutral.catchy",children:S("team_account_teamplan_total")}),value:(0,E.tZ)(_.n,{textStyle:"ds.specialty.spotlight.small",color:"ds.text.neutral.catchy",children:S.price(i.currency,(!X&&j?j:C)/100)})}),(0,E.tZ)(D.z,{size:"large",sx:{width:"100%"},type:"button",disabled:$,onClick:()=>"invoice"===n?((0,y.Kz)(new u.UserClickEvent({button:u.Button.RequestPurchaseOrder})),void(0,W.Yo)(me.nq)):(async t=>{(0,y.Kz)(new u.UserClickEvent({button:u.Button.ConfirmAndPay})),f((()=>!0));const n=await v({planId:t,countryCode:e,membersNumber:s,amountToPayInCents:U,taxesToPayInCents:V,couponCode:I}),r=t.includes("standard")?u.Plan.Standard:u.Plan.Business,l=u.PriceCurrencyCode[i?.currency?i.currency.charAt(0).toUpperCase()+i.currency.slice(1):"Usd"];if(f((()=>!1)),"success"===n.tag)(0,y.Kz)(new u.UserPurchaseSubscriptionEvent({paymentAmount:U,paymentCurrency:l,paymentMethod:u.PaymentMethod.CreditCard,paymentStatus:u.PaymentStatus.Success,purchasedPlan:r,purchasedSeatsCount:s})),g(sn.SUCCESS),p({numberOfSeats:s,planPrice:a,promoPrice:0!==A?P:void 0,subtotal:C,tax:V,total:j}),(0,y.Nc)(u.PageView.TacCheckoutSuccess);else{const e=n.error.tag;(0,y.Kz)(new u.UserPurchaseSubscriptionEvent({paymentAmount:U,paymentCurrency:l,paymentMethod:u.PaymentMethod.CreditCard,paymentStatus:Ka(e),purchasedPlan:r,purchasedSeatsCount:s})),o(S("UNSUPPORTED_PAYMENT_MEAN"===e?"team_post_trial_checkout_error_payment_declined":"team_post_trial_checkout_error_process_request"))}})(N||i.name),children:x?Ya||(Ya=(0,E.tZ)(l.Z,{})):S(H)})]})};var Ja;const ei=({billingCountry:e,handleClickAddBillingInfo:t,hasTax:n,renewalPrice:a,selectedOffer:i,selectedSeatsQty:r})=>{const{translate:s}=(0,b.Z)(),o=(0,cn.Z)(new Date,1),l=n?"US"===e?"team_account_teamplan_changeplan_order_summary_footer_renewal":"team_account_teamplan_changeplan_order_summary_renewal_vat":"team_account_teamplan_changeplan_order_summary_footer_header",{billingInformation:d}=(0,S.C)({b2c:!1}),u=d?.last4;return i?u?a>0?(0,E.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"12px",padding:"10px"},children:[(0,E.BX)(_.n,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.standard",children:[s(l,{price:s.price(i.currency,a/100),date:s.shortDate(o,fn.qG.ll)}),Ja||(Ja=(0,E.tZ)("br",{})),s("team_post_trial_checkout_cancel_subscription")]}),(0,E.tZ)(_.n,{textStyle:"ds.body.helper.regular",color:"ds.text.neutral.quiet",children:s.markup("team_account_teamplan_changeplan_order_summary_footer_markup",{privacyPolicyUrl:me.Bz,termsUrl:me.sz},{linkTarget:"_blank"})})]}):null:(0,E.BX)(c.k,{flexDirection:"row",justifyContent:"space-between",alignItems:"baseline",sx:{marginTop:"8px"},children:[(0,E.tZ)(_.n,{textStyle:"ds.body.standard.regular",color:"ds.text.warning.quiet",children:s(r>20?"team_post_trial_checkout_payment_method_required":"team_post_trial_checkout_credit_card_required")}),(0,E.tZ)($t.Q,{color:"ds.text.brand.standard",isExternal:!0,onClick:t,sx:{marginRight:"8px"},children:s("team_post_trial_checkout_add_credit_card")})]}):null},ti=({billingCountry:e,handleClickAddBillingInfo:t,paymentMethodType:n,selectedOffer:a,selectedSeatsQty:i,setErrorMessage:s,setOrderSummaryData:o,setPostTrialCheckoutState:l,setSelectedSeatsQty:d,numberOfMembers:_})=>{const{translate:u}=(0,b.Z)(),[m,p]=(0,r.useState)(!1),[g,h]=(0,r.useState)(0),[y,S]=(0,r.useState)(0),[x,f]=(0,r.useState)(!0);return(0,E.tZ)(bn,{title:u("team_account_teamplan_changeplan_order_summary_header"),children:(0,E.BX)(c.k,{flexDirection:"column",gap:"16px",sx:{marginTop:"16px"},children:[(0,E.tZ)(Wa,{numberOfMembers:_,planPrice:g,selectedOffer:a,selectedSeatsQty:i,setPlanPrice:h,setSelectedSeatsQty:d,setIsSeatsQtyValid:f}),(0,E.tZ)(Qa,{billingCountry:e,paymentMethodType:n,isSeatsQtyValid:x,planPrice:g,selectedOffer:a,selectedSeatsQty:i,setErrorMessage:s,setHasTax:p,setOrderSummaryData:o,setPostTrialCheckoutState:l,setRenewalPrice:S}),(0,E.tZ)(ei,{billingCountry:e,handleClickAddBillingInfo:t,hasTax:m,selectedSeatsQty:i,renewalPrice:y,selectedOffer:a})]})})},ni=({currentSpaceTier:e,handleSelection:t,selectedOffer:n,teamOffers:a,numberOfMembers:i})=>{const{translate:s}=(0,b.Z)(),o=(0,$.C)(),l=Ln(),d=(({teamOffers:e,limitedBusinessOffer:t,teamTrialStatus:n,numberOfMembers:a})=>{const{translate:i}=(0,b.Z)(),r=e?.businessOffer?.currency,s=e?.businessOffer?_n({offer:e.businessOffer}):null,o=e?.entryLevelOffer?un({offer:e.entryLevelOffer,selectedSeatsQty:10}):null,l=n?.spaceTier===g.lD.Business,c=n?.spaceTier===g.lD.BusinessPlus,d={standard:{...Xn.standard,isStandardPlanRestricted:a>10,price:o&&r?i.price(r,o/100,{notation:"compact"}):null},business:{...Xn.business,currentTrial:l,price:s&&r?i.price(r,s/100,{notation:"compact"}):null,equivalentPrice:t.hasLimitedOffer&&s&&r?t.translatedEquivalentPrice:null,limitedOffer:t.hasLimitedOffer},businessPlus:{planName:"businessPlus",currentTrial:c,price:{key:"team_post_trial_checkout_plan_selection_biz_plus_card_price"},heading:{key:"team_account_teamplan_omnix"},priceDescription1:{key:"team_post_trial_checkout_plan_selection_biz_plus_card_coverage"},priceDescription2:{key:"team_account_teamplan_changeplan_plans_billed_anually"},features:[{key:"team_post_trial_checkout_plan_selection_biz_plus_card_feature_everything_markup",icon:"check"},{key:"team_post_trial_checkout_plan_selection_biz_plus_card_feature_hundred_plus"},{key:"team_post_trial_checkout_plan_selection_biz_plus_card_feature_nudges_markup"},{key:"team_post_trial_checkout_plan_selection_biz_plus_card_feature_risk_detection_markup"},{key:"team_post_trial_checkout_plan_selection_biz_plus_card_feature_deployment"},{key:"team_post_trial_checkout_plan_selection_biz_plus_card_feature_security"},{key:"team_post_trial_checkout_plan_selection_biz_plus_card_feature_onboarding"}]}};return zn(d)})({teamOffers:a,limitedBusinessOffer:l,teamTrialStatus:o,numberOfMembers:i}),{businessOffer:_,businessPlusOffer:u,entryLevelOffer:m}=a,p=e===g.lD.Standard,h=e===g.lD.Business,y=e===g.lD.BusinessPlus;return(0,r.useEffect)((()=>{a&&((h||y)&&t(_),p&&m&&t(m))}),[a]),d?(0,E.tZ)(bn,{headingLevel:"h2",title:s("team_post_trial_checkout_plan_selection_title"),children:(0,E.tZ)(c.k,{gap:"16px",flexWrap:"nowrap",sx:{paddingTop:"16px"},children:d.businessPlus?m&&d.standard?(0,E.BX)(r.Fragment,{children:[(0,E.tZ)(Un,{handleSelectClick:()=>t(m),plan:d.standard,selected:!!n&&n.name===m.name}),(0,E.tZ)(Un,{handleSelectClick:()=>t(_),plan:d.business,selected:!!n&&(n.name===_.name||u&&n.name===u.name)}),(0,E.tZ)(Un,{plan:d.businessPlus})]}):(0,E.BX)(r.Fragment,{children:[(0,E.tZ)(Un,{handleSelectClick:()=>t(_),plan:d.business,selected:!!n&&n.name===_.name}),(0,E.tZ)(Un,{plan:d.businessPlus})]}):null})}):null};var ai;const ii=({billingCountry:e,orderSummaryData:t,selectedOffer:n})=>{const{translate:a}=(0,b.Z)(),{numberOfSeats:i,planPrice:r,promoPrice:s,subtotal:o,tax:l,total:u}=t,{last4DigitsFormatted:m,cardSvg:p,expFormatted:g}=(0,S.C)({b2c:!1}),h=g?a("manage_subscription_payment_section_expiration_date",{date:g}):null,y=pn(n)?a("team_account_teamplan_changeplan_plans_business_name"):a("manage_subscription_plan_name_dashlane_standard"),x="US"===e?"team_account_teamplan_changeplan_order_summary_tax":"team_account_teamplan_vat";return(0,E.tZ)(yn.Z,{sx:{width:"472px"},children:(0,E.BX)(c.k,{flexDirection:"column",gap:"16px",sx:{marginTop:"16px"},children:[(0,E.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"8px",paddingLeft:"8px",paddingRight:"8px"},children:[(0,E.tZ)(d.X,{as:"h3",textStyle:"ds.title.supporting.small",color:"ds.text.neutral.quiet",children:a("team_account_teamplan_changeplan_order_summary_header")}),(0,E.tZ)(d.X,{as:"h2",textStyle:"ds.title.section.medium",color:"ds.text.neutral.catchy",children:y})]}),(0,E.tZ)(Ht,{label:(0,E.tZ)(_.n,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.catchy",children:a("team_post_trial_checkout_seats_for_year",{cost:a.price(n.currency,r/100,{notation:"compact"}),numOfSeats:i})}),value:(0,E.tZ)(_.n,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.catchy",children:a.price(n.currency,o/100)})}),0!==l?(0,E.tZ)(Ht,{label:(0,E.tZ)(_.n,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.catchy",children:a(x)}),value:(0,E.tZ)(_.n,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",children:a.price(n.currency,l/100)})}):null,s?(0,E.tZ)(Ht,{label:(0,E.tZ)(_.n,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.catchy",children:a("team_account_teamplan_upgrade_premium_coupon")}),value:(0,E.BX)(_.n,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.catchy",children:["-",a.price(n.currency,s/100)]})}):null,(0,E.tZ)(z.i,{sx:{margin:"8px 0"}}),u?(0,E.tZ)(Ht,{label:(0,E.tZ)(_.n,{textStyle:"ds.body.standard.strong",color:"ds.text.neutral.catchy",children:a("team_account_teamplan_total")}),value:(0,E.tZ)(_.n,{textStyle:"ds.specialty.spotlight.small",color:"ds.text.neutral.catchy",children:a.price(n.currency,u/100)})}):null,(0,E.tZ)(Ht,{label:(0,E.tZ)(_.n,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.catchy",children:a("team_post_trial_checkout_paid")}),value:(0,E.BX)(c.k,{alignItems:"center",gap:"8px",children:[p,(0,E.BX)(_.n,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",sx:{display:"flex",gap:"4px"},children:[ai||(ai=(0,E.tZ)("span",{children:"â€¢â€¢â€¢â€¢"})),(0,E.tZ)("span",{children:m})]}),(0,E.tZ)(_.n,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",sx:{display:"flex",gap:"12px"},children:h})]})})]})})};var ri,si;const oi=2,li=()=>{var e,t,n,a;const s=(0,Ve.k6)(),{routes:g}=(0,i.Xo)(),{translate:S}=(0,b.Z)(),x=(0,h.s)(),f=(0,Xe.Y)(),{showToast:v}=(0,o.p)(),{data:C,status:Z}=(0,m.k)(p.o,"getTeamSeats"),{loading:k,billingCountry:T}=w(),[I,A]=(0,r.useState)(sn.FORM),O=jt(),N=(0,Ga.V)(),R=N.status===G.rq.Success,L=(0,m.k)(Fa.L,"getMembersList",{teamId:R&&null!=(e=N.teamId?.toString())?e:""},{initialSkip:!R}),[B,M]=(0,r.useState)(),[P,U]=(0,r.useState)(""),[X,z]=(0,r.useState)(oi),[F,q]=(0,r.useState)(on.CREDIT_CARD),[V,j]=(0,r.useState)(),[W,H]=(0,r.useState)(null),[$,K]=(0,r.useState)(!1),Y=x?.spaceTier,{handleClickAddBillingInfo:Q,handleClickEditBillingInfo:J}=Oa({setPaymentLoading:K,premiumStatus:f});(0,r.useEffect)((()=>{if(L.status===G.rq.Success&&L.data){const e=L.data.members.filter((({status:e})=>"removed"!==e));H(e.length)}L.status===G.rq.Error&&U(S("_common_generic_error"))}),[L.status]),(0,r.useEffect)((()=>{""!==P&&v({mood:"danger",description:P}),U("")}),[P]),(0,r.useEffect)((()=>{(0,y.Nc)(u.PageView.TacCheckout)}),[]);const ee=k||Z!==G.rq.Success||!C||!x||!O||!Y||!W;if(N.status!==G.rq.Success||"number"!=typeof N.teamId)return null;const te=()=>(0,E.tZ)(l.Z,{mood:"brand",size:"xlarge",sx:{left:"50%",top:"50%",position:"absolute"}});return(0,E.BX)(c.k,{flexDirection:"column",sx:{margin:"0 24px 24px",width:"1285px"},children:[ee?te():I===sn.FORM&&"number"==typeof N.teamId&&(0,E.BX)(r.Fragment,{children:[(0,E.BX)(c.k,{flexDirection:"column",gap:"16px",sx:{padding:"32px 0"},children:[(0,E.tZ)(d.X,{as:"h1",textStyle:"ds.title.section.large",color:"ds.text.neutral.catchy",children:S("team_post_trial_checkout_heading")}),(0,E.tZ)(_.n,{textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:S("team_post_trial_checkout_description")})]}),(0,E.tZ)(c.k,{flexDirection:"column",gap:"16px",children:(0,E.BX)(c.k,{gap:"16px",children:[(0,E.tZ)("div",{sx:{width:"751px"},children:(0,E.BX)(c.k,{flexDirection:"column",gap:"16px",flexWrap:"nowrap",children:[(0,E.tZ)(ni,{currentSpaceTier:Y,handleSelection:e=>{(e=>{(0,y.Kz)(new u.UserClickEvent({button:pn(e)?u.Button.SelectBusinessPlan:u.Button.SelectStandardPlan}))})(e),M(e)},selectedOffer:B,teamOffers:O,numberOfMembers:W}),t||(t=(0,E.tZ)(Aa,{handleClickAddBillingInfo:Q,handleClickEditBillingInfo:J,paymentLoading:$,premiumStatus:f,seats:X,setPaymentLoading:K,setPaymentMethodType:q})),"US"!==T&&(ri||(ri=(0,E.tZ)(ya,{isInAccountSummary:!1})))]})}),(0,E.BX)(c.k,{flexDirection:"column",gap:"16px",sx:{width:"460px"},children:[n||(n=(0,E.tZ)(ti,{billingCountry:T,handleClickAddBillingInfo:Q,numberOfMembers:W,paymentMethodType:F,selectedOffer:B,selectedSeatsQty:X,setErrorMessage:U,setOrderSummaryData:j,setPostTrialCheckoutState:A,setSelectedSeatsQty:z})),si||(si=(0,E.tZ)(Sa,{}))]})]})})]}),ee?te():I===sn.SUCCESS&&V&&B&&(0,E.BX)(c.k,{flexDirection:"row",gap:"16px",sx:{padding:"32px 0"},children:[(0,E.tZ)(c.k,{flexDirection:"column",gap:"16px",children:(0,E.tZ)(yn.Z,{sx:{width:"646px",padding:"24px"},children:(0,E.tZ)(c.k,{flexDirection:"column",gap:"16px",children:(0,E.BX)(c.k,{flexDirection:"column",gap:"16px",alignItems:"center",children:[(0,E.tZ)(qa.b,{lightSrc:za,darkSrc:Xa,alt:S("team_post_trial_checkout_success_img_alt"),sx:{maxWidth:"60%",aspectRatio:"3/2"}}),(0,E.tZ)(pe.C,{iconName:"FeedbackSuccessOutlined",label:S("team_post_trial_checkout_success_badge_label"),mood:"positive",layout:"iconLeading"}),(0,E.tZ)(d.X,{as:"h2",textStyle:"ds.title.section.large",color:"ds.text.neutral.catchy",children:S("team_post_trial_checkout_success_heading")}),(0,E.tZ)(_.n,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",sx:{textAlign:"center",maxWidth:"440px"},children:S("team_post_trial_checkout_success_description")}),(0,E.BX)(c.k,{flexDirection:"row",gap:"32px",sx:{margin:"16px 0 32px"},children:[(0,E.tZ)(D.z,{onClick:()=>{s.push(g.teamMembersRoutePath)},mood:"brand",intensity:"catchy",layout:"iconTrailing",icon:"ArrowRightOutlined",children:S("team_post_trial_checkout_success_button_start_inviting_users")}),(0,E.tZ)(D.z,{onClick:()=>{s.push(g.teamAccountRoutePath)},mood:"brand",intensity:"quiet",layout:"iconTrailing",icon:"ArrowRightOutlined",children:S("team_post_trial_checkout_success_button_review_your_subscription")})]})]})})})}),a||(a=(0,E.tZ)(c.k,{flexDirection:"column",children:(0,E.tZ)(ii,{billingCountry:T,orderSummaryData:V,selectedOffer:B})}))]})]})},ci=e=>e?"auto":"800px",di=({mainContent:e,secondaryContent:t,secondaryContentWrapDirection:n="top",fullWidth:a,reducedVerticalPadding:i,secondaryContentWidth:r,...s})=>(0,E.BX)(Ce.T5p,{gap:"32px",gridTemplateAreas:["'top' 'bottom'","'top' 'bottom'","'left right'"],gridTemplateColumns:[null,null,`minmax(auto, ${ci(null!=a&&a)}) ${null!=r?r:"256px"}`],gridTemplateRows:["auto auto","auto auto","auto"],alignContent:"flex-start",sx:{py:i?"16px":"32px",px:"42px"},...s,children:[(0,E.tZ)(Ce.dDn,{alignSelf:"flex-start",gridArea:"top"===n?["top","top","right"]:["bottom","bottom","right"],children:t}),(0,E.tZ)(Ce.dDn,{gridArea:"top"===n?["bottom","bottom","left"]:["top","top","left"],children:e})]});var _i=n(7501);const ui=(e,t,n,a)=>{const{isTeamSoftDiscontinued:i,isTrial:r}=e;return i&&r?"DISCONTINUED TRIAL":n.isFreeTrial&&!n.isGracePeriod?"TRIAL":n.isFreeTrial&&n.isGracePeriod?"GRACE PERIOD":t.currentTeam?.isRenewalStopped&&!i?"ACTIVE CANCELED":t.currentTeam?.isRenewalStopped&&i?"DISCONTINUED CANCELED":!a||i||t.currentTeam?.isRenewalStopped?a&&i&&!t.currentTeam?.isRenewalStopped?"DISCONTINUED CARD EXPIRED":"ACTIVE":"ACTIVE CARD EXPIRED"},mi="account_summary_active_badge",pi="account_summary_expired_badge",gi="account_summary_days_left",hi="account_summary_months_left",yi="account_summary_days_ago",bi="account_summary_ends_on_header",Si="account_summary_ended_on_header",xi="account_summary_renews_on_header",fi=({translate:e,badgeLabel:t,badgeMood:n,supportingDescription:a,dateHeader:r,withCtaButton:s=!1})=>{const{routes:o}=(0,i.Xo)();return(0,E.BX)("div",{id:"HEADER",sx:{display:"flex",justifyContent:"space-between"},children:[(0,E.BX)("div",{className:"automation-tests-tac-billing",sx:{display:"flex",flexDirection:"column",gap:"16px"},children:[(0,E.BX)("div",{sx:{display:"flex",gap:"8px"},children:[(0,E.tZ)(pe.C,{label:t,mood:n}),(0,E.tZ)(_.n,{textStyle:"ds.body.helper.regular",color:"danger"===n?"ds.text.danger.standard":"ds.text.neutral.standard",sx:{alignSelf:"center"},children:a})]}),(0,E.tZ)(_.n,{textStyle:"ds.specialty.spotlight.small",color:"danger"===n?"ds.text.danger.standard":"ds.text.neutral.standard",children:r})]}),s?(0,E.tZ)(D.z,{mood:"brand",intensity:"catchy",sx:{maxHeight:"40px",alignSelf:"center"},as:i.rU,to:o.teamAccountCheckoutRoutePath,children:e("team_dashboard_buy_dashlane_button")}):null]})},vi=({planName:e,hideValue:t,seatsNumber:n,isRenewalStopped:a,isMonthlyPlan:r,currency:s,pricePerSeat:o,isCrdHybridPricing:l,amountFormatted:c,addSeatsButton:d,upgradeButton:_,isInBusinessPlusTrial:u})=>{const{translate:m}=(0,b.Z)(),{routes:p}=(0,i.Xo)(),g=r?"account_summary_price_per_month":"account_summary_yearly_billing_cycle",h=r?"account_summary_price_per_month_value":"account_summary_price_per_year",y=a?"account_summary_autorenewal_no":"account_summary_autorenewal_yes";return(0,E.BX)("div",{sx:{height:"136px",display:"flex",flexDirection:"column",gap:"16px",margin:"15px 0"},children:[(0,E.BX)("div",{sx:{display:"flex",justifyContent:"space-between",gap:"16px"},children:[(0,E.BX)("div",{sx:{flex:"1 1 224px"},children:[(0,E.tZ)(en.C,{label:m(t?"team_account_teamplan_changeplan_plans_plan_current_trial":"account_summary_current_plan_label"),value:e}),t?(0,E.tZ)($t.Q,{as:i.rU,to:p.teamAccountCheckoutRoutePath,sx:{cursor:"pointer"},children:m("team_dashboard_buy_dashlane_button")}):null,_?(0,E.tZ)($t.Q,{as:i.rU,to:p.teamAccountChangePlanRoutePath,children:m("team_account_starter_upgrade_button")}):null]}),(0,E.BX)("div",{sx:{flex:"1 1 224px"},children:[(0,E.tZ)(en.C,{"data-testid":"total-seats",label:m("account_summary_total_seats_label"),value:u?m("account_summary_unlimited_trial_users"):String(n)}),d.withAddSeatsButton?(0,E.tZ)($t.Q,{as:"button",onClick:d.openAddSeatsDialog,sx:{"> button":{cursor:"pointer"}},children:m("team_account_teamplan_changeplan_success_features_actions_add_seats")}):null]}),(0,E.tZ)("div",{sx:{flex:"1 1 224px"},children:(0,E.tZ)(en.C,{label:m("account_summary_billing_cycle_label"),value:t?"-":m(g)})})]}),(0,E.BX)("div",{sx:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"16px"},children:[(0,E.tZ)(en.C,{label:m("account_summary_auto_renewal_label"),value:t?"-":m(y),sx:{gridColumn:"1"}}),l?null:(0,E.tZ)(en.C,{label:m("account_summary_price_per_seat_label"),value:t?m("account_summary_free_trial_badge"):m(h,{price:m.price(s,o,{notation:"standard"})}),sx:{gridColumn:"2"}}),(0,E.tZ)(en.C,{label:m("account_summary_total_price_label"),value:t?"-":m(h,{price:m.price(s,c,{notation:"standard"})}),sx:{gridColumn:l?"2":"3"}})]})]})};var Ci=n(70797),Ei=n(28455);const Zi=54999,ki="sales@dashlane.com",Di={REDEEM_SUCCESS:"team_account_teamplan_upgrade_redeem_success",REDEEM_ERROR:"team_account_teamplan_upgrade_redeem_error",STARTER:"leeloo_teamplan_starter",BUSINESS:"leeloo_teamplan_business",BUSINESS_PLUS:"team_account_teamplan_omnix",TEAM:"leeloo_teamplan_team"},Ti=e=>e>Zi;function Ii(e,t){switch(e){case g.lD.Starter:return t(Di.STARTER);case g.lD.Team:return t(Di.TEAM);case g.lD.BusinessPlus:return t(Di.BUSINESS_PLUS);default:return t(Di.BUSINESS)}}var Ai=n(11538);const wi=({isComputing:e,className:t,price:n})=>{const a=e?(0,E.tZ)(Ai.Z,{size:16,containerStyle:{display:"inline-block",position:"relative"}}):n;return(0,E.tZ)("span",{className:t,children:a})},Oi=({billingDetails:e,additionalSeatsDetails:t})=>{var n,a;const{translate:i}=(0,b.Z)(),r=e.additionalSeats.seatsCount,s=null!=(n=e.additionalSeats.taxes)?n:0,o=i.price(e.currency,s/100),l=s>0,c=e.renewal.value+(null!=(a=e.renewal.taxes)?a:0),d=i.price(e.currency,c/100),_=100*t.reduce(((e,t)=>e+t.costPerSeat*t.numberOfSeats),0),u=i.price(e.currency,_/100),m=_-e.additionalSeats.value,p=_+s-m;return{additionalSeatsCount:r,additionalSeatsTaxesTranslation:o,hasTax:l,renewalTotalPrice:d,tierPriceTranslation:u,proratedDiscountTranslation:i.price(e.currency,m/100),hasProratedDiscount:m>0,dueTodayTranslation:i.price(e.currency,p/100)}};var Ni,Ri,Li,Bi,Mi;const Pi={margin:"24px 0",color:"ds.text.neutral.standard"},Ui=({label:e,labelSx:t,value:n})=>(0,E.BX)(c.k,{sx:Pi,children:[e?(0,E.tZ)("div",{sx:{...t,flex:1},children:e}):null,n?(0,E.tZ)("div",{sx:{flex:0},children:n}):null]}),Xi=({nextBillingDate:e,billingDetails:t,dueNowTranslation:n,seatCountLabel:a,totalSeatCount:i,onAdditionalSeatCountChange:s,isComputingBilling:o,additionalSeatsDetails:l,planType:d,billingCountry:_,initialAdditionalSeatCount:u})=>{const{translate:m}=(0,b.Z)(),{additionalSeatsCount:p,additionalSeatsTaxesTranslation:g,hasTax:h,renewalTotalPrice:y,tierPriceTranslation:x,proratedDiscountTranslation:f,hasProratedDiscount:v}=Oi({billingDetails:t,additionalSeatsDetails:l}),{pollUntilCardUpdate:C}=(0,S.C)({}),[Z,k]=(0,r.useState)(!1),I="US"===_?"team_account_teamplan_upgrade_tax":"team_account_teamplan_vat",A="invoice"===d?"team_account_teamplan_upgrade_invoice_renewal_price":h?"US"===_?"team_account_teamplan_upgrade_renewal_tax_price":"team_account_teamplan_upgrade_renewal_vat_price":"team_account_teamplan_upgrade_renewal_price";return(0,E.BX)(r.Fragment,{children:[(0,E.tZ)(c.k,{sx:{padding:"28px 0",fontSize:4,fontWeight:"bold",color:"ds.text.neutral.catchy"},children:(0,E.tZ)(Wt.w,{inputWidth:"66px",label:a,id:"numberOfSeats",defaultValue:u,minValue:1,onChange:s})}),Ni||(Ni=(0,E.tZ)(z.i,{})),(0,E.tZ)(Ui,{label:m("team_account_teamplan_upgrade_premium_number_of_seats"),value:i}),(0,E.tZ)(Ui,{label:m("team_account_teamplan_upgrade_new_seat",{count:p}),value:x}),h&&(0,E.tZ)(Ui,{label:m(I),value:g}),v&&(0,E.tZ)(Ui,{label:(0,E.BX)(r.Fragment,{children:[(0,E.tZ)(Ce.nvN,{children:m("team_account_teamplan_changeplan_order_summary_prorated_discount")}),(0,E.tZ)(Ce.ua7,{content:m("team_account_teamplan_changeplan_order_summary_prorated_discount_tooltip"),children:(0,E.tZ)(Ce.uMt,{size:16,color:Ce.colors.grey00})})]}),labelSx:{display:"flex",alignItems:"center"},value:f}),(0,E.BX)(r.Fragment,{children:[Ri||(Ri=(0,E.tZ)(z.i,{})),(0,E.tZ)(Ce.nvN,{sx:{margin:"24px 0",fontSize:"18px"},children:m("team_payment_method_dialog_credit_card")}),(0,E.BX)(yn.Z,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[Li||(Li=(0,E.tZ)(ka.I,{b2c:!1,isAppStoreUser:!1,isGooglePlayUser:!1})),(0,E.tZ)(D.z,{icon:Bi||(Bi=(0,E.tZ)(T.JO,{name:"ActionEditOutlined"})),layout:"iconLeading",intensity:"supershy",onClick:()=>{C(),k(!0)},children:Z?(0,E.tZ)(Za.J,{b2c:!1,setPaymentLoading:k,mode:Za.A.UPDATE}):m("team_account_name_edit_label")})]})]}),(0,E.tZ)(c.k,{sx:Pi,children:(0,E.tZ)(rn.k,{title:m(A,{totalPrice:y,totalSeat:i,date:m.shortDate(e,fn._T.LL)})})}),Mi||(Mi=(0,E.tZ)(z.i,{})),(0,E.BX)(c.k,{sx:{marginTop:"24px",fontSize:4},children:[(0,E.tZ)("div",{sx:{flex:1},children:m("team_account_teamplan_upgrade_due_now")}),(0,E.tZ)(wi,{isComputing:o,price:n,className:"totalAmount--Dn0SzKqvJj"})]})]})},zi=(e,t)=>t.startMembers-e.startMembers,Fi=(e,t,n)=>{if(!n)return[];const a=n.slice(0).sort(zi);if(0!==a[a.length-1].startMembers)throw new Error("getAdditionalSeatsCostDetails:: missing tier one in price ranges");if(e<0||t<0)throw new Error("getAdditionalSeatsCostDetails:: number of licences cannot be negative");return a.reduce(((e,t)=>({membersRangeEnd:n,costDetails:a},i)=>{const r=i.startMembers;if(r<=t&&n>e&&t>e){const s=Math.max(Math.max(r-1,e),0),o=Math.min(t,n-1);a.unshift({costPerSeat:i.price/100,numberOfSeats:o-s})}return{membersRangeEnd:r,costDetails:a}})(e,t),{membersRangeEnd:Number.MAX_VALUE,costDetails:[]}).costDetails},qi=(0,r.forwardRef)((function({nextBillingDetails:e,billingDetails:t,isComputingBilling:n,onSeatCountChange:a,numberOfCurrentPaidSlots:i,numberOfCurrentUsedSlots:s,currentPlanPriceRanges:o,planType:l,billingCountry:c,initialNumberOfNewSeats:d},_){var u;const[m,p]=(0,r.useState)(d),[g,h]=(0,r.useState)(!1),{translate:y}=(0,b.Z)();(0,r.useImperativeHandle)(_,(()=>({additionalSeatCount:m})));const S=i+m,x=(0,ln.Z)(e.dateUnix),f=Fi(i,t.renewal.seatsCount,o),v=null!=(u=t.additionalSeats.taxes)?u:0,C=t.additionalSeats.value+v,Z=g?"-":y.price(t.currency,C/100),k=y("team_account_teamplan_upgrade_premium_number_of_additional_seats"),D=g?y("team_account_teamplan_upgrade_premium_buy_more_seats_than_cap",{seatCap:Zi,salesEmail:ki}):m<1?y("team_account_teamplan_upgrade_premium_buy_more_seats_when_premium",{count:1}):s>S?y("team_account_teamplan_upgrade_premium_below_used_seat_count",{usedSeatCount:s}):null;return(0,E.BX)(r.Fragment,{children:[D?(0,E.tZ)(rn.k,{className:"errorToaster--mgQdyQZSK3",title:D,mood:"danger"}):null,(0,E.tZ)(Xi,{nextBillingDate:x,billingDetails:t,dueNowTranslation:Z,seatCountLabel:k,totalSeatCount:S,onAdditionalSeatCountChange:e=>{const t=e<0,n=e>Zi;h(n),p(e),n||t||a(e)},isComputingBilling:n,additionalSeatsDetails:f,planType:null!=l?l:"",billingCountry:c,initialAdditionalSeatCount:d})]})})),Gi=qi;var Vi;const ji=()=>{const{translate:e}=(0,b.Z)();return(0,E.tZ)("div",{children:(0,E.BX)(c.k,{alignItems:"center",flexDirection:"column",justifyContent:"center",sx:{width:"100vw",height:"100vh",backgroundColor:"ds.background.alternate"},children:[Vi||(Vi=(0,E.tZ)(l.Z,{size:"xlarge"})),(0,E.BX)(c.k,{alignItems:"center",flexDirection:"column",justifyContent:"center",gap:"6px",sx:{paddingTop:"22px"},children:[(0,E.tZ)(_.n,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.quiet",children:e("team_account_addseats_processing_copy_line_1")}),(0,E.tZ)(_.n,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.quiet",children:e("team_account_addseats_processing_copy_line_2")})]})]})})};var Wi=n(69340);const Hi=e=>{const{reportTACError:t}=se(),[n,a]=(0,r.useState)({renewal:{seatsCount:0,value:0,taxes:0},additionalSeats:{seatsCount:0,value:0,taxes:0},currency:"usd"}),[i,s]=(0,r.useState)(!1),[o,l]=(0,r.useState)(0),[c,d]=(0,r.useState)(0),_=(0,O.debounce)((n=>{(async n=>{try{var i;const t=await Le.C.computePlanPricing({seats:n});if(!t.success)return;const o={renewal:{seatsCount:(r=t.data).renewal.seatsCount,value:r.renewal.price.value,taxes:r.renewal.price.taxes},additionalSeats:{seatsCount:r.additionalSeats.seatsCount,value:r.additionalSeats.price.value,taxes:r.additionalSeats.price.taxes},currency:r.renewal.price.currency};if(null!==e&&e()!==o.additionalSeats.seatsCount)return;const c=o.additionalSeats.value,_=null!=(i=o.additionalSeats.taxes)?i:0;l(c),d(_),a(o),s(!1)}catch(e){const n=new Error((0,Wi.im)(e));t(n)}var r})(n)}),500);return{billingDetails:n,isComputingBilling:i,amountToPay:o,amountToTax:c,onSeatCountChange:e=>{_(e),s(!0)}}};var $i;const Ki=({onUpgradeSuccess:e,nextBillingDetails:t,numberOfCurrentPaidSlots:n,numberOfCurrentUsedSlots:a,onRequestClose:i,planTier:s,prefilledNumberOfSeatsToBuy:o})=>{const l=(0,r.useRef)(null),[c,d]=(0,r.useState)(!0),[_,g]=(0,r.useState)(!1),{translate:h}=(0,b.Z)(),{reportTACError:S}=se(),x=(0,m.k)(p.o,"getTeamBillingInformation"),{addSeats:f}=(0,te.u)(p.o),v=(0,ge.JS)(),{loading:C,billingCountry:Z}=w(),k=x.status===G.rq.Success?x.data.planDetails.priceRanges:void 0,T=v.status===G.rq.Success?v.data.b2bStatus?.currentTeam?.teamInfo.planType:void 0,I=null!=o?o:1,A=(0,r.useCallback)((()=>{var e;return null!=(e=l?.current?.additionalSeatCount)?e:I}),[]),O=null===l||x.status===G.rq.Loading||v.status===G.rq.Loading||C||void 0===Z,{billingDetails:N,isComputingBilling:R,onSeatCountChange:L}=Hi(A),B=Ii(s,h);(0,r.useEffect)((()=>{(0,y.Nc)(u.PageView.TacAccountBuy)}),[]),(0,r.useEffect)((()=>{if(x.status===G.rq.Error){const e=new Error("Error retrieving TeamBillingInformation to update price ranges");S(e)}}),[x]),(0,r.useEffect)((()=>{L(A())}),[A]);const M=Fi(n,N.renewal.seatsCount,k);if(O)return null;const P=(0,E.BX)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"flex-end",maxWidth:"100%"},children:[(0,E.tZ)(D.z,{intensity:"quiet",mood:"neutral",size:"medium",onClick:i,sx:{marginRight:"8px"},children:h("team_account_teamplan_upgrade_premium_cancel")}),(0,E.tZ)(D.z,{size:"medium",onClick:async()=>{d(!1),g(!0),"success"===(await f({seats:A()})).tag&&e(M,N)},id:"buy-seats-button",children:h("team_account_teamplan_upgrade_buy_seat",{count:A()})})]});return(0,E.BX)(r.Fragment,{children:[_?$i||($i=(0,E.tZ)(ji,{})):null,c?(0,E.tZ)(Ei.o,{showCloseIcon:!0,footer:P,title:h("team_account_teamplan_upgrade_add_seats_title",{plan:B}),isOpen:!0,onRequestClose:i,children:(0,E.tZ)(Gi,{ref:l,planType:T,nextBillingDetails:t,billingDetails:N,isComputingBilling:R,onSeatCountChange:L,numberOfCurrentPaidSlots:n,numberOfCurrentUsedSlots:a,currentPlanPriceRanges:k,billingCountry:Z,initialNumberOfNewSeats:I})}):null]})};var Yi=n(67668),Qi=n(14856);const Ji=({cardTitle:e,cardDescription:t,iconName:n})=>(0,E.BX)(r.Fragment,{children:[(0,E.tZ)(Ce.dDn,{sx:{alignSelf:"center"},children:(0,E.tZ)(Qi.v,{name:n,size:"medium",mood:"brand"})}),(0,E.BX)(Ce.dDn,{children:[(0,E.tZ)(_.n,{textStyle:"ds.body.standard.strong",children:e}),(0,E.tZ)(_.n,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.quiet",sx:{marginTop:"4px"},children:t})]})]});var er,tr,nr;const ar={marginTop:"16px","&:hover":{cursor:"pointer",borderWidth:"2px",borderColor:"ds.border.brand.standard.hover"}},ir={width:"100%",padding:"20px 16px"},rr=({handleClose:e,openUpgradeDialog:t})=>{const[n,a]=(0,r.useState)(!1),[i,s]=(0,r.useState)(!1),{translate:o}=(0,b.Z)(),{loading:c,hasCreditCardPaymentMethod:d,isExpired:u,pollUntilCardUpdate:m}=(0,S.C)({handleCardUpdate:t}),p=d?Za.A.REPLACE:Za.A.ADD,g=er||(er=(0,E.tZ)(D.z,{intensity:"supershy",size:"large",layout:"iconOnly",icon:(0,E.tZ)(T.JO,{name:"ArrowRightOutlined",color:"ds.text.neutral.standard"})}));return c?tr||(tr=(0,E.tZ)(l.Z,{})):(0,E.BX)(J.Vq,{isOpen:!0,closeActionLabel:o("_common_dialog_dismiss_button"),onClose:e,title:o("team_payment_method_dialog_buy_seats"),"aria-describedby":"dialogContent",children:[(0,E.tZ)(_.n,{children:o("team_payment_method_dialog_title")}),d?(0,E.tZ)(Ce.Zbd,{sx:ar,onClick:()=>{u?(m(),s(!0)):t()},children:(0,E.BX)(Ce.T5p,{gap:"12px",gridTemplateColumns:"1fr 60px",alignItems:"center",sx:ir,children:[nr||(nr=(0,E.tZ)(Ce.dDn,{children:(0,E.tZ)(Yi.I,{b2b:!0,hideTitle:!0,hideUpdateButton:!0})})),(0,E.tZ)(Ce.dDn,{sx:{margin:"auto"},children:u&&i?(0,E.tZ)(D.z,{intensity:"supershy",size:"large",children:(0,E.tZ)(Za.J,{b2c:!1,setPaymentLoading:s,mode:Za.A.UPDATE})}):g})]})}):null,(0,E.tZ)(Ce.Zbd,{sx:ar,onClick:()=>{m(),a(!0)},children:(0,E.BX)(Ce.T5p,{gap:"12px",gridTemplateColumns:"40px 1fr 60px",sx:ir,children:[(0,E.tZ)(Ji,{cardTitle:o(d?"team_payment_method_dialog_another_credit_card":"team_payment_method_dialog_credit_card"),cardDescription:o(d?"team_payment_method_dialog_replace_credit_card":"team_payment_method_dialog_secondary_payment"),iconName:"ItemPaymentOutlined"}),(0,E.tZ)(Ce.dDn,{sx:{margin:"auto"},children:n?(0,E.tZ)(D.z,{intensity:"supershy",size:"large",children:(0,E.tZ)(Za.J,{b2c:!1,setPaymentLoading:a,mode:p})}):g})]})}),(0,E.tZ)(Ce.Zbd,{sx:ar,onClick:()=>(0,W.Yo)(me.i1),children:(0,E.BX)(Ce.T5p,{gap:"12px",gridTemplateColumns:"40px 1fr 60px",sx:ir,children:[(0,E.tZ)(Ji,{cardTitle:o("team_account_invoice_payment"),cardDescription:o("team_payment_method_dialog_support_team"),iconName:"ItemTaxNumberOutlined"}),(0,E.tZ)(Ce.dDn,{sx:{margin:"auto"},children:g})]})})]})};var sr,or,lr,cr,dr,_r,ur,mr,pr;const gr=({numberOfCurrentPaidSlots:e,onClose:t,onUpgradeSuccess:n,prefilledNumberOfSeatsToBuy:a})=>{var i,s;const{translate:o}=(0,b.Z)(),d=(0,h.s)(),u=(0,m.k)(Vt.K,"getPlanPricingDetails"),{computePlanPricingDetails:y}=(0,te.u)(Vt.K),{addSeats:x}=(0,te.u)(p.o),{pollUntilCardUpdate:f}=(0,S.C)({}),{billingCountry:v}=w(),[C,Z]=(0,r.useState)(!1),[k,I]=(0,r.useState)(null!=a?a:1),[A,O]=(0,r.useState)(!1),[N,R]=(0,r.useState)(!1),L=u.status===G.rq.Loading;if((0,r.useEffect)((()=>{y({numberOfSeats:k})}),[k]),!d||!v||u.status===G.rq.Error||!u.data)return null;const{spaceTier:B,nextBillingDetails:M,billingType:P,planDetails:U}=d,{renewal:X,additionalSeats:F,currency:q}=u.data,V=(0,ln.Z)(M.dateUnix),j=Ii(B,o),W=Fi(e,X.seatsCount,U.priceRanges),H=e+k,$=null!=(i=F.taxes)?i:0,K=100*W.reduce(((e,t)=>e+t.costPerSeat*t.numberOfSeats),0),Y=o.price(q,K/100),Q=!!F.taxes,ee=Q?"US"===v?"team_account_teamplan_upgrade_renewal_tax_price":"team_account_teamplan_upgrade_renewal_vat_price":"team_account_teamplan_upgrade_renewal_price",ae=o.price(q,$/100),ie=P===g.qo.Invoice?"team_account_teamplan_upgrade_invoice_renewal_price":ee,re=K-F.value,se=o.price(q,re/100),oe=X.value+(null!=(s=X.taxes)?s:0),le=o.price(q,oe/100),ce=F.value+$,de=A?"-":o.price(q,ce/100),_e=re>0;return N?sr||(sr=(0,E.tZ)(ji,{})):(0,E.BX)(J.Vq,{isOpen:!0,onClose:t,closeActionLabel:o("_common_dialog_dismiss_button"),title:o("team_account_teamplan_upgrade_add_seats_title",{plan:j}),actions:{primary:(0,E.tZ)(D.z,{onClick:async()=>{R(!0);const e=await x({seats:k});(0,ne.d6)(e)&&(R(!1),n(W,{renewal:X,additionalSeats:F,currency:q}))},id:"buy-seats-button",children:o("team_account_teamplan_upgrade_buy_seat",{count:k})}),secondary:(0,E.tZ)(D.z,{onClick:t,children:o("team_account_teamplan_upgrade_premium_cancel")})},children:[(0,E.tZ)(c.k,{sx:{padding:"15px 0",fontSize:4,fontWeight:"bold",color:"ds.text.neutral.catchy"},children:(0,E.tZ)(Wt.w,{inputWidth:"66px",id:"numberOfSeats",defaultValue:null!=a?a:1,minValue:1,onChange:async e=>{const t=e<0,n=e>Zi;O(n),n||t||I(e)},label:o("team_account_teamplan_upgrade_premium_number_of_additional_seats")})}),or||(or=(0,E.tZ)(z.i,{})),(0,E.BX)(c.k,{gap:"16px",flexDirection:"column",children:[(0,E.BX)(c.k,{justifyContent:"space-between",flexDirection:"row",children:[(0,E.tZ)(_.n,{color:"ds.text.neutral.catchy",children:o("team_account_teamplan_upgrade_premium_number_of_seats")}),(0,E.tZ)(_.n,{color:"ds.text.neutral.catchy",children:H})]}),(0,E.BX)(c.k,{justifyContent:"space-between",flexDirection:"row",children:[(0,E.tZ)(_.n,{color:"ds.text.neutral.catchy",children:o("team_account_teamplan_upgrade_new_seat",{count:k})}),L?lr||(lr=(0,E.tZ)(l.Z,{size:"xsmall"})):(0,E.tZ)(_.n,{color:"ds.text.neutral.catchy",children:Y})]}),Q?(0,E.BX)(c.k,{justifyContent:"space-between",flexDirection:"row",children:[(0,E.tZ)(_.n,{color:"ds.text.neutral.catchy",children:o("US"===v?"team_account_teamplan_upgrade_tax":"team_account_teamplan_vat")}),L?cr||(cr=(0,E.tZ)(l.Z,{size:"xsmall"})):(0,E.tZ)(_.n,{color:"ds.text.neutral.catchy",children:ae})]}):null,_e?(0,E.BX)(c.k,{justifyContent:"space-between",flexDirection:"row",children:[(0,E.BX)(_.n,{color:"ds.text.neutral.catchy",sx:{display:"flex",alignItems:"center",gap:"5px"},children:[o("team_account_teamplan_changeplan_order_summary_prorated_discount"),(0,E.tZ)(T.JO,{name:"FeedbackInfoOutlined",tooltip:o("team_account_teamplan_changeplan_order_summary_prorated_discount_tooltip"),size:"xsmall"})]}),L?dr||(dr=(0,E.tZ)(l.Z,{size:"xsmall"})):(0,E.tZ)(_.n,{color:"ds.text.neutral.catchy",children:se})]}):null]}),_r||(_r=(0,E.tZ)(z.i,{})),(0,E.BX)(c.k,{gap:"16px",flexDirection:"column",children:[(0,E.tZ)(_.n,{textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:o("team_payment_method_dialog_credit_card")}),(0,E.BX)(yn.Z,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[ur||(ur=(0,E.tZ)(ka.I,{b2c:!1,isAppStoreUser:!1,isGooglePlayUser:!1})),(0,E.tZ)(D.z,{icon:mr||(mr=(0,E.tZ)(T.JO,{name:"ActionEditOutlined"})),layout:"iconLeading",intensity:"supershy",onClick:()=>{f(),Z(!0)},children:C?(0,E.tZ)(Za.J,{b2c:!1,setPaymentLoading:Z,mode:Za.A.UPDATE}):o("team_account_name_edit_label")})]})]}),(0,E.tZ)(rn.k,{sx:{marginTop:"16px"},mood:"neutral",title:o(ie,{totalPrice:le,totalSeat:H,date:o.shortDate(V,fn._T.LL)})}),(0,E.BX)(c.k,{justifyContent:"space-between",flexDirection:"row",sx:{marginTop:"16px"},children:[(0,E.tZ)(_.n,{textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:o("team_account_teamplan_upgrade_due_now")}),L?pr||(pr=(0,E.tZ)(l.Z,{size:"xsmall"})):(0,E.tZ)(_.n,{textStyle:"ds.specialty.spotlight.small",children:de})]})]})},hr=({nextBillingDetails:e,numberOfCurrentPaidSlots:t,numberOfCurrentUsedSlots:n,planTier:a,prefilledNumberOfSeatsToBuy:i,isAddSeatsDialogOpen:r,isChoosePaymentMethodDialogOpen:s,setIsAddSeatsDialogOpen:o,setIsChoosePaymentMethodDialogOpen:l})=>{const c=(0,Pe.o)(Ci.P.ComputePlanPricingMigration),{setSeatDetails:d,setIsAddSeatsSuccessPageOpen:_}=Ut(),u=()=>{o(!1)},m=(e,t)=>{d({lastAdditionalSeatsDetails:e,lastBillingDetails:t}),o(!1),_(!0)};return r?c?(0,E.tZ)(gr,{numberOfCurrentPaidSlots:t,onUpgradeSuccess:m,onClose:u,prefilledNumberOfSeatsToBuy:i}):(0,E.tZ)(Ki,{nextBillingDetails:e,numberOfCurrentPaidSlots:t,numberOfCurrentUsedSlots:n,onUpgradeSuccess:m,onRequestClose:u,planTier:a,prefilledNumberOfSeatsToBuy:i}):s?(0,E.tZ)(rr,{openUpgradeDialog:()=>{o(!0),l(!1)},handleClose:()=>{l(!1)}}):null};var yr;const br="account_summary_update_payment_method",Sr=()=>{var e,t;const{translate:n}=(0,b.Z)(),{search:a}=(0,Ve.TH)(),i=(0,h.s)(),o=(0,ge.lZ)(),l=(0,ge.JS)(),c=(0,$.C)(),{isExpired:d,pollUntilCardUpdate:_}=(0,S.C)({}),[m,p]=(0,r.useState)(!1),[x,f]=(0,r.useState)(!1),[v,C]=(0,r.useState)(!1),Z=()=>{i?.billingType===g.qo.Invoice?C(!0):f(!0)},k=(0,r.useRef)(!1),T=!k.current&&i?.billingType&&a?.includes("showSeatsDialog");if((0,r.useEffect)((()=>{if(T){k.current=!0;const e=setTimeout((()=>{Z()}),500);return()=>clearTimeout(e)}}),[i?.billingType]),!i||o.isLoading||l.status!==s.rq.Success||!l.data.b2bStatus||!c)return null;const I=ui(o,l.data.b2bStatus,c,d),{badgeLabel:A,badgeMood:w,supportingDescription:O,dateHeader:N,alertInfobox:R,withCtaButton:L}=((e,t,n,a)=>{const i=(0,ln.Z)(n.dateUnix),{months:r=0,days:s=0,years:o=0}=(e=>{const t=(0,_i.Z)({start:Date.now(),end:e});return{days:t.days,months:t.months,years:t.years}})(i),l=a.daysLeftInTrial,c=`\n  ${o>0?e("account_summary_years_left",{count:o}):""}\n  ${e(hi,{count:r})} ${e(gi,{count:s})}`;switch(t){case"ACTIVE":return{badgeLabel:e(mi),badgeMood:"positive",supportingDescription:c,dateHeader:e(xi,{date:e.shortDate(i,fn.qG.ll)})};case"ACTIVE CANCELED":return{badgeLabel:e(mi),badgeMood:"positive",supportingDescription:`${e(hi,{count:r})} ${e(gi,{count:s})}`,dateHeader:e(bi,{date:e.shortDate(i,fn.qG.ll)})};case"ACTIVE CARD EXPIRED":return{badgeLabel:e(mi),badgeMood:"positive",supportingDescription:`${e(hi,{count:r})} ${e(gi,{count:s})}`,dateHeader:e(xi,{date:e.shortDate(i,fn.qG.ll)}),alertInfobox:{title:e("account_summary_active_cc_expired_title",{date:e.shortDate(i,fn.qG.LL)}),description:e("account_summary_active_cc_expired_description"),icon:"FeedbackWarningOutlined",mood:"warning"}};case"DISCONTINUED CANCELED":return{badgeLabel:e(pi),badgeMood:"danger",supportingDescription:e(yi,{count:Math.abs(l)}),dateHeader:e(Si,{date:e.shortDate(i,fn.qG.ll)})};case"DISCONTINUED CARD EXPIRED":return{badgeLabel:e(pi),badgeMood:"danger",supportingDescription:e(yi,{count:Math.abs(l)}),dateHeader:e(Si,{date:e.shortDate(i,fn.qG.ll)}),alertInfobox:{title:e("account_summary_discontinued_cc_expired_title"),description:e("account_summary_discontinued_cc_expired_description"),icon:"FeedbackFailOutlined",mood:"danger"}};case"DISCONTINUED TRIAL":return{badgeLabel:e("account_summary_free_trial_ended_badge"),badgeMood:"danger",supportingDescription:e(yi,{count:Math.abs(l)}),dateHeader:e(Si,{date:e.shortDate(i,fn.qG.ll)}),withCtaButton:!0};case"GRACE PERIOD":return{badgeLabel:e("account_summary_extended_free_trial_badge"),badgeMood:"warning",supportingDescription:e(gi,{count:l}),dateHeader:e(bi,{date:e.shortDate(i,fn.qG.ll)}),withCtaButton:!0};case"TRIAL":return{badgeLabel:e("account_summary_free_trial_badge"),badgeMood:"brand",supportingDescription:e(gi,{count:l}),dateHeader:e(bi,{date:e.shortDate(i,fn.qG.ll)}),withCtaButton:!0}}})(n,I,i.nextBillingDetails,c),B=null!=(e=l.data.b2bStatus.currentTeam?.isRenewalStopped)&&e,{currency:M,amountFormatted:P,pricePerSeat:U}=i.nextBillingDetails,X="TRIAL"===I||"GRACE PERIOD"===I||"DISCONTINUED TRIAL"===I,F=["ACTIVE","ACTIVE CANCELED","ACTIVE CARD EXPIRED"].includes(I),q=i.spaceTier!==g.lD.Starter&&i.spaceTier!==g.lD.Standard&&F,G=[g.lD.Starter,g.lD.Team,g.lD.Standard].includes(i.spaceTier)&&F,V=(e=>{var t;const n=null!=(t=new URLSearchParams(e).get("seatsToBuy"))?t:"";let a=parseInt(n,10);return isNaN(a)&&(a=void 0),a})(a),j=null!=(t=i.planDetails.isCrdHybridPricing)&&t,W=((e,t)=>e===g.lD.Team?`Dashlane ${t("team_account_teamplan_team")}`:e===g.lD.Starter?`Dashlane ${t("team_account_teamplan_changeplan_plans_starter_name")}`:e===g.lD.Standard?`Dashlane ${t("team_account_teamplan_standard")}`:e===g.lD.BusinessPlus?`Dashlane ${t("team_account_teamplan_omnix")}`:`Dashlane ${t("team_account_teamplan_business")}`)(i.spaceTier,n),H="monthly"===i.planDetails.duration,K=c.spaceTier===g.lD.BusinessPlus&&c.isFreeTrial;return(0,E.BX)(r.Fragment,{children:[R?(0,E.tZ)(rn.k,{sx:{marginBottom:"16px"},title:R.title,size:"large",description:R.description,mood:R.mood,icon:R.icon,actions:[(0,E.tZ)(D.z,{onClick:()=>{(0,y.Kz)(new u.UserClickEvent({clickOrigin:"danger"===R?.mood?u.ClickOrigin.SubscriptionExpiredBanner:u.ClickOrigin.UpdateCreditCardReminder,button:u.Button.UpdatePaymentMethod})),_(),p(!0)},children:m?(0,E.tZ)(Za.J,{b2c:!1,setPaymentLoading:p}):n(br)},n(br))]}):null,(0,E.BX)(yn.Z,{sx:{maxWidth:"752px",gap:"24px"},children:[(0,E.tZ)(fi,{translate:n,badgeLabel:A,badgeMood:w,supportingDescription:O,dateHeader:N,withCtaButton:L}),yr||(yr=(0,E.tZ)(z.i,{})),(0,E.tZ)(vi,{planName:W,isMonthlyPlan:H,hideValue:X,seatsNumber:i.seatsNumber,isRenewalStopped:B,currency:M,isCrdHybridPricing:j,pricePerSeat:U,amountFormatted:P,addSeatsButton:{withAddSeatsButton:q,openAddSeatsDialog:()=>{(0,y.Kz)(new u.UserClickEvent({clickOrigin:u.ClickOrigin.AccountStatus,button:u.Button.BuySeats})),Z()}},upgradeButton:G,isInBusinessPlusTrial:K})]}),(0,E.tZ)(hr,{planTier:i.spaceTier,prefilledNumberOfSeatsToBuy:V,nextBillingDetails:i.nextBillingDetails,numberOfCurrentPaidSlots:i.seatsNumber,numberOfCurrentUsedSlots:i.usersToBeRenewedCount,isAddSeatsDialogOpen:x,isChoosePaymentMethodDialogOpen:v,setIsAddSeatsDialogOpen:f,setIsChoosePaymentMethodDialogOpen:C})]})},xr=()=>{const{data:e,status:t}=(0,m.k)(p.o,"getTeamName");return t!==G.rq.Success?null:e};var fr=n(45364);let vr=function(e){return e[e.DUPLICATE=0]="DUPLICATE",e[e.SOMETHING_WRONG=1]="SOMETHING_WRONG",e[e.EMPTY=2]="EMPTY",e[e.MALFORMED=3]="MALFORMED",e}({});const Cr=(e,t)=>{switch(t){case vr.DUPLICATE:return e("team_account_name_already_exists");case vr.EMPTY:return e("team_account_name_is_empty");case vr.MALFORMED:return e("team_account_name_is_malformed");case vr.SOMETHING_WRONG:default:return e("team_account_name_error_something_wrong")}},Er=({isOpen:e,setIsOpen:t,setTeamName:n,signalNameChangeSuccess:a,teamName:i,teamId:s})=>{const[o,l]=(0,r.useState)(i),[c,d]=(0,r.useState)(),{editTeamName:u}=(0,te.u)(p.o),{translate:m}=(0,b.Z)();(0,r.useEffect)((()=>{l(i)}),[i]);const g=()=>{t(!1),l(i),d(void 0)};return(0,E.BX)(J.Vq,{isOpen:e,actions:{primary:{children:m("account_summary_company_details_name_dialog_save_button"),onClick:()=>(async e=>{if(!e){const e=Cr(m,vr.EMPTY);throw d(e),new Error(e)}const i=await u({teamId:s,newTeamName:e});if((0,ne.hx)(i)){if(a(!1),i.error.tag===fr.LP.DUPLICATE){const e=Cr(m,vr.DUPLICATE);throw d(e),new Error(e)}if(i.error.tag===fr.LP.INVALID_TEAM_SETTING_VALUE){const e=Cr(m,vr.MALFORMED);throw d(e),new Error(e)}{const e=Cr(m,vr.SOMETHING_WRONG);throw d(e),new Error(e)}}t(!1),a(!0),n(e)})(o)},secondary:{children:m("account_summary_company_details_name_dialog_cancel_button"),onClick:g}},title:m("account_summary_company_details_name_dialog_title"),closeActionLabel:m("account_summary_company_details_name_dialog_close_label"),onClose:g,children:[(0,E.tZ)(_.n,{children:m("account_summary_company_details_name_dialog_desc")}),(0,E.tZ)(Tn.n,{"data-testid":"company-name",label:m("account_summary_company_details_name_dialog_field_label"),value:o,onChange:e=>{d(void 0),l(e.target.value)},sx:{marginTop:"16px"},placeholder:m("account_summary_company_details_name_dialog_field_placeholder"),error:!!c,feedback:c})]})},Zr=({hasPermission:e,style:t,teamId:n})=>{const[a,i]=(0,r.useState)(""),[s,l]=(0,r.useState)(!1),[c,d]=(0,r.useState)(!1),_=xr(),{translate:u}=(0,b.Z)(),{showToast:m}=(0,o.p)();if((0,r.useEffect)((()=>{_&&i(_)}),[_]),(0,r.useEffect)((()=>{c&&m({mood:"brand",description:u("account_summary_company_details_name_success")})}),[c,m,u]),null===a||!n)return null;const p=e("ALL");return(0,E.BX)(r.Fragment,{children:[(0,E.BX)("div",{sx:t.DISPLAY_GROUP,children:[(0,E.tZ)(en.C,{"data-testid":"company-name-display",label:u("account_summary_company_details_name_label"),value:a,placeholder:u("account_summary_company_details_empty_field_placeholder")}),p?(0,E.tZ)($t.Q,{onClick:()=>{l(!0)},as:"button",sx:t.LINK_BUTTON,children:u("account_summary_company_details_name_edit_button")}):null]}),(0,E.tZ)(Er,{isOpen:s,setIsOpen:l,signalNameChangeSuccess:d,teamName:a,setTeamName:i,teamId:n})]})};var kr=n(77810);const Dr=e=>e===G.rq.Success,Tr=e=>Array.isArray(e);var Ir=n(99706);const Ar="team_account_vat_number_error_something_wrong",wr=({isOpen:e,setIsOpen:t,setVATNumber:n,signalVATChangeSuccess:a,VATNumber:i,upsertVATNumber:s,deleteVATNumber:o})=>{const[l,c]=(0,r.useState)(),[d,u]=(0,r.useState)(),{translate:m}=(0,b.Z)();(0,r.useEffect)((()=>{i&&c(i)}),[i]);const p=()=>{t(!1),c(i),u(void 0)};return(0,E.BX)(J.Vq,{isOpen:e,actions:{primary:{children:m("account_summary_company_details_vat_dialog_save_button"),onClick:()=>(async e=>{const r=m(Ar);let l;if(e){if(!_a(e)){const e=m("team_account_vat_number_invalid");throw u(e),new Error(e)}l=await s({newVATNumber:e})}else{if(!i)throw u(r),new Error(r);l=await o()}if((0,ne.hx)(l)){a(!1);const e=m(Ar);throw u(e),new Error(e)}t(!1),a(!0),n(e)})(null!=l?l:"")},secondary:{children:m("account_summary_company_details_vat_dialog_cancel_button"),onClick:p}},title:m("account_summary_company_details_vat_dialog_title"),closeActionLabel:m("account_summary_company_details_vat_dialog_close_label"),onClose:p,children:[(0,E.tZ)(_.n,{children:m("account_summary_company_details_vat_dialog_desc")}),(0,E.tZ)(Tn.n,{"data-testid":"enter-vat-number",label:m("account_summary_company_details_vat_dialog_field_label"),value:l,onChange:e=>{u(void 0),c(e.target.value)},sx:{marginTop:"16px"},placeholder:m("account_summary_company_details_vat_dialog_field_placeholder"),error:!!d,feedback:d,hasClearAction:!0,clearActionLabel:m("account_summary_company_details_vat_dialog_clear_label")})]})},Or=({style:e})=>{const[t,n]=(0,r.useState)(""),[a,i]=(0,r.useState)(!1),[s,l]=(0,r.useState)(!1),{translate:c}=(0,b.Z)(),{showToast:d}=(0,o.p)(),_=(()=>{const{loading:e,billingCountry:t}=w(),{data:n,status:a,error:i}=(0,m.k)(gn.a,"getTeamVat"),{deleteTeamVat:r,upsertTeamVat:s}=(0,te.u)(gn.a),o={isLoading:!1,isErrored:!1,isNotApplicable:!1,teamVAT:""};if(e||a===G.rq.Loading||!r||!s)return{...o,isLoading:!0};const l=a===G.rq.Error&&i.tag===Ir.pe.VatNumberNotFound;return a!==G.rq.Error||l?"US"!==t?{...o,teamVAT:l?"":null!=n?n:"",deleteTeamVAT:r,upsertTeamVAT:s}:{...o,isNotApplicable:!0}:{...o,isErrored:!0}})(),{isLoading:u,isErrored:p,teamVAT:g,upsertTeamVAT:h,isNotApplicable:y,deleteTeamVAT:S}=_;return(0,r.useEffect)((()=>{u||p||n(g)}),[p,u,g]),(0,r.useEffect)((()=>{s&&d({mood:"brand",description:c("account_summary_company_details_vat_success")})}),[s,d,c]),u||p||!h||!S||y?null:(0,E.BX)(r.Fragment,{children:[(0,E.BX)("div",{sx:e.DISPLAY_GROUP,children:[(0,E.tZ)(en.C,{"data-testid":"vat-number",label:c("account_summary_company_details_vat_number_label"),value:t,placeholder:c("account_summary_company_details_empty_field_placeholder")}),(0,E.tZ)($t.Q,{onClick:()=>{i(!0)},as:"button",sx:e.LINK_BUTTON,children:c(t?"account_summary_company_details_vat_number_edit_button":"account_summary_company_details_vat_number_add_button")})]}),(0,E.tZ)(wr,{isOpen:a,setIsOpen:i,signalVATChangeSuccess:l,VATNumber:t,setVATNumber:n,upsertVATNumber:h,deleteVATNumber:S})]})};var Nr=n(24750);const Rr=e=>e.trim().toLocaleLowerCase(),Lr="team_account_billing_admin_search_field_placeholder",Br=({defaultSelected:e,handleConfirmClick:t,handleClose:n,allMembersCount:a,membersList:s})=>{const{translate:o}=(0,b.Z)(),{routes:l}=(0,i.Xo)(),[d,u]=(0,r.useState)(e),[m,p]=(0,r.useState)(""),[g,h]=(0,r.useState)([]),[y,S]=(0,r.useState)(!1);(0,r.useEffect)((()=>{h(((e,t)=>""===t.trim()?e:e.filter((({login:e})=>Rr(e).includes(Rr(t)))))(s,m).slice(0,5))}),[s,m]);const x=!g.length||e===d;return(0,E.tZ)(J.Vq,{isOpen:!0,title:o("team_account_billing_admin_dialog_title"),actions:{primary:{children:o("team_account_billing_admin_dialog_confirm"),onClick:()=>t(d),disabled:x}},onClose:n,closeActionLabel:o("_common_dialog_dismiss_button"),children:(0,E.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"1.5em"},children:[(0,E.tZ)(_.n,{color:"ds.text.neutral.quiet",children:o("team_account_billing_admin_dialog_warning")}),(0,E.tZ)(Nr.U,{onChange:({target:{value:e}})=>{p(e),y||S(!0)},label:o(Lr),placeholder:o(Lr)}),g.length>0?(0,E.BX)(c.k,{gap:"5px",flexDirection:"column",children:[(0,E.tZ)(_.n,{color:"ds.text.neutral.quiet",children:o("team_account_billing_admin_search_results_count",{count:g.length,totalCount:a})}),(0,E.tZ)(Ca.E,{value:d,onChange:({target:{value:e}})=>{u(e)},groupName:"billingAdmins",children:(0,E.tZ)(c.k,{gap:"5px",flexDirection:"column",children:g.map((e=>{const{login:t}=e,n=(e=>e.isTeamCaptain?"team_members_row_captain":e.isGroupManager?"team_members_row_group_manager":null)(e);return(0,E.BX)(c.k,{sx:{alignItems:"center",gap:"4px"},children:[(0,E.tZ)(Ea.Y,{value:t,label:t,"data-testid":"billing-email"}),n?(0,E.tZ)(pe.C,{label:o(n),sx:{marginTop:"8px"}}):null]},t)}))})}),g.length<a?(0,E.BX)("div",{sx:{display:"flex",flexDirection:"row",gap:"8px",alignItems:"center"},children:[(0,E.tZ)(_.n,{color:"ds.text.neutral.quiet",children:o("team_account_billing_admin_help")}),(0,E.tZ)($t.Q,{as:i.rU,to:l.teamMembersRoutePath,onClick:n,children:o("team_account_billing_admin_link_to_members_page")})]}):null]}):null,0===g.length?(0,E.tZ)(_.n,{children:o("team_account_billing_admin_search_no_match")}):null]})})},Mr=({style:e,teamId:t,hasPermission:n})=>{var a,i;const[s,l]=(0,r.useState)(""),[c,d]=(0,r.useState)(!1),{status:_,data:u}=(0,m.k)(Fa.L,"getMembersList",{teamId:t.toString()}),{translate:g}=(0,b.Z)(),{showToast:h}=(0,o.p)(),{updateBillingAdmin:y}=(0,te.u)(p.o);if((0,r.useEffect)((()=>{var e;_!==G.rq.Success||s||l(null!=(e=u?.billingAdmins[0])?e:"")}),[s,_]),_!==G.rq.Success)return null;const S=n("ALL");return(0,E.BX)(r.Fragment,{children:[(0,E.BX)("div",{sx:e.DISPLAY_GROUP,children:[(0,E.tZ)(en.C,{"data-testid":"billing-contact",className:"automation-tests-tac-billing",label:g("account_summary_company_details_billing_contact_label"),value:null!=s?s:"",placeholder:g("account_summary_company_details_empty_field_placeholder"),sx:{"& input":{textOverflow:"ellipsis"}}}),S?(0,E.tZ)($t.Q,{onClick:()=>{d(!0)},as:"button",sx:e.LINK_BUTTON,children:g("account_summary_company_details_billing_contact_edit_button")}):null]}),c?(0,E.tZ)(Br,{defaultSelected:s,handleClose:()=>{d(!1)},handleConfirmClick:async e=>{if(s===e)return;d(!1);const t=await y({newAdminEmail:e});(0,ne.hx)(t)?h({mood:"danger",description:g("team_account_billing_admin_notification_something_wrong")}):(h({mood:"brand",description:g("team_account_billing_admin_notification_success")}),l(e))},membersList:null!=(a=u?.members)?a:[],allMembersCount:null!=(i=u?.members.length)?i:0}):null]})};var Pr;const Ur={CONTAINER:{display:"flex",justifyContent:"space-between",gap:"16px",marginBottom:"16px"},DISPLAY_GROUP:{display:"flex",flexDirection:"column",flex:"1 1 224px"},LINK_BUTTON:{"> button":{cursor:"pointer"}}},Xr=()=>{const{translate:e}=(0,b.Z)(),t=(0,Ga.V)(),n=(()=>{const{data:e,status:t}=(0,m.k)(kr.J,"userPermissions");return{status:t,getUserPermissions:()=>Dr(t)&&Tr(e)?null!=e?e:[]:null,hasPermission:n=>Dr(t)&&Tr(e)&&e.includes(n),hasAnyPermission:n=>Dr(t)&&Tr(e)&&n.some((t=>e.includes(t))),hasAllPermissions:n=>Dr(t)&&Tr(e)&&n.every((t=>e.includes(t)))}})(),{hasPermission:a}=n;return t.status!==G.rq.Success||null===t.teamId?null:(0,E.BX)(yn.Z,{children:[(0,E.tZ)(d.X,{as:"h2",textStyle:"ds.title.section.medium",color:"ds.text.neutral.catchy",children:e("account_summary_company_details_header")}),(0,E.BX)("div",{sx:Ur.CONTAINER,children:[(0,E.tZ)(Zr,{style:Ur,teamId:t.teamId,hasPermission:a}),Pr||(Pr=(0,E.tZ)(Or,{style:Ur})),(0,E.tZ)(Mr,{style:Ur,teamId:t.teamId,hasPermission:a})]}),(0,E.tZ)(_.n,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.quiet",children:e("account_summary_company_details_billing_contact_info")})]})};var zr,Fr=n(62425);const qr=({label:e,value:t,...n})=>(0,E.BX)(c.k,{justifyContent:"flex-end",...n,children:[e?(0,E.tZ)(c.k,{alignItems:"center",sx:{flex:1},children:e}):null,t?(0,E.tZ)(c.k,{alignItems:"center",children:t}):null]}),Gr=({billingDetails:e,additionalSeatsDetails:t})=>{const{translate:n}=(0,b.Z)(),{additionalSeatsCount:a,additionalSeatsTaxesTranslation:i,hasTax:r,tierPriceTranslation:s,proratedDiscountTranslation:o,hasProratedDiscount:l,dueTodayTranslation:u}=Oi({billingDetails:e,additionalSeatsDetails:t});return(0,E.BX)(c.k,{flexDirection:"column",gap:"32px",sx:f,children:[(0,E.tZ)(qr,{alignItems:"end",label:(0,E.tZ)(d.X,{as:"h2",color:"ds.text.neutral.catchy",children:n("team_account_addseats_success_order_summary_header")}),value:(0,E.tZ)(_.n,{textStyle:"ds.title.supporting.small",color:"ds.text.neutral.quiet",children:(0,sa.Z)(new Date,"MM/dd/yyyy")})}),(0,E.BX)(c.k,{flexDirection:"column",gap:"16px",children:[(0,E.tZ)(qr,{label:(0,E.tZ)(_.n,{color:"ds.text.neutral.standard",children:n("team_account_teamplan_upgrade_new_seat",{count:a})}),value:(0,E.tZ)(_.n,{color:"ds.text.neutral.standard",children:s})}),r?(0,E.tZ)(qr,{label:(0,E.tZ)(_.n,{color:"ds.text.neutral.standard",children:n("team_account_addseats_success_order_summary_tax")}),value:(0,E.tZ)(_.n,{color:"ds.text.neutral.standard",children:i})}):null,l?(0,E.tZ)(qr,{label:(0,E.BX)(c.k,{alignItems:"center",gap:"5px",children:[(0,E.tZ)(_.n,{color:"ds.text.neutral.standard",children:n("team_account_addseats_success_order_summary_prorated_discount")}),(0,E.tZ)(Ce.ua7,{content:n("team_account_addseats_success_order_summary_prorated_discount_tooltip"),children:zr||(zr=(0,E.tZ)(Ce.uMt,{size:16,color:"ds.text.neutral.standard"}))})]}),value:(0,E.tZ)(_.n,{color:"ds.text.neutral.standard",children:o})}):null,(0,E.tZ)("div",{style:{width:"100%",borderColor:Pn.O.lightTheme.ds.border.neutral.quiet.idle,borderWidth:"1px",borderStyle:"solid",borderBottom:"0",margin:"0"}}),(0,E.tZ)(qr,{label:(0,E.tZ)(_.n,{textStyle:"ds.body.standard.strong",color:"ds.text.neutral.standard",children:n("team_account_addseats_success_order_summary_total")}),value:(0,E.tZ)(_.n,{textStyle:"ds.body.standard.strong",color:"ds.text.neutral.standard",children:u})})]})]})},Vr=({isBusiness:e,additionalSeats:t,showInviteUsersButton:n=!0,onGetPastReceipts:a,backNavigationHandler:r})=>{const{routes:s}=(0,i.Xo)(),{translate:o}=(0,b.Z)();return(0,E.BX)(c.k,{flexDirection:"column",gap:"40px",sx:x,children:[(0,E.BX)(c.k,{flexDirection:"column",gap:"8px",children:[e?(0,E.tZ)(d.X,{as:"h2",color:"ds.text.neutral.catchy",id:"header-buy-more-seats",children:o("team_account_addseats_success_newseats_header_business",{count:t})}):(0,E.tZ)(d.X,{as:"h2",color:"ds.text.neutral.catchy",children:o("team_account_addseats_success_newseats_header_team",{count:t})}),(0,E.tZ)(_.n,{color:"ds.text.neutral.quiet",children:o("team_account_addseats_success_newseats_body")})]}),(0,E.BX)(c.k,{gap:"8px",children:[n?(0,E.tZ)(i.rU,{to:s.teamMembersRoutePath,children:(0,E.tZ)(D.z,{onClick:()=>{(0,y.Kz)(new u.UserSendManualInviteEvent({flowStep:u.FlowStep.Start,inviteCount:0,inviteFailedCount:0,inviteResentCount:0,inviteSuccessfulCount:0,isImport:!0,isResend:!1}))},mood:"brand",children:o("team_account_addseats_success_newseats_invite_users_cta")})}):null,a?(0,E.tZ)(D.z,{mood:"neutral",intensity:"quiet",onClick:a,children:o("team_account_addseats_success_newseats_billing_history_cta")}):(0,E.tZ)(D.z,{mood:"neutral",intensity:"quiet",onClick:r,children:o("team_account_addseats_success_newseats_go_to_account_summary_cta")})]})]})};var jr;const Wr=()=>{const{translate:e}=(0,b.Z)();return(0,E.BX)(c.k,{flexWrap:"nowrap",gap:"16px",sx:x,children:[jr||(jr=(0,E.tZ)(c.k,{sx:v,children:(0,E.tZ)(T.JO,{name:"GroupOutlined",color:"ds.text.neutral.standard"})})),(0,E.BX)(c.k,{flexDirection:"column",gap:"16px",sx:{flexGrow:"1"},children:[(0,E.BX)(c.k,{flexDirection:"column",gap:"8px",children:[(0,E.tZ)(d.X,{as:"h2",color:"ds.text.neutral.catchy",children:e("team_account_addseats_success_friends_family_header")}),(0,E.tZ)(_.n,{color:"ds.text.neutral.quiet",children:e("team_account_addseats_success_friends_family_body")})]}),(0,E.tZ)("a",{href:"https://support.dashlane.com/hc/articles/360013369820-Dashlane-Friends-Family-plan",target:"_blank",rel:"noopener noreferrer",children:(0,E.tZ)(D.z,{mood:"neutral",intensity:"quiet",children:e("team_account_addseats_success_friends_family_learn_more_cta")})})]})]})};var Hr;const $r=()=>{const{translate:e}=(0,b.Z)();return(0,E.BX)(c.k,{flexWrap:"nowrap",gap:"16px",sx:x,children:[Hr||(Hr=(0,E.tZ)(c.k,{sx:v,children:(0,E.tZ)(T.JO,{name:"GroupOutlined",color:"ds.text.neutral.standard"})})),(0,E.BX)(c.k,{flexDirection:"column",gap:"8px",sx:{flexGrow:"1"},children:[(0,E.tZ)(d.X,{as:"h2",color:"ds.text.neutral.catchy",children:e("team_account_addseats_success_idp_nextstep_title")}),(0,E.tZ)(d.X,{as:"h3",textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:e("team_account_addseats_success_idp_nextstep_subtitle")}),(0,E.tZ)(_.n,{color:"ds.text.neutral.quiet",children:e("team_account_addseats_success_idp_nextstep_description")}),(0,E.tZ)($t.Q,{isExternal:!0,href:me.hP,children:e("team_account_addseats_success_idp_nextstep_see_setup_guide_link")})]})]})};var Kr,Yr,Qr;const Jr=({lastBillingDetails:e,lastAdditionalSeatsDetails:t,onGetPastReceipts:n,onNavigateBack:a})=>{const{translate:i}=(0,b.Z)(),[s,o]=(0,r.useState)(t),[l,d]=(0,r.useState)(e),{additionalSeatsCount:_}=Oi({billingDetails:l,additionalSeatsDetails:s}),p=(0,h.s)(),S=(0,m.k)(Fr.t,"getIdPFailedProvisioningsData"),x=S.status===G.rq.Loading,f=S.status===G.rq.Success&&!!S.data?.nbOfFailedCreations,v=(0,E.tZ)(D.z,{mood:"neutral",intensity:"supershy",onClick:a,layout:"iconLeading",icon:"ArrowLeftOutlined",children:i("_common_action_back")}),C=p?.spaceTier===g.lD.Business,k=(0,r.useContext)(qt);return(0,r.useEffect)((()=>(k(v),(0,y.Nc)(u.PageView.TacOrderConfirmation),()=>{k(null),a()})),[]),(0,r.useEffect)((()=>{d(e),o(t)}),[e,t]),(0,E.tZ)(c.k,{flexDirection:"column",gap:"32px",sx:{padding:"32px",flexWrap:"nowrap"},children:(0,E.BX)(c.k,{gap:"16px",sx:{flexWrap:"nowrap"},children:[(0,E.BX)(c.k,{flexDirection:"column",gap:"16px",sx:{flexGrow:"2",maxWidth:"632px"},children:[(0,E.tZ)(Vr,{onGetPastReceipts:n,isBusiness:C,additionalSeats:_,showInviteUsersButton:!x&&!f,backNavigationHandler:a}),C&&!x?f?Kr||(Kr=(0,E.tZ)($r,{})):Yr||(Yr=(0,E.tZ)(Wr,{})):null]}),(0,E.BX)(c.k,{flexDirection:"column",gap:"16px",sx:{flexGrow:"1"},children:[(0,E.tZ)(Gr,{billingDetails:l,additionalSeatsDetails:s}),Qr||(Qr=(0,E.tZ)(Z,{}))]})]})})},es=({cardSvg:e,last4DigitsFormatted:t,expFormatted:n,isExpired:a})=>{const{translate:i}=(0,b.Z)();return(0,E.BX)("div",{sx:{display:"flex",alignItems:"center",gap:"8px"},children:[e,(0,E.BX)("div",{children:[(0,E.BX)(_.n,{"data-testid":"card-last-four",sx:{display:"flex",gap:"4px"},children:["â€¢â€¢â€¢â€¢ ",t,a?(0,E.tZ)(pe.C,{label:i("account_summary_payment_card_expired_badge"),mood:"danger",sx:{alignSelf:"center"}}):null]}),(0,E.tZ)(_.n,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.quiet",children:i("manage_subscription_payment_section_expiration_date",{date:n})})]})]})};var ts,ns;const as="account_summary_payment_card_add_new_button",is="account_summary_payment_card_update_button",rs={SECTION_CONTAINER:{display:"flex",justifyContent:"space-between",alignItems:"center"},INVOICE_CONTAINER:{display:"flex",flexDirection:"column",gap:"8px"},CARD:{display:"flex",flexDirection:"column",gap:"16px"}},ss=()=>{const{translate:e}=(0,b.Z)(),t=(0,h.s)(),[n,a]=(0,r.useState)(!1),{last4DigitsFormatted:i,hasCreditCardPaymentMethod:o,cardSvg:l,isExpired:c,expFormatted:u,pollUntilCardUpdate:m}=(0,S.C)({}),p=(0,ge.JS)();if(!t||p.status!==s.rq.Success)return null;const y=t.billingType===g.qo.Invoice,x=!t.billingType,f=()=>{m(),a(!0)},v=((e,t,n)=>e?{key:as,onClick:t}:n?null:{key:is,onClick:t})(x,f,y);return(0,E.BX)(yn.Z,{sx:rs.CARD,children:[(0,E.BX)("div",{sx:{display:"flex",justifyContent:"space-between"},children:[(0,E.tZ)(d.X,{textStyle:"ds.title.section.medium",color:"ds.text.neutral.catchy",as:"h2",children:e(y?"account_summary_payment_method_plural":"account_summary_payment_method_singular")}),n?(0,E.tZ)(Za.J,{b2c:!1,setPaymentLoading:a}):v&&(0,E.tZ)($t.Q,{isExternal:!0,onClick:v.onClick,sx:{cursor:"pointer"},children:e(v.key)})]}),x&&(0,E.tZ)(_.n,{color:"ds.text.inverse.quiet",children:e("account_summary_no_payment_method")}),y&&(0,E.BX)("div",{children:[(0,E.BX)("div",{sx:rs.INVOICE_CONTAINER,children:[(0,E.BX)("div",{sx:rs.SECTION_CONTAINER,children:[(0,E.tZ)(_.n,{textStyle:"ds.title.supporting.small",color:"ds.text.neutral.quiet",children:e("account_summary_subscription_payment_method")}),(0,E.tZ)($t.Q,{isExternal:!0,onClick:()=>{(0,W.Yo)(me.FL)},children:e("account_summary_contact_support")})]}),(0,E.BX)("div",{sx:{display:"flex",gap:"8px"},children:[ts||(ts=(0,E.tZ)(Qi.v,{name:"ItemTaxNumberOutlined",mood:"neutral"})),(0,E.tZ)(_.n,{sx:{alignSelf:"center"},children:e("account_summary_paying_by_invoice")})]})]}),ns||(ns=(0,E.tZ)(z.i,{})),(0,E.BX)("div",{children:[(0,E.BX)("div",{sx:rs.SECTION_CONTAINER,children:[(0,E.tZ)(_.n,{textStyle:"ds.title.supporting.small",color:"ds.text.neutral.quiet",children:e("account_summary_seats_payment_method")}),(0,E.tZ)($t.Q,{isExternal:!0,onClick:f,children:e(o?is:as)})]}),o&&l&&i&&u?(0,E.tZ)(es,{cardSvg:l,last4DigitsFormatted:i,isExpired:c,expFormatted:u}):(0,E.tZ)(_.n,{color:"ds.text.inverse.quiet",children:e("account_summary_no_payment_card_added")})]})]}),!y&&l&&i&&u&&(0,E.tZ)(es,{cardSvg:l,last4DigitsFormatted:i,isExpired:c,expFormatted:u})]})};var os=n(42868),ls=n(29274),cs=n(27521);const ds=({isOpen:e,lee:t,onClose:n})=>{const a=(0,r.useRef)(null),i=(0,r.useRef)(null),s=(0,r.useRef)(null),o=(0,r.useRef)(null),{translate:l}=(0,b.Z)(),{reportTACError:c}=se(),[d,u]=(0,r.useState)(!1),[m,p]=(0,r.useState)(!0),g=xr();if(!g)return null;const h=()=>{u(!1),n()},y=()=>{const e=(0,cs.v0)(t.globalState);if(e)if(a.current?.value){h();try{(0,W.Yo)("https://ws1.dashlane.com/1/invoiceGeneration/generateTeamReceipt.pdf?"+(e=>{const t={...e,recipient:a.current?.value,company:i.current?.value,address:s.current?.value,vatNumber:o.current?.value};return os.stringify(t)})(e))}catch(e){c(e)}}else u(!0);else c(new Error(ls.N))},S=d?{feedback:{text:l("team_account_past_receipts_dialog_recipient_is_required")},error:!0}:{};return(0,E.BX)(J.Vq,{title:l("team_account_past_receipts_dialog_title"),closeActionLabel:l("_common_dialog_dismiss_button"),isOpen:e,onClose:h,actions:{primary:{children:l("team_account_past_receipts_dialog_download_button"),onClick:y,disabled:m}},children:[(0,E.tZ)(_.n,{children:l("team_account_past_receipts_dialog_instructions")}),(0,E.BX)(Ce.T5p,{as:"form",onSubmit:y,gap:"1em",children:[(0,E.tZ)(Tn.n,{label:l("team_account_past_receipts_dialog_recipient")+" *",placeholder:l("team_account_past_receipts_dialog_recipient_hint"),onChange:()=>{a.current?.value?(p(!1),u(!1)):(p(!0),u(!0))},ref:a,...S}),(0,E.tZ)(Tn.n,{label:l("team_account_past_receipts_dialog_company"),value:g,placeholder:l("team_account_past_receipts_dialog_company_hint"),ref:i}),(0,E.tZ)(Tn.n,{label:l("team_account_past_receipts_dialog_billing_address"),placeholder:l("team_account_past_receipts_dialog_billing_address_hint"),ref:s}),(0,E.tZ)(Tn.n,{label:l("team_account_past_receipts_dialog_vat"),placeholder:l("team_account_past_receipts_dialog_vat_hint"),ref:o})]})]})},_s=({lee:e})=>{const{translate:t}=(0,b.Z)(),n=(0,ge.JS)(),[a,i]=(0,r.useState)(!1);if(n.status!==G.rq.Success||!n.data)return null;const s=n.data.b2bStatus?.currentTeam?.hasPaid;return(0,E.BX)(yn.Z,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",gap:"24px"},children:[(0,E.tZ)(d.X,{textStyle:"ds.title.section.medium",color:"ds.text.neutral.catchy",as:"h2",children:t("account_summary_billing_history_header")}),s?(0,E.tZ)(D.z,{mood:"brand",intensity:"supershy",icon:"DownloadOutlined",layout:"iconLeading",onClick:()=>{(0,y.Kz)(new u.UserClickEvent({button:u.Button.DownloadBillingHistory})),(0,y.Nc)(u.PageView.TacAccountCustomizeInvoice),i(!0)},children:t("account_summary_billing_history_download_button")}):(0,E.tZ)(_.n,{color:"ds.text.inverse.quiet",children:t("account_summary_billing_history_no_invoice")}),(0,E.tZ)(ds,{lee:e,onClose:()=>{i(!1)},isOpen:a})]})};var us=n(98423),ms=n(68531);const ps=({spaceTier:e,handleClose:t,sendCancelRequest:n,requestStatus:a})=>{const{translate:i}=(0,b.Z)(),[s,o]=(0,r.useState)({[g.Gr.ChoseOtherPasswordManager]:!1,[g.Gr.MissingCriticalFeatures]:!1,[g.Gr.NoInternalUsage]:!1,[g.Gr.DownsizedEmployeeCount]:!1,[g.Gr.Other]:!1,[g.Gr.TechnicalIssues]:!1,[g.Gr.TooExpensive]:!1});(0,r.useEffect)((()=>{(0,y.Nc)(u.PageView.TacModalReasonsToCancelSubscription)}),[]);const l=`${e[0].toUpperCase()}${e.slice(1)}`,c=e=>{const t=!s[e];o({...s,[e]:t})};return(0,E.BX)(J.Vq,{isOpen:!0,onClose:()=>{(0,y.Kz)(new u.UserCallToActionEvent({callToActionList:[u.CallToAction.Confirm,u.CallToAction.Cancel],hasChosenNoAction:!0})),t()},title:i("team_account_cancel_form_heading"),actions:{primary:{children:i("team_account_cancel_form_button_confirm"),onClick:()=>{const e=Object.keys(s).filter((e=>s[e])).map((e=>ms.V[e]));n(e),(0,y.Kz)(new u.UserCallToActionEvent({callToActionList:[u.CallToAction.Confirm,u.CallToAction.Cancel],chosenAction:u.CallToAction.Confirm,hasChosenNoAction:!1})),(0,y.Kz)(new u.UserSubmitInProductFormAnswerEvent({formName:u.FormName.ReasonToCancelSubscription,answerList:Object.keys(s).map((e=>ms.V[e])),chosenAnswerList:e}))},isLoading:"pending"===a},secondary:{children:i("team_account_cancel_form_button_cancel",{planTier:l}),onClick:()=>{(0,y.Kz)(new u.UserCallToActionEvent({callToActionList:[u.CallToAction.Confirm,u.CallToAction.Cancel],chosenAction:u.CallToAction.Cancel,hasChosenNoAction:!1})),t()}}},isDestructive:!0,closeActionLabel:i("_common_dialog_dismiss_button"),children:[(0,E.tZ)(_.n,{sx:{marginBottom:"20px"},textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",children:i("team_account_cancel_form_subheading")}),(0,E.tZ)(_.n,{textStyle:"ds.title.block.medium",children:i("team_account_cancel_form_question")}),(0,E.tZ)(_.n,{sx:{marginBottom:"20px"},textStyle:"ds.body.standard.regular",children:i("team_account_cancel_form_context")}),(0,E.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"20px"},children:[(0,E.tZ)(jn.X,{label:i("team_account_cancel_form_option_1"),checked:s.no_internal_usage,disabled:"pending"===a,onChange:()=>c(g.Gr.NoInternalUsage)}),(0,E.tZ)(jn.X,{label:i("team_account_cancel_form_option_2_revised"),checked:s.downsized_employee_count,disabled:"pending"===a,onChange:()=>c(g.Gr.DownsizedEmployeeCount)}),(0,E.tZ)(jn.X,{label:i("team_account_cancel_form_option_3"),checked:s.chose_other_password_manager,disabled:"pending"===a,onChange:()=>c(g.Gr.ChoseOtherPasswordManager)}),(0,E.tZ)(jn.X,{label:i("team_account_cancel_form_option_4"),checked:s.missing_critical_features,disabled:"pending"===a,onChange:()=>c(g.Gr.MissingCriticalFeatures)}),(0,E.tZ)(jn.X,{label:i("team_account_cancel_form_option_5"),checked:s.technical_issues,disabled:"pending"===a,onChange:()=>c(g.Gr.TechnicalIssues)}),(0,E.tZ)(jn.X,{label:i("team_account_cancel_form_option_6"),checked:s.too_expensive,disabled:"pending"===a,onChange:()=>c(g.Gr.TooExpensive)}),(0,E.tZ)(jn.X,{sx:{marginBottom:"8px"},label:i("team_account_cancel_form_option_7"),checked:s.other,disabled:"pending"===a,onChange:()=>c(g.Gr.Other)})]}),(0,E.tZ)(_.n,{sx:{margin:"20px 0"},textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",children:i.markup("team_account_cancel_form_help_markup",{},{linkTarget:"_blank"})})]})};var gs,hs;const ys={ITEM:{display:"flex",flexDirection:"row",alignItems:"flex-start",gap:"16px"},WRAPPER:{margin:"16px 0",gap:"24px",display:"flex",flexDirection:"column"}},bs="team_account_cancel_confirmation_dialog_close",Ss=({handleClose:e})=>{const{translate:t}=(0,b.Z)();return(0,r.useEffect)((()=>{(0,y.Nc)(u.PageView.TacConfirmSubscriptionCancellationRequestSubmission)}),[]),(0,E.tZ)(J.Vq,{isOpen:!0,onClose:e,title:t("team_account_cancel_confirmation_dialog_heading"),closeActionLabel:t(bs),actions:{primary:{children:t(bs),onClick:e}},children:(0,E.BX)("div",{sx:ys.WRAPPER,children:[(0,E.BX)("div",{sx:ys.ITEM,children:[gs||(gs=(0,E.tZ)(Qi.v,{name:"ItemEmailOutlined",size:"medium",mood:"brand"})),(0,E.tZ)(_.n,{children:t.markup("team_account_cancel_confirmation_dialog_paragraph_1_markup")})]}),(0,E.BX)("div",{sx:ys.ITEM,children:[hs||(hs=(0,E.tZ)(Qi.v,{name:"ActionUndoOutlined",size:"medium",mood:"brand"})),(0,E.tZ)(_.n,{children:t("team_account_cancel_confirmation_dialog_paragraph_2")})]})]})})},xs={none:{heading:"account_summary_cancel_subscription_header",paragraph:"account_summary_cancel_subscription_description",button:"account_summary_cancel_subscription_button"},pending:{heading:"team_account_cancel_widget_requested_pending_heading",paragraph:"team_account_cancel_widget_requested_pending_content_markup"},canceled:{heading:"team_account_cancel_widget_requested_complete_heading",paragraph:"team_account_cancel_widget_requested_complete_content",button:"team_account_cancel_widget_requested_complete_button"},unknown:{}},fs=(e,t,n)=>{var a,i,r,s;switch(e){case g.Uz.None:return n(null!=(a=xs.none[t])?a:"");case g.Uz.Pending:return"paragraph"===t?n.markup(null!=(i=xs.pending[t])?i:"",{},{linkTarget:"_blank"}):n(null!=(r=xs.pending[t])?r:"");case g.Uz.Canceled:return n(null!=(s=xs.canceled[t])?s:"");case g.Uz.Unknown:return""}},vs=({status:e,handleClickButton:t})=>{const{translate:n}=(0,b.Z)();return(0,E.BX)(yn.Z,{sx:{width:"368px",padding:"24px",display:"flex",flexDirection:"column",gap:"16px"},children:[e!==g.Uz.Unknown?(0,E.tZ)(_.n,{textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:fs(e,"heading",n)}):null,(0,E.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"8px"},children:[(0,E.tZ)(_.n,{children:fs(e,"paragraph",n)}),e!==g.Uz.Pending?(0,E.tZ)($t.Q,{onClick:t,as:"button",sx:{"> button":{cursor:"pointer"}},children:fs(e,"button",n)}):null]}),e===g.Uz.None?(0,E.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"8px"},children:[(0,E.tZ)(_.n,{children:n("account_summary_downgrade_description")}),(0,E.tZ)($t.Q,{isExternal:!0,href:me.oH,children:n("account_summary_contact_support_button")})]}):null]})};let Cs=function(e){return e.NONE="none",e.SURVEY="survey",e.REQUEST_SUCCESS="requestSentConfirmation",e.REQUEST_ERROR="requestError",e}({});const Es=({status:e})=>{const[t,n]=(0,r.useState)(Cs.NONE),[a,i]=(0,r.useState)("idle"),{showToast:s}=(0,o.p)(),l=(0,ge.lZ)(),c=(0,$.C)(),{translate:d}=(0,b.Z)();(0,r.useEffect)((()=>{e!==g.Uz.Unknown&&t!==Cs.REQUEST_ERROR||s({mood:"danger",description:d("team_account_cancel_request_error"),isManualDismiss:!0})}),[t,s,e,d]);const{requestTeamPlanCancellation:_}=(0,te.u)(p.o);return l.isLoading||!c||l.isTeamSoftDiscontinued||c.isFreeTrial||c.isGracePeriod?null:(0,E.BX)(r.Fragment,{children:[(0,E.tZ)(vs,{status:e,handleClickButton:e===g.Uz.None?()=>{(0,y.Kz)(new u.UserClickEvent({clickOrigin:u.ClickOrigin.BillingInformation,button:u.Button.CancelSubscription})),n(Cs.SURVEY)}:()=>{(0,y.Kz)(new u.UserClickEvent({clickOrigin:u.ClickOrigin.BillingInformation,button:u.Button.ReactivateSubscription})),(0,W.Yo)(me.lh)}}),t===Cs.SURVEY?(0,E.tZ)(ps,{spaceTier:c.spaceTier,handleClose:()=>{n(Cs.NONE)},sendCancelRequest:async e=>{i("pending");try{const t=await _({reasons:e});if(i("finished"),"failure"===t.tag)throw new Error("Failed to request team plan cancellation.");n(Cs.REQUEST_SUCCESS)}catch(e){n(Cs.REQUEST_ERROR)}},requestStatus:a}):null,t===Cs.REQUEST_SUCCESS?(0,E.tZ)(Ss,{handleClose:()=>{n(Cs.NONE)}}):null]})};var Zs=n(78420);const ks="account_summary_sso_description",Ds="account_summary_unlimited_seats_description",Ts=({iconName:e,description:t})=>{const{translate:n}=(0,b.Z)();return(0,E.BX)("div",{sx:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,E.tZ)(Qi.v,{name:e,mood:"brand",size:"small"}),(0,E.tZ)(_.n,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.quiet",children:n(t)})]})},Is="account_summary_upgrade_to_business",As=()=>{const{translate:e}=(0,b.Z)(),t=(0,Oe.U)(),{routes:n}=(0,i.Xo)(),a=(0,h.s)();if(!t||!a||a.spaceTier===g.lD.Business||a.spaceTier===g.lD.BusinessPlus||a.spaceTier===g.lD.Enterprise||a.spaceTier===g.lD.Legacy)return null;const r=a.spaceTier===g.lD.Starter,s=a.spaceTier===g.lD.Standard,o=(e=>{switch(e){case"starter":return[{icon:"GroupOutlined",description:Ds},{icon:"SharedOutlined",description:"account_summary_unlimited_groups_description"},{icon:"LockOutlined",description:ks},{icon:"SettingsOutlined",description:"account_summary_activity_logs_description"}];case"team":return[{icon:"LockOutlined",description:ks},{icon:"SharedOutlined",description:"account_summary_scim_feature_description"},{icon:"GroupOutlined",description:"account_summary_family_friends_plan_description"},{icon:"ItemPhoneHomeOutlined",description:"account_summary_phone_support_team_description"}];case"standard":return[{icon:"GroupOutlined",description:Ds},{icon:"ToolsOutlined",description:"account_summary_advanced_tools_description"},{icon:"HealthPositiveOutlined",description:"account_summary_enhanced_integrations_description"},{icon:"ItemPhoneHomeOutlined",description:"account_summary_additional_support_description"}]}})(a.spaceTier);return(0,E.BX)(yn.Z,{sx:{display:"flex",flexDirection:"column",gap:"24px",width:"368px",padding:"24px"},children:[(0,E.tZ)(pe.C,{label:e(Is),mood:"brand",iconName:"PremiumOutlined",layout:"iconLeading"}),(0,E.tZ)("div",{sx:{display:"flex",justifyContent:"center",flex:1},children:(0,E.tZ)("img",{role:"presentation",alt:"",src:Zs,sx:{objectFit:"contain",width:"100%",height:"auto"}})}),(0,E.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"16px"},children:[(0,E.tZ)(_.n,{textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:e(s?"account_summary_upgrade_standard_title":r?"account_summary_upgrade_starter_title":"account_summary_upgrade_team_title")}),o.map((e=>(0,E.tZ)(Ts,{iconName:e.icon,description:e.description},e.description)))]}),(0,E.tZ)(D.z,{mood:"brand",intensity:"catchy",icon:"PremiumOutlined",layout:"iconLeading",onClick:()=>{(0,y.Kz)(new u.UserClickEvent({button:u.Button.BuyDashlane,clickOrigin:u.ClickOrigin.AccountStatus}))},as:i.rU,to:`${n.teamAccountChangePlanRoutePath}?plan=business`,children:e(Is)})]})},ws=({isGracePeriod:e,shouldShowDiscontinuedBadge:t,setWidth:n})=>{const{translate:a}=(0,b.Z)(),{routes:r}=(0,i.Xo)();return(0,E.BX)(yn.Z,{sx:{display:"flex",flexDirection:"column",gap:"24px",width:n?"368px":{},padding:"24px"},children:[(0,E.tZ)(pe.C,{label:a(t?"account_summary_free_trial_ended_badge":e?"account_summary_extended_free_trial_badge":"account_summary_free_trial_badge"),mood:t?"danger":e?"warning":"brand"}),(0,E.tZ)("div",{sx:{display:"flex",justifyContent:"center",flex:1},children:(0,E.tZ)("img",{role:"presentation",alt:"",src:Zs,sx:{objectFit:"contain",width:"100%",height:"auto"}})}),(0,E.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"16px"},children:[(0,E.tZ)(_.n,{textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:a("account_summary_upgrade_content_title")}),(0,E.tZ)(Ts,{iconName:"SsoOutlined",description:"account_summary_sso_feature_description"}),(0,E.tZ)(Ts,{iconName:"PhishingAlertOutlined",description:"account_summary_protection_feature_description"}),(0,E.tZ)(Ts,{iconName:"ItemPhoneHomeOutlined",description:"account_summary_phone_support_feature_description"})]}),(0,E.tZ)(D.z,{onClick:()=>{(0,y.Kz)(new u.UserClickEvent({button:u.Button.BuyDashlane,clickOrigin:u.ClickOrigin.AccountStatus}))},mood:"brand",intensity:"catchy",as:i.rU,to:r.teamAccountCheckoutRoutePath,children:a("account_summary_buy_dashlane_button")})]})},Os={minWidth:"368px",padding:"24px",display:"flex",flexDirection:"column",gap:"16px"},Ns=()=>{const{translate:e}=(0,b.Z)();return(0,E.BX)(yn.Z,{sx:Os,children:[(0,E.tZ)(_.n,{textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:e("account_summary_keep_subscription_header")}),(0,E.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"8px"},children:[(0,E.tZ)(_.n,{children:e("account_summary_keep_subscription_description")}),(0,E.tZ)($t.Q,{isExternal:!0,href:me.oH,children:e("account_summary_keep_subscription_button")})]})]})};var Rs,Ls;const Bs=()=>{const e=(0,us.M)(),t=(0,ge.lZ)(),n=(0,ge.JS)(),a=(0,$.C)(),{isExpired:i}=(0,S.C)({});if(e.isLoading||t.isLoading||n.status!==G.rq.Success||!n.data.b2bStatus||!a)return null;const r=a.isGracePeriod,s=t.isTeamSoftDiscontinued&&t.isTrial,o=(e=>{switch(e){case"ACTIVE":case"ACTIVE CARD EXPIRED":case"DISCONTINUED CARD EXPIRED":return"cancelSubscription";case"ACTIVE CANCELED":case"DISCONTINUED CANCELED":return"keepSubscription";case"DISCONTINUED TRIAL":case"GRACE PERIOD":case"TRIAL":return"trialUpgrade"}})(ui(t,n.data.b2bStatus,a,i));return"cancelSubscription"===o?a.spaceTier===g.lD.Team||a.spaceTier===g.lD.Starter||a.spaceTier===g.lD.Standard?(0,E.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"16px"},children:[Rs||(Rs=(0,E.tZ)(As,{})),(0,E.tZ)(Es,{status:e.status})]}):(0,E.tZ)(Es,{status:e.status}):"keepSubscription"===o?Ls||(Ls=(0,E.tZ)(Ns,{})):(0,E.tZ)(ws,{isGracePeriod:r,shouldShowDiscontinuedBadge:s,setWidth:!0})};var Ms,Ps,Us;const Xs={backgroundColor:"ds.background.alternate",minHeight:"100%","& > div":{maxWidth:"74em",padding:"24px"}},zs=({lee:e})=>(0,E.BX)(c.k,{flexDirection:"column",gap:"16px",sx:Xs,children:[Ms||(Ms=(0,E.tZ)(Sr,{})),Ps||(Ps=(0,E.tZ)(ss,{})),Us||(Us=(0,E.tZ)(Xr,{})),(0,E.tZ)(_s,{lee:e})]}),Fs=({lee:e})=>{const{isAddSeatsSuccessOpen:t,upsellDetails:n,setIsAddSeatsSuccessPageOpen:a}=Ut(),{translate:i}=(0,b.Z)();return(0,r.useEffect)((()=>{(0,y.Nc)(u.PageView.TacAccount)}),[]),t?n.lastAdditionalSeatsDetails&&n.lastBillingDetails?(0,E.tZ)(Jr,{lastAdditionalSeatsDetails:n.lastAdditionalSeatsDetails,lastBillingDetails:n.lastBillingDetails,onNavigateBack:()=>{a(!1)}}):null:(0,E.BX)(r.Fragment,{children:[(0,E.tZ)(d.X,{textStyle:"ds.title.section.large",color:"ds.text.neutral.catchy",as:"h1",sx:{height:"50px",padding:"32px 48px"},children:i("team_account_heading_team_setup")}),(0,E.tZ)(di,{mainContent:(0,E.tZ)(zs,{lee:e}),secondaryContent:Bs,secondaryContentWrapDirection:"bottom"})]})};var qs=n(59664),Gs=n(6523),Vs=n(6721);const js="360px",Ws={STATE_WRAPPER:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"24px",width:"100%",height:js,padding:"24px",textAlign:"center"},TABLE_BODY:{minHeight:js,tr:{boxShadow:"inset 0 -1px 0 0 ds.border.neutral.quiet.idle",height:"60px",transition:"background-color 0.2s ease",backgroundColor:"transparent","&:hover":{backgroundColor:"ds.container.expressive.neutral.supershy.hover"},td:{padding:"16px",verticalAlign:"middle",variant:"text.ds.body.reduced.regular",color:"ds.text.neutral.standard"}}},INPUT_WITH_CLEAR_ACTION:{display:"grid",gridTemplateColumns:"calc(100% - 40px) auto",alignItems:"center",gap:"4px"}};var Hs,$s,Ks=n(10737);const Ys=({title:e,description:t})=>{const{translate:n}=(0,b.Z)();return(0,E.BX)(r.Fragment,{children:[(0,E.tZ)(_.n,{textStyle:"ds.title.section.medium",color:"ds.text.neutral.standard",sx:{marginBottom:"4px"},children:n(e)}),(0,E.tZ)(_.n,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.quiet",children:n(t)})]})},Qs=()=>(0,E.BX)("div",{sx:Ws.STATE_WRAPPER,children:[Hs||(Hs=(0,E.tZ)(T.JO,{name:"FeedbackFailOutlined",color:"ds.text.danger.quiet",size:"xlarge"})),(0,E.tZ)(Ys,{title:"team_audit_log_state_error_title",description:"team_audit_log_state_error_description"})]}),Js=()=>(0,E.BX)("div",{sx:Ws.STATE_WRAPPER,children:[$s||($s=(0,E.tZ)(l.Z,{mood:"brand",size:"xlarge"})),(0,E.tZ)(Ys,{title:"team_audit_log_state_loading_title",description:"team_audit_log_state_loading_description"})]}),eo=()=>(0,E.BX)("div",{sx:Ws.STATE_WRAPPER,children:[(0,E.tZ)("img",{sx:{userSelect:"none",pointerEvents:"none",width:"360px",maxWidth:"100%",margin:"0 auto"},alt:"","aria-hidden":!0,src:Ks}),(0,E.tZ)(Ys,{title:"team_audit_log_state_empty_title",description:"team_audit_log_state_empty_description"})]}),to=[qs.s.Account,qs.s.Authentication,qs.s.DarkWebMonitoring,qs.s.Groups,qs.s.TeamSettings,qs.s.TeamSettingsSSO,qs.s.TeamSettingsSAMLProvisioning,qs.s.TeamSettingsSCIM,qs.s.TeamSettingsSIEM,qs.s.Sharing,qs.s.UserSettings,qs.s.Users,qs.s.VaultCollections,qs.s.VaultPasswords,qs.s.VaultSecureNotes,qs.s.TeamNudges,qs.s.RiskDetection,qs.s.ItemUsage],no=(e,t)=>{const[n,a]=(e=>{switch(e){case qs.s.Account:return["team_audit_log_category_account","AccountSettingsOutlined"];case qs.s.Authentication:return["team_audit_log_category_authentication","ItemLoginOutlined"];case qs.s.DarkWebMonitoring:return["team_audit_log_category_dark_web_monitoring","FeatureDarkWebMonitoringOutlined"];case qs.s.Groups:return["team_audit_log_category_groups","GroupOutlined"];case qs.s.TeamSettings:return["team_audit_log_category_team_settings","SettingsOutlined"];case qs.s.TeamSettingsSAMLProvisioning:return["team_audit_log_category_team_settings_samlprovisioning","SettingsOutlined"];case qs.s.TeamSettingsSSO:return["team_audit_log_category_team_settings_sso","SettingsOutlined"];case qs.s.TeamSettingsSCIM:return["team_audit_log_category_team_settings_scim","SettingsOutlined"];case qs.s.TeamSettingsSIEM:return["team_audit_log_category_team_settings_siem","SettingsOutlined"];case qs.s.Sharing:return["team_audit_log_category_sharing","SharedOutlined"];case qs.s.UserSettings:return["team_audit_log_category_user_settings","SettingsOutlined"];case qs.s.Users:return["team_audit_log_category_users","UsersOutlined"];case qs.s.VaultCollections:return["team_audit_log_category_vault_collections","CollectionOutlined"];case qs.s.VaultPasswords:return["team_audit_log_category_vault_passwords","ItemLoginOutlined"];case qs.s.VaultSecureNotes:return["team_audit_log_category_vault_securenotes","ItemSecureNoteOutlined"];case qs.s.TeamNudges:return["team_audit_log_category_team_nudges","FeatureAutomationsOutlined"];case qs.s.RiskDetection:return["team_audit_log_category_security_monitoring","ItemLoginOutlined"];case qs.s.ItemUsage:return["team_audit_log_category_item_usage","FeatureAutofillOutlined"];default:return["","SettingsOutlined"]}})(e.category);return{label:n?t(n):"",icon:a}},ao=Object.values(qs.b),io={USER_INVITED:"team_audit_log_user_invited",USER_REINVITED:"team_audit_log_user_reinvited",USER_REMOVED:"team_audit_log_user_removed",TEAM_CAPTAIN_ADDED:"team_audit_log_team_captain_added",TEAM_CAPTAIN_REMOVED:"team_audit_log_team_captain_removed",GROUP_MANAGER_ADDED:"team_audit_log_group_manager_added",GROUP_MANAGER_REMOVED:"team_audit_log_group_manager_removed",MASTER_PASSWORD_RESET_ACCEPTED:"team_audit_log_master_password_reset_accepted",MASTER_PASSWORD_RESET_REFUSED:"team_audit_log_master_password_reset_refused",BILLING_ADMIN_ADDED:"team_audit_log_billing_admin_added",BILLING_ADMIN_REMOVED:"team_audit_log_billing_admin_removed",USER_GROUP_CREATED:"team_audit_log_user_group_created",USER_GROUP_RENAMED:"team_audit_log_user_group_renamed",USER_GROUP_DELETED:"team_audit_log_user_group_deleted",USER_JOINED_USER_GROUP:"team_audit_log_user_joined_user_group",USER_LEFT_USER_GROUP:"team_audit_log_user_left_user_group",USER_INVITED_TO_USER_GROUP:"team_audit_log_user_invited_to_user_group",USER_DECLINED_INVITE_TO_USER_GROUP:"team_audit_log_user_declined_invite_to_user_group",USER_REMOVED_FROM_USER_GROUP:"team_audit_log_user_removed_from_user_group",SSO_IDP_METADATA_SET:"team_audit_log_sso_idp_metadata_set",SSO_SERVICE_PROVIDER_URL_SET:"team_audit_log_sso_service_provider_url_set",SSO_ENABLED:"team_audit_log_sso_enabled",SSO_DISABLED:"team_audit_log_sso_disabled",DOMAIN_REQUESTED:"team_audit_log_domain_requested",DOMAIN_VALIDATED:"team_audit_log_domain_validated",SENSITIVE_LOGS_ENABLED:"team_audit_log_collect_sensitive_data_audit_logs_enabled",SENSITIVE_LOGS_DISABLED:"team_audit_log_collect_sensitive_data_audit_logs_disabled",TEAM_NAME_CHANGED:"team_audit_log_team_name_changed",NEW_BILLING_PERIOD_CREATED:"team_audit_log_new_billing_period_created",SEATS_ADDED:"team_audit_log_seats_added",CONTACT_EMAIL_CHANGED:"team_audit_log_contact_email_changed",MASTER_PASSWORD_MOBILE_RESET_ENABLED:"team_audit_log_master_password_mobile_reset_enabled",MASTER_PASSWORD_MOBILE_RESET_DISABLED:"team_audit_log_master_password_mobile_reset_disabled",MASTER_PASSWORD_MOBILE_RESET:"team_audit_log_master_password_mobile_reset",MASTER_PASSWORD_CHANGED:"team_audit_log_master_password_changed",MP_TO_VIEW_PASSWORDS_ENABLED:"team_audit_log_mp_to_view_passwords_enabled",MP_TO_VIEW_PASSWORDS_DISABLED:"team_audit_log_mp_to_view_passwords_disabled",TWO_FACTOR_AUTHENTICATION_FAILED_OTP:"team_audit_log_two_factor_authentication_failed_otp",TWO_FACTOR_AUTHENTICATION_FAILED_EMAIL_TOKEN:"team_audit_log_two_factor_authentication_failed_token",TWO_FACTOR_AUTHENTICATION_LOGIN_METHOD_ADDED:"team_audit_log_two_factor_authentication_login_method_added",TWO_FACTOR_AUTHENTICATION_LOGIN_METHOD_REMOVED:"team_audit_log_two_factor_authentication_login_method_removed",BIOMETRIC_SIGN_IN_DISABLED:"team_audit_log_biometric_sign_in_disabled",NITRO_SSO_DOMAIN_PROVISIONED:"team_audit_log_nitro_sso_domain_provisioned",NITRO_SSO_DOMAIN_REMOVED:"team_audit_log_nitro_sso_domain_removed",NITRO_SSO_DOMAIN_VERIFIED:"team_audit_log_nitro_sso_domain_verified",NITRO_SSO_SETUP_STARTED:"team_audit_log_nitro_sso_setup_started",NITRO_USER_PROVISIONING_ACTIVATED:"team_audit_log_nitro_user_provisioning_activated",NITRO_USER_PROVISIONING_DEACTIVATED:"team_audit_log_nitro_user_provisioning_deactivated",NITRO_GROUP_PROVISIONING_ACTIVATED:"team_audit_log_nitro_group_provisioning_activated",NITRO_GROUP_PROVISIONING_DEACTIVATED:"team_audit_log_nitro_group_provisioning_deactivated",NITRO_SIEM_ACTIVATED:"team_audit_log_nitro_siem_activated",NITRO_SIEM_DEACTIVATED:"team_audit_log_nitro_siem_deactivated",NITRO_SIEM_EDITED:"team_audit_log_nitro_siem_edited",DWM_EMAIL_ADDED:"team_audit_log_dwm_email_added",DWM_EMAIL_REMOVED:"team_audit_log_dwm_email_removed",DWM_ALERT_RECEIVED:"team_audit_log_dwm_alert_received",USER_DEVICE_ADDED:"team_audit_log_user_device_added",USER_DEVICE_REMOVED:"team_audit_log_user_device_removed",USER_DEVICE_LOGIN:"team_audit_log_user_device_login",MASTER_PASSWORD_RESET:"team_audit_log_master_password_reset",REQUESTED_ACCOUNT_RECOVERY:"team_audit_log_requested_account_recovery",COMPLETED_ACCOUT_RECOVERY:"team_audit_log_completed_account_recovery",USER_SHARED_CREDENTIAL_WITH_GROUP_FULL_RIGHTS:"team_audit_log_user_shared_credential_with_group_full",USER_SHARED_CREDENTIAL_WITH_EMAIL_FULL_RIGHTS:"team_audit_log_user_shared_credential_with_email_full",USER_SHARED_CREDENTIAL_WITH_EXTERNAL_FULL_RIGHTS:"team_audit_log_user_shared_credential_with_external_full",USER_SHARED_CREDENTIAL_WITH_GROUP_LIMITED_RIGHTS:"team_audit_log_user_shared_credential_with_group_limited",USER_SHARED_CREDENTIAL_WITH_EMAIL_LIMITED_RIGHTS:"team_audit_log_user_shared_credential_with_email_limited",USER_SHARED_CREDENTIAL_WITH_EXTERNAL_LIMITED_RIGHTS:"team_audit_log_user_shared_credential_with_external_limited",USER_SHARED_SECURE_NOTE_WITH_GROUP_FULL_RIGHTS:"team_audit_log_user_shared_secure_note_with_group_full",USER_SHARED_SECURE_NOTE_WITH_EMAIL_FULL_RIGHTS:"team_audit_log_user_shared_secure_note_with_email_full",USER_SHARED_SECURE_NOTE_WITH_EXTERNAL_FULL_RIGHTS:"team_audit_log_user_shared_secure_note_with_external_full",USER_SHARED_SECURE_NOTE_WITH_GROUP_LIMITED_RIGHTS:"team_audit_log_user_shared_secure_note_with_group_limited",USER_SHARED_SECURE_NOTE_WITH_EMAIL_LIMITED_RIGHTS:"team_audit_log_user_shared_secure_note_with_email_limited",USER_SHARED_SECURE_NOTE_WITH_EXTERNAL_LIMITED_RIGHTS:"team_audit_log_user_shared_secure_note_with_external_limited",USER_ACCEPTED_SHARING_INVITE_SECURE_NOTE:"team_audit_log_user_accepted_sharing_invite_secure_note",USER_REJECTED_SHARING_INVITE_SECURE_NOTE:"team_audit_log_user_rejected_sharing_invite_secure_note",USER_ACCEPTED_SHARING_INVITE_CREDENTIAL:"team_audit_log_user_accepted_sharing_invite_credential",USER_REJECTED_SHARING_INVITE_CREDENTIAL:"team_audit_log_user_rejected_sharing_invite_credential",USER_REVOKED_SHARED_CREDENTIAL_GROUP:"team_audit_log_user_revoked_shared_credential_group",USER_REVOKED_SHARED_CREDENTIAL_EMAIL:"team_audit_log_user_revoked_shared_credential_email",USER_REVOKED_SHARED_CREDENTIAL_EXTERNAL:"team_audit_log_user_revoked_shared_credential_external",USER_REVOKED_SHARED_SECURE_NOTE_GROUP:"team_audit_log_user_revoked_shared_secure_note_group",USER_REVOKED_SHARED_SECURE_NOTE_EMAIL:"team_audit_log_user_revoked_shared_secure_note_email",USER_REVOKED_SHARED_SECURE_NOTE_EXTERNAL:"team_audit_log_user_revoked_shared_secure_note_external",USER_PRIVATE_COLLECTION_CREATED:"team_audit_log_user_private_collection_created",USER_PRIVATE_COLLECTION_IMPORTED:"team_audit_log_user_private_collection_imported",USER_PRIVATE_COLLECTION_ADDED_CREDENTIAL:"team_audit_log_user_private_collection_added_credential",USER_PRIVATE_COLLECTION_ADDED_CREDENTIAL_NO_DOMAIN:"team_audit_log_user_private_collection_added_credential_no_domain",USER_PRIVATE_COLLECTION_REMOVED:"team_audit_log_user_private_collection_removed_credential",USER_PRIVATE_COLLECTION_RENAMED:"team_audit_log_user_private_collection_renamed",USER_PRIVATE_COLLECTION_DELETED:"team_audit_log_user_private_collection_deleted",USER_SHARED_COLLECTION_SHARED_WITH_USER:"team_audit_log_user_shared_collection_shared_with_user",USER_SHARED_COLLECTION_SHARED_WITH_GROUP:"team_audit_log_user_shared_collection_shared_with_group",USER_SHARED_COLLECTION_ACCEPTED:"team_audit_log_user_shared_collection_accepted",USER_SHARED_COLLECTION_REJECTED:"team_audit_log_user_shared_collection_rejected",USER_SHARED_COLLECTION_ADDED_CREDENTIAL_ADMIN:"team_audit_log_user_shared_collection_added_credential_admin",USER_SHARED_COLLECTION_ADDED_CREDENTIAL_ADMIN_NO_DOMAIN:"team_audit_log_user_shared_collection_added_credential_admin_no_domain",USER_SHARED_COLLECTION_ADDED_CREDENTIAL_LIMITED:"team_audit_log_user_shared_collection_added_credential_limited",USER_SHARED_COLLECTION_ADDED_CREDENTIAL_LIMITED_NO_DOMAIN:"team_audit_log_user_shared_collection_added_credential_limited_no_domain",USER_SHARED_COLLECTION_REMOVED_CREDENTIAL:"team_audit_log_user_shared_collection_removed_credential",USER_SHARED_COLLECTION_UPDATED_GROUP_ROLES:"team_audit_log_user_shared_collection_group_roles",USER_SHARED_COLLECTION_UPDATED_USER_ROLES:"team_audit_log_user_shared_collection_user_roles",USER_SHARED_COLLECTION_REVOKED_GROUPS:"team_audit_log_user_shared_collection_revoked_groups",USER_SHARED_COLLECTION_REVOKED_USER:"team_audit_log_user_shared_collection_revoked_user",USER_SHARED_COLLECTION_REVOKED_GROUPS_INVITE:"team_audit_log_user_shared_collection_revoked_group_invite",USER_SHARED_COLLECTION_REVOKED_USER_INVITE:"team_audit_log_user_shared_collection_revoked_user_invite",USER_CREATED_CREDENTIAL:"team_audit_log_user_created_credential",USER_MODIFIED_CREDENTIAL:"team_audit_log_user_modified_credential",USER_DELETED_CREDENTIAL:"team_audit_log_user_deleted_credential",USER_IMPORTED_CREDENTIALS:{ONE:"team_audit_log_user_imported_credentials_one",MANY:"team_audit_log_user_imported_credentials_many"},USER_CREATED_SECURE_NOTE:"team_audit_log_user_created_secure_note",USER_MODIFIED_SECURE_NOTE:"team_audit_log_user_modified_secure_note",USER_DELETED_SECURE_NOTE:"team_audit_log_user_deleted_secure_note",NUDGE_EXECUTED:"team_audit_log_nudge_executed",NUDGE_EXECUTED_WITH_FAILURES:"team_audit_log_nudge_executed_with_failures",NUDGE_CONFIGURED:"team_audit_log_nudge_configured",NITRO_INTEGRATION_APP_INSTALLED:"team_audit_log_nitro_integration_app_installed",NITRO_INTEGRATION_APP_UNINSTALLED:"team_audit_log_nitro_integration_app_uninstalled",USER_RECEIVED_NUDGE:"team_audit_log_user_received_nudge",NUDGE_NAME_COMPROMISED_PASSWORDS:"team_audit_log_nudge_name_compromised_passwords",NUDGE_NAME_WEAK_PASSWORDS:"team_audit_log_nudge_name_weak_passwords",MASS_DEPLOYMENT_CONFIGURATION_UPDATED:"team_audit_log_mass_deployment_configuration_updated",USER_TYPED_COMPROMISED_PASSWORD:"team_audit_log_user_typed_compromised_password",USER_TYPED_WEAK_PASSWORD:"team_audit_log_user_typed_weak_password",USER_TYPED_PASSWORD:"team_audit_log_user_typed_password",USER_PERFORMED_AUTOFILL_CREDENTIAL:"team_audit_log_user_performed_autofill",USER_PERFORMED_AUTOFILL_PAYMENT_CARD:"team_audit_log_user_performed_autofill_credit_card",USER_PERFORMED_AUTOFILL_BANK_ACCOUNT:"team_audit_log_user_performed_autofill_bank_account",USER_AUTHENTICATED_WITH_PASSKEY:"team_audit_log_user_authenticated_with_passkey",USER_REVEALED_CREDENTIAL_FIELD:"team_audit_log_user_revealed_credential_field",USER_REVEALED_CREDIT_CARD_FIELD:"team_audit_log_user_revealed_credit_card_field",USER_REVEALED_BANK_ACCOUNT_FIELD:"team_audit_log_user_revealed_bank_account_field",USER_REVEALED_SECURE_NOTE_FIELD:"team_audit_log_user_revealed_secure_note_field",USER_REVEALED_SECRET_FIELD:"team_audit_log_user_revealed_secret_field",USER_COPIED_CREDENTIAL_FIELD:"team_audit_log_user_copied_credential_field",USER_COPIED_CREDIT_CARD_FIELD:"team_audit_log_user_copied_credit_card_field",USER_COPIED_BANK_ACCOUNT_FIELD:"team_audit_log_user_copied_bank_account_field",USER_COPIED_SECURE_NOTE_FIELD:"team_audit_log_user_copied_secure_note_field",USER_COPIED_SECRET_FIELD:"team_audit_log_user_copied_secret_field",USER_EXCLUDED_ITEM_FROM_PASSWORD_HEALTH:"team_audit_log_user_excluded_item_from_password_health",USER_INCLUDED_ITEM_IN_PASSWORD_HEALTH:"team_audit_log_user_included_item_in_password_health",ACTIVE:"team_audit_log_active",INACTIVE:"team_audit_log_inactive"},ro=(e,t)=>{switch(e){case"compromised_passwords":return t(io.NUDGE_NAME_COMPROMISED_PASSWORDS);case"weak_passwords":return t(io.NUDGE_NAME_WEAK_PASSWORDS)}return e},so=(e,t)=>{switch(e){case"active":return t(io.ACTIVE);case"inactive":return t(io.INACTIVE)}return e},oo={[qs.b.UserInvited]:(e,t)=>t(io.USER_INVITED,{email:`**${e?.properties?.target_login}**`}),[qs.b.UserReinvited]:(e,t)=>t(io.USER_REINVITED,{email:`**${e?.properties?.target_login}**`}),[qs.b.UserRemoved]:(e,t)=>t(io.USER_REMOVED,{email:`**${e?.properties?.target_login}**`}),[qs.b.TeamCaptainAdded]:(e,t)=>t(io.TEAM_CAPTAIN_ADDED,{email:`**${e?.properties?.target_login}**`}),[qs.b.TeamCaptainRemoved]:(e,t)=>t(io.TEAM_CAPTAIN_REMOVED,{email:`**${e?.properties?.target_login}**`}),[qs.b.GroupManagerAdded]:(e,t)=>t(io.GROUP_MANAGER_ADDED,{email:`**${e?.properties?.target_login}**`}),[qs.b.GroupManagerRemoved]:(e,t)=>t(io.GROUP_MANAGER_REMOVED,{email:`**${e?.properties?.target_login}**`}),[qs.b.MasterPasswordResetAccepted]:(e,t)=>t(io.MASTER_PASSWORD_RESET_ACCEPTED,{email:`**${e?.properties?.target_login}**`}),[qs.b.MasterPasswordResetRefused]:(e,t)=>t(io.MASTER_PASSWORD_RESET_REFUSED,{email:`**${e?.properties?.target_login}**`}),[qs.b.BillingAdminAdded]:(e,t)=>t(io.BILLING_ADMIN_ADDED,{email:`**${e?.properties?.target_login}**`}),[qs.b.BillingAdminRemoved]:(e,t)=>t(io.BILLING_ADMIN_REMOVED,{email:`**${e?.properties?.target_login}**`}),[qs.b.UserGroupCreated]:(e,t)=>t(io.USER_GROUP_CREATED,{groupName:`**${e.properties?.group_name}**`}),[qs.b.UserGroupRenamed]:(e,t)=>t(io.USER_GROUP_RENAMED,{newGroupName:`**${e.properties?.group_name}**`,oldGroupName:`**${e.properties?.old_group_name}**`}),[qs.b.UserGroupDeleted]:(e,t)=>t(io.USER_GROUP_DELETED,{groupName:`**${e.properties?.group_name}**`}),[qs.b.UserJoinedUserGroup]:(e,t)=>t(io.USER_JOINED_USER_GROUP,{groupName:`**${e.properties?.group_name}**`}),[qs.b.UserLeftUserGroup]:(e,t)=>t(io.USER_LEFT_USER_GROUP,{groupName:`**${e.properties?.group_name}**`}),[qs.b.UserInvitedToUserGroup]:(e,t)=>t(io.USER_INVITED_TO_USER_GROUP,{groupName:`**${e.properties?.group_name}**`,email:`**${e?.properties?.target_login}**`}),[qs.b.UserDeclinedInviteToUserGroup]:(e,t)=>t(io.USER_DECLINED_INVITE_TO_USER_GROUP,{groupName:`**${e.properties?.group_name}**`}),[qs.b.UserRemovedFromUserGroup]:(e,t)=>t(io.USER_REMOVED_FROM_USER_GROUP,{groupName:`**${e.properties?.group_name}**`,email:`**${e?.properties?.target_login}**`}),[qs.b.DomainRequested]:(e,t)=>t(io.DOMAIN_REQUESTED,{domain:`**${e.properties?.domain_url}**`}),[qs.b.DomainValidated]:(e,t)=>t(io.DOMAIN_VALIDATED,{domain:`**${e.properties?.domain_url}**`}),[qs.b.SensitiveLogsEnabled]:(e,t)=>t(io.SENSITIVE_LOGS_ENABLED),[qs.b.SensitiveLogsDisabled]:(e,t)=>t(io.SENSITIVE_LOGS_DISABLED),[qs.b.SsoIdpMetadataSet]:(e,t)=>t(io.SSO_IDP_METADATA_SET),[qs.b.SsoServiceProviderUrlSet]:(e,t)=>t(io.SSO_SERVICE_PROVIDER_URL_SET),[qs.b.SsoEnabled]:(e,t)=>t(io.SSO_ENABLED,e.properties?.hosting?{hosting:e.properties?.hosting}:void 0),[qs.b.SsoDisabled]:(e,t)=>t(io.SSO_DISABLED,e.properties?.hosting?{hosting:e.properties?.hosting}:void 0),[qs.b.TeamNameChanged]:(e,t)=>t(io.TEAM_NAME_CHANGED,{name:`**${e.properties?.name}**`}),[qs.b.NewBillingPeriodCreated]:(e,t)=>t(io.NEW_BILLING_PERIOD_CREATED,{date:`**${t.shortDate((0,ln.Z)(e.properties?.new_end_date_unix),fn._T.L)}**`}),[qs.b.SeatsAdded]:(e,t)=>t(io.SEATS_ADDED,{count:`**${e.properties?.seats_added}**`}),[qs.b.ContactEmailChanged]:(e,t)=>t(io.CONTACT_EMAIL_CHANGED,{email:`**${e?.properties?.new_contact_email}**`}),[qs.b.MasterPasswordMobileResetEnabled]:(e,t)=>t(io.MASTER_PASSWORD_MOBILE_RESET_ENABLED,{deviceName:e?.properties?.device_name?`**${e?.properties?.device_name}**`:"mobile"}),[qs.b.MasterPasswordMobileResetDisabled]:(e,t)=>t(io.MASTER_PASSWORD_MOBILE_RESET_DISABLED,{deviceName:e?.properties?.device_name?`**${e?.properties?.device_name}**`:"mobile"}),[qs.b.MasterPasswordChanged]:(e,t)=>t(io.MASTER_PASSWORD_CHANGED),[qs.b.MpToViewPasswordsEnabled]:(e,t)=>t(io.MP_TO_VIEW_PASSWORDS_ENABLED),[qs.b.MpToViewPasswordsDisabled]:(e,t)=>t(io.MP_TO_VIEW_PASSWORDS_DISABLED),[qs.b.TwoFactorAuthenticationLoginMethodAdded]:(e,t)=>t(io.TWO_FACTOR_AUTHENTICATION_LOGIN_METHOD_ADDED),[qs.b.TwoFactorAuthenticationFailed]:(e,t)=>t("emailToken"===e.properties.two_factor_method?io.TWO_FACTOR_AUTHENTICATION_FAILED_EMAIL_TOKEN:io.TWO_FACTOR_AUTHENTICATION_FAILED_OTP),[qs.b.TwoFactorAuthenticationLoginMethodRemoved]:(e,t)=>t(io.TWO_FACTOR_AUTHENTICATION_LOGIN_METHOD_REMOVED),[qs.b.BiometricSignInDisabled]:(e,t)=>t(io.BIOMETRIC_SIGN_IN_DISABLED,{deviceName:`**${e?.properties?.device_name}**`}),[qs.b.NitroSsoSetupStarted]:(e,t)=>t(io.NITRO_SSO_SETUP_STARTED),[qs.b.NitroSsoDomainProvisioned]:(e,t)=>t(io.NITRO_SSO_DOMAIN_PROVISIONED,{domain:`**${e?.properties?.domain_url}**`}),[qs.b.NitroSsoDomainRemoved]:(e,t)=>t(io.NITRO_SSO_DOMAIN_REMOVED,{domain:`**${e?.properties?.domain_url}**`}),[qs.b.NitroSsoDomainVerified]:(e,t)=>t(io.NITRO_SSO_DOMAIN_VERIFIED,{domain:`**${e?.properties?.domain_url}**`}),[qs.b.NitroUserProvisioningActivated]:(e,t)=>t(io.NITRO_USER_PROVISIONING_ACTIVATED),[qs.b.NitroUserProvisioningDeactivated]:(e,t)=>t(io.NITRO_USER_PROVISIONING_DEACTIVATED),[qs.b.NitroGroupProvisioningActivated]:(e,t)=>t(io.NITRO_GROUP_PROVISIONING_ACTIVATED),[qs.b.NitroGroupProvisioningDeactivated]:(e,t)=>t(io.NITRO_GROUP_PROVISIONING_DEACTIVATED),[qs.b.NitroSiemActivated]:(e,t)=>t(io.NITRO_SIEM_ACTIVATED,{siemType:`**${e.properties.siem_type}**`}),[qs.b.NitroSiemDeactivated]:(e,t)=>t(io.NITRO_SIEM_DEACTIVATED,{siemType:`**${e.properties.siem_type}**`}),[qs.b.NitroSiemEdited]:(e,t)=>t(io.NITRO_SIEM_EDITED,{siemType:`**${e.properties.siem_type}**`}),[qs.b.DWMEmailAdded]:(e,t)=>t(io.DWM_EMAIL_ADDED,{email:`**${e?.properties?.dark_web_monitoring_email}**`}),[qs.b.DWMEmailRemoved]:(e,t)=>t(io.DWM_EMAIL_REMOVED,{email:`**${e?.properties?.dark_web_monitoring_email}**`}),[qs.b.DWMAlertReceived]:(e,t)=>t(io.DWM_ALERT_RECEIVED,{email:`**${e?.properties?.dark_web_monitoring_email}**`}),[qs.b.UserDeviceAdded]:(e,t)=>t(io.USER_DEVICE_ADDED,{name:`**${e.properties?.device_name}**`}),[qs.b.UserDeviceRemoved]:(e,t)=>t(io.USER_DEVICE_REMOVED,{name:`**${e.properties?.device_name}**`}),[qs.b.UserDeviceLogin]:(e,t)=>t(io.USER_DEVICE_LOGIN,{name:`**${e.properties?.device_name}**`}),[qs.b.MasterPasswordReset]:(e,t)=>t(io.MASTER_PASSWORD_RESET),[qs.b.RequestedAccountRecovery]:(e,t)=>t(io.REQUESTED_ACCOUNT_RECOVERY),[qs.b.CompletedAccountRecovery]:(e,t)=>t(io.COMPLETED_ACCOUT_RECOVERY),[qs.b.MasterPasswordMobileReset]:(e,t)=>t(io.MASTER_PASSWORD_MOBILE_RESET,{deviceName:e?.properties?.device_name?`**${e?.properties?.device_name}**`:"mobile"}),[qs.b.UserSharedCredentialWithGroup]:(e,t)=>{const n=e;return t("admin"===n.properties.permission?io.USER_SHARED_CREDENTIAL_WITH_GROUP_FULL_RIGHTS:io.USER_SHARED_CREDENTIAL_WITH_GROUP_LIMITED_RIGHTS,{domain:`**${n.properties.domain_url}**`,group:`**${n.properties.group_name}**`})},[qs.b.UserSharedCredentialWithEmail]:(e,t)=>{const n=e;return t("admin"===n.properties.permission?io.USER_SHARED_CREDENTIAL_WITH_EMAIL_FULL_RIGHTS:io.USER_SHARED_CREDENTIAL_WITH_EMAIL_LIMITED_RIGHTS,{domain:`**${n.properties.domain_url}**`,email:`**${n.properties.target_login}**`})},[qs.b.UserSharedCredentialWithExternal]:(e,t)=>{const n=e;return t("admin"===n.properties.permission?io.USER_SHARED_CREDENTIAL_WITH_EXTERNAL_FULL_RIGHTS:io.USER_SHARED_CREDENTIAL_WITH_EXTERNAL_LIMITED_RIGHTS,{domain:`**${n.properties.domain_url}**`,email:`**${n.properties.target_login}**`})},[qs.b.UserSharedSecureNoteWithGroup]:(e,t)=>{const n=e;return t("admin"===n.properties.permission?io.USER_SHARED_SECURE_NOTE_WITH_GROUP_FULL_RIGHTS:io.USER_SHARED_SECURE_NOTE_WITH_GROUP_LIMITED_RIGHTS,{name:`**${n.properties.item_name}**`,group:`**${n.properties.group_name}**`})},[qs.b.UserSharedSecureNoteWithEmail]:(e,t)=>{const n=e;return t("admin"===n.properties.permission?io.USER_SHARED_SECURE_NOTE_WITH_EMAIL_FULL_RIGHTS:io.USER_SHARED_SECURE_NOTE_WITH_EMAIL_LIMITED_RIGHTS,{name:`**${n.properties.item_name}**`,email:`**${n.properties.target_login}**`})},[qs.b.UserSharedSecureNoteWithExternal]:(e,t)=>{const n=e;return t("admin"===n.properties.permission?io.USER_SHARED_SECURE_NOTE_WITH_EXTERNAL_FULL_RIGHTS:io.USER_SHARED_SECURE_NOTE_WITH_EXTERNAL_LIMITED_RIGHTS,{name:`**${n.properties.item_name}**`,email:`**${n.properties.target_login}**`})},[qs.b.UserRevokedSharedCredentialGroup]:(e,t)=>{const n=e;return t(io.USER_REVOKED_SHARED_CREDENTIAL_GROUP,{domain:`**${n.properties.domain_url}**`,group:`**${n.properties.group_name}**`})},[qs.b.UserRevokedSharedCredentialEmail]:(e,t)=>{const n=e;return t(io.USER_REVOKED_SHARED_CREDENTIAL_EMAIL,{domain:`**${n.properties.domain_url}**`,email:`**${n.properties.target_login}**`})},[qs.b.UserRevokedSharedCredentialExternal]:(e,t)=>{const n=e;return t(io.USER_REVOKED_SHARED_CREDENTIAL_EXTERNAL,{domain:`**${n.properties.domain_url}**`,email:`**${n.properties.target_login}**`})},[qs.b.UserRevokedSharedSecureNoteGroup]:(e,t)=>{const n=e;return t(io.USER_REVOKED_SHARED_SECURE_NOTE_GROUP,{name:`**${n.properties.item_name}**`,group:`**${n.properties.group_name}**`})},[qs.b.UserRevokedSharedSecureNoteEmail]:(e,t)=>{const n=e;return t(io.USER_REVOKED_SHARED_SECURE_NOTE_EMAIL,{name:`**${n.properties.item_name}**`,email:`**${n.properties.target_login}**`})},[qs.b.UserRevokedSharedSecureNoteExternal]:(e,t)=>{const n=e;return t(io.USER_REVOKED_SHARED_SECURE_NOTE_EXTERNAL,{name:`**${n.properties.item_name}**`,email:`**${n.properties.target_login}**`})},[qs.b.UserAcceptedSharingInviteSecureNote]:(e,t)=>t(io.USER_ACCEPTED_SHARING_INVITE_SECURE_NOTE,{name:`**${e.properties.item_name}**`}),[qs.b.UserRejectedSharingInviteSecureNote]:(e,t)=>t(io.USER_REJECTED_SHARING_INVITE_SECURE_NOTE,{name:`**${e.properties.item_name}**`}),[qs.b.UserAcceptedSharingInviteCredential]:(e,t)=>t(io.USER_ACCEPTED_SHARING_INVITE_CREDENTIAL,{domain:`**${e.properties.domain_url}**`}),[qs.b.UserRejectedSharingInviteCredential]:(e,t)=>t(io.USER_REJECTED_SHARING_INVITE_CREDENTIAL,{domain:`**${e.properties.domain_url}**`}),[qs.b.UserCreatedCollection]:(e,t)=>t(io.USER_PRIVATE_COLLECTION_CREATED,{user:`${e.properties.author_login}`,name:`**${e.properties.collection_name}**`}),[qs.b.UserImportedCollection]:(e,t)=>t(io.USER_PRIVATE_COLLECTION_IMPORTED,{user:`${e.properties.author_login}`,number:`${e.properties.credential_count}`,collection:`**${e.properties.collection_name}**`}),[qs.b.UserAddedCredentialToCollection]:(e,t)=>e.properties.domain_url?t(io.USER_PRIVATE_COLLECTION_ADDED_CREDENTIAL,{user:`${e.properties.author_login}`,domain:`**${e.properties.domain_url}**`,name:`**${e.properties.collection_name}**`}):t(io.USER_PRIVATE_COLLECTION_ADDED_CREDENTIAL_NO_DOMAIN,{user:`${e.properties.author_login}`,name:`**${e.properties.collection_name}**`}),[qs.b.UserRemovedCredentialFromCollection]:(e,t)=>t(io.USER_PRIVATE_COLLECTION_REMOVED,{user:`${e.properties.author_login}`,domain:`**${e.properties.domain_url}**`,name:`**${e.properties.collection_name}**`}),[qs.b.UserRenamedCollection]:(e,t)=>t(io.USER_PRIVATE_COLLECTION_RENAMED,{user:`${e.properties.author_login}`,old:`**${e.properties.old_collection_name}**`,new:`**${e.properties.collection_name}**`}),[qs.b.UserDeletedCollection]:(e,t)=>t(io.USER_PRIVATE_COLLECTION_DELETED,{user:`${e.properties.author_login}`,name:`**${e.properties.collection_name}**`}),[qs.b.UserSharedCollectionWithUser]:(e,t)=>t(io.USER_SHARED_COLLECTION_SHARED_WITH_USER,{user:`${e.properties.author_login}`,name:`**${e.properties.collection_name}**`,role:`${e.properties.permission}`,email:`${e.properties.target_login}`}),[qs.b.UserSharedCollectionWithGroup]:(e,t)=>t(io.USER_SHARED_COLLECTION_SHARED_WITH_GROUP,{user:`${e.properties.author_login}`,name:`**${e.properties.collection_name}**`,role:`${e.properties.permission}`,group:`${e.properties.group_name}`}),[qs.b.UserAcceptedCollection]:(e,t)=>t(io.USER_SHARED_COLLECTION_ACCEPTED,{user:`${e.properties.author_login}`,name:`**${e.properties.collection_name}**`}),[qs.b.UserRejectedCollection]:(e,t)=>t(io.USER_SHARED_COLLECTION_REJECTED,{user:`${e.properties.author_login}`,name:`**${e.properties.collection_name}**`}),[qs.b.UserAddedItemToCollection]:(e,t)=>{const n="USER_SHARED_COLLECTION_ADDED_CREDENTIAL"+("admin"===e.properties.permission?"_ADMIN":"_LIMITED");return e.properties.domain_url?t(io[n],{user:`${e.properties.author_login}`,domain:`**${e.properties.domain_url}**`,rights:`${e.properties.permission}`,name:`**${e.properties.collection_name}**`}):t(io[n+"_NO_DOMAIN"],{user:`${e.properties.author_login}`,rights:`${e.properties.permission}`,name:`**${e.properties.collection_name}**`})},[qs.b.UserRemovedItemFromCollection]:(e,t)=>t(io.USER_SHARED_COLLECTION_REMOVED_CREDENTIAL,{user:`${e.properties.author_login}`,domain:`**${e.properties.domain_url}**`,name:`**${e.properties.collection_name}**`}),[qs.b.UserUpdatedGroupRoleInCollection]:(e,t)=>t(io.USER_SHARED_COLLECTION_UPDATED_GROUP_ROLES,{user:`${e.properties.author_login}`,group:`**${e.properties.group_name}**`,role1:`${e.properties.old_permission}`,role2:`${e.properties.permission}`,name:`**${e.properties.collection_name}**`}),[qs.b.UserUpdatedUserRoleInCollection]:(e,t)=>t(io.USER_SHARED_COLLECTION_UPDATED_USER_ROLES,{user:`${e.properties.author_login}`,email:`**${e.properties.group_name}**`,role1:`${e.properties.old_permission}`,role2:`${e.properties.permission}`,name:`**${e.properties.collection_name}**`}),[qs.b.UserRevokedGroupFromCollection]:(e,t)=>t(io.USER_SHARED_COLLECTION_REVOKED_GROUPS,{user:`${e.properties.author_login}`,name:`**${e.properties.collection_name}**`,group:`**${e.properties.group_name}**`}),[qs.b.UserRevokedUserFromCollection]:(e,t)=>t(io.USER_SHARED_COLLECTION_REVOKED_USER,{user:`${e.properties.author_login}`,name:`**${e.properties.collection_name}**`,email:`**${e.properties.target_login}**`}),[qs.b.UserRenamedSharedCollection]:(e,t)=>t(io.USER_PRIVATE_COLLECTION_RENAMED,{user:`${e.properties.author_login}`,old:`**${e.properties.old_collection_name}**`,new:`**${e.properties.collection_name}**`}),[qs.b.UserCreatedCredential]:(e,t)=>t(io.USER_CREATED_CREDENTIAL,{domain:`**${e.properties.domain_url}**`}),[qs.b.UserModifiedCredential]:(e,t)=>t(io.USER_MODIFIED_CREDENTIAL,{domain:`**${e.properties.domain_url}**`}),[qs.b.UserDeletedCredential]:(e,t)=>t(io.USER_DELETED_CREDENTIAL,{domain:`**${e.properties.domain_url}**`}),[qs.b.UserImportedCredentials]:(e,t)=>t(e.properties.import_count>1?io.USER_IMPORTED_CREDENTIALS.MANY:io.USER_IMPORTED_CREDENTIALS.ONE,{importCount:`**${e.properties.import_count}**`}),[qs.b.UserCreatedSecureNote]:(e,t)=>t(io.USER_CREATED_SECURE_NOTE,{name:`**${e.properties.item_name}**`}),[qs.b.UserModifiedSecureNote]:(e,t)=>t(io.USER_MODIFIED_SECURE_NOTE,{name:`**${e.properties.item_name}**`}),[qs.b.UserDeletedSecureNote]:(e,t)=>t(io.USER_DELETED_SECURE_NOTE,{name:`**${e.properties.item_name}**`}),[qs.b.NudgeExecuted]:(e,t)=>{const n=e,a=ro(n.properties.nudge_name,t);return t(n.properties.failures>0?io.NUDGE_EXECUTED_WITH_FAILURES:io.NUDGE_EXECUTED,{nudge_name:`**${a}**`,successes:`**${n.properties.successes}**`,failures:`**${n.properties.failures}**`})},[qs.b.NudgeConfigured]:(e,t)=>{const n=e,a=ro(n.properties.nudge_name,t),i=so(n.properties.status,t);return t(io.NUDGE_CONFIGURED,{nudge_name:`**${a}**`,status:`**${i}**`})},[qs.b.NitroIntegrationAppInstalled]:(e,t)=>t(io.NITRO_INTEGRATION_APP_INSTALLED,{integration_app:`**${e.properties.integration_app}**`}),[qs.b.NitroIntegrationAppUninstalled]:(e,t)=>t(io.NITRO_INTEGRATION_APP_UNINSTALLED,{integration_app:`**${e.properties.integration_app}**`}),[qs.b.UserReceivedNudge]:(e,t)=>{const n=ro(e.properties.nudge_received,t);return t(io.USER_RECEIVED_NUDGE,{nudge_received:`**${n}**`})},[qs.b.MassDeploymentConfigurationUpdated]:(e,t)=>{const n=so(e.properties.status,t);return t(io.MASS_DEPLOYMENT_CONFIGURATION_UPDATED,{status:`**${n}**`})},[qs.b.UserTypedCompromisedPassword]:(e,t)=>t(io.USER_TYPED_COMPROMISED_PASSWORD,{domain_url:`**${e.properties?.domain_url}**`}),[qs.b.UserTypedWeakPassword]:(e,t)=>t(io.USER_TYPED_WEAK_PASSWORD,{domain_url:`**${e.properties?.domain_url}**`}),[qs.b.UserTypedPassword]:(e,t)=>{const{properties:{domain_url:n,health_status:a}}=e;return t("compromised"===a?io.USER_TYPED_COMPROMISED_PASSWORD:io.USER_TYPED_WEAK_PASSWORD,{domain_url:`**${n}**`})},[qs.b.UserPerformedAutofillCredential]:(e,t)=>{const{properties:{credential_login:n,credential_domain:a,autofilled_domain:i}}=e;return t(io.USER_PERFORMED_AUTOFILL_CREDENTIAL,{credential_login:`**${n}**`,credential_domain:`**${a}**`,autofilled_domain:`**${i}**`})},[qs.b.UserPerformedAutofillPayment]:(e,t)=>{const{properties:{item_name:n,item_type:a,autofilled_domain:i}}=e;return t("bank_account"===a?io.USER_PERFORMED_AUTOFILL_BANK_ACCOUNT:io.USER_PERFORMED_AUTOFILL_PAYMENT_CARD,{item_name:`**${n}**`,item_type:`**${a}**`,autofilled_domain:`**${i}**`})},[qs.b.UserAuthenticatedWithPasskey]:(e,t)=>{const{properties:{passkey_domain:n,current_domain:a,credential_login:i}}=e;return t(io.USER_AUTHENTICATED_WITH_PASSKEY,{credential_login:`**${i}**`,passkey_domain:`**${n}**`,current_domain:`**${a}**`})},[qs.b.UserRevealedCredentialField]:(e,t)=>{const{properties:{credential_domain:n,credential_login:a,field:i}}=e;return t(io.USER_REVEALED_CREDENTIAL_FIELD,{field:`**${i}**`,credential_login:`**${a}**`,credential_domain:`**${n}**`})},[qs.b.UserRevealedCreditCardField]:(e,t)=>{const{properties:{name:n,field:a}}=e;return t(io.USER_REVEALED_CREDIT_CARD_FIELD,{field:`**${a}**`,name:`**${n}**`})},[qs.b.UserRevealedBankAccountField]:(e,t)=>{const{properties:{name:n,field:a}}=e;return t(io.USER_REVEALED_BANK_ACCOUNT_FIELD,{field:`**${a}**`,name:`**${n}**`})},[qs.b.UserRevealedSecret]:(e,t)=>{const{properties:{name:n}}=e;return t(io.USER_REVEALED_SECRET_FIELD,{name:`**${n}**`})},[qs.b.UserRevealedSecureNote]:(e,t)=>{const{properties:{name:n}}=e;return t(io.USER_REVEALED_SECURE_NOTE_FIELD,{name:`**${n}**`})},[qs.b.UserCopiedCredentialField]:(e,t)=>{const{properties:{credential_domain:n,credential_login:a,field:i}}=e;return t(io.USER_COPIED_CREDENTIAL_FIELD,{field:`**${i}**`,credential_login:`**${a}**`,credential_domain:`**${n}**`})},[qs.b.UserCopiedCreditCardField]:(e,t)=>{const{properties:{name:n,field:a}}=e;return t(io.USER_COPIED_CREDIT_CARD_FIELD,{field:`**${a}**`,name:`**${n}**`})},[qs.b.UserCopiedBankAccountField]:(e,t)=>{const{properties:{name:n,field:a}}=e;return t(io.USER_COPIED_BANK_ACCOUNT_FIELD,{field:`**${a}**`,name:`**${n}**`})},[qs.b.UserCopiedSecret]:(e,t)=>{const{properties:{name:n}}=e;return t(io.USER_COPIED_SECRET_FIELD,{name:`**${n}**`})},[qs.b.UserCopiedSecureNote]:(e,t)=>{const{properties:{name:n}}=e;return t(io.USER_COPIED_SECURE_NOTE_FIELD,{name:`**${n}**`})},[qs.b.UserIncludedItemInPasswordHealth]:(e,t)=>{const{properties:{credential_login:n,credential_domain:a}}=e;return t(io.USER_INCLUDED_ITEM_IN_PASSWORD_HEALTH,{credential_login:`**${n}**`,credential_domain:`**${a}**`})},[qs.b.UserExcludedItemFromPasswordHealth]:(e,t)=>{const{properties:{credential_login:n,credential_domain:a}}=e;return t(io.USER_EXCLUDED_ITEM_FROM_PASSWORD_HEALTH,{credential_login:`**${n}**`,credential_domain:`**${a}**`})}},lo=(e,t)=>ao.includes(e.log_type)?oo[e.log_type](e,t):"",co=Object.values(qs.b);var _o=n(96289);const uo=Object.values(qs.b),mo="team_activity_list_head_admin",po="team_activity_list_head_action",go="team_activity_list_head_time_csv";var ho,yo=n(61886);const bo=({progressPercent:e})=>{const{translate:t}=(0,b.Z)(),n=Math.min(Math.max(e,0),100);return(0,E.BX)(r.Fragment,{children:[(0,E.BX)("div",{sx:{gap:"8px",height:"16px",display:"flex",flexDirection:"row",flexWrap:"nowrap",alignItems:"center"},children:[(0,E.tZ)(yo.b,{percentage:n,size:"small"}),100===n?ho||(ho=(0,E.tZ)(T.JO,{size:"small",name:"FeedbackSuccessFilled",color:"ds.text.positive.quiet"})):null]}),(0,E.tZ)(_.n,{textStyle:"ds.body.helper.regular",color:"ds.text.neutral.quiet",sx:{marginTop:"4px"},children:t("team_activity_download_modal_progress",{progressPercentage:n})})]})},So=({isOpen:e,areLogsLoading:t,hasMoreLogs:n,logs:a,loadMoreLogs:i,onClose:s})=>{const[l,c]=(0,r.useState)(0),{translate:d}=(0,b.Z)(),{showToast:m}=(0,o.p)(),p=()=>{s(),c(0)};return(0,r.useEffect)((()=>{if(!e||t)return;if(n)return c(l<80?l+20:l),void i(1e3);c(100);const r=((e,t,n=!1)=>{const a=(n?[t(mo),t("team_activity_list_head_category"),t(po),t(go)]:[t(mo),t(po),t(go)]).join(",")+"\n",i=e.filter((e=>uo.includes(e.log_type))).map((e=>{var a;const i=null!=(a=e.properties?.author_login)?a:"",r=lo(e,t).replace(/\*\*/g,"").replace(/[â€œâ€]/g,'"'),{label:s}=no(e,t),o=new Date(e.date_time).toISOString(),l=`${o.substr(0,10)} ${o.substr(11,8)}`;return n?`${i},${s},${r},${l}`:`${i},${r},${l}`}));return(0,y.Kz)(new u.UserDownloadAuditLogsDataEvent({flowStep:u.FlowStep.Complete,auditLogCount:i.length})),a+i.join("\n")})(a,d,!0);try{(0,_o.S)(["\ufeff",r],"dashlane-activity-export.csv","text/csv;charset=utf-8"),setTimeout(p,2e3)}catch(e){m({mood:"danger",description:d("_common_generic_error")}),(0,y.Kz)(new u.UserDownloadAuditLogsDataEvent({flowStep:u.FlowStep.Error,auditLogDownloadError:u.AuditLogDownloadError.NoCsv}))}}),[e,n,t,a]),(0,E.tZ)("div",{children:(0,E.tZ)(J.Vq,{isOpen:e,closeActionLabel:d("_common_dialog_dismiss_button"),onClose:p,title:d("team_activity_download_modal_title"),children:(0,E.BX)("div",{sx:{maxHeight:"fit-content",overflowX:"hidden",overflowY:"auto"},children:[(0,E.tZ)(bo,{progressPercent:l}),(0,E.tZ)(_.n,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",sx:{margin:"16px 0"},children:d("team_activity_download_modal_body")}),(0,E.tZ)(rn.k,{mood:"neutral",size:"small",title:d("team_activity_download_modal_warning")})]})})})};var xo=n(31062);const fo=e=>t=>{!e||"Enter"!==t.key&&" "!==t.key||(e(),t.preventDefault())},vo={padding:"16px 0 16px 16px",textAlign:"left",fontSize:"12px",fontWeight:"600",verticalAlign:"middle",whiteSpace:"break-spaces",textTransform:"uppercase",cursor:"default"},Co=({onClick:e,sortOrder:t,colSpan:n,tooltipLabel:a,headerLabel:i,headerElement:s})=>{const[o,l]=(0,r.useState)(!1);return(0,E.tZ)("th",{scope:"col",role:"columnheader",colSpan:n,tabIndex:0,"aria-sort":(c=t,"asc"===c?"ascending":"desc"===c?"descending":"none"),onClick:e,onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),onFocus:()=>l(!0),onBlur:()=>l(!1),onKeyDown:fo(e),sx:vo,children:(0,E.BX)("div",{sx:{display:"flex",height:"100%",maxWidth:"140px",alignItems:"center"},children:[s||null,a?(0,E.tZ)(xo.u,{content:a,isOpen:o,children:(0,E.tZ)("span",{sx:{marginTop:"-5px",paddingTop:"5px",minWidth:0,whiteSpace:"break-spaces"},children:i})}):(0,E.tZ)("span",{sx:{minWidth:0,whiteSpace:"break-spaces",overflow:"hidden",textOverflow:"ellipsis"},children:i}),(0,E.tZ)("div",{sx:{width:"10px"},children:t?(0,E.tZ)(T.JO,{sx:{ml:"4px"},name:"desc"===t?"CaretDownOutlined":"CaretUpOutlined",size:"small"}):null})]})});var c},Eo=({headerElement:e,colSpan:t,headerLabel:n,tooltipLabel:a})=>(0,E.BX)("th",{colSpan:t,sx:vo,children:[e||null,a?(0,E.tZ)(xo.u,{content:a,children:(0,E.tZ)("span",{sx:{minWidth:0,whiteSpace:"break-spaces"},children:n})}):(0,E.tZ)("span",{sx:{minWidth:0,whiteSpace:"break-spaces"},children:n})]}),Zo=({columns:e,sxProps:t})=>(0,E.tZ)("thead",{sx:t,children:(0,E.tZ)("tr",{"aria-rowindex":1,sx:{color:"ds.text.neutral.quiet"},children:e.map((e=>e.onClick?(0,E.tZ)(Co,{...e},e.headerKey):(0,E.tZ)(Eo,{...e},e.headerKey)))})}),ko=({children:e,withCategories:t=!1})=>{const{translate:n}=(0,b.Z)(),a=[{headerLabel:n("team_activity_list_head_admin"),headerKey:"admin"},{headerLabel:n("team_activity_list_head_category"),headerKey:"category"},{headerLabel:n("team_activity_list_head_action"),headerKey:"action"},{headerLabel:n("team_activity_list_head_time"),headerKey:"time"}].filter((e=>"category"!==e.headerKey||t));return(0,E.BX)("table",{sx:{width:"100%",lineHeight:1.5,textAlign:"left"},children:[(0,E.tZ)(Zo,{columns:a,sxProps:{backgroundColor:"ds.container.agnostic.neutral.quiet"}}),(0,E.tZ)("tbody",{sx:Ws.TABLE_BODY,children:e},"table-body")]})};var Do=n(57195),To=n(32814),Io=n(53506);const Ao=({text:e})=>{if(!e)return null;const t=e.split("**");return 1===t.length?(0,E.tZ)("span",{children:e}):(0,E.tZ)("span",{children:t.map(((e,t)=>t%2==1?(0,E.tZ)("strong",{children:e},`${e}-${t}`):e))})},wo={LOGIN_CELL:{display:"flex",padding:"15px 16px 14px"},LOGIN_TEXT:{height:"31px",marginLeft:"16px",maxWidth:"300px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},Oo=({login:e,categoryIcon:t,categoryLabel:n,activityDescription:a,timestampMs:i})=>(0,E.BX)("tr",{"data-testid":"logs-table-row",children:[(0,E.BX)("td",{sx:wo.LOGIN_CELL,children:[(0,E.tZ)(To.q,{email:e,size:30}),(0,E.tZ)("div",{id:"user-email",sx:wo.LOGIN_TEXT,children:(0,E.tZ)(_.n,{color:"ds.text.neutral.catchy",textStyle:"ds.body.standard.regular",children:e})})]}),t&&n?(0,E.tZ)("td",{children:(0,E.tZ)(Do.V,{leadingDecoration:t,label:n})}):null,(0,E.tZ)("td",{children:(0,E.tZ)(Ao,{text:a})}),(0,E.tZ)("td",{sx:{whiteSpace:"nowrap"},children:(0,E.tZ)(Io.v,{date:new Date(i)})})]}),No=(0,r.memo)(Oo);var Ro=n(8333),Lo=n(55282);let Bo=function(e){return e.LAST_DAY="last_day",e.LAST_WEEK="last_week",e.LAST_MONTH="last_month",e.LAST_3_MONTHS="last_3_months",e.LAST_6_MONTHS="last_6_months",e.LAST_YEAR="last_year",e.YEAR_TO_DATE="year_to_date",e}({});const Mo=864e5,Po=e=>{const t=Date.now(),n=t-e*Mo;return{startDate:Math.floor(n/1e3),endDate:Math.ceil(t/1e3)}},Uo=e=>{switch(e){case Bo.LAST_DAY:return Po(1);case Bo.LAST_WEEK:return Po(7);case Bo.LAST_MONTH:return Po(30);case Bo.LAST_3_MONTHS:return Po(90);case Bo.LAST_6_MONTHS:return Po(180);case Bo.LAST_YEAR:return Po(360);case Bo.YEAR_TO_DATE:return(()=>{const e=new Date,t=new Date(e.getFullYear(),0,1),n=Math.floor((e.getTime()-t.getTime())/Mo);return Po(n)})()}};var Xo=n(76376);const zo=(e,t)=>[e.url,...e.subPaths?e.subPaths.map((t=>`${e.url}${t}`)):[]].includes(t),Fo={TITLE:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"32px"},TAB:{width:"auto",whiteSpace:"nowrap",color:"ds.text.neutral.standard !important",backgroundColor:"ds.container.expressive.neutral.supershy.idle !important","&:hover, &:active":{backgroundColor:"ds.container.expressive.neutral.supershy.hover !important"}},DISABLED_TAB:{pointerEvents:"none",color:"ds.text.oddity.disabled"},SELECTED_TAB:{backgroundColor:"ds.container.expressive.neutral.supershy.active !important"}},qo=({title:e,titleBadge:t,subtitle:n,tabs:a=[],extraInfo:r})=>{const{pathname:s}=(0,i.TH)();return e||a.length?(0,E.BX)("nav",{className:"tabMenuContainer--y2MfbHSdck",children:[e?(0,E.tZ)(d.X,{as:"h1",textStyle:"ds.title.section.large",color:"ds.text.neutral.catchy",children:(0,E.BX)("span",{sx:Fo.TITLE,children:[e,t]})}):null,n?(0,E.tZ)(_.n,{as:"h2",textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",sx:{marginBottom:"32px",a:{fontWeight:600}},children:n}):null,null!=r?r:null,a.length?(0,E.tZ)(Ce.G8v,{children:a.map((e=>(0,E.tZ)(Ce.h2L,{label:e.label,notification:e.notifications,selected:zo(e,s),sx:(0,Ee.jM)([Fo.TAB,e.isDisabled?Fo.DISABLED_TAB:{},zo(e,s)?Fo.SELECTED_TAB:{}]),as:t=>(0,E.tZ)(i.OL,{to:e.url,...t})},e.label)))}):null]}):null},Go=({title:e})=>{const{translate:t}=(0,b.Z)(),{routes:n}=(0,Xo.Xo)(),a=(0,s.qr)({queryConfig:{query:Le.C.getAccountRecoveryRequestCount},liveConfig:{live:Le.C.liveAccountRecoveryRequestCount}},[]),i=(0,je.h)(),r=a.status===s.rq.Success&&a.data;return(0,E.tZ)(qo,{title:e,subtitle:t.markup("team_activity_header_subtitle_markup",{},{linkTarget:"_blank"}),tabs:(()=>{const e=[{label:t("team_activity_header_tab_activity_logs"),url:`${n.teamActivityRoutePath}/recent`}];return i.status===s.rq.Success&&i.data&&e.push({label:t("team_activity_header_tab_mpr_requests"),url:`${n.teamActivityRoutePath}/requests`,notifications:r||0}),e})()})},Vo=(0,r.memo)(Go),jo=({header:e,children:t})=>(0,E.BX)("div",{sx:{display:"flex",flexDirection:"column",padding:"32px",gap:"16px"},children:[e,t]}),Wo={ACTIVITY_PANEL:{display:"inline-block",backgroundColor:"ds.container.agnostic.neutral.supershy",padding:"24px 32px",borderRadius:"8px",border:"1px solid ds.border.neutral.quiet.idle",flex:"1"}},Ho=({isLoading:e,children:t})=>{const{translate:n}=(0,b.Z)();return(0,E.tZ)(jo,{header:(0,E.tZ)(Vo,{title:n("team_activity_header_title")}),children:e?(0,E.tZ)(Ai.Z,{containerStyle:{minHeight:240}}):(0,E.tZ)("div",{sx:Wo.ACTIVITY_PANEL,children:t})})},$o=({startDownload:e,areFiltersLocked:t,userFilter:n,handleChangeUser:a})=>{const{translate:i}=(0,b.Z)();return(0,E.BX)("div",{sx:{display:"flex",justifyContent:"space-between",marginBottom:"16px"},children:[(0,E.tZ)(Nr.U,{label:i("team_activity_filters_label_user_login"),onChange:a,value:n,sx:{width:"350px"}}),(0,E.tZ)(D.z,{onClick:e,disabled:t,layout:"iconLeading",icon:"DownloadOutlined",children:i("team_activity_download_button")})]})};var Ko=n(59115),Yo=n(75968);const Qo=({areFiltersLocked:e,canApplyFilters:t,canClearFilters:n,filters:a,handleApplyFilter:i,handleChangeDatePeriod:r,handleChangeFilters:s,handleClearFilters:o,periodFilter:l,sortedTranslatedCategories:d})=>{var u,m;const{translate:p}=(0,b.Z)();return(0,E.BX)("div",{sx:{display:"flex",flexDirection:"column",backgroundColor:"ds.container.agnostic.neutral.quiet",borderRadius:"8px",padding:"24px",gap:"16px"},children:[(0,E.tZ)(_.n,{textStyle:"ds.title.supporting.small",children:p("team_activity_filters_subtitle")}),(0,E.BX)("div",{sx:{display:"grid",gap:"24px",justifyContent:"space-between",gridTemplateColumns:"repeat(4, calc(25% - 20px))"},children:[(0,E.tZ)(Tn.n,{label:p("team_activity_filters_label_domain"),disabled:e,onChange:({target:e})=>s("domain",e.value),value:a.domain}),(0,E.BX)(Ko.m,{label:p("team_activity_filters_label_category"),disabled:e,onChange:e=>s("categories",e),value:null!=(u=a.categories[0])?u:Jo,children:[(0,E.tZ)(Yo.$,{value:Jo,children:p("team_activity_filters_all_categories")},"select_option_default_category"),d.map((({category:e,translatedCategory:t})=>(0,E.tZ)(Yo.$,{value:e,children:t},`select_option_${e}`)))]}),(0,E.BX)(Ko.m,{label:p("team_activity_filters_label_type"),disabled:e,onChange:e=>s("logTypes",e),value:null!=(m=a.logTypes[0])?m:Jo,children:[(0,E.tZ)(Yo.$,{value:Jo,children:p("team_activity_filters_all_log_types")},"select_option_default_log_type"),ao.map((e=>(0,E.tZ)(Yo.$,{value:e,children:`team_audit_log_activity_${e}`},`select_option_${e}`)))]}),(0,E.tZ)(Ko.m,{label:p("team_activity_filters_label_date"),disabled:e,onChange:r,value:l,children:Object.values(Bo).map((e=>(0,E.tZ)(Yo.$,{value:e,children:p(`team_audit_log_date_range_${e}`)},`select_option_${e}`)))})]}),(0,E.BX)(c.k,{flexDirection:"row",gap:"8px",children:[(0,E.tZ)(D.z,{mood:"brand",onClick:i,disabled:e||!t,children:p("team_activity_filters_action_apply")}),(0,E.tZ)(D.z,{mood:"neutral",intensity:"quiet",layout:"labelOnly",onClick:o,disabled:e||!n,children:p("team_activity_filters_action_clear")})]})]})},Jo="all",el={login:"",domain:"",categories:[],logTypes:[]},tl=Bo.LAST_WEEK,nl=({applyFilters:e,startDownload:t,areFiltersLocked:n,hasError:a,setDateRange:i,sortedTranslatedCategories:s,initialCategoryFilters:o=[]})=>{const[l,c]=(0,r.useState)(a),[d,_]=(0,r.useState)(!!o.length),[u,m]=(0,r.useState)({...el,categories:o}),[p,g]=(0,r.useState)(tl),h=(e,t)=>{c(!0),m("categories"===e||"logTypes"===e?{...u,[e]:t===Jo?el[e]:[t]}:{...u,[e]:t})},y=e=>{g(e),c(!0)};return(0,E.BX)("div",{sx:{marginBottom:"16px"},children:[(0,E.tZ)($o,{handleChangeUser:({target:e})=>h("login",e.value),userFilter:u.login,startDownload:t,areFiltersLocked:n}),(0,E.tZ)(Qo,{areFiltersLocked:n,canApplyFilters:l,canClearFilters:d,filters:u,handleApplyFilter:()=>{i(Uo(p));const t=Object.entries(u).reduce(((e,[t,n])=>n.length?e?{...e,[t]:n}:{[t]:n}:e),void 0);e(t),_(!0),c(!1)},handleChangeDatePeriod:y,handleChangeFilters:h,handleClearFilters:()=>{m(el),i(Uo(tl)),y(tl),_(!1),c(!1),e()},periodFilter:p,sortedTranslatedCategories:s})]})};var al,il,rl;const sl="crd.adminHasSeenLogFromAuditLogsPage",ol="activityLogsDisplayedPerPage",ll=[qs.b.UserTypedCompromisedPassword,qs.b.UserTypedWeakPassword,qs.b.UserTypedPassword],cl=()=>{const e=localStorage.getItem(ol),{translate:t}=(0,b.Z)(),{search:n}=(0,i.TH)(),a=(0,os.parse)(n)?.categoryFilters,[s,o]=(0,r.useState)(e?Number(e):50),[l,c]=(0,r.useState)(1),[d,p]=(0,r.useState)(Uo(Bo.LAST_WEEK)),{list:g,hasMore:h,isLoading:S,hasError:x,loadMore:f,applyFilters:v}=((e,t,n,a)=>{const[i,s]=(0,r.useState)(!1),[o,l]=(0,r.useState)(a),{initiateActivityLogsRetrieval:d,loadNextActivityLogs:_}=(0,te.u)(Ro.g),{data:u,status:p}=(0,m.k)(Ro.g,"activityLogs");(0,r.useEffect)((()=>{i||(d({startDate:e,endDate:t,filters:o}),s(!0))}),[t,o,i,e,d]);const g=p===G.rq.Success&&u.hasMoreData,h=p===G.rq.Success?u.logs:[],y=p!==G.rq.Success||u.status===Lo.Q.LOADING||g&&0===u.logs.length;return{list:h,hasMore:g,isLoading:!i||y,hasError:p===G.rq.Error||"ERROR"===u?.status,loadMore:()=>_(void 0),applyFilters:e=>{c(1),l(e),s(!1)}}})(d.startDate,d.endDate,0,a?{categories:[a]}:void 0);(0,r.useEffect)((()=>{(async()=>{const e=await(0,Gs.U)(sl).catch((()=>null));e&&!e[sl]&&g.some((e=>e.category===qs.s.RiskDetection&&ll.includes(e.log_type)))&&(0,Vs.t)({[sl]:!0}).then((()=>{(0,y.Kz)(new u.UserSetupRiskDetectionEvent({riskDetectionSetupStep:u.RiskDetectionSetupStep.AdminSeeCrdLogFromAuditLogs}))})).catch((()=>{}))})()}),[g]);const C=S&&!g.length,Z=S&&!!g.length,[k,T]=(0,r.useState)(!1),{showAlert:I}=(0,ca.V)(),A=(0,r.useCallback)((()=>{T(!1),(0,y.Nc)(u.PageView.TacActivityList)}),[]),w=g.map((e=>((e,t)=>{var n;return co.includes(e.log_type)?{uuid:e.uuid,date:new Date(e.date_time),timestampMs:e.date_time,category:no(e,t),activityDescription:lo(e,t),userLogin:null!=(n=e.properties?.author_login)?n:""}:null})(e,t))).filter((e=>null!==e)),O=w.slice(0,l*s),N=h||O.length<w.length,R=(0,r.useMemo)((()=>to.map((e=>({category:e,translatedCategory:t(`team_audit_log_category_${e}`)}))).sort(((e,t)=>e.translatedCategory<t.translatedCategory?-1:1))),[t]);(0,r.useEffect)((()=>{x&&I(t("_common_generic_error"),Ce.BLW.ERROR)}),[x,I,t]),(0,r.useEffect)((()=>{h&&g.length<s*l&&f()}),[s,h,g.length,f,l]);const L=e=>{localStorage.setItem(ol,e.toString()),o(e),c(1)};return(0,E.BX)(Ho,{isLoading:!1,children:[(0,E.BX)("div",{sx:{display:"flex",flexDirection:"column",justifyContent:"center"},children:[(0,E.tZ)(nl,{applyFilters:v,startDownload:()=>{T(!0)},areFiltersLocked:C,hasError:x,setDateRange:p,sortedTranslatedCategories:R,initialCategoryFilters:a?[a]:[]}),x?al||(al=(0,E.tZ)(Qs,{})):null,0!==g.length||x||S?null:il||(il=(0,E.tZ)(eo,{})),C&&!x?rl||(rl=(0,E.tZ)(Js,{})):null,!x&&g.length>0?(0,E.BX)(r.Fragment,{children:[(0,E.tZ)(ko,{withCategories:!0,children:O.map((e=>(0,E.tZ)(No,{login:e.userLogin,categoryIcon:e.category.icon,categoryLabel:e.category.label,activityDescription:e.activityDescription,timestampMs:e.timestampMs},`log_${e.uuid}`)))}),(0,E.BX)("div",{sx:{display:"flex",justifyContent:"space-between",marginTop:"24px"},children:[(0,E.BX)("div",{sx:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,E.tZ)(D.z,{onClick:async()=>{h&&g.length<O.length+s&&await f(),c(l+1)},mood:"brand",intensity:Z?"supershy":"quiet",isLoading:Z,layout:"iconLeading",icon:N?void 0:"FeedbackSuccessOutlined",size:"small",disabled:!N,children:t(Z?"team_audit_log_load_more_button_loading":N?"team_audit_log_load_more_button_has_more":"team_audit_log_load_more_button_all_loaded")}),(0,E.tZ)(_.n,{textStyle:"ds.body.reduced.regular",children:Z?t("team_audit_log_load_more_section_loading"):t("team_audit_log_load_more_section_results",{count:O.length})})]}),(0,E.BX)(X.h_,{children:[(0,E.tZ)(X.sB,{showCaret:!0,mood:"neutral",type:"button",intensity:"supershy",size:"small",children:t("team_audit_log_load_more_select_button",{count:s})}),(0,E.BX)(X.Nv,{children:[(0,E.tZ)(F.h,{label:"20",onSelect:()=>L(20)}),(0,E.tZ)(F.h,{label:"50",onSelect:()=>L(50)}),(0,E.tZ)(F.h,{label:"100",onSelect:()=>L(100)}),(0,E.tZ)(F.h,{label:"200",onSelect:()=>L(200)})]})]})]})]}):null]}),(0,E.tZ)(So,{isOpen:k,areLogsLoading:S,hasMoreLogs:h,logs:g,loadMoreLogs:f,onClose:A})]})};var dl;const _l=()=>(r.useEffect((()=>{(0,y.Nc)(u.PageView.TacActivityList)}),[]),dl||(dl=(0,E.tZ)("div",{children:(0,E.tZ)(cl,{})})));var ul,ml,pl=n(89078),gl=n(21484);const hl={TABLE:{width:"100%",lineHeight:"1.5",textAlign:"left"},TABLE_BODY:{tr:{boxShadow:"inset 0 -1px 0 0 ds.border.neutral.quiet.idle",height:"60px",td:{padding:"16px",verticalAlign:"middle",variant:"text.ds.body.reduced.regular",color:"ds.text.neutral.standard"}}},LOGIN_CELL:{display:"flex",padding:"15px 16px 14px"},LOGIN_TEXT:{height:"31px",marginLeft:"16px",maxWidth:"300px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},ACTION_CELL:{display:"flex",gap:"36px",justifyContent:"flex-end"}},yl=({onAccept:e,onDecline:t,dateFormatter:n,requests:a})=>{const{translate:i}=(0,b.Z)(),r=[{headerLabel:i("team_master_password_reset_table_head_member"),headerKey:"member"},{headerLabel:i("team_master_password_reset_table_head_time"),headerKey:"time"},{headerLabel:"",headerKey:"actions"}];return(0,E.BX)("table",{sx:hl.TABLE,children:[(0,E.tZ)(Zo,{columns:r}),(0,E.tZ)("tbody",{sx:hl.TABLE_BODY,children:a.map((a=>{const r=(0,ln.Z)(a.creationDateUnix),s=n(r);return(0,E.BX)("tr",{children:[(0,E.BX)("td",{sx:hl.LOGIN_CELL,children:[(0,E.tZ)(To.q,{email:a.login,size:30}),(0,E.tZ)("div",{id:"user-email",sx:hl.LOGIN_TEXT,children:(0,E.tZ)(_.n,{color:"ds.text.neutral.catchy",textStyle:"ds.body.standard.regular",children:a.login})})]}),(0,E.tZ)("td",{children:s}),(0,E.BX)("td",{sx:hl.ACTION_CELL,children:[(0,E.tZ)(D.z,{mood:"danger",intensity:"supershy",layout:"iconOnly",size:"medium",icon:ul||(ul=(0,E.tZ)(T.JO,{name:"FeedbackFailFilled"})),onClick:()=>t(a),"aria-label":i("team_master_password_reset_dialog_decline_button_ok")}),(0,E.tZ)(D.z,{mood:"positive",intensity:"supershy",layout:"iconOnly",size:"medium",icon:ml||(ml=(0,E.tZ)(T.JO,{name:"FeedbackSuccessFilled"})),onClick:()=>e(a),"aria-label":i("team_master_password_reset_dialog_accept_button_ok")})]})]},(0,O.uniqueId)())}))},"table-body")]})},bl=(0,r.memo)(yl);var Sl;const xl="team_master_password_reset_dialog_accept_button_cancel",fl="team_master_password_reset_dialog_decline_button_cancel",vl={LIST_CONTAINER:{display:"flex",flexDirection:"column",justifyContent:"center",margin:"0 auto",marginBottom:"16px",alignItems:"center"},NO_ITEMS:{border:"dashed 1px ds.border.neutral.standard.idle",height:"288px",marginTop:"132px"}},Cl=({lee:e})=>{var t;const{translate:n}=(0,b.Z)(),{getTeamId:a,getTeamPolicies:i}=(0,pl.Y)(p.o,{getTeamId:{},getTeamPolicies:{}},[]),s=a.data?.teamId,o={dialogIsVisible:!1,dialogType:null,selectedRequest:null},[l,c]=(0,r.useState)(o),[d,u]=(0,r.useState)(!1),m=(0,r.useCallback)((async()=>{s&&await(0,Re.mP)({teamId:Number(s)})}),[s]);(0,r.useEffect)((()=>{(async()=>{try{u(!0),i.data?.recoveryEnabled&&(await m(),u(!1))}catch(e){console.error(`RequestsActivity - fetchStatus failed with error ${e}`),u(!1)}})()}),[m,i.data]);const g=e=>{c({dialogIsVisible:!0,dialogType:"accept",selectedRequest:e})},h=e=>{c({dialogIsVisible:!0,dialogType:"decline",selectedRequest:e})},y=e=>[n.shortDate(e,fn._T.l),n.shortDate(e,fn._T.LT)].join(" - "),S=()=>c(o);return i.status!==G.rq.Success&&a.status!==G.rq.Success?null:(0,E.BX)(Ho,{isLoading:d,children:[(()=>{const t=(()=>{var t;const{teams:n}=(0,gl.e)(e.globalState);return null==s?[]:null!=(t=n[s]?.notifications?.accountRecoveryRequests)?t:[]})();return t.length?(0,E.tZ)("div",{sx:vl.LIST_CONTAINER,children:(0,E.tZ)(bl,{onAccept:g,onDecline:h,dateFormatter:y,requests:t})}):(0,E.BX)("div",{sx:(0,Ee.jM)([vl.LIST_CONTAINER,vl.NO_ITEMS]),children:[Sl||(Sl=(0,E.tZ)(T.JO,{name:"NotificationOutlined",size:"xlarge"})),(0,E.tZ)(_.n,{textStyle:"ds.title.section.medium",sx:{marginTop:"36px"},children:n("team_master_password_reset_table_empty_label")}),(0,E.tZ)(_.n,{textStyle:"ds.title.block.medium",color:"ds.text.neutral.quiet",sx:{marginTop:"7px"},children:n("team_master_password_reset_table_empty_helper")})]})})(),(0,E.BX)(J.Vq,{isOpen:l.dialogIsVisible&&"accept"===l.dialogType,onClose:S,closeActionLabel:n(xl),actions:{primary:{children:n("team_master_password_reset_dialog_accept_button_ok"),onClick:()=>{l.selectedRequest&&(0,Re.Z8)({login:l.selectedRequest.login,recoveryKey:l.selectedRequest.recoveryClientKey,userPublicKey:l.selectedRequest.publicKey}).then((()=>{m(),c(o)})).catch((e=>{console.error(e)}))}},secondary:{children:n(xl),onClick:S}},title:n("team_master_password_reset_dialog_accept_title"),children:[l.selectedRequest?.login?(0,E.tZ)(_.n,{textStyle:"ds.body.standard.strong",children:n("team_master_password_reset_dialog_accept_content_bold",{login:l.selectedRequest.login})}):null,(0,E.tZ)(_.n,{children:n("team_master_password_reset_dialog_accept_content")})]}),(0,E.BX)(J.Vq,{isOpen:l.dialogIsVisible&&"decline"===l.dialogType,onClose:S,closeActionLabel:n(fl),actions:{primary:{children:n("team_master_password_reset_dialog_decline_button_ok"),onClick:async()=>{if(l.selectedRequest)try{await(0,Re.VK)({login:l.selectedRequest.login}),m(),c(o)}catch(e){console.error(e)}}},secondary:{children:n(fl),onClick:S}},title:n("team_master_password_reset_dialog_decline_title"),children:[l.selectedRequest?.login?(0,E.tZ)(_.n,{textStyle:"ds.body.standard.strong",children:n("team_master_password_reset_dialog_decline_content_bold",{login:null!=(t=l.selectedRequest?.login)?t:""})}):null,(0,E.tZ)(_.n,{children:n("team_master_password_reset_dialog_decline_content")})]})]})};function El({path:e}){return(0,E.tZ)(i.GB,{path:[e,`${e}/recent`,`${e}/requests`],permission:e=>e.adminAccess.hasFullAccess,children:(0,E.BX)(i.rs,{children:[(0,E.tZ)(i.l_,{exact:!0,from:`${e}/`,to:`${e}/recent`}),(0,E.tZ)(i.Vy,{path:`${e}/requests`,component:Cl}),(0,E.tZ)(i.Vy,{path:`${e}/recent`,component:_l})]})})}n(68030);var Zl=n(73183),kl=n(358),Dl=(n(61238),n(51409));const Tl=({children:e,onRequestClose:t,footer:n})=>{const{translate:a}=(0,b.Z)(),i=a("team_directory_sync_key_dialog_title");return(0,E.tZ)(Ei.o,{isOpen:!0,showCloseIcon:!0,onRequestClose:t,footer:n,title:i,children:e})},Il=({onSubmitKeySuccess:e,onSubmitKeyError:t,checkDirectorySyncKeyRequest:n,handleDismiss:a,handleError:i})=>{const{translate:s}=(0,b.Z)(),[o,l]=(0,r.useState)({inputKey:"",isInputKeyInvalid:!1});return(0,E.BX)(Tl,{onRequestClose:a,footer:(0,E.tZ)(Ce.cNS,{primaryButtonTitle:s("team_directory_sync_key_dialog_key_input_verify"),primaryButtonOnClick:async()=>{var a;const{publicKey:r=""}=null!=(a=n())?a:{},s=o.inputKey.replace(/\s/g,"").replace(/\n/g,"");var c;s===r?(()=>{const e=n();return e?(0,Re.QV)(e,"validated"):Promise.reject(new Error("missing params"))})().then((()=>{e()})).catch(i):(c=s).length%4==0&&atob(c).includes("</RSAKeyValue>")?t():l((e=>({...e,isInputKeyInvalid:!0})))},secondaryButtonTitle:s("team_directory_sync_key_dialog_key_input_postpone"),secondaryButtonOnClick:a,intent:"primary"}),children:[(0,E.tZ)(_.n,{sx:{marginBottom:"2em"},color:"ds.text.neutral.quiet",children:s.markup("team_directory_sync_key_dialog_key_input_message_markup")}),(0,E.tZ)(Dl.K,{placeholder:s("team_directory_sync_key_dialog_key_input_placeholder"),onChange:({target:{value:e}})=>{l({inputKey:e,isInputKeyInvalid:!1})},value:o.inputKey,feedback:o.isInputKeyInvalid?{text:s("team_directory_sync_key_dialog_key_input_invalid")}:void 0,error:o.isInputKeyInvalid})]})};var Al=function(e){return e[e.Initial=0]="Initial",e[e.KeyInput=1]="KeyInput",e[e.KeySuccess=2]="KeySuccess",e[e.KeyError=3]="KeyError",e[e.KeySuspended=4]="KeySuspended",e}(Al||{});const wl=e=>{var t;const{translate:n}=(0,b.Z)(),[a,i]=(0,r.useState)(Al.Initial),s=()=>e.lee.globalState.directorySyncKey.checkDirectorySyncKeyRequest,o=()=>{e.lee.dispatchGlobal((0,kl.M2)())},l=()=>{e.lee.dispatchGlobal((0,kl.HK)())},u=()=>{e.lee.dispatchGlobal((0,kl.er)())},m=()=>{const t="directorySyncKeyValidationError",n=Ce.BLW.ERROR,a={key:t,level:n,textKey:"team_directory_sync_key_error_markup",handleClose:()=>e.lee.dispatchGlobal((0,Zl.FV)(t))};e.lee.dispatchGlobal((0,Zl.wN)(a)),l()},p=()=>{i(Al.KeyInput)},g=()=>{(()=>{const e=s();return e?(0,Re.QV)(e,"rejected"):Promise.reject(new Error("missing params"))})().then((()=>{i(Al.KeySuspended),u()})).catch(m)},h=()=>{i(Al.KeySuccess),u()},y=()=>{i(Al.KeyError)};switch(a){case Al.Initial:return(0,E.tZ)(Tl,{onRequestClose:o,footer:(0,E.tZ)(Ce.cNS,{primaryButtonTitle:n("team_directory_sync_key_dialog_initial_continue"),primaryButtonOnClick:p,secondaryButtonTitle:n("team_directory_sync_key_dialog_initial_postpone"),secondaryButtonOnClick:o,intent:"primary"}),children:(0,E.tZ)(_.n,{color:"ds.text.neutral.quiet",children:n.markup("team_directory_sync_key_dialog_initial_message_markup")})});case Al.KeyInput:return t||(0,E.tZ)(Il,{onSubmitKeySuccess:h,onSubmitKeyError:y,checkDirectorySyncKeyRequest:s,handleDismiss:o,handleError:m});case Al.KeySuccess:return(0,E.tZ)(Tl,{onRequestClose:l,footer:(0,E.tZ)(Ce.cNS,{secondaryButtonTitle:n("team_directory_sync_key_dialog_key_success_close"),secondaryButtonOnClick:l}),children:(0,E.BX)(c.k,{gap:"8px",children:[(0,E.tZ)(T.JO,{name:"FeedbackSuccessOutlined",size:"xlarge",color:"ds.text.positive.quiet",sx:{width:"64px",height:"64px"}}),(0,E.BX)("div",{children:[(0,E.tZ)(d.X,{as:"h1",children:n("team_directory_sync_key_dialog_key_success_header")}),(0,E.tZ)(_.n,{children:n("team_directory_sync_key_dialog_key_success_message")})]})]})});case Al.KeyError:return(0,E.tZ)(Tl,{onRequestClose:l,footer:(0,E.tZ)(Ce.cNS,{primaryButtonTitle:n("team_directory_sync_key_dialog_key_error_validate"),primaryButtonOnClick:g,secondaryButtonTitle:n("team_directory_sync_key_dialog_key_error_retry"),secondaryButtonOnClick:p,intent:"danger"}),children:(0,E.BX)(c.k,{gap:"8px",children:[(0,E.tZ)(T.JO,{name:"FeedbackFailOutlined",size:"xlarge",color:"ds.text.danger.quiet",sx:{width:"64px",height:"64px"}}),(0,E.BX)("div",{children:[(0,E.tZ)(d.X,{as:"h1",children:n("team_directory_sync_key_dialog_key_error_header")}),(0,E.tZ)(_.n,{color:"ds.text.neutral.quiet",children:n("team_directory_sync_key_dialog_key_error_message")})]})]})});case Al.KeySuspended:return(0,E.tZ)(Tl,{onRequestClose:l,footer:(0,E.tZ)(Ce.cNS,{secondaryButtonTitle:n("team_directory_sync_key_dialog_key_suspended_close"),secondaryButtonOnClick:l}),children:(0,E.tZ)(_.n,{color:"ds.text.neutral.quiet",children:n.markup("team_directory_sync_key_dialog_key_suspended_message_markup")})})}},Ol=()=>{var e;const{translate:t}=(0,b.Z)(),{queue:n,popAlertFromQueue:a}=se(),i=()=>{a()},[r]=n;return r?(0,E.tZ)(Ei.o,{isOpen:!0,onRequestClose:i,footer:(0,E.tZ)(Ce.cNS,{secondaryButtonTitle:null!=(e=r.okButtonLabel)?e:t("_common_alert_dismiss_button"),secondaryButtonOnClick:i}),title:r.title,children:(0,E.tZ)("div",{children:r.message})}):null};var Nl=n(92386);const Rl=({lee:e,notificationKey:t,buttonTextKey:n,level:a,redirectPath:r,onClickButton:s,keyParams:o,notificationName:l})=>{const c={key:t,level:a,textKey:t,buttonTextKey:n,keyParams:o,handleClose:()=>{e.dispatchGlobal((0,Zl.FV)(t)),l&&Le.C.markNotificationAsSeen(l)}};r&&(c.handleLinkClick=n=>{n.preventDefault(),(0,W.Tx)(r)?(0,W.Yk)(r,{}):(e.dispatchGlobal((0,Zl.FV)(t)),(0,i.uX)(r))}),s&&(c.handleButtonClick=()=>{s()}),e.dispatchGlobal((0,Zl.wN)(c))};var Ll=n(70226);const Bl="TRIAL_PERIOD_0_15D",Ml="GRACE_PERIOD_PAID",Pl="ENABLE_RECOVERY",Ul="ADD_ADMINS";var Xl=n(9937);const zl={notification:"notification--JlZi_NwcwA"},Fl=({level:e=Ce.BLW.SUCCESS,text:t,buttonTextKey:n,onClose:a,onLinkClick:i,onClickButton:s})=>{const o=r.useRef(null),{translate:l}=(0,b.Z)(),c=(0,r.useCallback)((e=>{if(!i)return;const t=e.target;t&&"a"===t.tagName.toLowerCase()&&i(e)}),[i]);return(0,r.useEffect)((()=>{if(!o||!o.current)return;const e=o.current;return e.addEventListener("click",c),()=>{e.removeEventListener("click",c)}}),[c]),(0,E.tZ)("div",{className:zl.notification,children:(0,E.tZ)(Ce.bZj,{severity:e,size:Ce.k3y.SMALL,showIcon:!0,closeIconName:l("_common_alert_dismiss_button"),onClose:a,onAction:s||void 0,actionText:n||void 0,children:(0,E.tZ)("span",{ref:o,className:zl.text,children:t})})})};var ql=n(11030);const Gl=({lee:e})=>{const{translate:t}=(0,b.Z)(),n=(0,$.C)(),a=(0,h.s)(),s=(0,ql.z)(),[o,l]=(0,r.useState)(!1),[c,d]=(0,r.useState)([]),_=(0,r.useCallback)(((n,a,i)=>{if(!n||!a||!i)return null;(async({lee:e,teamTrialStatus:t,teamBillingInfo:n,teamPolicies:a,showTacInExtension:i,translate:r})=>{const s=(({lee:e,teamTrialStatus:t,teamBillingInfo:n,teamPolicies:a,showTacInExtension:i})=>{const r=new Set;i&&r.add("TAC_IN_EXTENSION"),t.isGracePeriod&&!t.isFreeTrial&&r.add(Ml),t.isFreeTrial&&!t.isGracePeriod&&((0,Ll.PY)(n.nextBillingDetails.dateUnix)<15?r.add("TRIAL_PERIOD_15_30D"):r.add(Bl)),a.recoveryEnabled||a.ssoEnabled||r.add(Pl);const s=(0,N.ev)(e.globalState)||0,o=e.carbon.spaceData.spaces.find((e=>s===+e.teamId));return o&&o.details.teamAdmins.length<=1&&r.add(Ul),r})({lee:e,teamTrialStatus:t,teamBillingInfo:n,teamPolicies:a,showTacInExtension:i});e.dispatchGlobal((0,Zl.L1)());const o=e.permission.adminAccess.hasFullAccess,l=await Le.C.getNotificationStatus();s.has(Ml)&&(e=>{Rl({lee:e,notificationKey:"team_notifications_renewal_grace_period_markup",level:Ce.BLW.ERROR,redirectPath:e.routes.teamAccountRoutePath})})(e),o&&(s.has(Pl)&&l.tacEnableAccountRecoveryBanner===Ze.E.Unseen&&(e=>{const t=`${e.routes.teamSettingsRoutePath}/master-password-policies`;Rl({lee:e,notificationKey:"team_notifications_enable_account_recovery_markup",level:Ce.BLW.WARNING,redirectPath:t,notificationName:Ze.O.TacEnableAccountRecoveryBanner})})(e),s.has(Ul)&&l.tacOnlyOneAdminBanner===Ze.E.Unseen&&!Nl.G6()&&(e=>{const t=e.routes.teamAccountRoutePath;Rl({lee:e,notificationKey:"team_notifications_add_admins_markup",level:Ce.BLW.WARNING,redirectPath:t,notificationName:Ze.O.TacOnlyOneAdminBanner})})(e)),s.has(Bl)&&(({lee:e,spaceTier:t,translate:n})=>{const a=(0,Ue.Uo)({tier:t,translate:n});Rl({lee:e,notificationKey:"team_notifications_free_trial_D0_T15_markup",keyParams:{planTier:a},level:Ce.BLW.SUCCESS,redirectPath:e.routes.teamAccountRoutePath})})({lee:e,spaceTier:n.spaceTier,translate:r})})({lee:e,teamTrialStatus:n,teamBillingInfo:a,teamPolicies:i,showTacInExtension:!1,translate:t})}),[]),m=(()=>{const{routes:e}=(0,i.Xo)(),t=(0,pl.Y)(Fr.t,{getIdPFailedProvisioningsData:{},hasSeenIdPFailedNotification:{}},[]),{markIdPFailedNotificationSeen:n}=(0,te.u)(Fr.t);if(t.getIdPFailedProvisioningsData.status!==G.rq.Success||t.hasSeenIdPFailedNotification.status!==G.rq.Success||!t.getIdPFailedProvisioningsData.data?.nbOfFailedCreations)return[];const{requiredSeats:a}=t.getIdPFailedProvisioningsData.data;return!t.hasSeenIdPFailedNotification.data&&t.getIdPFailedProvisioningsData.data.shouldShowNotifications.alertFailuresNeedSeats?[{key:"idpErrorNotification",level:Ce.BLW.ERROR,textKey:"team_idp_error_notification_description",isPluralKey:!0,keyParams:{count:a},buttonTextKey:"team_idp_error_notification_cta",handleClose:()=>{(0,y.Kz)(new u.UserCallToActionEvent({callToActionList:[u.CallToAction.Close,u.CallToAction.BuySeats],toastName:u.ToastName.InsufficientSeatsProvisioningError,chosenAction:u.CallToAction.Close,hasChosenNoAction:!1})),n()},handleButtonClick:()=>{(0,y.Kz)(new u.UserCallToActionEvent({callToActionList:[u.CallToAction.Close,u.CallToAction.BuySeats],toastName:u.ToastName.InsufficientSeatsProvisioningError,chosenAction:u.CallToAction.BuySeats,hasChosenNoAction:!1})),(0,i.uX)(`${e.teamAccountRoutePath}?showSeatsDialog=true&seatsToBuy=${a}`)}}]:[]})();return(0,r.useEffect)((()=>{d((()=>{const t=e.globalState.notifications.list,n=function(e){const t=e.permission.adminAccess.hasFullAccess,n=e.globalState.directorySyncKey;return t&&n.validationPostponed?[{key:"directorySyncPosponedValidation",level:Ce.BLW.WARNING,textKey:"team_directory_sync_key_postponed_notif_markup",handleLinkClick:t=>{t.preventDefault(),e.dispatchGlobal((0,kl.b3)())},handleClose:()=>e.dispatchGlobal((0,kl.vg)())}]:[]}(e),a=function(e){const t=e.permission.adminAccess.hasFullAccess,n=e.globalState.ieNotifications;return t&&Nl.w6()&&n.displayIeDropNotification?[{key:"directorySyncPosponedValidation",level:Ce.BLW.WARNING,textKey:"wac_ie_drop_message_markup",handleClose:()=>e.dispatchGlobal((0,Xl.w)())}]:[]}(e);return[...t,...m,...n,...a]})())}),[e.globalState.ieNotifications,e.globalState.directorySyncKey,e.globalState.notifications.list]),(0,r.useEffect)((()=>{_(n,a,s)}),[a,s,n]),(0,E.BX)("div",{className:"notifications--SCKfre7VSM",children:[c.map((e=>(0,E.tZ)(Fl,{level:e.level,text:(0,fn.t5)(e.textKey)?t.markup(e.textKey,e.keyParams):e.isPluralKey?t(e.textKey,e.keyParams):t(e.textKey),buttonTextKey:e.isPluralKey&&e.buttonTextKey?t(e.buttonTextKey,e.keyParams):e.buttonTextKey?t(e.buttonTextKey):void 0,onClose:e.handleClose,onLinkClick:e.handleLinkClick,onClickButton:e.handleButtonClick},e.key))),o?(0,E.tZ)(K.F,{isShown:o,setIsShown:l,isFromVault:!1}):null]})};var Vl=n(6995),jl=n(77550);var Wl,Hl;const $l=e=>{const[t,n]=r.useState(!1);(0,Vl._)();const a=(0,H.a)(e.lee.dispatchGlobal),i=(0,jl.B)(),s=()=>{const t=e.lee.globalState.carbon.loginStatus?.loggedIn,n=e.lee.globalState.user.session.login,a=e.lee.globalState.user.session.uki,r=i?.premiumStatus,s=e.lee.globalState.user.session.permissions?.tacAccessPermissions;return t&&Boolean(n&&a)&&Boolean(r)&&Boolean(s)},o=()=>{const t=e.lee.globalState.user.session.permissions?.tacAccessPermissions;return Boolean(t?.size)};return r.useEffect((()=>{!s()||o()||a()}),[t]),s()&&o()?(0,E.tZ)(re,{globalReportError:e.lee.reportError,children:(0,E.tZ)(Me.qc,{lee:e.lee,children:(0,E.tZ)(Ae,{children:(0,E.tZ)(Ge,{children:(0,E.BX)(Gt,{lee:e.lee,children:[e.children,Hl||(Hl=(0,E.tZ)(Ol,{})),(0,E.tZ)(Gl,{lee:e.lee}),e.lee.globalState.directorySyncKey.displayDialog?(0,E.tZ)(wl,{lee:e.lee}):null,(0,E.tZ)("div",{className:"alertPopup--S9uF3SnYTj",id:"alert-popup-portal"})]})})})})}):Wl||(Wl=(0,E.tZ)("div",{}))};var Kl=n(92630),Yl=n(82622);let Ql=function(e){return e.Loading="loading",e.Start="start",e.Pending="pending",e.Validated="validated",e.Deactivating="deactivating",e}({});const Jl=()=>{const[e,t]=(0,r.useState)({domain:null,status:Ql.Loading}),[n,a]=(0,r.useState)([]),i=(0,r.useCallback)((async()=>{try{const e=await Le.C.getTeamDomains();if(e.success&&e.domains.length){const n=e.domains.filter((e=>e.status===Yl.p.pending)),i=e.domains.filter((e=>e.status===Yl.p.valid));if(i.length){a(i);const e=i[0];t({domain:e,status:Ql.Validated})}else if(n.length){const e=n[n.length-1];t({domain:e,status:Ql.Pending})}else t({domain:e.domains[e.domains.length-1],status:Ql.Pending})}else t({domain:null,status:Ql.Start})}catch(e){t({domain:null,status:Ql.Start})}}),[]);return(0,r.useEffect)((()=>{i()}),[i]),{verifiedOrPendingDomain:e,verifiedDomains:n,updateDomainState:i,deactivateDomain:async()=>{if(null!==e.domain){t((e=>({domain:e.domain,status:Ql.Deactivating})));try{(await Le.C.deactivateTeamDomain({domain:e.domain.name})).success?t({domain:null,status:Ql.Start}):i()}catch(e){i()}}},tryVerifyDomain:async()=>{await Le.C.completeTeamDomainRegistration(),await i()},selectVerifiedDomain:e=>{t({domain:e,status:Ql.Validated})}}};var ec=n(37466),tc=n(41495),nc=n(63756),ac=n(44554);const ic=()=>{const{translate:e}=(0,b.Z)(),t=jt(),n=Ln();if(!t||!n.hasLimitedOffer)return null;const{translatedEquivalentPrice:a,translatedPrice:i}=n;return(0,E.tZ)(rn.k,{title:e("team_dashboard_upgrade_tile_infobox_title"),description:(0,E.BX)(r.Fragment,{children:[(0,E.BX)(d.X,{as:"h5",textStyle:"ds.title.block.small",color:"ds.text.brand.standard",sx:{marginBottom:"4px"},children:[(0,E.tZ)("span",{sx:{textDecoration:"line-through"},children:a})," ",i," ",e("team_dashboard_upgrade_tile_infobox_price")]}),(0,E.tZ)(_.n,{textStyle:"ds.body.helper.regular",color:"ds.text.brand.standard",children:e("team_dashboard_upgrade_tile_infobox_description")})]}),mood:"brand"})},rc="team_dashboard_upgrade_tile_business_upgrade_header",sc="team_dashboard_upgrade_tile_feature_sso",oc="team_upgrade_to_business";var lc,cc;const dc=({iconName:e,children:t})=>(0,E.BX)(c.k,{gap:"12px",alignItems:"center",flexWrap:"nowrap",children:[(0,E.tZ)("div",{sx:{padding:"8px",backgroundColor:"ds.container.expressive.brand.quiet.idle",borderRadius:"8px"},children:(0,E.tZ)(T.JO,{name:e,size:"large",color:"ds.text.brand.standard"})}),(0,E.tZ)(_.n,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.catchy",children:t})]}),_c=({dismissible:e,headingLevel:t="h5"})=>{const{translate:n}=(0,b.Z)(),a=(()=>{const{routes:e}=(0,i.Xo)(),t=(0,$.C)();if(!t)return null;const n=t.isFreeTrial,a=t.spaceTier===g.lD.Starter,r=t.spaceTier===g.lD.Team,s=t.spaceTier===g.lD.Standard;return!n&&a?{header:{key:rc},description:{key:"team_dashboard_upgrade_tile_team_upgrade_description"},features:[{iconName:"GroupOutlined",key:"team_dashboard_upgrade_tile_feature_unlimited_seats"},{iconName:"SharedOutlined",key:"team_dashboard_upgrade_tile_feature_group"},{iconName:"LockOutlined",key:sc},{iconName:"SettingsOutlined",key:"team_dashboard_upgrade_tile_feature_activity_logs"}],cta:{key:oc,link:e.teamAccountChangePlanRoutePath}}:!n&&r?{header:{key:rc},description:{key:"team_dashboard_upgrade_tile_business_upgrade_description"},features:[{iconName:"ToolsOutlined",key:sc},{iconName:"SharedOutlined",key:"team_dashboard_upgrade_tile_feature_scim"},{iconName:"GroupOutlined",key:"team_dashboard_upgrade_tile_feature_friends_and_family"},{iconName:"ItemPhoneHomeOutlined",key:"team_dashboard_upgrade_tile_feature_support"}],cta:{key:"team_dashboard_upgrade_tile_cta_upgrade",link:e.teamAccountChangePlanRoutePath}}:!n&&s?{header:{key:rc},description:{key:"account_summary_upgrade_standard_title"},features:[{iconName:"GroupOutlined",key:"account_summary_unlimited_seats_description"},{iconName:"ToolsOutlined",key:"team_dashboard_upgrade_tile_feature_provisioning"},{iconName:"HealthPositiveOutlined",key:"team_dashboard_upgrade_tile_feature_integrations"},{iconName:"ItemPhoneHomeOutlined",key:"team_dashboard_upgrade_tile_feature_additional_support"}],cta:{key:oc,link:e.teamAccountChangePlanRoutePath}}:null})(),r=(0,i.k6)(),s=(0,$.C)(),o=()=>{a&&(a.cta.external?(0,W.Yo)(a.cta.link):r.push(a.cta.link),(0,y.Kz)(new u.UserClickEvent({button:u.Button.BuyDashlane,clickOrigin:u.ClickOrigin.FeatureLimitationsBlock})))};if(!s)return null;const l=s.spaceTier===g.lD.Team,m=s.spaceTier===g.lD.Starter,p=s.isFreeTrial,h=s.isGracePeriod,S=s.daysLeftInTrial<=0,x=s.spaceTier===g.lD.Standard,f=()=>e?{mood:"brand",intensity:"catchy"}:{mood:"neutral",intensity:"quiet"},v=()=>m?{layout:"iconLeading",icon:"PremiumOutlined"}:{layout:"labelOnly",icon:"undefined"};return(0,E.BX)(c.k,{flexDirection:"column",gap:"24px",children:[p?(0,E.tZ)(ws,{isGracePeriod:h,shouldShowDiscontinuedBadge:S,setWidth:!1}):null,a&&x?(0,E.BX)(yn.Z,{sx:{padding:"16px",backgroundColor:"ds.container.agnostic.neutral.supershy",borderColor:"ds.border.neutral.quiet.idle"},children:[(0,E.BX)(c.k,{flexDirection:"column",gap:"8px",children:[(0,E.BX)(c.k,{alignItems:"start",flexWrap:"nowrap",justifyContent:"space-between",flexDirection:"column",gap:"16px",children:[(0,E.tZ)(pe.C,{label:n(a.header.key),mood:"brand",iconName:"PremiumOutlined",layout:"iconLeading"}),(0,E.tZ)("div",{sx:{display:"flex",justifyContent:"center",flex:1},children:(0,E.tZ)("img",{role:"presentation",alt:"",src:Zs,sx:{objectFit:"contain",width:"100%",height:"auto"}})})]}),(0,E.tZ)(_.n,{textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:n(a.description.key)})]}),a.features.map((e=>(0,E.tZ)(Ts,{iconName:e.iconName,description:e.key},e.key))),(0,E.tZ)(D.z,{mood:"brand",intensity:"catchy",onClick:o,layout:"iconLeading",icon:"PremiumOutlined",children:n(a.cta.key)},a.cta.key)]}):null,a&&!x?(0,E.BX)(yn.Z,{sx:{padding:"16px",backgroundColor:"ds.container.agnostic.neutral.supershy",borderColor:"ds.border.neutral.quiet.idle"},children:[(0,E.BX)(c.k,{flexDirection:"column",gap:"8px",children:[(0,E.BX)(c.k,{alignItems:"start",flexWrap:"nowrap",justifyContent:"space-between",children:[(0,E.tZ)(d.X,{as:t,textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:n(a.header.key,a.header.variables)}),e?(0,E.tZ)(D.z,{sx:{padding:"4px"},mood:"neutral",intensity:"supershy",size:"medium",layout:"iconOnly",onClick:()=>(0,ac.ql)({type:tc.U.DASHBOARD_UPRADE}),icon:lc||(lc=(0,E.tZ)(T.JO,{color:"ds.text.neutral.quiet",name:"ActionCloseOutlined"}))}):null]}),(0,E.tZ)(_.n,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",children:n(a.description.key)})]}),a.features.map((e=>(0,E.tZ)(dc,{iconName:e.iconName,children:n(e.key)},e.key))),l?cc||(cc=(0,E.tZ)(ic,{})):null,(0,E.tZ)(D.z,{fullsize:!0,mood:f().mood,intensity:f().intensity,onClick:o,layout:v().layout,icon:v().icon,children:n(a.cta.key)},a.cta.key)]}):null]})},uc=({requiredSeatsForIdP:e})=>{const{translate:t}=(0,b.Z)();return(0,E.tZ)(xo.u,{content:t("team_idp_errors_badge_seats_required_tooltip",{count:e}),children:(0,E.tZ)(pe.C,{label:t("team_idp_errors_badge_seats_required",{count:e,nbOfRequiredSeats:e}),mood:"danger",intensity:"quiet"})})},mc=e=>{const t=e.toFixed(1),n=e.toFixed();return parseFloat(n)-parseFloat(t)==0?n:t},pc=({showPasswordHealthScore:e,securityIndex:t,shieldSize:n,textSize:a})=>{let i="";const s="small"===a?"ds.specialty.spotlight.small":"ds.specialty.spotlight.medium";return e?(i=t>=80?"ds.text.positive.quiet":t>=40?"ds.text.warning.quiet":"ds.text.danger.quiet",t>=60?(0,E.BX)(r.Fragment,{children:[(0,E.tZ)(T.JO,{name:"HealthPositiveOutlined",size:n,color:i}),(0,E.tZ)(_.n,{textStyle:s,color:"ds.text.neutral.catchy",children:`${mc(t)}%`})]}):(0,E.BX)(r.Fragment,{children:[(0,E.tZ)(T.JO,{name:"HealthNegativeOutlined",size:n,color:i}),(0,E.tZ)(_.n,{textStyle:s,color:"ds.text.neutral.catchy",children:`${mc(t)}%`})]})):(i="ds.text.brand.quiet",(0,E.BX)(r.Fragment,{children:[(0,E.tZ)(T.JO,{name:"HealthUnknownOutlined",size:n,color:i}),(0,E.tZ)(_.n,{textStyle:s,color:"ds.text.neutral.catchy",children:"-"})]}))},gc={HEADER:{display:"flex"},FOOTER:{lineHeight:"1",fontSize:"16px"},MAIN_CARD_CONTENT:{display:"flex",flexDirection:"column",gap:"4px"}},hc=({title:e})=>(0,E.tZ)(T.JO,{tabIndex:0,size:"xsmall",color:"ds.text.neutral.quiet",name:"FeedbackInfoOutlined",tooltip:{content:e,location:"bottom",disableCloseOnClick:!0}}),yc=e=>(0,E.tZ)(d.X,{as:"h1",color:"ds.text.neutral.quiet",textStyle:"ds.title.supporting.small",children:e}),bc=({testId:e,children:t})=>(0,E.tZ)("div",{"data-testid":e,children:(0,E.tZ)(yn.Z,{sx:{display:"flex",flexDirection:"column",justifyContent:"space-between",height:"146px",width:"232px",padding:"16px",marginRight:"32px",flexShrink:"0",overflow:"inherit",color:"ds.text.neutral.catchy"},children:t})}),Sc=({passwordHealth:e,seats:t,passwordHealthHistoryEmpty:n})=>{const{translate:a}=(0,b.Z)(),{routes:r}=(0,Xo.Xo)(),{compromised:s,securityIndex:o}=e,l=`${t.used}/${t.provisioned}`,{openDialog:c,shouldShowFrozenStateDialog:d}=(0,L.Ub)(),u=(0,m.k)(Fr.t,"getIdPFailedProvisioningsData"),p=u.status===G.rq.Success?u.data?.requiredSeats:0,h=(0,$.C)(),y=!!h&&h.spaceTier===g.lD.Starter,S=!!h&&h.spaceTier===g.lD.Standard,x=()=>{d&&c()};return(0,E.BX)("section",{className:"cardsRow--UeIGdGJnGY",sx:{display:"flex",justifyContent:"flex-start"},children:[(0,E.tZ)(bc,{testId:"card-password-health",children:(0,E.BX)("div",{sx:gc.MAIN_CARD_CONTENT,children:[(0,E.BX)("header",{sx:gc.HEADER,children:[yc(a("team_dashboard_card_health_score")),(0,E.tZ)(hc,{title:a("team_dashboard_card_health_score_info")})]}),(0,E.tZ)("div",{sx:{display:"flex",gap:"12px",alignItems:"center"},children:(0,E.tZ)(pc,{showPasswordHealthScore:!n,securityIndex:o,shieldSize:"xlarge",textSize:"medium"})})]})}),(0,E.BX)(bc,{testId:"card-compromised-passwords",children:[(0,E.BX)("div",{sx:gc.MAIN_CARD_CONTENT,children:[(0,E.BX)("header",{sx:gc.HEADER,children:[yc(a("team_dashboard_card_compromised")),(0,E.tZ)(hc,{title:a("team_dashboard_card_compromised_info")})]}),(0,E.tZ)(_.n,{textStyle:"ds.specialty.spotlight.medium",color:s?"ds.text.danger.quiet":"ds.text.neutral.catchy",children:s})]}),s?(0,E.tZ)("footer",{sx:gc.FOOTER,children:(0,E.tZ)($t.Q,{as:i.rU,to:r.teamMembersRoutePath,children:a("team_dashboard_card_compromised_details_link")})}):null]}),(0,E.BX)(bc,{testId:"card-seats-taken",children:[(0,E.BX)("div",{sx:gc.MAIN_CARD_CONTENT,children:[(0,E.BX)("header",{sx:gc.HEADER,children:[yc(a("team_dashboard_card_seats_taken")),(0,E.tZ)(hc,{title:a("team_dashboard_card_seats_taken_info")})]}),(0,E.tZ)(_.n,{textStyle:l.length>10?"ds.specialty.spotlight.small":"ds.specialty.spotlight.medium",color:"ds.text.neutral.catchy",children:l}),p?(0,E.tZ)(uc,{requiredSeatsForIdP:p}):null]}),(0,E.tZ)("footer",{sx:gc.FOOTER,children:(0,E.tZ)($t.Q,{as:i.rU,to:y||S?`${r.teamAccountChangePlanRoutePath}`:d?{}:`${r.teamAccountRoutePath}?showSeatsDialog=true`,onClick:x,children:a("team_dashboard_card_seats_buy_link")})})]}),(0,E.BX)(bc,{testId:"card-pending-invitations",children:[(0,E.BX)("div",{sx:gc.MAIN_CARD_CONTENT,children:[(0,E.BX)("header",{sx:gc.HEADER,children:[yc(a("team_dashboard_card_pending_invitations")),(0,E.tZ)(hc,{title:a("team_dashboard_card_pending_invitations_info")})]}),(0,E.tZ)(_.n,{textStyle:"ds.specialty.spotlight.medium",color:"ds.text.neutral.catchy",children:t.pending})]}),(0,E.tZ)("footer",{sx:gc.FOOTER,children:(0,E.tZ)($t.Q,{as:i.rU,onClick:x,to:d?{}:{pathname:r.teamMembersRoutePath,state:t.pending?{openResendPendingInvitationsDialog:!0}:{openSendInvitesDialog:!0}},children:t.pending?a("team_dashboard_card_resend_invitations_link"):a("team_dashboard_card_send_invitations_link")})})]})]})};var xc=n(53265),fc=n(22269),vc=n(353),Cc=n(71437),Ec=n(64900),Zc=n(99477),kc=n(33117),Dc=n(28290),Tc=n(40934),Ic=n(42094),Ac=n(26385);let wc=function(e){return e[e.AllTime=0]="AllTime",e[e.Last7Days=1]="Last7Days",e[e.Last30Days=2]="Last30Days",e}({});var Oc=n(24731),Nc=n(42930);const Rc=(e,t,n)=>{const a=[];switch(e){case wc.AllTime:{if(n>=5&&n<=8){t.forEach((e=>{const{date:t}=e;1===new Date(t).getDate()&&a.push(t)}));break}const{length:e}=t;if(e<=7){t.forEach((e=>{a.push(e.date)}));break}const i=e/7;let r=e-1;for(;r>=0;)a.push(t[Math.round(r)]?.date),r-=i;break}case wc.Last7Days:t.forEach((e=>{a.push(e.date)}));break;case wc.Last30Days:t.forEach((e=>{const{date:t}=e;0===new Date(t).getDay()&&a.push(t)}));break;default:(0,Oc.U)(e)}return a},Lc=({historyToDisplay:e,passwordHealthHistoryEmpty:t,view:n})=>{const{translate:a}=(0,b.Z)(),i=0!==e.length?(e=>{const t=new Date,n=new Date(e);let a=12*(t.getFullYear()-n.getFullYear());return a-=n.getMonth(),a+=t.getMonth(),a+1})(e[0].date):0;return Rc(n,e,i),(0,E.tZ)(Nc.K,{dataKey:"date",ticks:t?[]:Rc(n,e,i),tickSize:4,tickFormatter:t?()=>"":e=>((e,t,n,a)=>{const i=t===wc.AllTime&&n>=5,r=new Date(e),s=a.shortDate(r,i?fn._T.MMM_YYYY:fn._T.L_M_D),o=a.shortDate(r,fn._T.MMMM);if(i)return s===o||s.endsWith(".")?s:`${s}.`;const[l,c]=s.split(" ");return l===o?s:`${l}. ${c}`})(e,n,i,a),fontSize:"small"})},Bc="legendItem--MoxC6xF4tG",Mc="legendIcon--p8Emm90xE4",Pc=({active:e,label:t,payload:n})=>{const{translate:a}=(0,b.Z)();if(!e)return null;const i=n?`${mc(n[0]?.value)}%`:null;return(0,E.BX)("div",{className:"customTooltipContainer--iAM2rWgGzw",children:[(0,E.tZ)("time",{className:"date--JuYmIy6PnQ",children:t}),(0,E.BX)("div",{className:"score--RRdFFcOQCh",children:[(0,E.BX)("div",{className:Bc,children:[(0,E.tZ)("div",{className:Mc}),(0,E.tZ)("p",{children:a("team_dashboard_graph_score_hover_legend")})]}),(0,E.tZ)("p",{children:i})]})]})},Uc={GRAPH_HEADER:{display:"flex",justifyContent:"space-between",margin:"8px 0"},GRAPH_HEADER_WITH_TOOLTIP:{marginTop:"24px"}};var Xc;const zc=({history:e,passwordHealthHistoryEmpty:t,infoboxOnTop:n})=>{const[a,i]=(0,r.useState)(wc.AllTime),s=(e=>{const{length:t}=e;if(t<=2)return e;const n=(0,kc.Z)(e[0].date),a=(0,kc.Z)(e[t-1].date),i=(0,Dc.Z)(a,n);if(i===t-1)return e;const r=[];let s=0,o=e[s].securityIndex,l=n,c=n;for(let t=0;t<=i;t++)(0,Tc.Z)(c,l)?(r.push(e[s]),o=e[s].securityIndex,s++,l=(0,kc.Z)(e[s]?.date)):r.push({date:c.toISOString().slice(0,10),securityIndex:o}),c=(0,Ic.Z)(c,1);return r})(e),o=((e,t)=>{switch(e){case wc.AllTime:return t;case wc.Last7Days:return t.slice(t.length-7,t.length);case wc.Last30Days:return t.slice(t.length-30,t.length);default:(0,Oc.U)(e)}})(a,s),{translate:l}=(0,b.Z)(),c=[wc.Last7Days,wc.Last30Days,wc.AllTime],d=(0,r.useMemo)((()=>[{onSelect:()=>i(wc.Last7Days),title:l("team_dashboard_graph_7_days_button"),contentId:"content-last-7-days",id:"tab-last-7-days",minimumHistoryLength:7},{onSelect:()=>i(wc.Last30Days),title:l("team_dashboard_graph_30_days_button"),contentId:"content-last-30-days",id:"tab-last-30-days",minimumHistoryLength:30},{onSelect:()=>i(wc.AllTime),title:l("team_dashboard_graph_all_time_button"),contentId:"content-all-time",id:"tab-all-time",minimumHistoryLength:0}].reduce(((e,{minimumHistoryLength:t,...n})=>t<=s.length?[...e,n]:e),[])),[s]);return(0,E.BX)(r.Fragment,{children:[(0,E.BX)("section",{sx:(0,Ee.jM)([Uc.GRAPH_HEADER,n?Uc.GRAPH_HEADER_WITH_TOOLTIP:{}]),children:[(0,E.BX)("div",{className:Bc,children:[(0,E.tZ)("div",{className:Mc}),(0,E.tZ)(_.n,{textStyle:"ds.body.helper.regular",color:"ds.text.neutral.quiet",children:l("team_dashboard_graph_score_legend")})]}),(0,E.tZ)(Ac.m,{tabs:d,defaultTab:c.indexOf(wc.AllTime)})]}),(0,E.tZ)("section",{sx:{width:"100%",height:"211px",flexGrow:1},children:(0,E.tZ)(xc.h,{sx:{height:"100%",width:"100%"},children:(0,E.BX)(fc.w,{data:t?[]:o,sx:{position:"relative",right:"18px"},children:[Xc||(Xc=(0,E.tZ)(vc.q,{vertical:!1})),(0,E.tZ)(Cc.B,{domain:[0,100],tickFormatter:e=>`${e}%`,fontSize:"small"}),Lc({historyToDisplay:o,passwordHealthHistoryEmpty:t,view:a}),(0,E.tZ)(Ec.u,{content:e=>{const t=l.shortDate((0,kc.Z)(e.label),{year:"numeric",month:"long",day:"numeric",timeZone:"UTC"});return(0,E.tZ)(Pc,{...e,label:t})},animationDuration:500,animationEasing:"ease-out",cursor:!t}),(0,E.tZ)(Zc.x,{dataKey:"securityIndex",stroke:"#0e6476",strokeWidth:"2",dot:!1,activeDot:{strokeWidth:0,r:4},animationDuration:500,isAnimationActive:!0})]})})})]})};var Fc=n(28207),qc=n(80936);const Gc="team_dashboard_industry_benchmark_cta",Vc="19px",jc="https://support.dashlane.com/hc/articles/202699411-Password-Health",Wc=({showDataWarning:e,ratingVSIndustry:t,deltaVSIndustry:n})=>{const{translate:a}=(0,b.Z)(),i=(0,qc.I)(),r=i.status===G.rq.Success&&!i.isDisabled,s={lower:{message:a("team_dashboard_industry_benchmark_info_lower",{count:n}),infoboxMood:"danger",ctas:[(0,E.tZ)($t.Q,{href:jc,isExternal:!0,children:a(Gc)},"see_how_danger")]},onPar:{message:a("team_dashboard_industry_benchmark_info_onpar"),infoboxMood:"warning",ctas:[(0,E.tZ)($t.Q,{href:jc,isExternal:!0,children:a(Gc)},"see_how_warning")]},higher:{message:a("team_dashboard_industry_benchmark_info_higher",{count:n}),infoboxMood:"positive",ctas:[]}};return e?(0,E.tZ)(rn.k,{size:"medium",sx:{marginTop:Vc},title:a(r?"team_dashboard_graph_not_enough_data_warning":"team_dashboard_graph_not_enough_data_warning_min",{minPasswords:5})}):t?(0,E.tZ)(rn.k,{size:"large",sx:{marginTop:Vc},title:s[t].message,mood:s[t].infoboxMood,actions:s[t].ctas,icon:"higher"===t?"HealthPositiveOutlined":"HealthNegativeOutlined"}):null},Hc=({isLoading:e,history:t,passwordHealthHistoryEmpty:n})=>{const{translate:a}=(0,b.Z)(),i=(0,Fc.u)(),r=(()=>{const e=(0,Pe.o)(Ci.P.DashHackIndustryBenchmarkDev),{data:t,status:n}=(0,m.k)(p.o,"getIndustryBenchmarkData");return n!==G.rq.Success?{status:n}:{status:n,data:e?t:null}})();if(i.status!==G.rq.Success||r.status!==G.rq.Success)return null;const s=!e&&n,{ratingVSIndustry:o,deltaVSIndustry:l}={...r.data},c=s||!!o;return(0,E.BX)("section",{sx:{padding:"24px",paddingBottom:"0",flexGrow:1,display:"flex",flexDirection:"column"},children:[(0,E.tZ)(d.X,{as:"h5",color:"ds.text.neutral.catchy",textStyle:"ds.title.section.medium",children:a("team_dashboard_graph_heading")}),c?(0,E.tZ)(Wc,{showDataWarning:s,ratingVSIndustry:o,deltaVSIndustry:l}):null,(0,E.tZ)(zc,{history:t,infoboxOnTop:c,passwordHealthHistoryEmpty:n})]})},$c=({title:e,value:t,color:n})=>(0,E.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"8px",marginRight:"8px",minWidth:"70px"},children:[(0,E.tZ)("header",{children:(0,E.tZ)(_.n,{as:"h2",color:"ds.text.neutral.quiet",textStyle:"ds.body.helper.regular",children:e})}),(0,E.tZ)(_.n,{textStyle:"ds.specialty.spotlight.small",color:null!=n?n:"ds.text.neutral.standard",children:t})]}),Kc=({compromised:e,passwords:t,reused:n,safe:a,securityIndex:i,weak:r,passwordHealthHistoryEmpty:s})=>{const{translate:o}=(0,b.Z)();return(0,E.BX)("section",{sx:{borderTop:"1px solid",borderTopColor:"ds.border.neutral.quiet.idle",display:"flex",padding:"3% 2%"},children:[(0,E.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"8px",width:"240px",padding:"0 24px",borderRight:"1px solid",borderRightColor:"ds.border.neutral.quiet.idle"},children:[(0,E.tZ)("header",{children:(0,E.tZ)(_.n,{as:"h2",color:"ds.text.neutral.quiet",textStyle:"ds.body.helper.regular",children:o("team_dashboard_password_health_breakdown_score")})}),(0,E.tZ)("div",{sx:{fontSize:"x-large",fontWeight:"bold",display:"inline-flex",alignItems:"center","& > svg":{marginRight:"7px"},color:"ds.text.neutral.standard"},children:(0,E.tZ)(pc,{showPasswordHealthScore:!s,securityIndex:i,shieldSize:"medium",textSize:"small"})})]}),(0,E.BX)("div",{sx:{display:"flex",justifyContent:"space-between",padding:"0 24px",width:"100%"},children:[(0,E.tZ)($c,{title:o("team_dashboard_password_health_breakdown_total"),value:t}),(0,E.tZ)($c,{title:o("team_dashboard_password_health_breakdown_safe"),value:a,color:a?"ds.text.positive.quiet":void 0}),(0,E.tZ)($c,{title:o("team_dashboard_password_health_breakdown_weak"),value:r,color:r?"ds.text.warning.quiet":void 0}),(0,E.tZ)($c,{title:o("team_dashboard_password_health_breakdown_reused"),value:n,color:n?"ds.text.warning.quiet":void 0}),(0,E.tZ)($c,{title:o("team_dashboard_password_health_breakdown_compromised"),value:e,color:e?"ds.text.danger.quiet":void 0})]})]})},Yc=({isLoading:e,report:t,passwordHealthHistoryEmpty:n})=>(0,E.BX)(yn.Z,{sx:{height:"100%",display:"flex",flexDirection:"column",backgroundColor:"ds.container.agnostic.neutral.supershy",borderColor:"ds.border.neutral.quiet.idle",padding:0},children:[(0,E.tZ)(Hc,{isLoading:e,history:t.passwordHealthHistory,passwordHealthHistoryEmpty:n}),(0,E.tZ)(Kc,{...t.passwordHealth,passwordHealthHistoryEmpty:n})]}),Qc="https://support.dashlane.com/hc/articles/4507132108946",Jc={HEADING:"team_dashboard_dark_web_insights_heading",SECURITY_INCIDENTS:{LABEL:"team_dashboard_dark_web_insights_security_incidents",TOOLTIP:"team_dashboard_dark_web_insights_security_incidents_tooltip"},EMAILS_AFFECTED:{LABEL:"team_dashboard_dark_web_insights_emails_affected",TOOLTIP:"team_dashboard_dark_web_insights_emails_affected_tooltip"},SUGGESTED_INVITATION:{LABEL:"team_dashboard_dark_web_insights_suggested_invitations",TOOLTIP:"team_dashboard_dark_web_insights_suggested_invitations_tooltip"},RETURNING_USER_CTA:"team_dashboard_dark_web_insights_go_to_cta",RETURNING_USER_VIEW_DOMAIN_GUIDE_CTA:"team_dashboard_dark_web_insights_view_guide_cta",UNVERIFIED_MSG:"team_dashboard_dark_web_insights_domain_unverified_msg",UNVERIFIED_SUBTEXT:"team_dashboard_dark_web_insights_domain_unverified_sub_text",INCIDENT_FREE_MSG:"team_dashboard_dark_web_insights_domain_incident_free_msg",INCIDENT_FREE_SUBTEXT:"team_dashboard_dark_web_insights_domain_incident_free_sub_text",GENERATING_INSIGHTS_MESSAGE:"team_dashboard_dark_web_insights_generating_msg",NEW_INCIDENTS_NOTIFICATION_MSG:{ONE:"team_dashboard_dark_web_insights_notify_new_incidents_one",MANY:"team_dashboard_dark_web_insights_notify_new_incidents_many"},TEAM_NEW_LABEL:"team_new_label"},ed=({count:e,labelAndTooltip:t,primaryColor:n,secondaryColor:a})=>{const{translate:i}=(0,b.Z)();return(0,E.BX)(c.k,{gap:"6px",sx:{margin:"16px 0"},alignItems:"center",children:[(0,E.tZ)(Ce.X6q,{size:"x-small",color:n,sx:{width:"57px"},children:e}),(0,E.BX)(Ce.ua7,{sx:{fontSize:2,maxWidth:"180px"},placement:"top",content:i(t.TOOLTIP),children:[(0,E.tZ)(Ce.nvN,{"aria-label":i(t.LABEL),size:"small",sx:{minWidth:"calc(100% - 83px)",width:"min-content"},color:null!=a?a:n,children:i(t.LABEL)}),(0,E.tZ)(Ce.uMt,{size:13,tabIndex:0,color:null!=a?a:n})]})]})},td=({children:e})=>(0,E.tZ)(yn.Z,{sx:{minHeight:"418px",width:"282px",backgroundColor:"ds.container.agnostic.neutral.supershy",borderColor:"ds.border.neutral.quiet.idle"},children:(0,E.tZ)(c.k,{sx:{minHeight:"418px",padding:"20px"},flexDirection:"column",justifyContent:"space-between",alignItems:"start",children:e})}),nd=({text:e,subtext:t,imgSrc:n})=>(0,E.BX)(r.Fragment,{children:[(0,E.tZ)("img",{src:n}),(0,E.tZ)(Ce.nvN,{size:"medium",bold:!0,sx:{marginBottom:"8px"},children:e}),(0,E.tZ)(Ce.nvN,{size:"small",color:Ce.colors.grey00,children:t})]}),ad=({domain:e})=>(0,E.tZ)(Ce.nvN,{size:"x-small",bold:!0,sx:{padding:"4px 8px",backgroundColor:`${Ce.colors.dashGreen06}`,borderRadius:"4px",width:"fit-content",height:"24px",marginBottom:"34px"},children:e}),id=({newLeaksCount:e,newLeaksAffectedEmailCount:t})=>{const{translate:n}=(0,b.Z)(),{setHasNewBreaches:a}=we();(0,r.useEffect)((()=>{e>0&&a(!0)}),[e,a]);const i=e>1?Jc.NEW_INCIDENTS_NOTIFICATION_MSG.MANY:Jc.NEW_INCIDENTS_NOTIFICATION_MSG.ONE;return e>0?(0,E.BX)(c.k,{sx:{backgroundColor:Ce.colors.pink05,borderRadius:"4px",padding:"5px 8px",marginTop:"25px"},children:[(0,E.tZ)(Ce.nvN,{size:"small",color:Ce.colors.red00,sx:{width:"calc(100% - 5px)"},children:n(i,{numIncidents:e,count:t})}),(0,E.tZ)(Ce.P_k,{dot:!0,ariaLabel:n(Jc.TEAM_NEW_LABEL)})]}):null},rd=({domainInfo:e})=>{const t=e.leaksCount,n=e.emailsImpactedCount,a=e.emailsImpactedCount-e.teamMembersImpactedCount;return(0,E.BX)(r.Fragment,{children:[(0,E.tZ)(ed,{count:t,labelAndTooltip:Jc.SECURITY_INCIDENTS,primaryColor:Ce.colors.dashGreen00,secondaryColor:Ce.colors.dashGreen01}),(0,E.tZ)(ed,{count:n,labelAndTooltip:Jc.EMAILS_AFFECTED,primaryColor:Ce.colors.dashGreen00,secondaryColor:Ce.colors.dashGreen01}),(0,E.tZ)(ed,{count:a,labelAndTooltip:Jc.SUGGESTED_INVITATION,primaryColor:Ce.colors.dashGreen00,secondaryColor:Ce.colors.dashGreen01}),(0,E.tZ)(id,{newLeaksCount:e.newLeaksCount,newLeaksAffectedEmailCount:e.newLeaksAffectedEmailCount})]})},sd=({domainName:e,domainInfo:t})=>{const{translate:n}=(0,b.Z)(),{routes:a}=(0,Xo.Xo)();return(0,E.BX)(r.Fragment,{children:[(0,E.BX)("section",{sx:{width:"100%"},children:[(0,E.tZ)(ad,{domain:e}),t.leaksCount>0?(0,E.tZ)(rd,{domainInfo:t}):(0,E.tZ)(nd,{imgSrc:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTIiIGhlaWdodD0iNTIiIHZpZXdCb3g9IjAgMCA1MiA1MiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwXzMxMTNfMTkwOTY0KSI+CjxyZWN0IHdpZHRoPSI1MiIgaGVpZ2h0PSI1MiIgcng9IjI2IiBmaWxsPSIjRDlERkUwIi8+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMjAuNzIxOSAxMy40NzMzQzE0LjI4MjEgMTQuMjgxNiA5LjcxNjc2IDIwLjE1NzMgMTAuNTI1IDI2LjU5NzJMMTEuMTk1MyAzMS45MzgxTDcuOTg0NDUgMzIuMzQxMUM2Ljg4ODQ4IDMyLjQ3ODYgNi4xMTE1MiAzMy40Nzg2IDYuMjQ5MDggMzQuNTc0Nkw5LjE2NTA4IDU3LjgwOEM5LjMwMjYzIDU4LjkwNCAxMC4zMDI2IDU5LjY4MDkgMTEuMzk4NiA1OS41NDM0TDQwLjI5OTIgNTUuOTE2MUM0MS4zOTUyIDU1Ljc3ODYgNDIuMTcyMSA1NC43Nzg2IDQyLjAzNDYgNTMuNjgyNkwzOS4xMTg2IDMwLjQ0OTJDMzguOTgxIDI5LjM1MzIgMzcuOTgxIDI4LjU3NjIgMzYuODg1MSAyOC43MTM4TDM0LjUxNjEgMjkuMDExMUwzMy44NDU4IDIzLjY3MDJDMzMuMDM3NiAxNy4yMzA0IDI3LjE2MTggMTIuNjY1MSAyMC43MjE5IDEzLjQ3MzNaTTE0LjE3NjUgMjYuNjYxTDE0Ljc4MjQgMzEuNDg3OUwzMC45Mjc1IDI5LjQ2MTVMMzAuMzIxNyAyNC42MzQ2QzI5Ljc2MjIgMjAuMTc2MiAyNS42OTQzIDE3LjAxNTYgMjEuMjM2IDE3LjU3NTJDMTYuNzc3NiAxOC4xMzQ4IDEzLjYxNyAyMi4yMDI2IDE0LjE3NjUgMjYuNjYxWk00Ni43NzUzIDE4LjY1ODZMNDAuNDg1NiAyMi42MTkzTDQxLjkxMTEgMjQuODgyOUw0OC4yMDA3IDIwLjkyMjJMNDYuNzc1MyAxOC42NTg2Wk00My4xODE2IDI3LjI3NjRMNDcuMDcxNyAyNy4zNjhMNDcuMDEwMyAyOS45Nzc3TDQzLjEyMDIgMjkuODg2MUw0My4xODE2IDI3LjI3NjRaTTM3LjQ1NiAxNS43NDIyTDM2LjA3NyAyMC42Nzc3TDM4LjgxNzQgMjEuNDQzNEw0MC4xOTY0IDE2LjUwNzlMMzcuNDU2IDE1Ljc0MjJaIiBmaWxsPSIjMEUzNTNEIi8+CjwvZz4KPGRlZnM+CjxjbGlwUGF0aCBpZD0iY2xpcDBfMzExM18xOTA5NjQiPgo8cmVjdCB3aWR0aD0iNTIiIGhlaWdodD0iNTIiIHJ4PSIyNiIgZmlsbD0id2hpdGUiLz4KPC9jbGlwUGF0aD4KPC9kZWZzPgo8L3N2Zz4K",text:n(Jc.INCIDENT_FREE_MSG,{domainName:e}),subtext:n(Jc.INCIDENT_FREE_SUBTEXT)})]}),(0,E.tZ)(i.rU,{to:a.teamDarkWebInsightsRoutePath,sx:{textDecoration:"none",color:`${Ce.colors.midGreen00}`,marginBottom:"16px","&:hover":{textDecoration:"underline"}},onClick:()=>{(0,y.Kz)(new u.UserOpenDomainDarkWebMonitoringEvent({accessPath:u.AccessPath.MainDashboardButton,isFirstVisit:!1}))},children:n(Jc.RETURNING_USER_CTA)})]})},od=({domainName:e})=>{const{translate:t}=(0,b.Z)();return(0,E.BX)(r.Fragment,{children:[(0,E.BX)("section",{sx:{width:"100%"},children:[(0,E.tZ)(ad,{domain:e}),(0,E.tZ)(nd,{imgSrc:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTMiIGhlaWdodD0iNTMiIHZpZXdCb3g9IjAgMCA1MyA1MyIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjUzIiBoZWlnaHQ9IjUzIiByeD0iMjYuNSIgZmlsbD0iI0Q5REZFMCIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTI2LjgwMDQgMTMuNzUzN0wyNi45NjE2IDEzLjEwOTFDMjcuNjA2MiAxMC42MTEzIDI5Ljg2MjIgOSAzMi4zNjAxIDlDMzUuMzQxMyA5IDM4IDExLjQxNzMgMzggMTQuNDc4OUMzOCAxNi45NzY4IDM2LjMwNzkgMTkuMDcxNiAzMy45NzEyIDE5LjcxNjRWMjAuNzY0SDMwLjc0ODJWMTguODMwM0MzMC43NDgyIDE3Ljc4MjcgMzEuNTU0IDE2LjgxNiAzMi42ODE5IDE2LjczNTRDMzMuODA5OSAxNi41NzQyIDM0Ljc3NjggMTUuNjg3OSAzNC43NzY4IDE0LjQ3OTRDMzQuNzc2OCAxMy4xOTAyIDMzLjY0ODkgMTIuMjIzMyAzMi4zNTk1IDEyLjIyMzNDMzEuMjMxNiAxMi4yMjMzIDMwLjM0NTMgMTIuODY3OSAzMC4wMjI5IDEzLjkxNTRMMjkuODYxNyAxNC41NTk5TDI2LjggMTMuNzU0MkwyNi44MDA0IDEzLjc1MzdaTTM0LjM3NDQgMjMuNzQ1NUMzNC4zNzQ0IDI0Ljg1OCAzMy40NzI2IDI1Ljc2IDMyLjM2MDEgMjUuNzZDMzEuMjQ3NiAyNS43NiAzMC4zNDU2IDI0Ljg1OCAzMC4zNDU2IDIzLjc0NTVDMzAuMzQ1NiAyMi42MzMgMzEuMjQ3NiAyMS43MzEzIDMyLjM2MDEgMjEuNzMxM0MzMy40NzI2IDIxLjczMTMgMzQuMzc0NCAyMi42MzMgMzQuMzc0NCAyMy43NDU1Wk0zNi44NzkxIDM0LjYzMzlDMzYuODc5MSAzMi42MTggMzYuNDE5MyAzMC42ODU5IDM1LjU0MTMgMjguODhMMzEuNjk1OCAyOC44OEwzMi4xOTczIDI5LjcxOTlDMzIuODI0MiAzMC43Njk5IDMzLjIwMDQgMzEuOTAzOSAzMy40MDk0IDMzLjA3OTlMMjkuMzEyOSAzMy4wNzk5QzI5LjI3MTIgMzAuOTggMjguOTc4NCAyOC44OCAyOC41MTg2IDI2LjgyMTlDMjcuNTk4OSAyMy4xNjgxIDI1LjkyNjkgMjEuMzIgMjMuNTAyNCAyMS4zMkMxNi4xMDMyIDIxLjI3OCAxMC4wNDE5IDI3LjI4NDEgMTAuMDAwMiAzNC42NzU5QzkuOTU4NDIgNDIuMDY3NyAxNS44OTQzIDQ4LjE1NzkgMjMuMjkzMyA0OC4xOTk4SDIzLjYyNzhDMzEuMDI2NyA0OC4xMTU4IDM2Ljk2MjUgNDIuMDY3OSAzNi44NzkxIDM0LjYzMzlaTTIxLjAzNjEgMzYuNDRMMjUuOTY4NiAzNi40NEMyNS43NTk1IDQxLjIyNzkgMjQuNzU2NSA0NC44Mzk5IDIzLjUwMjMgNDQuODM5OUMyMi4yNDgyIDQ0LjgzOTkgMjEuMjQ1MSA0MS4yMjc5IDIxLjAzNjEgMzYuNDRaTTIzLjUwMjMgMjQuNjgwM0MyNC43NTY1IDI0LjY4MDMgMjUuNzU5NSAyOC4zMzQyIDI1Ljk2ODYgMzMuMDgwMkgyMS4wMzYxQzIxLjI0NTIgMjguMzM0MiAyMi4yNDgyIDI0LjY4MDMgMjMuNTAyMyAyNC42ODAzWk0xNy42OTE3IDMzLjA4MDJMMTMuNjM2OSAzMy4wODAzQzE0LjA5NjcgMzAuMTQwMSAxNS44OTQxIDI3LjUzNjIgMTguNDg2IDI2LjAyNDJMMTguNzM2OCAyNS44OTgyQzE4LjY1MzEgMjYuMTkyMyAxOC41Njk3IDI2LjQ4NjIgMTguNDg2IDI2LjgyMjJDMTguMDI2MiAyOC44ODAzIDE3LjczMzQgMzAuOTgwMyAxNy42OTE3IDMzLjA4MDJaTTE4LjQ4NiA0Mi42OTgyQzE4LjU2OTcgNDMuMDM0MiAxOC42NTMxIDQzLjMyOCAxOC43MzY4IDQzLjYyMjFMMTguNzM2OCA0My42MjIyQzE3LjEwNjUgNDIuNzQwMSAxNS43MjcgNDEuNDM4MiAxNC44NDkgMzkuODAwMkMxNC4yMjIxIDM4Ljc1MDIgMTMuODQ1OSAzNy42MTYxIDEzLjYzNjkgMzYuNDQwMUgxNy42OTE3QzE3LjczMzQgMzguNTQwMSAxOC4wMjYyIDQwLjY0MDEgMTguNDg2IDQyLjY5ODJaTTI5LjMxMjggMzYuNDQwMUwzMy4zNjc2IDM2LjQ0QzMyLjkwNzggMzkuNDIyMSAzMS4xMTA0IDQxLjk4NDEgMjguNTE4NCA0My40OTYxTDI4LjI2NzcgNDMuNjIyMUMyOC4zNTE0IDQzLjMyOCAyOC40MzQ4IDQzLjAzNDEgMjguNTE4NCA0Mi42OTgxQzI4Ljk3ODMgNDAuNjQgMjkuMjcxMSAzOC41NCAyOS4zMTI4IDM2LjQ0MDFaIiBmaWxsPSIjMEUzNTNEIi8+Cjwvc3ZnPgo=",text:t(Jc.UNVERIFIED_MSG),subtext:t(Jc.UNVERIFIED_SUBTEXT)})]}),(0,E.tZ)(Ce.rUS,{sx:{textDecoration:"none",fontWeight:"lighter",marginBottom:"16px","&:hover":{textDecoration:"underline"}},color:Ce.colors.midGreen00,target:"_blank",rel:"noopener noreferrer",href:Qc,onClick:()=>{(0,y.Kz)(new u.UserOpenHelpCenterEvent({helpCenterArticleCta:u.HelpCenterArticleCta.ViewDomainVerificationGuide}))},children:t(Jc.RETURNING_USER_VIEW_DOMAIN_GUIDE_CTA)})]})},ld=({domainName:e})=>{const{translate:t}=(0,b.Z)();return(0,E.BX)(r.Fragment,{children:[(0,E.tZ)(ad,{domain:e}),(0,E.tZ)(l.Z,{size:44,sx:{alignSelf:"center"}}),(0,E.tZ)(Ce.nvN,{size:"small",color:Ce.colors.grey00,sx:{marginBottom:"3em",overflow:"hidden",width:"-webkit-fill-available"},children:t(Jc.GENERATING_INSIGHTS_MESSAGE)})]})},cd=({verifiedOrPendingDomain:e,dwiSummaryResponse:t})=>{const{translate:n}=(0,b.Z)(),a=e.status===Yl.p.valid,i=e.name;return(0,E.BX)(td,{children:[(0,E.tZ)(d.X,{as:"h5",textStyle:"ds.title.section.medium",color:"ds.text.neutral.catchy",children:n(Jc.HEADING)}),a?t?.success?(0,E.tZ)(sd,{domainName:i,domainInfo:t.data[i]}):(0,E.tZ)(ld,{domainName:i}):(0,E.tZ)(od,{domainName:i})]})},dd=n.p+"daa928a30146cfbef943.png";var _d,ud;const md={TEAM_NEW_LABEL:"team_new_label",HEADING:"team_dashboard_dark_web_insights_discovery_heading",SUBTEXT:"team_dashboard_dark_web_insights_discovery_subtext",ALTERNATE_HEADING:"team_dashboard_dark_web_insights_discovery_heading_alternate",ALTERNATE_SUBTEXT:"team_dashboard_dark_web_insights_discovery_subtext_alternate",SECURITY_INCIDENTS:{LABEL:"team_dashboard_dark_web_insights_security_incidents",TOOLTIP:"team_dashboard_dark_web_insights_security_incidents_tooltip"},EMAILS_AFFECTED:{LABEL:"team_dashboard_dark_web_insights_emails_affected",TOOLTIP:"team_dashboard_dark_web_insights_emails_affected_tooltip"},GET_STARTED_CTA:"team_dashboard_dark_web_insights_discovery_get_started_cta"},pd=()=>{const{translate:e}=(0,b.Z)(),{routes:t}=(0,Xo.Xo)(),n=(0,i.k6)(),{unseen:a}=(0,Te.m)(Ze.O.TacDarkWebInsightsNewBadge);return(0,E.tZ)(D.z,{onClick:()=>{(0,y.Kz)(new u.UserOpenDomainDarkWebMonitoringEvent({accessPath:u.AccessPath.MainDashboardButton,isFirstVisit:a})),n.push(t.teamDarkWebInsightsRoutePath)},children:e(md.GET_STARTED_CTA)},"primary")},gd=({data:e,companyName:t})=>{const{translate:n}=(0,b.Z)(),[a]=Object.keys(e),i=e[a];return(0,E.BX)(td,{children:[(0,E.tZ)(pe.C,{layout:"labelOnly",label:n(md.TEAM_NEW_LABEL),mood:"brand"}),(0,E.tZ)(d.X,{textStyle:"ds.title.section.medium",color:"ds.text.neutral.catchy",as:"h3",sx:{marginTop:"1em",width:"100%",overflow:"hidden"},children:n(md.HEADING,{companyName:t})}),(0,E.tZ)(_.n,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",children:n(md.SUBTEXT)}),(0,E.BX)("div",{sx:{backgroundColor:`${Ce.colors.dashGreen06}`,padding:"2px 14px",width:"100%",borderRadius:"10px"},children:[(0,E.tZ)(ed,{count:i.leaksCount,labelAndTooltip:md.SECURITY_INCIDENTS,primaryColor:Ce.colors.dashGreen01}),(0,E.tZ)(ed,{count:i.emailsImpactedCount,labelAndTooltip:md.EMAILS_AFFECTED,primaryColor:Ce.colors.dashGreen01})]}),_d||(_d=(0,E.tZ)(pd,{}))]})},hd=({companyName:e})=>{const{translate:t}=(0,b.Z)();return(0,E.BX)(td,{children:[(0,E.tZ)("div",{sx:{alignSelf:"end"},children:(0,E.tZ)(pe.C,{layout:"labelOnly",label:t(md.TEAM_NEW_LABEL),mood:"brand"})}),(0,E.tZ)("img",{sx:{backgroundColor:`${Ce.colors.midGreen05}`,height:"122px",width:"122px",borderRadius:"50%",backgroundImage:`url(${dd})`,backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPositionX:"60%"}}),(0,E.tZ)(d.X,{textStyle:"ds.title.section.medium",color:"ds.text.neutral.catchy",as:"h3",sx:{width:"100%"},children:t(md.ALTERNATE_HEADING,{companyName:e})}),(0,E.tZ)(_.n,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",children:t(md.ALTERNATE_SUBTEXT)}),ud||(ud=(0,E.tZ)(pd,{}))]})},yd=({dwiSummaryResponse:e})=>{var t;const{spaceDetails:n}=(0,Me.fV)(),a=null!=(t=n?.teamName)?t:"-";return e?.success?(0,E.tZ)(gd,{data:e.data,companyName:a}):(0,E.tZ)(hd,{companyName:a})};var bd,Sd,xd;const fd={seats:{pending:0,provisioned:0,used:0},passwordHealthHistory:[],passwordHealth:{compromised:0,passwords:0,reused:0,safe:0,securityIndex:0,weak:0}},vd=()=>{const{data:e,status:t}=(0,m.k)(Kl.B,"getReport"),n=t===G.rq.Success?e:fd,a=t===G.rq.Loading,{verifiedOrPendingDomain:{domain:i,status:s}}=Jl(),[o,l]=(0,r.useState)(null),c=t===G.rq.Success&&0===n.passwordHealthHistory.length,_=(0,r.useCallback)((async()=>{const e=await Le.C.getDarkWebInsightsSummary();l(e)}),[]);(0,r.useEffect)((()=>{(0,y.Nc)(u.PageView.TacDashboard),_()}),[_]);const p=(({dismissible:e})=>{const t=(0,nc.D)(),n=(0,$.C)();if(!n)return!1;const a=n.isFreeTrial;if((n.spaceTier===g.lD.Business||n.spaceTier===g.lD.BusinessPlus)&&!a)return!1;const i=t.find((e=>e.type===tc.U.DASHBOARD_UPRADE&&e.dismissedAt));return!e||!i})({dismissible:!0}),{translate:h}=(0,b.Z)();return(0,E.BX)(jo,{header:(0,E.tZ)(d.X,{as:"h1",color:"ds.text.neutral.standard",textStyle:"ds.title.section.large",children:h("dashboard_page_title")}),children:[(0,E.BX)(Ce.T5p,{fullWidth:!0,alignItems:"top",gap:"32px",gridTemplateColumns:"710px auto",gridTemplateRows:"auto auto",gridTemplateAreas:`'cards cards' '${p?"pwHealth upgrade":"pwHealth dwi"}'`,children:[(0,E.tZ)(Ce.dDn,{gridArea:"cards",children:(0,E.tZ)(Sc,{passwordHealth:n.passwordHealth,seats:n.seats,passwordHealthHistoryEmpty:c})}),(0,E.tZ)(Ce.dDn,{gridArea:"pwHealth",sx:{minHeight:"418px"},children:(0,E.tZ)(Yc,{isLoading:a,report:n,passwordHealthHistoryEmpty:c})}),p?(0,E.tZ)(Ce.dDn,{gridArea:"upgrade",sx:{width:"282px"},children:bd||(bd=(0,E.tZ)(_c,{dismissible:!0}))}):(0,E.tZ)(Ce.dDn,{gridArea:"dwi",children:s===Ql.Loading?Sd||(Sd=(0,E.tZ)(td,{})):null!==i?(0,E.tZ)(cd,{verifiedOrPendingDomain:i,dwiSummaryResponse:o}):(0,E.tZ)(yd,{dwiSummaryResponse:o})})]}),a?xd||(xd=(0,E.tZ)(ec.a,{})):null]})},Cd=({supportHeader:e,children:t})=>{const{translate:n}=(0,b.Z)();return(0,E.BX)(yn.Z,{sx:{display:"flex",gap:"8px",flexDirection:"column",background:"ds.container.agnostic.neutral.supershy"},children:[(0,E.tZ)(d.X,{as:"h2",textStyle:"ds.title.supporting.small",color:"ds.text.neutral.quiet",sx:{marginBottom:"8px"},children:null!=e?e:n("webapp_tac_infocard_title")}),t]})},Ed=({children:e,href:t,onClick:n,...a})=>(0,E.tZ)($t.Q,{href:t,onClick:n,isExternal:!0,rel:"noopener noreferrer",target:"_blank",...a,children:e});let Zd=function(e){return e[e.ExternalLink=0]="ExternalLink",e[e.InternalLink=1]="InternalLink",e}({});const kd=({heading:e,description:t,linkText:n,supportHeading:a,linkProps:i})=>(0,E.BX)(Cd,{supportHeader:a,children:[(0,E.tZ)(d.X,{as:"h3",sx:{marginBottom:"8px"},color:"ds.text.neutral.catchy",textStyle:"ds.title.block.medium",children:e}),(0,r.isValidElement)(t)?t:(0,E.tZ)(_.n,{color:"ds.text.neutral.standard",textStyle:"ds.body.standard.regular",sx:{marginBottom:n&&i.linkType===Zd.ExternalLink&&i.linkHref?"24px":0},children:t}),i.linkType===Zd.ExternalLink&&i.linkHref?(0,E.tZ)(Ed,{href:i.linkHref,children:n}):null,i.linkType===Zd.InternalLink?(0,E.tZ)($t.Q,{onClick:i.internalAction,children:n}):null]}),Dd=()=>{const{translate:e}=(0,b.Z)();return(0,E.tZ)("div",{children:(0,E.BX)(Cd,{children:[(0,E.tZ)(d.X,{as:"h3",textStyle:"ds.title.block.medium",children:e("team_breach_report_need_help")}),(0,E.tZ)(_.n,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",children:e("team_dark_web_insights_need_help_description")}),(0,E.tZ)(Ed,{href:"https://support.dashlane.com/hc/articles/5015658490514",onClick:()=>{(0,y.Kz)(new u.UserOpenHelpCenterEvent({helpCenterArticleCta:u.HelpCenterArticleCta.LearnAboutDarkWebInsights}))},children:e("team_dark_web_insights_learn_more_txt")}),(0,E.tZ)(Ed,{href:Qc,onClick:()=>{(0,y.Kz)(new u.UserOpenHelpCenterEvent({helpCenterArticleCta:u.HelpCenterArticleCta.LearnAboutDomainVerification}))},children:e("team_breach_report_learn_domain_verification_txt")})]})})};var Td=n(83849),Id=n.n(Td);const Ad=({registerDomain:e=(()=>{}),disabled:t,registrationError:n,clearRegistrationErrors:a=(()=>{}),domainLoadError:i})=>{const{translate:s}=(0,b.Z)(),[o,l]=r.useState(""),c=i?"":s("team_settings_domain_url_placeholder");return(0,E.BX)(r.Fragment,{children:[(0,E.BX)("div",{className:"domainUrlInput--VQjVVbbN2d",children:[(0,E.tZ)(Ce.oil,{value:o,placeholder:c,fullWidth:!0,feedbackText:n,feedbackType:n?"error":void 0,onChange:e=>{n&&a(),l(e.target.value)},disabled:!!i||t}),i&&(0,E.tZ)("p",{className:"domainLoadErrorText--WEJL2Ne0Pt",children:i})]}),(0,E.tZ)(Ce.zxk,{type:"button",className:Id()("domainUrlButton--lFqlfJ3Gzv",{"domainLoadError--ajAHmgDUO9":i}),disabled:t,nature:"secondary",onClick:()=>e(o),children:s("team_settings_domain_button_add")})]})};var wd=n(18402),Od=n.n(wd);const Nd=({domain:e,onConfirm:t,onDismiss:n})=>{const{translate:a}=(0,b.Z)(),[i,s]=(0,r.useState)(!1),o=(0,r.useRef)(!1);return(0,r.useEffect)((()=>()=>{o.current=!0}),[o]),(0,E.tZ)(Ei.o,{isOpen:!0,onRequestClose:n,footer:(0,E.tZ)(Ce.cNS,{primaryButtonTitle:a("team_settings_domain_deactivate_button_remove"),primaryButtonOnClick:async()=>{s(!0),await t(),o.current||(s(!1),n())},primaryButtonProps:{disabled:i},secondaryButtonTitle:a("team_settings_domain_deactivate_button_cancel"),secondaryButtonOnClick:n,intent:"primary"}),title:a("team_settings_domain_deactivate_title"),children:(0,E.tZ)("p",{children:a.markup("team_settings_domain_deactivate_description_markup",{domainUrl:e.name})})})},Rd=({domain:e,deactivateDomain:t,isDisabled:n,disabledTooltipText:a})=>{const[i,s]=(0,r.useState)(!1);return(0,E.BX)(r.Fragment,{children:[i?(0,E.tZ)(Nd,{domain:e,onConfirm:t,onDismiss:()=>s(!1)}):null,(0,E.tZ)("div",{className:"deactivateTrashcan--nLkrRLE9CS",onClick:()=>{n||s(!0)},children:(0,E.tZ)(Ce.ua7,{passThrough:!n,placement:"top",content:null!=a?a:"",sx:{maxWidth:"180px"},children:(0,E.tZ)(Ce.XHJ,{disabled:n,size:25,color:Od()["--dash-green-00"]})})})]})},Ld={CENTER_LABEL:{marginTop:"12px"}},Bd=({label:e,labelHelper:t,centerLabel:n,children:a})=>(0,E.BX)("div",{sx:{display:"flex",flexWrap:"nowrap",alignItems:"flex-start"},children:[(0,E.BX)("div",{sx:{flexGrow:"1",maxWidth:"50%",paddingRight:"40px"},children:[(0,E.tZ)(d.X,{as:"h3",textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",sx:(0,Ee.jM)([{marginBottom:"4px"},n?Ld.CENTER_LABEL:{}]),children:e}),t?(0,E.tZ)(_.n,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",children:t}):null]}),(0,E.tZ)("div",{sx:{flexGrow:"1",maxWidth:"50%",display:"flex",justifyContent:"space-between"},children:a})]});let Md=function(e){return e[e.ClaimDomain=0]="ClaimDomain",e[e.VerifyDomain=1]="VerifyDomain",e[e.SSOConnector=2]="SSOConnector",e[e.EnableSSO=3]="EnableSSO",e}({}),Pd=function(e){return e[e.SSOConnector=0]="SSOConnector",e[e.ConfigureIDP=1]="ConfigureIDP",e[e.EnableSSO=2]="EnableSSO",e}({}),Ud=function(e){return e[e.dismiss=0]="dismiss",e[e.action=1]="action",e}({});const Xd="team_settings_domain_deactivate_button_tooltip_error",zd=({currentStep:e,deactivateDomain:t,domain:n,isDisabled:a,setCurrentSteps:i,verifyDomain:s})=>{var o;const[l,c]=r.useState(!1),{translate:d}=(0,b.Z)();return(0,E.BX)("div",{className:"domainContainer--uTWD0PQykR",children:[(()=>{if(!n)return null;switch(e){case Gd.Verify:case Gd.VerifyFailed:return(0,E.BX)(r.Fragment,{children:[(0,E.tZ)(Hd,{domain:n,verifyDomain:()=>c(!0),domainStep:e}),(0,E.tZ)(Rd,{domain:n,deactivateDomain:()=>t(n),isDisabled:a,disabledTooltipText:d(Xd)})]});case Gd.Complete:return(0,E.BX)(r.Fragment,{children:[o||(o=(0,E.tZ)(Yd,{domain:n})),(0,E.tZ)(Rd,{domain:n,deactivateDomain:()=>t(n),isDisabled:a,disabledTooltipText:d(Xd)})]});default:return null}})(),(()=>{if(!n||!l)return null;switch(e){case Gd.Verify:return(0,E.tZ)(t_,{domainName:n.name,onConfirm:()=>s(n),onDismiss:()=>c(!1)});case Gd.VerifyFailed:return(0,E.tZ)(n_,{onDismiss:()=>{i((e=>({...e,[n.id]:Gd.Verify}))),c(!1)}});default:return null}})()]},n.id)},Fd="team_settings_domain_register_invalid_error",qd={INVALID_PUBLIC_DOMAIN:"team_settings_domain_register_public_error",DOMAIN_CONTAINS_EXISTING_NONTEAM_USERS:"team_settings_domain_register_contact_support"};let Gd=function(e){return e[e.Register=0]="Register",e[e.Verify=1]="Verify",e[e.VerifyFailed=2]="VerifyFailed",e[e.Complete=3]="Complete",e}({});const Vd=({isTeamSettingsLoading:e,teamSettings:t,setStepComplete:n,uncompleteSteps:a})=>{const{translate:i}=(0,b.Z)(),[s,o]=r.useState(!1),[l,c]=r.useState([]),[d,_]=r.useState(""),[u,m]=r.useState(""),[p,g]=r.useState({}),h=e=>"valid"===e.status,y=()=>l.filter((e=>h(e))),S=t?.ssoEnabled||!1,x=r.useCallback(((e=[])=>{e.forEach((e=>{switch(e.status){case Yl.p.pending:g((t=>({...t,[e.id]:Gd.Verify}))),n(Md.ClaimDomain);break;case Yl.p.valid:g((t=>({...t,[e.id]:Gd.Complete}))),n(Md.ClaimDomain),n(Md.VerifyDomain);break;default:g((t=>({...t,[e.id]:Gd.Register})))}}))}),[]),f=r.useCallback((async()=>{o(!0),m("");const e=await Le.C.getTeamDomains();return o(!1),e.success?(c(e.domains),e.domains):(m(i("team_settings_domain_fetch_error")),Promise.resolve(void 0))}),[Le.C.getTeamDomains]),v=async e=>{const t=await Le.C.completeTeamDomainRegistration();t.success&&t.domains.find((t=>t.name===e.name))&&t.domains.find((t=>t.name===e.name))?.status===Yl.p.valid?(n(Md.VerifyDomain),g((t=>({...t,[e.id]:Gd.Complete})))):g((t=>({...t,[e.id]:Gd.VerifyFailed})))},C=async e=>{e&&(await Le.C.deactivateTeamDomain({domain:e.name})).success&&(x(await f()),y().length||a([Md.EnableSSO,Md.SSOConnector,Md.ClaimDomain,Md.VerifyDomain]))};return r.useEffect((()=>{(async()=>{x(await f())})()}),[f,x]),(0,E.BX)(r.Fragment,{children:[(0,E.tZ)(Bd,{label:`1. ${i("team_settings_domain_title")}`,labelHelper:i("team_settings_domain_multi_description"),children:s||e?(0,E.tZ)(Ai.Z,{size:20,containerStyle:{alignItems:"normal"}}):(0,E.tZ)(Ad,{registerDomain:async e=>{if(l.length>=5)return;if(!(0,Wi.hS)(e))return void _(i(Fd));const t=await Le.C.registerTeamDomain({domain:e});if(t.success)x(await f());else if(!t.success){const{error:{code:e}}=t,n=qd[e];_(i(null!=n?n:Fd))}},domainLoadError:u,registrationError:d,disabled:l.length>=5,clearRegistrationErrors:()=>_("")})}),s||e||0===l.length?null:(0,E.tZ)(Bd,{label:i("team_settings_domain_added"),children:(0,E.tZ)("div",{className:"domainsContainer--eO_SBqHaFr",children:l.map(((e,t)=>t<5?(0,E.tZ)(zd,{currentStep:p[e.id],deactivateDomain:C,domain:e,isDisabled:S&&1===y().length&&h(e),setCurrentSteps:g,verifyDomain:v},e.id):null))})})]})},{orange00:jd,dashGreen02:Wd}=Ce.colors,Hd=({verifyDomain:e,domain:t,domainStep:n})=>{const{translate:a}=(0,b.Z)();return(0,E.BX)(Ce.T5p,{gap:"10px",gridTemplateColumns:"1fr auto",children:[(0,E.tZ)(Ce.oil,{value:t?t.name:"",fullWidth:!0,readOnly:!0,endAdornment:(0,E.BX)(Ce.T5p,{gridTemplateColumns:"auto auto",gap:"5px",children:[(0,E.tZ)(Ce.nvN,{size:"small",color:n===Gd.VerifyFailed?jd:Wd,children:n===Gd.VerifyFailed?a("team_settings_domain_verify_failed"):a("team_settings_domain_not_verified")}),(0,E.tZ)(Ce.enX,{color:n===Gd.VerifyFailed?jd:Wd})]}),feedbackType:n===Gd.VerifyFailed?"warning":void 0}),(0,E.tZ)(Ce.zxk,{nature:"secondary",onClick:e,type:"button",children:a("team_settings_domain_button_verify")})]})};var $d;const{accessibleValidatorGreen:Kd}=Ce.colors,Yd=({domain:e})=>(0,E.tZ)(Ce.oil,{value:e.name,endAdornment:$d||($d=(0,E.tZ)(Ce.rE2,{color:Kd})),readOnly:!0,fullWidth:!0});var Qd=n(65911);const Jd="team_settings_domain_verify_load_error",e_=({id:e,inputValue:t,labelText:n,isLoading:a})=>({id:e,label:n,readOnly:!0,disabled:a,isLoading:a,value:t}),t_=({description:e,domainVerificationError:t,isDarkWebInsights:n,secondaryDescription:a,domainName:i,href:s="https://support.dashlane.com/hc/articles/360013149040",linkLabel:o,onClick:l,onDismiss:d,onConfirm:m})=>{const{translate:p}=(0,b.Z)(),[g,h]=(0,r.useState)({id:0,name:""}),[S,x]=(0,r.useState)(""),[f,v]=(0,r.useState)(!1),[C,Z]=(0,r.useState)(!1);(0,r.useEffect)((()=>{(async()=>{v(!0);try{const e=await Le.C.getTeamDomains();if(e.success){const t=e.domains.find((e=>e.name===i));t?h(t):x(p(Jd))}}catch(e){x(p(Jd))}finally{v(!1)}})()}),[i,p]);const{dnsToken:{computedToken:k,challengeDomain:D}={computedToken:"",challengeDomain:""}}=g;return(0,E.tZ)(J.Vq,{isOpen:!0,onClose:d,closeActionLabel:p("_common_dialog_dismiss_button"),title:p("team_settings_domain_verify_title"),actions:{primary:{children:p("team_settings_domain_verify_confirm"),disabled:!!S||f||C,onClick:async()=>{Z(!0);try{await m()}catch(e){x(e.message),n&&(0,y.Kz)(new u.UserVerifyDomainEvent({domainVerificationStep:u.DomainVerificationStep.DomainVerificationError}))}finally{Z(!1),n&&(0,y.Kz)(new u.UserVerifyDomainEvent({domainVerificationStep:u.DomainVerificationStep.TapVerifyDomainCtaWithDnsInformation}))}}}},footerSlot:(0,E.tZ)($t.Q,{href:s,onClick:l,isExternal:!0,children:o||p("team_settings_domain_verify_setup")}),children:(0,E.BX)(c.k,{flexDirection:"column",gap:"32px",sx:{marginBottom:"16px"},children:[(0,E.tZ)(_.n,{children:null!=e?e:p.markup("team_settings_domain_verify_description_markup",{domainUrl:i})}),S?(0,E.tZ)(_.n,{color:"ds.text.danger.standard",children:S}):(0,E.BX)(c.k,{flexDirection:"column",gap:"16px",children:[(0,E.tZ)(Qd.x,{...e_({id:"hostnameInput",labelText:p("team_settings_domain_verify_host"),inputValue:D,isLoading:f})}),(0,E.tZ)(Qd.x,{...e_({id:"txtValueInput",labelText:p("team_settings_domain_verify_txt"),inputValue:k,isLoading:f})})]}),a?(0,E.tZ)(_.n,{color:"ds.text.neutral.standard",children:a}):null,t?(0,E.tZ)(rn.k,{title:p(t.title),description:t.description&&p(t.description),mood:"danger",size:"medium"}):null]})})},n_=({onDismiss:e,domainName:t})=>{const{translate:n}=(0,b.Z)(),a=t?n.markup("team_settings_domain_verify_failure_title_markup",{domainUrl:t}):n("team_settings_domain_verify_failure_title");return(0,E.BX)(Ce.VqE,{isOpen:!0,onClose:e,children:[(0,E.tZ)(Ce.$N8,{title:a}),(0,E.tZ)(Ce.a7O,{children:n("team_settings_domain_verify_failure_desc")}),(0,E.tZ)(Ce.cNS,{primaryButtonTitle:n("team_settings_domain_verify_failure_button"),primaryButtonOnClick:e,intent:"primary"})]})},a_=({description:e,isDarkWebInsights:t,secondaryDescription:n,domainName:a,linkLabel:i,href:s,onClick:o,onDismiss:l,onError:c,onSuccess:d})=>{const[_,u]=(0,r.useState)(!1),[m,p]=(0,r.useState)(null),g=(0,r.useRef)(!1),h=(0,r.useCallback)((async()=>{const e=await Le.C.completeTeamDomainRegistration();if(g.current)return;if(!e.success)return void u(!0);const n=e.domains.find((e=>e.name===a));return n?.status===Yl.p.valid?d():(!t&&n&&p((({pendingReason:e,status:t})=>"pending"===t&&"invalidToken"===e?{title:"sso_self_hosted_verify_domain_modal_verify_domain_error_invalid_token_title"}:"pending"===t&&"tokenNotFound"===e?{title:"sso_self_hosted_verify_domain_modal_verify_domain_error_token_not_found_title",description:"sso_self_hosted_verify_domain_modal_verify_domain_error_token_not_found_description"}:"invalid"===t?{title:"sso_self_hosted_verify_domain_modal_verify_domain_error_token_generic_error_title"}:null)(n)),c&&c()),()=>{g.current=!0}}),[a,d,c]);return _?(0,E.tZ)(n_,{onDismiss:l,domainName:a}):(0,E.tZ)(t_,{description:e,domainVerificationError:m,isDarkWebInsights:t,secondaryDescription:n,linkLabel:i,domainName:a,href:s,onConfirm:h,onDismiss:l,onClick:o})},i_={CONTAINER:{position:"relative",paddingLeft:"34px",borderLeft:"1px dashed ds.border.brand.standard.idle",paddingBottom:"16px",paddingRight:"24px",marginTop:"15px",flexBasis:"33%"},IMG:{position:"absolute",top:0,left:0,transform:"translate(-50%, -30%)"}},r_=({img:e,title:t,subtitle:n,caps:a,titleColor:i})=>(0,E.BX)("div",{sx:i_.CONTAINER,children:[(0,E.tZ)("img",{src:e,sx:i_.IMG}),(0,E.tZ)(_.n,{textStyle:"ds.title.block.medium",color:i,sx:{marginBottom:"8px",textTransform:a?"uppercase":void 0},children:t}),(0,E.tZ)(_.n,{color:"ds.text.neutral.quiet",textStyle:"ds.body.reduced.regular",children:n})]}),s_=()=>{const{translate:e}=(0,b.Z)();return(0,E.tZ)(yn.Z,{children:(0,E.BX)(c.k,{sx:{paddingLeft:"24px",borderBottomColor:"ds.border.brand.standard.idle",borderBottomStyle:"solid",borderBottomWidth:"1px"},justifyContent:"space-between",children:[(0,E.tZ)(r_,{img:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTMiIGhlaWdodD0iNTMiIHZpZXdCb3g9IjAgMCA1MyA1MyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGN4PSI1MCUiIGN5PSI1MCUiIHI9IjI1IiBzdHJva2U9IiMwMDllYWEiIGZpbGw9IiNGNkY5RkEiLz4KPHBhdGggZD0iTTI2LjEyODMgMzBIMjcuNjE2M1YyMS4zMjRIMjYuNjIwM0MyNi41NjAzIDIyLjA1IDI2LjAzODMgMjIuNDQ2IDI0LjUyMDMgMjIuNDQ2VjIzLjMxNkgyNi4xMjgzVjMwWiIgZmlsbD0iIzAwOWVhYSIgZmlsbC1vcGFjaXR5PSIwLjk1IiBzdHJva2U9IiMwMDllYWEiIHN0cm9rZS1vcGFjaXR5PSIwLjk1IiBzdHJva2Utd2lkdGg9IjAuNSIgLz4KPC9zdmc+Cg==",title:e("team_breach_report_verify_domain_stepper_title"),subtitle:e("team_dark_web_insights_stepper_verify_domain_subtitle"),titleColor:"ds.text.brand.standard"}),(0,E.tZ)(r_,{img:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTMiIGhlaWdodD0iNTMiIHZpZXdCb3g9IjAgMCA1MyA1MyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGN4PSI1MCUiIGN5PSI1MCUiIHI9IjI1IiBzdHJva2U9IiMwMDllYWEiIGZpbGw9IiNGNkY5RkEiLz4KPHBhdGggZD0iTTI0LjAwNDkgMzBIMzAuMTI0OVYyOC43NTJIMjUuNjMwOVYyOC42MjZDMjUuNjMwOSAyNi41NjIgMzAuMTA2OSAyNi44NSAzMC4xMDY5IDIzLjc1NEMzMC4xMDY5IDIyLjIzIDI4Ljk0MjkgMjEuMjA0IDI3LjA4ODkgMjEuMjA0QzI0Ljk0MDkgMjEuMjA0IDIzLjg1NDkgMjIuNDgyIDIzLjgzMDkgMjQuMDY2SDI1LjI0NjlDMjUuMzYwOSAyMy4wMjggMjYuMDUwOSAyMi40NCAyNy4wNDY5IDIyLjQ0QzI3Ljk4MjkgMjIuNDQgMjguNTcwOSAyMi45OCAyOC41NzA5IDIzLjc2QzI4LjU3MDkgMjUuODYgMjQuMDA0OSAyNS43MjIgMjQuMDA0OSAyOC44MThWMzBaIiBmaWxsPSIjMDA5ZWFhIiBmaWxsLW9wYWNpdHk9IjAuOTUiIHN0cm9rZT0iIzAwOWVhYSIgc3Ryb2tlLW9wYWNpdHk9IjAuOTUiIHN0cm9rZS13aWR0aD0iMC41Ii8+Cjwvc3ZnPgo=",title:e("team_dark_web_insights_view_insights_stepper_title"),subtitle:e("team_dark_web_insights_view_insights_stepper_subtitle")}),(0,E.tZ)(r_,{img:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTQiIGhlaWdodD0iNTMiIHZpZXdCb3g9IjAgMCA1NCA1MyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGN4PSI1MCUiIGN5PSI1MCUiIHI9IjI1IiBzdHJva2U9IiMwMDllYWEiIGZpbGw9IiNGNkY5RkEiLz4KPHBhdGggZD0iTTIzLjczMzUgMjMuOTI4SDI1LjE0OTVDMjUuMjAzNSAyMi44MDYgMjYuMDAxNSAyMi4zNjggMjYuODc3NSAyMi4zNjhDMjcuOTA5NSAyMi4zNjggMjguNTYzNSAyMi44NzggMjguNTYzNSAyMy41NUMyOC41NjM1IDI0LjI4MiAyNy44NDM1IDI0Ljg1MiAyNi44MTc1IDI0Ljg4MkwyNi4wNzM1IDI0LjkxMlYyNi4xTDI2Ljg3NzUgMjYuMTI0QzI3Ljk2MzUgMjYuMTQ4IDI4Ljc3OTUgMjYuNjUyIDI4Ljc3OTUgMjcuNTM0QzI4Ljc3OTUgMjguMzU2IDI4LjA1MzUgMjguOTI2IDI2Ljg4MzUgMjguOTI2QzI1Ljk0MTUgMjguOTI2IDI1LjI0NTUgMjguNDM0IDI1LjA3NzUgMjcuNDAySDIzLjY1NTVDMjMuNjkxNSAyOS4wODIgMjQuOTAzNSAzMC4xMiAyNi44NTM1IDMwLjEzMkMyOC44MDk1IDMwLjE0NCAzMC4zNDU1IDI5LjIyIDMwLjM0NTUgMjcuNTdDMzAuMzQ1NSAyNi40MTggMjkuNTUzNSAyNS43MTYgMjguNTA5NSAyNS40MjhDMjkuNjI1NSAyNS4wNDQgMzAuMTI5NSAyNC4zNDggMzAuMTI5NSAyMy40OUMzMC4xMjk1IDIxLjk3MiAyOC43NzM1IDIxLjIwNCAyNi44OTU1IDIxLjIwNEMyNS4xNDM1IDIxLjIwNCAyMy43MzM1IDIyLjE0NiAyMy43MzM1IDIzLjkyOFoiIGZpbGw9IiMwMDllYWEiIGZpbGwtb3BhY2l0eT0iMC45NSIgIHN0cm9rZT0iIzAwOWVhYSIgc3Ryb2tlLW9wYWNpdHk9IjAuOTUiIHN0cm9rZS13aWR0aD0iMC41Ii8+Cjwvc3ZnPgo=",title:e("team_breach_report_reduce_risk_title"),subtitle:e("team_breach_report_reduce_risk_subtitle")})]})})};var o_;const l_="team_breach_report_domain_register_invalid_error",c_={INVALID_PUBLIC_DOMAIN:"team_settings_domain_register_public_error",DOMAIN_CONTAINS_EXISTING_NONTEAM_USERS:"team_settings_domain_register_contact_support",DOMAIN_ALREADY_EXISTS:"team_settings_domain_register_duplicated_error"},d_=({onSuccess:e,onError:t})=>{const{translate:n}=(0,b.Z)(),a=(0,Q.f)(),{openDialog:i,shouldShowFrozenStateDialog:s}=(0,L.Ub)(),[o,l]=(0,r.useState)(""),[m,p]=(0,r.useState)(""),[g,h]=(0,r.useState)(!1),[S,x]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{if(void 0!==a){const e=a.substring(a.lastIndexOf("@")+1);l(e)}}),[a]),(0,E.BX)(r.Fragment,{children:[o_||(o_=(0,E.tZ)(s_,{})),(0,E.BX)("div",{children:[(0,E.BX)(yn.Z,{sx:{margin:"24px 0"},children:[(0,E.tZ)(d.X,{as:"h2",children:n("team_dark_web_insights_verify_domain_title")}),(0,E.tZ)(_.n,{sx:{marginBottom:"20px",marginTop:"10px"},children:n("team_breach_report_verify_domain_description")}),(0,E.BX)(c.k,{gap:"16px",alignItems:"center",children:[(0,E.tZ)("div",{sx:{width:"75%"},children:(0,E.tZ)(Tn.n,{label:n("team_breach_report_domain_label"),labelPersists:!1,onChange:e=>{l(e.target.value),p("")},value:o,autoFocus:!0,error:""!==m,feedback:m||void 0,sx:{flex:1}})}),(0,E.tZ)(T.JO,{name:"FeedbackSuccessOutlined",size:"large",color:"ds.border.positive.standard.active",sx:{visibility:m||""===o||!(0,Wi.hS)(o)?"hidden":void 0}}),(0,E.tZ)("div",{sx:{width:"20%"},children:(0,E.tZ)(D.z,{type:"button",disabled:""===o||S,onClick:()=>{(async e=>{if((0,y.Kz)(new u.UserVerifyDomainEvent({domainVerificationStep:u.DomainVerificationStep.TapContinueCtaWithDomainUrl})),s)return void i();if(!(0,Wi.hS)(e))return void p(n(l_));x(!0);const t=await Le.C.registerTeamDomain({domain:e});if(x(!1),t.success)return p(""),void h(!0);if(!t.success){const{error:{code:e}}=t,a=c_[e];p(n(null!=a?a:l_))}})(o),(0,y.Kz)(new u.UserVerifyDomainEvent({domainVerificationStep:u.DomainVerificationStep.TapContinueCtaWithDomainUrl}))},children:n("team_dwi_verify_domain_button")})})]})]}),g?(0,E.tZ)(a_,{description:n.markup("breach_report_verify_domain_dialog_description_markup"),secondaryDescription:n("breach_report_verify_domain_dialog_secondary_description"),linkLabel:n("breach_report_verify_domain_href_label"),href:Qc,onClick:()=>{(0,y.Kz)(new u.UserOpenHelpCenterEvent({helpCenterArticleCta:u.HelpCenterArticleCta.ViewDomainVerificationGuide}))},domainName:o,onSuccess:()=>{e(o)},isDarkWebInsights:!0,onError:t,onDismiss:t}):null]})]})};async function __(e,t,n=0){const a=await Le.C.getDarkWebInsightsReportResults({domain:e,offset:n,count:t});if(a?.success)return a.data;throw new Error("[fetchDarkWebInsightsResults] - Server Error: Unable to load dark web insight report results data")}var u_;const m_=({domainName:e})=>{const{translate:t}=(0,b.Z)();return(0,E.BX)(yn.Z,{sx:{minHeight:"575px",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:"32px"},children:[u_||(u_=(0,E.tZ)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTEzIiBoZWlnaHQ9IjExMyIgdmlld0JveD0iMCAwIDExMyAxMTMiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHg9IjAuNSIgd2lkdGg9IjExMiIgaGVpZ2h0PSIxMTMiIHJ4PSI1NiIgZmlsbD0iI0Y1RjdGNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTUwLjAzMzggMjYuNTYyMkM0MC45NzkgMjcuNjk4NiAzNC41NiAzNS45NjAyIDM1LjY5NjQgNDUuMDE1TDM2LjY0OTUgNTIuNjA4NUwzMS45OTUyIDUzLjE5MjZDMzAuODk5MiA1My4zMzAyIDMwLjEyMjMgNTQuMzMwMSAzMC4yNTk4IDU1LjQyNjFMMzQuNTYyMSA4OS43MDVDMzQuNjk5NyA5MC44MDEgMzUuNjk5NyA5MS41Nzc5IDM2Ljc5NTYgOTEuNDQwNEw3OS4wNDI4IDg2LjEzOEM4MC4xMzg4IDg2LjAwMDQgODAuOTE1NyA4NS4wMDA1IDgwLjc3ODIgODMuOTA0NUw3Ni40NzU5IDQ5LjYyNTZDNzYuMzM4MyA0OC41Mjk2IDc1LjMzODQgNDcuNzUyNyA3NC4yNDI0IDQ3Ljg5MDJMNjkuNDM5NiA0OC40OTNMNjguNDg2NiA0MC44OTk1QzY3LjM1MDEgMzEuODQ0OCA1OS4wODg1IDI1LjQyNTcgNTAuMDMzOCAyNi41NjIyWk00MC43NDk5IDQ0LjQ2OTlMNDEuNjkxOSA1MS45NzU2TDY0LjM5MjggNDkuMTI2NUw2My40NTA3IDQxLjYyMDhDNjIuNjY0IDM1LjM1MjEgNTYuOTQ0NCAzMC45MDgxIDUwLjY3NTcgMzEuNjk0OUM0NC40MDcxIDMyLjQ4MTcgMzkuOTYzMSAzOC4yMDEyIDQwLjc0OTkgNDQuNDY5OVpNNzguMTg0MiAzMi4yODA4TDc0LjE0ODUgMzYuNDAzNkw3NS43NCAzNy45NjE2TDc5Ljc3NTggMzMuODM4OEw3OC4xODQyIDMyLjI4MDhaTTc3LjI0NzEgNDAuMDg4Mkw3OS45MzA0IDM5LjUxNDhMODAuMjkzMiA0MS4yMTI1TDc3LjYwOTkgNDEuNzg1OUw3Ny4yNDcxIDQwLjA4ODJaTTcxLjA0MTMgMzEuODczOEw3MC44ODg3IDM1Ljg0ODRMNzIuNzg0MiAzNS45MjEyTDcyLjkzNjggMzEuOTQ2Nkw3MS4wNDEzIDMxLjg3MzhaIiBmaWxsPSIjOUZBRUIxIi8+Cjwvc3ZnPgo="})),(0,E.tZ)(_.n,{textStyle:"ds.title.block.medium",children:t("team_dashboard_dark_web_insights_domain_incident_free_title",{domainName:e})}),(0,E.tZ)(_.n,{color:"ds.text.neutral.quiet",children:t("team_dwi_domain_incident_free_description")})]})};var p_,g_,h_,y_;const b_={minHeight:"575px",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},S_=()=>{const{translate:e}=(0,b.Z)();return(0,E.BX)(yn.Z,{sx:b_,children:[p_||(p_=(0,E.tZ)(l.Z,{size:88})),g_||(g_=(0,E.tZ)("br",{})),(0,E.tZ)(Ce.nvN,{color:Ce.colors.grey00,children:e("team_dark_web_insights_scanning_incidents_txt")})]})},x_=()=>{const{translate:e}=(0,b.Z)();return(0,E.BX)(yn.Z,{sx:b_,children:[h_||(h_=(0,E.tZ)(l.Z,{size:88})),y_||(y_=(0,E.tZ)("br",{})),(0,E.tZ)(Ce.nvN,{color:Ce.colors.grey00,children:e("team_dashboard_dark_web_insights_generating_msg")})]})},f_=e=>e.filter((({status:e})=>"removed"!==e)).length;var v_=n(91578),C_=n(16396),E_=n(91032),Z_=n(64467),k_=n(3090);const D_=()=>{const e=(0,$.C)();return e?.spaceTier===g.lD.Standard};var T_;const I_=["text/*",".csv",".txt"],A_="invite_user_dialog_button",w_="invite_user_dialog_title",O_="_common_dialog_dismiss_button",N_="team_invite_dialog_import_example_text",R_="team_invite_dialog_input_counter",L_="team_invite_dialog_input_counter_negative",B_="team_invite_dialog_input_counter_negative_tax",M_="team_invite_dialog_input_counter_negative_vat",P_="team_invite_dialog_input_counter_special",U_="team_invite_dialog_import_description",X_="invite_user_dialog_input_label",z_="team_invite_dialog_input_label_sending",F_="team_invite_dialog_input_placeholder",q_="team_invite_dialog_invitations_counter",G_="team_members_invite_success_message_with_count",V_="team_members_invite_success_message_with_added_seats",j_="team_members_invite_success_message_with_added_seats_one_invite",W_="team_members_invite_error_message",H_="_common_generic_error",$_="team_account_teamplan_upgrade_premium_buy_more_seats_than_cap",K_="team_dialog_starter_limit_warning",Y_="team_dialog_starter_change_plan",Q_="team_dialog_standard_limit_warning",J_="team_members_invite_error_payment_failed_card_declined",eu="team_account_teamplan_hint_cannot_add_seats",tu="team_members_invite_error_message_no_free_slot",nu="team_invite_result_dialog_refused_member_reason_no_free_slot_free_plan",au=({lee:e,isFreeTrial:t,isOpen:n,slotsTaken:a,slotsTotal:c,exclude:d,preFilledEmails:m,closeInviteDialog:p,handleInviteCompleteSuccess:g,handleInvitePartialSuccess:h,setShowActivationDialog:S})=>{const{routes:x}=(0,i.Xo)(),{translate:f}=(0,b.Z)(),{showToast:v}=(0,o.p)(),{reportTACError:C}=se(),{proposeMembers:Z}=(0,te.u)(Fa.L),k=(0,Xe.Y)(),{billingDetails:D,amountToPay:T,amountToTax:I,onSeatCountChange:A}=Hi(null),[N,R]=(0,r.useState)(!1),[L,B]=(0,r.useState)(!1),[M,P]=(0,r.useState)(null!=m?m:new Set([])),[U,X]=(0,r.useState)(0),[z,F]=(0,r.useState)(0),[q,G]=(0,r.useState)(0),[V,j]=(0,r.useState)(0),[W,H]=(0,r.useState)(!1),$=D_();(0,r.useEffect)((()=>{B(N)}),[N]),(0,r.useEffect)((()=>{P(null!=m?m:new Set([]))}),[m]),(0,r.useEffect)((()=>{M.size||G(0)}),[M]);const K=()=>{p(),R(!1),X(0),F(0)},Y=async(t,n)=>{var a;n=null!=(a=n)?a:0,F(t.length),R(!0);const i=n+Math.min(t.length-n,500),r=t.slice(n,i),s={};try{const n=await(async t=>{if(!(0,cs.v0)(e.globalState)){const e=new Error(ls.N);throw C(e),e}if(!e.apiMiddleware.teamPlans)throw new Error("we want to remove this middleware but we can't just yet!");const n=await Z({proposedMemberLogins:t,force:!0});if((0,ne.hx)(n)){const e=function(e){switch(e){case C_.$0.NoFreeSlot:return tu;case C_.$0.NoFreeSlotFreePlan:return nu;case C_.$0.PaymentFailed:return J_;case C_.$0.CannotAddSeatDuringGracePeriod:return eu;case C_.$0.UnsupportedPaymentMean:return J_;case C_.$0.CannotProposeMemberAbove10:return K_;default:return W_}}(n.error.tag);throw v({description:f(e),closeActionLabel:f(O_),mood:"danger"}),new Error}return n.data})(r);if(X(i),(0,O.merge)(s,n),i<t.length)return Y(t,i);if((0,k_.e)(s)){h(s.proposedMembers,s.refusedMembers);const e=Object.keys(s.proposedMembers).length,t=Object.keys(s.refusedMembers).length;(0,y.Kz)(new u.UserSendManualInviteEvent({flowStep:u.FlowStep.Complete,inviteCount:e,inviteFailedCount:t,inviteResentCount:0,inviteSuccessfulCount:e-t,isImport:q>0,importSize:q,isResend:!1}))}else g(t),V<0?1===M.size?v({description:f(j_,{cost:f.price(D.currency,(T+I)/100)}),closeActionLabel:f(O_),mood:"brand"}):v({description:f(V_,{total:M.size,count:-V,cost:f.price(D.currency,(T+I)/100)}),closeActionLabel:f(O_),mood:"brand"}):v({description:f(G_,{count:M.size}),closeActionLabel:f(O_),mood:"brand"}),(0,y.Kz)(new u.UserSendManualInviteEvent({flowStep:u.FlowStep.Complete,inviteCount:t.length,inviteFailedCount:0,inviteResentCount:0,inviteSuccessfulCount:t.length,isImport:q>0,importSize:q,isResend:!1}));return K()}catch(e){throw(0,y.Kz)(new u.UserSendManualInviteEvent({flowStep:u.FlowStep.Error,inviteCount:M.size,inviteFailedCount:M.size,inviteResentCount:0,inviteSuccessfulCount:0,isImport:q>0,importSize:q,isResend:!1})),K(),e}},Q=e=>function(e){if(function(e){const t=e.match(/[\x00-\x09\x0e-\x1F]/g);return!!t&&t.length/e.length>.03}(e))return[];if(!e.includes("@"))return[e];return function(e){const t={};return e.forEach((e=>t[e]=!0)),Object.keys(t)}(e.match(/[^<> ,;:\t\n\r"']+@[a-zA-Z0-9_.-]+/g)||[])}(e).filter((e=>!M.has(e))),ee=e=>(0,Hn.vV)(e)&&!(e=>!!d?.includes(e))(e),ae=e=>{G(e.length),P(new Set([...M,...e]))},ie=e=>{C(e)},re=[...M].filter((e=>!ee(e))).length;let oe=0===M.size||re>0||V<0&&Ti(-V)||W;(0,r.useEffect)((()=>{if(c){const e=c-(M.size-re)-a;j(e),e<0?(A(-e),(k.status===s.rq.Success&&(0,Ue.f1)(k.data)||$)&&H(!0)):H(!1)}}),[M,k,c,a]);const{loading:le,billingCountry:ce}=w();if(le)return T_||(T_=(0,E.tZ)(l.Z,{}));const de="US"===ce?B_:M_,_e=f($?Q_:K_);return(0,E.BX)(J.Vq,{isOpen:n,title:f(w_),closeActionLabel:f(O_),onClose:()=>{N||((0,y.Kz)(new u.UserSendManualInviteEvent({flowStep:u.FlowStep.Cancel,inviteCount:M.size,inviteFailedCount:0,inviteResentCount:0,inviteSuccessfulCount:0,isImport:q>0,importSize:q,isResend:!1})),K(),P(new Set([])))},"aria-describedby":"dialogContent",actions:{primary:{children:f(A_),onClick:async()=>{try{await Y([...M]),S(!0)}catch(e){(0,y.Kz)(new u.UserSendManualInviteEvent({flowStep:u.FlowStep.Error,inviteCount:M.size,inviteFailedCount:M.size,inviteResentCount:0,inviteSuccessfulCount:0,isImport:q>0,importSize:q,isResend:!1})),v({description:f(H_),closeActionLabel:f(O_),mood:"danger"})}P(new Set([]))},disabled:oe,layout:"iconLeading",icon:"ItemEmailOutlined"}},children:[(0,E.BX)("div",{sx:{display:"flex",flexDirection:"column",overflowY:"auto",gap:"8px",marginBottom:"16px"},children:[(0,E.tZ)(_.n,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",children:f(N?z_:X_)}),(0,E.tZ)(E_.Z,{accept:I_,passClicksThrough:!0,onChange:e=>{ae(Q(e.join("\0")))},onError:ie,children:(0,E.tZ)(Z_.L,{setIsOverlayVisible:B,placeholder:f(F_),tags:[...M],isOverlayVisible:L,setTags:e=>{P(new Set(e))},formatToTags:Q,validate:ee},"tags")}),W?(0,E.tZ)(rn.k,{title:(0,E.BX)(r.Fragment,{children:[(0,E.tZ)(_.n,{textStyle:"ds.title.block.small",children:_e}),(0,E.tZ)(i.rU,{to:x.teamAccountChangePlanRoutePath,children:f(Y_)})]}),mood:"brand",icon:"FeedbackSuccessOutlined"}):(()=>{if(!c)return null;const e=V<0?Ti(-V)?f($_,{seatCap:Zi,salesEmail:ki}):I?f(de,{count:-V,total:c,cost:f.price(D.currency,(T+I)/100)}):f(L_,{count:-V,total:c,cost:f.price(D.currency,T/100)}):f(R_,{count:V,total:c}),n=f(P_,{total:c});let a=e;return t&&V<1&&(oe=V<0||oe,a=n),(0,E.tZ)(_.n,{color:V<1?"ds.text.danger.quiet":"ds.text.positive.quiet",textStyle:"ds.body.reduced.regular",sx:{display:N?"none":"flex"},children:a})})()]}),(0,E.BX)("div",{sx:{display:"flex",flexDirection:"column"},children:[(0,E.tZ)(_.n,{color:"ds.text.positive.quiet",textStyle:"ds.body.reduced.regular",sx:{display:N?"flex":"none"},children:f(q_,{count:U,total:z})}),(0,E.tZ)("div",{sx:{display:N?"none":"flex"},children:(0,E.tZ)(E_.Z,{accept:I_,onChange:e=>{ae(Q(e.join("\0")))},onError:ie,children:(0,E.tZ)(_.n,{as:"span",textStyle:"ds.title.section.medium",color:"ds.text.brand.quiet",sx:{cursor:"pointer"},children:f(U_)})})}),(0,E.tZ)(_.n,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.quiet",sx:{display:N?"none":"flex"},children:f(N_)})]})]})};var iu=n(33392);const ru={INVITE_RESTRICTED:"team_invite_result_dialog_refused_member_reason_admin_restricted_markup",PRE_EXISTING_MP_USER:"team_invite_result_dialog_refused_member_reason_pre_existing_mp_user_markup",GENERIC_ERROR:"team_invite_result_dialog_refused_member_reason_generic_error_markup",EMAIL_DOES_NOT_MATCH_SSO_DOMAIN:"team_invite_result_dialog_refused_member_reason_EMAIL_DOES_NOT_MATCH_SSO_DOMAIN",ALREADY_MEMBER:"team_invite_result_dialog_refused_member_reason_already_member",ALREADY_MEMBER_OTHER_TEAM:"team_invite_result_dialog_refused_member_reason_already_member_other_team",HAS_AUTOMATIC_RENEW:"team_invite_result_dialog_refused_member_reason_has_automatic_renew",NO_FREE_SLOT_FREE_PLAN:"team_invite_result_dialog_refused_member_reason_no_free_slot_free_plan",SSO_ALREADY_ACTIVATED:"team_invite_result_dialog_refused_member_reason_sso_already_activated",PENDING_DEACTIVATION_DOMAIN_DOES_NOT_MATCH:"team_invite_result_dialog_refused_member_reason_pending_deactivation_domain_does_not_match"};let su=function(e){return e.SSO_ALREADY_ACTIVATED="sso_already_activated",e.USER_HAS_MASTER_PASSWORD="USER_HAS_MASTER_PASSWORD",e}({});const ou=e=>{switch(e){case ru.INVITE_RESTRICTED:return iu.Iu.markup(ru.INVITE_RESTRICTED,{helpCenter:me.Iw});case ru.PRE_EXISTING_MP_USER:return iu.Iu.markup(ru.PRE_EXISTING_MP_USER,{ssoLimitations:me.Iw,dashlaneSupport:me.Bw});default:return iu.Iu.markup(ru.GENERIC_ERROR,{helpCenter:me.Bw})}},lu="inviteResultDialogHeader--v_8lOJQXCj",cu="refusedMember--SNbCU5FzB1",du="reason--jFHJ7kk1d9",_u="irDialogIcon--Rx0OQmu57r";var uu;const mu={invitedMembers:{},refusedMembers:{},show:!1},pu=()=>{const[e,t]=r.useState(mu);return{invitePartialSuccessState:e,setInvitePartialSuccessState:t,handleInvitationResultClosed:()=>{t(mu)}}},gu=({teamId:e,isOpen:t,invitedMembers:n,refusedMembers:a,onClose:i})=>{const{translate:s}=(0,b.Z)(),[o,l]=r.useState([]),[c,d]=r.useState([]),_=Object.keys(n).length,u=Object.keys(a).length,{teamSettings:m,teamSettingsLoading:p}=Be(e),g=m?.ssoEnabled;return r.useEffect((()=>{if(p)return;const e=[],t=[];Object.keys(a).forEach((n=>{const i=a[n];i!==su.SSO_ALREADY_ACTIVATED||g?i===su.USER_HAS_MASTER_PASSWORD&&g?t.push({email:n,key:ru.PRE_EXISTING_MP_USER,errorType:i}):e.push({email:n,errorType:i}):t.push({email:n,key:ru.INVITE_RESTRICTED,errorType:i})})),l(e),d(t)}),[p,g,a]),(0,E.BX)(Ce.VqE,{closeIconName:s("_common_dialog_dismiss_button"),isOpen:t,onClose:i,ariaDescribedby:"refusedList",children:[(0,E.tZ)(Ce.$N8,{title:s("team_invite_result_dialog_title")}),(0,E.tZ)(Ce.a7O,{children:p?uu||(uu=(0,E.tZ)(Ai.Z,{size:30})):(0,E.BX)(r.Fragment,{children:[_?(0,E.BX)("div",{className:"successfulInvitesRatio--Jbd0Eax7op",children:[(0,E.tZ)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCAxOCAxOCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNNiA5TDcuOTU5MjggMTFMMTEuOTc5NiA3TTAuNSA5QzAuNSA0LjMwNTQ1IDQuMzA2MyAwLjUgOSAwLjVDMTMuNjkzNyAwLjUgMTcuNSA0LjMwNTQ1IDE3LjUgOUMxNy41IDEzLjY5NDYgMTMuNjkzNyAxNy41IDkgMTcuNUM0LjMwNjMgMTcuNSAwLjUgMTMuNjk0NiAwLjUgOVoiIHN0cm9rZT0iIzIwQjQyMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+Cjwvc3ZnPgo=",className:_u}),(0,E.tZ)("span",{className:lu,children:s("team_invite_result_dialog_successful_invites_rate",{proposedMembers:_+u,invitedMembers:_})})]}):null,(0,E.BX)("div",{className:"refusedMemberListTitle--Omq1aAlxkx",children:[(0,E.tZ)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCAxOCAxOCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNNS41IDEyLjVMMTIuNSA1LjVNMTIuNSAxMi41TDUuNSA1LjVNMC41IDlDMC41IDQuMzA1ODcgNC4zMDU4NyAwLjUgOSAwLjVDMTMuNjk0MSAwLjUgMTcuNSA0LjMwNTg3IDE3LjUgOUMxNy41IDEzLjY5NDEgMTMuNjk0MSAxNy41IDkgMTcuNUM0LjMwNTg3IDE3LjUgMC41IDEzLjY5NDEgMC41IDlaIiBzdHJva2U9IiNGRjAwMkQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPgo8L3N2Zz4K",className:_u}),(0,E.tZ)("span",{id:"refusedList",className:lu,children:s("team_invite_result_dialog_refused_member_list_title",{count:u})})]}),(0,E.BX)("ul",{className:"refusedMemberList--pPxtCXVRX3",children:[o.map((e=>(0,E.BX)("li",{className:cu,children:[e.email,(0,E.BX)("span",{className:du,children:[": ",ru[e.errorType.toUpperCase()]?s(ru[e.errorType.toUpperCase()]):s.markup(ru.GENERIC_ERROR,{helpCenter:me.Bw},{linkTarget:"_blank"})]})]},e.email))),c.map((e=>(0,E.BX)("li",{className:cu,children:[e.email,(0,E.BX)("span",{className:du,children:[": ",ou(e.key)]})]},e.email)))]})]})}),(0,E.tZ)(Ce.cNS,{primaryButtonTitle:s("team_invite_result_dialog_button_ok"),primaryButtonOnClick:i,secondaryButtonTitle:s("team_invite_result_dialog_button_help_center"),secondaryButtonOnClick:()=>(0,W.Yo)(me.Bw)})]})};var hu=n(70141);function yu(){const[e,t]=(0,r.useState)(!0),[n,a]=(0,r.useState)(null),[i,s]=(0,r.useState)(null),[o,l]=(0,r.useState)(null),c=(0,r.useCallback)((async(e,t)=>{try{const n=await Le.C.requestInviteLinkToken({teamUuid:e,login:t});if(n.success)return n.data;l(n.error.code)}catch{l(hu.S)}return null}),[]);return{inviteLinkDataLoading:e,inviteLinkError:o,inviteLinkData:n,inviteLinkDataForAdmin:i,getInviteLinkData:(0,r.useCallback)((async e=>{t(!0);try{const t=await Le.C.getInviteLink({teamKey:e});if(t.success)return a(t.data),t.data;l(t.error.code)}catch{l(hu.S)}finally{t(!1)}return null}),[]),requestInviteLinkToken:c,getInviteLinkDataForAdmin:(0,r.useCallback)((async()=>{t(!0);try{const e=await Le.C.getInviteLinkForAdmin({});if(e.success)return s(e.data),e.data;l(e.error.code)}catch{l(hu.S)}finally{t(!1)}return null}),[]),createInviteLink:(0,r.useCallback)((async e=>{t(!0);try{const t=await Le.C.createInviteLink({displayName:e});if(t.success)return t.data;l(t.error.code)}catch{l(hu.S)}finally{t(!1)}return null}),[]),changeInviteLinkTeamKey:(0,r.useCallback)((async()=>{t(!0);try{const e=await Le.C.changeInviteLinkTeamKey({});if(e.success)return e.data;l(e.error.code)}catch{l(hu.S)}finally{t(!1)}return null}),[]),toggleInviteLink:(0,r.useCallback)((async e=>{t(!0);try{const t=await Le.C.toggleInviteLink({disabled:e});if(t.success)return t.data;l(t.error.code)}catch{l(hu.S)}finally{t(!1)}return null}),[])}}const bu="_common_toast_close_label",Su=({showActivationDialog:e,setShowActivationDialog:t,setShowSharingDialog:n})=>{const{toggleInviteLink:a,createInviteLink:i,getInviteLinkDataForAdmin:r}=yu(),{setAsInteracted:s}=(0,Te.d)(Ze.O.ActivateInviteLink),{translate:l}=(0,b.Z)(),{showToast:c}=(0,o.p)(),d=xr();return d?(0,E.tZ)(J.Vq,{title:l("team_activation_dialog_title"),closeActionLabel:l("_common_dialog_dismiss_button"),isOpen:e,onClose:()=>t(!1),actions:{primary:{children:l("team_activation_dialog_activate_button"),onClick:async()=>{s?.(),t(!1);const e=await r();e?.teamKey?await a(!1):(await i(d),c({description:l("team_activation_dialog_notification"),mood:"brand",closeActionLabel:l(bu)})),n(!0)}},secondary:{children:l("team_activation_dialog_notrightnow_button"),onClick:()=>{s?.(),t(!1),c({description:l("team_activation_dialog_cancel_notification"),mood:"brand",closeActionLabel:l(bu)})}}},children:(0,E.tZ)(_.n,{sx:{marginBottom:"15px"},children:l("team_activation_dialog_paragrah")})}):null};var xu=n(33090);const fu=({showSharingDialog:e,setShowSharingDialog:t})=>{const{translate:n}=(0,b.Z)(),{inviteLinkDataForAdmin:a,getInviteLinkDataForAdmin:i}=yu(),s=(0,ca.V)();return(0,r.useEffect)((()=>{i()}),[i]),(0,E.BX)(Ce.VqE,{closeIconName:n("_common_dialog_dismiss_button"),isOpen:e,onClose:()=>t(!1),children:[(0,E.tZ)(Ce.$N8,{title:n("team_sharing_invite_dialog_title")}),(0,E.BX)(Ce.a7O,{children:[(0,E.tZ)(Ce.nvN,{sx:{marginBottom:"15px"},color:Ce.colors.dashGreen01,children:n("team_sharing_invite_dialog_paragrah")}),(0,E.tZ)(Ce.nvN,{sx:{marginBottom:"15px",fontWeight:"600"},color:Ce.colors.dashGreen01,children:(0,me.cI)(a?.teamKey)})]}),(0,E.tZ)(Ce.cNS,{children:(0,E.tZ)(xu.q,{copyValue:(0,me.cI)(a?.teamKey),buttonText:n("team_sharing_invite_dialog_copy_link"),onClick:()=>{navigator.clipboard.writeText((0,me.cI)(a?.teamKey)),s.showAlert(n("team_sharing_invite_dialog_copied_notification"),Ce.BLW.SUCCESS)}})})]})};var vu=n(35214);const Cu=()=>{const{data:e,status:t}=(0,m.k)(vu.t,"inviteLinkData"),{data:n,status:a}=(0,m.k)(p.o,"getTeamName"),{data:i,status:r}=(0,m.k)(p.o,"getTeamId"),{requestUserInviteTokenSending:s}=(0,te.u)(vu.t),{toggleInviteLink:o}=(0,te.u)(vu.t);if(t===G.rq.Error||a===G.rq.Error||r===G.rq.Error||null===i?.teamId||null===e)return{status:G.rq.Error};if(t===G.rq.Loading||a===G.rq.Loading||r===G.rq.Loading)return{status:G.rq.Loading};const l=i.teamId;return{status:t,teamKey:e.teamKey,enabled:e.enabled,sendRequestInviteToken:async e=>{try{await s({login:e,teamUuid:l})}catch(e){throw new Error(`sendRequestInviteToken fetchData: failed with error: ${e}`)}},sendToggleInviteLink:async e=>{try{await o({enabled:e,teamName:n})}catch(e){throw new Error(`sendToggleInviteLink fetchData: failed with error: ${e}`)}}}},Eu="_common_toast_close_label",Zu=({isOpen:e,onCancel:t,onInviteLinkActivation:n})=>{const{translate:a}=(0,b.Z)(),{showToast:i}=(0,o.p)(),r=Cu(),{setAsInteracted:s}=(0,Te.d)(Ze.O.ActivateInviteLink);return r.status!==G.rq.Success?null:(0,E.tZ)(J.Vq,{isOpen:e,onClose:t,closeActionLabel:a("_common_dialog_dismiss_button"),title:a("team_activation_dialog_title"),actions:{primary:{children:a("team_activation_dialog_activate_button"),onClick:async()=>{await r.sendToggleInviteLink(!0),n&&n(),i({mood:"brand",description:a("team_activation_dialog_notification"),closeActionLabel:a(Eu)}),s?.()}},secondary:{children:a("team_activation_dialog_notrightnow_button"),onClick:()=>{t(),i({mood:"brand",description:a("team_activation_dialog_cancel_notification"),closeActionLabel:a(Eu)}),s?.()}}},children:(0,E.tZ)(_.n,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",children:a("team_activation_dialog_paragrah")})})};var ku;const Du="team_sharing_invite_dialog_copy_link",Tu="_common_dialog_dismiss_button",Iu=({isOpen:e,onClose:t})=>{const{translate:n}=(0,b.Z)(),{showToast:a}=(0,o.p)(),i=Cu(),r=i.status===G.rq.Success?i.teamKey:void 0,s=(0,me.cI)(r),c=async()=>{r&&(await navigator.clipboard.writeText(s),a({mood:"brand",description:n("team_sharing_invite_dialog_copied_notification"),closeActionLabel:n(Tu)}))};return(0,E.BX)(J.Vq,{isOpen:e,onClose:()=>{t()},closeActionLabel:n(Tu),title:n("team_sharing_invite_dialog_title"),actions:{primary:{children:r?n(Du):ku||(ku=(0,E.tZ)(l.Z,{mood:"inverse"})),icon:r?"ActionCopyOutlined":void 0,layout:"iconLeading",onClick:c}},children:[(0,E.tZ)(_.n,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",children:n("team_sharing_invite_dialog_paragrah")}),(0,E.tZ)(Tn.n,{label:n("team_sharing_invite_dialog_input_label"),value:s,readOnly:!0,actions:[{label:n(Du),iconName:"ActionCopyOutlined",onClick:c}],sx:{overflow:"hidden"}})]})},Au=({lee:e,teamId:t,isFreeTrial:n,totalSeatCount:a,numSeatsTaken:i,excludedInviteMembers:s,shouldShowInviteDialog:o,handleCloseInviteDialog:l,handleInvitePartialSuccess:c,handleInviteCompleteSuccess:d,invitePartialSuccessState:_,handleInvitationResultClosed:u,preFilledInviteEmails:m})=>{const{inviteLinkDataForAdmin:p,inviteLinkDataLoading:g,getInviteLinkDataForAdmin:h}=yu(),y=(0,Pe.o)(v_.G.WebOnboardingInviteLinkTacMigration),b=Cu(),[S,x]=(0,r.useState)(!1),[f,v]=(0,r.useState)(!1),{interacted:C}=(0,Te.d)(Ze.O.ActivateInviteLink);if((0,r.useEffect)((()=>{!1===y&&h()}),[h,y]),null==y)return null;const Z=b.status===G.rq.Success?b:void 0,k=y?!C&&S&&!Z?.teamKey&&b.status===G.rq.Success:!C&&S&&!g&&!p?.teamKey;return(0,E.BX)(r.Fragment,{children:[o?(0,E.tZ)(au,{lee:e,slotsTotal:a,slotsTaken:i,exclude:s,isFreeTrial:n,isOpen:o,closeInviteDialog:l,handleInvitePartialSuccess:c,handleInviteCompleteSuccess:e=>{(y?!0===Z?.enabled:!1===p?.disabled)&&v(!0),d(e)},preFilledEmails:m,setShowActivationDialog:x}):null,k?y?(0,E.tZ)(Zu,{isOpen:S,onCancel:()=>{x(!1)},onInviteLinkActivation:()=>{x(!1),v(!0)}}):(0,E.tZ)(Su,{showActivationDialog:S,setShowActivationDialog:x,setShowSharingDialog:v}):null,f?y?(0,E.tZ)(Iu,{isOpen:f,onClose:()=>{v(!1)}}):(0,E.tZ)(fu,{showSharingDialog:f,setShowSharingDialog:v}):null,_.show?(0,E.tZ)(gu,{teamId:t,isOpen:_.show,onClose:u,invitedMembers:_.invitedMembers,refusedMembers:_.refusedMembers}):null]})},wu=({lee:e,isOpen:t,onClose:n,prefilledEmails:a,teamMembers:i,handleInviteCompleteSuccess:r})=>{const{invitePartialSuccessState:s,setInvitePartialSuccessState:o,handleInvitationResultClosed:l}=pu(),{teamId:c}=(0,Me.fV)(),d=(0,$.C)(),_=(0,h.s)(),u=f_(i);return d&&_?(0,E.tZ)(Au,{lee:e,teamId:c,totalSeatCount:_.seatsNumber,numSeatsTaken:u,excludedInviteMembers:i.filter((({status:e})=>"removed"!==e)).map((({login:e})=>e)),isFreeTrial:d.isFreeTrial,shouldShowInviteDialog:t,handleCloseInviteDialog:n,handleInvitePartialSuccess:(e,t)=>o({show:!0,invitedMembers:e,refusedMembers:t}),handleInviteCompleteSuccess:r,invitePartialSuccessState:s,handleInvitationResultClosed:l,preFilledInviteEmails:a}):null},Ou=1e3,Nu="_common_toast_close_label",Ru=({domainName:e})=>{const{showToast:t}=(0,o.p)(),[n,a]=(0,r.useState)(!1),[i,s]=(0,r.useState)(!1),{translate:l}=(0,b.Z)();return(0,E.tZ)(D.z,{mood:"neutral",intensity:"quiet",layout:"iconLeading",onClick:async()=>{let n;try{(0,y.Kz)(new u.UserClickEvent({button:u.Button.DownloadCsv})),a(!0),n=setTimeout((()=>{s(!0)}),2e3),await(async()=>{const t=[],n=await __(e,Ou,0),a=Math.ceil(n.emailsImpactedCount/Ou);t.push(...n.emails);const i=async(n=0)=>{const r=[];for(;n<a||(a-n)%5!=0;)r.push(__(e,Ou,n*Ou)),n+=1;const s=await Promise.all(r);t.push(...s.flatMap((e=>e.emails))),n<a&&i(n)};var r,s;await i(1),r=t,s=l.shortDate,(0,_o.S)(((e,t)=>{let n=["email","domain","data_affected","incident_date","view_status"].join(",")+"\n";for(const a of e)for(const e of a.leaks)n+=[`"${a.email}"`,`"${e.domain}"`,`"${e.types.join(", ")}"`,`"${t((0,ln.Z)(e.breachDateUnix))}"`,`"${a.viewStatus}"`].join(",")+"\n";return n})(r,s),"DWI-report.csv","text/csv;charset=utf-8")})(),t({description:l("team_dark_web_insights_download_csv_success"),closeActionLabel:l(Nu)})}catch(e){t({description:l("_common_generic_error"),mood:"danger",closeActionLabel:l(Nu)})}finally{clearTimeout(n),a(!1),s(!1)}},icon:"DownloadOutlined",disabled:n,isLoading:i,children:l("team_dark_web_insights_download_csv")})};var Lu,Bu=n(63748),Mu=n(98738);const Pu=({breach:e,id:t,isFirstInGroup:n=!1,isLastInGroup:a=!1,opened:i=!1})=>{const{translate:r}=(0,b.Z)();return(0,E.BX)("tr",{id:t,sx:{backgroundColor:"ds.container.agnostic.neutral.standard",borderLeft:"3px solid ds.border.brand.quiet.idle",display:i?"table-row":"none",height:"44px","> td":{verticalAlign:"middle",padding:"5px 16px",paddingTop:n?"18px":void 0,paddingBottom:a?"18px":void 0}},children:[(0,E.tZ)("td",{colSpan:2,children:(0,E.tZ)(_.n,{as:"div",sx:{fontWeight:"light",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-end"},children:(0,E.BX)("div",{sx:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-end"},children:[e.domain&&""!==e.domain?Lu||(Lu=(0,E.tZ)(Mu.V,{forceFallback:!0})):null,(0,E.tZ)("div",{title:e.domain,sx:{paddingLeft:"8px",width:"100px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.domain})]})})}),(0,E.tZ)("td",{children:(0,E.tZ)(_.n,{sx:{"::first-letter":{textTransform:"uppercase"},textTransform:"lowercase"},children:(s=e.types,s.map((e=>r(Xu[e]))).join(", "))})}),(0,E.tZ)("td",{colSpan:3,children:(0,E.tZ)(_.n,{as:"span",children:(0,E.tZ)(Io.v,{date:(0,ln.Z)(e.breachDateUnix),format:fn._T.ll})})})]});var s},Uu={borderBottom:"1px solid ds.border.neutral.quiet.idle",height:"55px",position:"relative",borderLeft:"3px solid white","&:hover,:focus-visible":{cursor:"pointer",boxShadow:"0px 4px 8px rgba(0, 0, 0, 0.16)"},'&[aria-expanded="true"]':{borderLeftColor:"ds.border.brand.quiet.idle"},"> td":{verticalAlign:"middle",padding:"0 16px"}},Xu={[Bu.hb.Password]:"team_dark_web_insights_incident_data_type_password",[Bu.hb.CreditCard]:"team_dark_web_insights_incident_data_type_credit_card",[Bu.hb.IPAddress]:"team_dark_web_insights_incident_data_type_ip_address",[Bu.hb.MailingAddress]:"team_dark_web_insights_incident_data_type_mailing_address",[Bu.hb.Phone]:"team_dark_web_insights_incident_data_type_phone",[Bu.hb.Email]:"team_dark_web_insights_incident_data_type_email",[Bu.hb.Social]:"team_dark_web_insights_incident_data_type_social",[Bu.hb.GeoLocation]:"team_dark_web_insights_incident_data_type_geolocation",[Bu.hb.UserName]:"team_dark_web_insights_incident_data_type_username",[Bu.hb.PersonalInfo]:"team_dark_web_insights_incident_data_type_personalinfo"},zu=({userReport:e,isPendingMember:t=!1,onInviteAction:n,shouldShowInviteButton:a})=>{const{translate:i}=(0,b.Z)(),[s,o]=(0,r.useState)(!1),l=e.leaks?.map(((t,n)=>`${e.email}-${n}`)).join(" ");return(0,E.BX)(r.Fragment,{children:[(0,E.BX)("tr",{id:e.email,tabIndex:0,"aria-expanded":s,"aria-controls":l,onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),o((e=>!e)))},onClick:()=>{o((e=>!e))},sx:Uu,children:[(0,E.tZ)("td",{children:(0,E.tZ)(_.n,{as:"span",children:e.email})}),(0,E.tZ)("td",{children:(0,E.BX)(c.k,{children:[(0,E.tZ)(_.n,{as:"span",sx:{fontWeight:"bold"},children:e.breachesCount}),e.viewStatus===Bu.j8.New?(0,E.tZ)(Ce.P_k,{dot:!0,ariaLabel:i("team_new_label")}):null]})}),(0,E.tZ)(_.n,{as:"td",sx:{maxWidth:"160px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",textTransform:"lowercase","::first-letter":{textTransform:"uppercase"}},children:(e=>{const t=e.leaks.map((e=>e.types.map((e=>i(Xu[e])))));return[...new Set(t.flat())].join(", ")})(e)}),(0,E.tZ)("td",{children:(0,E.tZ)(_.n,{as:"span",children:(0,E.tZ)(Io.v,{date:(0,ln.Z)(e.leaks[0].breachDateUnix),format:fn._T.ll})})}),(0,E.tZ)("td",{children:a?(0,E.tZ)(D.z,{onClick:()=>{n(e.email)},type:"button",intensity:"supershy",children:i("team_dark_web_insights_incident_summary_invite_button")}):(0,E.tZ)(_.n,{as:"span",children:i(t?"team_dark_web_insights_incident_summary_pending":"team_dark_web_insights_incident_summary_member")})}),(0,E.tZ)("td",{"aria-label":i("team_dark_web_insights_incident_summary_expand"),children:(0,E.tZ)(Ce.veu,{color:"ds.text.neutral.standard",sx:{transform:s?"scale3D(1, -1, 1)":"scale3D(1, 1, 1)"}})})]},e.email),e.leaks.map(((t,n,a)=>{const i=`${e.email}-${t.domain}-${t.breachDateUnix}`;return(0,E.tZ)(Pu,{id:i,breach:t,opened:s,isFirstInGroup:0===n,isLastInGroup:n===a.length-1},i)}))]})},Fu=({emailsToInvite:e,reports:t,isLoading:n,pendingMembers:a,onInviteAction:i})=>{const{translate:r}=(0,b.Z)(),s=[{headerLabel:r("team_dark_web_insights_table_header_email_affected"),headerKey:"email-affected"},{headerLabel:r("team_dark_web_insights_table_header_incidents"),headerKey:"incidents"},{headerLabel:r("team_dark_web_insights_table_header_data_affected"),headerKey:"data-affected"},{headerLabel:r("team_dark_web_insights_table_header_last_incident"),headerKey:"last-incident"},{headerLabel:r("team_dark_web_insights_table_header_member_status"),headerKey:"member-status"},{headerLabel:"",headerKey:"actions"}];return(0,E.BX)("div",{sx:{minWidth:"100%",minHeight:"600px"},children:[n?(0,E.tZ)("div",{sx:{display:"block",width:"950px",height:"600px",position:"absolute",textAlign:"center"},children:(0,E.tZ)(l.Z,{sx:{position:"relative",top:"50%"},size:120})}):null,(0,E.BX)("table",{sx:{minWidth:"100%"},children:[(0,E.tZ)(Zo,{columns:s}),(0,E.tZ)("tbody",{sx:n?{opacity:"0.5"}:{},children:t.map((t=>(0,E.tZ)(zu,{userReport:t,onInviteAction:i,isPendingMember:a.includes(t.email),shouldShowInviteButton:e.includes(t.email)},t.email)))})]})]})},qu=({label:e,labelGridArea:t,title:n,titleGridArea:a})=>(0,E.BX)(r.Fragment,{children:[(0,E.tZ)(_.n,{sx:{gridArea:t},textStyle:"ds.specialty.monospace.small",color:"ds.text.warning.quiet",children:n}),(0,E.tZ)(_.n,{color:"ds.text.neutral.quiet",sx:{gridArea:a},children:e})]}),Gu=({gridArea:e})=>(0,E.tZ)("div",{sx:{gridArea:e,backgroundColor:"ds.border.neutral.quiet.idle",height:"100%",width:"1px",alignSelf:"center"}});var Vu,ju;const Wu=({reports:e,suggestedInvitees:t,onInviteAll:n})=>{const{translate:a}=(0,b.Z)();return(0,E.BX)(yn.Z,{sx:{marginBottom:"24px"},children:[(0,E.tZ)(d.X,{as:"h3",sx:{marginBottom:"24px"},children:a("team_dark_web_insights_summary_title")}),(0,E.BX)(Ce.T5p,{gridTemplateColumns:"1fr 1px 1fr 1px 1fr max-content",gridTemplateAreas:'"label-0 divider-left label-1 divider-right label-2 invite-all" "title-0 divider-left title-1 divider-right title-2 invite-all"',alignItems:"center",sx:{columnGap:"16px",justifyContent:"center"},children:[(0,E.tZ)(qu,{labelGridArea:"label-0",label:a("team_dark_web_insights_summary_employees_affected"),titleGridArea:"title-0",title:e.emailsImpactedCount}),Vu||(Vu=(0,E.tZ)(Gu,{gridArea:"divider-left"})),(0,E.tZ)(qu,{labelGridArea:"label-1",label:a("team_dark_web_insights_summary_total_incidents"),titleGridArea:"title-1",title:e.leaksCount}),ju||(ju=(0,E.tZ)(Gu,{gridArea:"divider-right"})),(0,E.tZ)(qu,{labelGridArea:"label-2",label:a("team_dark_web_insights_summary_not_protected"),titleGridArea:"title-2",title:a("team_dark_web_insights_summary_employee_invitation",{count:t.length})}),(0,E.tZ)(Ce.dDn,{gridArea:"invite-all",alignSelf:"center",children:(0,E.tZ)(D.z,{onClick:n,children:a("team_dark_web_insights_summary_invite_all_button")})})]})]})};var Hu,$u;const Ku="team_dark_web_insights_table_pagination_page_size",Yu=[15,50,100],Qu=({lee:e,domainName:t})=>{const{translate:n}=(0,b.Z)(),a=(0,ca.V)(),{teamId:i}=(0,Me.fV)(),{teamMembers:s,refreshTeamMembers:o}=(e=>{const[t,n]=(0,r.useState)(!1),[a,i]=(0,r.useState)([]),[s,o]=(0,r.useState)(null),l=(0,r.useCallback)((async t=>{if(!t?.signal?.aborted)if(null!==e){n(!0);try{const t=await(0,Re.YY)({teamId:e});i(t)}catch(e){const t=new Error(`useTeamMember: ${e}`);o(t)}finally{n(!1)}}else o(new Error("No team id provided"))}),[e]);return(0,r.useEffect)((()=>{const e=new AbortController;return l(),()=>{e.abort()}}),[l]),{teamMembersLoading:t,teamMembersError:s,teamMembers:a,refreshTeamMembers:l}})(i),{openDialog:l,shouldShowFrozenStateDialog:c}=(0,L.Ub)(),[m,p]=(0,r.useState)(!0),[g,h]=(0,r.useState)(null),[S,x]=(0,r.useState)(!1),[f,v]=(0,r.useState)(1),[C,Z]=(0,r.useState)(15),{unseen:k,setAsSeen:D}=(0,Te.m)(Ze.O.TacDarkWebInsightsNewBadge),[T,I]=(0,r.useState)(!1),[A,w]=(0,r.useState)(new Set([])),O=s.filter((e=>["pending","proposed"].includes(e.status))).map((e=>e.login)),N=s.filter((e=>["pending","proposed","accepted"].includes(e.status))).map((e=>e.login)),R=(0,r.useMemo)((()=>{var e;return null!=(e=g?.allImpactedEmails.filter((e=>!N.includes(e))))?e:[]}),[g?.allImpactedEmails,N]);(0,r.useEffect)((()=>{(0,y.Nc)(u.PageView.TacDarkWebInsights)}),[]);const B=(0,r.useCallback)((async(e,t,i)=>{x(!0);try{const n=await __(e,i,i*(t-1));h(n),v(t),Z(i),(0,y.Kz)(new u.UserLoadDarkWebInsightsResultsEvent({}))}catch{a.showAlert(n("team_dark_web_insights_generic_error"),Ce.BLW.ERROR)}finally{p(!1),x(!1)}}),[]);(0,r.useEffect)((()=>{B(t,1,C)}),[t]),(0,r.useEffect)((()=>{k&&g?.emails&&D()}),[k,D,g?.emails]);const M=(0,r.useCallback)((()=>{c?l():R.length<=0||(I(!0),(0,y.Kz)(new u.UserSendManualInviteEvent({flowStep:u.FlowStep.Start,inviteCount:0,inviteFailedCount:0,inviteResentCount:0,inviteSuccessfulCount:0,isImport:!1,isResend:!1})),w(new Set(R)))}),[R]);return(0,E.BX)(r.Fragment,{children:[m?Hu||(Hu=(0,E.tZ)(S_,{})):null,!m&&g?.emails?0===g.leaksCount?(0,E.tZ)(m_,{domainName:t}):(0,E.BX)(r.Fragment,{children:[(0,E.tZ)(Wu,{reports:g,suggestedInvitees:R,onInviteAll:M}),(0,E.BX)(yn.Z,{children:[(0,E.BX)("div",{sx:{display:"flex",justifyContent:"space-between",marginBottom:"24px",alignItems:"center"},children:[(0,E.tZ)(d.X,{as:"h3",children:n("team_dark_web_insights_table_title")}),(0,E.tZ)(Ru,{domainName:t})]}),(0,E.tZ)(Fu,{reports:g.emails,isLoading:S,pendingMembers:O,emailsToInvite:R,onInviteAction:e=>{c?l():(I(!0),(0,y.Kz)(new u.UserSendManualInviteEvent({flowStep:u.FlowStep.Start,inviteCount:0,inviteFailedCount:0,inviteResentCount:0,inviteSuccessfulCount:0,isImport:!1,isResend:!1})),w(new Set([e])))}}),(0,E.BX)(Ce.T5p,{alignItems:"center",gridTemplateColumns:"1fr auto 1fr",sx:{paddingTop:6,paddingBottom:3},children:[(0,E.tZ)(_.n,{color:"ds.text.neutral.quiet",textStyle:"ds.body.helper.regular",children:n("team_dark_web_insights_table_pagination_item_count",{first:C*(f-1)+1,last:Math.min(C*(f-1)+C,g.emailsImpactedCount),total:g.emailsImpactedCount})}),(0,E.tZ)(Ce.tlE,{totalPages:Math.ceil(g.emailsImpactedCount/C),currentPage:f,onPageChange:e=>B(t,e,C)},f),(0,E.BX)(X.h_,{children:[(0,E.tZ)(X.sB,{showCaret:!0,intensity:"supershy",mood:"neutral",size:"small",sx:{marginLeft:"auto"},children:n(Ku,{pageSize:C})}),(0,E.tZ)(X.Nv,{children:Yu.map((e=>(0,E.tZ)(F.h,{label:n(Ku,{pageSize:e}),onSelect:()=>e!==C&&B(t,1,e)},e)))})]})]}),(0,E.tZ)(wu,{lee:e,isOpen:T,prefilledEmails:A,onClose:()=>{I(!1),w(new Set([]))},handleInviteCompleteSuccess:()=>o(),teamMembers:s})]})]}):null,m||g?.emails||""===t?null:$u||($u=(0,E.tZ)(x_,{}))]})};var Ju,em=n(15622);const tm=({lastVerificationAttemptDateUnix:e,onRetry:t})=>{const{translate:n}=(0,b.Z)();return(0,E.BX)(c.k,{justifyContent:"space-between",flexDirection:"column",gap:5,sx:{margin:"30px 0",paddingLeft:"24px",borderLeft:"solid 2px ds.border.neutral.standard.idle"},children:[(0,E.BX)(_.n,{textStyle:"ds.body.reduced.regular",children:[n("team_dwi_pending_latest_attempt_label")," ",e?(0,E.tZ)(em.Z,{date:(0,ln.Z)(e)}):null]}),(0,E.tZ)(D.z,{type:"button",size:"small",intensity:"supershy",onClick:t,icon:"ActionRefreshOutlined",layout:"iconLeading",children:n("team_dwi_pending_retry_button_label")})]})},nm=({domain:e,isDeactivating:t,handleDeactivateDomain:n,handleRetryValidateDomain:a})=>{const{translate:i}=(0,b.Z)(),{dnsToken:{computedToken:s,challengeDomain:o}={computedToken:"",challengeDomain:""},lastVerificationAttemptDateUnix:l}=e;return(0,E.BX)(r.Fragment,{children:[Ju||(Ju=(0,E.tZ)(s_,{})),(0,E.BX)("div",{children:[(0,E.BX)(yn.Z,{sx:{margin:"24px 0"},children:[(0,E.tZ)(d.X,{as:"h2",children:i("team_breach_report_domain_verify_pending_title")}),(0,E.tZ)(_.n,{sx:{marginTop:"10px"},children:i("team_dwi_pending_verification_txt")}),(0,E.tZ)(tm,{lastVerificationAttemptDateUnix:l,onRetry:a}),(0,E.BX)(c.k,{gap:"16px",alignItems:"center",children:[(0,E.tZ)("div",{sx:{width:"70%"},children:(0,E.tZ)(Tn.n,{label:i("team_breach_report_domain_label"),labelPersists:!1,value:e.name,disabled:!0})}),(0,E.tZ)("div",{children:(0,E.tZ)(D.z,{type:"button",disabled:t,mood:"neutral",intensity:"quiet",onClick:n,children:i("team_dwi_pending_cancel_button_label")})}),(0,E.tZ)("div",{children:(0,E.tZ)(D.z,{type:"button",disabled:!0,sx:{maxWidth:"120px"},children:i("team_breach_report_verifying_txt")})})]})]}),(0,E.BX)(yn.Z,{children:[i("team_breach_report_domain_verify_dns_confirm_text"),(0,E.tZ)(_.n,{children:i("team_breach_report_domain_verify_dns_description")}),(0,E.tZ)(Tn.n,{label:i("team_settings_domain_verify_host"),value:o,readOnly:!0,actions:[{iconName:"ActionCopyOutlined",onClick:async()=>{await navigator.clipboard.writeText(o)}}]}),(0,E.tZ)(Tn.n,{label:i("team_settings_domain_verify_txt"),value:s,readOnly:!0,actions:[{iconName:"ActionCopyOutlined",onClick:async()=>{await navigator.clipboard.writeText(s)}}]}),(0,E.tZ)(_.n,{sx:{marginBottom:"20px"},children:i("team_breach_report_domain_verify_dns_secondary_description")})]})]})]})},am={background:"ds.container.expressive.neutral.quiet.idle",color:"ds.text.neutral.standard",cursor:"default"},im=({label:e})=>(0,E.tZ)(Ce.OTy,{sx:{":hover":am,":focus":am,...am},disabled:!0,selected:!1,size:"medium",label:e}),rm=({activeDomain:e,verifiedDomains:t,selectVerifiedDomain:n})=>{var a;const i=(0,Pe.o)(De.w.DwiMultipleDomainsProd),r=null!=(a=e?.name)?a:"",s=t.map((e=>(0,E.tZ)(Ce.OTy,{sx:am,onClick:()=>{r!==e.name&&n(e)},selected:r===e.name,size:"medium",label:e.name},e.name)));return(0,E.tZ)(Ce.G8v,{sx:{marginTop:"12px",padding:0},children:i&&t.length>1?s:""!==r?(0,E.tZ)(im,{label:r}):null})};var sm,om;const lm={display:"flex",justifyContent:"center",width:"100%",height:"100%",backgroundColor:`${Ce.colors.dashGreen06}`,alignItems:"center"},cm=({lee:e})=>{const{translate:t}=(0,b.Z)(),{verifiedOrPendingDomain:{domain:n,status:a},verifiedDomains:i,updateDomainState:s,deactivateDomain:o,tryVerifyDomain:c,selectVerifiedDomain:_}=Jl();return(0,r.useEffect)((()=>{(0,y.Nc)(u.PageView.TacDarkWebInsights)}),[]),(0,E.BX)(r.Fragment,{children:[(0,E.BX)("div",{sx:{px:"48px",pt:"32px",pb:"12px"},children:[(0,E.tZ)(d.X,{as:"h1",children:t("team_dashboard_dark_web_insights_heading")}),(0,E.tZ)(rm,{activeDomain:n,verifiedDomains:i,selectVerifiedDomain:_})]}),(0,E.tZ)(di,{fullWidth:!0,mainContent:(0,E.tZ)("div",{children:a===Ql.Loading?sm||(sm=(0,E.tZ)("div",{sx:lm,children:(0,E.tZ)(l.Z,{size:120})})):null===n||a===Ql.Start?(0,E.tZ)(d_,{onSuccess:s,onError:s}):a===Ql.Validated?(0,E.tZ)(Qu,{lee:e,domainName:n.name}):(0,E.tZ)(nm,{domain:n,isDeactivating:a===Ql.Deactivating,handleDeactivateDomain:o,handleRetryValidateDomain:c})}),secondaryContent:om||(om=(0,E.tZ)(Dd,{}))})]})};var dm=n(28233),_m=n(85434),um=n(92220);let mm=function(e){return e.CRD="CRD",e.Nudges="nudges",e}({});function pm(e,t,n){const a={campaign:"business-plus-upgrade",source:"product",medium:e};let i;if(n)i="trial";else if(t){var r;i=null!=(r={[g.lD.Business]:"business",[g.lD.Standard]:"standard",[g.lD.Starter]:"starter",[g.lD.Team]:"teams"}[t])?r:void 0}(0,W.Yk)(me.q_,i?{...a,content:i}:a)}const gm=({featureType:e})=>{const{translate:t}=(0,b.Z)(),n=(0,h.s)(),a=(0,$.C)();if(!a)return null;const i=a.isFreeTrial||a.isGracePeriod;return(0,E.BX)(yn.Z,{sx:{display:"flex",flexDirection:"column",gap:"24px",padding:"24px"},children:[(0,E.tZ)(pe.C,{label:t("team_upsell_card_badge"),mood:"brand",iconName:"PremiumOutlined",layout:"iconLeading"}),(0,E.tZ)(c.k,{sx:{flex:1,backgroundColor:"ds.container.agnostic.neutral.quiet",padding:"8px 48px",borderRadius:"8px"},justifyContent:"center",children:(0,E.tZ)("img",{role:"presentation",alt:"",src:Zs,sx:{objectFit:"contain",width:"100%",height:"auto"}})}),(0,E.BX)(c.k,{flexDirection:"column",gap:"16px",children:[(0,E.tZ)(_.n,{textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:t("team_upsell_card_title_omnix")}),(0,E.tZ)(Ts,{iconName:"FeatureAutomationsOutlined",description:"team_upsell_card_nudges_feature_description"}),(0,E.tZ)(Ts,{iconName:"RiskDetectionOutlined",description:"team_upsell_card_crd_feature_description"}),(0,E.tZ)(Ts,{iconName:"ItemPhoneHomeOutlined",description:"team_upsell_card_csm_feature_description"})]}),(0,E.tZ)(D.z,{onClick:()=>{(0,y.Kz)(new u.UserClickEvent({button:u.Button.ContactSales})),pm(e,n?.spaceTier,i)},mood:"brand",intensity:"catchy",children:t("team_upsell_card_contact_button")})]})},hm=()=>{const e=(0,h.s)();return e?.spaceTier===g.lD.BusinessPlus},ym={CARD:{height:"100%",display:"flex",flexDirection:"column",padding:"24px",gap:"16px",backgroundColor:"ds.container.agnostic.neutral.supershy",borderColor:"ds.border.neutral.quiet.idle"},SUBCARD:{display:"flex",flexDirection:"column",padding:"24px 0",gap:"16px",backgroundColor:"ds.background.alternate",border:"none"},DISPLAY_FIELD_CONTAINER:{height:"100%",display:"flex",padding:"8px 16px",gap:"8px",backgroundColor:"ds.container.agnostic.neutral.quiet",border:"none"},DISPLAY_FIELD_WHITE_GRID:{width:"100%",display:"flex",flexDirection:"column",gap:"16px"},DISPLAY_FIELD_WHITE:{height:"100%",display:"flex",padding:"2px 16px",gap:"8px",backgroundColor:"ds.container.agnostic.neutral.supershy",borderColor:"ds.border.neutral.quiet.idle"},VERTICAL_DIVIDER:{borderLeft:"1px solid ds.border.neutral.quiet.idle"}},bm=n.p+"e40098c88b6006b99c9e.png";var Sm;const xm=({showSetupTips:e})=>{const{translate:t}=(0,b.Z)();return(0,E.BX)(r.Fragment,{children:[(0,E.BX)(Ce.Zbd,{sx:(0,Ee.jM)([ym.CARD,{gap:"8px"}]),children:[(0,E.tZ)(pe.C,{label:t("team_risk_detection_presetup_secondary_card_badge"),iconName:"TipOutlined",layout:"iconLeading",mood:"brand",sx:{marginBottom:"8px"}}),Sm||(Sm=(0,E.tZ)("a",{href:me.jp,target:"_blank",rel:"noreferrer",children:(0,E.tZ)("img",{src:bm,alt:"",height:"142px"})})),(0,E.tZ)($t.Q,{size:"small",isExternal:!0,target:"_blank",rel:"noreferrer",href:me.jp,children:t("team_ace_risk_detection_helper_side_card_video_walkthrough_link")})]}),e?(0,E.BX)(Ce.Zbd,{sx:(0,Ee.jM)([ym.CARD,{gap:"8px"}]),children:[(0,E.tZ)(pe.C,{label:t("team_ace_risk_detection_helper_side_card_setup_tip_badge"),iconName:"TipOutlined",layout:"iconLeading",mood:"brand",sx:{marginBottom:"8px"}}),(0,E.tZ)(_.n,{textStyle:"ds.title.block.medium",color:"ds.text.neutral.standard",children:t("team_ace_risk_detection_helper_side_card_setup_tip_title")}),(0,E.tZ)(_.n,{textStyle:"ds.title.block.small",color:"ds.text.neutral.quiet",children:t("team_arr_risk_detection_helper_side_card_setup_tip_description")})]}):null,(0,E.BX)(Ce.Zbd,{sx:(0,Ee.jM)([ym.CARD,{gap:"8px"}]),children:[(0,E.tZ)(_.n,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",sx:{marginBottom:"8px"},children:t("team_ace_risk_detection_helper_side_card_useful_links_section_title")}),(0,E.tZ)($t.Q,{size:"small",isExternal:!0,target:"_blank",rel:"noreferrer",href:me.i0,children:t("team_ace_risk_detection_helper_side_card_one_pager_link")}),(0,E.tZ)($t.Q,{size:"small",isExternal:!0,target:"_blank",rel:"noreferrer",href:me.js,children:t("team_ace_risk_detection_helper_side_card_intune_setup_guide_text_link")}),(0,E.tZ)($t.Q,{size:"small",isExternal:!0,target:"_blank",rel:"noreferrer",href:me.m5,onClick:()=>{(0,y.Kz)(new u.UserOpenHelpCenterEvent({helpCenterArticleCta:u.HelpCenterArticleCta.SeeRiskDetectionSetupGuide}))},children:t("team_ace_risk_detection_helper_side_card_jamf_setup_guide_text_link")}),(0,E.tZ)($t.Q,{size:"small",isExternal:!0,target:"_blank",rel:"noreferrer",href:me.RU,children:t("team_ace_risk_detection_helper_side_card_privacy_statement_link")})]})]})},fm=({index:e})=>{const t=2*e;return(0,E.tZ)("hr",{sx:{display:"flex",alignSelf:"center",width:"60%",height:"0%",border:"1px solid ds.border.brand.quiet.idle",gridArea:`1 / ${t-2} / 1 / ${t-2+1}`}})},vm=({stepTextContent:e,index:t})=>{const n=2*t;return(0,E.BX)(r.Fragment,{children:[(0,E.tZ)(_.n,{textStyle:"ds.title.section.medium",color:"ds.text.brand.quiet",sx:{display:"flex",width:36,height:36,borderRadius:36,justifyContent:"center",alignItems:"center",alignSelf:"center",justifySelf:"center",flexShrink:0,textAlign:"center",border:"1px solid ds.border.brand.quiet.idle",color:"ds.text.brand.standard",gridArea:`1 / ${n+1} / 1 / ${n+2}`},children:t+1}),(0,E.tZ)(_.n,{textStyle:"ds.title.block.small",color:"ds.text.neutral.quiet",sx:{display:"flex",textAlign:"center",alignSelf:"start",justifySelf:"center",gridArea:`2 / ${n+1} / 2 / ${n+2}`},children:e})]})},Cm=({steps:e})=>(0,E.tZ)("div",{sx:{display:"grid",gridTemplateColumns:`repeat(${2*e.length-1}, 1fr)`,gridTemplateRows:"repeat(2, 1fr)",gridColumnGap:"0px",gridRowGap:"0px"},children:e.map(((e,t)=>(0,E.BX)(r.Fragment,{children:[t>0?(0,E.tZ)(fm,{index:t}):null,(0,E.tZ)(vm,{stepTextContent:e,index:t})]},`step-${e}`)))});var Em;const Zm=({setError:e,isExistingBusinessPlusTrial:t})=>{const{translate:n}=(0,b.Z)(),a=hm(),{generateMassDeploymentTeamKey:i}=(0,te.u)(um.Q);return(0,r.useEffect)((()=>{(0,y.Nc)(u.PageView.TacRiskDetection)}),[]),(0,E.tZ)(di,{mainContent:(0,E.tZ)(Ce.Zbd,{sx:{minHeight:"680px",display:"flex",alignItems:"center",justifyContent:"center",padding:"24px",backgroundColor:"ds.container.agnostic.neutral.supershy",borderColor:"ds.border.neutral.quiet.idle"},children:(0,E.BX)("div",{sx:{display:"flex",flexDirection:"column",alignItems:"center",maxWidth:"570px",gap:"16px"},children:[(0,E.BX)("div",{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:"16px"},children:[(0,E.tZ)("img",{src:_m,sx:{width:"240px",aspectRatio:"3/2"},alt:""}),(0,E.tZ)(d.X,{as:"h2",color:"ds.text.neutral.catchy",textStyle:"ds.title.section.large",sx:{letterSpacing:"-1px",textAlign:"center"},children:n("team_risk_detection_presetup_main_card_title")})]}),(0,E.BX)("div",{sx:{display:"flex",padding:"24px",flexDirection:"column",alignItems:"left",gap:"16px"},children:[(0,E.tZ)(_.n,{color:"ds.text.neutral.standard",sx:{textAlign:"center"},children:n("team_risk_detection_presetup_main_card_description_paragraph")}),(0,E.tZ)(_.n,{color:"ds.text.neutral.standard",sx:{textAlign:"center"},children:n("team_risk_detection_presetup_main_card_action_feature_paragraph")})]}),(0,E.tZ)(Cm,{steps:[n("team_risk_detection_presetup_main_card_steper_step_1"),n("team_risk_detection_presetup_main_card_steper_step_2"),n("team_risk_detection_presetup_main_card_steper_step_3"),n("team_risk_detection_presetup_main_card_steper_step_4")]}),(0,E.BX)(c.k,{gap:"16px",flexDirection:"row",children:[(0,E.tZ)(D.z,{as:"a",href:me.jp,target:"_blank",rel:"noreferrer",size:"medium",layout:"labelOnly",mood:"brand",intensity:"quiet",children:n("team_risk_detection_presetup_main_card_demo_button")}),(0,E.tZ)(D.z,{size:"medium",layout:"labelOnly",onClick:async()=>{(0,y.Kz)(new u.UserSetupRiskDetectionEvent({riskDetectionSetupStep:u.RiskDetectionSetupStep.StartSetup})),(0,ne.hx)(await i())&&e()},children:n("team_risk_detection_presetup_main_card_start_setup_button")})]})]})}),fullWidth:!0,secondaryContent:(0,E.BX)(Ce.T5p,{gap:"16px",children:[Em||(Em=(0,E.tZ)(xm,{showSetupTips:!1})),a||t?null:(0,E.tZ)(gm,{featureType:mm.CRD})]})})},km=({helpCenterLink:e,retryFunction:t})=>{const{translate:n}=(0,b.Z)();return(0,E.tZ)("div",{sx:{minHeight:"680px",display:"flex",alignItems:"center",justifyContent:"center",padding:"24px"},children:(0,E.BX)("div",{sx:{display:"flex",flexDirection:"column",alignItems:"center",maxWidth:"480px"},children:[(0,E.tZ)(T.JO,{name:"FeedbackFailOutlined",color:"ds.text.danger.standard",size:"xlarge",sx:{marginBottom:"40px",width:"64px",height:"64px"}}),(0,E.tZ)(d.X,{as:"h1",textStyle:"ds.title.section.large",color:"ds.text.danger.standard",sx:{marginBottom:"8px"},children:n("team_risk_detection_setup_error_heading")}),(0,E.tZ)(_.n,{sx:{textAlign:"center"},children:n(t?"team_risk_detection_setup_error_retry_description":"team_risk_detection_setup_error_generic_description")}),t?(0,E.tZ)(D.z,{onClick:t,sx:{marginTop:"40px"},children:n("team_risk_detection_setup_error_retry_button")}):null,e?(0,E.tZ)($t.Q,{isExternal:!0,href:e,sx:{marginTop:"40px"},children:n("team_risk_detection_setup_error_help_center_link")}):null]})})},Dm=({setStartTrialDialogOpen:e})=>{const{translate:t}=(0,b.Z)(),n=(0,$.C)(),a=(0,Pe.o)("monetization_extension_existingUserTierTrial");if(!n)return null;const i=n.canUseTierTrial&&a,r=()=>{(0,y.Kz)(new u.UserClickEvent({button:u.Button.UpgradeBusinessPlusTier})),pm(mm.CRD,n.spaceTier,n.isFreeTrial)};return n.isFreeTrial?(0,E.tZ)(D.z,{onClick:r,children:t("team_buy_omnix")}):i?(0,E.tZ)(D.z,{onClick:()=>{e(!0)},children:t("team_start_trial_cta")}):(0,E.tZ)(D.z,{layout:"iconLeading",icon:"PremiumOutlined",onClick:r,children:t("team_upgrade_to_omnix")})};var Tm;const Im=({setStartTrialDialogOpen:e})=>{const{translate:t}=(0,b.Z)(),n=(0,$.C)();return(0,r.useEffect)((()=>{(0,y.Nc)(u.PageView.TacRiskDetectionPaywall)}),[]),n?(0,E.tZ)(yn.Z,{sx:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"ds.container.agnostic.neutral.supershy",borderColor:"ds.border.neutral.quiet.idle",margin:"24px 48px 32px"},children:(0,E.BX)(c.k,{flexDirection:"column",alignItems:"center",gap:"16px",sx:{marginY:"75px"},children:[Tm||(Tm=(0,E.tZ)("img",{src:_m,alt:"",width:320})),(0,E.BX)(c.k,{flexDirection:"column",alignItems:"center",gap:"16px",sx:{maxWidth:"512px",textAlign:"center"},children:[(0,E.tZ)(d.X,{as:"h2",textStyle:"ds.title.section.large",color:"ds.text.neutral.catchy",children:t("team_risk_detection_paywall_main_card_title")}),(0,E.tZ)(_.n,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",children:t("team_risk_detection_paywall_deploy")}),(0,E.BX)(c.k,{gap:"24px",flexWrap:"nowrap",flexDirection:"row",justifyContent:"space-between",sx:{paddingTop:"8px"},children:[(0,E.tZ)($t.Q,{href:me.$3,isExternal:!0,children:t("_common_action_learn_more")}),(0,E.tZ)(Dm,{setStartTrialDialogOpen:e})]})]})]})}):null};var Am,wm;const Om=({isStartTrialDialogOpen:e,setStartTrialDialogOpen:t})=>{const{translate:n}=(0,b.Z)(),{showToast:a}=(0,o.p)(),{startTierTrial:i}=(0,te.u)(p.o);return(0,E.BX)(J.Vq,{title:n("team_start_trial_dialog_omnix_title"),closeActionLabel:n("_common_dialog_dismiss_button"),isOpen:e,onClose:()=>t(!1),actions:{primary:{children:n("team_start_trial_dialog_omnix_cta"),onClick:async()=>{const e=await i({tier:"businessplus"});(0,ne.hx)(e)?a({mood:"danger",description:n("team_start_trial_dialog_error_message")}):(t(!1),a({mood:"brand",description:n("team_start_trial_dialog_omnix_success_message")}))}},secondary:{children:n("team_start_trial_dialog_maybe_cta"),onClick:()=>{t(!1)}}},children:[(0,E.BX)(c.k,{flexDirection:"column",gap:"24px",sx:{marginTop:"20px"},children:[(0,E.BX)(c.k,{flexWrap:"nowrap",gap:"16px",children:[Am||(Am=(0,E.tZ)(Qi.v,{name:"PremiumOutlined",mood:"brand"})),(0,E.tZ)(_.n,{color:"ds.text.neutral.standard",children:n.markup("team_start_trial_dialog_omnix_paragraph_1_markup")})]}),(0,E.BX)(c.k,{flexWrap:"nowrap",gap:"16px",children:[wm||(wm=(0,E.tZ)(Qi.v,{name:"ActionUndoOutlined",mood:"brand"})),(0,E.tZ)(_.n,{color:"ds.text.neutral.standard",children:n("team_start_trial_dialog_paragraph_2")})]})]}),(0,E.tZ)(_.n,{color:"ds.text.neutral.quiet",sx:{marginTop:"20px"},children:n.markup("team_start_trial_dialog_support_markup",{},{linkTarget:"_blank"})})]})};var Nm=n(6135);const Rm=()=>{var e;const t=(0,$.C)();return!!t&&null!=(e=t.tierTrialOverrideInfo?.tierTrialOverride===g.lD.BusinessPlus&&t.tierTrialOverrideInfo?.isCurrentlyOnTrial)&&e};var Lm;const Bm=()=>Lm||(Lm=(0,E.tZ)(c.k,{children:"TBD"}));var Mm,Pm=n(29270);const Um="team_risk_detection_setup_status_close_toast",Xm=()=>(0,E.tZ)("div",{sx:ym.VERTICAL_DIVIDER}),zm=({token:e,setError:t})=>{const{updateCredentialRiskDetectionActiveStatus:n}=(0,te.u)(um.Q),a=(0,m.k)(um.Q,"getLastLogDate"),{showToast:r}=(0,o.p)(),{translate:l}=(0,b.Z)(),{routes:p}=(0,i.Xo)(),g=async()=>{(0,y.Kz)(new u.UserSetupRiskDetectionEvent({riskDetectionSetupStep:u.RiskDetectionSetupStep.TurnOff}));const e=await n({active:!1});(0,ne.d6)(e)?(t({hasError:!1,retryFunction:void 0}),r({description:l("team_risk_detection_setup_status_turned_off_toast"),closeActionLabel:l(Um)})):t({hasError:!0,retryFunction:async()=>{await g()}})},h=a.status===s.rq.Loading?"...":a.status===s.rq.Error?"-":null===a.data.lastLogDate?l("team_risk_detection_setup_status_no_logs_yet"):l.shortDate(new Date(a.data.lastLogDate),fn.qG.L_LT);return(0,E.BX)(Ce.Zbd,{sx:ym.CARD,children:[(0,E.tZ)(d.X,{as:"h2",textStyle:"ds.title.supporting.small",color:"ds.text.neutral.quiet",children:l("team_risk_detection_setup_status_title")}),(0,E.BX)(Ce.Zbd,{sx:(0,Ee.jM)([ym.DISPLAY_FIELD_CONTAINER,{padding:"24px",justifyContent:"space-between"}]),children:[(0,E.BX)(c.k,{flexDirection:"row",gap:"16px",children:[(0,E.BX)(c.k,{flexDirection:"column",justifyContent:"center",gap:"4px",sx:{width:"170px"},children:[(0,E.tZ)(d.X,{as:"h4",textStyle:"ds.title.supporting.small",color:"ds.text.neutral.catchy",sx:{height:"18px"},children:l("team_risk_detection_setup_status_integration_status_title")}),(0,E.tZ)(pe.C,{label:l("team_risk_detection_setup_status_integration_status_badge_label"),mood:"positive"})]}),Mm||(Mm=(0,E.tZ)(Xm,{})),(0,E.BX)(c.k,{flexDirection:"column",justifyContent:"center",gap:"4px",children:[(0,E.tZ)(d.X,{as:"h4",textStyle:"ds.title.supporting.small",color:"ds.text.neutral.catchy",sx:{height:"18px"},children:l("team_risk_detection_setup_status_last_log_date_title")}),(0,E.tZ)(_.n,{textStyle:"ds.body.reduced.monospace",color:"ds.text.neutral.standard",children:h})]})]}),(0,E.tZ)(D.z,{as:Pm.rU,to:`${p.teamActivityRoutePath}/recent?categoryFilters=${qs.s.RiskDetection}`,mood:"brand",intensity:"quiet",layout:"iconTrailing",icon:"ArrowRightOutlined",sx:{alignSelf:"end"},onClick:()=>{(0,y.Kz)(new u.UserSetupRiskDetectionEvent({riskDetectionSetupStep:u.RiskDetectionSetupStep.SeeActivityLogs}))},children:l("team_risk_detection_setup_status_see_logs_button")})]}),(0,E.tZ)(Ce.Zbd,{sx:ym.DISPLAY_FIELD_CONTAINER,children:(0,E.tZ)(en.C,{actions:[(0,E.tZ)(D.z,{intensity:"supershy",layout:"iconLeading",icon:"ActionCopyOutlined",onClick:async()=>{(0,y.Kz)(new u.UserSetupRiskDetectionEvent({riskDetectionSetupStep:u.RiskDetectionSetupStep.CopyConfigurationToken}));try{await navigator.clipboard.writeText(e),r({description:l("team_risk_detection_setup_status_token_copied_toast"),closeActionLabel:l(Um)})}catch{r({mood:"danger",description:l("_common_generic_error"),closeActionLabel:l(Um)})}},children:l("team_risk_detection_setup_guidelines_token_field_copy_button")},"CopyToken")],label:l("team_risk_detection_setup_guidelines_token_field_title"),value:e,sx:{width:"100%"},"data-testid":"mass-deployment-token"})}),(0,E.tZ)(D.z,{sx:{alignSelf:"end"},onClick:g,children:l("team_risk_detection_setup_status_integration_status_turn_off_button")})]})};var Fm=n(91632);let qm=function(e){return e.INTUNES="microsoft-intune",e.GPO="windows-group-policy",e.JAMF="jamf",e}({}),Gm=function(e){return e.CHROME="chrome",e.EDGE="edge",e}({}),Vm=function(e){return e.WINDOWS="windows",e.MACOS="macos",e}({}),jm=function(e){return e.INTUNES="intunes_tabId",e.GPO="gpo_tabId",e.JAMF="jamf_tabId",e}({}),Wm=function(e){return e.INTUNES="intunes_tabContentId",e.GPO="gpo_tabContentId",e.JAMF="jamf_tabContentId",e}({});const Hm={[qm.INTUNES]:Vm.WINDOWS,[qm.GPO]:Vm.WINDOWS,[qm.JAMF]:Vm.MACOS},$m="team_risk_detection_setup_deployment_method_deployment_software_option_intune",Km="team_risk_detection_setup_deployment_method_deployment_software_option_gpo",Ym="team_risk_detection_setup_deployment_method_deployment_software_option_jamf",Qm=({handleActivateCRD:e})=>{const{translate:t}=(0,b.Z)();return(0,E.BX)(r.Fragment,{children:[(0,E.tZ)(yn.Z,{sx:{backgroundColor:"ds.container.agnostic.neutral.quiet",my:"16px"},children:(0,E.BX)(yn.Z,{sx:{backgroundColor:"ds.container.agnostic.neutral.supershy"},children:[(0,E.tZ)(d.X,{as:"h1",textStyle:"ds.title.section.medium",children:t("team_risk_detection_setup_guidelines_step_turn_on_title")}),(0,E.tZ)(_.n,{textStyle:"ds.title.block.medium",children:t("team_risk_detection_setup_guidelines_step_turn_on_subtitle")}),(0,E.tZ)(_.n,{textStyle:"ds.body.standard.regular",children:t("team_risk_detection_setup_guidelines_step_turn_on_description")})]})}),(0,E.tZ)(c.k,{justifyContent:"flex-end",children:(0,E.tZ)(D.z,{onClick:e,children:t("team_risk_detection_setup_guidelines_turn_on_button")})})]})},Jm={BASE:{height:"48px",width:"48px",borderRadius:"50%",position:"relative",borderWidth:"1px",borderStyle:"solid",borderColor:"ds.border.brand.standard.active"},COMPLETED:{backgroundColor:"ds.border.positive.quiet.idle",borderWidth:"0px"}},ep=({state:e,number:t})=>{const n="completed"===e;return(0,E.BX)(c.k,{justifyContent:"center",alignItems:"center",flexWrap:"unset",sx:(0,Ee.jM)([Jm.BASE,n?Jm.COMPLETED:{}]),children:[(0,E.tZ)(_.n,{color:n?"ds.text.positive.quiet":"ds.text.brand.standard",sx:{fontSize:"26px",fontWeight:"400"},children:t}),n?(0,E.tZ)(T.JO,{name:"FeedbackSuccessFilled",size:"medium",color:"ds.text.positive.quiet",sx:{position:"absolute",right:"0",top:"0"}}):null]})};var tp;const np=({duration:e})=>(0,E.BX)(c.k,{alignItems:"center",gap:"2px",children:[tp||(tp=(0,E.tZ)(T.JO,{name:"TimeOutlined",size:"xsmall",color:"ds.text.neutral.quiet"})),(0,E.tZ)(_.n,{textStyle:"ds.body.helper.regular",color:"ds.text.neutral.quiet",children:e})]}),ap=e=>e?"string"==typeof e?(0,E.tZ)(_.n,{textStyle:"ds.title.block.small",color:"ds.text.neutral.standard",sx:{mt:"4px"},children:e}):e:null,ip=({title:e,duration:t,stepNumber:n,children:a,description:i,isDefaultOpen:s=!1,isCrdActive:o=!1,onCompleted:l})=>{const _=(0,r.useRef)(null),[u,m]=(0,r.useState)(s),[p,g]=(0,r.useState)(0),[h,y]=(0,r.useState)(o?"completed":"active"),b=(0,r.useCallback)((()=>{m((e=>!e))}),[]);(0,r.useEffect)((()=>{m(s)}),[s]),(0,r.useEffect)((()=>{if(!p||!u||!_.current)return;const e=new ResizeObserver((e=>{g(e[0].contentRect.height)}));return e.observe(_.current),()=>e.disconnect()}),[u,p]),(0,r.useEffect)((()=>{g(u&&_?.current?_.current.getBoundingClientRect().height:0)}),[u]);const S="completed"===h;return(0,E.BX)(yn.Z,{gap:"0px",children:[(0,E.BX)(c.k,{as:"button",flexDirection:"row",alignItems:"center",gap:"8px",onClick:b,sx:{cursor:"pointer",background:"none"},children:[(0,E.tZ)(ep,{number:n,state:h}),(0,E.tZ)(d.X,{as:"h3",textStyle:"ds.title.section.medium",color:"ds.text.neutral.catchy",children:e}),t?(0,E.tZ)(np,{duration:t}):null,(0,E.tZ)(T.JO,{name:"CaretRightOutlined",size:"small",color:"ds.text.neutral.quiet",sx:{transition:"transform 0.4s linear",transform:`rotateZ(${u?"90deg":"0"})`}})]}),(0,E.tZ)("div",{sx:{overflow:"hidden",transition:"height 0.4s ease-in-out",height:p},children:(0,E.tZ)("div",{ref:_,children:(0,E.BX)("div",{sx:{pt:"16px"},children:[ap(i),a,!S&&l?(0,E.tZ)(c.k,{justifyContent:"flex-end",sx:{pt:"16px"},children:(0,E.tZ)(D.z,{"data-testid":`ContinueSetupGuidelinesBtn-${e}`,mood:"brand",intensity:"quiet",onClick:()=>{l?.(),y("completed")},children:"Continue"})}):null]})})})]})},rp=({isCrdActive:e,currentStep:t,setError:n,stepNumber:a})=>{const{translate:i}=(0,b.Z)(),{showToast:r}=(0,o.p)(),{updateCredentialRiskDetectionActiveStatus:s}=(0,te.u)(um.Q),l=async()=>{const e=await s({active:!0});(0,ne.d6)(e)?(n({hasError:!1,retryFunction:void 0}),(0,y.Kz)(new u.UserSetupRiskDetectionEvent({riskDetectionSetupStep:u.RiskDetectionSetupStep.TurnOn})),r({description:i("team_risk_detection_setup_toast_turned_on"),closeActionLabel:i("team_risk_detection_setup_toast_close")})):n({hasError:!0,retryFunction:()=>{l()}})};return(0,E.tZ)(ip,{title:i("team_risk_detection_setup_activation_title"),description:i("team_risk_detection_setup_activation_description"),duration:i("team_risk_detection_setup_activation_duration"),stepNumber:a,isDefaultOpen:t===a,isCrdActive:e,children:(0,E.tZ)(Qm,{handleActivateCRD:l})})},sp="team_risk_detection_setup_confirm_policy_description",op="team_risk_detection_setup_confirm_policy_checkbox_title",lp=({confirmCrdDeployment:e,currentStep:t,deploymentSoftware:n,goToNextStep:a,isCrdActive:i,isDeploymentConfirmed:r,stepNumber:s})=>{const{translate:o}=(0,b.Z)(),l={[qm.INTUNES]:{cardSubTitle:o(sp),checkboxLabel:o(op)},[qm.GPO]:{cardSubTitle:o("team_risk_detection_setup_confirm_policy_description_gpo"),checkboxLabel:o("team_risk_detection_setup_confirm_policy_checkbox_title_gpo")},[qm.JAMF]:{cardSubTitle:o(sp),checkboxLabel:o(op)}}[n];return(0,E.tZ)(ip,{title:o("team_risk_detection_setup_confirm_policy_title"),description:l.cardSubTitle,duration:o("team_risk_detection_setup_confirm_policy_duration"),stepNumber:s,isDefaultOpen:t===s,onCompleted:r?()=>a():void 0,isCrdActive:i,children:(0,E.tZ)(c.k,{flexDirection:"column",gap:"16px",sx:{mt:"16px"},children:(0,E.tZ)(jn.X,{"data-testid":"ConfirmPolicyCheckbox",label:l.checkboxLabel,onChange:t=>e(t.target.checked),sx:{pb:"2px"}})})})};var cp=n(33484),dp=n(74711);const _p=e=>e.includes("chrome")&&e.includes("edge")?u.RiskDetectionSetupStep.DownloadChromeAndEdgeGpoFile:e.includes("chrome")?u.RiskDetectionSetupStep.DownloadChromeGpoFile:u.RiskDetectionSetupStep.DownloadEdgeGpoFile,up=({selectedBrowsers:e,setupInformation:t,handleClickCopy:n})=>{var a;const{showToast:i}=(0,o.p)(),{translate:s}=(0,b.Z)(),{downloadWindowsGroupPolicyFiles:l}=(0,te.u)(um.Q),d=t.massDeploymentSetupInformation,m=async(t,n)=>{try{const a=dp.Bl.map((e=>e.type)),i=t?[t]:e,r=n?[n]:a;await l({targetedBrowsers:i,files:r}),(0,y.Kz)(new u.UserSetupRiskDetectionEvent({riskDetectionSetupStep:_p(i)}))}catch{i({mood:"danger",description:s("team_risk_detection_setup_download_error_description"),closeActionLabel:s("team_risk_detection_setup_toast_close"),action:{onClick:()=>m(t,n),label:s("team_risk_detection_setup_download_error_retry")}})}},p=n(null!=(a=t.massDeploymentTeamKey)?a:"",s("team_risk_detection_setup_status_token_copied_toast"),u.RiskDetectionSetupStep.CopyGpoConfigurationToken),g=({browser:e})=>{const t=d[e];return t?(0,E.tZ)("div",{sx:ym.DISPLAY_FIELD_WHITE_GRID,children:t.map((t=>(0,E.tZ)(yn.Z,{sx:ym.DISPLAY_FIELD_WHITE,children:(0,E.tZ)(en.C,{"data-testid":`${e}-${t.type}`,label:s("team_risk_detection_setup_gpo_guidelines_script_field_title"),value:t.name,actions:[(0,E.tZ)(D.z,{"data-testid":`downloadButton-${e}-${t.type}`,intensity:"supershy",layout:"iconOnly",icon:"DownloadOutlined",onClick:()=>m(e,t.type)},"DownloadScript")]})},t.name)))}):null};return(0,E.BX)(r.Fragment,{children:[(0,E.BX)(c.k,{alignItems:"center",color:"ds.text.neutral.catchy",children:[(0,E.tZ)(cp.O,{type:"windows",size:"small",sx:{marginRight:"8px"}}),s("team_risk_detection_setup_guidelines_title_intune_windows")]}),(0,E.tZ)(_.n,{children:s.markup("team_risk_detection_setup_guidelines_policies_paragraph_title_intune_markup")}),(0,E.tZ)(_.n,{children:s("team_risk_detection_setup_guidelines_policies_paragraph_gpo_windows")}),(0,E.BX)(yn.Z,{sx:{backgroundColor:"ds.container.agnostic.neutral.quiet"},children:[(0,E.tZ)(c.k,{flexDirection:"row",justifyContent:"space-between",flexWrap:"unset",gap:"16px",children:e.map((e=>(0,E.tZ)(g,{browser:e},e)))}),(0,E.tZ)(D.z,{intensity:"supershy",layout:"iconLeading",icon:"DownloadOutlined",onClick:()=>m(),sx:{alignSelf:"flex-end"},children:s("team_risk_detection_setup_gpo_guidelines_script_field_download_button")},"DownloadScript")]}),(0,E.tZ)(_.n,{children:s.markup("team_risk_detection_setup_gpo_guidelines_token_extra_information_markup")}),(0,E.tZ)(yn.Z,{sx:ym.DISPLAY_FIELD_WHITE,children:(0,E.tZ)(en.C,{label:s("team_risk_detection_setup_gpo_guidelines_token_field_title"),value:t.massDeploymentTeamKey,actions:[(0,E.tZ)(D.z,{"data-testid":`${qm.GPO}-copy-token-button`,intensity:"supershy",layout:"iconLeading",icon:"ActionCopyOutlined",onClick:p,children:s("team_risk_detection_setup_guidelines_token_field_copy_button")},"CopyToken")]})})]})},mp=({setupInformation:e,handleDownloadScript:t,handleClickCopy:n})=>{var a;const{translate:i}=(0,b.Z)();return(0,E.BX)(r.Fragment,{children:[(0,E.BX)(c.k,{alignItems:"center",color:"ds.text.neutral.catchy",children:[(0,E.tZ)(cp.O,{type:"windows",size:"small",sx:{marginRight:"8px"}}),i("team_risk_detection_setup_guidelines_title_intune_windows")]}),(0,E.tZ)(_.n,{children:i.markup("team_risk_detection_setup_guidelines_policies_paragraph_title_intune_markup")}),(0,E.tZ)(_.n,{children:i.markup("team_risk_detection_setup_guidelines_policies_paragraph_intune_windows_markup")}),(0,E.tZ)(yn.Z,{sx:ym.DISPLAY_FIELD_WHITE,children:(0,E.tZ)(en.C,{label:i("team_risk_detection_setup_guidelines_script_field_title"),value:"Dashlane-Risk-Detection-Policies-Script.ps1",actions:[(0,E.tZ)(D.z,{intensity:"supershy",layout:"iconLeading",icon:"DownloadOutlined",onClick:t,children:i("team_risk_detection_setup_guidelines_script_field_download_button")},"DownloadScript")]})}),(0,E.tZ)(yn.Z,{sx:ym.DISPLAY_FIELD_WHITE,children:(0,E.tZ)(en.C,{label:i("team_risk_detection_setup_guidelines_token_field_title"),value:e.massDeploymentTeamKey,"data-testid":"mass-deployment-token-intune",actions:[(0,E.tZ)(D.z,{intensity:"supershy",layout:"iconLeading",icon:"ActionCopyOutlined",onClick:n(null!=(a=e.massDeploymentTeamKey)?a:"",i("team_risk_detection_setup_status_token_copied_toast"),u.RiskDetectionSetupStep.CopyIntuneConfigurationToken),children:i("team_risk_detection_setup_guidelines_token_field_copy_button")},"CopyToken")]})})]})};var pp=n(62878);const gp="team_risk_detection_setup_guidelines_device_configuration_field_copy_button",hp="team_risk_detection_setup_status_value_copied_toast",yp={chrome:u.RiskDetectionSetupStep.CopyJamfPoliciesChromePreferenceDomain,edge:u.RiskDetectionSetupStep.CopyJamfPoliciesEdgePreferenceDomain},bp={chrome:"team_risk_detection_setup_guidelines_preference_domains_fields_label_chrome",edge:"team_risk_detection_setup_guidelines_preference_domains_fields_label_edge"},Sp=({selectedBrowsers:e,setupInformation:t,handleClickCopy:n})=>{var a;const{translate:i}=(0,b.Z)();return(0,E.BX)(r.Fragment,{children:[(0,E.BX)(c.k,{alignItems:"center",color:"ds.text.neutral.catchy",children:[(0,E.tZ)(cp.O,{type:"apple",size:"small",sx:{marginRight:"8px"}}),i("team_risk_detection_setup_guidelines_title_jamf_macos")]}),(0,E.tZ)(_.n,{children:i.markup("team_risk_detection_setup_guidelines_policies_paragraph_part_one_jamf_macos_markup")}),(0,E.tZ)(_.n,{children:i.markup("team_risk_detection_setup_guidelines_policies_paragraph_part_two_jamf_macos_markup")}),(0,E.tZ)(_.n,{children:i.markup("team_risk_detection_setup_guidelines_policies_paragraph_part_three_jamf_macos_markup")}),e.map((e=>{var a;return(0,E.tZ)("div",{children:(0,E.tZ)(yn.Z,{sx:ym.DISPLAY_FIELD_WHITE,children:(0,E.tZ)(en.C,{label:i(bp[e]),value:t.massDeploymentSetupInformation?.extensionPreferenceDomains[e],actions:[(0,E.tZ)(D.z,{intensity:"supershy",layout:"iconLeading",icon:"ActionCopyOutlined",onClick:n(null!=(a=t.massDeploymentSetupInformation?.extensionPreferenceDomains[e])?a:"",i(hp),yp[e]),children:i(gp)},"CopyValue")]})})},e)})),(0,E.tZ)(yn.Z,{sx:ym.DISPLAY_FIELD_WHITE,children:(0,E.tZ)(pp.Y,{label:i("team_risk_detection_setup_guidelines_property_list_fields_label_generic"),value:t.massDeploymentSetupInformation?.extensionPoliciesValue,actions:[(0,E.tZ)(D.z,{intensity:"supershy",layout:"iconLeading",icon:"ActionCopyOutlined",onClick:n(null!=(a=t.massDeploymentSetupInformation?.extensionPoliciesValue)?a:"",i(hp),u.RiskDetectionSetupStep.CopyJamfPoliciesPropertyList),children:i(gp)},"CopyValue")]})})]})};var xp;const fp=()=>(0,E.tZ)(c.k,{justifyContent:"center",sx:{padding:"32px"},children:xp||(xp=(0,E.tZ)(l.Z,{size:32}))}),vp=({selectedBrowsers:e,setSelectedBrowsers:t})=>{const{translate:n}=(0,b.Z)(),a=n=>{if(e.includes(n.target.value)){const a=e.filter((e=>e!==n.target.value));0===a.length?t([Gm.CHROME]):t(a)}else t([...e,n.target.value])};return(0,E.BX)(c.k,{flexWrap:"unset",justifyContent:"space-between",sx:{paddingX:"8px"},children:[(0,E.tZ)(jn.X,{sx:{alignSelf:"flex-start",width:"100%"},label:n("team_risk_detection_setup_deployment_method_browser_option_chrome"),checked:e.includes(Gm.CHROME),value:Gm.CHROME,onChange:a}),(0,E.tZ)(jn.X,{sx:{alignSelf:"flex-start",width:"100%"},label:n("team_risk_detection_setup_deployment_method_browser_option_edge"),checked:e.includes(Gm.EDGE),value:Gm.EDGE,onChange:a})]})};var Cp,Ep;const Zp="team_risk_detection_setup_guidelines_browser_selection_card_subtitle",kp=({currentStep:e,deploymentSoftware:t,goToNextStep:n,handleClickOnCopy:a,isCrdActive:i,massDeploymentSoftwaresTabs:r,selectedBrowsers:s,setSelectedBrowsers:l,setupInformation:d,stepNumber:m})=>{var p,g,h;const{translate:S}=(0,b.Z)(),{showToast:x}=(0,o.p)(),{generateAndDownloadMassDeploymentScript:f}=(0,te.u)(um.Q),v=async()=>{try{await f({targetedBrowsers:s,targetedMassDeploymentSoftware:qm.INTUNES,targetedOS:Vm.WINDOWS}),(0,y.Kz)(new u.UserSetupRiskDetectionEvent({riskDetectionSetupStep:u.RiskDetectionSetupStep.DownloadIntuneScriptFile}))}catch{x({mood:"danger",description:S("team_risk_detection_setup_download_error_description"),closeActionLabel:S("team_risk_detection_setup_toast_close"),action:{onClick:v,label:S("team_risk_detection_setup_download_error_retry")}})}},C=e=>{if(!d)return Cp||(Cp=(0,E.tZ)(fp,{}));switch(e){case qm.GPO:return p||(p=(0,E.tZ)(up,{selectedBrowsers:s,setupInformation:d,handleClickCopy:a}));case qm.INTUNES:return g||(g=(0,E.tZ)(mp,{setupInformation:d,handleDownloadScript:v,handleClickCopy:a}));case qm.JAMF:return h||(h=(0,E.tZ)(Sp,{setupInformation:d,selectedBrowsers:s,handleClickCopy:a}));default:return Ep||(Ep=(0,E.tZ)(fp,{}))}},Z={[qm.INTUNES]:{tabId:jm.INTUNES,tabContentId:Wm.INTUNES,applyPolicySubtitle:S(Zp),applyPolicyComponent:C(qm.INTUNES)},[qm.GPO]:{tabId:jm.GPO,tabContentId:Wm.GPO,applyPolicySubtitle:S("team_risk_detection_setup_guidelines_browser_selection_card_subtitle_gpo_tab"),applyPolicyComponent:C(qm.GPO)},[qm.JAMF]:{tabId:jm.JAMF,tabContentId:Wm.JAMF,applyPolicySubtitle:S(Zp),applyPolicyComponent:C(qm.JAMF)}}[t],k="team_risk_detection_setup_apply_policy_title_generic",D="team_risk_detection_setup_policy_description_generic",T="team_risk_detection_setup_policy_description_link_text_generic",I="ace_team_risk_detection_setup_warning_title_generic",A="ace_team_risk_detection_setup_warning_description_generic",w="team_risk_detection_setup_guidelines_browser_selection_card_title_generic";return(0,E.tZ)(ip,{title:S(k),description:(0,E.BX)(c.k,{flexDirection:"row",children:[(0,E.tZ)(_.n,{textStyle:"ds.title.block.small",color:"ds.text.neutral.standard",sx:{mt:"4px",whiteSpace:"pre-wrap"},children:`${S(D)}, `}),(0,E.tZ)(_.n,{textStyle:"ds.title.block.small",color:"ds.text.neutral.standard",sx:{mt:"4px"},target:"_blank",rel:"noreferrer",href:me.I0,as:"a",children:S(T)})]}),duration:S("team_risk_detection_setup_apply_policy_duration"),stepNumber:m,isDefaultOpen:e===m,onCompleted:()=>n(),isCrdActive:i,children:(0,E.BX)(c.k,{flexDirection:"column",gap:"16px",sx:{mt:"16px"},children:[(0,E.tZ)(rn.k,{title:S(I),mood:"warning",description:S(A),size:"large"}),(0,E.BX)(yn.Z,{sx:{backgroundColor:"ds.background.alternate"},children:[(0,E.tZ)(Ac.m,{fullWidth:!0,tabs:r,defaultTab:0}),(0,E.BX)("div",{id:Z.tabId,"aria-labelledby":Z.tabContentId,children:[(0,E.BX)(yn.Z,{sx:(0,Ee.jM)([ym.SUBCARD,{gap:"unset"}]),children:[(0,E.tZ)(_.n,{textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",sx:{marginBottom:"4px"},children:S(w)}),(0,E.tZ)(_.n,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.quiet",sx:{marginBottom:"8px"},children:Z.applyPolicySubtitle}),(0,E.tZ)(vp,{selectedBrowsers:s,setSelectedBrowsers:l})]}),(0,E.tZ)(yn.Z,{sx:{backgroundColor:"ds.container.agnostic.neutral.supershy"},children:Z.applyPolicyComponent})]})]})]})})},Dp=()=>{const{translate:e}=(0,b.Z)();return(0,E.BX)(c.k,{flexDirection:"column",gap:"16px",sx:{mt:"16px"},children:[(0,E.tZ)(_.n,{children:e.markup("team_risk_detection_gpo_mass_deploy_setup_guidelines_one_markup")}),(0,E.tZ)(_.n,{children:e.markup("team_risk_detection_gpo_mass_deploy_setup_guidelines_two_markup")}),(0,E.tZ)(_.n,{children:e("team_risk_detection_gpo_mass_deploy_after_deployment_information")})]})},Tp={chrome:"team_risk_detection_setup_guidelines_extension_id_update_url_label_chrome",edge:"team_risk_detection_setup_guidelines_extension_id_update_url_label_edge"},Ip={chrome:u.RiskDetectionSetupStep.CopyIntuneChromeDeviceValue,edge:u.RiskDetectionSetupStep.CopyIntuneEdgeDeviceValue},Ap=({selectedBrowsers:e,setupInformation:t,handleClickCopy:n})=>{const{translate:a}=(0,b.Z)();return(0,E.tZ)(c.k,{flexDirection:"column",gap:"16px",sx:{mt:"16px"},children:(0,E.tZ)(yn.Z,{sx:{backgroundColor:"ds.container.agnostic.neutral.quiet"},children:(0,E.BX)(yn.Z,{sx:{backgroundColor:"ds.container.agnostic.neutral.supershy"},children:[(0,E.BX)(c.k,{alignItems:"center",color:"ds.text.neutral.catchy",id:"intune-guidelines","aria-labelledby":"intune-tab",children:[(0,E.tZ)(cp.O,{type:"windows",size:"small",sx:{marginRight:"8px"}}),a("team_risk_detection_setup_guidelines_title_intune_windows")]}),(0,E.tZ)(_.n,{children:a.markup("team_risk_detection_setup_guidelines_force_install_paragraph_title_intune_markup")}),(0,E.tZ)(_.n,{children:a.markup("team_risk_detection_setup_guidelines_force_install_paragraph_intune_windows_markup")}),e.map((e=>{var i;return(0,E.BX)("div",{children:[(0,E.tZ)(yn.Z,{sx:ym.DISPLAY_FIELD_WHITE,children:(0,E.tZ)(en.C,{label:a(Tp[e]),value:t.massDeploymentSetupInformation?.massDeploymentExtensionIDsAndUpdateURLs[e],actions:[(0,E.tZ)(D.z,{intensity:"supershy",layout:"iconLeading",icon:"ActionCopyOutlined",onClick:n(null!=(i=t.massDeploymentSetupInformation?.massDeploymentExtensionIDsAndUpdateURLs[e])?i:"",a("team_risk_detection_setup_status_value_copied_toast"),Ip[e]),children:a("team_risk_detection_setup_guidelines_device_configuration_field_copy_button")},"CopyValue")]})}),e===Gm.CHROME?(0,E.tZ)("div",{onClick:()=>(0,y.Kz)(new u.UserSetupRiskDetectionEvent({riskDetectionSetupStep:u.RiskDetectionSetupStep.ClickChromeAdmxLink})),children:(0,E.tZ)(rn.k,{icon:"FeedbackInfoOutlined",title:a.markup("team_risk_detection_setup_guidelines_import_admx_infobox_markup"),sx:{marginTop:"16px"}})}):null]},e)}))]})})})},wp="team_risk_detection_setup_guidelines_device_configuration_field_copy_button",Op="team_risk_detection_setup_status_value_copied_toast",Np={chrome:"team_risk_detection_setup_guidelines_property_list_fields_label_chrome",edge:"team_risk_detection_setup_guidelines_property_list_fields_label_edge"},Rp={chrome:"team_risk_detection_setup_guidelines_preference_domains_fields_label_chrome",edge:"team_risk_detection_setup_guidelines_preference_domains_fields_label_edge"},Lp={chrome:u.RiskDetectionSetupStep.CopyJamfForceInstallChromePreferenceDomain,edge:u.RiskDetectionSetupStep.CopyJamfForceInstallEdgePreferenceDomain},Bp={chrome:u.RiskDetectionSetupStep.CopyJamfForceInstallChromePropertyList,edge:u.RiskDetectionSetupStep.CopyJamfForceInstallEdgePropertyList},Mp=({selectedBrowsers:e,setupInformation:t,handleClickCopy:n})=>{const{translate:a}=(0,b.Z)();return(0,E.tZ)(yn.Z,{sx:{backgroundColor:"ds.container.agnostic.neutral.quiet",mt:"16px"},children:(0,E.BX)(yn.Z,{sx:{backgroundColor:"ds.container.agnostic.neutral.supershy"},children:[(0,E.BX)(c.k,{alignItems:"center",color:"ds.text.neutral.catchy",id:"intune-guidelines","aria-labelledby":"intune-tab",children:[(0,E.tZ)(cp.O,{type:"apple",size:"small",sx:{marginRight:"8px"}}),a("team_risk_detection_setup_guidelines_title_jamf_macos")]}),(0,E.tZ)(_.n,{children:a.markup("team_risk_detection_setup_guidelines_force_install_paragraph_part_one_jamf_macos_markup")}),(0,E.tZ)(_.n,{children:a.markup("team_risk_detection_setup_guidelines_force_install_paragraph_part_two_jamf_macos_markup")}),(0,E.tZ)(_.n,{children:a.markup("team_risk_detection_setup_guidelines_force_install_paragraph_part_three_jamf_macos_markup")}),e.map((e=>{var i,r;return(0,E.BX)("div",{children:[(0,E.tZ)(yn.Z,{sx:ym.DISPLAY_FIELD_WHITE,children:(0,E.tZ)(en.C,{label:a(Rp[e]),value:t.massDeploymentSetupInformation?.browsersPreferenceDomains[e],actions:[(0,E.tZ)(D.z,{intensity:"supershy",layout:"iconLeading",icon:"ActionCopyOutlined",onClick:n(null!=(i=t.massDeploymentSetupInformation?.browsersPreferenceDomains[e])?i:"",a(Op),Lp[e]),children:a(wp)},"CopyToken")]})}),(0,E.tZ)(yn.Z,{sx:{...ym.DISPLAY_FIELD_WHITE,marginTop:"16px"},children:(0,E.tZ)(pp.Y,{label:a(Np[e]),value:t.massDeploymentSetupInformation?.browsersForceInstallValues[e],actions:[(0,E.tZ)(D.z,{intensity:"supershy",layout:"iconLeading",icon:"ActionCopyOutlined",onClick:n(null!=(r=t.massDeploymentSetupInformation?.browsersForceInstallValues[e])?r:"",a(Op),Bp[e]),children:a(wp)},"CopyValue")]})})]},`jamf-force-install-guidelines-${e}`)}))]})})};var Pp,Up,Xp;const zp="team_risk_detection_setup_mass_deploy_title",Fp="team_risk_detection_setup_mass_deploy_description",qp="team_risk_detection_setup_mass_deploy_duration",Gp=({currentStep:e,deploymentSoftware:t,goToNextStep:n,handleClickOnCopy:a,isCrdActive:i,isDeploymentConfirmed:s,selectedBrowsers:o,setupInformation:l,stepNumber:d})=>{var u,m;const{translate:p}=(0,b.Z)(),g=e=>{if(!l)return Pp||(Pp=(0,E.tZ)(fp,{}));switch(e){case qm.GPO:return Up||(Up=(0,E.tZ)(Dp,{}));case qm.INTUNES:return u||(u=(0,E.tZ)(Ap,{setupInformation:l,selectedBrowsers:o,handleClickCopy:a}));case qm.JAMF:return m||(m=(0,E.tZ)(Mp,{setupInformation:l,selectedBrowsers:o,handleClickCopy:a}));default:return Xp||(Xp=(0,E.tZ)(fp,{}))}},h={[qm.INTUNES]:{cardTitle:p(zp),cardDescription:p(Fp),stepDuration:p(qp),stepHasInfoBox:!1,stepNeedsConfirmation:!1,massDeployComponent:g(qm.INTUNES)},[qm.GPO]:{cardTitle:p("team_risk_detection_setup_mass_deploy_title_gpo"),cardDescription:void 0,stepDuration:void 0,stepHasInfoBox:!0,stepNeedsConfirmation:!0,massDeployComponent:g(qm.GPO)},[qm.JAMF]:{cardTitle:p(zp),cardDescription:p(Fp),stepDuration:p(qp),stepHasInfoBox:!1,stepNeedsConfirmation:!1,massDeployComponent:g(qm.JAMF)}}[t];return(0,E.tZ)(ip,{title:h.cardTitle,description:h.cardDescription,duration:h.stepDuration,stepNumber:d,isDefaultOpen:e===d,onCompleted:!h.stepNeedsConfirmation||s?()=>n():void 0,isCrdActive:i,children:(0,E.BX)(r.Fragment,{children:[h.stepHasInfoBox?(0,E.tZ)(rn.k,{title:(0,E.BX)(c.k,{flexDirection:"row",children:[(0,E.tZ)(_.n,{textStyle:"ds.title.block.small",color:"ds.text.neutral.standard",sx:{mt:"4px",whiteSpace:"pre-wrap"},children:`${p("team_risk_detection_setup_mass_deploy_gpo_info_text")}, `}),(0,E.tZ)(_.n,{textStyle:"ds.title.block.small",color:"ds.text.neutral.standard",sx:{mt:"4px"},target:"_blank",rel:"noreferrer",href:me.As,as:"a",children:`${p("team_risk_detection_setup_mass_deploy_gpo_info_link")}.`})]}),mood:"positive",size:"medium"}):null,h.massDeployComponent]})})};var Vp;const jp="team_risk_detection_setup_toast_close",Wp=({isCrdActive:e,setError:t})=>{const{translate:n}=(0,b.Z)(),{showToast:a}=(0,o.p)(),{selectedMassDeploymentSoftware:i,selectedBrowsers:s,setSelectedBrowsers:c,isDeploymentStepConfirmed:d,confirmCrdDeployment:_,currentStep:p,goToNextStep:g,massDeploymentSoftwaresTabs:h,setupInformation:S,isSetupInfoError:x,isSetupInfoLoading:f}=function(e){const{translate:t}=(0,b.Z)(),n={currentStep:e?0:1,isDeploymentStepConfirmed:!1,selectedBrowsers:[Gm.CHROME],selectedMassDeploymentSoftware:qm.INTUNES},[a,i]=(0,r.useReducer)((function(e,t){return{...e,...t}}),n),s=(e=>{const{status:t,data:n}=(0,m.k)(um.Q,"getMassDeploymentSetupInformation",{targetedBrowsers:e.targetedMassDeploymentBrowsers,targetedMassDeploymentSoftware:e.targetedMassDeploymentSoftware,targetedOS:e.targetedMassDeploymentOS});return t===G.rq.Loading?{isLoading:!0,isError:!1}:t===G.rq.Error?{isLoading:!1,isError:!0}:{massDeploymentSetupInformation:n.massDeploymentSetupInformation,massDeploymentTeamKey:n.massDeploymentTeamKey,isLoading:!1,isError:!1}})({targetedMassDeploymentBrowsers:a.selectedBrowsers,targetedMassDeploymentSoftware:a.selectedMassDeploymentSoftware,targetedMassDeploymentOS:Hm[a.selectedMassDeploymentSoftware]}),o=(0,r.useMemo)((()=>[{id:jm.INTUNES,contentId:Wm.INTUNES,title:t($m),onSelect:()=>i({selectedMassDeploymentSoftware:qm.INTUNES})},{id:jm.GPO,contentId:Wm.GPO,title:t(Km),onSelect:()=>i({selectedMassDeploymentSoftware:qm.GPO})},{id:jm.JAMF,contentId:Wm.JAMF,title:t(Ym),onSelect:()=>i({selectedMassDeploymentSoftware:qm.JAMF})}]),[a.selectedMassDeploymentSoftware]),l=(0,r.useCallback)((e=>{i({selectedMassDeploymentSoftware:e})}),[i]),c=(0,r.useCallback)((e=>{i({selectedBrowsers:e})}),[i]),d=(0,r.useCallback)((e=>{i({isDeploymentStepConfirmed:e})}),[i]),_=(0,r.useCallback)((()=>{i({currentStep:a.currentStep+1})}),[i,a.currentStep]),u=a.selectedMassDeploymentSoftware===qm.INTUNES&&(0,Fm.Ss)(s.massDeploymentSetupInformation)||a.selectedMassDeploymentSoftware===qm.GPO&&(0,Fm.hw)(s.massDeploymentSetupInformation)||a.selectedMassDeploymentSoftware===qm.JAMF&&(0,Fm.kv)(s.massDeploymentSetupInformation)?{massDeploymentSetupInformation:s.massDeploymentSetupInformation,massDeploymentTeamKey:s.massDeploymentTeamKey}:void 0;return{...a,confirmCrdDeployment:d,goToNextStep:_,isSetupInfoError:s.isError,isSetupInfoLoading:s.isLoading,CRDSetupInformation:s,massDeploymentSoftwaresTabs:o,setSelectedMassDeploymentSoftware:l,setSelectedBrowsers:c,setupInformation:u}}(e);(0,r.useEffect)((()=>{(0,y.Nc)(e?u.PageView.TacRiskDetectionSettings:u.PageView.TacRiskDetectionSetup)}),[e]);const v=(e,t,i)=>async()=>{try{await navigator.clipboard.writeText(e),a({description:t,closeActionLabel:n(jp)}),(0,y.Kz)(new u.UserSetupRiskDetectionEvent({riskDetectionSetupStep:i}))}catch{a({mood:"danger",description:n("_common_generic_error"),closeActionLabel:n(jp)})}};return f?Vp||(Vp=(0,E.tZ)(l.Z,{})):x?(t({hasError:!0,retryFunction:()=>t({hasError:!1,retryFunction:void 0})}),null):(0,E.BX)(r.Fragment,{children:[(0,E.tZ)(kp,{stepNumber:1,currentStep:p,deploymentSoftware:i,goToNextStep:g,handleClickOnCopy:v,isCrdActive:e,massDeploymentSoftwaresTabs:h,selectedBrowsers:s,setSelectedBrowsers:c,setupInformation:S}),(0,E.tZ)(lp,{stepNumber:2,confirmCrdDeployment:_,currentStep:p,deploymentSoftware:i,goToNextStep:g,isCrdActive:e,isDeploymentConfirmed:d}),(0,E.tZ)(Gp,{stepNumber:3,currentStep:p,deploymentSoftware:i,goToNextStep:g,handleClickOnCopy:v,isCrdActive:e,isDeploymentConfirmed:d,selectedBrowsers:s,setupInformation:S}),(0,E.tZ)(rp,{stepNumber:4,currentStep:p,isCrdActive:e,setError:t})]})};var Hp,$p,Kp,Yp=n(35068),Qp=n(31423),Jp=n(97958),eg=n(50185),tg=n(64013),ng=n(8944);const ag="risk_detection_top_at_risk_employees_title",ig=({timeScaleAsDays:e,topAtRiskEmployees:t,withDarkBackground:n=!1,isPreview:a=!1})=>{const{translate:i}=(0,b.Z)(),r=new Date;return(0,E.BX)(yn.Z,{sx:{backgroundColor:n?"ds.container.agnostic.neutral.standard":"ds.container.agnostic.neutral.supershy"},children:[(0,E.BX)("div",{sx:{display:"flex",justifyContent:"space-between"},children:[(0,E.BX)("div",{children:[(0,E.BX)(c.k,{sx:{alignItems:"center",gap:"4px"},children:[(0,E.tZ)(d.X,{as:"h2",textStyle:"ds.title.section.medium",color:"ds.text.neutral.catchy",children:i(ag)}),(0,E.tZ)(xo.u,{content:i("risk_detection_top_at_risk_employees_title_tooltip"),wrapTrigger:!0,children:Hp||(Hp=(0,E.tZ)(T.JO,{name:"FeedbackInfoOutlined",size:"small",color:"ds.text.neutral.quiet"}))})]}),(0,E.tZ)(_.n,{textStyle:"ds.body.helper.regular",children:i("risk_detection_top_at_risk_employees_subtitle",{count:e})})]}),a?(0,E.BX)(_.n,{textStyle:"ds.body.helper.regular",color:"ds.text.neutral.quiet",sx:{display:"flex",alignItems:"center",gap:"4px"},children:[$p||($p=(0,E.tZ)(T.JO,{name:"ActionRevealOutlined",size:"small"})),i("risk_detection_preview_warning")]}):null]}),(0,E.BX)(Yp.i,{"aria-label":i(ag),children:[(0,E.BX)(Qp.s,{sx:{backgroundColor:"ds.container.agnostic.neutral.quiet"},children:[(0,E.tZ)(Jp.b,{isRowHeader:!0,width:"2fr",children:i("risk_detection_top_at_risk_employees_employee")}),(0,E.tZ)(Jp.b,{children:i("risk_detection_top_at_risk_compromised_passwords")}),(0,E.tZ)(Jp.b,{children:i("risk_detection_top_at_risk_weak_passwords")}),(0,E.tZ)(Jp.b,{children:i("risk_detection_top_at_risk_last_activity")}),(0,E.tZ)(Jp.b,{children:i("risk_detection_top_at_risk_date")})]}),(0,E.tZ)(eg.i,{sx:{backgroundColor:"ds.container.agnostic.neutral.supershy"},children:t.map((e=>(0,E.BX)(tg.S,{children:[(0,E.tZ)(ng.p,{children:(0,E.BX)(c.k,{sx:{alignItems:"center",gap:"12px"},children:[Kp||(Kp=(0,E.tZ)(Qi.v,{name:"UsersOutlined"}))," ",e.authorLogin]})}),(0,E.tZ)(ng.p,{sx:{color:"ds.text.danger.standard"},children:e.compromisedCount}),(0,E.tZ)(ng.p,{sx:{color:"ds.text.warning.standard"},children:e.weakCount}),(0,E.tZ)(ng.p,{children:i("compromised"===e.lastActivity.type?"risk_detection_top_at_risk_last_activity_compromised":"risk_detection_top_at_risk_last_activity_weak",{domain:e.lastActivity.domain})}),(0,E.tZ)(ng.p,{children:i("risk_detection_top_at_risk_days_difference",{count:(0,Dc.Z)(r,new Date(e.lastActivity.date))})})]},e.authorLogin)))})]})]})},rg=({title:e,description:t,mood:n,score:a=0})=>(0,E.BX)(c.k,{sx:{flex:1,flexDirection:"row",flexWrap:"nowrap",gap:"16px"},children:[(0,E.tZ)(_.n,{textStyle:"ds.specialty.spotlight.medium",color:"positive"===n?"ds.text.oddity.password-digits":`ds.text.${n}.standard`,children:null!=a?a:"-"}),(0,E.BX)(c.k,{flexDirection:"column",children:[(0,E.tZ)(_.n,{textStyle:"ds.body.standard.strong",children:e}),(0,E.tZ)(_.n,{textStyle:"ds.body.helper.regular",children:t})]})]});var sg,og=n(13091),lg=n(46214);const cg={EMPTY_STATE_TITLE:"team_risk_detection_empty_risks_infobox_title",EMPTY_STATE_DESCRIPTION:"team_risk_detection_empty_risks_infobox_description",KEYS_HEADING:"team_risk_detection_insights_graph_keys",LEGEND_AT_RISK:"team_risk_detection_insights_graph_key_at_risk",LEGEND_WEAK_PASSWORDS:"team_risk_detection_insights_graph_key_weak",LEGEND_COMPROMISED_PASSWORDS:"team_risk_detection_insights_graph_key_compromised"},dg={logins:"#0070bf",compromised:"#FF7385",weak:"#ED892D"},_g=e=>{const{color:t}=e;return(0,E.tZ)("div",{sx:{width:"9px"},children:(0,E.tZ)("svg",{viewBox:"0 0 2 2",xmlns:"http://www.w3.org/2000/svg",children:(0,E.tZ)("line",{x1:"0",y1:"1",x2:"2",y2:"1",stroke:t,strokeWidth:"0.4"})})})},ug={LEGEND_WRAPPER:{justifyContent:"space-around",alignItems:"center",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"4px 32px",position:"relative","&::before":{content:'""',position:"absolute",top:0,left:"50%",width:"1px",height:"100%",backgroundColor:"ds.border.neutral.quiet.idle",transform:"translateX(-50%)"},"@container (max-width: 600px)":{gridTemplateColumns:"1fr","&::before":{display:"none"}}},LEGEND_ENTRY:{display:"grid",gridTemplateColumns:"9px auto",alignItems:"baseline",gap:"4px","@container (max-width: 600px)":{gridColumnStart:"unset",gridColumnEnd:"unset"}}},mg=({hasLogs:e,graphData:t,timeScale:n})=>{const{translate:a}=(0,b.Z)(),i=t?t.reduce(((e,{nLogins:t,nWeak:n,nCompromised:a})=>Math.max(e,t,n,a)),10):0,r=10*Math.ceil(i/10),s=e=>{const t=new Date(e);switch(n){case"week":return a.shortDate(t,fn.qG.L_M_D);case"month":return`${a.shortDate(t,fn.qG.L_M_D)} - ${a.shortDate((0,og.Z)(t),fn.qG.L_M_D)}`;case"year":return a.shortDate(t,fn.qG.MMM)}},o=({color:e})=>(0,E.tZ)("span",{sx:{background:e,width:"6px",height:"6px",borderRadius:"50%",alignsSelf:"center"}});return e&&t?(0,E.BX)("div",{children:[(0,E.tZ)(xc.h,{height:220,children:(0,E.BX)(fc.w,{data:t,children:[(0,E.tZ)(Ec.u,{content:({active:e,payload:t,label:n})=>{var i,r,l;return e&&t&&t.length?(0,E.BX)(c.k,{flexDirection:"column",gap:"4px",sx:{padding:"8px",borderRadius:"4px",background:"ds.container.agnostic.neutral.quiet",boxShadow:"0px 4px 8px rgba(0, 0, 0, 0.16)"},children:[(0,E.tZ)(d.X,{as:"h5",textStyle:"ds.title.supporting.small",color:"ds.text.neutral.catchy",children:s(n)}),(0,E.BX)(c.k,{flexDirection:"row",gap:"4px",alignItems:"center",children:[(0,E.tZ)(o,{color:dg.logins}),(0,E.tZ)(_.n,{textStyle:"ds.body.helper.regular",color:"ds.text.neutral.standard",children:`${null!=(i=t[0].value?.toString())?i:"-"} ${a(cg.LEGEND_AT_RISK)}`})]}),(0,E.BX)(c.k,{flexDirection:"row",gap:"4px",alignItems:"center",children:[(0,E.tZ)(o,{color:dg.weak}),(0,E.tZ)(_.n,{textStyle:"ds.body.helper.regular",color:"ds.text.neutral.standard",children:`${null!=(r=t[1].value?.toString())?r:"-"} ${a(cg.LEGEND_WEAK_PASSWORDS)}`})]}),(0,E.BX)(c.k,{flexDirection:"row",gap:"4px",alignItems:"center",children:[(0,E.tZ)(o,{color:dg.compromised}),(0,E.tZ)(_.n,{textStyle:"ds.body.helper.regular",color:"ds.text.neutral.standard",children:`${null!=(l=t[2].value?.toString())?l:"-"} ${a(cg.LEGEND_COMPROMISED_PASSWORDS)}`})]})]}):null}}),sg||(sg=(0,E.tZ)(vc.q,{vertical:!1})),(0,E.tZ)(Cc.B,{domain:[0,r],fontSize:"small"}),(0,E.tZ)(Nc.K,{dataKey:"startDate",fontSize:"small",tickFormatter:s}),(0,E.tZ)(Zc.x,{dataKey:"nLogins",type:"linear",stroke:dg.logins,strokeWidth:"2",isAnimationActive:!1}),(0,E.tZ)(Zc.x,{dataKey:"nWeak",type:"linear",stroke:dg.weak,strokeWidth:"2",isAnimationActive:!1}),(0,E.tZ)(Zc.x,{dataKey:"nCompromised",type:"linear",stroke:dg.compromised,strokeWidth:"2",isAnimationActive:!1})]})}),(0,E.tZ)(yn.Z,{sx:{marginTop:"12px",padding:"8px 32px",gap:"24px",backgroundColor:"ds.container.agnostic.neutral.quiet",borderColor:"ds.border.neutral.quiet.idle",containerType:"inline-size"},children:(0,E.tZ)("div",{sx:ug.LEGEND_WRAPPER,children:[{color:dg.logins,label:cg.LEGEND_AT_RISK},{color:dg.weak,label:cg.LEGEND_WEAK_PASSWORDS,sx:{gridColumnStart:2,gridColumnEnd:2}},{color:dg.compromised,label:cg.LEGEND_COMPROMISED_PASSWORDS,sx:{gridColumnStart:2,gridColumnEnd:2}}].map((({color:e,label:t,sx:n})=>(0,E.BX)("div",{sx:(0,Ee.jM)([ug.LEGEND_ENTRY,null!=n?n:{}]),children:[(0,E.tZ)(_g,{color:e}),(0,E.tZ)(_.n,{textStyle:"ds.body.helper.regular",color:"ds.text.neutral.quiet",children:a(t)})]},t)))})})]}):(0,E.tZ)(c.k,{flexDirection:"row",justifyContent:"center",sx:{position:"relative",textAlign:"center",flex:1,background:`url("${lg}") center / contain no-repeat`},children:(0,E.BX)(c.k,{justifyContent:"center",flexDirection:"column",gap:"8px",sx:{maxWidth:"520px"},children:[(0,E.tZ)(d.X,{as:"h3",color:"ds.text.neutral.catchy",textStyle:"ds.title.block.medium",children:a(cg.EMPTY_STATE_TITLE)}),(0,E.tZ)(_.n,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",children:a(cg.EMPTY_STATE_DESCRIPTION)})]})})};var pg,gg,hg,yg,bg,Sg,xg;const fg=({summaryData:e,timeScale:t,timeScaleAsDays:n,hasLogs:a,withDarkBackground:i=!1,isPreview:r=!1})=>{const{translate:s}=(0,b.Z)(),{riskDetectionHistory:o}=e,{nLogins:l,nWeak:u,nCompromised:m}=e.insights;return(0,E.BX)(yn.Z,{sx:{backgroundColor:i?"ds.container.agnostic.neutral.standard":"ds.container.agnostic.neutral.supershy"},children:[(0,E.BX)(c.k,{justifyContent:"space-between",children:[(0,E.BX)("div",{children:[(0,E.tZ)(c.k,{sx:{alignItems:"center",gap:"4px"},children:(0,E.tZ)(d.X,{as:"h2",textStyle:"ds.title.section.medium",color:"ds.text.neutral.catchy",children:s("risk_detection_summary_title")})}),(0,E.tZ)(_.n,{textStyle:"ds.body.helper.regular",children:s("risk_detection_employees_subtitle",{count:n})})]}),r?(0,E.BX)(_.n,{textStyle:"ds.body.helper.regular",color:"ds.text.neutral.quiet",sx:{display:"flex",alignItems:"center",gap:"4px"},children:[pg||(pg=(0,E.tZ)(T.JO,{name:"ActionRevealOutlined",size:"small"})),s("risk_detection_preview_warning")]}):null]}),(0,E.BX)(c.k,{sx:{gap:"16px",flexDirection:"row",flexWrap:"nowrap"},children:[(0,E.BX)(c.k,{sx:{flex:"1 42%",gap:"16px",flexDirection:"column"},children:[(0,E.BX)(yn.Z,{sx:{display:"flex",flexDirection:"column",maxWidth:"100%",padding:"24px",gap:"24px",backgroundColor:"ds.container.agnostic.neutral.supershy",borderColor:"ds.border.neutral.quiet.idle"},children:[(0,E.BX)(c.k,{sx:{alignItems:"center",gap:"4px"},children:[gg||(gg=(0,E.tZ)(T.JO,{name:"UsersOutlined",color:"ds.text.neutral.standard"})),(0,E.tZ)(d.X,{as:"h3",textStyle:"ds.title.supporting.small",color:"ds.text.neutral.standard",children:s("risk_detection_employees_title")}),(0,E.tZ)(xo.u,{content:s("risk_detection_employees_tooltip"),wrapTrigger:!0,children:hg||(hg=(0,E.tZ)(T.JO,{name:"FeedbackInfoOutlined",size:"xsmall",color:"ds.text.neutral.standard"}))})]}),(0,E.tZ)(c.k,{flexDirection:"row",gap:"24px",children:(0,E.tZ)(rg,{title:s("risk_detection_at_risk_employee_title"),description:s("risk_detection_at_risk_employee_subtitle"),mood:"positive",score:a?l:null})})]}),(0,E.BX)(yn.Z,{sx:{display:"flex",flexDirection:"column",maxWidth:"100%",padding:"24px",gap:"24px",backgroundColor:"ds.container.agnostic.neutral.supershy",borderColor:"ds.border.neutral.quiet.idle"},children:[(0,E.BX)(c.k,{sx:{alignItems:"center",gap:"4px"},children:[yg||(yg=(0,E.tZ)(T.JO,{name:"ItemLoginOutlined",color:"ds.text.neutral.standard"})),(0,E.tZ)(d.X,{as:"h3",textStyle:"ds.title.supporting.small",color:"ds.text.neutral.standard",children:s("risk_detection_passwords_title")}),(0,E.tZ)(xo.u,{content:s("risk_detection_passwords_tooltip"),wrapTrigger:!0,children:bg||(bg=(0,E.tZ)(T.JO,{name:"FeedbackInfoOutlined",size:"xsmall",color:"ds.text.neutral.standard"}))})]}),(0,E.BX)(c.k,{flexDirection:"column",gap:"24px",children:[(0,E.tZ)(rg,{title:s("risk_detection_passwords_compromised_title"),description:s("risk_detection_passwords_compromised_subtitle"),mood:"warning",score:a?m:null}),(0,E.tZ)(rg,{title:s("risk_detection_passwords_weak_title"),description:s("risk_detection_passwords_weak_subtitle"),mood:"danger",score:a?u:null})]})]})]}),(0,E.BX)(yn.Z,{gap:"24px",sx:{flex:"58% 1",flexDirection:"column",borderRadius:"8px",padding:"24px",maxWidth:"100%",backgroundColor:"ds.container.agnostic.neutral.supershy",borderColor:"ds.border.neutral.quiet.idle"},children:[(0,E.BX)(c.k,{sx:{alignItems:"center",gap:"4px"},children:[Sg||(Sg=(0,E.tZ)(T.JO,{name:"RiskDetectionOutlined",color:"ds.text.neutral.standard"})),(0,E.tZ)(d.X,{as:"h3",textStyle:"ds.title.supporting.small",color:"ds.text.neutral.standard",children:s("risk_detection_activity_title")}),(0,E.tZ)(xo.u,{content:s("risk_detection_activity_tooltip"),wrapTrigger:!0,children:xg||(xg=(0,E.tZ)(T.JO,{name:"FeedbackInfoOutlined",size:"xsmall",color:"ds.text.neutral.standard"}))})]}),(0,E.tZ)(mg,{hasLogs:a,graphData:o,timeScale:t})]})]})]})};var vg;const Cg="risk_detection_time_frame_label",Eg="crd.adminHasSeenLogFromInsights",Zg={categories:[qs.s.RiskDetection]},kg=({setError:e,SubPageNavigation:t})=>{var n,i;const{translate:s}=(0,b.Z)(),[o,d]=(0,r.useState)(!1),[p,g]=(0,r.useState)("week"),[h,S]=(0,r.useState)(Uo(Bo.LAST_WEEK)),x=(0,m.k)(um.Q,"getRiskDetectionInsights",{timeScale:p}),{list:f,hasMore:v,isLoading:C,hasError:Z,loadMore:k,applyFilters:I}=((e,t,n,a)=>{const[i,s]=(0,r.useState)(!1),[o,l]=(0,r.useState)(a),{initiateActivityLogsRetrieval:c,loadNextActivityLogs:d}=(0,te.u)(Ro.g),{data:_,status:u}=(0,m.k)(Ro.g,"activityLogs");(0,r.useEffect)((()=>{i||(c({startDate:e,endDate:t,filters:o}),s(!0))}),[t,o,i,e,c]);const p=u===G.rq.Success&&_.hasMoreData,g=u===G.rq.Success?_.logs:[],h=u!==G.rq.Success||_?.status===Lo.Q.LOADING||p&&0===_?.logs.length;return{list:g,hasMore:p,isLoading:!i||h,hasError:u===G.rq.Error||_?.status===Lo.Q.ERROR,loadMore:()=>d(void 0),applyFilters:e=>{l(e),s(!1)}}})(h.startDate,h.endDate,0,Zg),A=(0,pl.Y)(Fr.t,{hasSeenCRDRisksFoundInfobox:{},hasSeenWaitingForCRDInsightsInfobox:{}},[]),{markCRDRisksFoundInfoboxSeen:w,markHasSeenWaitingForCRDInsightsInfoboxCommand:O}=(0,te.u)(Fr.t),{computeRiskDetectionInsights:N}=(0,te.u)(um.Q),R=(0,Pe.o)(ke.v.CRDPreviewForTrials),L=(e=>"week"===e?7:"month"===e?30:365)(p),B=!!((null!=(n=x.data?.insights.nCompromised)?n:0)+(null!=(i=x.data?.insights.nWeak)?i:0));(0,r.useEffect)((()=>{(0,y.Nc)(u.PageView.TacRiskDetectionInsights)}),[]),(0,r.useEffect)((()=>{N({timescale:p})}),[p]),(0,r.useEffect)((()=>{x.status!==G.rq.Error&&"FAILURE"!==x.data?.status||(e({hasError:!0,retryFunction:()=>{e({hasError:!1})}}),(0,y.Kz)(new u.UserSetupRiskDetectionEvent({riskDetectionSetupStep:u.RiskDetectionSetupStep.ErrorLoadRiskDetectionInsights}))),(async()=>{const e=await(0,Gs.U)(Eg).catch((()=>null));e&&!e[Eg]&&B&&(0,Vs.t)({[Eg]:!0}).then((()=>(0,y.Kz)(new u.UserSetupRiskDetectionEvent({riskDetectionSetupStep:u.RiskDetectionSetupStep.AdminSeeCrdLogFromInsights})))).catch((()=>{}))})()}),[x.data?.status]);const M=B&&A.hasSeenCRDRisksFoundInfobox.status===G.rq.Success&&!A.hasSeenCRDRisksFoundInfobox.data,P=!M&&A.hasSeenWaitingForCRDInsightsInfobox.status===G.rq.Success&&!A.hasSeenWaitingForCRDInsightsInfobox.data&&R;return x.status===G.rq.Loading||"LOADING"===x.data?.status||0===x.data?.lastUpdateTimestamp?(0,E.tZ)(c.k,{sx:{alignItems:"center",justifyContent:"center",flex:1},children:vg||(vg=(0,E.tZ)(l.Z,{size:160}))}):x.status===G.rq.Error||"FAILURE"===x.data?.status||Z?(0,E.tZ)(c.k,{sx:{alignItems:"center",justifyContent:"center",flex:1},children:(0,E.BX)(c.k,{sx:{flexFlow:"column",alignItems:"center",gap:"40px"},children:[(0,E.tZ)(T.JO,{name:"FeedbackFailOutlined",sx:{width:64,height:64},color:"ds.text.danger.standard"}),(0,E.BX)(c.k,{sx:{flexFlow:"column",alignItems:"center",gap:"8px"},children:[(0,E.tZ)(_.n,{textStyle:"ds.title.section.large",color:"ds.text.danger.standard",as:"h2",children:s("team_risk_detection_setup_error_heading")}),(0,E.tZ)(_.n,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",as:"p",children:s("team_risk_detection_setup_error_generic_description")})]}),(0,E.tZ)($t.Q,{isExternal:!0,href:a.DC,children:s("team_risk_detection_setup_error_help_center_link")})]})}):(0,E.BX)(r.Fragment,{children:[M?(0,E.tZ)(rn.k,{mood:"brand",icon:"TipOutlined",size:"large",title:s("team_risk_detection_insights_infobox_risks_detected_title"),description:s("team_risk_detection_insights_infobox_risks_detected_description"),actions:[(0,E.tZ)(D.z,{intensity:"quiet",size:"small",onClick:()=>w(),children:"Dismiss"},"dismiss")]}):P?(0,E.tZ)(rn.k,{size:"large",title:s("team_risk_detection_insights_infobox_waiting_insights_title"),description:s("team_risk_detection_insights_infobox_waiting_insights_description"),actions:[(0,E.tZ)(D.z,{intensity:"quiet",size:"small",onClick:()=>O(),children:s("team_risk_detection_insights_infobox_dismiss")},"dismiss")]}):null,(0,E.BX)(c.k,{sx:{justifyContent:"space-between"},children:[t,(0,E.BX)(c.k,{sx:{gap:"16px"},children:[(0,E.BX)(X.h_,{children:[(0,E.tZ)(X.sB,{mood:"neutral",intensity:"quiet",showCaret:!0,children:s(Cg,{count:L})}),(0,E.BX)(X.Nv,{children:[(0,E.tZ)(F.h,{label:s(Cg,{count:7}),onSelect:()=>{g("week"),S(Uo(Bo.LAST_WEEK)),I(Zg),(0,y.Kz)(new u.UserSetupRiskDetectionEvent({riskDetectionSetupStep:u.RiskDetectionSetupStep.FilterLogsLast7Days}))}}),(0,E.tZ)(F.h,{label:s(Cg,{count:30}),onSelect:()=>{g("month"),S(Uo(Bo.LAST_MONTH)),I(Zg),(0,y.Kz)(new u.UserSetupRiskDetectionEvent({riskDetectionSetupStep:u.RiskDetectionSetupStep.FilterLogsLast30Days}))}})]})]}),(0,E.tZ)(D.z,{onClick:()=>{d(!0),(0,y.Kz)(new u.UserSetupRiskDetectionEvent({riskDetectionSetupStep:u.RiskDetectionSetupStep.DownloadRiskActivityCsv}))},disabled:C||0===x.data.insights.nLogins,layout:"iconLeading",icon:"DownloadOutlined",children:s("risk_detection_download_label")})]})]}),(0,E.tZ)(fg,{summaryData:x?.data,timeScale:p,timeScaleAsDays:L,hasLogs:B}),(0,E.tZ)(ig,{timeScaleAsDays:L,topAtRiskEmployees:x.data?.topAtRiskEmployees}),(0,E.tZ)(So,{isOpen:o,areLogsLoading:C,hasMoreLogs:v,logs:f,loadMoreLogs:k,onClose:()=>d(!1)})]})},Dg=({active:e,selectedTab:t,setSelectedTab:n})=>{const{translate:a}=(0,b.Z)(),i=[{id:"tab-insights",title:a("team_risk_detection_tabs_insights"),contentId:"content-insights",onSelect:()=>{n("insights")}},{id:"tab-settings",title:a("team_risk_detection_tabs_settings"),contentId:"content-settings",onSelect:()=>{n("settings")}}];return e?(0,E.tZ)(Ac.m,{tabs:i,defaultTab:"settings"===t?1:0}):null};var Tg;const Ig=({token:e,active:t,setError:n})=>{const a=hm(),[i,s]=(0,r.useState)(t?"insights":"settings"),o=(0,E.tZ)(Dg,{active:!0,selectedTab:i,setSelectedTab:s});return(0,E.BX)(r.Fragment,{children:["settings"===i?(0,E.tZ)("div",{"aria-labelledby":"tab-settings",id:"content-settings",sx:{flex:1},children:(0,E.tZ)(di,{fullWidth:!0,secondaryContentWidth:"272px",reducedVerticalPadding:!0,mainContent:(0,E.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"10px"},children:[o,t?(0,E.BX)(r.Fragment,{children:[(0,E.tZ)(zm,{token:e,setError:n}),(0,E.tZ)(Wp,{isCrdActive:!0,setError:n})]}):(0,E.tZ)(Wp,{isCrdActive:!1,setError:n})]}),secondaryContent:(0,E.BX)(Ce.T5p,{gap:"16px",sx:{"@media screen and (min-width: 896px)":{marginTop:"46px"}},children:[Tg||(Tg=(0,E.tZ)(xm,{showSetupTips:!0})),a?null:(0,E.tZ)(gm,{featureType:mm.CRD})]})})}):null,"insights"===i?(0,E.tZ)(c.k,{"aria-labelledby":"tab-insights",id:"content-insights",sx:{flex:1},children:(0,E.tZ)(c.k,{flexDirection:"column",gap:"16px",sx:{padding:"16px 42px",flex:1},children:(0,E.tZ)(kg,{setError:n,SubPageNavigation:o})})}):null]})};var Ag;const wg=({token:e,active:t,setError:n})=>(0,Pe.o)(ke.v.CRDEnhancements)?Ag||(Ag=(0,E.tZ)(Bm,{})):(0,E.tZ)(Ig,{token:e,active:t,setError:n});var Og=n(63794);const Ng={error:null,status:"SUCCESS",insights:{nLogins:300,nWeak:230,nCompromised:572},riskDetectionHistory:[{startDate:1511926e6,endDate:1514517999999,nLogins:230,nWeak:300,nCompromised:572},{startDate:1611926e6,endDate:1614517999999,nLogins:230,nWeak:300,nCompromised:572},{startDate:1711926e6,endDate:1714517999999,nLogins:100,nWeak:194,nCompromised:50}],hasLogsInLastYear:!1,lastUpdateTimestamp:100,topAtRiskEmployees:[{authorLogin:"bart.biemans@verovenn.com",weakCount:28,compromisedCount:90,lastActivity:{domain:"dropbox.com",type:"compromised",date:1742725473281}},{authorLogin:"debra.desikan",weakCount:28,compromisedCount:89,lastActivity:{domain:"dropbox.com",type:"compromised",date:1742725473281}},{authorLogin:"emilia.egbert@verovenn.com",weakCount:28,compromisedCount:88,lastActivity:{domain:"dropbox.com",type:"compromised",date:1742725473281}},{authorLogin:"atem.ayouba",weakCount:28,compromisedCount:88,lastActivity:{domain:"dropbox.com",type:"compromised",date:1742725473281}},{authorLogin:"michael.fake@verovenn.com",weakCount:28,compromisedCount:89,lastActivity:{domain:"dropbox.com",type:"compromised",date:1742725473281}},{authorLogin:"sarah.lorem@verovenn.com",weakCount:28,compromisedCount:78,lastActivity:{domain:"dropbox.com",type:"compromised",date:1742725473281}},{authorLogin:"sarah.lorem@verovenn.com",weakCount:28,compromisedCount:77,lastActivity:{domain:"dropbox.com",type:"compromised",date:1742725473281}}]};var Rg;const Lg="team_risk_detection_preview_insights_infobox_learn",Bg="team_risk_detection_preview_insights_infobox_setup",Mg=({setError:e})=>{const{translate:t}=(0,b.Z)(),{generateMassDeploymentTeamKey:n}=(0,te.u)(um.Q);(0,r.useEffect)((()=>{(0,y.Nc)(u.PageView.TacRiskDetectionInsightsPreview)}),[]);const a=[{id:"tab-insights",title:t("team_risk_detection_tabs_insights"),contentId:"content-insights",onSelect:()=>{}}],i=(0,E.tZ)(Ac.m,{tabs:a,defaultTab:0});return(0,E.tZ)(c.k,{"aria-labelledby":"tab-insights",id:"content-insights",sx:{flex:1},children:(0,E.BX)(c.k,{flexDirection:"column",gap:"16px",sx:{padding:"16px 42px",flex:1},children:[(0,E.tZ)(rn.k,{icon:"TipOutlined",mood:"brand",title:t("team_risk_detection_preview_insights_infobox_title"),description:t("team_risk_detection_preview_insights_infobox_description"),size:"large",actions:[(0,E.tZ)(D.z,{onClick:()=>{(0,y.Kz)(new u.UserOpenHelpCenterEvent({helpCenterArticleCta:u.HelpCenterArticleCta.SeeRiskDetectionSetupGuide})),(0,W.Yo)(Og.zI)},intensity:"quiet",children:t(Lg)},Lg),(0,E.tZ)(D.z,{onClick:async()=>{(0,ne.hx)(await n())&&e(),(0,y.Kz)(new u.UserSetupRiskDetectionEvent({riskDetectionSetupStep:u.RiskDetectionSetupStep.StartSetup}))},intensity:"catchy",children:t(Bg)},Bg)]}),(0,E.BX)(c.k,{sx:{justifyContent:"space-between"},children:[i,(0,E.BX)(c.k,{sx:{gap:"16px"},children:[(0,E.tZ)(D.z,{mood:"neutral",intensity:"quiet",icon:"CaretDownOutlined",disabled:!0,layout:"iconTrailing",children:t("risk_detection_time_frame_label",{count:30})}),(0,E.tZ)(D.z,{disabled:!0,layout:"iconLeading",icon:"DownloadOutlined",children:t("risk_detection_download_label")})]})]}),Rg||(Rg=(0,E.tZ)(fg,{withDarkBackground:!0,summaryData:Ng,timeScale:"month",timeScaleAsDays:30,hasLogs:!0,isPreview:!0})),(0,E.tZ)(ig,{withDarkBackground:!0,timeScaleAsDays:30,topAtRiskEmployees:Ng.topAtRiskEmployees,isPreview:!0})]})})};var Pg,Ug;const Xg=({active:e,error:t,isExistingBusinessPlusTrial:n,massDeploymentTeamKey:a,setError:i,shouldSeePreviewPage:r,shouldSeePaywall:s,setStartTrialDialogOpen:o})=>void 0===s?(0,E.tZ)(c.k,{sx:{alignItems:"center",justifyContent:"center",flex:1},children:Pg||(Pg=(0,E.tZ)(l.Z,{size:160}))}):s?(0,E.tZ)(Im,{setStartTrialDialogOpen:o}):t.hasError?(0,E.tZ)(km,{retryFunction:()=>{i({hasError:!1})}}):a?(0,E.tZ)(wg,{token:a,active:!!e,setError:i}):r&&!a?(0,E.tZ)(Mg,{setError:()=>i({hasError:!0,retryFunction:void 0})}):(0,E.tZ)(Zm,{isExistingBusinessPlusTrial:n,setError:()=>i({hasError:!0,retryFunction:void 0})}),zg=()=>{const e=(0,Nm.S)(),{routes:t}=(0,Xo.Xo)(),n=(0,Ve.k6)(),{translate:a}=(0,b.Z)(),i=(0,$.C)(),s=hm(),o=Rm(),[u,m]=(0,r.useState)({hasError:!1,retryFunction:void 0}),[p,g]=(0,r.useState)(!1),h=e?.riskDetection.enabled,y=(0,dm.C)(),{isShowInsightsPageLoading:S,showInsightsPage:x}=(()=>{const e=(0,Pe.o)(ke.v.CRDPreviewForTrials),t=(0,$.C)(),n=(0,gt.rp)(["riskDetection"]),a=(0,dm.C)();if(null==e||a.isLoading||a.hasError||!t)return{isShowInsightsPageLoading:!0,showInsightsPage:!1};const{massDeploymentTeamKey:i}=a;return{isShowInsightsPageLoading:!1,showInsightsPage:e&&t.isFreeTrial&&n&&!i}})();if(S)return null;if(y.isLoading||!i)return Ug||(Ug=(0,E.tZ)(c.k,{justifyContent:"center",children:(0,E.tZ)(l.Z,{size:75})}));if(y.hasError)return n.push(t.teamDashboardRoutePath),null;const{massDeploymentTeamKey:f,active:v}=y;return(0,E.BX)(r.Fragment,{children:[(0,E.BX)("div",{sx:{px:"48px",pt:"32px",pb:"12px"},children:[(0,E.BX)(c.k,{alignItems:"center",gap:"8px",sx:{pb:"8px"},children:[(0,E.tZ)(d.X,{as:"h1",textStyle:"ds.title.section.large",color:"ds.text.neutral.catchy",children:a("team_risk_detection_page_main_header")}),s||o?null:(0,E.tZ)(pe.C,{label:a("team_omnix_badge_label"),mood:"brand",intensity:"quiet",layout:"iconLeading",iconName:"PremiumOutlined"})]}),(0,E.tZ)(_.n,{color:"ds.text.neutral.standard",children:a("team_risk_detection_page_main_header_description")})]}),(0,E.tZ)(Xg,{active:v,error:u,isExistingBusinessPlusTrial:o,massDeploymentTeamKey:f,setError:m,shouldSeePaywall:void 0===h?void 0:!h,shouldSeePreviewPage:x,setStartTrialDialogOpen:g}),(0,E.tZ)(Om,{isStartTrialDialogOpen:p,setStartTrialDialogOpen:g})]})},Fg=e=>(0,E.tZ)("div",{className:"container--INT3GORhR4",children:e.children});var qg=n(37222),Gg=n(14691);const Vg="group_name_already_in_use";function jg(e,t){return!e.some((e=>e.name===t))}var Wg;const Hg=({children:e})=>(0,E.BX)(c.k,{flexDirection:"column",alignItems:"center",gap:"24px",sx:{marginTop:"48px"},children:[Wg||(Wg=(0,E.tZ)(Qi.v,{name:"FeedbackFailOutlined",mood:"danger",size:"xlarge"})),(0,E.tZ)(d.X,{as:"h4",textStyle:"ds.title.section.medium",color:"ds.text.neutral.quiet",children:e})]}),$g={HEADER:{display:"inline-block",width:"100%",verticalAlign:"top"},CARD_CONTAINER:{display:"flex",gap:"16px",flexDirection:"column",padding:"32px",borderRadius:"8px",backgroundColor:"ds.container.agnostic.neutral.supershy",border:"1px solid ds.border.neutral.quiet.idle"}};var Kg;const Yg=()=>Kg||(Kg=(0,E.tZ)(c.k,{justifyContent:"center",alignContent:"center","aria-busy":"true",role:"alert",children:(0,E.tZ)(l.Z,{size:75})}));var Qg=n(33377),Jg=n(26849),eh=n(28746);const th=({member:e,handleRemoveMember:t})=>{var n;const{translate:a}=(0,b.Z)();return(0,E.BX)("tr",{sx:{color:"ds.text.neutral.standard",variant:"text.ds.body.standard.regular",boxShadow:"inset 0 -1px 0 0 ds.border.neutral.quiet.idle"},children:[(0,E.tZ)("td",{className:"emailCell--c3avC4hgf6",children:(0,E.BX)("div",{className:"emailCellContainer--yFS7a4HnT_",children:[(0,E.tZ)(To.q,{className:"avatar--XHrkwJbc_C",email:e.alias,size:32}),e.alias]})}),(0,E.tZ)("td",{className:"rightsCell--Z6diiNotCT",children:a((i=e.permission,r=null!=(n=e.status)?n:"pending","admin"===i&&"accepted"===r?"team_groups_edit_member_list_rights_manager":"limited"===i&&"accepted"===r?"team_groups_edit_member_list_rights_member":"pending"===r?"team_groups_edit_member_list_rights_pending":""))}),(0,E.tZ)("td",{className:"plusCell--B02g3LGOlG",children:(0,E.tZ)(D.z,{"aria-label":"Remove member",onClick:()=>t(e),layout:"iconOnly",icon:"ActionDeleteOutlined",mood:"brand",intensity:"supershy",size:"medium"})})]});var i,r},nh=(0,r.memo)(th),ah=(0,Jg.ascend)((0,Jg.prop)("permission")),ih=(0,Jg.ascend)((0,Jg.compose)(Jg.toLower,(0,Jg.prop)("alias"))),rh=(0,Jg.sortWith)([ah,ih]),sh=Qg.Maybe.nothing(),oh=({lee:e,className:t,userGroup:n,revokeMembers:a})=>{const{translate:i}=(0,b.Z)(),[s,o]=(0,r.useState)(0),[l,c]=(0,r.useState)({showRemoveUserDialog:!1,removeMemberCandidate:Qg.Maybe.nothing()}),d=e=>{c({showRemoveUserDialog:!0,removeMemberCandidate:Qg.Maybe.just(e)})},u=()=>(n.users||[]).filter((e=>"accepted"===e.status||"pending"===e.status)),m=()=>{c({showRemoveUserDialog:!1,removeMemberCandidate:sh})},p=(0,Jg.map)((e=>(0,E.tZ)(nh,{member:e,handleRemoveMember:d},e.alias))),g=[{headerLabel:i("team_groups_edit_member_list_header_email"),headerKey:"email"},{headerLabel:i("team_groups_edit_member_list_header_group_rights"),colSpan:2,headerKey:"group-rights"}];return(0,E.BX)("div",{children:[(0,E.BX)("table",{className:Id()(t,"table--hj3WYleNh5"),children:[(0,E.tZ)(Zo,{columns:g}),(0,E.tZ)("tbody",{children:(()=>{const e=24*s;return(0,Jg.compose)(p,(0,Jg.slice)(e,e+24),rh)(u())})()})]}),(0,E.tZ)("div",{className:"pagination--Xk8h572zZ7",children:(0,E.tZ)(eh.Z,{currentPageIndex:s,itemsLength:u().length,itemsPerPage:24,onChange:e=>{o(e)}})}),(0,E.tZ)(J.Vq,{title:i("team_groups_edit_member_list_action_remove_dialog_header"),isOpen:l.showRemoveUserDialog,closeActionLabel:i("_common_dialog_dismiss_button"),onClose:m,isDestructive:!0,actions:{primary:{onClick:()=>{Qg.Maybe.sequence({removeMemberCandidate:l.removeMemberCandidate,userGroup:Qg.Maybe.just(n)}).caseOf({just:({removeMemberCandidate:t,userGroup:n})=>{a(e.dispatchGlobal,{groupId:n.groupId,revision:n.revision,users:[t.userId]},{title:i("team_groups_edit_revoke_member_from_group_error_title"),message:i("team_groups_edit_revoke_member_from_group_error_message")})},nothing:()=>{}}),c({showRemoveUserDialog:!1,removeMemberCandidate:sh})},children:i("team_groups_edit_member_list_action_remove_dialog_cta")},secondary:{onClick:m,children:i("team_groups_edit_member_list_action_remove_dialog_cancel")}},children:(0,E.BX)(r.Fragment,{children:[(0,E.tZ)(_.n,{color:"ds.text.neutral.standard",children:i("team_groups_edit_member_list_action_remove_dialog_title",{email:l.removeMemberCandidate.caseOf({just:e=>e.userId,nothing:()=>""})})}),(0,E.tZ)(_.n,{color:"ds.text.neutral.standard",children:i("team_groups_edit_member_list_action_remove_dialog_subtitle")})]})})]})};var lh=n(83649);const ch=({onNameChanged:e,defaultValue:t,editable:n,saving:a})=>{const i=(0,r.useRef)(null),[s,o]=(0,r.useState)(t),[l,c]=(0,r.useState)(!1),[u,m]=(0,r.useState)(null);(0,r.useEffect)((()=>{l&&i.current?.focus()}),[l,i]);const p=()=>{n&&c(!0)},g=()=>{const n=i.current?.value.trim();c(!1),o(n||t),e&&n&&e(n).then((({success:e,error:t=null})=>{c(!e),m(e?null:t)}))},h=Boolean(u);return(0,E.tZ)(d.X,{as:"h1",color:"ds.text.neutral.standard",textStyle:"ds.title.section.large",children:l?(0,E.BX)(r.Fragment,{children:[(0,E.tZ)("input",{ref:i,type:"text",sx:{color:"ds.text.neutral.catchy",backgroundColor:"transparent",border:"none",padding:"0",width:"100%",fontSize:"inherit",fontWeight:"inherit",fontFamily:"inherit"},defaultValue:s,onBlur:g,onKeyUp:e=>{"Enter"===e.key&&g()}}),h?(0,E.tZ)(_.n,{textStyle:"ds.body.helper.regular",color:"ds.text.danger.standard",sx:{strong:{fontWeight:600}},children:u}):null]}):(0,E.BX)("div",{sx:{display:"inline-block",cursor:"text"},onClick:p,"data-testid":"name-input-edit",children:[s,(0,E.tZ)(D.z,{layout:"iconOnly",icon:"ActionEditOutlined",mood:"brand",intensity:"supershy",isLoading:a,disabled:a,sx:{marginLeft:"8px"},onClick:p,"data-testid":"name-input-edit-button"})]})})};var dh=n(84925),_h=n(14969),uh=n(81264);const mh=({lee:e,userGroup:t})=>{const n=(0,r.useRef)(null),{translate:a}=(0,b.Z)(),{teamId:i}=(0,Me.fV)(),s=(0,m.k)(dh.X,"getSharingTeamLogins"),[o,l]=(0,r.useState)(null),[c,d]=(0,r.useState)([]),{invitePartialSuccessState:_,setInvitePartialSuccessState:u,handleInvitationResultClosed:p}=pu(),g=(0,ca.V)(),h=e=>(0,E.tZ)(_h.q,{userAvatarURL:e,size:"small"}),y=()=>Boolean(c.length);return(0,E.BX)("div",{children:[(0,E.BX)(lh.u,{ref:n,label:a("team_groups_edit_add_members"),dialog:{disableScrolling:!0,title:a("team_groups_edit_add_member_header"),actions:{primary:{children:a("team_groups_edit_add_member_confirm"),onClick:async()=>{if(!y())return;const r=c,{groupId:s,revision:o,name:_}=t,m=r.map((e=>({alias:e.toLowerCase(),permission:"limited"})));if(null===i)return void e.reportError(new Error(ls.N));const p=await(0,Re.j_)({teamId:i,groupId:s,revision:o,users:m}).finally((()=>{n.current&&n.current.hideDialog()}));if(p.error)return"no_free_slot"===p.error.message||"not_enough_free_slots"===p.error.message?void g.showAlert(a("team_group_edit_add_member_not_enough_slots_error",{count:m.length,groupName:_}),Ce.BLW.ERROR):void g.showAlert(a.markup("team_groups_edit_invite_member_to_group_error_message_markup"),Ce.BLW.ERROR);Object.keys(p.refusedMembers).length&&u({invitedMembers:{},refusedMembers:p.refusedMembers,show:!0}),d([]),l(null)},disabled:!y()},secondary:{children:a("team_groups_edit_add_member_cancel"),onClick:()=>{d([]),l(null)}}}},children:[o?(0,E.tZ)("div",{className:"error--IjVtbntYUX",children:o}):null,(0,E.tZ)(uh.J,{autoFocus:!0,className:"addMemberMultiselect--CDfv8wJoB6",dataSource:(null!=(S=s.data?.userLogins)?S:[]).map((e=>({text:e,icon:h(e)}))),getCurrentSelectionAvatar:h,defaultValue:c,isItemValid:e=>(0,Hn.vV)(e),onChange:e=>{d(e)},onError:e=>l(e?a(`team_groups_edit_error_${e.message}`):null),placeholder:a("team_groups_edit_add_member_input_placeholder")})]}),(0,E.tZ)(gu,{teamId:(0,N.ev)(e.globalState),isOpen:_.show,onClose:p,invitedMembers:_.invitedMembers,refusedMembers:_.refusedMembers})]});var S},ph="team_groups_edit_header_delete_group_field_label",gh=Qg.Maybe.nothing(),hh=({onBackLinkClick:e,onDeleteClick:t,onRenameGroup:n,groupName:a,lee:i,userGroup:s})=>{const{translate:o}=(0,b.Z)(),[l,c]=(0,r.useState)(Qg.Maybe.nothing()),[d,u]=(0,r.useState)(!1);return(0,E.BX)("div",{sx:$g.HEADER,children:[(0,E.tZ)(D.z,{intensity:"supershy",layout:"iconLeading",icon:"ArrowLeftOutlined",onClick:t=>{e(t)},children:o("team_groups_edit_header_back")}),(0,E.BX)("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"16px"},children:[(0,E.tZ)(ch,{defaultValue:a,editable:!0,saving:d,onNameChanged:async e=>{u(!0);const{error:t}=await n(e);return u(!1),t===Vg?{success:!1,error:o("team_groups_edit_header_name_already_exists")}:{success:!0}}}),(0,E.BX)("div",{style:{display:"flex",gap:"8px"},children:[(0,E.tZ)(lh.u,{icon:"ActionDeleteOutlined",intensity:"quiet",label:o("team_groups_edit_header_delete_group"),mood:"neutral",dialog:{title:o("team_groups_edit_header_delete_group_dialog_title"),isDestructive:!0,actions:{primary:{children:o("team_groups_edit_header_delete_group_confirm_button"),onClick:async()=>{c(gh),t()},disabled:!l.caseOf({just:e=>e===a,nothing:()=>!1})},secondary:{children:o("team_groups_edit_header_delete_group_cancel_button"),onClick:()=>{c(gh)}}}},children:(0,E.BX)("div",{style:{display:"flex",flexDirection:"column",gap:10,marginBottom:12},children:[(0,E.tZ)(_.n,{color:"ds.text.neutral.standard",children:o.markup("team_groups_edit_header_delete_group_dialog_description_one_markup",{group:a})}),(0,E.tZ)(_.n,{color:"ds.text.neutral.standard",children:o("team_groups_edit_header_delete_group_dialog_description_two")}),(0,E.tZ)(Tn.n,{label:o(ph),placeholder:o(ph),onChange:e=>{const t=e.target.value?.trim();c(Qg.Maybe.maybe(t))},defaultValue:l.caseOf({just:e=>e,nothing:()=>{}}),autoFocus:!0})]})}),(0,E.tZ)(mh,{lee:i,userGroup:s})]})]})]})};var yh;const bh=({lee:e})=>{const{routes:t}=(0,i.Xo)(),{translate:n}=(0,b.Z)(),{addAlertToQueue:a}=se(),{uuid:s}=(0,i.UO)(),{getTeamUserGroup:{data:o,status:l},getTeamUserGroups:{data:c}}=(0,pl.Y)(qg.u,{getTeamUserGroup:{queryParam:{groupId:`{${s}}`}},getTeamUserGroups:{}},[s]);(0,r.useEffect)((()=>{(0,y.Nc)(u.PageView.TacGroupDetails)}),[]);const d=(e,t,n,i)=>{try{const e=JSON.parse(i);e.code&&(t.message+=` : ${e.code}`)}finally{e(Gg.Qy.error({message:n,content:{error:i}})),a(t)}};if(l===G.rq.Loading)return yh||(yh=(0,E.tZ)(Yg,{}));if(l===G.rq.Error||!o||!c)return(0,E.tZ)(Hg,{children:(0,E.tZ)("span",{children:n("_common_generic_error")})});const _=(0,E.tZ)(hh,{onBackLinkClick:()=>{(0,i.uX)(t.teamGroupsRoutePath)},onDeleteClick:()=>{if(!o)return;const{groupId:a,revision:r}=o;(0,Re.FU)({groupId:a,revision:r}).then((()=>{(0,i.uX)(t.teamGroupsRoutePath)})).catch((t=>{const a={title:n("team_groups_edit_delete_group_error_title"),message:n("team_groups_edit_delete_group_error_message")};d(e.dispatchGlobal,a,"Group deletion failed",t.message)}))},onRenameGroup:async t=>{if(!o||!c)return{success:!1};if(t===o.name)return{success:!0};const a=(t,a)=>{const i={title:n("team_groups_edit_rename_group_error_title"),message:n("team_groups_edit_rename_group_error_message")};return d(e.dispatchGlobal,i,a,t.message),{success:!1,error:"group_renaming_failed"}};try{if(!jg(c,t))return{success:!1,error:Vg}}catch(e){return a(e,"Group name availability check failed")}try{const{groupId:e,revision:n}=o;return await(0,Re.J0)({groupId:e,revision:n,name:t}),{success:!0}}catch(e){return a(e,"Group renaming failed")}},groupName:o.name,lee:e.child(),userGroup:o});return(0,E.tZ)(jo,{header:_,children:(0,E.tZ)("div",{sx:$g.CARD_CONTAINER,children:(0,E.tZ)(oh,{lee:e.child(),userGroup:o,revokeMembers:(e,t,n)=>{try{Le.C.revokeUserGroupMembers(t).then((({error:t})=>{t&&d(e,n,"Revoke member from group failed",t.message)}))}catch(t){d(e,n,"Revoke member from group failed",t.message)}}})})})};var Sh=n(58432);const xh=(0,Sh.SP)("edit",{},[]);var fh=n(89789);const vh="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTUiIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAxNSAxNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNOC41IDEuMTMyMzJMMTQuNSA3LjEzMjMyTTguNSAxMy4xMzIzTDE0LjUgNy4xMzIzMk0xNC41IDcuMTMyMzJMMC41MDAwMDEgNy4xMzIzMiIgc3Ryb2tlPSIjRDZEMkNFIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KPC9zdmc+Cg==",Ch="onboardingStepArrow--gqb_E47Df_",Eh="onboardingStepPanel--qnDSxlGTtS",Zh="onboardingStepCounterPanel--KZLs4foheX",kh="onboardingStepText--K_Kh_SIwEm",Dh="circle--mihUuCFcJa";var Th,Ih;const Ah={CONTAINER:{width:"100%",textAlign:"center",paddingTop:"58px",border:"dashed 1px ds.border.neutral.quiet.idle",backgroundColor:"ds.container.agnostic.neutral.supershy"}},wh=()=>{const{translate:e}=(0,b.Z)();return(0,E.BX)("div",{sx:Ah.CONTAINER,children:[(0,E.tZ)("div",{className:"onboardingTitlePanel--yGKYcW_2lp",children:(0,E.tZ)(d.X,{as:"h1",textStyle:"ds.title.section.large",color:"ds.text.neutral.catchy",children:e("team_groups_list_onboarding_title")})}),(0,E.BX)("div",{className:"onboardingStepsContainer--LZ8j5MDbRH",children:[(0,E.BX)("div",{className:Eh,children:[(0,E.tZ)("div",{className:Zh,children:(0,E.tZ)("div",{className:Dh,children:"1"})}),(0,E.tZ)("div",{className:kh,children:e("team_groups_list_onboarding_step_1")})]}),(0,E.tZ)("div",{className:Ch,children:Th||(Th=(0,E.tZ)("img",{src:vh}))}),(0,E.BX)("div",{className:Eh,children:[(0,E.tZ)("div",{className:Zh,children:(0,E.tZ)("div",{className:Dh,children:"2"})}),(0,E.tZ)("div",{className:kh,children:e("team_groups_list_onboarding_step_2")})]}),(0,E.tZ)("div",{className:Ch,children:Ih||(Ih=(0,E.tZ)("img",{src:vh}))}),(0,E.BX)("div",{className:Eh,children:[(0,E.tZ)("div",{className:Zh,children:(0,E.tZ)("div",{className:Dh,children:"3"})}),(0,E.tZ)("div",{className:kh,children:e("team_groups_list_onboarding_step_3")})]})]})]})},Oh=({key:e,index:t,isFirstTimeGroupCreation:n,hasNewGroupDelayPassed:a,children:i})=>{const{translate:r}=(0,b.Z)();return(0,E.tZ)(Ce.ua7,{sx:{"@keyframes fadeIn":{"0%":{opacity:0},"100%":{opacity:1}},animation:"fadeIn 250ms ease-out"},passThrough:0!==t||!n||!a,placement:"bottom",arrowSize:12,trigger:"persist",content:(0,E.tZ)(_.n,{color:"ds.text.inverse.standard",children:r("team_groups_list_new_group_tooltip")}),children:i},e)},Nh=({enforcePaywall:e,className:t})=>{const{translate:n}=(0,b.Z)(),{routes:a}=(0,i.Xo)();return(0,E.tZ)(rn.k,{title:n(e?"team_group_list_paywall_block_title":"team_group_list_paywall_warning_title"),description:n("team_group_list_paywall_description"),actions:[(0,E.tZ)(i.rU,{to:`${a.teamAccountChangePlanRoutePath}?plan=business`,onClick:()=>{(0,y.Kz)(new u.UserClickEvent({clickOrigin:e?u.ClickOrigin.GroupsStarterLimitReached:u.ClickOrigin.GroupsStarterLimitCloseToBeReached,button:u.Button.UpgradeBusinessTier}))},children:(0,E.tZ)(D.z,{icon:"PremiumOutlined",layout:"iconLeading",size:"small",children:n("team_group_list_paywall_upgrade")})},"upgrade")],mood:e?"warning":"brand",size:"large",className:t})},Rh=({className:e})=>{const{translate:t}=(0,b.Z)(),n=me.tz;return(0,E.tZ)(rn.k,{title:t("team_group_list_in_trial_business_paywall_block_title"),description:t("team_group_list_in_trial_business_paywall_block_description"),mood:"brand",size:"large",actions:[(0,E.tZ)(D.z,{as:"a",href:n,rel:"noreferrer",target:"_blank",children:t("team_group_list_in_trial_business_paywall_block_upgrade")},"upgrade")],className:e})};var Lh=n(39874);const Bh=()=>{const{translate:e}=(0,b.Z)(),{routes:t}=(0,i.Xo)();return(0,E.BX)(yn.Z,{sx:{margin:"auto",textAlign:"center",gap:"24px",width:"100%",backgroundColor:"ds.container.agnostic.neutral.supershy"},children:[(0,E.tZ)("div",{sx:{paddingTop:"40px"},children:(0,E.tZ)("img",{alt:"",src:Lh,sx:{objectFit:"contain",maxWidth:"320px",height:"auto"}})}),(0,E.BX)("div",{sx:{width:"512px",margin:"0 auto"},children:[(0,E.tZ)(d.X,{as:"h1",textStyle:"ds.title.section.large",color:"ds.text.neutral.catchy",sx:{marginBottom:"8px"},children:e("team_groups_entrylevel_paywall_title")}),(0,E.tZ)(_.n,{color:"ds.text.neutral.standard",children:e("team_groups_entrylevel_paywall_description")})]}),(0,E.tZ)(i.rU,{to:`${t.teamAccountChangePlanRoutePath}?plan=business`,sx:{paddingBottom:"64px"},children:(0,E.tZ)(D.z,{icon:"PremiumOutlined",layout:"iconLeading",size:"large",mood:"brand",intensity:"catchy",children:e("team_upgrade_to_business")})},"upgrade")]})};var Mh,Ph,Uh,Xh;const zh={GROUP_ROW:{display:"grid",gap:"16px",gridTemplateColumns:"repeat(auto-fill, minmax(400px, 1fr))",gridAutoRows:"62px"},GROUP_ITEM:{cursor:"pointer",display:"flex",flexDirection:"column",justifyContent:"center",backgroundColor:"ds.container.expressive.neutral.supershy.idle",borderRadius:"4px",border:"1px solid ds.border.neutral.quiet.idle",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",padding:"20px 16px"}},Fh="team_groups_list_new_group_creation_header",qh="team_groups_list_search_placeholder",Gh=(e,t)=>{const n=e.name.toLocaleLowerCase(),a=t.name.toLocaleLowerCase();return n.localeCompare(a)},Vh=({lee:e})=>{const t=(0,r.useRef)(null),{translate:n}=(0,b.Z)(),{teamId:a}=(0,Me.fV)(),{routes:s}=(0,Xo.Xo)(),{addAlertToQueue:o,reportTACError:l}=se(),[c,_]=(0,r.useState)(""),[p,g]=(0,r.useState)(!1),[h,S]=(0,r.useState)(!1),[x,f]=(0,r.useState)(""),v=(0,r.useRef)(!1),C=(0,i.k6)(),Z=D_(),{data:k=[],status:D}=(0,m.k)(qg.u,"getTeamUserGroups"),{displayStarterPaywall:I,displayInTrialBusinessPaywall:A,enforceStarterPaywall:w}=(e=>{const t=(0,$.C)(),n=(0,Xe.Y)(),a=(0,Pe.o)("monetization_extension_group_sharing_repackage"),i=(0,Nm.S)(),r=(0,ge.lZ)(),s=!r.isLoading&&r.isTeamSoftDiscontinued;if(n.status!==G.rq.Success||!a||s)return{displayStarterPaywall:!1,enforceStarterPaywall:!1,displayInTrialBusinessPaywall:!1};const o=i?.groupSharing.info?.limit,l=!!o;return{displayStarterPaywall:l,enforceStarterPaywall:l&&e.length>=o,displayInTrialBusinessPaywall:(0,Ue.NG)(n.data)&&!!t?.isFreeTrial}})(k),O=(0,r.useMemo)((()=>{var e;const t=null!=(e=Array.from(null!=k?k:[]).sort(Gh))?e:[];return x?t.filter((e=>e.name.toLocaleLowerCase().includes(x.trim().toLocaleLowerCase()))):t}),[x,k]);(0,r.useEffect)((()=>{(0,y.Nc)(u.PageView.TacGroupList)}),[]);const N=e=>{C.push({pathname:s.teamGroupRoutePath((0,fh.FN)(e.groupId))})},R=e=>{var t;const n=null!=(t=e.target.value.trim())?t:"",a=""!==n&&jg(k,n);_(n),g(a)},L=()=>{_("")},B=async()=>{if(!a)throw new Error("teamId missing when attempting to create group");try{await(0,Re.wZ)(e.dispatchGlobal,{name:c,teamId:a}).finally((()=>{t.current?.hideDialog()})),_(""),k?.length?v.current&&(v.current=!1):(v.current=!0,setTimeout((()=>{S(!0)}),700))}catch(e){let t;try{t=JSON.parse(e.message)?.code}catch{t=`${e?.message}`.toUpperCase()}t!==ie&&o({title:n("team_groups_list_create_group_error_title"),message:n("MISSING_PUBLIC_KEY"===t?"team_groups_list_create_group_missing_public_key_error_message":"team_groups_list_create_group_error_message")}),l(new Error(e.message))}};return D===G.rq.Loading?Xh||(Xh=(0,E.tZ)(Yg,{})):D!==G.rq.Error&&k?(0,E.tZ)(jo,{header:(()=>{const e=!p&&""!==c;return(0,E.tZ)("div",{sx:$g.HEADER,children:(0,E.BX)("div",{sx:{display:"flex",justifyContent:"space-between"},children:[(0,E.tZ)(d.X,{as:"h1",color:"ds.text.neutral.standard",textStyle:"ds.title.section.large",children:n("team_groups_list_title")}),w||Z?null:(0,E.tZ)(lh.u,{ref:t,label:n("team_groups_list_new_group_cta"),dialog:{title:n(Fh),actions:{primary:{children:n("team_groups_list_new_group_creation_confirm_btn"),onClick:B,disabled:!p},secondary:{children:n("team_groups_list_new_group_creation_cancel_btn"),onClick:L}}},children:(0,E.tZ)(Tn.n,{label:n(Fh),onChange:R,placeholder:n("team_groups_list_new_group_input_placeholder"),error:e,feedback:e?n("team_groups_list_create_group_name_already_exists"):void 0,autoFocus:!0})})]})})})(),children:(()=>{const e=k?.length?O.map(((e,t)=>e?(0,E.tZ)(Oh,{index:t,isFirstTimeGroupCreation:v.current,hasNewGroupDelayPassed:h,children:(0,E.tZ)("div",{className:"groupItem",onClick:()=>N(e),onKeyDown:t=>{"Enter"===t.key&&N(e)},tabIndex:0,role:"button",title:e.name,sx:zh.GROUP_ITEM,children:(0,E.tZ)(d.X,{as:"h2",textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",sx:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.name})})},e.groupId):null)):Mh||(Mh=(0,E.tZ)(wh,{}));return(0,E.BX)(r.Fragment,{children:[I?(0,E.tZ)(Nh,{enforcePaywall:w,sx:{marginBottom:"24px"}}):null,A?(0,E.tZ)(Rh,{sx:{marginBottom:"24px"}}):null,Z?Uh||(Uh=(0,E.tZ)(Bh,{})):(0,E.BX)("div",{sx:$g.CARD_CONTAINER,children:[(0,E.tZ)(ee.o,{"aria-label":n(qh),placeholder:n(qh),type:"search",onChange:e=>{var t;return f(null!=(t=e.target.value)?t:"")},prefixIcon:Ph||(Ph=(0,E.tZ)(T.JO,{name:"ActionSearchOutlined"})),sx:{maxWidth:"365px",margin:0,padding:"0"}}),(0,E.tZ)(rn.k,{title:n("team_groups_list_info_box_title"),mood:"neutral"}),(0,E.tZ)("div",{sx:k?.length?zh.GROUP_ROW:void 0,children:e})]})]})})()}):(0,E.tZ)(Hg,{children:(0,E.tZ)("span",{children:n("_common_generic_error")})})},jh=(0,Sh.SP)("list",{},[]);function Wh(e){const{path:t,permission:n}=e;return(0,E.tZ)(i.GB,{exact:!0,path:[t,`${t}/:uuid`],component:Fg,permission:n,children:(0,E.BX)(i.rs,{children:[(0,E.tZ)(i.Vy,{exact:!0,path:t,component:Vh,reducer:jh}),(0,E.tZ)(i.Vy,{path:`${t}/:uuid`,component:bh,reducer:xh})]})})}var Hh=n(74537);const $h=({handleClickOnRetry:e})=>{const{translate:t}=(0,b.Z)();return(0,E.BX)(r.Fragment,{children:[(0,E.tZ)("div",{sx:{transform:"translate(-5px, -5px)",margin:"25px 0px"},children:(0,E.tZ)(Ce.enX,{color:Pn.O.lightTheme.ds.text.danger.quiet,size:75})}),(0,E.tZ)(Ce.$N8,{id:"backup-code-generation-error-dialog-title",title:t("team_members_generate_recovery_codes_error_dialog_title")}),(0,E.tZ)(Ce.a7O,{children:(0,E.tZ)(Ce.nvN,{id:"backup-code-generation-error-dialog-description",sx:{color:Pn.O.lightTheme.ds.text.neutral.standard},children:t("team_members_generate_recovery_codes_error_dialog_description")})}),(0,E.tZ)(Ce.cNS,{primaryButtonTitle:t("team_members_generate_recovery_codes_error_dialog_confirm_button"),primaryButtonProps:{id:"backup-code-generation-error-dialog-try-again-button",type:"button",autoFocus:!0},primaryButtonOnClick:()=>e()})]})};var Kh,Yh=n(22958);const Qh=({memberLogin:e,recoveryCodes:t,handleClickOnDone:n})=>{const{translate:a}=(0,b.Z)();return(0,E.BX)("div",{children:[(0,E.tZ)(Ce.$N8,{id:"backup-code-generation-dialog-list-title",title:a("team_members_generate_recovery_codes_dialog_title",{memberLogin:e})}),(0,E.BX)(Ce.a7O,{children:[(0,E.tZ)(Ce.nvN,{id:'id="backup-code-generation-dialog-list-description"',sx:{marginBottom:"24px",marginTop:"6px",color:"ds.text.neutral.standard"},children:a("team_members_generate_recovery_codes_dialog_description",{memberLogin:e})}),(0,E.tZ)(Ce.j49,{color:"ds.text.brand.standard",id:'id="backup-code-generation-dialog-list-eyebrow"',children:a("team_members_generate_recovery_codes_dialog_codes_label")}),(0,E.tZ)(yn.Z,{sx:{marginTop:"6px",padding:"8px 12px",width:"100%"},children:t?.map(((e,t)=>(0,E.tZ)(Ce.nvN,{"data-testid":`two-factor-authentication-backup-code-${t}`,children:e},e)))}),(0,E.tZ)(Ce.zxk,{sx:{marginTop:"24px"},type:"button",nature:"secondary",id:"backup-code-generation-dialog-list-download-button",onClick:()=>{const e=t?.join("\n");(0,_o.W)(e,Yh.B)},children:(0,E.BX)(c.k,{children:[(0,E.tZ)("div",{sx:{mr:"10px"},children:Kh||(Kh=(0,E.tZ)(Ce._8t,{size:16}))}),a("team_members_generate_recovery_codes_dialog_download_button")]})})]}),(0,E.tZ)(Ce.cNS,{primaryButtonTitle:a("team_members_generate_recovery_codes_dialog_confirm_button"),primaryButtonProps:{id:"id=backup-code-generation-dialog-list-done-button",type:"button",autoFocus:!0},primaryButtonOnClick:()=>n()})]})};var Jh;const ey=({isOpen:e,memberLogin:t,closeBackupCodeDialog:n})=>{const[a,i]=(0,r.useState)(!1),[s,o]=(0,r.useState)(),l=async()=>{const e=await Le.C.getRecoveryCodesAsTeamCaptain({login:t});e.success?o(e.data.recoveryCodes):i(!0)},c=()=>{i(!1),o(void 0),n()};(0,r.useEffect)((()=>{e&&!a&&l()}),[e]);const{translate:d}=(0,b.Z)();return(0,E.tZ)(Ce.VqE,{isOpen:e,closeIconName:a?d("BUTTON_CLOSE_DIALOG"):"",onClose:()=>{c()},children:a?(0,E.tZ)($h,{handleClickOnRetry:()=>{i(!1),l()}}):s?(0,E.tZ)(Qh,{memberLogin:t,recoveryCodes:s,handleClickOnDone:c}):(0,E.BX)(r.Fragment,{children:[(0,E.tZ)(Ce.$N8,{id:"backup-code-generation-dialog-loader-title",title:d("team_members_generate_recovery_codes_dialog_loading_title",{memberLogin:t})}),(0,E.tZ)(Ce.a7O,{children:(0,E.tZ)("div",{sx:{mt:"26px"},children:Jh||(Jh=(0,E.tZ)(Ai.Z,{mode:"light",size:75}))})})]})})},ty="team_idp_infoboxes_dismiss_button",ny=()=>{const{routes:e}=(0,i.Xo)(),{translate:t}=(0,b.Z)(),n=(0,pl.Y)(Fr.t,{getIdPFailedProvisioningsData:{},hasSeenIdPNeedsSeatsInfobox:{},hasSeenIdPProvisioningsPendingInfobox:{}},[]),{markIdPNeedsSeatsInfoboxSeen:a,markIdPProvisioningsPendingInfoboxSeen:s}=(0,te.u)(Fr.t),{getIdPFailedProvisioningsData:o,hasSeenIdPNeedsSeatsInfobox:l,hasSeenIdPProvisioningsPendingInfobox:c}=n;if(o.status!==G.rq.Success||!o.data?.nbOfFailedCreations||l.status!==G.rq.Success||c.status!==G.rq.Success)return null;const{nbOfPendingProvisionings:d,requiredSeats:_,shouldShowNotifications:m}=o.data,p=!c.data&&m.warningProvisioningsPending,g=!l.data&&m.alertFailuresNeedSeats;return(0,E.BX)(r.Fragment,{children:[p?(0,E.tZ)(rn.k,{size:"large",mood:"warning",title:t("team_idp_pending_warning_infobox_title",{count:d,nbOfFailedUsers:d}),description:t("team_idp_pending_warning_infobox_description"),icon:"FeedbackWarningOutlined",actions:[(0,E.tZ)(D.z,{size:"small",intensity:"quiet",onClick:()=>{(0,y.Kz)(new u.UserClickEvent({button:u.Button.Dismiss,clickOrigin:u.ClickOrigin.ProvisionRemainingSeatsReminder})),s()},children:t(ty)},"dismiss-pending-provisionings")]}):null,g?(0,E.tZ)(rn.k,{size:"large",mood:"danger",title:t("team_idp_errors_infobox_title",{count:_,nbOfFailedUsers:_}),icon:"FeedbackFailOutlined",actions:[(0,E.tZ)(D.z,{size:"small",intensity:"quiet",onClick:()=>{(0,y.Kz)(new u.UserClickEvent({button:u.Button.Dismiss,clickOrigin:u.ClickOrigin.InsufficientSeatsProvisioningErrorBanner})),a()},children:t(ty)},"dismiss-failed-provisionings"),(0,E.tZ)(D.z,{as:i.rU,size:"small",intensity:"catchy",to:`${e.teamAccountRoutePath}?showSeatsDialog=true&seatsToBuy=${_}`,onClick:()=>{(0,y.Kz)(new u.UserClickEvent({button:u.Button.BuySeats,clickOrigin:u.ClickOrigin.InsufficientSeatsProvisioningErrorBanner}))},children:t("team_idp_errors_infobox_button_buy_seats",{count:_})},"buy-seats-idp")]}):null]})},ay=e=>e.filter((e=>["pending","proposed"].includes(e.status)));var iy=n(92350),ry=n(96266);const sy=({members:e,onMembersActionSelect:t,isOpen:n})=>{const{translate:a}=(0,b.Z)(),{getInviteLinkDataForAdmin:i}=yu(),r=(0,Pe.o)(v_.G.WebOnboardingInviteLinkTacMigration),s=Cu(),o=s.status===G.rq.Success?s:void 0;return null==r?null:(0,E.BX)(X.h_,{isOpen:n,children:[(0,E.tZ)(X.sB,{id:"expand-invite-option","aria-label":a("team_members_expand_invite_option"),intensity:"quiet",mood:"neutral",size:"medium",layout:"iconOnly",sx:{marginLeft:"16px"},icon:"ActionMoreOutlined"}),(0,E.BX)(X.Nv,{children:[(0,E.tZ)(F.h,{onSelect:()=>{t("reinviteAll",ay(e))},leadingIcon:"ActionShareOutlined",label:a("team_members_resend_invite_to_pending_users")},"resendInvite"),(0,E.tZ)(F.h,{onSelect:async()=>{const e=r?null:await i();t((r?o?.enabled:e?.teamKey&&!e?.disabled)?"shareInviteLink":"enableInviteLink")},leadingIcon:"LinkOutlined",label:a("team_members_share_invite_link")},"shareInviteLink"),(0,E.tZ)(F.h,{onSelect:()=>{(0,y.Kz)(new u.UserClickEvent({button:u.Button.DownloadCsv})),(e=>{(0,_o.S)((e=>{const t=e.map((e=>{var t,n,a,i;return[e.login,e.status,e.twoFAInformation?.type,null!=(t=e.nbrPasswords)?t:0,null!=(n=e.weakPasswords)?n:0,null!=(a=e.reused)?a:0,null!=(i=e.compromisedPasswords)?i:0,e.nbrPasswords>=5?e.securityIndex:"unavailable",e.ssoStatus,e.accountRecoveryKeyStatus,e.recoveryCreationDateUnix?"enabled":"disabled",e.lastUpdateDateUnix?(0,ln.Z)(e.lastUpdateDateUnix).toISOString():e.revokedDateUnix?(0,ln.Z)(e.revokedDateUnix).toISOString():e.status].join(",")})).join("\n");return`${["login email","status","twoFA_Status","number_passwords","weak_passwords","reused_passwords","compromised_passwords","password_health_score","sso_status","account_recovery_key_status","admin_recovery_status","last_active"].join(",")}\n${t}`})(e),"team-members.csv","text/csv;charset=utf-8")})(e)},leadingIcon:"DownloadOutlined",label:a("team_members_download_csv"),description:a("team_members_download_csv_description")},"exportUserCSV")]})]})};var oy=n(57341),ly=n(7867),cy=n(93383),dy=n(9748);const _y={teamCaptain:"team_members_assignment_dialog_admin_description",groupManager:"team_members_assignment_dialog_group_manager_description",member:"team_members_assignment_dialog_member_description"};var uy=function(e){return e.TeamCaptain="teamCaptain",e.Member="member",e.GroupManager="groupManager",e}(uy||{});const my=({member:e,newRole:t,updateUsersRights:n,closeDialog:a})=>{const{translate:i}=(0,b.Z)(),s=(0,ca.V)(),o=(0,dy.U)(),l=yy(e),[c,d]=(0,r.useState)(null!=t?t:l),u=D_(),m=u?uy:hy;return null===o?null:(0,E.BX)(J.Vq,{isOpen:!0,onClose:a,closeActionLabel:i("_common_dialog_dismiss_button"),title:i("team_members_assignment_dialog_title",{user:e.login}),actions:{primary:{children:i("team_members_assignment_dialog_update_button"),onClick:async()=>{if(c===l)return a();try{const t=await n([{member:e,oldRole:l,newRole:c}]);if(!t)return;if(t.successes.length)s.showAlert(i("team_members_assignment_single_success",{username:e.name||e.login||"Member",previousRole:i(by[l]),newRole:i(by[c])}),Ce.BLW.SUCCESS);else if(t.errors.length)throw t.errors[0].error}catch{s.showAlert(i("team_members_assignment_single_error",{username:e.name||e.login||"Member"}),Ce.BLW.ERROR)}finally{a()}},disabled:c===l},secondary:{children:i("team_members_assignment_dialog_cancel_button"),onClick:a}},children:[(0,E.tZ)(Ca.E,{groupName:"roles",value:c,onChange:e=>d(e.target.value),children:Object.values(m).map((e=>{return(0,E.tZ)(Ea.Y,{value:e,disabled:(t=e,!!(o&&t!==hy.TeamCaptain&&t!==c||u&&t===hy.GroupManager)),label:"groupManager"===e&&u?(0,E.tZ)("div",{sx:{display:"flex",flexDirection:"column",gap:"16px"},children:(0,E.BX)("div",{sx:{display:"flex",gap:"8px"},children:[(0,E.tZ)(_.n,{color:"ds.text.neutral.standard",textStyle:"ds.body.standard.regular",children:i(by[e])}),(0,E.tZ)(pe.C,{mood:"brand",intensity:"quiet",label:i("team_upgrade_label"),layout:"iconLeading",iconName:"PremiumOutlined",sx:{color:"ds.text.brand.standard !important",alignSelf:"center"}})]})}):(0,E.tZ)(_.n,{color:"ds.text.neutral.standard",textStyle:"ds.body.standard.regular",children:i(by[e])}),description:i(_y[e])},e);var t}))}),c===hy.Member||u?null:(0,E.tZ)(rn.k,{mood:"brand",title:i("team_members_assignment_dialog_groups_infobox")})]})},py="team_members_assignment_multiple_error",gy=({selectedMembers:e,newRole:t,updateUsersRights:n,closeDialog:a})=>{const{translate:i}=(0,b.Z)(),r=(0,ca.V)();return(0,E.tZ)(Ei.o,{isOpen:!0,footer:(0,E.tZ)(Ce.cNS,{intent:"primary",primaryButtonTitle:i("team_members_assignment_multiple_dialog_submit"),primaryButtonOnClick:async()=>{const s=e.map((e=>({member:e,oldRole:yy(e),newRole:t})));try{const e=await n(s);if(!e)return;const a=i(by[t]);e.successes.length&&e.errors.length?r.showAlert(i("team_members_assignment_multiple_partial_success",{countSuccess:e.successes.length,countTotal:s.length,newRole:a}),Ce.BLW.WARNING):e.successes.length?r.showAlert(i("team_members_assignment_multiple_success",{count:e.successes.length,newRole:a}),Ce.BLW.SUCCESS):e.errors.length&&r.showAlert(i(py,{count:e.errors.length}),Ce.BLW.ERROR)}catch{r.showAlert(i(py,{count:e.length}),Ce.BLW.ERROR)}finally{a()}},secondaryButtonTitle:i("team_members_assignment_multiple_dialog_cancel"),secondaryButtonOnClick:a}),onRequestClose:a,title:i("team_members_assignment_multiple_dialog_title",{countTotal:e.length,newRole:i(by[t])}),children:(()=>{switch(t){case hy.TeamCaptain:return i("team_members_assignment_multiple_dialog_admin_message");case hy.GroupManager:return i("team_members_assignment_multiple_dialog_group_manager_message");default:return i("team_members_assignment_multiple_dialog_member_message")}})()})};let hy=function(e){return e.TeamCaptain="teamCaptain",e.GroupManager="groupManager",e.Member="member",e}({});const yy=e=>e.isTeamCaptain?hy.TeamCaptain:e.isGroupManager?hy.GroupManager:hy.Member,by={teamCaptain:"team_members_assignment_dialog_admin_label",groupManager:"team_members_assignment_dialog_group_manager_label",member:"team_members_assignment_dialog_member_label"},Sy=({selectedMembers:e,newRole:t,lee:n,closeDialog:a})=>{const{reportTACError:i}=se(),{translate:r}=(0,b.Z)(),{addGroupManager:s,removeGroupManager:o}=(0,te.u)(kr.J),l=async e=>{const t=(0,cs.v0)(n.globalState);if(!t)return void i(new Error(ls.N));const{teamId:a}=t;if(!a)throw new Error("No team ID when attempting role assignment");const r={errors:[],successes:[]};for await(const{member:t,oldRole:i,newRole:l}of e)try{switch(i){case hy.TeamCaptain:await(0,Re.Lx)({teamId:a,memberLogin:t.login}),n.dispatch(cy.bj(t)),await(0,Re.hh)({teamId:a,action:"adminDemoted",users:[t.login]});break;case hy.GroupManager:await o({memberLogin:t.login,teamId:a}),n.dispatch(cy.vE(t))}switch(l){case hy.TeamCaptain:await(0,Re.JQ)({teamId:a,memberLogin:t.login}),n.dispatch(cy.VW(t)),await(0,Re.hh)({teamId:a,action:"adminPromoted",users:[t.login]});break;case hy.GroupManager:await s({memberLogin:t.login,teamId:a}),n.dispatch(cy.lp(t))}r.successes.push(t.login)}catch(e){r.errors.push({member:t.login,error:e})}return r};return e.length?1===e.length?(0,E.tZ)(my,{member:e[0],newRole:t,updateUsersRights:l,closeDialog:a}):(0,E.tZ)(gy,{selectedMembers:e,newRole:null!=t?t:hy.Member,updateUsersRights:l,closeDialog:a}):(0,E.tZ)(Ei.o,{isOpen:!0,footer:(0,E.tZ)(Ce.cNS,{intent:"secondary",secondaryButtonTitle:r("team_members_assignment_nobody_dialog_cancel"),secondaryButtonOnClick:a}),onRequestClose:a,title:r("team_members_assignment_nobody_dialog_title"),children:r("team_members_assignment_nobody_dialog_message",{newRole:t?r(by[t]):""})})},xy="team_members_bulk_actions_menu_member",fy="team_members_bulk_actions_menu_group_manager",vy=({onMultipleReassignActionSelect:e})=>{const{translate:t}=(0,b.Z)(),{openDialog:n,shouldShowFrozenStateDialog:a}=(0,L.Ub)(),i=D_(),[s,o]=r.useState(!1),l=t=>{a&&t!==hy.TeamCaptain?n():e(t),o(!1)};return(0,E.tZ)(ly.j,{onOutsideClick:()=>{o(!1)},children:(0,E.BX)("div",{className:"container--zGfanmJ20J",children:[(0,E.tZ)(oy.Z,{label:t("team_members_bulk_actions_menu_label"),onClick:()=>{o(!s)},classNames:["dropdownButton--eX1Pwf6noX"],icon:(0,E.tZ)("img",{className:Id()("buttonIcon--K7qOhGWIeC",{"flip--CjjllwCv0e":s}),src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAiIGhlaWdodD0iNiIgdmlld0JveD0iMCAwIDEwIDYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTkuNSAwLjVMNSA1LjVMMC41IDAuNSIgc3Ryb2tlPSIjNkU4NjhCIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KPC9zdmc+Cg==",role:"none"}),iconClassName:["iconContainer--_MWkwTD793"],iconPosition:"right"}),s?(0,E.BX)("ul",{className:"menu--svPbw6Qghp",children:[(0,E.tZ)("li",{onClick:()=>l(hy.TeamCaptain),children:t("team_members_bulk_actions_menu_admin")},"admin"),i?(0,E.BX)(r.Fragment,{children:[(0,E.tZ)("li",{onClick:()=>l(hy.Member),children:t(xy)},"member"),(0,E.tZ)("li",{sx:{pointerEvents:"none",color:"ds.text.oddity.disabled"},children:(0,E.tZ)(_.n,{sx:{color:"ds.text.oddity.disabled"},children:t(fy)})},"groupManager")]}):(0,E.BX)(r.Fragment,{children:[(0,E.tZ)("li",{onClick:()=>l(hy.GroupManager),children:t(fy)},"groupManager"),(0,E.tZ)("li",{onClick:()=>l(hy.Member),children:t(xy)},"member")]})]}):null]})})};var Cy=function(e){return e[e.TEAM_CAPTAIN=0]="TEAM_CAPTAIN",e[e.GROUP_MANAGER=1]="GROUP_MANAGER",e[e.BILLING_ADMIN=2]="BILLING_ADMIN",e[e.ACCEPTED=3]="ACCEPTED",e[e.PENDING_PROPOSED=4]="PENDING_PROPOSED",e[e.DEFAULT=5]="DEFAULT",e}(Cy||{});const Ey=({isTeamCaptain:e,isBillingAdmin:t,isGroupManager:n,status:a})=>{switch(!0){case e:return Cy.TEAM_CAPTAIN;case n:return Cy.GROUP_MANAGER;case t:return Cy.BILLING_ADMIN;case"accepted"===a:return Cy.ACCEPTED;case["pending","proposed"].includes(a):return Cy.PENDING_PROPOSED;default:return Cy.DEFAULT}},Zy=(e,t)=>"number"==typeof e?e:t&&["pending","proposed","removed","revoked"].includes(t)?-1:0;var ky=n(73630),Dy=n(29732);const Ty=()=>(0,m.k)(p.o,"getTeamPolicies");function Iy(){const{data:e,status:t,error:n}=Ty(),{data:a,status:i}=(0,q._)(),s=e?.itemVisibilityEnabled,o=!!a?.[Dy.c.ItemVisibilityPhase1],l=(0,r.useMemo)((()=>[t,i]),[i,t]);return{status:(0,r.useMemo)((()=>l.some((e=>e===G.rq.Loading))?G.rq.Loading:l.some((e=>e===G.rq.Error))?G.rq.Error:G.rq.Success),[l]),error:n,isAdminVisibilityEnabled:s&&o}}var Ay=n(39540),wy=n(11716),Oy=n(95450);const Ny=e=>{let t;switch(e){case"LOGIN_DOMAIN_UNAUTHORIZED":t=u.ChangeLoginError.InvalidDomain;break;case"IDENTICAL_EMAIL":t=u.ChangeLoginError.SameEmail;break;case"LOGIN_UNAVAILABLE":t=u.ChangeLoginError.ExistingEmail;break;default:t=u.ChangeLoginError.Generic}(0,y.Kz)(new u.UserAdminChangeLoginEmailEvent({changeLoginEmailFlowStep:u.ChangeLoginEmailFlowStep.Error,errorName:t}))},Ry=({member:e,currentLoggedLogin:t,onMemberActionSelect:n,isOpen:a})=>{const{translate:i}=(0,b.Z)(),s=((e,t)=>{var n,a,i;const r=(0,q._)(),s=(0,m.k)(Ay.m,"provisioningSolution"),o=(0,m.k)(wy.y,"ssoProvisioning"),l=(0,m.k)(p.o,"getTeamPolicies"),c=!["pending_activation",null,void 0].includes(e),d=r.status===G.rq.Success&&null!=(n=r.data[iy.u.ChangeLoginEmailWebDev])&&n,_=r.status===G.rq.Success&&null!=(a=r.data[iy.u.ChangeLoginEmailB2BJit])&&a,u=r.status===G.rq.Success&&null!=(i=r.data[iy.u.ChangeLoginEmailB2BMP])&&i,g=l.status===G.rq.Success&&l.data.ssoProvisioning,h=s.status===G.rq.Success&&"none"!==s.data,y=o.status===G.rq.Success&&o.data.ssoSolution===Oy.WO.enum.confidentialSaml;return!(!d||(c||t||!u)&&(!c||!y||h||g&&!_))})(e.ssoStatus,"invisibleMasterPassword"===e.accountType),{isAdminVisibilityEnabled:o}=Iy(),l="pending"!==e.status&&"proposed"!==e.status,c=!!e.twoFAInformation&&("totp_device_registration"===e.twoFAInformation.type||"totp_login"===e.twoFAInformation.type),d=e.HasChangeLoginRequest,_=(0,r.useMemo)((()=>{if("removed"===e.status)return[(0,E.tZ)(F.h,{"data-testid":"reactivate-quick-action",leadingIcon:"ItemEmailOutlined",label:i("team_members_reactivate_single_label"),onSelect:()=>n("reactivate",e)},"reactivate")];const t=[];return"pending"!==e.status&&"proposed"!==e.status||t.push((0,E.tZ)(F.h,{"data-testid":"reinvite-quick-action",leadingIcon:"ItemEmailOutlined",label:i("team_members_resend_invite_label"),onSelect:()=>n("reinvite",e)},"resendInvite")),l&&t.push((0,E.tZ)(F.h,{"data-testid":"reassign-quick-action",leadingIcon:"ItemPersonalInfoOutlined",onSelect:()=>((0,y.Kz)(new u.UserClickEvent({button:u.Button.ChangeUserRole})),n("reassign",e)),label:i("team_members_change_role_label")},"reassign")),s&&(l&&!d&&t.push((0,E.tZ)(F.h,{"data-testid":"change-login-email",leadingIcon:"ItemLoginOutlined",onSelect:()=>((0,y.Kz)(new u.UserAdminChangeLoginEmailEvent({changeLoginEmailFlowStep:u.ChangeLoginEmailFlowStep.StartEmailChange})),(0,y.Kz)(new u.UserClickEvent({button:u.Button.ChangeUserLoginEmail})),n("changeLoginEmail",e)),label:i("team_members_change_login_email")},"change-login-email")),l&&d&&t.push((0,E.tZ)(F.h,{"data-testid":"pending-change-email",leadingIcon:"ItemLoginOutlined",label:i("team_members_cancel_change_email"),onSelect:()=>n("cancelChangeLoginEmail",e)},"pending-change-email"))),o&&l&&t.push((0,E.tZ)(F.h,{"data-testid":"view-logins",leadingIcon:"ActionRevealOutlined",label:i("team_members_view_logins"),onSelect:()=>{(0,y.Kz)(new u.UserClickEvent({button:u.Button.ViewUserLogins})),n("viewMemberLogins",e)}},"view-logins")),t.push((0,E.tZ)(xo.u,{content:i("team_members_assignment_dialog_remove_billing_contact_tooltip"),location:"top",passThrough:!e.isBillingAdmin,sx:{whiteSpace:"normal"},children:(0,E.tZ)(F.h,{"data-testid":"revoke-quick-action",leadingIcon:"ActionDeleteOutlined",label:i("team_members_revoke_single_label"),onSelect:e.isBillingAdmin?void 0:()=>n("revoke",e),disabled:e.isBillingAdmin},"revoke")},"revoke")),c&&l&&t.push((0,E.tZ)(F.h,{"data-testid":"generate-2fa-recovery-code-quick-action",leadingIcon:"RecoveryKeyOutlined",label:i("team_members_generate_recovery_codes_label"),onSelect:()=>n("generateBackupCode",e)},"generate2FABackupCodes")),t}),[d,l,o,s,e,c,n,i]);return e.login===t?null:(0,E.BX)(X.h_,{isOpen:a,align:"end",children:[(0,E.tZ)(X.sB,{"data-testid":"users-action-menu-button",icon:"SettingsOutlined",layout:"iconOnly",mood:"neutral",intensity:"supershy","aria-label":i("team_members_row_aria_label_users_actions")}),(0,E.tZ)(X.Nv,{children:_})]})},Ly="securityScoreOver80--Hgr2G6S0v_",By="securityScoreOver60--_JHvGMsVMu",My="securityScoreOver40--uopteVjbhe",Py="securityScoreOver20--DGwlRT6aTn",Uy="securityScoreOver0--KWOlPM746R",Xy="securityScoreUnknown--X1UUUGTTOI",zy="box--b300GjbePX",Fy="shield--aR0K8YOyOo",qy="medium--oK53lyprG3",Gy="small--Y3Ur7GidSI",Vy=({score:e,size:t,children:n})=>{const a="small"===t?Gy:qy;return(0,E.BX)("div",{className:Id()(zy,(i=e,i.caseOf({nothing:()=>Xy,just:e=>e>=80?Ly:e>=60?By:e>=40?My:e>=20?Py:Uy})),a),children:[(0,E.tZ)("div",{className:Fy}),(0,E.tZ)("div",{children:n})]});var i};var jy=n(38686);var Wy;const Hy={LOGIN_TEXT:{variant:"text.ds.body.reduced.regular",wordBreak:"break-word",color:"ds.text.neutral.catchy",marginLeft:"16px",maxWidth:"280px",minWidth:"140px"},ROW:{boxShadow:"inset 0 -1px 0 0 ds.border.neutral.quiet.idle",height:"60px",variant:"text.ds.body.reduced.regular",td:{padding:"16px",verticalAlign:"middle"}},ACTIVE:{color:"ds.text.neutral.standard"},REVOKED:{color:"ds.text.neutral.quiet"}},$y="team_members_row_invitation_pending",Ky=({checkedMembers:e,currentLoggedLogin:t,members:n,onMemberActionSelect:a,onMemberToggleCheck:i})=>{var r,s;const{translate:o}=(0,b.Z)(),l=()=>(0,E.BX)(c.k,{gap:"4px",children:[(0,E.tZ)(_.n,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",children:o("team_members_row_security_score_unavailable")}),(0,E.tZ)(xo.u,{wrapTrigger:!0,location:"bottom",content:o("team_members_row_security_score_breakdown_less_than_five"),children:(0,E.tZ)("div",{sx:{display:"flex",alignItems:"center"},children:Wy||(Wy=(0,E.tZ)(T.JO,{name:"FeedbackInfoOutlined",color:"ds.text.neutral.quiet",size:"xsmall"}))})})]}),d=e=>{const t=Qg.Maybe.maybe(e.nbrPasswords>=5||!e.nbrPasswords&&e.securityIndex&&e.securityIndex>0?e.securityIndex:null);return t.caseOf({just:e=>0===e?r||(r=(0,E.tZ)(l,{})):(0,E.tZ)(Vy,{score:t,size:"small",children:(0,E.tZ)("div",{className:"securityScoreCellText--uh3PGGldwN",children:`${mc(e)}%`})}),nothing:()=>s||(s=(0,E.tZ)(l,{}))})},u=e=>{switch(!0){case["pending","proposed"].includes(e.status):return o($y);case Boolean(e.lastUpdateDateUnix||e.revokedDateUnix):return(0,E.tZ)(em.Z,{date:(0,ln.Z)(e.lastUpdateDateUnix||e.revokedDateUnix)});case"pending"===e.status:return o($y);default:return o("team_members_row_never_logged_in")}},m=e=>"removed"===e.status?o("team_members_row_revoked"):e.isTeamCaptain?o("team_members_row_captain"):e.isGroupManager?o("team_members_row_group_manager"):o("team_members_row_member");return(0,E.tZ)("tbody",{className:"tableBody--UVKDDE_osD",children:(()=>{const r=(e,t)=>null!=t?t:"accepted"!==e?"-":0;return n.map((n=>{return(0,E.BX)("tr",{id:"removed"===n.status?"revoked":"active",sx:(0,Ee.jM)([Hy.ROW,"removed"===n.status?Hy.REVOKED:Hy.ACTIVE]),children:[(0,E.tZ)("td",{children:n.login!==t&&"removed"!==n.status&&(0,E.tZ)(jn.X,{checked:!!Array.from(e).find((e=>e.login===n.login)),"aria-label":"Select user",onChange:()=>i(n)})}),(0,E.BX)("td",{className:"loginCell--zmWQn6nt_m",children:[(0,E.tZ)(jy.H,{email:n.login,size:"medium"}),(0,E.tZ)("div",{sx:Hy.LOGIN_TEXT,className:"automation-tests-member-login",children:(0,E.tZ)(ky.Z,{tooltipText:n.login,children:n.login})})]}),(0,E.tZ)("td",{className:"securityScoreCell--TRrWX93JKm",children:d(n)}),(0,E.BX)("td",{className:"passwordsCell--gft4asedk5",children:[(0,E.tZ)("span",{className:"passwordsCellIcon--oJaMYYHQ_9"}),(s=n.status,l=n.nbrPasswords,"accepted"!==s?"-":!l||l<5?"<5":l)]}),(0,E.tZ)("td",{children:r(n.status,n.safePasswords)}),(0,E.tZ)("td",{children:r(n.status,n.weakPasswords)}),(0,E.tZ)("td",{children:r(n.status,n.reused)}),(0,E.tZ)("td",{children:r(n.status,n.compromisedPasswords)}),(0,E.tZ)("td",{children:u(n)}),(0,E.BX)("td",{children:[n.isBillingAdmin?(0,E.tZ)(xo.u,{location:"top",content:o("team_account_heading_billing_admin_tooltip"),sx:{textAlign:"start"},children:(0,E.BX)("div",{sx:{display:"flex",alignItems:"center"},children:[(0,E.tZ)(_.n,{textStyle:"ds.body.standard.strong",sx:{display:"inline-block"},children:o("team_account_heading_billing_admin")}),(0,E.tZ)(T.JO,{color:"ds.text.neutral.standard",name:"FeedbackInfoOutlined",sx:{display:"inline-block",marginLeft:"4px"},size:"small"})]})}):null,m(n)]}),(0,E.tZ)("td",{className:"actionsCell--NotN6ngLnK",style:{position:"relative"},children:(0,E.tZ)(Ry,{member:n,currentLoggedLogin:t,onMemberActionSelect:a})})]},n.login);var s,l}))})()})},Yy={TOP:{display:"flex",justifyContent:"space-between",height:"90px",marginBottom:"16px",color:"ds.text.neutral.quiet"},TOP_PAGINATION_TEXT:{whiteSpace:"nowrap",display:"flex",gap:"5px",alignItems:"center",maxHeight:"42px",overflowY:"hidden",marginRight:"16px"}},Qy="team_members_filter_control_search_placeholder",Jy="team_members_heading_name",eb="team_members_heading_security_score",tb="team_members_heading_password_count",nb="team_members_heading_last_login",ab=24,ib=({lee:e,members:t,onMembersActionSelect:n,onMembersInvite:a,memberListFiltering:i})=>{var s;const{translate:o}=(0,b.Z)(),l=(0,Pe.o)(iy.u.ChangeLoginEmailWebDev),c=(0,cs.v0)(e.globalState),d=null!=(s=c?.login)?s:"",u=(0,r.useMemo)((()=>(e=>e.map((e=>{return{...e,filterableStatus:(t=e.status,"proposed"===t?"pending":"revoked"===t?"removed":"unproposed"!==t?t:void 0),sortableLastActivity:e.revokedDateUnix||e.lastUpdateDateUnix||0,sortablePasswords:Zy(e.nbrPasswords,e.status),sortableRights:Ey(e),sortableSecurityScore:Zy(e.securityIndex,e.status),sortableSafePasswords:Zy(e.safePasswords,e.status),sortableWeakPasswords:Zy(e.weakPasswords,e.status),sortableReused:Zy(e.reused,e.status),sortableCompromisedPasswords:Zy(e.compromisedPasswords,e.status)};var t})))(t)),[t]),{checkedMembers:m,currentPageIndex:p,filterPendingChangeEmail:g,searchQuery:h,setCheckedMembers:y,setCurrentPageIndex:S,setFilterPendingChangeEmail:x,setSearchQuery:f,setStatusFilters:v,statusFilters:C}=i,Z=[...C,g],[k,I]=(0,r.useState)({sortBy:"sortableRights",sortOrder:"asc"}),A=D_()?"team_members_heading_entrylevel_tooltip_markup":"team_members_heading_rights_tooltip_markup",w=()=>{const e=h?.toLocaleUpperCase(),t="asc"===k.sortOrder?Jg.ascend:Jg.descend;return(0,Jg.sortWith)([t((0,Jg.prop)(k.sortBy))])(u.filter((e=>e.filterableStatus&&Z.includes(e.filterableStatus))).filter((e=>!g||e.HasChangeLoginRequest)).filter((t=>!h||t.login.toLocaleUpperCase().includes(e))))},O=e=>{S(e)},N=e=>{const t=e===k.sortBy&&"asc"===k.sortOrder?"desc":"asc";I({sortBy:e,sortOrder:t})},R=e=>{S(0);const t=C.includes(e)?C.filter((t=>t!==e)):C.concat([e]);v(t)},L=e=>!e.isBillingAdmin&&["accepted","pending","proposed"].includes(e.status),B=()=>{y(new Set)},M=()=>{const e=p*ab,t=new Set;w().slice(e,e+ab).reduce(((e,t)=>(d===t.login||e.add({...t}),e)),t),Array.from(m).forEach((e=>t.add({...e}))),y(t)},P=p*ab,U=w(),X={first:U.length?P+1:0,last:Math.min(U.length,P+ab)},z=U.slice(P,P+ab),F=(e=>{const t=e.filter((e=>Array.from(m).find((t=>t.login===e.login)))).length;let n;return e.find((e=>e.login===d)),e.length,n=0===t?M:B,(0,E.tZ)(jn.X,{onChange:n,"aria-label":"select-all"})})(z),q=[{headerLabel:"",headerElement:F,headerKey:"checkbox"},{headerLabel:o(Jy),tooltipLabel:o(Jy),onClick:()=>N("login"),sortOrder:"login"!==k.sortBy?void 0:k.sortOrder,headerKey:"login"},{headerLabel:o(eb),tooltipLabel:o(eb),onClick:()=>N("sortableSecurityScore"),sortOrder:"sortableSecurityScore"!==k.sortBy?void 0:k.sortOrder,headerKey:"security-score"},{headerLabel:o(tb),tooltipLabel:o(tb),onClick:()=>N("sortablePasswords"),sortOrder:"sortablePasswords"!==k.sortBy?void 0:k.sortOrder,headerKey:"num-passwords"},{headerLabel:o("team_members_heading_safe"),tooltipLabel:o("team_members_heading_safe_tooltip"),onClick:()=>N("sortableSafePasswords"),sortOrder:"sortableSafePasswords"!==k.sortBy?void 0:k.sortOrder,headerKey:"safe-passwords"},{headerLabel:o("team_members_heading_weak"),tooltipLabel:o("team_members_heading_weak_tooltip"),onClick:()=>N("sortableWeakPasswords"),sortOrder:"sortableWeakPasswords"!==k.sortBy?void 0:k.sortOrder,headerKey:"weak-passwords"},{headerLabel:o("team_members_heading_reused"),tooltipLabel:o("team_members_heading_reused_tooltip"),onClick:()=>N("sortableReused"),sortOrder:"sortableReused"!==k.sortBy?void 0:k.sortOrder,headerKey:"reused-passwords"},{headerLabel:o("team_members_heading_compromised"),tooltipLabel:o("team_members_heading_compromised_tooltip"),onClick:()=>N("sortableCompromisedPasswords"),sortOrder:"sortableCompromisedPasswords"!==k.sortBy?void 0:k.sortOrder,headerKey:"compromised-passwords"},{headerLabel:o(nb),tooltipLabel:o(nb),onClick:()=>N("sortableLastActivity"),sortOrder:"sortableLastActivity"!==k.sortBy?void 0:k.sortOrder,headerKey:"last-login"},{headerLabel:(0,E.BX)("span",{sx:{display:"flex",alignItems:"center"},children:[o("team_members_heading_rights")," ",(0,E.tZ)(T.JO,{color:"ds.text.neutral.quiet",name:"FeedbackInfoOutlined",sx:{display:"inline-block",marginLeft:"4px"},size:"small"})]}),tooltipLabel:(0,E.tZ)("div",{sx:{"& > * > p:not(:last-child)":{marginBottom:"10px"}},children:o.markup(A)}),onClick:()=>N("sortableRights"),sortOrder:"sortableRights"!==k.sortBy?void 0:k.sortOrder,headerKey:"permissions"},{headerLabel:o("team_members_heading_actions"),headerKey:"actions"}];return(0,E.BX)("div",{className:"container--lTIFkRrWrT",children:[(0,E.tZ)("div",{sx:Yy.TOP,children:(0,E.BX)("div",{className:"tableHeaderContainer--NOzH1jto0x",children:[(0,E.tZ)(Nr.U,{label:o(Qy),placeholder:o(Qy),onChange:e=>{S(0),f(e.currentTarget.value)},value:h,sx:{maxWidth:"300px",marginBottom:"15px"}}),(0,E.BX)("div",{className:"topContainer--ST6B1mEZjJ",children:[(0,E.tZ)("div",{className:"topLeft--viTEuhR25Z",children:(0,E.BX)("div",{className:"statusFilters--SMNEn98faE",children:[(0,E.tZ)(jn.X,{label:o("team_members_filter_control_include_active"),onChange:()=>R("accepted"),checked:C.includes("accepted")}),(0,E.tZ)(jn.X,{label:o("team_members_filter_control_include_invited"),onChange:()=>R("pending"),checked:C.includes("pending")}),(0,E.tZ)(jn.X,{label:o("team_members_filter_control_include_revoked"),onChange:()=>R("removed"),checked:C.includes("removed")}),l?(0,E.tZ)(jn.X,{label:o("team_members_filter_control_include_pending_email_change"),onChange:()=>x(!g),checked:g}):null]})}),m.size>0&&[(0,E.tZ)(vy,{onMultipleReassignActionSelect:e=>{let t=[...m];switch(e){case"member":t=t.filter((e=>e.isTeamCaptain||e.isGroupManager));break;case"teamCaptain":t=t.filter((e=>!e.isTeamCaptain&&"accepted"===e.status));break;case"groupManager":t=t.filter((e=>!e.isGroupManager&&"accepted"===e.status))}n("reassign",t,e)}},"dropdown"),(0,E.tZ)(ry.Z,{classNames:["revokeButton--_sdxTpsqR2 topButton--vxY2fF8Lv4"],label:o("team_members_revoke_multiple_label"),disabled:![...m].some(L),onClick:()=>{let e=[...m];e=e.filter(L),n("revoke",e)}},"button")],(0,E.BX)("div",{className:"topRight--YZ2DF7wcrD",children:[(0,E.BX)("div",{className:"topPagination--rTlBiQ0EDF",children:[(0,E.BX)("div",{sx:Yy.TOP_PAGINATION_TEXT,children:[(0,E.tZ)(_.n,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.catchy",children:o("team_members_filter_pagination_top_count",{first:X.first,last:X.last})}),(0,E.tZ)(_.n,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",children:o("team_members_filter_pagination_top_total",{total:U.length})})]}),(0,E.tZ)(eh.Z,{currentPageIndex:p,isShort:!0,itemsLength:U.length,itemsPerPage:ab,onChange:O})]}),(0,E.tZ)(D.z,{icon:"ActionAddOutlined",layout:"iconLeading",onClick:a,children:o("team_members_quota_progress_add")}),t.length>1&&(0,E.tZ)(sy,{members:t,onMembersActionSelect:n})]})]})]})}),(0,E.BX)("table",{className:"table--a8O2px0gHj",children:[(0,E.tZ)(Zo,{columns:q}),(0,E.tZ)(Ky,{checkedMembers:m,currentLoggedLogin:d,members:z,onMemberActionSelect:(e,t)=>{n(e,[t])},onMemberToggleCheck:e=>{const t=Array.from(m).find((t=>t.login===e.login)),n=new Set(m);t?n.delete(t):n.add({...e}),y(n)}})]}),(0,E.tZ)("div",{className:"bottom--b6BPTxGASq",children:(0,E.tZ)(eh.Z,{currentPageIndex:p,itemsLength:U.length,itemsPerPage:ab,onChange:O})})]})};var rb=n(77727);const sb=({closeDialog:e,selectedMembers:t,refreshTeamMembers:n})=>{const{translate:a}=(0,b.Z)(),{showToast:i}=(0,o.p)(),{cancelChangeTeamMemberLoginEmail:r}=(0,te.u)(rb.v);return(0,E.tZ)(J.Vq,{isOpen:!0,onClose:e,title:a("webapp_cancel_change_contact_email_title"),closeActionLabel:a("_common_dialog_dismiss_button"),actions:{primary:{children:a("webapp_cancel_change_contact_email_confirm_button"),type:"submit",onClick:()=>(async()=>{const s=await r({logins:t.map((e=>e.login))});(0,ne.hx)(s)?i({description:a("webapp_change_contact_email_error_generic"),mood:"danger"}):(n(),e(),i({description:a("webapp_cancel_change_contact_email_confirmation_toast")}))})()},secondary:{children:a("_common_action_go_back"),onClick:e}},isDestructive:!0,children:(0,E.tZ)(_.n,{children:a("webapp_cancel_change_contact_email_description")})})};var ob,lb=n(32690),cb=n(43414);const db={IDENTICAL_EMAIL:"webapp_change_contact_email_error_identical_email",INVALID_LOGIN:"webapp_change_contact_email_error_email_format",GENERIC_ERROR:"webapp_change_contact_email_error_generic",LOGIN_UNAVAILABLE:"webapp_change_login_email_tac_error_unavailable",LOGIN_DOMAIN_UNAUTHORIZED:"webapp_change_contact_email_error_restricted_email"},_b=({closeDialog:e,selectedMembers:t,refreshTeamMembers:n})=>{var a;const{translate:i}=(0,b.Z)(),{showToast:s}=(0,o.p)(),[l,c]=(0,r.useState)(""),[d,m]=(0,r.useState)(""),{verifiedDomains:p}=Jl(),g=p.map((e=>e.name)),{changeTeamMembersLoginEmail:h}=(0,te.u)(rb.v),S=t.some((e=>!e.ssoStatus)),x=async a=>{(0,y.Kz)(new u.UserAdminChangeLoginEmailEvent({changeLoginEmailFlowStep:u.ChangeLoginEmailFlowStep.SubmitEmailChange}));const r=((e,t,n)=>{const a=e.split("@")[1];return(0,Hn.vV)(e)?e===t?"IDENTICAL_EMAIL":n?.length&&!n.find((e=>e===a))?"LOGIN_DOMAIN_UNAUTHORIZED":null:"INVALID_LOGIN"})(a,t[0].login,g);if(r)m(r),Ny(r);else{const r=await h([{currentLogin:t[0].login,newLogin:a,isUserSSO:!["pending_activation",null,void 0].includes(t[0].ssoStatus)}]);if((0,ne.hx)(r)){let e="GENERIC_ERROR";Object.keys(db).includes(r.error.tag)&&(e=r.error.tag),m(e),Ny(e)}else n(),e(),s({description:i(S?"webapp_change_login_email_tac_confirmation_toast":"webapp_change_login_email_tac_confirmation_toast_sso")}),(0,y.Kz)(new u.UserAdminChangeLoginEmailEvent({changeLoginEmailFlowStep:u.ChangeLoginEmailFlowStep.SuccessfulEmailChange}))}};return(0,E.tZ)(la.J9,{initialValues:{email:l},onSubmit:()=>x(l),children:(0,E.BX)(J.Vq,{isOpen:!0,onClose:e,title:i("webapp_change_login_email_section_title"),closeActionLabel:i("_common_dialog_dismiss_button"),actions:{primary:{children:i("webapp_change_login_email_change_email_button"),type:"submit",onClick:()=>x(l),disabled:!l},secondary:{children:i("_common_action_cancel"),onClick:()=>{e(),(0,y.Kz)(new u.UserAdminChangeLoginEmailEvent({changeLoginEmailFlowStep:u.ChangeLoginEmailFlowStep.CancelEmailChange}))}}},children:[(0,E.tZ)(_.n,{children:i.markup("webapp_change_login_email_tac_description_markup")}),(0,E.tZ)(lb.s,{label:i("webapp_change_login_email_tac_current_email_label"),value:t[0].login,readOnly:!0}),(0,E.tZ)(la.l0,{children:(0,E.tZ)(lb.s,{label:i("webapp_change_login_email_new_email_label"),error:!!d,autoFocus:!0,onChange:e=>{const t=e.target.value;c(t),m("")},value:l,feedback:d?{id:cb.H,text:i(null!=(a=db[d])?a:db.GENERIC_ERROR)}:void 0})}),g&&g.length>0?(0,E.BX)(_.n,{color:"ds.text.neutral.quiet",textStyle:"ds.body.helper.regular",children:[`${i("webapp_change_login_email_tac_accepted_domain_first_part")} `,(0,E.tZ)(_.n,{as:"span",textStyle:"ds.body.helper.regular",color:"ds.text.neutral.catchy",sx:{fontWeight:"bold"},children:`${g.join(", ")}.`}),ob||(ob=(0,E.tZ)("br",{})),i("webapp_change_login_email_tac_accepted_domain_second_part")]}):null,S?(0,E.tZ)(rn.k,{title:i("webapp_change_login_email_tac_user_confirmation_info")}):null]})})},ub=({closeDialog:e,applyActionOnMembers:t})=>{const{translate:n}=(0,b.Z)(),a=(0,ca.V)(),{getInviteLinkDataForAdmin:i,inviteLinkDataForAdmin:s,createInviteLink:o,toggleInviteLink:l}=yu(),c=xr();return(0,r.useEffect)((()=>{i()}),[i]),c?(0,E.tZ)(Ei.o,{showCloseIcon:!0,isOpen:!0,footer:(0,E.tZ)(Ce.cNS,{intent:"primary",primaryButtonTitle:n("team_activation_dialog_activate_button"),primaryButtonOnClick:()=>(async()=>{s?.teamKey?s?.disabled&&await l(!1):await o(c),a.showAlert(n("team_activation_dialog_notification"),Ce.BLW.SUCCESS),await i(),t("shareInviteLink")})(),secondaryButtonTitle:n("team_activation_dialog_notrightnow_button"),secondaryButtonOnClick:e}),onRequestClose:e,title:n("team_activation_dialog_title"),children:(0,E.tZ)(Ce.nvN,{children:n("team_activation_dialog_paragrah")})}):null},mb=({closeDialog:e,resendOrReactivate:t})=>{const{translate:n}=(0,b.Z)(),{showToast:a}=(0,o.p)(),[i,s]=(0,r.useState)(!1),l=(0,Pe.o)(v_.G.WebOnboardingInviteLinkTacMigration),c=Cu(),d=c.status===G.rq.Success?c:void 0,{getInviteLinkDataForAdmin:u,inviteLinkDataForAdmin:m}=yu(),p=l?!0===d?.enabled:!1===m?.disabled,g=(0,me.cI)(l?d?.teamKey:m?.teamKey);return(0,r.useEffect)((()=>{!1===l&&u()}),[u,l]),(0,E.BX)(J.Vq,{title:n("team_members_reinvite_dialog_title"),isOpen:!0,onClose:e,closeActionLabel:"Closing dialog",actions:{primary:{isLoading:i,disabled:i,children:n("team_members_resend_invite_dialog_resend_confirm"),onClick:async()=>{s(!0),await t(),s(!1),e()}},secondary:p?{children:n("team_members_resend_copy_invite_link"),onClick:()=>{navigator.clipboard.writeText(g),a({description:n("team_members_share_invite_link_copied"),mood:"brand"})}}:void 0},children:[(0,E.tZ)(_.n,{children:n("team_members_resend_invite_dialog_message")}),p?(0,E.BX)(r.Fragment,{children:[(0,E.tZ)(_.n,{textStyle:"ds.body.standard.regular",children:n("team_members_resend_invite_link_description")}),(0,E.tZ)(_.n,{textStyle:"ds.body.standard.regular",sx:{textDecoration:"underline"},children:g})]}):null]})};var pb=n(56374);const gb={REVOKE_ERROR_MSG:"team_members_revoke_error_message",REVOKE_SUCCESS_MSG:"team_members_revoke_success_message",SINGLE:{REVOKE_DIALOG_CONFIRM:"team_members_revoke_single_dialog_confirm",REVOKE_DIALOG_CANCEL:"team_members_revoke_single_dialog_cancel",REVOKE_DIALOG_MSG:"team_members_revoke_single_dialog_message",REVOKE_DIALOG_MSG_B2B_ONLY:"team_members_revoke_single_dialog_message_b2b_only",REVOKE_DIALOG_TITLE:"team_members_revoke_single_dialog_title"},MULTIPLE:{REVOKE_DIALOG_CONFIRM:"team_members_remove_multiple_dialog_confirm",REVOKE_DIALOG_CANCEL:"team_members_revoke_multiple_dialog_cancel",REVOKE_DIALOG_MSG:"team_members_revoke_multiple_dialog_message",REVOKE_DIALOG_MSG_B2B_ONLY:"team_members_revoke_multiple_dialog_message_b2b_only",REVOKE_DIALOG_TITLE:"team_members_remove_multiple_dialog_title"},CLOSE_DIALOG_BUTTON_LABEL:"_common_dialog_dismiss_button"},hb=({lee:e,closeDialog:t,selectedMembers:n})=>{const{translate:a}=(0,b.Z)(),i=(0,ca.V)(),{reportTACError:r}=se(),s=(0,qc.I)(),o=1===n.length,l=s.status!==G.rq.Success||!s.isDisabled,c=o?gb.SINGLE:gb.MULTIPLE;return(0,E.tZ)(J.Vq,{isOpen:!0,onClose:t,isDestructive:!0,actions:{primary:{children:a(c.REVOKE_DIALOG_CONFIRM),onClick:async()=>{t();const s=(0,cs.v0)(e.globalState);if(!s)return void r(new Error(ls.N));const{teamId:o}=s;if(o)try{const t=n.map((e=>e.login)),{content:{removedMembers:r,unproposedMembers:l,refusedMembers:c}}=await(new pb.Z).revokeMembers({auth:s,memberLogins:t}),d=Object.keys({...r,...l});d.forEach((t=>{const a=n.find((e=>e.login===t));e.dispatch(cy.Rb(a))})),Object.keys(c).forEach((t=>{const r=n.find((e=>e.login===t));if(!r)throw new Error(`member '${t}' not found in members list`);i.showAlert(a(gb.REVOKE_ERROR_MSG),Ce.BLW.ERROR),e.dispatch(cy.Jo(r))})),d.length&&(i.showAlert(a(gb.REVOKE_SUCCESS_MSG,{count:d.length}),Ce.BLW.SUCCESS),await(0,Re.hh)({teamId:o,action:"memberRevoked",users:d}))}catch(e){r(e)}}},secondary:{children:a(c.REVOKE_DIALOG_CANCEL),onClick:t}},closeActionLabel:a(gb.CLOSE_DIALOG_BUTTON_LABEL),title:o?a(gb.SINGLE.REVOKE_DIALOG_TITLE):a(gb.MULTIPLE.REVOKE_DIALOG_TITLE,{count:n.length}),children:(0,E.tZ)(_.n,{className:"automation-tests-revoke-member-dialog-content",children:o?a(l?gb.SINGLE.REVOKE_DIALOG_MSG:gb.SINGLE.REVOKE_DIALOG_MSG_B2B_ONLY,{username:n[0].login||n[0].name}):a(l?gb.MULTIPLE.REVOKE_DIALOG_MSG:gb.MULTIPLE.REVOKE_DIALOG_MSG_B2B_ONLY)})})};var yb;const bb=({closeDialog:e})=>{const{translate:t}=(0,b.Z)(),n=(0,ca.V)(),{inviteLinkDataForAdmin:a,getInviteLinkDataForAdmin:i}=yu();(0,r.useEffect)((()=>{i()}),[i]);const s=(0,me.cI)(a?.teamKey);return(0,E.tZ)(Ei.o,{showCloseIcon:!0,isOpen:!0,footer:(0,E.tZ)(Ce.cNS,{intent:"primary",primaryButtonTitle:(0,E.BX)(r.Fragment,{children:[yb||(yb=(0,E.tZ)(T.JO,{name:"ActionCopyOutlined",size:"medium",color:"ds.text.inverse.catchy"})),t("team_memebers_share_link_dialog_copy_link_button")]}),primaryButtonOnClick:async()=>{await navigator.clipboard.writeText(s),n.showAlert(t("team_members_share_invite_link_copied"),Ce.BLW.SUCCESS)}}),onRequestClose:e,title:t("team_memebers_share_link_dialog_title"),children:(0,E.BX)(r.Fragment,{children:[(0,E.tZ)(Ce.nvN,{children:t("team_memebers_share_link_dialog_paragraph")}),(0,E.tZ)(Ce.nvN,{sx:{marginTop:"16px",fontWeight:"600"},children:s})]})})},Sb=({membersWithoutPublicKey:e,onClose:t})=>{const{translate:n}=(0,b.Z)();return(0,E.tZ)(Ei.o,{isOpen:Boolean(e.length),footer:(0,E.tZ)(Ce.cNS,{intent:"secondary",secondaryButtonTitle:n("team_members_error_popup_public_keys_ok"),secondaryButtonOnClick:t}),onRequestClose:t,title:n("team_members_error_popup_public_keys_title"),children:(0,E.BX)("div",{children:[n("team_members_error_popup_public_keys_message"),(0,E.tZ)("ul",{sx:{listStyleType:"disc",paddingLeft:"40px",marginTop:"1em",marginBottom:"1em"},children:e.map((({login:e})=>(0,E.tZ)("li",{children:e},e)))})]})})},xb=[],fb=()=>{const{translate:e}=(0,b.Z)(),{shouldShowNonMembersInfobox:t,nonMembersCount:n,nonMembersList:a}=(()=>{const e=(0,m.k)(Fa.L,"getNonMembersCount"),t=(0,m.k)(Fa.L,"getHasAdminDismissedInfobox"),n=(0,m.k)(Fa.L,"getNonMembersList");return{shouldShowNonMembersInfobox:e.status===G.rq.Success&&t.status===G.rq.Success&&e.data>0&&!t.data,nonMembersCount:e.status===G.rq.Success&&t.status===G.rq.Success?e.data:0,nonMembersList:n.status===G.rq.Success?n.data:xb}})(),[i,s]=(0,r.useState)(!1),o=function(){const{dismissNonMembersInfobox:e}=(0,te.u)(Fa.L);return e}();return(0,r.useEffect)((()=>{i&&a.length&&(function(e){const t=e.map((e=>[e.userId,e.login,e.premiumStatus,e.proposedState,(0,ln.Z)(e.lastActivityDateUnix).toISOString()].join(","))).join("\n");(0,_o.S)(`${["user_id","login","premium_status","proposedState","last_activity_date"].join(",")}\n${t}`,"non-members-list.csv","text/csv;charset=utf-8")}(a),s(!1))}),[i,a]),t?(0,E.tZ)(rn.k,{title:e("non_members_infobox_title",{count:n}),description:e("non_members_infobox_description"),mood:"warning",size:"large",actions:[(0,E.tZ)(D.z,{intensity:"quiet",size:"small",onClick:()=>o(),children:e("non_members_infobox_dismiss_cta")},"dismiss-non-members-infobox"),(0,E.tZ)(D.z,{size:"small",isLoading:i,onClick:()=>s(!0),children:e("non_members_infobox_download_cta")},"download-non-members-list")]}):null};var vb;const Cb={SUMMARY_CARD:{display:"flex",flexDirection:"column",justifyContent:"space-between",gap:"16px",flex:1},BUTTON_AND_BADGE_AREA:{display:"flex",flexDirection:"row",gap:"16px",alignItems:"center"}},Eb=({title:e,titleColor:t,subtitle:n,action:a,isLoading:i,badge:r})=>(0,E.BX)("div",{sx:Cb.SUMMARY_CARD,children:[i?vb||(vb=(0,E.tZ)(l.Z,{mood:"brand"})):(0,E.tZ)(_.n,{textStyle:"ds.specialty.monospace.medium",color:null!=t?t:"ds.text.neutral.quiet",children:e}),(0,E.tZ)(_.n,{as:"h2",textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",children:n}),(0,E.BX)("div",{sx:Cb.BUTTON_AND_BADGE_AREA,children:[(0,E.tZ)(D.z,{disabled:a.disabled,mood:a.mood,intensity:a.intensity,onClick:a.onClick,layout:"iconTrailing",icon:a.icon,children:a.label}),null!=r?r:null]})]}),Zb=({onReinviteAllClick:e})=>{const{translate:t}=(0,b.Z)(),{routes:n}=(0,i.Xo)(),a=(0,i.k6)(),{data:s,status:o}=(0,m.k)(Kl.B,"getReport"),l=(0,m.k)(Fr.t,"getIdPFailedProvisioningsData"),{openDialog:c,shouldShowFrozenStateDialog:_}=(0,L.Ub)(),p=(0,$.C)(),h=!!p&&p.spaceTier===g.lD.Starter,S=!!p&&p.spaceTier===g.lD.Standard,[x,f]=(0,r.useState)(!0),[v,C]=(0,r.useState)(0),[Z,k]=(0,r.useState)(0),[D,T]=(0,r.useState)(0),[I,A]=(0,r.useState)(0),[w,O]=(0,r.useState)(0),[N,R]=(0,r.useState)(!0),B=l.status===G.rq.Success?l.data?.requiredSeats:0;return(0,r.useEffect)((()=>{"success"===o&&null!==_&&(A(s.seats.pending),C(s.seats.provisioned-s.seats.used),k(s.seats.provisioned),T(s.seats.used/s.seats.provisioned),O(s.passwordHealth.securityIndex),f(!1),R(0===s.seats.pending&&1===s.seats.used))}),[s,o,_]),(0,E.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"24px",backgroundColor:"ds.container.agnostic.neutral.supershy",border:"1px solid ds.border.neutral.quiet.idle",borderRadius:"8px",padding:"24px"},children:[(0,E.tZ)(d.X,{as:"h2",textStyle:"ds.title.supporting.small",color:"ds.text.neutral.quiet",children:t("team_members_summary_title")}),(0,E.BX)("div",{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",gap:"24px"},children:[(0,E.tZ)(Eb,{isLoading:x,title:`${v}`,titleColor:D<=.5?"ds.text.positive.quiet":D<=.9?"ds.text.warning.quiet":"ds.text.danger.quiet",subtitle:t("team_members_summary_seat_count_content",{totalSeats:Z}),action:{label:t("team_members_summary_seat_count_cta"),disabled:x,mood:"brand",intensity:D>.5?"catchy":"quiet",onClick:()=>{(0,y.Kz)(new u.UserClickEvent({button:u.Button.BuySeats,clickOrigin:u.ClickOrigin.UsersSummary})),_?c():h||S?a.push(`${n.teamAccountChangePlanRoutePath}`):a.push(`${n.teamAccountRoutePath}?showSeatsDialog=true`)}},badge:B?(0,E.tZ)(uc,{requiredSeatsForIdP:B}):void 0}),(0,E.tZ)("div",{sx:{width:"1px",backgroundColor:"ds.border.neutral.quiet.idle"}}),(0,E.tZ)(Eb,{isLoading:x,title:`${I||(N?"-":t("team_members_summary_reinvite_users_no_new_invites_label"))}`,titleColor:N?"ds.text.neutral.quiet":0===I?"ds.text.positive.quiet":"ds.text.warning.quiet",subtitle:0===I?t(N?"team_members_summary_reinvite_users_no_members_content":"team_members_summary_reinvite_users_no_new_invites_content"):t("team_members_summary_reinvite_users_content",{count:I}),action:{label:t("team_members_summary_reinvite_users_cta",{count:I}),mood:"neutral",intensity:"quiet",disabled:x||0===I,onClick:()=>{(0,y.Kz)(new u.UserClickEvent({button:u.Button.ReInviteUsers,clickOrigin:u.ClickOrigin.UsersSummary})),_?c():e()}}}),(0,E.tZ)("div",{sx:{width:"1px",backgroundColor:"ds.border.neutral.quiet.idle"}}),(0,E.tZ)(Eb,{isLoading:x,title:`${w||"-"}`,titleColor:w>=80?"ds.text.positive.quiet":w>=40?"ds.text.warning.quiet":w>0?"ds.text.danger.quiet":"ds.text.neutral.quiet",subtitle:t(!w||x?"team_members_summary_security_score_content_no_data":"team_members_summary_security_score_content"),action:{label:t("team_members_summary_security_score_cta"),mood:"neutral",intensity:"quiet",icon:"ActionOpenExternalLinkOutlined",onClick:()=>{(0,y.Kz)(new u.UserClickEvent({button:u.Button.CheckImproveHealthScore,clickOrigin:u.ClickOrigin.UsersSummary})),(0,W.Yo)("https://support.dashlane.com/hc/en-us/articles/360016225300-Manage-the-Password-Health-of-your-Starter-Team-or-Business-plan")}}})]})]})};var kb=n(9853),Db=(n(19813),n(71110)),Tb=n(99990);const Ib=["name","creation_date"];var Ab=n(6832);const wb=({header:e,title:t,description:n,lastUpdate:a})=>{const{translate:i}=(0,b.Z)();return(0,E.BX)("div",{sx:{padding:24},children:[(0,E.tZ)(c.k,{justifyContent:"space-between",sx:{marginBottom:24},children:e}),(0,E.BX)(yn.Z,{sx:{height:"80vh",display:"flex",justifyContent:"center",alignItems:"center"},children:[(0,E.tZ)(qa.b,{lightSrc:_m,darkSrc:Ab,sx:{width:"320px",aspectRatio:"3/2"}}),(0,E.tZ)(_.n,{textStyle:"ds.title.section.large",children:t}),(0,E.BX)(c.k,{flexDirection:"column",alignItems:"center",children:[(0,E.tZ)(_.n,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",sx:{whiteSpace:"break-spaces",textAlign:"center"},children:n}),a&&(0,E.tZ)(_.n,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",children:i("team_members_uvvs_last_updated",{when:a})})]})]})]})};var Ob;const Nb={NOT_ADMIN:"team_members_uvvs_error_user_is_not_admin","snapshot-malformed":"team_members_uvvs_error_snapshot_malformed","snapshot-not-found":"team_members_uvvs_error_snapshot_not_found","missing-provisioning-key":"team_members_uvvs_error_missing_provisioning_key","download-unknown":"team_members_uvvs_error_snapshot_unknown"},Rb=({tag:e,header:t})=>{const{translate:n}=(0,b.Z)(),i=Nb[e],r=e===kb.T_.SNAPSHOT_MALFORMED||e===kb.T_.DOWNLOAD_UNKNOWN;return(0,E.BX)("div",{sx:{padding:24},children:[t,(0,E.tZ)(yn.Z,{children:(0,E.BX)(c.k,{flexDirection:"column",alignItems:"center",justifyContent:"center",fullWidth:!0,gap:"16px",sx:{m:"20vh 0"},children:[Ob||(Ob=(0,E.tZ)(Qi.v,{name:"FeedbackFailOutlined",mood:"danger",size:"xlarge"})),(0,E.BX)(c.k,{alignItems:"center",flexDirection:"column",gap:"8px",children:[(0,E.tZ)(d.X,{textStyle:"ds.title.section.large",as:"h1",children:n("team_members_uvvs_error_header")}),(0,E.tZ)(_.n,{sx:{whiteSpace:"break-spaces",textAlign:"center"},children:n(i)}),r&&(0,E.tZ)(c.k,{flexDirection:"column",alignItems:"center",gap:"0.5rem",sx:{mt:"2rem"},children:(0,E.tZ)($t.Q,{isExternal:!0,href:a.DC,children:n("team_members_uvvs_contact_support")})})]})]})})]})};var Lb;const Bb=()=>Lb||(Lb=(0,E.tZ)(c.k,{justifyContent:"center",alignContent:"center","aria-busy":"true",role:"alert",children:(0,E.tZ)(l.Z,{size:75})})),Mb=()=>{const{translate:e}=(0,b.Z)();return(0,E.BX)(Qp.s,{children:[(0,E.tZ)(Jp.b,{sortId:"name",isRowHeader:!0,children:e("team_members_uvvs_item_name")}),(0,E.tZ)(Jp.b,{sortId:"creation_date",children:e("team_members_uvvs_date_created")})]})};var Pb=n(14646),Ub=n(26555);const Xb=({uvvs:e})=>{const{translate:t}=(0,b.Z)(),n=(0,r.useMemo)((()=>e.map((e=>({...e,creationDate:(0,ln.Z)(e.creationDateUnix)})))),[e]);return(0,E.tZ)(eg.i,{children:n?.map((e=>(0,E.BX)(tg.S,{children:[(0,E.tZ)(ng.p,{children:(0,E.tZ)(Pb.s,{icons:e.sharing?.isShared?["SharedOutlined"]:void 0,title:e.domain,thumbnail:(0,E.tZ)(Ub.h,{domainURL:e.domain})})}),(0,E.tZ)(ng.p,{children:e.creationDateUnix?(0,E.tZ)(em.Z,{date:e.creationDate}):t("team_members_uvvs_creation_date_not_available")})]},e.id)))})};var zb;const Fb=({header:e,lastUpdate:t,sort:n,uvvs:a,onSort:i,onExport:r,pagination:s})=>{const{translate:o}=(0,b.Z)();return(0,E.BX)("div",{sx:{padding:24},children:[(0,E.BX)(c.k,{justifyContent:"space-between",sx:{marginBottom:24},children:[e,(0,E.tZ)(D.z,{icon:"DownloadOutlined",mood:"brand",intensity:"quiet",layout:"iconLeading",onClick:r,children:o("webapp_account_import_export_data_csv_button")})]}),(0,E.BX)(yn.Z,{children:[t?(0,E.tZ)(_.n,{textStyle:"ds.title.block.small",children:o("team_members_uvvs_last_updated",{when:t})}):null,(0,E.BX)(Yp.i,{"aria-label":o("team_members_uvvs_table_title"),sort:n,onSort:i,children:[zb||(zb=(0,E.tZ)(Mb,{})),(0,E.tZ)(Xb,{uvvs:a})]}),(0,E.tZ)(c.k,{justifyContent:"center",children:s})]})]})};var qb;const Gb=({header:e,userId:t,pageSize:n=24})=>{const{translate:a}=(0,b.Z)(),{lastUpdate:i,status:s,error:o,sortedUVVS:l,sort:c,isEmpty:d,onSort:_,onExport:p}=function(e){const{data:t,status:n,error:a}=(0,m.k)(Tb.d,"downloadUVVS",{userLogin:e}),{exportUVVS:i}=(0,te.u)(Tb.d),[s,o]=(0,r.useState)({sortId:"name",sortOrder:"ascending"}),l=(0,r.useMemo)((()=>t?.uvvs?t.uvvs.toSorted(((e,t)=>"name"===s.sortId?"ascending"===s.sortOrder?e.domain.localeCompare(t.domain):t.domain.localeCompare(e.domain):"creation_date"===s.sortId?"ascending"===s.sortOrder?e.creationDateUnix-t.creationDateUnix:t.creationDateUnix-e.creationDateUnix:0)):[]),[t,s]),c=(0,r.useCallback)((async()=>{try{(0,y.Kz)(new u.UserDownloadUserDataEvent({fileType:u.BackupFileType.Csv,dataSource:u.DataSource.EmployeeLogins,flowStep:u.FlowStep.Start})),await i({userLogin:e}),(0,y.Kz)(new u.UserDownloadUserDataEvent({fileType:u.BackupFileType.Csv,dataSource:u.DataSource.EmployeeLogins,flowStep:u.FlowStep.Complete}))}catch(e){(0,y.Kz)(new u.UserDownloadUserDataEvent({fileType:u.BackupFileType.Csv,dataSource:u.DataSource.EmployeeLogins,flowStep:u.FlowStep.Error}))}}),[i,e]),d=(0,r.useMemo)((()=>!t?.uvvs?.length),[t?.uvvs?.length]),_=(0,r.useMemo)((()=>t?.lastUpdateDateUnix?(0,ln.Z)(t?.lastUpdateDateUnix):void 0),[t?.lastUpdateDateUnix]),p=(0,r.useMemo)((()=>_?(0,Db.Z)(_,new Date):void 0),[_]),g=(0,r.useCallback)((e=>{Ib.includes(e.sortId)&&o(e)}),[]);return{data:t,sort:s,sortedUVVS:l,status:n,error:a,isEmpty:d,lastUpdate:p,onExport:c,onSort:g}}(t),{items:g,count:h,pageIndex:S,setPageIndex:x}=((e,t)=>{const[n,a]=(0,r.useState)(0);(0,r.useEffect)((()=>{a(0)}),[e]);const i=t*n;return{items:e.slice(i,i+t),count:e.length,pageIndex:n,setPageIndex:a}})(l,n);if((0,r.useEffect)((()=>{(0,y.Nc)(u.PageView.TacUserLogins)}),[]),s===G.rq.Loading)return qb||(qb=(0,E.tZ)(Bb,{}));if(s===G.rq.Error){var f;const t=null!=(f=o?.tag)?f:kb.T_.DOWNLOAD_UNKNOWN;return t===kb.T_.SNAPSHOT_NOT_FOUND?(0,E.tZ)(wb,{header:e,title:a("team_members_uvvs_user_already_logged_in"),description:`${a("team_members_uvvs_loggin_will_be_available")}`}):(0,E.tZ)(Rb,{tag:t,header:e})}if(d)return(0,E.tZ)(wb,{header:e,title:a("team_members_uvvs_no_logins"),description:a("team_members_uvvs_logins_not_added",{userId:t}),lastUpdate:i});const v=(0,E.tZ)(eh.Z,{currentPageIndex:S,itemsLength:h,itemsPerPage:24,onChange:x});return(0,E.tZ)(Fb,{header:e,uvvs:g,sort:c,lastUpdate:i,onSort:_,onExport:p,pagination:v})};var Vb;const jb=({userId:e,goBack:t})=>{const{translate:n}=(0,b.Z)();return(0,E.BX)(c.k,{alignItems:"center",gap:4,children:[(0,E.tZ)(D.z,{onClick:t,"aria-label":n("_common_action_go_back"),layout:"iconOnly",icon:"ArrowLeftOutlined",intensity:"supershy"}),(0,E.tZ)(_.n,{color:"ds.text.brand.quiet",textStyle:"ds.title.section.medium",children:e}),Vb||(Vb=(0,E.tZ)(T.JO,{name:"CaretRightOutlined"})),(0,E.tZ)(_.n,{color:"ds.text.neutral.catchy",textStyle:"ds.title.section.medium",children:n("team_members_heading_password_count")})]})};var Wb;const Hb=({userId:e,goBack:t})=>{const{isAdminVisibilityEnabled:n,status:a,error:i}=Iy();if((0,r.useEffect)((()=>{a===G.rq.Success&&!1===n&&t()}),[t,a,n]),!n)return null;if(a===G.rq.Loading)return Wb||(Wb=(0,E.tZ)(Bb,{}));const s=(0,E.tZ)(jb,{userId:e,goBack:t});if(a===G.rq.Error){var o;const e=null!=(o=i?.tag)?o:kb.T_.DOWNLOAD_UNKNOWN;return(0,E.tZ)(Rb,{tag:e,header:s})}return(0,E.tZ)(Gb,{userId:e,header:s})};var $b,Kb;const Yb="_common_toast_close_label",Qb=[],Jb=({lee:e,location:t})=>{const n=(0,r.useRef)(!1),{translate:a}=(0,b.Z)(),{reportTACError:i}=se(),s=(0,ca.V)(),l=(0,Hh.v)(),{proposeMembers:c}=(0,te.u)(Fa.L),{showToast:_}=(0,o.p)(),{openDialog:g,shouldShowFrozenStateDialog:h}=(0,L.Ub)(),S=(0,$.C)(),{data:x,status:f}=(0,m.k)(p.o,"getTeamSeats"),[v,C]=(0,r.useState)(!0),{invitePartialSuccessState:Z,setInvitePartialSuccessState:k,handleInvitationResultClosed:D}=pu(),[T,I]=(0,r.useState)(null),[A,w]=(0,r.useState)(!1),O=(0,Pe.o)(v_.G.WebOnboardingInviteLinkTacMigration),[R,B]=(0,r.useState)({showError:!1,membersWithoutPublicKey:[]}),M=(0,r.useCallback)((()=>{const t=(0,cs.v0)(e.globalState);return t||i(new Error(ls.N)),t}),[e.globalState,i]),P=(0,r.useCallback)((()=>{h?g():(w(!0),(0,y.Kz)(new u.UserSendManualInviteEvent({flowStep:u.FlowStep.Start,inviteCount:0,inviteFailedCount:0,inviteResentCount:0,inviteSuccessfulCount:0,isImport:!1,isResend:!1})))}),[h]),[U,X]=(0,r.useState)(null),z=t=>{e.dispatch(cy.eY(t))},F=(e,t)=>{k({show:!0,invitedMembers:e,refusedMembers:t}),z(Object.keys(e))},q=()=>{const n=M(),a=n?.teamId;a&&(0,Re.YY)({teamId:a}).then((n=>{var a;e.dispatch(cy.Wq({members:n})),cy.xF({extraFreeSlots:null!=(a=x?.extraFree)?a:0,membersNumber:n.length}),C(!1);const i=n&&1===n.length,r=t.state?.openSendInvitesDialog;if(!h&&(!l&&i||r))P();else if(t.state?.openResendPendingInvitationsDialog&&!h)return void V("reinviteAll",ay(n));const s=n.filter((e=>!e.hasPublicKey&&"accepted"===e.status));s.length&&B({showError:!0,membersWithoutPublicKey:s})})).catch(i)},V=(0,r.useCallback)(((t,n=[],i)=>{const r=async()=>{if(n.forEach((t=>{e.dispatch(cy.bh(t))})),!M())return;const t=n.map((e=>e.login));try{const i=await c({proposedMemberLogins:t});if("failure"===i.tag)throw new Error(i.error);if(i.data&&(0,k_.e)(i.data)){const{refusedMembers:a}=i.data.content;Object.values(a).forEach((t=>{const a=n.find((e=>e.login===t));F(i.data.proposedMembers,i.data.refusedMembers),e.dispatch(cy.S2(a))})),(0,y.Kz)(new u.UserSendManualInviteEvent({flowStep:u.FlowStep.Complete,inviteCount:t.length+Object.keys(a).length,inviteFailedCount:Object.keys(a).length,inviteResentCount:t.length,inviteSuccessfulCount:t.length-Object.keys(a).length,isImport:!1,isResend:!0}))}else _({description:a("team_members_invite_success_message"),mood:"brand",closeActionLabel:a(Yb)}),(0,y.Kz)(new u.UserSendManualInviteEvent({flowStep:u.FlowStep.Complete,inviteCount:t.length,inviteFailedCount:0,inviteResentCount:t.length,inviteSuccessfulCount:t.length,isImport:!1,isResend:!0}))}catch(i){const{message:r="",data:s={}}=i,o=a("team_members_invite_error_message_no_free_slot"),l=a("team_members_invite_error_message"),{content:{error:c=r}={}}=s,d=["no_free_slot_free_plan","no_free_slot"].includes(c)?o:l;n.forEach((t=>{e.dispatch(cy.S2(t))})),_({description:d,mood:"danger",closeActionLabel:a(Yb)}),(0,y.Kz)(new u.UserSendManualInviteEvent({flowStep:u.FlowStep.Error,inviteCount:t.length,inviteFailedCount:t.length,inviteResentCount:t.length,inviteSuccessfulCount:0,isImport:!1,isResend:!0}))}},s=n.map((e=>e.login));switch(t){case"reassign":return I((0,E.tZ)(Sy,{lee:e,selectedMembers:n,newRole:i,closeDialog:()=>I(null)}));case"reactivate":case"reinvite":return h?void g():void r();case"reinviteAll":return h?void g():I((0,E.tZ)(mb,{resendOrReactivate:r,closeDialog:()=>I(null)}));case"revoke":return I((0,E.tZ)(hb,{lee:e,selectedMembers:n,closeDialog:()=>I(null)}));case"changeLoginEmail":return I((0,E.tZ)(_b,{selectedMembers:n,closeDialog:()=>I(null),refreshTeamMembers:q}));case"cancelChangeLoginEmail":return I((0,E.tZ)(sb,{selectedMembers:n,closeDialog:()=>I(null),refreshTeamMembers:q}));case"generateBackupCode":return I((0,E.tZ)(ey,{memberLogin:s[0],isOpen:!0,closeBackupCodeDialog:()=>I(null)}));case"enableInviteLink":return h?void g():I(!0===O?(0,E.tZ)(Zu,{isOpen:!0,onCancel:()=>I(null),onInviteLinkActivation:()=>V("shareInviteLink")}):(0,E.tZ)(ub,{closeDialog:()=>I(null),applyActionOnMembers:V}));case"shareInviteLink":return h?void g():I(!0===O?(0,E.tZ)(Iu,{isOpen:!0,onClose:()=>I(null)}):(0,E.tZ)(bb,{closeDialog:()=>I(null)}));case"viewMemberLogins":{const e=n[0];return X(e.login)}}}),[s,M,F,h,a]),j=(({members:e})=>{const[t,n]=(0,r.useState)((()=>new Set)),[a,i]=(0,r.useState)(0),[s,o]=(0,r.useState)(["accepted","pending","removed"]),[l,c]=(0,r.useState)(""),[d,_]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{n(new Set)}),[e]),{checkedMembers:t,currentPageIndex:a,filterPendingChangeEmail:d,searchQuery:l,setCheckedMembers:n,setCurrentPageIndex:i,setFilterPendingChangeEmail:_,setSearchQuery:c,setStatusFilters:o,statusFilters:s}})({members:e.state.members.valueOr(Qb)});if((0,r.useEffect)((()=>{if(n.current||null===l||null===h)return;n.current=!0;const e=M();if(!e)return;const{teamId:t}=e;t&&(q(),(0,y.Nc)(u.PageView.TacUserList))}),[P,V,M,e,t.state?.openResendPendingInvitationsDialog,t.state?.openSendInvitesDialog,l,i,h,a,x?.extraFree]),!S||f!==G.rq.Success)return null;const W=f_(e.state.members.valueOr([]));return null!==U?(0,E.tZ)(Hb,{goBack:()=>X(null),userId:U}):(0,E.tZ)(jo,{header:(0,E.tZ)(d.X,{as:"h1",color:"ds.text.neutral.standard",textStyle:"ds.title.section.large",children:a("team_members_page_title")}),children:(0,E.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"16px"},children:[$b||($b=(0,E.tZ)(fb,{})),Kb||(Kb=(0,E.tZ)(ny,{})),(0,E.tZ)(Zb,{onReinviteAllClick:()=>{V("reinviteAll",ay(e.state.members.valueOr([])))}}),(0,E.tZ)("div",{sx:{display:"flex",justifyContent:"center"},children:v?(0,E.tZ)(Ai.Z,{containerStyle:{minHeight:240}}):(0,E.tZ)(ib,{lee:e,members:e.state.members.valueOr(Qb),onMembersActionSelect:V,onMembersInvite:P,memberListFiltering:j})}),R.showError?(0,E.tZ)(Sb,{membersWithoutPublicKey:R.membersWithoutPublicKey,onClose:()=>B((e=>({...e,showError:!1})))}):null,T,(0,E.tZ)(Au,{lee:e,teamId:(0,N.ev)(e.globalState),totalSeatCount:e.state.totalSeatCount.valueOr(0),numSeatsTaken:W,excludedInviteMembers:e.state.members.valueOr([]).filter((({status:e})=>"removed"!==e)).map((({login:e})=>e)),isFreeTrial:S.isFreeTrial,shouldShowInviteDialog:A,handleCloseInviteDialog:()=>w(!1),handleInvitePartialSuccess:F,handleInviteCompleteSuccess:z,invitePartialSuccessState:Z,handleInvitationResultClosed:D})]})})};var eS=n(78128);const tS={settingsPage:"settingsPage--k2Ztg5L3TZ",withoutHeader:"withoutHeader--K7wlLBUI31",settingsContainer:"settingsContainer--nyZHFHWont",settingsRow:"settingsRow--Mid_I3S6Qx",settingsLabelContainer:"settingsLabelContainer--rCMIUljV94",settingsGreyedLabel:"settingsGreyedLabel--L0ZP86y4UJ",textSettingRow:"textSettingRow--JwyTaO5qbq",selectSettingRow:"selectSettingRow--CRjY3loqBA",switchSettingRow:"switchSettingRow--THK1RoaDKQ",textFieldInputColumn:"textFieldInputColumn--G3ALnYhur_",helperLabelPanel:"helperLabelPanel--gGU7C6m_r2",infoBoxPanel:"infoBoxPanel--TMnBp9xS5d",textWithButtonSettingRow:"textWithButtonSettingRow--rWQRX8E5Np",versionContainer:"versionContainer--eWfpg9oE65",versionNumber:"versionNumber--uHC_eBvZbs",confirmationContent:"confirmationContent--C7lnmdM6Vl"};var nS;const aS=({children:e,sideContent:t,trailingContent:n,title:a,isLoading:i=!1})=>{const r=t?{display:"flex",flexDirection:"column",gap:"24px",maxWidth:"800px"}:{backgroundColor:"ds.container.agnostic.neutral.supershy",padding:"32px",borderRadius:"8px"};return i?nS||(nS=(0,E.tZ)(ec.a,{scopedToPage:!0})):(0,E.tZ)("div",{className:Id()(tS.settingsPage,{[tS.withoutHeader]:!a}),children:(0,E.BX)("div",{className:tS.settingsContainer,children:[a?(0,E.tZ)(d.X,{as:"h1",textStyle:"ds.title.section.large",color:"ds.text.neutral.catchy",sx:{marginBottom:"32px"},children:a}):null,(0,E.BX)("div",{sx:{display:"flex",gap:"24px"},children:[(0,E.BX)("div",{sx:r,children:[e,(0,E.tZ)("div",{children:n})]}),t]})]})})};var iS=n(23104),rS=n(89368),sS=n(99203);const oS=({data:e,targetUri:t,...n})=>{const a=(0,r.useRef)(null);return(0,E.BX)("form",{action:t,method:"post",ref:a,target:"_blank",rel:"noopener",children:[(()=>{const t=[];return Object.keys(e).forEach((n=>t.push((0,E.tZ)("input",{defaultValue:e[n],type:"hidden",name:n},String(65535*Math.random()).replace(/\./,""))))),(0,E.tZ)("div",{children:t})})(),(0,E.tZ)(ry.Z,{onClick:()=>a.current?.submit(),...n})]})},lS={uploadCsvLabel:"uploadCsvLabel--sX4DnYKGlL",fileContainer:"fileContainer--M2SFpr0Pvl",file:"file--dJtQQDGzSk",fileIcon:"fileIcon--MKumqlXPl7",fileTitle:"fileTitle--d2cupH4GiA",fileTitleHeader:"fileTitleHeader--jqYDFR_MsK",fileTitleHint:"fileTitleHint--g2OBjT1L4G",fileTitleHintError:"fileTitleHintError--F4iw3QsNVb",fileTitleHintSuccess:"fileTitleHintSuccess--JPyWdw7GS8",fileProgressBackground:"fileProgressBackground--NEs2tyO8Pe",fileProgress:"fileProgress--cr0wc0wF3w",fileProgressAnimation:"fileProgressAnimation--aFpkqnmOMV",fileProgressComplete:"fileProgressComplete--y2f1JLicyr",fileButtons:"fileButtons--ofyh4FIc7u",fileError:"fileError--RHrDBIVtVA",fileErrorTitle:"fileErrorTitle--Jx5QASYwkS",fileErrorTitleIcon:"fileErrorTitleIcon--b8GGJ4i0UT",fileErrorContent:"fileErrorContent--G67_aw40u7"},cS="team_settings_duo_header_general",dS=e=>{const{translate:t}=(0,b.Z)(),{reportTACError:n}=se(),a=(0,r.useRef)(null),[i,s]=(0,r.useState)(!1),[o,l]=(0,r.useState)(!1),[c,d]=(0,r.useState)(!1),[_,u]=(0,r.useState)(!1),[g,h]=(0,r.useState)(!1),[y,S]=(0,r.useState)(!1),[x,f]=(0,r.useState)(!1),[v,C]=(0,r.useState)(null),[Z,k]=(0,r.useState)(!1),[D,T]=(0,r.useState)(null),I=(()=>{const e=(0,m.k)(p.o,"getTeamDuoInfo");return{status:e.status,data:e.data,error:e.error}})(),A=e.lee.apiMiddleware.teamPlans?e.lee.apiMiddleware.teamPlans:(n(new Error("teamPlans service not set in apiMiddleware")),null),w=e.lee.apiMiddleware.strongAuth?e.lee.apiMiddleware.strongAuth:(n(new Error("strongAuth service not set in apiMiddleware")),null);return(0,r.useEffect)((()=>{(()=>{if(I.status===G.rq.Success&&I.data){const{duo:t,duoIntegrationKey:n,duoSecretKey:a,duoApiHostname:i}=I.data;e.lee.dispatch(eS.k0({duo:t,duoIntegrationKey:n,duoSecretKey:a,duoApiHostname:i}))}else I.status===G.rq.Error&&console.error(`DuoSettings: fetchData failed with error: ${I.error}`)})()}),[I.data,I.error,I.status]),(0,E.BX)(aS,{title:t(cS),children:[(0,E.tZ)("p",{className:tS.settingsHeader,children:t(cS)}),(0,E.tZ)(Bd,{label:t("team_settings_duo_enable_label"),labelHelper:t("team_settings_duo_enable_helper"),children:(0,E.tZ)(iS.Z,{genericErrorMessage:t("_common_generic_error"),isDisabled:I.status===G.rq.Loading||i,saveValueFunction:()=>{const t=!e.lee.state.hasDuo;return s(!0),e.lee.dispatch(eS.FC(t)),A?.setSettings({duo:t}).then((()=>s(!1))).catch((()=>{}))},value:e.lee.state.hasDuo})}),(0,E.tZ)("p",{className:tS.settingsHeader,children:t("team_settings_duo_header_setup")}),(0,E.BX)(Bd,{label:t("team_settings_duo_integration_key_label"),labelHelper:t("team_settings_duo_integration_key_helper"),children:[(0,E.tZ)(rS.n,{containerStyle:{width:"300px"},inputStyle:{minHeight:42},defaultValue:e.lee.state.duoIntegrationKey,isDisabled:o,onBlur:t=>{if(o)return;const n=t.target.value;e.lee.dispatch(eS.a2(n)),l(!0),d(!1),A&&A.setSettings({duoIntegrationKey:n}).then((()=>{l(!1)})).catch((()=>{}))},onFocus:()=>d(!0),placeholder:t("team_settings_duo_integration_key_hint")}),c||o?(0,E.tZ)("div",{children:(0,E.tZ)(ry.Z,{label:t("team_settings_duo_integration_key_button"),loading:o})}):null]}),(0,E.BX)(Bd,{label:t("team_settings_duo_secret_key_label"),labelHelper:t("team_settings_duo_secret_key_helper"),children:[(0,E.tZ)(rS.n,{containerStyle:{width:"300px"},inputStyle:{minHeight:42},defaultValue:e.lee.state.duoSecretKey,isDisabled:_,onBlur:(t=>{if(_)return;const n=t.target.value;e.lee.dispatch(eS.E4(n)),u(!0),h(!1),A&&A.setSettings({duoSecretKey:n}).then((()=>{u(!1)})).catch((()=>{}))}).bind(void 0),onFocus:()=>h(!0),placeholder:t("team_settings_duo_secret_key_hint")}),g||_?(0,E.tZ)("div",{children:(0,E.tZ)(ry.Z,{label:t("team_settings_duo_secret_key_button"),loading:_})}):null]}),(0,E.BX)(Bd,{label:t("team_settings_duo_api_host_label"),labelHelper:t("team_settings_duo_api_host_helper"),children:[(0,E.tZ)(rS.n,{containerStyle:{width:"300px"},inputStyle:{minHeight:42},defaultValue:e.lee.state.duoApiHostname,isDisabled:y,onBlur:(t=>{if(y)return;const n=t.target.value;e.lee.dispatch(eS.qf(n)),S(!0),f(!1),A&&A.setSettings({duoApiHostname:n}).then((()=>{S(!1)})).catch((()=>{}))}).bind(void 0),onFocus:()=>f(!0),placeholder:t("team_settings_duo_api_host_hint")}),x||y?(0,E.tZ)("div",{children:(0,E.tZ)(ry.Z,{label:t("team_settings_duo_api_host_button"),loading:y})}):null]}),(0,E.tZ)("p",{className:tS.settingsHeader,children:t("team_settings_duo_header_directory")}),(0,E.tZ)(Bd,{label:t("team_settings_duo_upload_csv_label"),labelHelper:(0,E.BX)("ol",{className:lS.uploadCsvLabel,children:[(0,E.tZ)("li",{children:t("team_settings_duo_upload_csv_helper_step_one")}),(0,E.tZ)("li",{children:t("team_settings_duo_upload_csv_helper_step_two")}),(0,E.tZ)("li",{children:t("team_settings_duo_upload_csv_helper_step_three")})]}),children:(0,E.BX)("div",{className:lS.fileContainer,children:[(0,E.BX)("div",{className:lS.file,children:[(0,E.tZ)("span",{className:lS.fileIcon}),(0,E.tZ)("div",{className:lS.fileTitle,children:D?[(0,E.tZ)("div",{className:lS.fileTitleHeader,children:D},"header"),(0,E.tZ)("div",{className:lS.fileProgressBackground,children:(0,E.tZ)("div",{className:Z?lS.fileProgressComplete:lS.fileProgress})},"progress"),(0,E.tZ)("p",{className:[lS.fileTitleHint,Z&&v?lS.fileTitleHintError:lS.fileTitleHintSuccess].join(" "),children:t(Z?v?"team_settings_duo_upload_csv_feedback_error":"team_settings_duo_upload_csv_feedback_success":"team_settings_duo_upload_csv_feedback_progress")},"hint")]:[(0,E.tZ)("div",{className:lS.fileTitleHeader,children:"duo_usernames.csv"},"header")]})]}),(0,E.BX)("div",{className:lS.fileButtons,children:[(0,E.tZ)("input",{type:"file",id:"file",accept:"text/csv, text/plain, .csv",ref:a,style:{display:"none"},onChange:(()=>{var e;D&&T(null);const t=null!=(e=a.current?.files?.[0])?e:{name:""};T(t.name),w&&w.uploadDuoCsv(t).then((()=>{k(!0),setTimeout((()=>T(null)),2e3)})).catch((e=>{C(e.code.toLowerCase()),k(!0)}))}).bind(void 0)}),(0,E.tZ)(sS.Z,{label:t("team_settings_duo_upload_csv_button_upload"),onClick:(()=>{a.current?.click()}).bind(void 0)}),(0,E.tZ)(oS,{data:{login:e.lee.globalState.user.session.login,uki:e.lee.globalState.user.session.uki},label:t("team_settings_duo_upload_csv_button_download"),style:{marginLeft:"16px"},targetUri:"https://ws1.dashlane.com/3/strongauth/exportDuoUsernames"})]}),v?(0,E.BX)("div",{className:lS.fileError,children:[(0,E.BX)("div",{className:lS.fileErrorTitle,children:[(0,E.tZ)("span",{className:lS.fileErrorTitleIcon,children:"!"}),t("team_settings_duo_upload_csv_error_title")]}),(0,E.tZ)("p",{className:lS.fileErrorContent,children:t(`team_settings_duo_upload_csv_error_${v}`)})]}):null]})})]})};var _S=n(63123),uS=n(57457),mS=n(74466);const pS=({content:e,header:t,index:n})=>(0,E.BX)(c.k,{gap:"8px",sx:{flexFlow:"row",flexBasis:"25%"},children:[(0,E.tZ)(c.k,{justifyContent:"center",alignItems:"center",sx:{width:36,height:36,borderRadius:36,flexShrink:0,backgroundColor:"ds.container.expressive.brand.quiet.idle",color:"ds.text.brand.standard"},children:n}),(0,E.BX)("section",{children:[(0,E.tZ)(d.X,{as:"h4",textStyle:"ds.title.block.medium",sx:{marginBottom:"8px"},children:t}),(0,E.tZ)(_.n,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.quiet",children:e})]})]}),gS=()=>{const{translate:e}=(0,b.Z)();return(0,E.BX)("div",{sx:{display:"flex",flexDirection:"row",marginBottom:40,gap:"24px"},children:[(0,E.tZ)(pS,{index:1,header:e("team_settings_master_password_policies_settings_stepper_step_request_title"),content:e("team_settings_master_password_policies_settings_stepper_step_request_subtitle")}),(0,E.tZ)(pS,{index:2,header:e("team_settings_master_password_policies_settings_stepper_step_approval_title"),content:e("team_settings_master_password_policies_settings_stepper_step_approval_subtitle")}),(0,E.tZ)(pS,{index:3,header:e("team_settings_master_password_policies_settings_stepper_step_recover_title"),content:e("team_settings_master_password_policies_settings_stepper_step_recover_subtitle")}),(0,E.tZ)(pS,{index:4,header:e("team_settings_master_password_policies_settings_stepper_step_login_title"),content:e("team_settings_master_password_policies_settings_stepper_step_login_subtitle")})]})};var hS;const yS=e=>{const[t,n]=(0,r.useState)(!1),[i,s]=(0,r.useState)(!1),[l,c]=(0,r.useState)(!1),[m,p]=(0,r.useState)(!1),[g,h]=(0,r.useState)(""),[S,x]=(0,r.useState)(!1),{translate:f}=(0,b.Z)(),{reportTACError:v}=se(),C=(0,dy.U)(),{status:Z,data:k}=Ty(),{showToast:D}=(0,o.p)();if((0,r.useEffect)((()=>{null!==C&&((0,y.Nc)(u.PageView.TacSettingsAccountRecovery),(async()=>{if(n(!0),(0,cs.v0)(e.lee.globalState))try{const t=k?.recoveryEnabled;e.lee.dispatch(mS.x({recoveryEnabled:t}));const n=await(async()=>{const t=(0,cs.v0)(e.lee.globalState);if(t&&t.teamId){const e=await(0,Re.mP)({teamId:t.teamId});return Boolean(e.length)}return v(new Error(ls.N)),!1})();p(n)}catch(e){console.error(e)}finally{n(!1)}else v(new Error(ls.N))})())}),[C,k]),Z!==G.rq.Success||!k)return null;const T=async t=>{n(!0);const a=(0,N.ev)(e.lee.globalState);if(a)try{await(0,Re.jy)({teamId:a,settings:{recoveryEnabled:t}}),e.lee.dispatch(mS.Zn(t)),D({id:"toggleRecovery",description:f(t?"team_settings_master_password_policies_dialog_alert_label_available":"team_settings_master_password_policies_dialog_alert_label_unavailable"),action:{label:f("common_alert_undo_action"),onClick:()=>{T(!t)}}}),n(!1)}catch(e){n(!1)}else v(new Error(ls.N))},I=async()=>{c((e=>!e))},A=async()=>{s(!0);const t=await(0,Re.RR)({masterPassword:g});s(!1),t?(await Promise.all([I(),T(!e.lee.state.recoveryEnabled)]),h(""),x(!1)):x(!0)},w=m&&e.lee.state.recoveryEnabled;return(0,E.BX)(aS,{title:f("team_settings_menu_title_account_recovery"),children:[(0,E.BX)("div",{children:[(0,E.BX)("div",{sx:{position:"relative"},children:[(0,E.tZ)(d.X,{textStyle:"ds.title.section.medium",as:"h3",sx:{marginBottom:"8px"},children:f("team_settings_master_password_policies_settings_recover_label")}),(0,E.tZ)(_.n,{textStyle:"ds.body.standard.regular",sx:{marginBottom:"40px",paddingRight:"80px"},children:f("team_settings_master_password_policies_settings_recover_label_helper")}),(0,E.tZ)(_S.Z,{sx:{position:"absolute",top:0,right:0},disabled:t||w,readOnly:!!C,tooltip:C?f("team_settings_master_password_policies_settings_recovery_blocked_discontinued"):void 0,checked:e.lee.state.recoveryEnabled,onChange:I})]}),(0,E.tZ)(d.X,{textStyle:"ds.title.section.medium",as:"h3",sx:{marginBottom:"24px"},children:f("team_settings_master_password_policies_settings_how_it_works_label")}),hS||(hS=(0,E.tZ)(gS,{})),(0,E.tZ)(_.n,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",sx:{marginBottom:"4px"},children:f("team_settings_master_password_policies_settings_how_it_works_label_helper")}),(0,E.tZ)($t.Q,{isExternal:!0,href:a.WW,children:f("team_settings_master_password_policies_settings_how_it_works_label_helper_link_text")})]}),(0,E.tZ)(uS.Z,{isOpen:l,title:e.lee.state.recoveryEnabled?f("team_settings_master_password_policies_dialog_title_disable"):f("team_settings_master_password_policies_dialog_title_enable"),labelDismiss:f("team_settings_master_password_policies_dialog_cta_cancel_label"),labelConfirm:e.lee.state.recoveryEnabled?f("team_settings_master_password_policies_dialog_cta_confirm_label_disable"):f("team_settings_master_password_policies_dialog_cta_confirm_label_enable"),onDismiss:()=>{h(""),x(!1),c(!1)},onConfirm:()=>A(),ctaIsDisabled:i||!g,onChange:e=>{h(e.target.value),x(!1)},isMasterPasswordInvalid:S,onKeyDown:e=>{(async e=>{13===e.keyCode&&g&&await A()})(e)},children:e.lee.state.recoveryEnabled?(0,E.BX)("div",{children:[(0,E.tZ)(_.n,{children:f.markup("team_settings_master_password_policies_confirmation_dialog_disable_label_markup")}),(0,E.tZ)(_.n,{children:f("team_settings_master_password_policies_confirmation_dialog_disable_sublabel")})]}):(0,E.BX)("div",{children:[(0,E.tZ)(_.n,{children:f.markup("team_settings_master_password_policies_confirmation_dialog_enable_label_markup",{},{linkTarget:"_blank"})}),(0,E.tZ)(_.n,{children:f("team_settings_master_password_policies_confirmation_dialog_enable_sublabel")})]})})]})},bS=({children:e})=>(0,E.tZ)("div",{sx:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"32px",border:"1px solid ds.border.neutral.quiet.idle",borderRadius:"8px",padding:"32px",backgroundColor:"ds.background.default"},children:e}),SS=({header:e})=>(0,E.tZ)(d.X,{as:"h2",textStyle:"ds.title.section.medium",color:"ds.text.neutral.standard",children:e.label},e.label),xS=({onClick:e,content:t})=>(0,E.tZ)(D.z,{mood:"brand",intensity:"quiet",onClick:e,sx:{maxWidth:"fit-content"},children:t}),fS="team_settings_saving_label",vS="team_settings_save_success_label",CS={SETTINGS_LABEL_MARGIN_TOP:{marginTop:"13px"},HELPER_LABEL_PANEL:{color:"ds.text.neutral.standard",marginTop:"13px",marginBottom:"8px",paddingRight:"70px",fontSize:"12px",fontWeight:"400"}};var ES=n(24107);const ZS=({field:e,editSettings:t,checkForAuthenticationError:n})=>{const{translate:a}=(0,b.Z)(),{reportTACError:i}=se(),s=!!e.multiLine,o=e.deserializer?e.deserializer(e.value):e.value,l=(0,r.useCallback)((async a=>{var r;if(!t)return;if(e.validator){const t=e.serializer?e.serializer(a):a,n=e.validator(t);if(n)throw new Error(e.getErrorMessageForKey?.(n))}if(n?.())return;const s={};if(["disableAutoLoginDomains","teamDomain"].includes(null!=(r=e.feature)?r:"")){const t=e.value;if(t.length){const n=e.serializer?.(a),i=t.filter((e=>!n.some((t=>t===e)))),r=n.filter((e=>!t.some((t=>t===e))));e.feature&&(s[e.feature]={removed:i,added:r.map((e=>e.toLowerCase()))})}else e.serializer&&e.feature&&(s[e.feature]={added:e.serializer(a)})}else e.feature&&(s[e.feature]=e.serializer?e.serializer(a):a);if(e.constraintsFromOtherFields&&e.constraintsFromOtherFields.requiredFor?.forEach((e=>e.reset?.(s))),Object.keys(s).length)try{await t(s)}catch(t){i(t,e.getErrorMessageForKey?.(t.message))}}),[n,t,e,i]);return(0,E.tZ)(ES.X,{multiLine:s,defaultValue:o,ariaLabelledBy:e.feature,saveBtnLabel:a("team_settings_button_save_label"),savingBtnLabel:a(fS),editBtnLabel:a("team_settings_button_edit_label"),placeholder:e.hintText,inputStyle:e.inputStyle,hintStyle:e.hintStyle,successMessage:a(vS),onSave:l,textFieldClassName:tS.textFieldInputColumn,isDisabled:e.isReadOnly},e.label)};var kS,DS;const TS=({label:e,value:t,isReadOnly:n,options:a,saveValueFunction:i,successMessage:s,savingMessage:o})=>{const[c,d]=(0,r.useState)(""),[_,u]=(0,r.useState)(!1),[m,p]=(0,r.useState)(!1),g=_?o:c||"";return(0,E.BX)("div",{sx:{position:"relative",display:"flex",gap:"8px"},children:[(0,E.tZ)("div",{sx:{width:"100%"},children:(0,E.tZ)(Ko.m,{label:e,value:""===t?"disabled":t,disabled:null!=n?n:_,readOnly:n,onChange:e=>{u(!0),i(e).then((()=>{u(!1),p(!0),d(""),setTimeout((()=>{p(!1)}),1e3)})).catch((e=>{u(!1),p(!1);const t=(0,Wi.im)(e);d(t)}))},labelPersists:!1,feedback:{text:m?s:g},error:!!c,children:a.map((e=>(0,E.tZ)(Yo.$,{value:e.value,disabled:!!e.disabled,children:e.label},e.label)))})}),_||m?(0,E.tZ)("div",{sx:{display:"flex",height:"48px",alignItems:"center"},children:_?kS||(kS=(0,E.tZ)(l.Z,{mood:"positive",size:24})):DS||(DS=(0,E.tZ)(T.JO,{name:"FeedbackSuccessOutlined",color:"ds.text.positive.quiet",size:"large"}))}):null]})},IS=({field:e,checkForAuthenticationError:t,editSettings:n})=>{const{translate:a}=(0,b.Z)(),{reportTACError:i}=se(),s=(0,r.useCallback)((async a=>{if(!n||t?.()||!e.feature)return;const r={},s=e.serializer?e.serializer(a):a,o="disabled"===a?"":"unset"===a?null:s;r[e.feature]=o;try{await n(r)}catch(t){const n=t.data?.content||{},a=e.getErrorMessageForKey?.(n.error);i(t,a)}}),[t,n,e,i]);return(0,E.tZ)(TS,{label:e.label,value:e.value,saveValueFunction:s,successMessage:a(vS),savingMessage:a(fS),options:e.options,isReadOnly:e.isReadOnly},e.label)},AS=({field:e,editSettings:t,checkForAuthenticationError:n,policies:a})=>{var i;const{translate:s}=(0,b.Z)(),{reportTACError:o}=se(),[l,c]=(0,r.useState)(!1),[d,u]=(0,r.useState)(""),[m,p]=(0,r.useState)(!1),g=null!=(i=e.value)&&i?e.confirmDisable:e.confirmEnable,h=e.value?e.confirmDisable:e.confirmEnable,y=(0,r.useCallback)((async()=>{if(!t||n?.())return;const a={};if(e.feature){const t=void 0!==e.value&&!e.value;a[e.feature]=e.serializer?e.serializer(t):t,t||e.constraintsFromOtherFields?.requiredFor?.forEach((e=>e.reset?.(a)))}try{await t(a)}catch(t){const n=t.data?.content||429===t.code&&{error:"too_many_requests"}||"not_authorized"===t.message&&{error:"not_authorized"}||{},a=e.getErrorMessageForKey?.(n.error);o(t,a)}}),[n,t,e,o]),S=(0,r.useCallback)((()=>{c(!1),u(""),p(!1)}),[]),x=(0,r.useCallback)((()=>(c(!0),u(""),p(!1),Promise.resolve())),[]),f=(0,r.useCallback)((async()=>{const e=await(0,Re.RR)({masterPassword:null!=d?d:""});return p(!e),e?(S(),y()):Promise.resolve()}),[y,S,d]),v=(0,r.useCallback)((e=>{u(e.target.value),p(!1)}),[]),C=(0,r.useCallback)((e=>{"Enter"===e.key&&d&&f()}),[f,d]),Z=(0,r.useCallback)((async()=>{e.customSwitchHandler?await e.customSwitchHandler():g?await x():await y()}),[g,e,y,x]);return(0,E.BX)(r.Fragment,{children:[(0,E.tZ)(iS.Z,{isLoading:e.isLoading,genericErrorMessage:s("_common_generic_error"),ariaLabelledBy:e.feature,value:e.value,isReadOnly:e.isReadOnly,isDisabled:e.constraintsFromOtherFields?.disabledWhen?.some((e=>a&&e?.condition?.(a))),disabledFeedbackMessage:e.constraintsFromOtherFields?.disabledWhen?.find((e=>a&&e?.condition?.(a)&&e?.warningMessage))?.warningMessage,saveValueFunction:Z,successMessage:s("team_settings_save_success_label"),savingMessage:s("team_settings_saving_label")},e.label),l&&h?(0,E.BX)(uS.Z,{isOpen:!0,title:h.title,labelDismiss:h.dismiss,labelConfirm:h.confirm,onDismiss:S,onConfirm:f,onChange:v,isMasterPasswordInvalid:m,ctaIsDisabled:!d,onKeyDown:C,children:[(0,E.tZ)(_.n,{color:"ds.text.neutral.quiet",children:h.helper1}),(0,E.tZ)(_.n,{color:"ds.text.neutral.quiet",children:h.helper2}),(0,E.tZ)(_.n,{color:"ds.text.neutral.quiet",children:h.label})]}):null]})},wS=e=>{const{field:t,...n}=e;switch(t.type){case"text":return(0,E.tZ)(ZS,{field:t,...n});case"select":return(0,E.tZ)(IS,{field:t,...n});case"switch":return(0,E.tZ)(AS,{...e});case"cta":return(0,E.tZ)(xS,{onClick:t.ctaAction,content:t.ctaLabel});default:return null}},OS=e=>{var t;const{field:n}=e;return(0,E.tZ)("div",{sx:{width:"100%"},children:(0,E.BX)("div",{sx:{display:"flex",gap:"40px",justifyContent:"space-between"},children:[(0,E.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"8px"},children:[(0,E.tZ)(d.X,{as:"h3",textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",sx:"select"===n.type||"text"===n.type?CS.SETTINGS_LABEL_MARGIN_TOP:{},id:n.feature,children:n.label.split("//").map(((e,t)=>t%2?(0,E.tZ)("span",{sx:{color:"ds.text.oddity.disabled",fontWeight:"300"},children:e},e):e))}),n.badgeLabel?(0,E.tZ)(pe.C,{label:n.badgeLabel,mood:"brand",iconName:n.badgeIconName,layout:"iconLeading"}):null,n.helperLabel?(0,E.tZ)(_.n,{id:"helper-label-panel",textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",children:n.helperLabel}):null,n.infoBox?(0,E.tZ)(rn.k,{size:"large",title:n.infoBox.title,description:n.infoBox.description,mood:null!=(t=n.infoBox.mood)?t:"neutral"}):null,("text"===n.type||"select"===n.type||"cta"===n.type)&&(0,E.tZ)("div",{children:(0,E.tZ)(wS,{...e})})]}),"switch"===n.type&&(0,E.tZ)("div",{children:(0,E.tZ)(wS,{...e})})]})},n.feature)},NS="_common_generic_error",RS=({teamName:e,isTeamDiscontinuedAfterTrial:t})=>{const{translate:n}=(0,b.Z)(),a=Cu(),i=!0===(0,Pe.o)(v_.G.WebOnboardingInviteLinkTacMigration),{inviteLinkDataForAdmin:s,getInviteLinkDataForAdmin:o,inviteLinkDataLoading:l,createInviteLink:c,toggleInviteLink:d}=yu();(0,r.useEffect)((()=>{i||o()}),[o,i]);const u=i?a.status===G.rq.Success?a:null:s,m=i?a.status===G.rq.Success?a.enabled:null:!s?.disabled,p=(0,me.cI)(u?.teamKey),g={type:"switch",isLoading:i?a.status===G.rq.Loading:l,label:n("team_settings_enable_invite_link_label"),isReadOnly:t,feature:"inviteLink",value:!0===m,customSwitchHandler:i?async()=>{a.status===G.rq.Success&&await a.sendToggleInviteLink(!m).catch((()=>{throw Error(n(NS))}))}:async()=>{const t=u?.teamKey;if(t){if(!await d(null==m||m))throw Error(n(NS))}else if(!await c(e))throw Error(n(NS));if(!await o())throw Error(n(NS))},helperLabel:(0,E.BX)(r.Fragment,{children:[n("team_settings_disable_enable_invite_link_helper"),!0===m?(0,E.BX)("span",{sx:{marginTop:"12px",display:"flex",flexDirection:"row",flexWrap:"nowrap",alignItems:"center",gap:"8px"},children:[(0,E.tZ)(xu.q,{mood:"neutral",intensity:"supershy",iconProps:{color:"ds.text.neutral.standard"},copyValue:p,"data-testid":"invite-link-copy-button"}),(0,E.tZ)(_.n,{as:"span",textStyle:"ds.body.reduced.link",children:p})]}):null]})};return(0,E.tZ)(OS,{field:g})},LS=()=>{const{translate:e}=(0,b.Z)(),t=xr(),n=(0,dy.U)(),a={type:"header",label:e("team_settings_header_user_access")};return t&&null!==n?(0,E.BX)(bS,{children:[(0,E.tZ)(SS,{header:a}),(0,E.tZ)(RS,{teamName:t,isTeamDiscontinuedAfterTrial:n})]}):null},BS=({settingRow:e,editSettings:t,checkForAuthenticationError:n})=>{const{reportTACError:a}=se();return(0,E.tZ)(rn.k,{sx:{margin:"16px 0"},title:e.label,description:e.description,icon:e.icon,size:"large",mood:e.mood,actions:[e.actions?.secondary?(0,E.tZ)(D.z,{mood:e.mood,intensity:"quiet",icon:"ActionOpenExternalLinkOutlined",layout:"iconLeading",onClick:e.actions?.secondary.onClick,children:e.actions?.secondary.label},e.actions?.secondary.label):null,e.actions?.primary?(0,E.tZ)(D.z,{mood:e.mood,intensity:"catchy",onClick:async()=>{if(t&&e.featuresToDisable&&!n?.())try{await t(e.featuresToDisable)}catch(e){a(e)}},children:e.actions?.primary.label},e.actions?.primary.label):null]})},MS=({textWithButton:e})=>(0,E.BX)("div",{sx:{display:"flex",alignItems:"flex-start",flexDirection:"row",marginBottom:"32px",marginTop:"7px"},children:[(0,E.BX)("div",{children:[(0,E.tZ)(d.X,{as:"h3",textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",sx:CS.SETTINGS_LABEL_MARGIN_TOP,children:e.label.split("//").map(((e,t)=>t%2?(0,E.tZ)("span",{sx:{color:"ds.text.oddity.disabled",fontWeight:"300"},children:e},e):e))}),e.helperLabel?(0,E.tZ)("div",{id:"helper-label-panel",sx:CS.HELPER_LABEL_PANEL,children:e.helperLabel}):null]}),(0,E.tZ)("div",{children:(0,E.tZ)(sS.Z,{label:e.buttonLabel,onClick:e?.onClick})})]},e.label),PS=({settingRow:e,...t})=>{switch(e.type){case"header":return(0,E.tZ)(SS,{header:e});case"textwithbutton":return(0,E.tZ)(MS,{textWithButton:e});case"quickDisable":return(0,E.tZ)(BS,{settingRow:e});default:return(0,E.tZ)(OS,{field:e,...t})}},US=e=>{const{translate:t}=(0,b.Z)(),{isDiscontinuedAfterTrialAndSmartManagementIsDisabled:n,policies:a}=e;if(!a)return null;const i={type:"text",multiLine:!0,isReadOnly:n,label:t("team_settings_team_domain"),helperLabel:t("team_settings_team_domain_helper"),hintText:t("team_settings_team_domain_placeholder"),feature:"teamDomain",value:a.teamDomain,serializer:e=>e?e.split(";").map((e=>e.trim().toLowerCase())).filter((e=>Boolean(e.length))):[],deserializer:e=>e?.length?e.join(";"):"",validator:e=>e.some((e=>!(0,Wi.hS)(e)))?"wrong_url":e.some((e=>e.length>255))?"wrong_size":null,getErrorMessageForKey:e=>{switch(e){case"wrong_size":return t("team_settings_team_domain_save_error_msg_wrong_size",{lengthLimit:255});case"wrong_url":return t("team_settings_team_domain_save_error_msg_wrong_url");case"too_many_requests":return t("team_settings_too_many_requests");default:return t("team_settings_team_domain_save_error_msg_generic_error")}},constraintsFromOtherFields:{requiredFor:[{feature:"enableForcedDomains",reset:e=>{a.teamDomain.length||(e.enableForcedDomains=!1)}},{feature:"enableRemoveForcedContent",reset:e=>{a.teamDomain.length||(e.enableRemoveForcedContent=!1)}}]}};return(0,E.tZ)(PS,{settingRow:i,...e})},XS=()=>{const{translate:e}=(0,b.Z)(),t={type:"quickDisable",label:e("team_settings_space_management_click_to_disable_infobox_title"),description:e("team_settings_space_management_click_to_disable_infobox_subtitle"),mood:"brand",featuresToDisable:{enableForcedDomains:!1,enableRemoveForcedContent:!1},actions:{primary:{label:e("team_settings_space_management_infobox_disable_button")},secondary:{label:e("team_settings_space_management_infobox_learn_more_button"),onClick:()=>(0,W.Yo)(me.Rf)}}};return(0,E.tZ)(PS,{settingRow:t})},zS=()=>{const{translate:e}=(0,b.Z)(),t={type:"quickDisable",label:e("team_settings_space_management_disabled_infobox_title"),description:e("team_settings_space_management_disabled_infobox_subtitle"),icon:"FeedbackSuccessOutlined",mood:"positive",actions:{secondary:{label:e("team_settings_space_management_infobox_learn_more_button"),onClick:()=>(0,W.Yo)(me.Rf)}}};return(0,E.tZ)(PS,{settingRow:t})},FS=e=>{const{translate:t}=(0,b.Z)(),{isDiscontinuedAfterTrialAndSmartManagementIsDisabled:n,policies:a}=e;if(!a)return null;const i={type:"switch",isReadOnly:n,label:t("team_settings_enable_space_restrictions"),helperLabel:t("team_settings_enable_space_restrictions_helper"),value:a.enableForcedDomains,feature:"enableForcedDomains",getErrorMessageForKey:e=>t("too_many_requests"===e?"team_settings_too_many_requests":"team_settings_enable_space_restrictions_save_error_msg_generic_error"),constraintsFromOtherFields:{disabledWhen:[{feature:"teamDomain",condition:e=>!e.teamDomain?.length,warningMessage:t("team_settings_enable_space_restrictions_define_team_domain_first")}],requiredFor:[{feature:"enableRemoveForcedContent",reset:e=>e.enableRemoveForcedContent=!1}]}};return(0,E.tZ)(PS,{settingRow:i,...e})},qS=e=>{const{translate:t}=(0,b.Z)(),{isDiscontinuedAfterTrialAndSmartManagementIsDisabled:n,policies:a}=e;if(!a)return null;const i={type:"switch",label:t("team_settings_remove_forced_content"),isReadOnly:n,helperLabel:t("team_settings_remove_forced_content_helper"),value:a.enableRemoveForcedContent,feature:"enableRemoveForcedContent",getErrorMessageForKey:e=>t("too_many_requests"===e?"team_settings_too_many_requests":"team_settings_enable_space_restrictions_save_error_msg_generic_error"),constraintsFromOtherFields:{disabledWhen:[{feature:"teamDomain",condition:e=>!e.teamDomain?.length,warningMessage:t("team_settings_remove_forced_content_define_team_domain_first")},{feature:"enableForcedDomains",condition:e=>!e.enableForcedDomains,warningMessage:t("team_settings_remove_forced_content_enable_forced_domains_first")}]}};return(0,E.tZ)(PS,{settingRow:i,...e})};var GS,VS;const jS=e=>{const{translate:t}=(0,b.Z)(),{showQuickDisableOfSmartSpaceManagement:n,policies:a}=e,i={type:"header",label:t("team_settings_header_team_space_options")},r=n&&!a?.enableForcedDomains&&!a?.enableRemoveForcedContent,s=n&&(a?.enableForcedDomains||a?.enableRemoveForcedContent);return(0,E.BX)(bS,{children:[(0,E.tZ)(SS,{header:i}),s&&(GS||(GS=(0,E.tZ)(XS,{}))),r&&(VS||(VS=(0,E.tZ)(zS,{}))),(0,E.tZ)(US,{isDiscontinuedAfterTrialAndSmartManagementIsDisabled:r,...e}),(0,E.tZ)(FS,{isDiscontinuedAfterTrialAndSmartManagementIsDisabled:r,...e}),(0,E.tZ)(qS,{isDiscontinuedAfterTrialAndSmartManagementIsDisabled:r,...e})]})},WS=e=>{const{translate:t}=(0,b.Z)(),{isTeamDiscontinuedAfterTrial:n,policies:a}=e;if(!a)return null;const i={type:"select",label:t("team_settings_force_crypto_payload_label"),isReadOnly:n,helperLabel:t("team_settings_force_crypto_payload_helper"),value:a.cryptoForcedPayload,feature:"cryptoForcedPayload",options:[{label:t("team_settings_force_crypto_payload_option_disabled"),value:"disabled"},{label:t("team_settings_force_crypto_payload_option_argon2"),value:"$1$argon2d$16$3$32768$2$aes256$cbchmac$16$"},{label:t("team_settings_force_crypto_payload_option_pbkdf2_advanced"),value:"$1$pbkdf2$16$200000$sha256$aes256$cbchmac$16$"},{label:t("team_settings_force_crypto_payload_option_pbkdf2_standard"),value:"KWC3",disabled:!0}],getErrorMessageForKey:e=>t("too_many_requests"===e?"team_settings_too_many_requests":"team_settings_force_crypto_payload_save_error_msg_generic_error")};return(0,E.tZ)(PS,{settingRow:i,...e})},HS=e=>{const{translate:t}=(0,b.Z)(),{isTeamDiscontinuedAfterTrial:n,policies:a}=e;if(!a)return null;const i={type:"switch",isReadOnly:n,label:t("team_settings_enforce_2fa"),helperLabel:t("team_settings_enforce_2fa_helper"),infoBox:{title:t("team_settings_generate_recovery_codes_infobox_title"),description:t.markup("team_settings_generate_recovery_codes_infobox_description_markup")},value:a.enforce2FA,feature:"enforce2FA",confirmEnable:{title:t("team_settings_enforce_2fa_confirm_enable_title"),label:t("team_settings_enforce_2fa_confirm_enable_helper2"),dismiss:t("team_settings_enforce_2fa_confirm_enable_dismiss"),confirm:t("team_settings_enforce_2fa_confirm_enable_confirm")},getErrorMessageForKey:e=>t("too_many_requests"===e?"team_settings_too_many_requests":"team_settings_enforce_2fa_save_error_msg_generic_error")};return(0,E.tZ)(PS,{settingRow:i,...e})},$S=e=>{const{translate:t}=(0,b.Z)(),{isPersonalSpaceEnabledViaTeamSetting:n,isTeamDiscontinuedAfterTrial:a,policies:i}=e;if(!i||n)return null;const r={type:"switch",label:t("team_settings_allow_export"),helperLabel:t("team_settings_allow_export_helper"),infoBox:a?{title:t("team_settings_allow_export_infobox_title"),description:t("team_settings_allow_export_infobox_subtitle"),mood:"brand"}:void 0,value:i.vaultExportEnabled,feature:"vaultExportEnabled",getErrorMessageForKey:e=>t("too_many_requests"===e?"team_settings_too_many_requests":"_common_generic_error")};return(0,E.tZ)(PS,{settingRow:r,...e})},KS=e=>{const{translate:t}=(0,b.Z)(),n=D_(),{hasExcludedPolicy:a,hasTrialBusinessPaywall:i,isTeamDiscontinuedAfterTrial:r,policies:s}=e,o=a("forceAutomaticLogout");if(!s)return null;const l={type:"select",isReadOnly:r||o||n,label:t("team_settings_force_auto_logout_after"),helperLabel:t("team_settings_force_auto_logout_after_helper"),badgeIconName:o||i||n?"PremiumOutlined":void 0,badgeLabel:o||i||n?t("team_settings_available_in_business_plan"):void 0,value:s.forceAutomaticLogout,feature:"forceAutomaticLogout",options:["unset","15","30","60"].map((e=>({label:t("team_settings_force_auto_logout_after_"+e),value:e}))),getErrorMessageForKey:e=>t("too_many_requests"===e?"team_settings_too_many_requests":"team_settings_force_auto_logout_after_save_error_msg_generic_error")};return(0,E.tZ)(PS,{settingRow:l,...e})},YS=e=>{const{translate:t}=(0,b.Z)(),{hasExcludedPolicy:n,hasTrialBusinessPaywall:a,isTeamDiscontinuedAfterTrial:i,policies:r}=e,s=n("lockOnExit");if(!r)return null;const o={type:"switch",isReadOnly:i||s,label:t("team_settings_lock_on_exit"),helperLabel:t("team_settings_lock_on_exit_helper"),value:r.lockOnExit,feature:"lockOnExit",badgeIconName:s||a?"PremiumOutlined":void 0,badgeLabel:s||a?t("team_settings_available_in_business_plan"):void 0,getErrorMessageForKey:e=>t("too_many_requests"===e?"team_settings_too_many_requests":"team_settings_lock_on_exit_save_error_msg_generic_error")};return(0,E.tZ)(PS,{settingRow:o,...e})},QS=e=>{const{translate:t}=(0,b.Z)(),n=D_(),{hasExcludedPolicy:a,hasTrialBusinessPaywall:i,isPersonalSpaceEnabledViaTeamSetting:r,isTeamDiscontinuedAfterTrial:s,policies:o}=e,l=a("collectSensitiveDataAuditLogsEnabled");if(!o)return null;const c={type:"switch",isReadOnly:s||l||n,label:t("team_settings_collect_sensitive_data_audit_logs_enabled"),helperLabel:t(r?"team_settings_collect_sensitive_data_audit_logs_enabled_helper":"team_settings_collect_sensitive_data_audit_logs_enabled_helper_without_space"),badgeIconName:l||i||n?"PremiumOutlined":void 0,badgeLabel:l||i||n?t("team_settings_available_in_business_plan"):void 0,value:o.collectSensitiveDataAuditLogsEnabled,feature:"collectSensitiveDataAuditLogsEnabled",getErrorMessageForKey:e=>t("too_many_requests"===e?"team_settings_too_many_requests":"team_settings_lock_on_exit_save_error_msg_generic_error")};return(0,E.tZ)(PS,{settingRow:c,...e})},JS=e=>{const{translate:t}=(0,b.Z)(),n=D_(),a=(0,i.k6)(),{hasExcludedPolicy:r,hasTrialBusinessPaywall:s,policies:o,routes:l,showPaywallInfo:c}=e,d=r("secureWifiEnabled"),{shouldShowBuyOrUpgradePaywall:_,isTrialOrGracePeriod:m,planType:p}=c,g=!d&&_&&m,h=!d&&_&&"starter"===p;let S,x,f;if(g?(S=t("team_settings_available_in_paid_subscription_badge"),x=()=>{(0,y.Kz)(new u.UserClickEvent({button:u.Button.BuyDashlane,clickOrigin:u.ClickOrigin.VpnFeatureActivationSetting})),a.push(l.teamAccountCheckoutRoutePath)},f=t("team_settings_buy_dashlane_cta")):h?(S=t("team_settings_upgrade_badge"),x=()=>{(0,y.Kz)(new u.UserClickEvent({button:u.Button.SeePlan,clickOrigin:u.ClickOrigin.VpnFeatureActivationSetting})),(0,i.uX)(`${l.teamAccountChangePlanRoutePath}`)},f=t("team_settings_see_plans_cta")):(d||s||n)&&(S=t("team_settings_available_in_business_plan")),!o)return null;const v={type:h||g?"cta":"switch",badgeIconName:h||g||d||s||n?"PremiumOutlined":void 0,badgeLabel:S,ctaAction:x,ctaLabel:f,isReadOnly:d||n,label:t("team_settings_vpn"),helperLabel:t("team_settings_vpn_helper"),value:o.enableVPN,feature:"enableVPN",getErrorMessageForKey:e=>{switch(e){case"too_many_requests":return t("team_settings_too_many_requests");case"not_authorized":return t("team_settings_vpn_disabled_for_free_trial");default:return t("team_settings_vpn_save_error_msg_generic_error")}}};return(0,E.tZ)(PS,{settingRow:v,...e})},ex=e=>{const{translate:t}=(0,b.Z)(),{policies:n}=e;if(!n)return null;const a={type:"switch",label:t("team_settings_rich_icons"),helperLabel:t("team_settings_rich_icons_helper"),value:n.richIconsEnabled,feature:"richIconsEnabled",getErrorMessageForKey:e=>t("too_many_requests"===e?"team_settings_too_many_requests":"team_settings_server_error")};return(0,E.tZ)(PS,{settingRow:a,...e})};var tx=n(32198);const nx=e=>{const{translate:t}=(0,b.Z)(),{data:n,status:a}=(0,m.k)(tx.K,"getTeamIdentifiers"),{data:i,status:r}=(0,m.k)(wy.y,"ssoProvisioning"),s=(0,Pe.o)(Dy.c.ItemVisibilityPhase1),{policies:o}=e;if(a!==G.rq.Success||r!==G.rq.Success)return null;const l=i.ssoSolution===Oy.WO.enum.selfHostedSaml&&i.ssoStatus===Oy.pI.enum.enabled;if(!o||!s||!n?.adminProvisioningKey||l)return null;const c={type:"switch",label:t("team_settings_uvvs_label"),helperLabel:t("team_settings_uvvs_helper"),value:o.itemVisibilityEnabled,feature:"itemVisibilityEnabled",getErrorMessageForKey:e=>t("too_many_requests"===e?"team_settings_too_many_requests":"team_settings_server_error")};return(0,E.tZ)(PS,{settingRow:c,...e})},ax=e=>{const{translate:t}=(0,b.Z)(),n={type:"header",label:t("team_settings_header_security")};return(0,E.BX)(bS,{children:[(0,E.tZ)(SS,{header:n}),(0,E.tZ)(WS,{...e}),(0,E.tZ)(HS,{...e}),(0,E.tZ)($S,{...e}),(0,E.tZ)(KS,{...e}),(0,E.tZ)(YS,{...e}),(0,E.tZ)(QS,{...e}),(0,E.tZ)(JS,{...e}),(0,E.tZ)(ex,{...e}),(0,E.tZ)(nx,{...e})]})},ix=()=>{const{editTeamPolicies:e}=(0,te.u)(p.o);return e},rx=({className:e})=>{const{translate:t}=(0,b.Z)(),n=(0,Pe.o)("monetization_extension_policies_revert_notice"),a=(0,te.u)(Fr.t),i=(0,m.k)(Fr.t,"hasSeenStarterRepackagePolicyInfobox");return!n||i.status!==G.rq.Success||i.data?null:(0,E.tZ)(rn.k,{title:t("team_settings_starter_repackage_policy_change_title"),description:t("team_settings_starter_repackage_policy_change_description"),size:"large",actions:[(0,E.tZ)(D.z,{onClick:()=>{a.markStarterRepackagePolicyInfoboxSeen()},children:t("team_settings_starter_repackage_policy_change_cta")},"dismiss")],sx:{whiteSpace:"break-spaces"},className:e})},sx=({className:e})=>{const{translate:t}=(0,b.Z)(),n=(0,Oe.U)(),a=`${me.ub}?plan=business&subCode=${null!=n?n:""}`;return(0,E.tZ)(rn.k,{className:e,title:t("team_settings_in_trial_paywall_repackage_policies_title"),size:"large",actions:[(0,E.tZ)(D.z,{onClick:()=>{(0,y.Kz)(new u.UserClickEvent({button:u.Button.UpgradeBusinessTier,clickOrigin:u.ClickOrigin.BannerTacSettingsPoliciesPaywall}))},as:"a",href:a,rel:"noreferrer",target:"_blank",children:t("team_settings_in_trial_paywall_repackage_policies_cta")},"cta")]})},ox={CONTAINER:{display:"flex",flexDirection:"column",gap:"24px",padding:"24px",backgroundColor:"ds.container.agnostic.neutral.supershy",border:"1px solid ds.border.neutral.quiet.idle",borderRadius:"8px"},HEADER:{display:"flex",flexDirection:"column",gap:"8px"},FEATURES_LIST:{display:"grid",gap:"16px",gridTemplateColumns:"1fr"}},lx=()=>{const{translate:e}=(0,b.Z)(),{routes:t}=(0,i.Xo)(),n=`${t.teamAccountChangePlanRoutePath}?plan=business`;return(0,E.BX)("div",{sx:ox.CONTAINER,children:[(0,E.BX)("div",{sx:ox.HEADER,children:[(0,E.tZ)(d.X,{as:"h5",textStyle:"ds.title.section.medium",color:"ds.text.neutral.catchy",children:e("team_settings_starter_repackage_upgrade_tile_title")}),(0,E.tZ)(_.n,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.quiet",children:e("team_settings_starter_repackage_upgrade_tile_subtitle")})]}),(0,E.BX)("div",{sx:ox.FEATURES_LIST,children:[(0,E.tZ)(dc,{iconName:"SettingsOutlined",children:e("team_settings_starter_repackage_upgrade_tile_feature_advanced_policies")}),(0,E.tZ)(dc,{iconName:"GroupOutlined",children:e("team_settings_starter_repackage_upgrade_tile_feature_unlimited_seats")}),(0,E.tZ)(dc,{iconName:"ToolsOutlined",children:e("team_settings_starter_repackage_upgrade_tile_feature_sso")}),(0,E.tZ)(dc,{iconName:"SharedOutlined",children:e("team_settings_starter_repackage_upgrade_tile_feature_scim")})]}),(0,E.tZ)(D.z,{fullsize:!0,mood:"brand",intensity:"catchy",layout:"iconLeading",icon:"PremiumOutlined",onClick:()=>{(0,y.Kz)(new u.UserClickEvent({button:u.Button.UpgradeBusinessTier,clickOrigin:u.ClickOrigin.FeatureLimitationsBlock}))},as:i.rU,to:n,children:e("team_settings_starter_repackage_upgrade_tile_cta")})]})};var cx,dx,_x;const ux={CONTAINER:{display:"flex",flexDirection:"column",gap:"24px",marginBottom:"24px"}},mx=()=>{const{hasStarterPaywall:e,hasTrialBusinessPaywall:t}=Fe();return D_()?(0,E.tZ)("div",{sx:ux.CONTAINER,children:cx||(cx=(0,E.tZ)(_c,{}))}):e?(0,E.BX)("div",{sx:ux.CONTAINER,children:[dx||(dx=(0,E.tZ)(rx,{})),_x||(_x=(0,E.tZ)(lx,{}))]}):t?(0,E.tZ)(sx,{sx:{alignContent:"start",height:"100%"}}):null},px=e=>{const{translate:t}=(0,b.Z)(),n=D_(),{hasTrialBusinessPaywall:a,hasExcludedPolicy:i,isTeamDiscontinuedAfterTrial:r,policies:s}=e,o=i("sharingDisabled");if(!s)return null;const l={type:"switch",isReadOnly:r||o||n,label:t("team_settings_allow_sharing"),helperLabel:t("team_settings_allow_sharing_helper"),value:s.allowSharing,feature:"allowSharing",badgeIconName:o||a||n?"PremiumOutlined":void 0,badgeLabel:o||a||n?t("team_settings_available_in_business_plan"):void 0,getErrorMessageForKey:e=>t("too_many_requests"===e?"team_settings_too_many_requests":"team_settings_allow_sharing_save_error_msg_generic_error"),constraintsFromOtherFields:{requiredFor:[{feature:"restrictSharingToTeam",reset:e=>e.restrictSharingToTeam=!1}]}};return(0,E.tZ)(PS,{settingRow:l,...e})},gx=e=>{const{translate:t}=(0,b.Z)(),{isTeamDiscontinuedAfterTrial:n,policies:a,restrictSharingPaywallDetails:i}=e;if(!a)return null;const{shouldShowUpgradePaywall:r}=i,s={type:"switch",badgeIconName:r?"PremiumOutlined":void 0,badgeLabel:r?t("team_settings_available_in_business_plan"):void 0,isReadOnly:n||r,label:t("team_settings_restrict_sharing_to_team_title"),helperLabel:t("team_settings_restrict_sharing_to_team_description"),value:a.restrictSharingToTeam,feature:"restrictSharingToTeam",getErrorMessageForKey:e=>t("too_many_requests"===e?"team_settings_too_many_requests":"team_settings_restrict_sharing_to_team_generic_error"),constraintsFromOtherFields:{disabledWhen:[{feature:"allowSharing",condition:e=>!e.allowSharing,warningMessage:t("team_settings_restrict_sharing_to_team_enable_sharing_first")}]}};return(0,E.tZ)(PS,{settingRow:s,...e})},hx=e=>{const{translate:t}=(0,b.Z)(),n={type:"header",label:t("team_setting_header_sharing")};return(0,E.BX)(bS,{children:[(0,E.tZ)(SS,{header:n}),(0,E.tZ)(px,{...e}),(0,E.tZ)(gx,{...e})]})};var yx=n(13134);const bx=e=>{const[t,n]=(0,r.useState)(),[a,i]=(0,r.useState)(!1),[s,o]=(0,r.useState)(null),{translate:l}=(0,b.Z)(),u=D_(),{reportTACError:m}=se(),{editSettings:p,checkForAuthenticationError:g,hasTrialBusinessPaywall:h,hasExcludedPolicy:y,isTeamDiscontinuedAfterTrial:S,policies:x}=e,f=y("autologinDomainDisabledArray"),v=e=>e?.length?e.join(";"):"";if((0,r.useEffect)((()=>{x?.disableAutoLoginDomains&&n(v(x.disableAutoLoginDomains))}),[x?.disableAutoLoginDomains]),!x)return null;const C=x.disableAutoLoginDomains,Z=S||f||u,k=f||h||u,T=e=>{switch(e){case"wrong_size":return l("team_settings_disable_auto_login_domains_save_error_msg_wrong_size",{lengthLimit:255});case"wrong_url":return l("team_settings_disable_auto_login_domains_save_error_msg_wrong_url");case"too_many_requests":return l("team_settings_too_many_requests");default:return l("team_settings_disable_auto_login_domains_save_error_msg_generic_error")}},I=()=>{s&&o(null),a&&i(!1)};return(0,E.BX)(c.k,{id:"disableAutoLoginDomains",flexDirection:"column",gap:"8px",children:[(0,E.tZ)(d.X,{as:"h3",textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",id:"disableAutoLoginDomains",children:l("team_settings_disable_auto_login_domains")}),k?(0,E.tZ)(pe.C,{label:l("team_settings_available_in_business_plan"),mood:"brand",iconName:"PremiumOutlined",layout:"iconLeading"}):null,(0,E.tZ)(_.n,{id:"helper-label-panel",textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",children:l("team_settings_disable_auto_login_domains_helper")}),(0,E.BX)("form",{onSubmit:async e=>{if(e.preventDefault(),e.stopPropagation(),I(),!p)return;const n=((a=null!=t?t:"").length?a.split(";"):[]).filter((e=>!!e.length)).map((e=>e.trim()));var a;const r=(s=n).some((e=>!new yx.Y(e).isUrlValid()))?"wrong_url":s.some((e=>e.length>255))?"wrong_size":null;var s;if(r)return o(T(r)),void i(!0);if(g?.())return;if(v(C)===t)return;const c={};if(C.length){const e=C.filter((e=>!n.some((t=>t===e)))),t=n.filter((e=>!C.some((t=>t===e))));c.disableAutoLoginDomains={removed:e,added:t.map((e=>e.toLowerCase()))}}else c.disableAutoLoginDomains={added:n.map((e=>e.toLowerCase()))};try{await p(c),o(l("team_settings_save_success_label"))}catch(e){m(e,T(e.message))}},sx:{display:"flex",alignItems:"flex-start",gap:"16px"},children:[(0,E.tZ)(Dl.K,{value:v(C),onChange:({target:{value:e}})=>{I(),n(e)},readOnly:Z,error:a,feedback:null!=s?s:void 0,sx:{width:"100%"},"data-testid":"disableAutoLoginTextarea"}),(0,E.tZ)(D.z,{mood:"neutral",intensity:"quiet",layout:"labelOnly",disabled:Z,type:"submit",children:l("team_settings_button_save_label")})]})]})},Sx=e=>{const{translate:t}=(0,b.Z)(),n={type:"header",label:t("team_settings_header_browser_settings")};return(0,E.BX)(bS,{children:[(0,E.tZ)(SS,{header:n}),(0,E.tZ)(bx,{...e})]})};var xx,fx,vx;const Cx=({lee:e})=>{const{routes:t}=(0,i.Xo)(),{translate:n}=(0,b.Z)(),a=Ne(e.permission.adminAccess),s=function(e){const t=(0,Oe.U)(),n=(0,$.C)();return n?{shouldShowUpgradePaywall:e.hasBillingAccess&&n.spaceTier!==g.lD.Business&&n.spaceTier!==g.lD.BusinessPlus,accountSubscriptionCode:null!=t?t:""}:null}(e.permission.adminAccess),o=(0,dy.U)(),l=(()=>{const e=(0,ge.lZ)(),t=(0,Pe.o)(De.w.EcommerceWebB2BDiscontinuationDev);return e.isLoading||"boolean"!=typeof t?null:t&&!!e.isTeamSoftDiscontinued&&!!e.isTrial})(),{reportTACError:c}=se(),{data:d,status:_}=Ty(),m=ix(),{hasExcludedPolicy:p,hasTrialBusinessPaywall:h}=Fe();(0,r.useEffect)((()=>{(0,y.Nc)(u.PageView.TacSettingsPolicies)}),[]);const S=async t=>{const n=(0,cs.v0)(e.globalState);if(0===Object.keys(t).length||!n?.teamId)return Promise.resolve();await m({teamId:n.teamId,policyUpdates:t})},x=()=>!(0,cs.v0)(e.globalState)&&(c(new Error(ls.N)),!0);if(!a||!s||null===o||null===l)return xx||(xx=(0,E.tZ)(ec.a,{}));_===G.rq.Error&&c(new Error("Error loading team policies"));const f=!(null==d)&&d.enablePersonalSpace;return(0,E.tZ)(aS,{title:n("team_settings_menu_title_policies"),isLoading:_===G.rq.Loading,sideContent:fx||(fx=(0,E.tZ)(mx,{})),children:_===G.rq.Success&&d?(0,E.BX)(r.Fragment,{children:[vx||(vx=(0,E.tZ)(LS,{})),f?(0,E.tZ)(jS,{checkForAuthenticationError:x,editSettings:S,policies:d,showQuickDisableOfSmartSpaceManagement:l}):null,(0,E.tZ)(ax,{checkForAuthenticationError:x,editSettings:S,hasExcludedPolicy:p,hasTrialBusinessPaywall:h,isPersonalSpaceEnabledViaTeamSetting:f,isTeamDiscontinuedAfterTrial:o,policies:d,routes:t,showPaywallInfo:a}),(0,E.tZ)(hx,{checkForAuthenticationError:x,editSettings:S,hasExcludedPolicy:p,hasTrialBusinessPaywall:h,isTeamDiscontinuedAfterTrial:o,policies:d,restrictSharingPaywallDetails:s,routes:t}),(0,E.tZ)(Sx,{checkForAuthenticationError:x,editSettings:S,hasExcludedPolicy:p,hasTrialBusinessPaywall:h,isTeamDiscontinuedAfterTrial:o,policies:d})]}):null})};function Ex({path:e}){return(0,E.tZ)(i.GB,{path:e,permission:e=>e.adminAccess.hasFullAccess,children:(0,E.BX)(i.rs,{children:[(0,E.tZ)(i.l_,{exact:!0,from:e,to:`${e}${a.B9.POLICIES}`}),(0,E.tZ)(i.Vy,{path:`${e}${a.B9.POLICIES}`,component:Cx}),(0,E.tZ)(i.Vy,{path:`${e}${a.B9.DUO}`,component:dS,reducer:eS.ZP}),(0,E.tZ)(i.Vy,{path:`${e}${a.B9.MASTER_PASSWORD_POLICIES}`,component:yS,reducer:mS.ZP})]})})}const Zx=new Map([[g.lD.Business,u.B2bPlanTier.Business],[g.lD.Team,u.B2bPlanTier.Team],[g.lD.Legacy,u.B2bPlanTier.Legacy],[g.lD.Enterprise,u.B2bPlanTier.Business]]),kx=({currentBillingPlanTier:e,emailDomainError:t,emailDomainSubmittedCount:n,emailDomainValidatedCount:a,encryptionServicePlatformSelected:i,idpValidationResponse:r,ssoSetupStep:s,ssoSolutionChosen:o,testSsoResponse:l})=>{(0,y.Kz)(new u.UserSetupSsoEvent({currentBillingPlanTier:e,emailDomainError:null!=t?t:u.EmailDomainError.OtherError,emailDomainSubmittedCount:null!=n?n:0,emailDomainValidatedCount:null!=a?a:0,encryptionServicePlatformSelected:null!=i?i:u.EncryptionServicePlatformSelected.AmazonWebServices,idpValidationResponse:null!=r?r:u.IdpValidationResponse.Success,ssoSetupStep:s,ssoSolutionChosen:o,testSsoResponse:null!=l?l:u.TestSsoResponse.NotTested}))},Dx=e=>e&&Zx.get(e)||u.B2bPlanTier.Business,Tx=e=>{kx({...e,currentBillingPlanTier:Dx(e.currentBillingPlanTier),ssoSolutionChosen:u.SsoSolutionChosen.SelfHostedSso})},Ix=e=>{kx({...e,currentBillingPlanTier:Dx(e.currentBillingPlanTier),ssoSolutionChosen:u.SsoSolutionChosen.NitroSso})};var Ax=n(5961),wx=n.n(Ax),Ox=n(24047);const Nx=e=>{const{markdownValue:t="",linkParams:n={},linkProps:a}=e,{linkTarget:i,onLinkClicked:r=(()=>{})}=n,s=t.includes("\n");return(0,E.tZ)(wx(),{source:t,allowedTypes:["Text","Link","Emph","Strong","Paragraph","Softbreak","List","Item","Code"],containerTagName:"span",softBreak:"br",renderers:{Paragraph:s?"p":"span",Link:function(e){return(0,E.tZ)(Ox.Z,{...a,"aria-label":t,href:e.href,target:i,onClick:()=>{r(e.href)},children:e.children})}}})},Rx=({onClose:e,onConfirm:t,titleText:n,bodyText:a})=>{const{translate:i}=(0,b.Z)(),[s,o]=(0,r.useState)(!1),[l,c]=(0,r.useState)(null),d=i("_common_action_cancel");return(0,E.BX)(Ce.VqE,{isOpen:!0,disableOutsideClickClose:!0,disableScrolling:!0,closeIconName:d,onClose:e,children:[(0,E.tZ)(Ce.$N8,{title:n}),(0,E.tZ)(Ce.a7O,{children:(0,E.tZ)(Ce.nvN,{color:l?"ds.text.danger.standard":"ds.text.neutral.standard",children:null!=l?l:a})}),(0,E.BX)(Ce.cNS,{children:[(0,E.tZ)(D.z,{sx:{mr:"12px"},mood:"neutral",intensity:"quiet",onClick:()=>{e()},disabled:s,children:d}),(0,E.tZ)(D.z,{mood:"brand",intensity:"catchy",onClick:async()=>{o(!0),c(null);try{await t(),o(!1),e()}catch(e){c(e instanceof Error?e.message:i("_common_generic_error")),o(!1)}},isLoading:s,disabled:s,children:"Yes, clear setup"})]})]})};let Lx=function(e){return e.ChooseSso="ChooseSso",e.SelfHosted="SelfHosted",e.Nitro="Nitro",e}({});const Bx=({pageContext:e,onSetupClear:t})=>{const{routes:n}=(0,i.Xo)(),a=(0,jl.B)(),s=(0,Oe.U)(),{translate:o}=(0,b.Z)(),[l,c]=(0,r.useState)(!1),{status:d,data:_}=(0,m.k)(wy.y,"ssoProvisioning");if(d!==G.rq.Success||_.enableSSO.ssoEnabled)return null;const{ssoSolution:p,ssoStatus:g,global:{ssoCapable:h}}=_;if(!1===h)return(0,E.tZ)(rn.k,{mood:"neutral",size:"large",title:o("team_settings_es_sso_plan_error_header"),description:o("team_settings_es_sso_plan_missing_body"),actions:a?.premiumStatus?[(0,Ue.wt)(a.premiumStatus)?(0,E.tZ)(D.z,{onClick:()=>{(0,y.Kz)(new u.UserClickEvent({button:u.Button.BuyDashlane,clickOrigin:u.ClickOrigin.SsoPaywallBanner})),(0,W.Yo)(`${me.ub}?plan=business&subCode=${null!=s?s:""}`)},role:"link",children:o("team_account_teamplan_plan_buy_dashlane")},"buy"):(0,E.tZ)(i.rU,{to:`${n.teamAccountChangePlanRoutePath}?plan=business`,children:(0,E.tZ)(D.z,{children:o("team_settings_es_sso_plan_missing_button")})},"upgrade")]:[]});const S=g===Oy.pI.enum.incomplete;if(e!==Lx.ChooseSso&&S){let n=null,a=async()=>{await(t?.()),Tx({ssoSetupStep:u.SsoSetupStep.ClearSsoSettings})};if(e===Lx.Nitro&&p===Oy.WO.enum.selfHostedSaml&&(n={title:"To use Confidential SSO, clear self-hosted SSO setup",description:"If you want to use Confidential SSO, select **Clear setup** to erase your progress in Dashlane. Make sure to also delete your progress in your IdP.",cta:"Clear setup"},a=async()=>{await Le.C.clearSelfHostedESSettings(),await(t?.())}),n)return(0,E.BX)(r.Fragment,{children:[l?(0,E.tZ)(Rx,{onClose:()=>c(!1),onConfirm:a,titleText:"Are you sure?",bodyText:"This action canâ€™t be undone."}):null,(0,E.tZ)(rn.k,{mood:"neutral",size:"large",title:n.title,description:(0,E.tZ)(Nx,{markdownValue:n.description}),actions:[(0,E.tZ)(D.z,{onClick:()=>c(!0),children:n.cta},"clear")]})]})}return(0,E.tZ)(rn.k,{mood:"warning",size:"large",title:"Switching between SSO options isn't available right now",description:"We're in the process of adding new capabilities to Confidential SSO. During this period, you can't switch between the two options. Before turning on your chosen SSO option, please make sure it meets your organization's needs."})};var Mx;const Px=[{li:"In a separate window, log in to your IdP account."},{li:"Find the section to create a new SSO application.",ol:[{li:"Add the ID and URLs provided here to your application."},{li:"Add members who will log in to Dashlane with SSO to your application."}]}],Ux=({content:e})=>(0,E.tZ)("ol",{sx:{color:"ds.text.neutral.quiet"},children:e.map((({li:e,ol:t},n)=>(0,E.BX)(_.n,{as:"li",textStyle:"ds.body.standard.regular",children:[(0,E.tZ)(Nx,{markdownValue:e}),t?(0,E.tZ)(Ux,{content:t}):null]},n)))}),Xx=()=>{var e,t,n;const{translate:a}=(0,b.Z)(),i=(0,m.k)(wy.y,"ssoProvisioning"),r=i.status===G.rq.Loading,s={entityId:null!=(e=i.data?.idpApplication.entityId)?e:"",acsUrl:null!=(t=i.data?.idpApplication.acsUrl)?t:"",signOnUrl:null!=(n=i.data?.idpApplication.signOnUrl)?n:""};return(0,E.BX)("div",{sx:{display:"grid",gridTemplateColumns:"auto",gridAutoRows:"auto",gap:"24px",marginBottom:"32px"},children:[(0,E.BX)("div",{sx:{ol:{listStyleType:"decimal",ml:"20px",ol:{listStyleType:"lower-alpha"}}},children:[(0,E.tZ)(d.X,{as:"h2",textStyle:"ds.title.section.medium",color:"ds.text.neutral.standard",sx:{mb:"8px"},children:a("sso_confidential_idp_setup_page_title")}),Mx||(Mx=(0,E.tZ)(Ux,{content:Px}))]}),(0,E.tZ)(rn.k,{mood:"brand",size:"small",title:a("sso_confidential_idp_setup_infobox_message")}),(0,E.BX)("div",{sx:{display:"grid",gridTemplateColumns:"auto",gridAutoRows:"auto",gap:"24px"},children:[(0,E.tZ)(Qd.x,{isLoading:r,value:s.entityId,label:a("sso_confidential_idp_setup_entity_id_label"),readOnly:!0}),(0,E.tZ)(Qd.x,{isLoading:r,value:s.acsUrl,label:a("sso_confidential_idp_setup_acs_url_label"),readOnly:!0}),(0,E.tZ)(Qd.x,{isLoading:r,value:s.signOnUrl,label:a("sso_confidential_idp_setup_sign_on_url_label"),readOnly:!0})]})]})},zx="_common_toast_close_label",Fx="sso_confidential_metadata_form_field_placeholder",qx="sso_confidential_metadata_form_error_could_not_find_entrypoint",Gx="sso_confidential_metadata_form_error_cound_not_validate_certificate",Vx="sso_confidential_metadata_form_error_server_error",jx={XML_PARSE_FAILED:"sso_confidential_metadata_form_error_could_not_read_metadata",KEY_DESCRIPTOR_NOT_FOUND:qx,IDP_ENTRYPOINT_NOT_FOUND:qx,INVALID_IDP_SSO_DESCRIPTOR:qx,MISSING_CERTIFICATE:"sso_confidential_metadata_form_error_no_certificate",MULTIPLE_CERTIFICATES:"sso_confidential_metadata_form_error_multiple_certificates",INVALID_ENTRYPOINT:"sso_confidential_metadata_form_error_invalid_entrypoint",CERTIFICATE_TOO_SHORT:Gx,CERTIFICATE_TOO_LONG:Gx,CERTIFICATE_DECODE_FAILED:Gx},Wx={INVALID_METADATA_CONTENT:"sso_confidential_metadata_form_error_invalid_metadata_content",INVALID_METADATA_URL:"sso_confidential_metadata_form_error_invalid_metadata_url",DOMAIN_UPDATE_FAILED:Vx,SAVE_METADATA_FAILED:Vx,INTERNAL_ERROR:"sso_confidential_metadata_form_error_internal_error"},Hx="Unexpected server error. Please try again or contact Customer Support.",$x="ssoIdpMetadata",Kx=()=>{var e;const{showToast:t}=(0,o.p)(),[n,a]=(0,r.useState)(!1),[i,s]=(0,r.useState)(!1),{translate:l}=(0,b.Z)(),c=(0,m.k)(wy.y,"ssoProvisioning"),{testLoginUserWithEnclaveSSO:p,validateMetadata:g,updateMetadata:h}=(0,te.u)(wy.y),y=c.status===G.rq.Loading,S=!y&&c.data?.idpMetadata.idpUuid&&c.data?.idpMetadata.metadataValue,x=null!=(e=c.data?.idpMetadata.metadataValue)?e:"",f={ssoIdpMetadata:x},v=c.data?.ssoSolution,C=v===Oy.WO.enum.selfHostedSaml,Z=(0,r.useCallback)((async(e,t)=>{try{a(!0),Ix({ssoSetupStep:u.SsoSetupStep.UpdateIdpSettings});const n=await h({metadata:""===e.ssoIdpMetadata?null:e.ssoIdpMetadata});if(a(!1),(0,ne.hx)(n)){const e=n.error.tag.toUpperCase();return t.setFieldError($x,l(e in Wx?Wx[e]:Hx))}c.data?.global.isTeamProvisionedInNitro||Ix({ssoSetupStep:u.SsoSetupStep.CreateSsoApplication})}catch(e){return t.setFieldError($x,Hx)}}),[c.data?.global,l,h]),k=async e=>{var t;if(e&&!new yx.Y(e).isUrlValid())try{const n=await g({metadata:e});if(Ix({ssoSetupStep:u.SsoSetupStep.ValidateIdpMetadata,idpValidationResponse:(t=n,(0,ne.hx)(t)?Object.values(u.IdpValidationResponse).includes(t.error.tag)?t.error.tag:u.IdpValidationResponse.XmlParseFailed:u.IdpValidationResponse.Success)}),(0,ne.hx)(n)){const e=n.error.tag.toUpperCase();return l(e in jx?jx[e]:jx.XML_PARSE_FAILED)}}catch(e){return e instanceof Error?e.message:"Unknown error"}},T=async()=>{if(!S)return;s(!0);const e=await p(void 0),n=(0,ne.d6)(e);Ix({ssoSetupStep:u.SsoSetupStep.TestSsoConnection,testSsoResponse:n?u.TestSsoResponse.Success:u.TestSsoResponse.Failure}),t(n?{description:l("sso_confidential_test_nitro_sso_success_feedback"),closeActionLabel:l(zx),mood:"brand"}:{description:l("sso_confidential_test_nitro_sso_error_feedback"),closeActionLabel:l(zx),mood:"danger"}),s(!1)};return(0,E.tZ)(la.J9,{initialValues:f,onSubmit:Z,enableReinitialize:!0,children:({isSubmitting:e,isValid:t,isValidating:a,dirty:r})=>{const s=C||e||y,o=s||!t||a||!r;return(0,E.tZ)(la.l0,{noValidate:!0,children:(0,E.BX)("div",{sx:{display:"grid",gridTemplateColumns:"auto",gridAutoRows:"auto",gap:"8px"},children:[(0,E.tZ)(d.X,{as:"h2",textStyle:"ds.title.section.medium",color:"ds.text.neutral.standard",children:l("sso_confidential_metadata_form_section_heading")}),(0,E.tZ)(_.n,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",sx:{marginBottom:"24px"},children:l("sso_confidential_metadata_form_paragraph")}),(0,E.tZ)(la.gN,{name:$x,validateOnChange:!0,validate:k,children:({field:t,meta:{error:n}})=>(0,E.tZ)(Dl.K,{required:!0,id:t.name,label:l("sso_confidential_metadata_form_field_label"),placeholder:l(Fx),"aria-label":l(Fx),autoCorrect:"off",autoComplete:"off",spellCheck:"false",disabled:s,feedback:!n||e||a?void 0:{text:n},error:!(!n||e||a),...t})}),(0,E.BX)("div",{sx:{display:"flex",flexDirection:"row",gap:"16px",justifyContent:"flex-end",mt:"12px"},children:[(0,E.tZ)(D.z,{sx:{justifySelf:"end"},mood:"neutral",intensity:"quiet",disabled:!S,isLoading:i,onClick:T,children:l("sso_confidential_test_nitro_sso_button_label")}),(0,E.tZ)(D.z,{type:"submit",sx:{justifySelf:"end"},mood:"brand",intensity:x?"quiet":"catchy",disabled:o,isLoading:n,children:l("sso_confidential_metadata_form_button_submit")})]})]})})}})},Yx="sso_confidential_enable_nitro_sso_confirm_dialog_cancel",Qx=({title:e,body:t,primaryActionLabel:n,onConfirm:a,onCancel:i})=>{const{translate:s}=(0,b.Z)(),[o,l]=(0,r.useState)(!1);return(0,E.tZ)(J.Vq,{closeActionLabel:s(Yx),title:e,isOpen:!0,onClose:i,actions:{primary:{children:n,onClick:async()=>{try{l(!0),await a()}catch{l(!1)}},disabled:o,isLoading:o},secondary:{children:s(Yx),onClick:i,disabled:o}},children:t})},Jx=()=>{const{translate:e}=(0,b.Z)(),{showAlert:t}=(0,ca.V)(),[n,a]=(0,r.useState)(!1),i=(0,m.k)(wy.y,"ssoProvisioning"),{enableSso:s}=(0,te.u)(wy.y),o=i.data?.domainSetup[0]?.domainName,l=o?i.data?.domainVerificationInfo[o]:null,c=l?.verificationStatus!==Oy.X5.enum.valid,d=i.data?.enableSSO.ssoEnabled,p=Boolean(c||d);return(0,E.BX)(r.Fragment,{children:[(0,E.BX)("div",{sx:{display:"grid",gap:"8px"},children:[(0,E.tZ)(_.n,{as:"h2",textStyle:"ds.title.section.medium",color:"ds.text.neutral.standard",children:e("sso_confidential_enable_nitro_sso_section_heading")}),(0,E.tZ)(_.n,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",sx:{mb:"4px",gridRow:"2",gridColumn:"1/1"},children:e("sso_confidential_enable_nitro_sso_description")}),(0,E.tZ)("div",{sx:{justifySelf:"end"},children:(0,E.tZ)(D.z,{id:"enableSso",onClick:()=>{a(!0),Ix({ssoSetupStep:u.SsoSetupStep.TurnOnSso})},disabled:p,children:e("sso_confidential_enable_nitro_sso_button_label")})})]}),n?(0,E.tZ)(Qx,{title:e("sso_confidential_enable_nitro_sso_confirm_dialog_title"),body:e("sso_confidential_enable_nitro_sso_confirm_dialog_body"),primaryActionLabel:e("sso_confidential_enable_nitro_sso_confirm_dialog_primary_action_label"),onConfirm:async()=>{await(async()=>{const n=await s();(0,ne.d6)(n)?t(e("sso_confidential_enable_nitro_sso_success_feedback"),Ce.BLW.SUCCESS):t(n.error.tag,Ce.BLW.ERROR)})(),Ix({ssoSetupStep:u.SsoSetupStep.CompleteSsoSetup}),a(!1)},onCancel:()=>{a(!1)}}):null]})};n(58810);var ef=n(57459);const tf={ERROR_SSO_INVALID_TOKEN:"sso_confidential_verify_domain_step_domain_input_feedback_sso_error_invalid_token",ERROR_SSO_TOKEN_NOT_FOUND:"sso_confidential_verify_domain_modal_error_infobox_title_token_not_found",ERROR_SSO_TOKEN_NOT_FOUND_DESCRIPTION:"sso_confidential_verify_domain_modal_error_infobox_description_token_not_found",ERROR_SSO_GENERIC:"sso_confidential_verify_domain_modal_error_infobox_title_generic_error"},nf=({pendingReason:e,tokenFound:t,verificationStatus:n})=>n===Oy.X5.enum.pending&&e===Oy.Q8.enum.invalidToken?{title:tf.ERROR_SSO_INVALID_TOKEN,data:t}:n===Oy.X5.enum.pending&&e===Oy.Q8.enum.tokenNotFound?{title:tf.ERROR_SSO_TOKEN_NOT_FOUND,description:tf.ERROR_SSO_TOKEN_NOT_FOUND_DESCRIPTION}:n===Oy.X5.enum.invalid?{title:tf.ERROR_SSO_GENERIC}:null,af={CLOSE:"_common_dialog_dismiss_button",TITLE:"sso_confidential_verify_domain_modal_title",SUBDOMAIN_LABEL:"sso_confidential_verify_domain_modal_subdomain_label",TXT_LABEL:"sso_confidential_verify_domain_modal_txt_label",INSTRUCTION_1:"sso_confidential_verify_domain_modal_instruction_1",INSTRUCTION_2:"sso_confidential_verify_domain_modal_instruction_2",INSTUCTION_3:"sso_confidential_verify_domain_modal_instruction_3_markup",INFOBOX_TITLE:"sso_confidential_verify_domain_modal_infobox_title",VERIFY_DOMAIN_BUTTON:"sso_confidential_verify_domain_modal_verify_domain_button",VERIFY_DOMAIN_BUTTON_RETRY:"sso_confidential_verify_domain_modal_verify_domain_button_retry",VERIFY_DOMAIN_CLOSE:"sso_confidential_verify_domain_modal_verify_domain_button_close",...tf},rf=({domainName:e,domainVerificationInfo:t,onClose:n})=>{const{translate:a}=(0,b.Z)(),{checkDNSValidation:i}=(0,te.u)(wy.y),[s,o]=(0,r.useState)(!1),[l,c]=(0,r.useState)(!1),[d,u]=(0,r.useState)(null);(0,r.useEffect)((()=>{t?.verificationStatus===Oy.X5.enum.valid&&l&&n()}),[t,l]),(0,r.useEffect)((()=>{t&&u(nf(t))}),[t]);const{pendingReason:m,subdomainValue:p,txtValue:g,verificationStatus:h}=t;let y=a(af.VERIFY_DOMAIN_BUTTON);return"valid"===h?y=a(af.VERIFY_DOMAIN_CLOSE):("pending"===h&&m||"invalid"===h)&&(y=a(af.VERIFY_DOMAIN_BUTTON_RETRY)),(0,E.BX)(J.Vq,{closeActionLabel:a(af.CLOSE),title:a(af.TITLE,{domainName:e}),isOpen:!0,onClose:n,actions:{primary:{children:y,onClick:"valid"===h?n:async()=>{o(!0);const t=await i({domainName:e});o(!1),(0,ne.hx)(t)?u({title:af.ERROR_SSO_GENERIC}):c(!0)},isLoading:s}},children:[(0,E.BX)("ol",{sx:{listStyleType:"decimal",ml:"20px"},children:[(0,E.tZ)(_.n,{as:"li",textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",children:a(af.INSTRUCTION_1)}),(0,E.tZ)(_.n,{as:"li",textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",children:a(af.INSTRUCTION_2)}),(0,E.tZ)(_.n,{as:"li",textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",children:a.markup(af.INSTUCTION_3)})]}),(0,E.tZ)(rn.k,{title:a(af.INFOBOX_TITLE),mood:"brand"}),(0,E.tZ)(Qd.x,{label:a(af.SUBDOMAIN_LABEL),value:null!=p?p:"",readOnly:!0}),(0,E.tZ)(Qd.x,{label:a(af.TXT_LABEL),value:null!=g?g:"",readOnly:!0}),d?(0,E.tZ)(rn.k,{title:a(d.title),description:d.data||d.description&&a(d.description),mood:"danger",size:"medium"}):null]})};var sf;const of=()=>{const{translate:e}=(0,b.Z)(),[t,n]=(0,r.useState)(!1),{data:a,editTeamPolicies:i,status:s}=(()=>{const{data:e,status:t}=(0,m.k)(p.o,"getTeamId"),{data:n,status:a}=(0,m.k)(p.o,"getTeamPolicies"),{editTeamPolicies:i}=(0,te.u)(p.o);return a===G.rq.Error||t===G.rq.Error?{status:G.rq.Error}:a===G.rq.Loading||t===G.rq.Loading?{status:G.rq.Loading}:{status:G.rq.Success,data:{teamPolicies:n},editTeamPolicies:t=>i({teamId:Number(e.teamId),policyUpdates:t})}})(),o=(0,m.k)(wy.y,"ssoProvisioning");return(0,r.useEffect)((()=>{if(o.status===G.rq.Success){const t=o.data?.ssoSolution;var e;t===Oy.WO.enum.selfHostedSaml?Le.C.getTeamDomains().then((e=>{e.success&&n(e.domains.some((e=>"valid"===e.status)))})):n((null!=(e=o.data?.domainSetup)?e:[]).some((e=>e.verificationStatus===Oy.X5.enum.valid)))}}),[o]),(0,E.BX)("div",{sx:{backgroundColor:"ds.container.agnostic.neutral.quiet",borderRadius:"8px",padding:"24px",display:"flex",flexDirection:"column",gap:"16px"},children:[(0,E.BX)(d.X,{as:"h3",textStyle:"ds.title.supporting.small",color:"ds.text.neutral.quiet",children:[e("jit_provisioning_cat_title")," "]})," ",(0,E.BX)("div",{sx:{display:"flex",flexDirection:"row",gap:"16px"},children:[(0,E.BX)("div",{sx:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"8px"},children:[(0,E.tZ)(d.X,{as:"h2",textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:e("jit_provisioning_title")}),(0,E.tZ)(_.n,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",children:e("jit_provisioning_description")})]}),(0,E.tZ)("div",{children:s===G.rq.Loading?sf||(sf=(0,E.tZ)(l.Z,{mood:"brand"})):(0,E.tZ)(_S.Z,{disabled:!t,onChange:e=>{e.preventDefault(),s===G.rq.Success&&i?.({ssoProvisioning:e.target.checked})},defaultChecked:!!a?.teamPolicies.ssoProvisioning})})]})]})};var lf;const cf={SSO_STATUS_ACTIVE:"sso_confidential_verify_domain_step_sso_status_active",SSO_STATUS_VERIFIED:"sso_confidential_verify_domain_step_sso_status_verified",SSO_STATUS_UNVERIFIED:"sso_confidential_verify_domain_step_sso_status_unverified",SSO_STATUS_ERROR:"sso_confidential_verify_domain_step_sso_status_error",INPUT_LABEL:"sso_confidential_verify_domain_step_domain_input_label",BUTTON_DELETE_LABEL:"_common_action_delete",BUTTON_VERIFY_LABEL:"sso_confidential_verify_domain_step_domain_input_button_verify",BUTTON_VIEW_DETAILS_LABEL:"sso_confidential_verify_domain_step_domain_input_button_view_details",ERROR_DOMAIN_ALREADY_PROVISIONED:"sso_confidential_verify_domain_error_domain_already_provisioned",FEEDBACK_SSO_ACTIVE:"sso_confidential_verify_domain_step_domain_input_feedback_sso_active",...tf},df=({error:e,isValid:t,isValidSSOActive:n})=>{const{translate:a}=(0,b.Z)(),i=(e,t,n)=>(0,E.tZ)(pe.C,{mood:e,intensity:t,label:a(n)});return n?i("positive","catchy",cf.SSO_STATUS_ACTIVE):t?i("positive","quiet",cf.SSO_STATUS_VERIFIED):e?i("danger","quiet",cf.SSO_STATUS_ERROR):i("neutral","quiet",cf.SSO_STATUS_UNVERIFIED)},_f=({disabled:e,domainName:t,domainVerificationInfo:n,id:a,onModalOpen:i,onDeleteDomain:s,onUpdateDomain:o,provisionedDomains:l,ssoActive:c})=>{const{translate:d}=(0,b.Z)(),{provisionDomain:_,deleteDomain:u}=(0,te.u)(wy.y),[m,p]=(0,r.useState)(!1),[g,h]=(0,r.useState)(!1),[y,S]=(0,r.useState)(0===t.length),[x,f]=(0,r.useState)(!1),[v,C]=(0,r.useState)(null),Z=l.get(t)===a,k=Z&&n?.verificationStatus===Oy.X5.enum.valid,I=k&&c;(0,r.useEffect)((()=>{if(!Z&&l.has(t))f(!0);else if(n){var e;C(null!=(e=nf(n)?.title)?e:null)}}),[t,n,Z,l]);const A=((e,t,n)=>t?cf.ERROR_DOMAIN_ALREADY_PROVISIONED:e||(n?cf.FEEDBACK_SSO_ACTIVE:null))(v,x,I);return(0,E.BX)(r.Fragment,{children:[(0,E.tZ)(Ce.dDn,{alignSelf:"start",justifySelf:"start",sx:{paddingTop:"16px"},children:(0,E.tZ)(df,{error:!!v||x||n?.verificationStatus===Oy.X5.enum.expired||n?.verificationStatus===Oy.X5.enum.invalid,isValid:k,isValidSSOActive:I})}),(0,E.tZ)(Ce.dDn,{children:(0,E.tZ)(Tn.n,{label:d(cf.INPUT_LABEL),placeholder:d(cf.INPUT_LABEL),labelPersists:!1,autoCorrect:"off",autoComplete:"off",disabled:e,readOnly:Z,onChange:({target:{value:e}})=>{f(!1),C(null),S(0===e.length)},onBlur:e=>{o(e.currentTarget.value.trim().toLocaleLowerCase())},value:t,sx:{width:"400px"},error:x||!!v,feedback:A?d(A):void 0})}),(0,E.tZ)(Ce.dDn,{alignSelf:"start",justifySelf:"end",sx:{paddingTop:"5px"},...I&&{gridColumnStart:"3",gridColumnEnd:"5"},children:k&&!x?(0,E.tZ)(D.z,{mood:"neutral",intensity:"quiet",onClick:i,disabled:e,children:d(cf.BUTTON_VIEW_DETAILS_LABEL)}):(0,E.tZ)(D.z,{mood:"brand",intensity:"quiet",disabled:e||y||x||g,isLoading:m,onClick:async()=>{try{if(!n&&!v){p(!0);const e=await _({domainName:t});if((0,ne.hx)(e))return"DomainAlreadyProvisioned"===e.error.tag?void f(!0):void C(cf.ERROR_SSO_GENERIC)}i()}catch{C(cf.ERROR_SSO_GENERIC)}finally{p(!1)}},sx:{position:"relative"},children:d(cf.BUTTON_VERIFY_LABEL)})}),I?null:(0,E.tZ)(Ce.dDn,{alignSelf:"start",justifySelf:"end",sx:{paddingTop:"5px"},children:(0,E.tZ)(D.z,{"aria-label":cf.BUTTON_DELETE_LABEL,disabled:m,isLoading:g,mood:"danger",intensity:"supershy",layout:"iconOnly",icon:lf||(lf=(0,E.tZ)(T.JO,{name:"ActionDeleteOutlined"})),onClick:async()=>{try{if(n&&!x){h(!0);const e=await u({domainName:t});if((0,ne.hx)(e))return void C(cf.ERROR_SSO_GENERIC)}s()}catch{C(cf.ERROR_SSO_GENERIC)}finally{h(!1)}},sx:{position:"relative"}})}),(0,E.tZ)(Ce.dDn,{gridColumnStart:1,gridColumnEnd:5,sx:{borderBottom:"1px solid ds.border.neutral.quiet.idle"}})]})};var uf,mf;const pf={VERIFY_DOMAIN_TITLE:"sso_confidential_verify_domain_step_title",TABLE_HEADER_STATUS:"sso_confidential_verify_domain_step_table_header_status",TABLE_HEADER_DOMAIN:"sso_confidential_verify_domain_step_table_header_domain",BUTTON_ADD_LABEL:"sso_confidential_verify_domain_step_add_domain_button_label",PAGINATION_ITEM_COUNT:"_common_pagination_item_count",...tf},gf=20,hf=()=>{var e;const{translate:t}=(0,b.Z)(),[n,a]=(0,r.useState)([]),[i,s]=(0,r.useState)(1),[o,l]=(0,r.useState)(null),{spaceDetails:c}=(0,Me.fV)(),u=(0,m.k)(wy.y,"ssoProvisioning"),p=u.data?.domainVerificationInfo,g=null!=(e=u.data?.enableSSO.ssoEnabled)&&e,h=u.data?.global.ssoIsNitroProvider&&!!u.data?.idpMetadata.metadataValue;(0,r.useEffect)((()=>{if(u.data?.domainVerificationInfo&&0===n.length){var e,t;const n=Object.keys(null!=(e=u.data?.domainVerificationInfo)?e:{});a(n.length?n.map((e=>({id:(0,ef.Z)(),domainName:e}))):[{id:(0,ef.Z)(),domainName:null!=(t=c?.associatedEmail.split("@")[1])?t:""}])}}),[n.length,u.data?.domainVerificationInfo]);const y=(0,r.useMemo)((()=>p?((e,t)=>new Map(e.toReversed().reduce(((e,{id:n,domainName:a})=>(t[a]&&e.push([a,n]),e)),[])))(n,p):new Map),[p,n]);if(u.status!==G.rq.Success)return null;const S=(i-1)*gf;return(0,E.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"32px"},children:[(0,E.tZ)(d.X,{as:"h3",color:"ds.text.neutral.standard",textStyle:"ds.title.section.medium",children:t(pf.VERIFY_DOMAIN_TITLE)}),(0,E.BX)(Ce.T5p,{gap:"16px 10px",gridTemplateColumns:"100px 1fr 126px 40px",children:[(0,E.tZ)(Ce.dDn,{children:(0,E.tZ)(d.X,{as:"h4",color:"ds.text.neutral.quiet",textStyle:"ds.title.supporting.small",children:t(pf.TABLE_HEADER_STATUS)})}),(0,E.tZ)(Ce.dDn,{gridColumnStart:2,gridColumnEnd:5,children:(0,E.tZ)(d.X,{as:"h4",color:"ds.text.neutral.quiet",textStyle:"ds.title.supporting.small",children:t(pf.TABLE_HEADER_DOMAIN)})}),n.length>0?(0,E.BX)(r.Fragment,{children:[(0,E.tZ)(Ce.dDn,{gridColumnStart:1,gridColumnEnd:5,sx:{borderBottom:"1px solid ds.border.neutral.quiet.idle"}}),n.slice(S,S+gf).map((({id:e,domainName:t})=>p?(0,E.tZ)(_f,{disabled:!h,domainName:t,domainVerificationInfo:p[t],id:e,onDeleteDomain:()=>(async e=>{const t=n.filter((({id:t})=>t!==e)),r=Math.ceil(t.length/gf);i>r&&s(r),a(t)})(e),onModalOpen:()=>(async e=>{const{domainName:t}=n.find((({id:t})=>t===e));l(t)})(e),onUpdateDomain:t=>((e,t)=>{const i=n.map((n=>{const{id:a}=n;return a===e?{id:a,domainName:t}:n}));a(i)})(e,t),provisionedDomains:y,ssoActive:g},e):null))]}):null,(0,E.tZ)(Ce.dDn,{gridColumnStart:2,children:(0,E.tZ)(D.z,{mood:"brand",intensity:"supershy",layout:"iconLeading",icon:uf||(uf=(0,E.tZ)(T.JO,{name:"ActionAddOutlined"})),size:"small",onClick:()=>{s(Math.ceil((n.length+1)/gf)),a([...n,{id:(0,ef.Z)(),domainName:""}])},disabled:!h,children:t(pf.BUTTON_ADD_LABEL)})}),n.length>gf?(0,E.BX)(Ce.dDn,{gridColumnStart:1,gridColumnEnd:5,sx:{alignItems:"center",display:"grid",gridTemplateColumns:"1fr auto 1fr",padding:"24px"},children:[(0,E.tZ)(_.n,{color:"ds.text.neutral.quiet",textStyle:"ds.body.helper.regular",children:t(pf.PAGINATION_ITEM_COUNT,{first:S+1,last:Math.min(S+gf,n.length),total:n.length})}),(0,E.tZ)(Ce.tlE,{currentPage:i,onPageChange:s,totalPages:Math.ceil(n.length/gf)},i)]}):null]}),mf||(mf=(0,E.tZ)(of,{})),o&&p?.[o]?(0,E.tZ)(rf,{domainName:o,domainVerificationInfo:p[o],onClose:()=>{l(null)}}):null]})},yf=({title:e,paragraph:t,badge:n,children:a,onBackClicked:i,showBackButton:r=!0})=>{const s=(0,Ve.k6)(),o=null!=i?i:()=>{s.push(".")};return(0,E.BX)("div",{sx:{padding:"24px 0"},children:[(0,E.BX)("div",{sx:{padding:"0 32px"},children:[(0,E.BX)(c.k,{gap:"8px",sx:{marginBottom:"16px"},alignItems:"center",children:[r,(0,E.tZ)(D.z,{layout:"iconOnly",icon:"CaretLeftOutlined",intensity:"supershy",mood:"neutral",onClick:o}),(0,E.tZ)(d.X,{as:"h1",textStyle:"ds.title.section.large",children:e}),n?(0,E.tZ)(pe.C,{...n}):null]}),t?(0,E.tZ)(_.n,{sx:{marginBottom:"32px"},children:t}):null]}),a]})};var bf,Sf,xf,ff,vf;const Cf={CARD_1_HEADING:"Before you start",CARD_1_BODY_INTRO:"To set up SSO, you'll need:",CARD_1_BODY_POINTS:["Access to your IdP and public DNS provider accounts","A list of members to add to your SSO application","IdP metadata","Email domain"],CARD_1_SUB_HEADING:"Need help?",CARD_1_SUB_BODY:"For help setting up SSO, contact our Customer Support.",CARD_2_HEADING:"After turning on SSO",CARD_2_BODY_FIRST:"After SSO is turned on, non-admin members are required to log in with SSO.",CARD_2_BODY_SECOND:"They must use the browser extension when using Dashlane on a computer. They can also log in with SSO on mobile.",CARD_2_BODY_THIRD:"Admins can't log in with SSO. They still need to enter their Master Password."},Ef="support@dashlane.com",Zf=()=>{const{status:e,data:t}=(0,m.k)(wy.y,"ssoProvisioning");if(e!==s.rq.Success)return null;const n=e===s.rq.Success?!t.enableSSO.ssoEnabled:null;return(0,E.tZ)("div",{children:(0,E.BX)(c.k,{flexDirection:"column",gap:"32px",sx:{flexGrow:1},children:[n?(0,E.tZ)(Bx,{pageContext:Lx.Nitro}):null,(0,E.BX)(yn.Z,{sx:{padding:"32px"},children:[bf||(bf=(0,E.tZ)(Xx,{})),Sf||(Sf=(0,E.tZ)(Kx,{}))]}),(0,E.tZ)(yn.Z,{sx:{padding:"32px"},children:xf||(xf=(0,E.tZ)(hf,{}))}),(0,E.tZ)(yn.Z,{sx:{padding:"32px"},children:ff||(ff=(0,E.tZ)(Jx,{}))})]})})},kf=e=>(0,E.BX)("div",{sx:{border:"none",display:"flex",gap:"24px",flexDirection:"column"},...e,children:[(0,E.BX)(Cd,{children:[(0,E.tZ)(d.X,{as:"h3",textStyle:"ds.title.block.medium",children:Cf.CARD_1_HEADING}),(0,E.tZ)(_.n,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",children:Cf.CARD_1_BODY_INTRO}),(0,E.tZ)(_.n,{as:"ul",textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",sx:{margin:"0px 0px 8px 20px",listStyleType:"disc"},children:Cf.CARD_1_BODY_POINTS.map((e=>(0,E.tZ)("li",{children:e},e)))}),(0,E.tZ)(d.X,{as:"h3",textStyle:"ds.title.block.medium",children:Cf.CARD_1_SUB_HEADING}),(0,E.tZ)(_.n,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",children:Cf.CARD_1_SUB_BODY}),(0,E.tZ)(Ed,{href:`mailto:${Ef}`,sx:{fontSize:"14px"},children:Ef})]}),(0,E.BX)(Cd,{children:[(0,E.tZ)(d.X,{as:"h3",textStyle:"ds.title.block.medium",children:Cf.CARD_2_HEADING}),(0,E.tZ)(_.n,{textStyle:"ds.title.block.small",color:"ds.text.neutral.quiet",children:Cf.CARD_2_BODY_FIRST}),(0,E.tZ)(_.n,{textStyle:"ds.title.block.small",color:"ds.text.neutral.quiet",children:Cf.CARD_2_BODY_SECOND}),(0,E.tZ)(_.n,{textStyle:"ds.title.block.small",color:"ds.text.danger.standard",children:Cf.CARD_2_BODY_THIRD})]})]}),Df=({backRoute:e})=>{const{data:t}=(0,m.k)(wy.y,"ssoProvisioning"),{translate:n}=(0,b.Z)(),a=!t?.enableSSO.ssoEnabled;return(0,E.tZ)(yf,{title:n("sso_confidential_page_title"),showBackButton:a,onBackClicked:()=>{Ix({ssoSetupStep:u.SsoSetupStep.ReturnToSsoSelection}),(0,i.uX)(e)},children:vf||(vf=(0,E.tZ)(di,{mainContent:(0,E.tZ)(Zf,{}),secondaryContent:(0,E.tZ)(kf,{})}))})},Tf=()=>{const[e,t]=(0,r.useState)(!1),[n,a]=(0,r.useState)(),i=(0,r.useCallback)((async()=>{try{return await Le.C.getEncryptionServiceConfig()}catch{return{success:!1,error:{code:hu.S}}}}),[]),s=(0,r.useCallback)((async(e=new AbortController)=>{e.signal.aborted||t(!0);const n=await i();return e.signal.aborted||(n.success&&a(n.data),t(!1)),n}),[i]);return(0,r.useEffect)((()=>{const e=new AbortController;return s(e),()=>{e.abort()}}),[s]),{esConfigLoading:e,esConfig:n,refreshEncryptionServiceConfig:s}};var If=n(53123),Af=n(40010),wf=n(54661);const Of="esConfigurationLabel",Nf=({value:e,disabled:t,error:n,isLoading:a=!1,configRegenRequired:i,lastGeneratedTimeStamp:s})=>{const{translate:o}=(0,b.Z)(),l=s?(0,E.BX)(c.k,{gap:"4px",sx:{mt:"8px"},justifyContent:"center",children:[(0,E.tZ)(_.n,{textStyle:"ds.body.reduced.strong",children:o("team_settings_encryption_service_generate_configuration_timestamp")}),(0,E.tZ)(_.n,{textStyle:"ds.body.reduced.regular",children:(0,ln.Z)(s).toLocaleString(navigator.language,{...fn.qG.lll,timeZoneName:"short"})})]}):null;return(0,E.BX)(Ce.T5p,{gridTemplateAreas:"'label button' 'description button' 'timestamp timestamp' 'config buttons'",gridTemplateColumns:"3fr 1fr",sx:{gridColumnGap:"8px"},children:[(0,E.tZ)(Ce.dDn,{gridArea:"label",sx:{paddingBottom:"8px"},as:_.n,innerAs:"label",id:Of,textStyle:"ds.title.block.medium",children:o("team_settings_encryption_service_generate_configuration_label")}),(0,E.tZ)(Ce.dDn,{gridArea:"description",as:_.n,children:o("team_settings_encryption_service_generate_configuration_label_helper")}),(0,E.BX)(Ce.dDn,{gridArea:"button",children:[(0,E.tZ)(D.z,{disabled:t||a,mood:e&&!i?"neutral":"brand",intensity:e&&!i?"quiet":"catchy",fullsize:!0,type:"submit",isLoading:a,children:o("team_settings_encryption_service_generate_configuration_button")}),i?null:l]}),e?(0,E.BX)(r.Fragment,{children:[(0,E.tZ)(Ce.dDn,{gridArea:"config",sx:{marginTop:"18px"},children:(0,E.tZ)(Dl.K,{"aria-labelledby":Of,readOnly:!0,disabled:i,value:e,feedback:n?{text:n}:void 0,error:!!n})}),(0,E.BX)(Ce.dDn,{as:c.k,gridArea:"buttons",sx:{marginTop:"18px"},flexDirection:"column",gap:"8px",children:[(0,E.tZ)(xu.q,{disabled:i,copyValue:e,buttonText:o("input_copy_button"),fullsize:!0}),(0,E.tZ)(wf.o,{disabled:i,buttonText:o("team_settings_encryption_service_config_download_button"),downloadString:e,fileName:"dashlane-encryption-service-config.txt",fileType:"text/plain",fullsize:!0})]})]}):null]})};function Rf(e){const t=(0,r.useMemo)((()=>e),[e]),[n,a]=(0,r.useState)(!1),[i,s]=(0,r.useState)(),o=(0,r.useCallback)((async()=>{const e={success:!1,error:{code:hu.S}};try{return t?await Le.C.getTeamDevice({teamDeviceAccessKey:t}):e}catch{return e}}),[t]),l=(0,r.useCallback)((async(e=new AbortController)=>{e.signal.aborted||a(!0);const t=await o();return e.signal.aborted||(t.success&&s(t.data.teamDevice),a(!1)),t}),[o]);return(0,r.useEffect)((()=>{const e=new AbortController;return l(e),()=>{e.abort()}}),[l]),{teamDeviceLoading:n,teamDevice:i,refreshTeamDevice:l}}const Lf={AWS:"https://support.dashlane.com/hc/articles/4404322174482-Dashlane-Encryption-Service-Overview-and-Setup?utm_source=extension#h_01FTXGN0C8B9HMKRD8J0BSYRAH","Microsoft Azure":"https://support.dashlane.com/hc/articles/4404322174482-Dashlane-Encryption-Service-Overview-and-Setup?utm_source=extension#h_01FTXGMVBAEK5GB0TZJ86K7ZWE"},Bf=({context:e="GENERIC",...t})=>{var n,a;const{esConfig:i,esConfigLoading:s}=Tf(),{teamDevice:o,teamDeviceLoading:l}=Rf(i?.deviceAccessKey),[c,d]=(0,r.useState)(!1),{translate:_}=(0,b.Z)(),u={CONTENT:_.markup("team_settings_encryption_service_restart_failed_info_content_markup",{helpArticle:null!=(n=Lf[null!=(a=i?.deploymentLocation)?a:""])?n:"",supportLink:"https://support.dashlane.com/hc/requests/new?utm_source=extension"},{linkTarget:"_blank"})},m={GENERIC:{TITLE:_("team_settings_encryption_service_restart_failed_info_title"),...u},SCIM:{TITLE:_("team_settings_encryption_service_restart_failed_info_title_scim"),...u},ES:{TITLE:_("team_settings_encryption_service_restart_failed_info_title_es"),...u},SSO:{TITLE:_("team_settings_encryption_service_restart_failed_info_title_sso"),...u}};return(0,r.useEffect)((()=>{if(!l&&!s&&o&&i){const t=!o.hasLatestConfig&&"GENERIC"===e||"GENERIC"!==e;d(t)}}),[o,i,l,s,e]),c?(0,E.tZ)(rn.k,{mood:"warning",size:"large",title:m[e].TITLE,description:m[e].CONTENT,actions:m[e].BUTTON?[(0,E.tZ)(D.z,{mood:"brand",intensity:"catchy",onClick:()=>{d(!1)},children:m[e].BUTTON},"primary")]:void 0,...t}):null};var Mf,Pf,Uf,Xf,zf,Ff=n(10121);const qf="team_settings_encryption_service_enter_endpoint_placeholder_aws_linux",Gf="_common_generic_error",Vf="https://",jf={AWS:"https://eu-west-1.console.aws.amazon.com/acm/home?region=eu-west-1#/welcome","Microsoft Azure":"https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fget.dashlane.com%2Fazure%2Farm%2Fes%2Fazuredeploy.json"},Wf={AWS:"https://support.dashlane.com/hc/articles/4404322174482-Dashlane-Encryption-Service-Overview-and-Setup?utm_source=extension#h_01FTXGN0C8B9HMKRD8J0BSYRAH","Microsoft Azure":"https://support.dashlane.com/hc/articles/4404322174482-Dashlane-Encryption-Service-Overview-and-Setup?utm_source=extension#h_01FTXGMVBAEK5GB0TZJ86K7ZWE"},Hf={AWS:"team_settings_encryption_service_go_to_label_helper_aws_markup","Microsoft Azure":"team_settings_encryption_service_go_to_label_helper_azure_markup"},$f={AWS:"team_settings_encryption_service_enter_endpoint_helper_aws_linux","Microsoft Azure":"team_settings_encryption_service_enter_endpoint_helper_azure"},Kf={"Microsoft Azure":"team_settings_encryption_service_enter_endpoint_placeholder_azure",AWS:qf},Yf="config",Qf="deploymentLocation",Jf="encryptionServiceEndpoint",ev="ssoConnectorKey",tv="-sso.azurewebsites.net",nv=({migratingFromSSOConnector:e=!1,esConfig:t,onSave:n,teamSettings:a,updateTeamSettings:s,isSettingupScim:o})=>{var l,c,d;const[m,p]=(0,r.useState)(!1),[g,h]=(0,r.useState)(""),[y,S]=(0,r.useState)(!1),[x,f]=(0,r.useState)(!1),{translate:v}=(0,b.Z)(),{spaceDetails:C}=(0,Me.fV)(),Z=null!=(l=C?.associatedEmail)?l:"",k=(0,i.k6)(),T=a?.ssoServiceProviderUrl,I={encryptionServiceEndpoint:(null!=T?T:"").replace(Vf,""),config:null!=(c=t?.config)?c:"",deploymentLocation:null!=(d=t?.deploymentLocation)?d:"",ssoConnectorKey:""},A=()=>k.goBack(),w=e=>e?null:v("team_settings_encryption_service_error_select_service"),O=e=>{const t=v("team_settings_encryption_service_error_invalid_ssoConnectorKey");try{const[t,n]=e.split("|"),a=atob(n);if(!t||!n||!a||36!==t.length||64!==a.length)throw new Error("Invalid key format")}catch{return t}return null},N=e=>{const t=v("team_settings_encryption_service_error_invalid_endpoint");if(!e)return t;let n;try{n=new URL(`${Vf}${e}`)}catch(e){return t}return"/"!==n.pathname||""!==n.search||""!==n.hash||n.href.includes("?")?t:null};return(0,E.tZ)(la.J9,{onSubmit:async(t,{setFieldValue:a,setFieldTouched:i})=>{h(""),p(!0),f(!1);const{deploymentLocation:r,encryptionServiceEndpoint:l,ssoConnectorKey:c}=t;if(!r)return void i(Qf);if(e&&!c)return void i(ev);a(Yf,"");const d=e=>e.replace(/\/$/,"").toLowerCase();try{const i={deploymentLocation:r,encryptionServiceEndpoint:Vf+d(l),updateTeamDeviceConfigParams:{}};e&&c&&(i.updateTeamDeviceConfigParams.ssoConnectorKey=c);const _=await Le.C.generateAndSaveEncryptionServiceConfig(i);if(!_.success)return void h(v(Gf));const m=_.data.basicConfig;if(a(Yf,m.config),t[Jf]!==I.encryptionServiceEndpoint){let e={ssoServiceProviderUrl:t[Jf]?`${Vf}`+d(`${t[Jf]}`):null,ssoSolution:Oy.WO.enum.selfHostedSaml};e=o?{...e,provisioningSolution:Ff.Hh.enum.selfHostedScim}:e,await s(e)}if(p(!1),_.data.encryptionServiceReloadingStatus!==If.x.OK)return f(!0),S(!1),void n?.();Tx({ssoSetupStep:u.SsoSetupStep.GenerateAndSaveConfiguration}),g||n?.()}catch(e){p(!1),h(v(Gf))}},initialValues:I,onReset:A,children:n=>{var a,i;return(0,E.BX)(la.l0,{autoComplete:"off",children:[(0,E.tZ)(Af.X,{dirty:n.dirty&&!m&&!x}),(0,E.BX)(Ce.Zbd,{children:[(0,E.tZ)(Ce.Ol2,{children:v("team_settings_encryption_service_header")}),(0,E.BX)(Ce.aYP,{children:[e?(0,E.BX)(r.Fragment,{children:[(0,E.BX)(Ce.T5p,{gridTemplateAreas:"'header header' 'description description' 'input button'",gridTemplateColumns:"1fr auto",gap:"10px",children:[(0,E.tZ)(Ce.dDn,{gridArea:"header",children:(0,E.tZ)(_.n,{as:"h3",textStyle:"ds.title.block.medium",children:v("team_settings_encryption_service_migrate_sso_title")})}),(0,E.tZ)(Ce.dDn,{gridArea:"description",children:(0,E.tZ)(_.n,{color:"ds.text.neutral.quiet",textStyle:"ds.body.standard.regular",children:v.markup("team_settings_encryption_service_migrate_sso_description_markup")})}),(0,E.tZ)(Ce.dDn,{gridArea:"input",children:(0,E.tZ)(la.gN,{name:ev,validate:O,children:({field:{onChange:e,...t},meta:{error:a,touched:i}})=>(0,E.tZ)(Ce.oil,{onChange:t=>{e(t)},id:"ssoConnectorKey",placeholder:v("team_settings_encryption_service_sso_connector_key_placeholder"),fullWidth:!0,feedbackText:i&&a?a:void 0,feedbackType:i&&a?"error":void 0,"aria-invalid":i&&!!a,readOnly:n.isSubmitting,...t})})})]}),Mf||(Mf=(0,E.tZ)("hr",{}))]}):null,(0,E.BX)(Ce.T5p,{gridTemplateAreas:"'label select' 'desc select'",gap:"8px",children:[(0,E.tZ)(Ce.dDn,{gridArea:"label",as:_.n,innerAs:"label",htmlFor:"deploymentLocation",sx:{gridArea:"label"},textStyle:"ds.title.block.medium",children:v("team_settings_encryption_service_deploy_label")}),(0,E.tZ)(Ce.dDn,{gridArea:"desc",as:_.n,children:v.markup("team_settings_encryption_service_deploy_label_helper_markup",{customerSupport:"https://support.dashlane.com/hc/requests/new?utm_source=extension"},{linkTarget:"_blank"})}),(0,E.tZ)(Ce.dDn,{gridArea:"select",children:(0,E.tZ)(la.gN,{name:Qf,validate:w,children:({field:{onChange:e,...t},meta:{error:a,touched:i}})=>(0,E.tZ)(Ce.PhF,{onChange:t=>{n.setFieldValue(Jf,((e,t)=>{if(!e||!t)return"";const n=e.replace(/.+@/,"");if("Microsoft Azure"===t){const[e,t,...a]=n.split(".").reverse(),i=t+tv;return i.length<=42?i:t.slice(0,42-tv.length)+tv}return"AWS"===t?"dashlane-sso."+n:""})(Z,t.target.value)),S(I.deploymentLocation!==t.target.value),Tx({ssoSetupStep:u.SsoSetupStep.SelectEncryptionServicePlatform,encryptionServicePlatformSelected:"AWS"===t.target.value?u.EncryptionServicePlatformSelected.AmazonWebServices:u.EncryptionServicePlatformSelected.Azure}),e(t)},feedbackId:"deploymentLocationFeedback",selectId:"deploymentLocation",options:Object.keys($f),placeholder:v("team_settings_encryption_service_select_host"),intent:i&&a?"error":void 0,feedbackText:i&&a?a:void 0,readOnly:n.isSubmitting,...t})})})]}),Pf||(Pf=(0,E.tZ)("hr",{})),(0,E.BX)(Ce.T5p,{gridTemplateColumns:"auto",gap:"8px",children:[(0,E.tZ)(Ce.dDn,{as:_.n,innerAs:"label",htmlFor:"endpointInput",textStyle:"ds.title.block.medium",children:v("team_settings_encryption_service_enter_endpoint_label")}),(0,E.tZ)(Ce.dDn,{as:_.n,sx:{mb:"16px"},children:v(null!=(a=$f[n.values[Qf]])?a:"team_settings_encryption_service_enter_endpoint_label_helper_no_selection")}),e?(0,E.BX)(_.n,{children:[v("team_settings_encryption_service_current_endpoint_label")," ",T]}):null,(0,E.tZ)(la.gN,{name:Jf,validate:N,children:({field:{onChange:e,...t},meta:{error:a,touched:i},form:{values:{deploymentLocation:r}}})=>{var s;return(0,E.tZ)(Ce.oil,{sx:{pl:0},onChange:t=>{S(I.encryptionServiceEndpoint!==t.target.value),e(t)},startAdornment:Uf||(Uf=(0,E.tZ)(_.n,{color:"ds.text.neutral.quiet",children:Vf})),id:"endpointInput",placeholder:v(null!=(s=Kf[r])?s:qf),fullWidth:!0,feedbackText:i&&a?a:void 0,feedbackType:i&&a?"error":void 0,"aria-invalid":i&&!!a,readOnly:n.isSubmitting,...t})}})]}),Xf||(Xf=(0,E.tZ)("hr",{})),x?(0,E.tZ)(Bf,{sx:{marginBottom:"20px"},context:"ES"}):null,(0,E.tZ)(la.gN,{name:Yf,children:({field:a,meta:i,form:{values:{deploymentLocation:r,ssoConnectorKey:s}}})=>{var o;return(0,E.tZ)(Nf,{configRegenRequired:y,disabled:!r||e&&!s,lastGeneratedTimeStamp:t?.lastGeneratedTimeStamp,value:a.value,error:(null!=(o=i.error)?o:!n.isSubmitting&&y)?v("team_settings_encryption_service_config_regen_warning"):void 0,isLoading:m||n.isSubmitting})}}),zf||(zf=(0,E.tZ)("hr",{})),(0,E.BX)(Ce.T5p,{gridTemplateAreas:"'header button' 'description button'",gap:"8px",children:[(0,E.tZ)(Ce.dDn,{gridArea:"header",as:_.n,textStyle:"ds.title.block.medium",children:v("team_settings_encryption_service_go_to_label")}),(0,E.tZ)(Ce.dDn,{gridArea:"description",as:_.n,sx:{mb:"16px"},children:(i=n.values.deploymentLocation,i||(i="AWS"),v.markup(Hf[i],{setupGuide:Wf[i]},{linkTarget:"_blank"}))}),(0,E.tZ)(Ce.dDn,{gridArea:"button",as:D.z,type:"button",mood:n.values.config&&!y?"brand":"neutral",disabled:!n.values[Qf]||!n.values[Yf]||y,onClick:()=>{Tx({ssoSetupStep:u.SsoSetupStep.AddConfigurationToServiceHost}),(0,W.Yo)(jf[n.values[Qf]])},icon:"ActionOpenExternalLinkOutlined",layout:"iconTrailing",sx:{gridArea:"button",height:"fit-content"},children:v("team_settings_encryption_service_go_to_button")})]})]}),(0,E.BX)(Ce.eWM,{flexWrap:"nowrap",children:[g?(0,E.tZ)(_.n,{sx:{width:"40%",ml:0,mr:"auto"},textStyle:"ds.title.supporting.small",color:"ds.text.danger.standard",children:g}):null,(0,E.tZ)(D.z,{mood:"neutral",intensity:"quiet",size:"large",type:"button",onClick:()=>A(),children:v("team_settings_encryption_service_button_cancel")})]})]})]})}})};var av,iv=n(91684);const rv="team_settings_encryption_service_not_available",sv=({config:e})=>{var t;const{translate:n}=(0,b.Z)(),{teamDevice:a,refreshTeamDevice:i,teamDeviceLoading:r}=Rf(e.deviceAccessKey),s=n.markup("team_settings_encryption_service_tooltip_text_markup",{updateServiceUrl:"https://support.dashlane.com/hc/articles/360015973719"},{linkTarget:"_blank"},{color:"ds.text.inverse.catchy",hoverColor:"ds.text.brand.quiet",activeColor:"ds.text.brand.standard"});return(0,E.tZ)(iv.R,{children:r?av||(av=(0,E.tZ)(l.Z,{})):(0,E.BX)(c.k,{flexDirection:"column",gap:"5px",children:[(0,E.tZ)(_.n,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.standard",children:`${n("team_settings_encryption_service_last_restart")}\n                    ${a?.lastStartDateUnix?(0,ln.Z)(a.lastStartDateUnix).toLocaleString(navigator.language,{...fn.qG.lll,timeZoneName:"short"}):n(rv)}`}),(0,E.BX)(c.k,{gap:"8px",children:[(0,E.tZ)(_.n,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.standard",children:`\n                   ${n("team_settings_encryption_service_version")}\n                   ${null!=(t=a?.version)?t:n(rv)}\n                  `}),!1===a?.hasLatestVersion?(0,E.tZ)(xo.u,{wrapTrigger:!0,content:s,children:(0,E.tZ)(pe.C,{mood:"danger",iconName:"FeedbackWarningOutlined",layout:"iconLeading",label:n("team_settings_encryption_service_new_version")})}):null]}),(0,E.BX)(_.n,{as:"a",color:"ds.text.brand.standard",sx:{textDecoration:"none",fontWeight:"normal"},onClick:()=>i(),textStyle:"ds.body.reduced.regular",children:[(0,E.tZ)(T.JO,{sx:{display:"inline",marginRight:"5px"},name:"ActionRefreshOutlined",size:"xsmall",color:"ds.text.brand.standard"}),n("team_settings_encryption_service_refresh")]})]})})};var ov;const lv=({esConfig:e,loading:t,parentPath:n,disableSetupButton:a})=>{const{translate:r}=(0,b.Z)(),s=(0,i.k6)(),o=!e&&!t;return(0,E.tZ)(yn.Z,{children:(0,E.BX)(Ce.T5p,{gridTemplateAreas:"'header button' 'description button' 'status .'",gridTemplateColumns:"1fr auto",gap:"8px",children:[(0,E.BX)(Ce.dDn,{gridArea:"header",children:[e?null:(0,E.tZ)(d.X,{as:"h3",color:"ds.text.neutral.quiet",textStyle:"ds.title.supporting.small",children:r("team_settings_encryption_service_get_started")}),(0,E.tZ)(d.X,{as:"h3",textStyle:"ds.title.section.medium",children:r("team_settings_encryption_service_header")})]}),(0,E.BX)(Ce.dDn,{gridArea:"description",children:[(0,E.tZ)(_.n,{textStyle:"ds.title.block.small",color:"ds.text.neutral.quiet",children:r("team_settings_encryption_service_description")}),ov||(ov=(0,E.tZ)("br",{})),(0,E.tZ)(_.n,{as:"a",textStyle:"ds.title.block.small",href:"https://support.dashlane.com/hc/articles/360013149040#why-encryption",color:"ds.text.brand.standard",rel:"noopener noreferrer",target:"_blank",children:r("team_settings_encryption_service_more_info_link")})]}),(0,E.tZ)(Ce.dDn,{id:"esSetupButton",as:D.z,disabled:t||a,mood:o?"brand":"neutral",intensity:o?"catchy":"quiet",gridArea:"button",type:"button",alignSelf:"center",size:"large",onClick:()=>{Tx({ssoSetupStep:u.SsoSetupStep.SetUpEncryptionServiceSettings}),s.push(`${n}/encryption-service-settings`)},isLoading:t,children:r(e?"team_settings_button_edit_label":"team_settings_encryption_service_set_up")}),e?(0,E.tZ)(Ce.dDn,{gridArea:"status",sx:{mt:"20px"},children:(0,E.tZ)(sv,{config:e})}):null]})})},cv={valid:"sso_self_hosted_verify_domain_status_valid",invalid:"sso_self_hosted_verify_domain_status_invalid",pending:"sso_self_hosted_verify_domain_status_pending",expired:"sso_self_hosted_verify_domain_status_expired"},dv=({domain:e,isLoading:t,fieldName:n,onAddDomain:a,onValidateDomain:i,onDeleteDomain:r,feedback:s,...o})=>{var l,d;const{translate:_}=(0,b.Z)(),[{value:{name:u},onBlur:m,...p},{error:g},{setValue:h}]=(0,la.U$)(n),y=e.status?cv[e.status]:void 0,S=_(e.status?"sso_self_hosted_verify_domain_modal_verify_domain_button":"team_settings_es_sso_setup_add_domain");return(0,E.BX)(c.k,{gap:"16px",alignItems:"start",children:[(0,E.tZ)(Tn.n,{...p,...o,feedback:null!=s?s:y,error:null!=(l=!!(null!=g?g:o.error))?l:s,id:n,sx:{flexGrow:1},readOnly:null!=(d=!!e.status)?d:t,labelPersists:!1,value:u,onChange:({currentTarget:{value:e}})=>{h({name:e})},onKeyDown:e=>{"Enter"===e.key&&(a(),e.preventDefault(),e.stopPropagation())},onBlur:e=>{e.currentTarget.value&&!e.currentTarget.readOnly&&a(),m?.(e)}}),(0,E.BX)(c.k,{gap:"16px",sx:{width:"200px",marginTop:"4px"},justifyContent:"end",children:[e.status!==Yl.p.pending&&e.status?null:(0,E.tZ)(D.z,{mood:"brand",intensity:"quiet",disabled:t,onClick:i,"aria-label":S,children:S}),e.name.length&&e.status?(0,E.tZ)(D.z,{icon:"ActionDeleteOutlined",mood:"danger",intensity:"supershy",layout:"iconOnly",disabled:t,onClick:r,"aria-label":_("sso_self_hosted_verify_domain_delete_domain_label")}):null]})]})};var _v;const uv="team_settings_domain_register_invalid_error",mv=({fieldArrayName:e,domainLoadError:t,refreshDomains:n})=>{const{translate:a}=(0,b.Z)(),{values:i}=(0,la.u6)(),[s,o]=(0,r.useState)({}),[l,u]=(0,r.useState)({}),[m,p]=(0,r.useState)(""),[g,h]=(0,r.useState)(null),y=(e,t)=>{o((n=>({...n,[e]:t})))},S=async t=>{await(async t=>{const n=t.trim();if(!(0,Wi.hS)(n))throw new Error(a(uv));if(i[e].reduce(((e,t)=>t.name===n?e+1:e),0)>1)throw new Error(a("team_settings_domain_register_duplicated_error"));(e=>{u((t=>({...t,[e]:!0})))})(t);const r=await Le.C.registerTeamDomain({domain:n});var s;if((e=>{u((({[e]:t,...n})=>n))})(t),!r.success)throw new Error(a(null!=(s={INVALID_PUBLIC_DOMAIN:"team_settings_domain_register_public_error",DOMAIN_CONTAINS_EXISTING_NONTEAM_USERS:"team_settings_domain_register_contact_support"}[r.error.code])?s:uv))})(t.name),await n()};return t?(0,E.tZ)(c.k,{fullWidth:!0,justifyContent:"center",children:(0,E.tZ)(d.X,{as:"h3",color:"ds.text.danger.quiet",children:t})}):(0,E.BX)(r.Fragment,{children:[(0,E.BX)(c.k,{flexDirection:"column",gap:"8px",children:[(0,E.tZ)(_.n,{as:"label",htmlFor:`${e}.${i[e].length-1}`,textStyle:"ds.title.section.medium",color:"ds.text.neutral.catchy",children:a("team_settings_domain_title")}),(0,E.tZ)(_.n,{children:a("team_settings_es_sso_setup_domain_description")})]}),(0,E.tZ)(la.F2,{name:e,children:e=>(0,E.tZ)(c.k,{flexDirection:"column",gap:"8px",children:i[e.name].map(((t,n)=>{var o;const c=l[t.name];return(0,E.tZ)(r.Fragment,{children:(0,E.tZ)(dv,{label:a("sso_self_hosted_verify_domain_input_domain_label"),onValidateDomain:()=>(async e=>{try{void 0===e.status&&await S(e),p(e.name)}catch(t){y(e.name,t.message)}})(t),onDeleteDomain:()=>h(t),isLoading:c,domain:t,placeholder:a("team_settings_es_sso_domain_url_placeholder"),fieldName:`${e.name}.${n}`,autoFocus:n===i[e.name].length-1,feedback:s[t.name],error:!!s[t.name],onAddDomain:async()=>{try{await S(t),p(t.name)}catch(e){y(t.name,e.message)}}})},`${e.name}.${null!=(o=t.id)?o:n}`)}))})}),_v||(_v=(0,E.tZ)(of,{})),m?(0,E.tZ)(a_,{domainName:m,onSuccess:async()=>{p(""),await n()},onDismiss:()=>p("")}):null,g?(0,E.tZ)(Nd,{domain:g,onDismiss:()=>h(null),onConfirm:async()=>{await(async e=>{if(!e)return;const t=await Le.C.deactivateTeamDomain({domain:e});return t.success?void 0:t.error.code})(g.name),await n()}}):null]})},pv=e=>{const t=(0,r.useMemo)((()=>{var t,n;return{draft:null!=(t=e?.draft)&&t,deviceAccessKey:null!=(n=e?.deviceAccessKey)?n:""}}),[e?.draft,e?.deviceAccessKey]),[n,a]=(0,r.useState)(!0),[i,s]=(0,r.useState)(null),[o,l]=(0,r.useState)(null),c=(0,r.useCallback)((async()=>{try{return await Le.C.getTeamDeviceEncryptedConfig(t)}catch{return{success:!1,error:{code:hu.S}}}}),[t]),d=(0,r.useCallback)((async(e=new AbortController)=>{e.signal.aborted||a(!0);const t=await c();return e.signal.aborted||(s(t.success?null:t.error.code),t.success&&l(t.data),a(!1)),t}),[c]),_=(0,r.useCallback)((async e=>{a(!0);try{return await Le.C.updateTeamDeviceEncryptedConfig(e)}catch{return{success:!1,error:{code:hu.S}}}finally{a(!1)}}),[]);return(0,r.useEffect)((()=>{const e=new AbortController;return d(e),()=>{e.abort()}}),[d]),{teamDeviceConfigLoading:n,loadTeamDeviceConfigErrorCode:i,teamDeviceConfig:o,updateTeamDeviceConfig:_,refreshTeamDeviceConfig:d}};var gv,hv,yv,bv;const Sv="team_settings_es_sso_setup_header",xv="team_settings_domain_fetch_error",fv={GENERIC_ERROR:"_common_generic_error"},vv=e=>e?`${e}/saml/callback`:"",Cv="ssoIdpMetadata",Ev=()=>{var e;const{translate:t}=(0,b.Z)(),{teamId:n}=(0,Me.fV)(),{updateTeamDeviceConfig:a}=pv(),[s,o]=(0,r.useState)(!1),[u,m]=(0,r.useState)(!1),[p,g]=(0,r.useState)([]),h=(0,r.useRef)(null),[y,S]=(0,r.useState)(!1),[x,f]=(0,r.useState)(""),{teamSettings:v={},teamSettingsLoading:C}=Be(n),{ssoIdpMetadata:Z,ssoServiceProviderUrl:k=""}=v,T=(0,i.k6)(),I=(0,r.useCallback)((async()=>{try{f("");const e=await Le.C.getTeamDomains();if(e.success){const t=e.domains.length?e.domains:[];g([...t,{name:"",id:0}])}else f(t(xv))}catch(n){var e;f(null!=(e=n.message)?e:t(xv))}}),[t]);(0,r.useEffect)((()=>{S(!0),I().then((()=>S(!1)))}),[I]);const A={domains:p,ssoIdpMetadata:null!=(e=null!=Z?Z:h.current?.value)?e:""},w=()=>T.goBack();return C||y?(0,E.BX)(yn.Z,{gap:"32px",children:[(0,E.tZ)(d.X,{as:"h1",textStyle:"ds.title.section.large",color:"ds.text.neutral.catchy",children:t(Sv)}),gv||(gv=(0,E.tZ)(c.k,{fullWidth:!0,justifyContent:"center",children:(0,E.tZ)(l.Z,{size:60})}))]}):(0,E.tZ)(la.J9,{onSubmit:async(e,n)=>{try{var i;o(!0),m(!1);const r=await a({ssoEnabled:!0,[Cv]:e[Cv],connectorEndpoint:k||void 0,teamDeviceUrl:null!=(i=v.ssoServiceProviderUrl)?i:void 0});if(!r.success){const e=r.error.code.toUpperCase();if("DEACTIVATED_TEAM_DEVICE"===e)return;const a=t(fv[e]?fv[e]:fv.GENERIC_ERROR);return void n.setFieldError(Cv,a)}if(r.data.encryptionServiceReloadingStatus!==If.x.OK)return void m(!0);w()}catch(e){n.setFieldError(Cv,t(fv.GENERIC_ERROR)),o(!1)}},initialValues:A,enableReinitialize:!0,children:({isSubmitting:e,dirty:n})=>{return(0,E.BX)(la.l0,{autoComplete:"off",noValidate:!0,children:[(0,E.tZ)(Af.X,{dirty:n&&!s&&!u}),(0,E.BX)(yn.Z,{gap:"32px",children:[(0,E.tZ)(d.X,{as:"h2",textStyle:"ds.title.section.large",color:"ds.text.neutral.catchy",children:t(Sv)}),(0,E.tZ)(mv,{fieldArrayName:"domains",domainLoadError:x,refreshDomains:I}),hv||(hv=(0,E.tZ)(z.i,{})),(0,E.tZ)(rn.k,{title:t.markup("team_settings_es_sso_setup_copy_info_to_idp_markup")}),(0,E.BX)(c.k,{flexDirection:"column",gap:"24px",children:[(0,E.tZ)(Qd.x,{"data-testid":"entity-id-input",value:(a=k,a?`${a}/saml/`:""),label:t("team_settings_es_sso_entity_id_label"),disabled:C||!k,readOnly:!0,isLoading:C}),(0,E.tZ)(Qd.x,{"data-testid":"acs-url-input",value:vv(k),label:t("team_settings_es_sso_acs_url_label"),disabled:C||!k,readOnly:!0,isLoading:C})]}),yv||(yv=(0,E.tZ)(z.i,{})),(0,E.BX)(c.k,{flexDirection:"column",gap:"8px",children:[(0,E.tZ)(_.n,{as:"label",htmlFor:"sso-metadata-input",textStyle:"ds.title.section.medium",color:"ds.text.neutral.catchy",children:t("team_settings_es_sso_metadata_label")}),(0,E.tZ)(_.n,{children:t("team_settings_es_sso_metadata_description")})]}),(0,E.tZ)(la.gN,{name:Cv,children:({field:e,meta:{error:t,touched:n}})=>(0,E.tZ)(Dl.K,{"data-testid":"sso-metadata-input",id:"sso-metadata-input",...e,ref:h,error:n&&!!t,feedback:n&&t?t:void 0})}),u?(0,E.tZ)(c.k,{sx:{flexGrow:1,justifyContent:"center"},children:bv||(bv=(0,E.tZ)(Bf,{context:"SSO"}))}):null,(0,E.BX)(c.k,{alignItems:"center",gap:"16px",justifyContent:"end",children:[(0,E.tZ)(D.z,{mood:"neutral",disabled:e,intensity:"quiet",onClick:w,children:t("team_settings_es_sso_setup_cancel")}),(0,E.tZ)(D.z,{mood:"brand",intensity:"catchy",type:"submit",disabled:e,children:t("team_settings_es_sso_setup_save")})]})]})]});var a}})};var Zv=n(73670);const{grey00:kv}=Ce.colors,Dv="team_settings_enable_sso_test_button",Tv=({actionsDisabled:e,ssoServiceProviderUrl:t})=>{const{translate:n}=(0,b.Z)(),a=t?`${t}/saml/login?redirect=test_idp`:"";return(0,E.BX)(Ce.T5p,{gap:"8px",gridTemplateAreas:"'header buttons' 'description buttons' ",gridTemplateColumns:"1fr auto",children:[(0,E.tZ)(Ce.dDn,{as:Ce.nvN,innerAs:"h3",size:"large",bold:!0,gridArea:"header",children:n("team_settings_enable_sso_test_title")}),(0,E.tZ)(Ce.dDn,{gridArea:"description",as:Ce.nvN,size:"small",color:kv,children:n("team_settings_enable_sso_test_description")}),(0,E.BX)(Ce.T5p,{gap:"8px",gridTemplateAreas:"'test copy'",as:Ce.dDn,gridArea:"buttons",children:[(0,E.tZ)(Ce.dDn,{gridArea:"test",children:(0,E.BX)(Zv.M,{onClick:()=>{(0,W.Yo)(a)},size:"medium","aria-label":n(Dv),disabled:null!=e?e:!a,content:n("team_settings_es_sso_setup_incomplete"),children:[n(Dv),(0,E.tZ)(Ce.RTC,{sx:{ml:"4px"},color:"white"})]})}),(0,E.tZ)(Ce.dDn,{gridArea:"copy",children:(0,E.tZ)(xu.q,{buttonText:n("team_settings_copy_sso_url_button"),disabled:null!=e?e:!a,copyValue:null!=a?a:""})})]})]})},Iv=({closeDialog:e})=>{const{translate:t}=(0,b.Z)();return(0,E.tZ)(Ei.o,{isOpen:!0,onRequestClose:()=>e(Ud.dismiss),footer:(0,E.tZ)(Ce.cNS,{primaryButtonTitle:t("team_settings_enable_sso_dialog_disable_action"),primaryButtonOnClick:()=>e(Ud.action),secondaryButtonTitle:t("team_settings_enable_sso_cancel"),secondaryButtonOnClick:()=>e(Ud.dismiss),intent:"danger"}),title:t("team_settings_enable_sso_dialog_disable_title"),children:t("team_settings_enable_sso_dialog_disable_description")})};var Av;const{grey00:wv}=Ce.colors,Ov=({actionsDisabled:e,ssoEnabled:t,updateTeamSettings:n,loading:a})=>{const{translate:i}=(0,b.Z)(),[s,o]=(0,r.useState)(!1),[l,c]=(0,r.useState)(!1),d=(0,ca.V)(),{teamId:_}=(0,Me.fV)(),m=()=>{d.showAlert(t?i("_common_generic_error"):i.markup("team_settings_enable_sso_action_toggle_warning_markup",void 0,{linkTarget:"_blank"}),Ce.BLW.ERROR)};return(0,E.BX)(r.Fragment,{children:[(0,E.BX)(Ce.T5p,{gap:"8px",gridTemplateAreas:"'header buttons' 'description toggle' ",gridTemplateColumns:"1fr auto",children:[(0,E.tZ)(Ce.dDn,{as:Ce.nvN,innerAs:"h3",size:"large",bold:!0,gridArea:"header",children:i("team_settings_enable_sso_action_title")}),(0,E.BX)(Ce.dDn,{gridArea:"description",as:Ce.nvN,size:"small",color:wv,children:[i("team_settings_enable_sso_action_description"),Av||(Av=(0,E.tZ)("br",{})),i("team_settings_enable_sso_action_description_note")]}),(0,E.tZ)(Ce.dDn,{gridArea:"toggle",children:(0,E.tZ)(_S.Z,{disabled:e||a,checked:t,onChange:async()=>{t?o(!0):(c(!0),Tx({ssoSetupStep:u.SsoSetupStep.TurnOnSso}))}})})]}),s?(0,E.tZ)(Iv,{closeDialog:async e=>{if(o(!1),e!==Ud.dismiss&&_)try{const e=!t;await n({ssoEnabled:e})}catch(e){m()}}}):null,l?(0,E.tZ)(Qx,{title:i("team_settings_enable_sso_confirm_dialog_title"),body:i("team_settings_enable_sso_confirm_dialog_body"),primaryActionLabel:i("team_settings_enable_sso_confirm_dialog_primary_action_label"),onCancel:()=>{c(!1)},onConfirm:async()=>{await(async()=>{if(_)try{await n({ssoEnabled:!0}),Tx({ssoSetupStep:u.SsoSetupStep.CompleteSsoSetup})}catch(e){m()}})(),c(!1)}}):null]})};var Nv;const{grey00:Rv}=Ce.colors;var Lv=function(e){return e.UNKNOWN="UNKNOWN",e.LOADING="LOADING",e.COMPLETE="COMPLETE",e.INCOMPLETE="INCOMPLETE",e.NOT_STARTED="NOT_STARTED",e.UNAVAILABLE="UNAVAILABLE",e.ERROR="ERROR",e}(Lv||{});const Bv=({disableSetupButton:e,isSsoCapable:t})=>{const{translate:n}=(0,b.Z)(),{teamId:a}=(0,Me.fV)(),{teamSettings:s={},updateTeamSettings:o,teamSettingsLoading:l}=Be(a),{ssoEnabled:c=!1,ssoServiceProviderUrl:d="",ssoIdpMetadata:_}=s,[u,p]=(0,r.useState)(Lv.UNKNOWN),g=(0,m.k)(wy.y,"ssoProvisioning");(0,r.useEffect)((()=>{p(Lv.LOADING),Le.C.getTeamDomains().then((e=>{if(!e.success)return void p(Lv.ERROR);const t=g.data?.ssoSolution===Oy.WO.enum.confidentialSaml;if(!d||t)return void p(Lv.UNAVAILABLE);const n=e.domains.some((({status:e})=>"valid"===e)),a=e.domains.length>0,i=!!_;switch(!0){case n&&i:p(Lv.COMPLETE);break;case!a&&i||a&&!i||!n&&a&&i:p(Lv.INCOMPLETE);break;case!a&&!i:p(Lv.NOT_STARTED)}}))}),[g.data,_,d]);const h=u===Lv.UNAVAILABLE||l||e,{path:y}=(0,i.$B)(),S=(0,i.k6)(),x=[Lv.COMPLETE,Lv.INCOMPLETE].includes(u);return(0,E.BX)(yn.Z,{children:[(0,E.BX)(Ce.T5p,{gridTemplateAreas:"'header button' 'description button'",gridTemplateColumns:"1fr auto",gap:"8px",children:[(0,E.tZ)(Ce.dDn,{as:Ce.nvN,innerAs:"h3",size:"large",bold:!0,gridArea:"header",children:n("team_settings_es_sso_setup_header")}),(0,E.tZ)(Ce.dDn,{gridArea:"description",as:Ce.nvN,size:"small",color:Rv,children:n("team_settings_es_sso_setup_description")}),(0,E.tZ)(Ce.dDn,{gridArea:"button",alignSelf:"center",children:(0,E.tZ)(Zv.M,{id:"ssoSetupButton",loading:l||u===Lv.LOADING,disabled:h,type:"button",size:"large",onClick:()=>{S.push(`${y}/sso-settings`)},content:n("team_settings_es_sso_setup_configure_es_tooltip"),neverShowTooltip:!t,mood:x?"neutral":"brand",intensity:x?"quiet":"catchy",children:n(x?"team_settings_button_edit_label":"team_settings_es_sso_setup_button")})})]}),x?(0,E.BX)(r.Fragment,{children:[(0,E.tZ)(Tv,{actionsDisabled:u!==Lv.COMPLETE,ssoServiceProviderUrl:d}),Nv||(Nv=(0,E.tZ)("br",{})),(0,E.tZ)(Ov,{actionsDisabled:u!==Lv.COMPLETE,ssoEnabled:c,loading:l,updateTeamSettings:o})]}):null]})};var Mv,Pv,Uv;const Xv=({backRoute:e})=>{const{translate:t}=(0,b.Z)(),{path:n}=(0,i.$B)(),{esConfig:a,esConfigLoading:r,refreshEncryptionServiceConfig:s}=Tf(),{teamId:o}=(0,Me.fV)(),{teamSettings:c,updateTeamSettings:d,teamSettingsLoading:_}=Be(o),{status:p,data:g}=(0,m.k)(wy.y,"ssoProvisioning");if(p!==G.rq.Success)return null;const{ssoSolution:h,ssoStatus:y,global:{ssoCapable:S},enableSSO:{ssoEnabled:x}}=g,f=h===Oy.WO.enum.confidentialSaml&&y===Oy.pI.enum.incomplete,v=!x,C=h===Oy.WO.enum.ssoConnector;return(0,E.tZ)(yf,{title:t("team_settings_es_sso_title"),onBackClicked:()=>{Tx({ssoSetupStep:u.SsoSetupStep.ReturnToSsoSelection}),(0,i.uX)(e)},showBackButton:v,children:(0,E.tZ)(di,{mainContent:(0,E.tZ)(Ce.T5p,{gridTemplateColumns:"auto",gridAutoRows:"min-content",gap:"32px",children:(0,E.BX)(i.rs,{children:[(0,E.BX)(i.AW,{exact:!0,path:n,children:[(0,E.tZ)(Bx,{pageContext:Lx.SelfHosted,onSetupClear:()=>d({ssoServiceProviderUrl:null})}),Mv||(Mv=(0,E.tZ)(Bf,{})),C?(0,E.tZ)(rn.k,{title:t("team_settings_es_sso_migration_infobox_title"),description:t("team_settings_es_sso_migration_infobox_body")}):null,(0,E.tZ)(lv,{loading:r||null===S,esConfig:a,parentPath:n,disableSetupButton:!S||f}),(0,E.tZ)(Bv,{isSsoCapable:S,disableSetupButton:!S||!a?.config})]}),(0,E.tZ)(i.AW,{path:`${n}/encryption-service-settings`,children:r||_?Pv||(Pv=(0,E.tZ)(l.Z,{})):(0,E.tZ)(nv,{migratingFromSSOConnector:C,onSave:()=>s(),teamSettings:c,updateTeamSettings:d,esConfig:a})}),(0,E.tZ)(i.AW,{path:`${n}/sso-settings`,children:Uv||(Uv=(0,E.tZ)(Ev,{}))})]})}),secondaryContent:(0,E.tZ)(kd,{description:t("team_settings_es_sso_setup_guide_description"),heading:t("team_settings_es_sso_setup_guide_heading"),linkText:t("team_settings_es_sso_setup_guide_link_text"),linkProps:{linkType:Zd.ExternalLink,linkHref:"https://support.dashlane.com/hc/articles/360013149040"}})})})},zv=({closeDialog:e})=>{const{translate:t}=(0,b.Z)(),n=t.markup("team_settings_sso_desktop_infobox_warning_markup",{learnMore:me.rh},{linkTarget:"_blank"});return(0,E.tZ)(Ce.VqE,{closeIconName:t("_common_dialog_dismiss_button"),isOpen:!0,onClose:()=>e(Ud.dismiss),children:(0,E.BX)("div",{className:"container--m6KmsQvg_3",children:[(0,E.tZ)(Ce.$N8,{title:t("team_settings_enable_sso_dialog_activate_title")}),(0,E.tZ)(Ce.a7O,{children:(0,E.tZ)("div",{className:"toggleInfoBox--y5TmWAMYcl",children:n&&(0,E.tZ)(Ce.vDh,{severity:"warning",size:"small",title:n})})}),(0,E.tZ)(Ce.cNS,{primaryButtonOnClick:()=>e(Ud.action),primaryButtonTitle:t("team_settings_enable_sso_dialog_activate_action"),secondaryButtonOnClick:()=>e(Ud.dismiss),secondaryButtonTitle:t("team_settings_enable_sso_cancel")})]})})},Fv=({closeDialog:e})=>{const{translate:t}=(0,b.Z)();return(0,E.tZ)(Ei.o,{isOpen:!0,onRequestClose:()=>e(Ud.dismiss),footer:(0,E.tZ)(Ce.cNS,{primaryButtonTitle:t("team_settings_enable_sso_dialog_disable_action"),primaryButtonOnClick:()=>e(Ud.action),secondaryButtonTitle:t("team_settings_enable_sso_cancel"),secondaryButtonOnClick:()=>e(Ud.dismiss),intent:"danger"}),title:t("team_settings_enable_sso_dialog_disable_title"),children:t("team_settings_enable_sso_dialog_disable_description")})},qv=({teamSettings:e,updateTeamSettings:t,teamId:n,planTier:a,setStepComplete:i})=>{var s;const[o,l]=(0,r.useState)(null!=(s=e?.ssoEnabled)&&s),[c,d]=(0,r.useState)(!1),[_,u]=(0,r.useState)(!1),[m,p]=(0,r.useState)([]),[g,h]=(0,r.useState)(!1);(0,r.useEffect)((()=>{if(!o)return"legacy"===a||"team"===a?h(!0):void 0;i(Md.EnableSSO)}),[n,m,o,a,i]),(0,r.useEffect)((()=>{(async()=>{const e=await Le.C.getTeamDomains();e.success&&p(e.domains.filter((e=>"valid"===e.status)).map((e=>e.name)))})()}),[]);const{translate:y}=(0,b.Z)(),S=async e=>{if(u(!1),e!==Ud.dismiss)try{const e=!o;await t({ssoEnabled:e}),l(e)}catch(e){d(!0)}};return(0,E.BX)("div",{className:"enableSSOContainer--VLsANoM8AQ",children:[(0,E.tZ)(Bd,{label:y("team_settings_enable_sso_test_title"),labelHelper:y("team_settings_enable_sso_test_description"),children:(0,E.tZ)(D.z,{mood:"brand",intensity:"catchy",onClick:()=>{(0,W.Yo)(`${e?.ssoServiceProviderUrl}/saml/login?redirect=test_idp`)},disabled:!(e&&e.ssoServiceProviderUrl),children:y("team_settings_enable_sso_test_button")})}),(0,E.tZ)(Bd,{label:y("team_settings_enable_sso_action_title"),labelHelper:y("team_settings_enable_sso_action_description"),children:g?(0,E.tZ)(D.z,{mood:"brand",intensity:"catchy",onClick:()=>(0,W.Yo)(me.Bw),children:y("team_settings_enable_sso_contact_support")}):(0,E.BX)("div",{children:[(0,E.tZ)(Ce.ZDl,{onClick:()=>u(!0),checked:o,disabled:c}),o?(0,E.tZ)("div",{className:"toggleDescription--S3OccP6JDd",children:y("team_settings_enable_sso_action_toggle_description")}):null,c?(0,E.tZ)("div",{className:"toggleWarning--TU8a__FJDp",children:y.markup("team_settings_enable_sso_action_toggle_warning_markup")}):null]})}),_?o?(0,E.tZ)(Fv,{closeDialog:S}):(0,E.tZ)(zv,{closeDialog:S}):null]})};var Gv=n(1234),Vv=n(68197);const jv=({isTeamSettingsLoading:e,teamSettings:t})=>{const{translate:n}=(0,b.Z)(),[a,i]=r.useState(""),[s,o]=r.useState(""),[l,c]=r.useState(""),d=t?.ssoServiceProviderUrl;return r.useEffect((()=>{!e&&d&&(i((0,Vv.UQ)(d,"saml")),o((0,Vv.UQ)(d,"saml/")),c((0,Vv.UQ)(d,"saml/callback")))}),[e,d]),(0,E.BX)("div",{className:"configureIDPContainer--ACoVdM7s0N",children:[(0,E.tZ)(Bd,{label:n("team_settings_configure_idp_connector_metadata"),centerLabel:!0,children:(0,E.tZ)(Gv.x,{inputValue:a,textInputProps:{fullWidth:!0,readOnly:!0}})}),(0,E.tZ)(Bd,{label:n("team_settings_configure_idp_entity_id"),centerLabel:!0,children:(0,E.tZ)(Gv.x,{inputValue:s,textInputProps:{fullWidth:!0,readOnly:!0}})}),(0,E.tZ)(Bd,{label:n("team_settings_configure_idp_login_url"),centerLabel:!0,children:(0,E.tZ)(Gv.x,{inputValue:l,textInputProps:{fullWidth:!0,readOnly:!0}})})]})},Wv=({title:e,children:t})=>(0,E.BX)("div",{sx:{"&:not(:last-child)":{marginBottom:"32px"}},children:[(0,E.tZ)(d.X,{as:"h2",textStyle:"ds.title.section.medium",color:"ds.text.neutral.catchy",sx:{marginBottom:"32px"},children:e}),(0,E.tZ)("div",{sx:{display:"flex",flexDirection:"column",gap:"32px"},children:t})]});var Hv=n(98783),$v=n.n(Hv);const Kv="connectorInfoContainer--e07d9cT8Hu",Yv="textField--Nk7DpcX8Pp",Qv="loading--sfYFOqhXPS",Jv="installerButtonContainer--iP6MNTnQrn",eC="errorText--snbBoX2meA",tC=({keyValue:e,onGenerateClicked:t,isGeneratorDisabled:n,generatorDisabledText:a})=>{const{translate:i}=(0,b.Z)(),[s,o]=(0,r.useState)(!1),l=(0,r.useRef)(null);return(0,r.useEffect)((()=>{l.current&&new($v())(l.current,{text:()=>e})}),[e]),(0,E.tZ)(Bd,{label:i("team_settings_connector_generator_title"),labelHelper:i("team_settings_connector_generator_description"),children:(0,E.tZ)("div",{className:"generatorContainer--_83Buo4tVF",children:(0,E.tZ)(Ce.ua7,{content:a,passThrough:!n,sx:{maxWidth:"210px"},children:(0,E.BX)("div",{className:n?"generatorDisableContent--Olv4UpdAqY":"",children:[(0,E.tZ)(Ce.zxk,{type:"button","aria-describedby":"errorKeyWarning",className:"generatorButton--I0z2qEK25R",onClick:()=>{o(!0),t()},disabled:n,children:i("team_settings_connector_generator_button")}),(0,E.tZ)("div",{className:"generatorInputContainer--M4lkXUrCCY",children:(0,E.tZ)(Gv.x,{inputValue:e,textInputProps:{readOnly:!0,fullWidth:!0,disabled:n,style:{cursor:n?"not-allowed":"text"}},tooltipProps:{passThrough:n},iconButtonProps:{disabled:n}})}),s&&(0,E.tZ)("p",{id:"errorKeyWarning",className:eC,children:i("team_settings_connector_generator_warning")})]})})})})},nC="team_settings_connector_installer_tooltip",aC=({isTeamSettingsLoading:e,isSsoEnabled:t,idpMetadata:n,connectorUrl:a})=>{const{translate:i}=(0,b.Z)(),[s,o]=(0,r.useState)(""),[l,c]=(0,r.useState)("");(0,r.useEffect)((()=>{o("")}),[n,a]);const d=Boolean(n&&a&&(l||t));return(0,E.BX)(r.Fragment,{children:[(0,E.tZ)(tC,{keyValue:l,onGenerateClicked:async()=>{const e=await Le.C.generateSSOConnectorKey();c(e)},isGeneratorDisabled:t,generatorDisabledText:i("team_settings_connector_generator_instance_help")}),(0,E.tZ)(Bd,{label:i("team_settings_connector_installer_title"),labelHelper:i("team_settings_connector_installer_description"),children:(0,E.tZ)("div",{className:e?Qv:Jv,children:(0,E.BX)(Ce.ua7,{content:i(nC),passThrough:d,sx:{maxWidth:"210px"},children:[(0,E.BX)(D.z,{type:"button","aria-describedby":"configError",disabled:!d,onClick:async()=>{o("");const e=await Le.C.createSSOConnectorConfig({connectorUrl:a,connectorKey:l,idpMetadata:n});e.success?(0,_o.S)(e.config,"dashlane-sso-config.txt","text/plain"):e.success||o(e.error.code)},children:[(0,E.tZ)("div",{className:"downloadIcon--dtf6SHkd51",children:(0,E.tZ)(Ce._8t,{color:Od()["--white"]})}),i("team_settings_connector_installer_config_button")]}),s?(0,E.tZ)("p",{id:"configError",className:eC,children:i("team_settings_connector_installer_error")}):null]})})}),(0,E.tZ)(Bd,{label:i("team_settings_connector_installer_setup_title"),labelHelper:i("team_settings_connector_installer_setup_description"),children:(0,E.tZ)("div",{className:e?Qv:Jv,children:(0,E.tZ)(Ce.ua7,{content:i(nC),passThrough:d,sx:{maxWidth:"210px"},children:(0,E.BX)(D.z,{type:"button",disabled:!d,onClick:()=>(0,W.Yo)(me.nC),children:[(0,E.tZ)("div",{className:"openIcon--Jft6n3KJTS",children:(0,E.tZ)(Ce.RTC,{color:Od()["--white"]})}),i("team_settings_connector_installer_button")]})})})})]})},iC="team_settings_connector_edit",rC="team_settings_connector_save",sC="team_settings_connector_saving",oC="team_settings_connector_success",lC=({isTeamSettingsLoading:e,saveConnectorURL:t,saveIdpMetadata:n,teamSettings:a})=>{var i,s;const{translate:o}=(0,b.Z)();return(0,E.BX)(r.Fragment,{children:[(0,E.tZ)(Bd,{label:o("team_settings_connector_metadata_title"),children:(0,E.tZ)("div",{className:Kv,children:(0,E.tZ)(ES.X,{isDisabled:e,multiLine:!0,defaultValue:null!=(i=a?.ssoIdpMetadata)?i:"",saveBtnLabel:o(rC),savingBtnLabel:o(sC),editBtnLabel:o(iC),placeholder:o("team_settings_connector_metadata_placeholder"),successMessage:o(oC),onSave:n,inputFieldClassName:"inputField--SXqAbTX3lX",textFieldClassName:Yv})})}),(0,E.tZ)(Bd,{label:o("team_settings_connector_url_title"),labelHelper:o("team_settings_connector_url_description"),children:(0,E.tZ)("div",{className:Kv,children:(0,E.tZ)(ES.X,{isDisabled:e,defaultValue:null!=(s=a?.ssoServiceProviderUrl)?s:"",saveBtnLabel:o(rC),savingBtnLabel:o(sC),editBtnLabel:o(iC),placeholder:o("team_settings_connector_url_placeholder"),successMessage:o(oC),onSave:t,textFieldClassName:Yv})})})]})},cC=({setStepComplete:e,isTeamSettingsLoading:t=!1,teamSettings:n,updateTeamSettings:a})=>{var i,s,o;const{translate:l}=(0,b.Z)(),c=r.useCallback((async e=>{try{await a({ssoIdpMetadata:e})}catch(e){throw Error(l("team_settings_connector_metadata_error"))}}),[a,l]),d=r.useCallback((async e=>{try{const t=e?(0,Vv.Yw)(e):null;await a({ssoServiceProviderUrl:t})}catch(e){throw Error(l("team_settings_connector_url_error"))}}),[a,l]),_=n?.ssoServiceProviderUrl,u=n?.ssoIdpMetadata;return r.useEffect((()=>{t||u&&_&&e(Md.SSOConnector)}),[t,_,u,e]),(0,E.BX)("div",{className:"ssoConnectorContainer--ndf4jAvwn0",children:[(0,E.tZ)(lC,{isTeamSettingsLoading:t,teamSettings:n,saveConnectorURL:d,saveIdpMetadata:c}),(0,E.tZ)(aC,{isTeamSettingsLoading:t,isSsoEnabled:null!=(i=n?.ssoEnabled)&&i,idpMetadata:null!=(s=n?.ssoIdpMetadata)?s:"",connectorUrl:null!=(o=n?.ssoServiceProviderUrl)?o:""})]})},dC=({lee:e})=>{const{translate:t}=(0,b.Z)(),[n,a]=(0,r.useState)(new Set),[i,s]=(0,r.useState)(new Set),[o,l]=(0,r.useState)(new Set([Pd.EnableSSO,Pd.SSOConnector]));(0,r.useEffect)((()=>{(0,y.Nc)(u.PageView.TacSettingsSsoLegacy)}),[]),(0,r.useEffect)((()=>{const e=new Set,t=new Set([Pd.EnableSSO,Pd.ConfigureIDP,Pd.SSOConnector]);n.has(Md.ClaimDomain)&&n.has(Md.VerifyDomain)&&(e.add(Pd.SSOConnector),e.add(Pd.ConfigureIDP),e.add(Pd.EnableSSO),t.delete(Pd.SSOConnector),t.delete(Pd.ConfigureIDP),t.delete(Pd.EnableSSO)),n.has(Md.EnableSSO)&&(e.delete(Pd.SSOConnector),e.delete(Pd.ConfigureIDP)),s(e),l(t)}),[n]);const c=(0,r.useCallback)((e=>{a((t=>{const n=e=>e.every((e=>t.has(e)));let a=!0;switch(e){case Md.EnableSSO|Md.VerifyDomain:a=!0;break;case Md.SSOConnector:a=n([Md.ClaimDomain,Md.VerifyDomain]);break;case Md.EnableSSO:a=n([Md.ClaimDomain,Md.VerifyDomain,Md.SSOConnector])}return a&&!t.has(e)?new Set([...t,e]):t}))}),[]),_=(0,r.useCallback)((e=>{a((t=>{const n=new Set(t);return e.forEach((e=>{n.delete(e)})),n}))}),[]),m=(0,N.ev)(e.globalState),{teamSettingsLoading:p,teamSettings:g,updateTeamSettings:h,planTier:S}=Be(m),x=[{label:t("team_settings_sso_connector_title"),component:cC,locked:o.has(Pd.SSOConnector),open:i.has(Pd.SSOConnector),index:2},{label:t("team_settings_sso_identity_provider_title"),component:jv,locked:o.has(Pd.ConfigureIDP),open:i.has(Pd.ConfigureIDP),index:3},{label:t("team_settings_sso_enable_title"),component:qv,locked:o.has(Pd.EnableSSO),open:i.has(Pd.EnableSSO),index:4}];return(0,E.tZ)("div",{sx:{minHeight:"100%",minWidth:"1116px",padding:"32px 48px"},children:(0,E.BX)("div",{sx:{display:"flex",flexDirection:"column",maxWidth:"74em"},children:[(0,E.tZ)(d.X,{as:"h1",textStyle:"ds.title.section.large",color:"ds.text.neutral.catchy",sx:{marginBottom:"32px"},children:t("team_settings_menu_title_single_sign_on")}),(0,E.BX)("div",{sx:{display:"inline-block",backgroundColor:"ds.container.agnostic.neutral.supershy",padding:"32px",marginBottom:"10px",flex:"1",borderRadius:"8px"},children:[(()=>{if(!g||g.ssoEnabled)return null;if("team"===S||"legacy"===S){const e=t.markup("team_settings_sso_teamplan_infobox_warning_markup"),n=t("team_settings_sso_teamplan_infobox_warning_button");return(0,E.tZ)("div",{className:"infoBox--w1PtJInNuc",children:(0,E.tZ)(Ce.vDh,{title:e,size:"simple",secondaryLabel:n,secondary:()=>(0,W.Yo)(me.Bw)})})}return null})(),(0,E.BX)(Wv,{title:t("team_settings_sso_title"),children:[(0,E.tZ)(Bd,{label:t("team_settings_sso_guide_title"),labelHelper:t("team_settings_sso_guide_description"),children:(0,E.tZ)(D.z,{onClick:()=>{(0,W.Yo)(me.nC)},mood:"brand",intensity:"catchy",children:t("team_settings_sso_setup_button")})}),(0,E.tZ)(Vd,{isTeamSettingsLoading:p,teamSettings:g,setStepComplete:c,uncompleteSteps:_,updateTeamSettings:h,teamId:m,planTier:S})]})]}),p?(0,E.tZ)(Ai.Z,{containerClassName:"loadingContainer--Qcn7EL4GD5",size:40}):(0,E.tZ)(Ce.UQy,{size:"large",children:x.map((e=>(0,E.BX)(Ce.UlM,{open:e.open,readOnly:e.locked,children:[(0,E.tZ)(Ce._Oh,{children:`${e.index}. ${e.label}`}),(0,E.tZ)(Ce.rN7,{children:(0,E.tZ)("fieldset",{disabled:e.locked,children:(0,E.tZ)(e.component,{isTeamSettingsLoading:p,teamSettings:g,setStepComplete:c,updateTeamSettings:h,teamId:null!=m?m:null,planTier:null!=S?S:null})})})]},e.label)))})]})})},_C={title:"tac_settings_choose_sso_card_self_hosted_title",redirectUrl:"self-hosted-sso",supportedFeatures:[{title:"tac_settings_sso_self_hosted_card_zero_knowledge",description:"",isSupported:!0,iconName:"FeedbackSuccessOutlined"},{title:"tac_settings_sso_self_hosted_card_simplified_setup",description:"tac_settings_sso_self_hosted_card_not_simplified_setup_description",isSupported:!1,iconName:"FeedbackFailOutlined"},{title:"tac_settings_sso_self_hosted_card_verified_domain",description:"",isSupported:!0,iconName:"FeedbackSuccessOutlined"},{title:"tac_settings_sso_self_hosted_card_scim_support",description:"",isSupported:!0,iconName:"FeedbackSuccessOutlined"}]},uC={title:"tac_settings_choose_sso_card_nitro_title",redirectUrl:"confidential-sso",supportedFeatures:[{title:"tac_settings_sso_self_hosted_card_zero_knowledge",description:"",isSupported:!0,iconName:"FeedbackSuccessOutlined"},{title:"tac_settings_sso_self_hosted_card_simplified_setup",description:"tac_settings_sso_nitro_card_simplified_setup_description",isSupported:!0,iconName:"FeedbackSuccessOutlined"},{title:"tac_settings_sso_self_hosted_card_verified_domain",description:"",isSupported:!0,iconName:"FeedbackSuccessOutlined"},{title:"tac_settings_sso_self_hosted_card_scim_support",description:"",isSupported:!0,iconName:"FeedbackSuccessOutlined"}]},mC={title:"tac_settings_choose_sso_card_sso_connector_title",redirectUrl:"sso-connector",supportedFeatures:[{title:"tac_settings_sso_self_hosted_card_zero_knowledge",description:"",isSupported:!0,iconName:"FeedbackSuccessOutlined"},{title:"tac_settings_sso_self_hosted_card_simplified_setup",description:"tac_settings_sso_self_hosted_card_not_simplified_setup_description",isSupported:!1,iconName:"FeedbackFailOutlined"},{title:"tac_settings_sso_self_hosted_card_verified_domain",description:"",isSupported:!1,iconName:"FeedbackFailOutlined"},{title:"tac_settings_sso_self_hosted_card_scim_support",description:"",isSupported:!1,iconName:"FeedbackFailOutlined"}]},pC=({title:e,description:t,isSupported:n,iconName:a,disabled:i=!1})=>{const{translate:r}=(0,b.Z)();return(0,E.BX)(c.k,{gap:"8px",flexWrap:"nowrap",alignItems:"flex-start",children:[(0,E.tZ)(Qi.v,{name:a,mood:i?"neutral":!1===n?"danger":"brand"}),(0,E.BX)(c.k,{flexDirection:"column",gap:"4px",children:[(0,E.tZ)(_.n,{textStyle:"ds.body.standard.regular",color:i?"ds.text.oddity.disabled":"ds.text.neutral.catchy",children:r(e)}),t?(0,E.tZ)(_.n,{textStyle:"ds.body.helper.regular",color:i?"ds.text.oddity.disabled":"ds.text.neutral.quiet",children:r(t)}):null]})]})},gC=({title:e,redirectUrl:t,optionNumber:n,supportedFeatures:a,buttonLabel:r,onCtaClick:s,disabled:o=!1,selected:l=!1,featureCardStatus:u="NOT_STARTED",ctaDataTestId:m,setBusinessPlanBadge:p=!1})=>{const{translate:g}=(0,b.Z)(),h=(0,i.k6)(),y=`${(0,i.$B)().path}/${t}`;return(0,E.tZ)(yn.Z,{sx:{borderColor:l?"ds.border.brand.standard.idle":"ds.border.neutral.quiet.idle",backgroundColor:"ds.container.agnostic.neutral.supershy",width:"100%"},children:(0,E.BX)(Ce.T5p,{gridTemplateAreas:"'business business' 'option badge' 'title title' 'body body' 'button button'",children:[p?(0,E.tZ)(Ce.dDn,{gridArea:"business",sx:{marginBottom:"8px"},children:(0,E.tZ)(pe.C,{iconName:"PremiumOutlined",layout:"iconLeading",label:g("team_settings_sso_paywall_business_badge"),mood:"brand",intensity:"quiet"})}):null,n&&(0,E.tZ)(Ce.dDn,{gridArea:"option",sx:{marginBottom:"8px"},children:(0,E.tZ)(_.n,{color:o?"ds.text.oddity.disabled":"ds.text.neutral.quiet",textStyle:"ds.body.helper.regular",children:`${g("tac_settings_directory_sync_card_option")} ${n}`})}),"ACTIVATED"===u||"STARTED"===u?(0,E.tZ)(Ce.dDn,{gridArea:"badge",justifySelf:"right",children:(0,E.tZ)(pe.C,{mood:"ACTIVATED"===u?"positive":"warning",intensity:"catchy",label:g("ACTIVATED"===u?"tac_settings_directory_sync_card_badge_enabled":"tac_settings_feature_card_badge_configuration_not_completed")})}):null,(0,E.tZ)(Ce.dDn,{gridArea:"title",sx:{marginBottom:"32px"},children:(0,E.tZ)(d.X,{as:"h3",textStyle:"ds.title.section.medium",color:o?"ds.text.oddity.disabled":"ds.text.neutral.catchy",sx:{display:"inline-block"},children:g(e)})}),(0,E.tZ)(Ce.dDn,{gridArea:"body",children:(0,E.tZ)(c.k,{gap:"32px",flexDirection:"column",sx:{marginBottom:"32px"},children:a.map((e=>(0,E.tZ)(pC,{disabled:o,...e},n+e.title)))})}),(0,E.tZ)(Ce.dDn,{gridArea:"button",justifySelf:"right",children:p?(0,E.tZ)(D.z,{role:"button",onClick:()=>s?.(),disabled:o,intensity:"catchy",layout:"iconLeading",icon:"PremiumOutlined",children:r}):(0,E.tZ)(D.z,{role:"button",onClick:()=>{s?.(),h.push(y)},disabled:o,intensity:"catchy","data-testid":m,children:r})})]})})},hC={CouldNotGetTeamStatus:"COULD_NOT_GET_TEAM_STATUS",TeamIdNotFound:"TEAM_ID_NOT_FOUND",UserNotAuthorized:"USER_NOT_AUTHORIZED",InvalidSsoState:"INVALID_SSO_STATE",GenericSsoError:"GENERIC_SSO_ERROR"},yC={ERROR_HEADER:"team_settings_sso_error_header",RETRY:"team_settings_sso_error_button_retry",COULD_NOT_GET_TEAM_STATUS:"team_settings_sso_error_message_team_status",TEAM_ID_NOT_FOUND:"team_settings_sso_error_message_team_id",USER_NOT_AUTHORIZED:"team_settings_sso_error_message_not_authorized",INVALID_SSO_STATE:"team_settings_sso_error_message_invalid_sso_state",GENERIC_SSO_ERROR:"team_settings_sso_error_message_generic"},bC=({errorTag:e=hC.GenericSsoError})=>{const{translate:t}=(0,b.Z)();return(0,E.BX)(c.k,{alignItems:"center",justifyContent:"center",fullWidth:!0,gap:"40px",sx:{mt:"20vh",flexDirection:"column"},children:[(0,E.tZ)(T.JO,{name:"FeedbackFailOutlined",color:"ds.text.danger.quiet",sx:{height:"64px",width:"64px"}}),(0,E.BX)(c.k,{alignItems:"center",flexDirection:"column",gap:"8px",children:[(0,E.tZ)(d.X,{textStyle:"ds.title.section.large",as:"h1",children:t(yC.ERROR_HEADER)}),e?(0,E.tZ)(_.n,{children:t(yC[hC[e]])}):null]})]})};var SC=n(52477);const xC=({backgroundColor:e,withBorder:t,paddingSize:n="normal",...a})=>(0,E.tZ)("div",{sx:{bg:null!=e?e:"ds.container.agnostic.neutral.quiet",p:"tight"===n?"24px":"32px 24px",border:t?"1px solid #8C8F9033":void 0,borderRadius:3,height:"fit-content"},...a}),fC=({isSsoConnector:e})=>{const{translate:t}=(0,b.Z)(),[n,a]=(0,r.useState)(!1),{migrateToConfidentialSso:i}=(0,te.u)(wy.y),{showToast:s}=(0,o.p)(),l=(0,r.useRef)(null);return(0,E.BX)(Ce.T5p,{as:xC,backgroundColor:"ds.background.default",paddingSize:"normal",gridTemplateRows:"auto 1fr auto",justifyItems:"center",gap:"8px",children:[e?(0,E.tZ)(Tn.n,{ref:l,label:t("migrate_to_confidential_sso_input_label"),sx:{width:"400px"}}):null,(0,E.tZ)(D.z,{layout:"iconLeading",icon:"ToolsOutlined",isLoading:n,onClick:async()=>{try{a(!0);const e=await i({ssoConnectorKey:l.current?.value.trim()});if((0,ne.hx)(e)){const n=(0,SC.EQ)(e.error,{SSO_CONNECTOR_KEY_MISSING:()=>t("migrate_to_confidential_sso_connector_key_missing"),SSO_CONNECTOR_KEY_FORMAT_INVALID:()=>t("migrate_to_confidential_sso_connector_key_format_invalid")});s({description:n,closeActionLabel:t("_common_toast_close_label"),mood:"danger"})}else s({description:t("migrate_to_confidential_sso_success"),closeActionLabel:t("_common_toast_close_label")})}catch{s({description:t("migrate_to_confidential_sso_error"),closeActionLabel:t("_common_toast_close_label"),mood:"danger"})}finally{a(!1)}},children:t("migrate_to_confidential_sso_migrate_button_label")})]})};var vC,CC;const EC=()=>{const{translate:e}=(0,b.Z)(),[t,n]=(0,r.useState)(!0),a=(0,h.s)(),i=(0,q._)(),s=(0,m.k)(wy.y,"ssoProvisioning"),o=(0,m.k)(Ay.m,"scimConfiguration");(0,r.useEffect)((()=>{(0,y.Nc)(u.Page.TacSso)}),[]);const{ssoMigrationFF:c,ssoConnectorCardFF:d,confidentialSSOMigrationFF:_}=(()=>{if(i.status!==G.rq.Success)return{};const{itadmin_tac_encryptionservice_SSOmigration_reset:e,setup_rollout_web_ssoconnector_card:t,setup_rollout_confidential_migration:n}=i.data;return{ssoMigrationFF:null!=e&&e,ssoConnectorCardFF:null!=t&&t,confidentialSSOMigrationFF:null!=n&&n}})();if((0,r.useEffect)((()=>{i.status===G.rq.Success&&a&&s.status===G.rq.Success&&o.status===G.rq.Success&&n(!1)}),[a,s.status,o.status,i]),t)return(0,E.tZ)(Ce.T5p,{justifyItems:"center",children:(0,E.tZ)(l.Z,{size:75,sx:{marginTop:"20vh"}})});var p;if(s.status===G.rq.Error||o.status===G.rq.Error)return(0,E.tZ)(bC,{errorTag:null!=(p=s.error?.tag)?p:o.error?.tag});if(s.status!==G.rq.Success||o.status!==G.rq.Success||!a)return null;const{ssoSolution:g,ssoStatus:S,global:{ssoCapable:x}}=s.data,f=!x,v=g===Oy.WO.enum.selfHostedSaml,C=g===Oy.WO.enum.confidentialSaml,Z=g===Oy.WO.enum.ssoConnector||d;return(0,E.BX)(Ce.T5p,{gap:"16px",alignContent:"start",sx:{px:"48px",pt:"32px",pb:"12px"},children:[(0,E.BX)(Ce.T5p,{fullWidth:!0,gap:"24px",gridTemplateColumns:Z?"1fr 1fr 1fr":"1fr 1fr",children:[(0,E.tZ)(gC,{selected:C,optionNumber:1,...uC,buttonLabel:e(C?"tac_settings_choose_sso_confidential_card_button_edit":"tac_settings_choose_sso_confidential_card_button_setup"),disabled:f||g===Oy.WO.enum.selfHostedSaml&&S===Oy.pI.enum.enabled||Z,featureCardStatus:g===Oy.WO.enum.confidentialSaml&&S===Oy.pI.enum.enabled?"ACTIVATED":g===Oy.WO.enum.confidentialSaml&&S===Oy.pI.enum.incomplete?"STARTED":"NOT_STARTED",onCtaClick:()=>{Ix({currentBillingPlanTier:a.spaceTier,ssoSetupStep:u.SsoSetupStep.ChooseYourSsoSolution})}}),(0,E.tZ)(gC,{optionNumber:2,..._C,selected:v,buttonLabel:e(v?"tac_settings_choose_sso_self_hosted_card_button_edit":"tac_settings_choose_sso_self_hosted_card_button_setup"),disabled:f||g===Oy.WO.enum.confidentialSaml||!!o.data.token||Z&&!c,featureCardStatus:g===Oy.WO.enum.selfHostedSaml&&S===Oy.pI.enum.enabled?"ACTIVATED":g===Oy.WO.enum.selfHostedSaml&&S===Oy.pI.enum.incomplete?"STARTED":"NOT_STARTED",onCtaClick:()=>{Tx({currentBillingPlanTier:a.spaceTier,ssoSetupStep:u.SsoSetupStep.ChooseYourSsoSolution})}}),Z?(0,E.tZ)(gC,{optionNumber:3,...mC,buttonLabel:e("tac_settings_choose_sso_sso_connector_card_button_edit"),disabled:C||v,featureCardStatus:"ACTIVATED"}):null]}),_?(0,E.tZ)(fC,{isSsoConnector:Z}):null]})},ZC=()=>{const{translate:e}=(0,b.Z)();return(0,E.BX)(Ce.T5p,{gridTemplateColumns:"auto",gridTemplateRows:"auto 1fr",fullWidth:!0,sx:{height:"100%"},children:[(0,E.BX)(Ce.T5p,{sx:{px:"48px",pt:"32px",pb:"12px"},children:[(0,E.tZ)(qo,{title:"Choose your single sign-on (SSO) configuration"}),(0,E.tZ)(_.n,{textStyle:"ds.body.standard.regular",children:e("choose_sso_screen_paragraph_sso_description")}),(0,E.BX)("div",{sx:{display:"flex",alignItems:"center"},children:[(0,E.BX)(_.n,{as:"a",href:"https://support.dashlane.com/hc/en-us/articles/360013149040",textStyle:"ds.body.standard.regular",color:"ds.text.brand.quiet",sx:{padding:"5px 5px 5px 0px",gap:"4px"},children:[" ",e("choose_sso_screen_link_lean_more")]}),vC||(vC=(0,E.tZ)(T.JO,{name:"ActionOpenExternalLinkOutlined",size:"small",color:"ds.text.brand.quiet"}))]})]}),CC||(CC=(0,E.tZ)(EC,{}))]})},kC=({openContactDialog:e})=>{const{translate:t}=(0,b.Z)();return(0,E.tZ)(kd,{supportHeading:t("team_settings_contact_us_support_header"),heading:t("team_settings_contact_us_heading"),description:t("team_settings_contact_us_description"),linkText:t("team_settings_contact_us_link_title"),linkProps:{linkType:Zd.InternalLink,internalAction:e}})};var DC=n(85993);const TC={ITEM:{display:"flex",flexDirection:"row",alignItems:"flex-start",gap:"16px"}},IC=({iconName:e,title:t,subtitle:n})=>{const{translate:a}=(0,b.Z)();return(0,E.BX)("div",{sx:TC.ITEM,children:[(0,E.tZ)(Qi.v,{name:e,mood:"brand"}),(0,E.BX)("div",{children:[(0,E.tZ)(_.n,{textStyle:"ds.title.block.medium",sx:{marginBottom:"5px"},children:a(t)}),(0,E.tZ)(_.n,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.quiet",children:a(n)})]})]})},AC={CONTAINER:{borderRadius:"8px",border:"1px solid ds.border.neutral.quiet.idle",padding:"32px",backgroundColor:"ds.background.default",display:"flex",flexDirection:"column",alignItems:"flex-start"},HEADER:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"8px",alignSelf:"stretch"},ITEMS:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"32px",alignSelf:"stretch"},ACTIONS:{display:"flex",justifyContent:"space-between",alignItems:"center",alignSelf:"stretch"}},wC=({isTrialOrGracePeriod:e})=>{const{translate:t}=(0,b.Z)(),{routes:n}=(0,i.Xo)(),a=(0,Oe.U)(),r={WHATS_SSO:{label:t("team_settings_sso_paywall_whats_sso"),url:me.Tz},ZERO_KNOWLEDGE:{label:t("team_settings_sso_paywall_zero_knowledge"),url:me.mn},MULTI_DOMAINS:{label:t("team_settings_sso_paywall_multi_domains"),url:me.I9},SELF_HOSTED:{label:t("team_settings_sso_paywall_self_hosted"),url:me.bx},CONFIDENTIAL_SSO:{label:t("team_settings_sso_paywall_confidential_sso"),url:me.Fn},IDENTITY_PROVIDER:{label:t("team_settings_sso_paywall_identity_provider"),url:me.HX},HELP_CENTER:{label:t("team_settings_sso_paywall_helper_center"),url:me.Tx}};return(0,E.BX)(Ce.T5p,{gap:"32px",alignContent:"start",sx:AC.CONTAINER,children:[(0,E.BX)("div",{sx:AC.HEADER,children:[(0,E.tZ)(pe.C,{iconName:"PremiumOutlined",layout:"iconLeading",label:t("team_settings_sso_paywall_business_badge"),mood:"brand",intensity:"quiet"}),(0,E.tZ)(_.n,{textStyle:"ds.title.section.large",children:t("team_settings_sso_paywall_title")}),(0,E.tZ)(_.n,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",children:t("team_settings_sso_paywall_description")})]}),(0,E.BX)("div",{sx:AC.ITEMS,children:[(0,E.tZ)(IC,{iconName:"ProtectionOutlined",title:"team_settings_sso_paywall_user_experience_item",subtitle:"team_settings_sso_paywall_user_experience_description"}),(0,E.tZ)(IC,{iconName:"FeatureDarkWebMonitoringOutlined",title:"team_settings_sso_paywall_transparency_item",subtitle:"team_settings_sso_paywall_transparency_description"}),(0,E.tZ)(IC,{iconName:"AccountSettingsOutlined",title:"team_settings_sso_paywall_access_item",subtitle:"team_settings_sso_paywall_access_description"}),(0,E.tZ)(IC,{iconName:"ToolsOutlined",title:"team_settings_sso_paywall_confidential_sso_item",subtitle:"team_settings_sso_paywall_confidential_sso_description"})]}),(0,E.BX)("div",{sx:AC.ACTIONS,children:[(0,E.tZ)(DC.a,{dropdownItems:r,title:t("team_settings_sso_paywall_learn_more")}),(0,E.tZ)(D.z,{mood:"brand",intensity:"catchy",icon:"PremiumOutlined",layout:"iconLeading",role:e?"link":void 0,onClick:()=>{(0,y.Kz)(new u.UserClickEvent({button:u.Button.UpgradeBusinessTier,clickOrigin:u.ClickOrigin.SsoPaywallPage})),e?(0,W.Yo)(`${me.ub}?plan=business&subCode=${null!=a?a:""}&utm_source=button:upgrade_business_tier+click_origin:sso_paywall_page+origin_page:tac/sso/paywall+origin_component:main_app`):(0,i.uX)(`${n.teamAccountChangePlanRoutePath}?plan=business`)},children:t("team_settings_sso_paywall_upgrade_business")})]})]})},OC=({isTrialOrGracePeriod:e})=>{const[t,n]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{(0,y.Nc)(u.PageView.TacSsoPaywall)}),[]),(0,E.BX)(r.Fragment,{children:[(0,E.tZ)(di,{mainContent:(0,E.tZ)(Ce.T5p,{gridTemplateColumns:"auto",gridAutoRows:"min-content",gap:"32px",children:(0,E.tZ)(wC,{isTrialOrGracePeriod:e})}),secondaryContent:(0,E.tZ)(kC,{openContactDialog:()=>n(!0)})}),t?(0,E.tZ)(ue.cZ,{onDismiss:()=>n(!1)}):null]})};var NC;const RC="/sso-connector",LC="/self-hosted-sso",BC="/confidential-sso",MC="/paywall",PC=({lee:e})=>{var t;const n=(0,i.$B)(),{data:a}=(0,m.k)(wy.y,"ssoProvisioning"),r=a?.ssoSolution,s=r===Oy.WO.enum.confidentialSaml||r===Oy.WO.enum.ssoConnector,o=r===Oy.WO.enum.selfHostedSaml||r===Oy.WO.enum.ssoConnector,{shouldShowBuyOrUpgradePaywall:l,isTrialOrGracePeriod:c,planType:d}=null!=(t=Ne(e.permission.adminAccess))?t:{},_=d===g.lD.Standard,u=l&&(d===g.lD.Starter||d===g.lD.Team||_);return(0,E.BX)(i.rs,{children:[(0,E.tZ)(i.AW,{path:`${n.path}${LC}`,children:s?(0,E.tZ)(i.l_,{to:n.path}):(0,E.tZ)(Xv,{backRoute:n.url})}),(0,E.tZ)(i.AW,{path:`${n.path}${BC}`,children:o?(0,E.tZ)(i.l_,{to:n.path}):(0,E.tZ)(Df,{backRoute:n.url})}),(0,E.tZ)(i.AW,{path:`${n.path}${MC}`,children:(0,E.tZ)(OC,{isTrialOrGracePeriod:null!=c&&c})}),(0,E.tZ)(i.AW,{path:`${n.path}${RC}`,children:(0,E.tZ)(dC,{lee:e})}),(0,E.tZ)(i.AW,{exact:!0,path:n.path,children:u?(0,E.tZ)(i.l_,{to:`${n.path}${MC}`}):NC||(NC=(0,E.tZ)(ZC,{}))})]})};var UC=n(58480);const XC=({accountInfo:e})=>{const{translate:t}=(0,b.Z)(),{routes:n}=(0,i.Xo)(),a=(0,Oe.U)();return e?.premiumStatus?(0,E.tZ)(rn.k,{title:t("team_settings_active_directory_paywall_title"),description:t("team_settings_active_directory_paywall_description"),actions:[(0,Ue.wt)(e.premiumStatus)?(0,E.tZ)(D.z,{onClick:()=>{(0,y.Kz)(new u.UserClickEvent({button:u.Button.UpgradeBusinessTier,clickOrigin:u.ClickOrigin.DirectorySyncPaywallPage})),(0,W.Yo)(`${me.ub}?plan=business&subCode=${null!=a?a:""}`)},children:t("team_settings_active_directory_paywall_buy")},"buy"):(0,E.tZ)(i.rU,{to:`${n.teamAccountChangePlanRoutePath}?plan=business`,children:(0,E.tZ)(D.z,{children:t("team_settings_active_directory_paywall_upgrade")})},"upgrade")],size:"large",sx:{marginBottom:"32px"}}):null};var zC;const FC="_common_generic_error",qC=({lee:e,disableForm:t,adSyncEnabled:n,isAdSyncCapable:a,accountInfo:i})=>{const{translate:s}=(0,b.Z)(),o=(0,Pe.o)(v_.G.WebOnboardingInviteLinkTacMigration),c=Cu(),d=c.status===G.rq.Success?c.teamKey:void 0,{reportTACError:m}=se(),{lastADSyncDateError:p,lastADSyncDateLoading:g,lastADSyncDate:h}=function(){const[e,t]=(0,r.useState)(!1),[n,a]=(0,r.useState)(),[i,s]=(0,r.useState)(null),o=(0,r.useCallback)((async e=>{try{e.signal.aborted||t(!0);const n=await async function(){const e=await Le.C.getLastADSyncDate();if(e.success)return{lastSyncRequestForTeamUnix:e.data.lastSyncRequestForTeam,lastSuccessfulSyncRequestForTeamUnix:e.data.lastSuccessfulSyncRequestForTeam};throw new Error(`getScimLastSyncDate: failed with error ${e.error}`)}();e.signal.aborted||(a(n),t(!1),s(null))}catch(n){e.signal.aborted||(t(!1),s(n))}}),[]);return(0,r.useEffect)((()=>{const e=new AbortController;return o(e),()=>{e.abort()}}),[o]),{lastADSyncDateLoading:e,lastADSyncDate:n,lastADSyncDateError:i}}(),S=s.shortDate,[x,f]=(0,r.useState)(!0),[v,C]=(0,r.useState)(!1),[Z,k]=(0,r.useState)(!1),[T,I]=(0,r.useState)(!1),[A,w]=(0,r.useState)(!1),{inviteLinkDataForAdmin:O,getInviteLinkDataForAdmin:N}=yu(),[R,L]=(0,r.useState)(!1),[B,M]=(0,r.useState)(void 0),{teamId:P}=(0,Me.fV)(),{teamSettings:U,teamSettingsLoading:X,updateTeamSettings:z}=Be(P),F=(0,r.useCallback)((()=>e.apiMiddleware.teamPlans?e.apiMiddleware.teamPlans:(m(new Error("teamPlans service missing from apiMiddleware")),null)),[]);(0,r.useEffect)((()=>{(0,y.Nc)(u.PageView.TacSettingsDirectorySyncActiveDirectory)}),[]),(0,r.useEffect)((()=>{!1===o&&N()}),[N,o]);const q=(0,r.useCallback)((()=>{if(!U)return;const{activeDirectorySyncType:t,activeDirectoryToken:n,activeDirectorySyncStatus:a}=U;try{const i={activeDirectorySyncStatus:a,activeDirectorySyncType:t,activeDirectoryToken:n,teamId:P};M(n),e.dispatch(UC.vo(i)),k(["full","deprovision-only"].includes(null!=t?t:"")),w(["full","provision-only"].includes(null!=t?t:"")),f(!1)}catch(e){console.error(`ActiveDirectorySettings - fetchData: failed with error: ${e}`)}}),[e,P,U]);if((0,r.useEffect)((()=>{X&&q()}),[S,X,q]),null==o)return null;const V=(e,t)=>e?t?"full":"provision-only":t?"deprovision-only":null,j=(0,me.cI)(o?d:O?.teamKey);return(0,E.BX)(yf,{title:"Active Directory",children:[o?(0,E.tZ)(Iu,{isOpen:R,onClose:()=>{L(!1)}}):(0,E.tZ)(fu,{showSharingDialog:R,setShowSharingDialog:L}),(0,E.BX)(Ce.T5p,{gap:"10px",gridTemplateAreas:"'mainContent secondaryContent'",gridTemplateColumns:"auto 1fr",alignContent:"flex-start",children:[(0,E.tZ)(Ce.dDn,{gridArea:"mainContent",children:(0,E.BX)(aS,{children:[a?null:(0,E.tZ)(XC,{accountInfo:i}),(0,E.tZ)(Wv,{title:s("team_settings_active_directory_title_help"),children:(0,E.tZ)(Bd,{label:s("team_settings_active_directory_header_label"),labelHelper:s("team_settings_active_directory_header_helper"),children:(0,E.tZ)("div",{children:(0,E.tZ)(Ed,{href:me.BI,children:s("team_settings_active_directory_header_button_label")})})})}),(0,E.BX)(Wv,{title:s("team_settings_active_directory_title_status"),children:[(0,E.tZ)(Bd,{label:s("team_settings_active_directory_last_successful_sync_date_label"),children:g?zC||(zC=(0,E.tZ)(l.Z,{color:"ds.oddity.focus",size:"medium"})):p?`${s("_common_generic_error")} ${p.message.toLowerCase()}`:h?.lastSuccessfulSyncRequestForTeamUnix?S((0,ln.Z)(h.lastSuccessfulSyncRequestForTeamUnix),fn._T.lll):s("team_settings_active_directory_last_successful_sync_date_value_never")}),(()=>{const{activeDirectorySyncStatus:t}=e.state;return t?.failedSyncCount?(0,E.BX)(r.Fragment,{children:[(0,E.tZ)(Bd,{label:s("team_settings_active_directory_last_error_message_label"),children:(0,E.tZ)("span",{sx:{color:"ds.text.danger.standard"},children:t.lastFailedSync?.error})}),(0,E.tZ)(Bd,{label:s("team_settings_active_directory_last_error_date_label"),children:(0,E.tZ)("span",{sx:{color:"ds.text.danger.standard"},children:t?.lastFailedSync?S((0,ln.Z)(t.lastFailedSync.eventDateUnix),fn._T.lll):null})}),(0,E.tZ)(Bd,{label:s("team_settings_active_directory_fail_count_label"),children:(0,E.tZ)("span",{sx:{color:"ds.text.danger.standard"},children:e.state.activeDirectorySyncStatus.failedSyncCount})})]}):null})()]}),(0,E.BX)(Wv,{title:s("team_settings_active_directory_title_setup"),children:[(0,E.tZ)(Bd,{label:s("team_settings_active_directory_automated_provisioning_label"),labelHelper:s("team_settings_active_directory_automated_provisioning_helper"),children:(0,E.tZ)(iS.Z,{genericErrorMessage:s(FC),isDisabled:x||T||t,saveValueFunction:async()=>{if(T)return Promise.resolve();I(!0);const t=!A,n=V(t,Z);try{if(!U)return;let{activeDirectorySyncStatus:a}=U;if(!a){const e=await(async()=>{const e=await F();if(!e)return;const{activeDirectorySyncStatus:t,activeDirectoryToken:n}=await e.getADToken();return M(n),{activeDirectorySyncStatus:t,activeDirectoryToken:n}})();a=e?.activeDirectorySyncStatus}await z({activeDirectorySyncType:n}),e.dispatch(UC.dV(n)),w(t),I(!1)}catch(e){m(e)}},value:A})}),(0,E.tZ)(Bd,{label:s("team_settings_active_directory_automated_deprovisioning_label"),labelHelper:s("team_settings_active_directory_automated_deprovisioning_helper"),children:(0,E.tZ)(iS.Z,{genericErrorMessage:s(FC),isDisabled:x||v||t,saveValueFunction:async()=>{if(v)return Promise.resolve();C(!0);const t=!Z,n=V(A,t);try{await z({activeDirectorySyncType:n}),e.dispatch(UC.dV(n)),k(t),C(!1)}catch(e){m(e)}},value:Z})}),(0,E.BX)(Bd,{label:s("team_settings_active_directory_cron_script_label"),labelHelper:s("team_settings_active_directory_cron_script_helper"),children:[(0,E.tZ)(Dl.K,{value:e.state.activeDirectoryScript,readOnly:!0,sx:{height:"180px",width:"320px"}}),(0,E.tZ)("div",{children:(0,E.tZ)(D.z,{onClick:()=>{navigator.clipboard.writeText(e.state.activeDirectoryScript).then((()=>{e.dispatch(UC.Kk(!0)),window.setTimeout((()=>e.dispatch(UC.Kk(!1))),700)}))},disabled:!B,mood:"brand",intensity:"quiet",icon:"ActionCopyOutlined",layout:"iconTrailing",children:e.state.isCopied?s("team_settings_active_directory_button_copy_feedback"):s("team_settings_active_directory_button_copy_label")})})]})]})]})}),n?(0,E.tZ)(Ce.dDn,{gridArea:"secondaryContent",sx:{maxWidth:"500px",minWidth:"250px"},alignSelf:"flex-start",children:(0,E.tZ)(kd,{linkProps:{linkType:Zd.ExternalLink},heading:s("team_settings_encryption_service_scim_invite_link_heading"),description:(0,E.BX)("div",{children:[(0,E.tZ)(_.n,{sx:{marginBottom:"8px"},children:s("team_settings_encryption_service_scim_invite_link_description_first")}),(0,E.tZ)(D.z,{size:"small",intensity:"quiet",layout:"iconTrailing",icon:"ActionCopyOutlined",onClick:e=>{e.preventDefault(),navigator.clipboard.writeText(j),L(!0)},children:s("team_settings_encryption_service_scim_invite_link_copy")})]})})}):null]})]})};var GC,VC;const jC={CONTAINER:{borderRadius:"8px",padding:"24px",border:"1px solid ds.border.neutral.quiet.idle",background:"ds.container.agnostic.neutral.supershy","& h1":{margin:"8px 0px"}},MAIN_TITLE:{margin:"8px 0px",fontFamily:"Public Sans",fontSize:"22px",fontStyle:"normal",fontWeight:"500",lineHeight:"28px"},CONTENT_CARD:{margin:"32px 0px",display:"flex",flexDirection:"row",gap:"16px"},CONTENT_CARD_FEATURE_TITLE:{fontSize:"16px",fontStyle:"normal",fontWeight:"500",lineHeight:"20px",color:"ds.text.neutral.catchy"},CONTENT_CARD_FEATURE_DESC:{color:"ds.text.neutral.quiet",fontSize:"13px",fontStyle:"normal",fontWeight:"400",lineHeight:"18px",maxWidth:"600px"},BUTTONS:{display:"flex",justifyContent:"space-between"}},WC=({isTrialOrGracePeriod:e})=>{const{translate:t}=(0,b.Z)(),{routes:n}=(0,i.Xo)(),a=(0,Oe.U)();(0,r.useEffect)((()=>{(0,y.Nc)(u.PageView.TacSettingsDirectorySyncPaywall)}),[]);const s={LINK_ZEROKNOWLEDGE:{label:t("team_settings_directory_sync_scim_paywall_link_zeroknowledge"),url:me.mn},LINK_MULTIPLEDOMAINS:{label:t("team_settings_directory_sync_scim_paywall_link_multiple_domains"),url:me.I9},LINK_SELFHOSTED:{label:t("team_settings_directory_sync_scim_paywall_link_self_hosted"),url:me.uR},LINK_CONFIDENTIAL:{label:t("team_settings_directory_sync_scim_paywall_link_confidential"),url:me.FP},LINK_IDP_INTEGRATION:{label:t("team_settings_directory_sync_scim_paywall_link_idp"),url:me.uC},LINK_ADMIN_HC:{label:t("team_settings_directory_sync_scim_paywall_link_help_center"),url:me.Tx}};return(0,E.BX)("div",{sx:jC.CONTAINER,children:[(0,E.tZ)(pe.C,{iconName:"PremiumOutlined",label:t("team_settings_directory_sync_scim_paywall_business_badge"),layout:"iconLeading",intensity:"quiet",mood:"brand",sx:{height:"16px"}}),(0,E.tZ)("h2",{sx:jC.MAIN_TITLE,children:t("team_settings_directory_sync_scim_paywall_title")}),(0,E.tZ)(_.n,{color:"ds.text.neutral.quiet",textStyle:"ds.body.standard.regular",children:t("team_settings_directory_sync_scim_paywall_description")}),(0,E.BX)("div",{sx:jC.CONTENT_CARD,children:[GC||(GC=(0,E.tZ)(Qi.v,{name:"ToolsOutlined",mood:"brand"})),(0,E.BX)("div",{children:[(0,E.tZ)("span",{sx:jC.CONTENT_CARD_FEATURE_TITLE,children:t("team_settings_directory_sync_scim_paywall_feature_selfhosted_title")}),(0,E.tZ)(_.n,{sx:jC.CONTENT_CARD_FEATURE_DESC,children:t("team_settings_directory_sync_scim_paywall_feature_selfhosted_desc")})]})]}),(0,E.BX)("div",{sx:jC.CONTENT_CARD,children:[VC||(VC=(0,E.tZ)(Qi.v,{name:"ToolsOutlined",mood:"brand"})),(0,E.BX)("div",{children:[(0,E.tZ)("div",{sx:{display:"flex",gap:"5px"},children:(0,E.tZ)("span",{sx:jC.CONTENT_CARD_FEATURE_TITLE,children:t("team_settings_directory_sync_scim_paywall_feature_confidential_title")})}),(0,E.tZ)(_.n,{sx:jC.CONTENT_CARD_FEATURE_DESC,children:t("team_settings_directory_sync_scim_paywall_feature_confidential_desc")})]})]}),(0,E.BX)("div",{sx:jC.BUTTONS,children:[(0,E.tZ)(DC.a,{dropdownItems:s,title:t("team_settings_directory_sync_scim_paywall_dropdown_learn_more")}),(0,E.tZ)(D.z,{layout:"iconLeading",icon:"PremiumOutlined",mood:"brand",intensity:"catchy",onClick:()=>{(0,y.Kz)(new u.UserClickEvent({button:u.Button.UpgradeBusinessTier,clickOrigin:u.ClickOrigin.DirectorySyncPaywallPage})),e?(0,W.Yo)(`${me.ub}?plan=business&subCode=${null!=a?a:""}&utm_source=button:upgrade_business_tier+click_origin:directory_sync_paywall_page+origin_page:tac/settings/directory_sync/paywall+origin_component:main_app`):(0,i.uX)(`${n.teamAccountChangePlanRoutePath}?plan=business`)},role:e?"link":"button",children:t("team_settings_directory_sync_scim_paywall_upgrade_business")})]})]})},HC=({isSCIMCapable:e,isTrialOrGracePeriod:t,showPaywall:n})=>{const{data:a,status:i}=(0,m.k)(wy.y,"ssoProvisioning");if(i!==G.rq.Success)return null;const{ssoSolution:r}=a;if(r===Oy.WO.enum.confidentialSaml)throw new Error("Invalid state: cannot access SCIM if the team is using Confidential SSO until the enclave supports SCIM.");return!1===e&&n&&void 0!==t?(0,E.tZ)(WC,{isTrialOrGracePeriod:t}):null};var $C;const KC=({lastSyncUnix:e,version:t,loading:n,refreshData:a})=>{const{translate:i}=(0,b.Z)();return(0,E.tZ)(iv.R,{children:n?$C||($C=(0,E.tZ)(l.Z,{})):(0,E.BX)(c.k,{flexDirection:"column",gap:"5px",children:[(0,E.tZ)(_.n,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.standard",children:`${i("team_settings_directory_sync_last_sync")} ${e?(0,ln.Z)(e).toLocaleString(navigator.language,{...fn.qG.lll,timeZoneName:"short"}):i("team_settings_directory_sync_not_available")}`}),(0,E.tZ)(_.n,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.standard",children:`${i("team_settings_encryption_service_version")} ${null!=t?t:i("team_settings_encryption_service_not_available")}`}),(0,E.BX)(_.n,{as:"a",color:"ds.text.brand.standard",sx:{textDecoration:"none",fontWeight:"normal",display:"flex",flexDirection:"row"},onClick:()=>a(),children:[(0,E.tZ)(T.JO,{name:"ActionRefreshOutlined",sx:{marginRight:"5px"},color:"ds.text.brand.standard",size:"xsmall"}),i("team_settings_scim_sync_refresh")]})]})})},YC=({loading:e,parentPath:t,teamSettings:n,esConfig:a,isScimCapable:r,disableSetupButton:s})=>{const o=(0,i.k6)(),{translate:l}=(0,b.Z)(),{teamDeviceConfigLoading:c,teamDeviceConfig:u}=pv({draft:!1,deviceAccessKey:a?.deviceAccessKey}),{teamDeviceLoading:m,teamDevice:p,refreshTeamDevice:g}=Rf(a?.deviceAccessKey),h=e||c,y=!n?.ssoServiceProviderUrl||h||s||!r,S=!u?.configProperties?.scimAuthToken;return(0,E.tZ)(Ce.Zbd,{children:(0,E.BX)(Ce.T5p,{as:Ce.aYP,gap:"8px",gridTemplateAreas:"'header button' 'description button' 'status status'",gridTemplateColumns:"1fr auto",sx:{bg:"white",border:"none"},children:[(0,E.tZ)(Ce.dDn,{as:d.X,innerAs:"h3",size:"large",bold:!0,gridArea:"header",textStyle:"ds.title.section.medium",children:l("team_settings_directory_sync_scim_header")}),(0,E.tZ)(Ce.dDn,{gridArea:"description",as:_.n,size:"small",textStyle:"ds.title.block.small",color:"ds.text.neutral.quiet",children:l("team_settings_directory_sync_scim_description")}),(0,E.tZ)(Ce.dDn,{gridArea:"button",children:(0,E.tZ)(Zv.M,{id:"scimSetupButton",loading:h,disabled:y,neverShowTooltip:s,size:"large",onClick:()=>{o.push(`${t}${oE}`)},content:l("team_settings_es_sso_setup_configure_es_tooltip"),mood:S&&!y?"brand":"neutral",intensity:S&&!y?"catchy":"quiet",children:l(S?"team_settings_directory_sync_scim_set_up_button":"team_settings_button_edit_label")})}),u?.configProperties?.scimEnabled?(0,E.tZ)(Ce.dDn,{gridArea:"status",sx:{mt:"20px"},children:(0,E.tZ)(KC,{loading:m,version:p?.version,refreshData:g,lastSyncUnix:p?.lastActivityDateUnix})}):null]})})};var QC,JC,eE;const tE={GENERIC_ERROR:"_common_generic_error"},nE=({config:e,esEndpoint:t})=>{var n;const{translate:a}=(0,b.Z)(),s=(0,i.k6)(),{teamDeviceConfigLoading:o,teamDeviceConfig:d,updateTeamDeviceConfig:u,refreshTeamDeviceConfig:m,loadTeamDeviceConfigErrorCode:p}=pv({draft:!1,deviceAccessKey:e?.deviceAccessKey}),[g,h]=(0,r.useState)(""),[y,S]=(0,r.useState)(!1),[x,f]=(0,r.useState)(!1),[v,C]=(0,r.useState)(!1),[Z,k]=(0,r.useState)(!1),T=o;(0,r.useEffect)((()=>{const e=p;e&&e!==hu.B&&h(e)}),[p,a]);const I=()=>s.goBack(),A=async({values:e,resetForm:n})=>{f(!0),S(!1);const a={scimEnabled:e.encryptionServiceSync,teamDeviceUrl:null!=t?t:void 0};!v&&d?.configProperties?.scimAuthToken||(a.scimAuthToken=e.scimToken);const i=await u(a);C(!1),await m(),f(!1),i.success?i.data.encryptionServiceReloadingStatus===If.x.OK?(n({values:e}),I()):S(!0):h(i.error.code)},w={scimToken:(O=d?.configProperties?.scimAuthToken,null!=(N=O?.replace(/./g,"*"))?N:""),scimEndpoint:t?(0,Vv.UQ)(t,"scim/2.0"):"",encryptionServiceSync:null!=(n=d?.configProperties?.scimEnabled)&&n};var O,N;const R=()=>{k(!1)};return(0,E.tZ)(la.J9,{onSubmit:async(e,t)=>{e.encryptionServiceSync?k(!0):await A({values:e,resetForm:t.resetForm})},enableReinitialize:!0,initialValues:w,children:({values:e,setFieldValue:t,isSubmitting:n,dirty:i,resetForm:r})=>{var s,u;return(0,E.BX)(la.l0,{autoComplete:"off",noValidate:!0,children:[(0,E.tZ)(Af.X,{dirty:i&&!x&&!y}),(0,E.BX)(Ce.Zbd,{children:[(0,E.tZ)(Ce.Ol2,{children:a("team_settings_directory_sync_scim_header")}),(0,E.BX)(Ce.aYP,{children:[(0,E.tZ)(rn.k,{mood:"brand",title:a("team_settings_directory_sync_scim_infobox")}),(0,E.BX)(Ce.T5p,{gridTemplateAreas:"'header button' 'desc button' 'inputField inputField'",gap:"8px",sx:{mt:"32px"},children:[(0,E.tZ)(Ce.dDn,{gridArea:"header",as:_.n,innerAs:"label",htmlFor:"scimTokenInput",textStyle:"ds.title.block.medium",children:a("team_settings_directory_sync_scim_set_up_token_label")}),(0,E.tZ)(Ce.dDn,{as:D.z,gridArea:"button",type:"button",alignSelf:"right",intensity:"quiet",mood:"brand",disabled:T||n,onClick:()=>(e=>{C(!0),e("scimToken",(0,ef.Z)())})(t),sx:{height:"fit-content",width:"100%"},children:e.scimToken?a("team_settings_directory_sync_scim_set_up_reset_buttons"):a("team_settings_directory_sync_scim_set_up_generate_buttons")}),(0,E.tZ)(Ce.dDn,{gridArea:"desc",as:_.n,size:"medium",sx:{marginBottom:"24px"},color:"ds.text.neutral.quiet",children:a("team_settings_directory_sync_scim_set_up_token_description")}),(0,E.tZ)(Ce.dDn,{gridArea:"inputField",children:(0,E.tZ)(la.gN,{name:"scimToken",children:({field:t})=>t.value?(0,E.tZ)(Gv.x,{inputValue:t.value,iconButtonProps:{disabled:Boolean(e.scimToken)&&!v||n},passwordInputProps:{disabled:Boolean(e.scimToken)&&!v||n,fullWidth:!0,readOnly:!0,...t,id:"scimTokenInput"}}):null})})]}),(0,E.BX)(Ce.T5p,{gridTemplateColumns:"auto",gap:"8px",children:[(0,E.tZ)(Ce.dDn,{as:_.n,innerAs:"label",htmlFor:"endpointInput",sx:{marginTop:"32px"},textStyle:"ds.title.block.medium",children:a("team_settings_directory_sync_scim_set_up_endpoint_label")}),(0,E.tZ)(la.gN,{name:"scimEndpoint",children:({field:e})=>(0,E.tZ)(Gv.x,{inputValue:e.value,textInputProps:{fullWidth:!0,readOnly:!0,...e,id:"endpointInput"}})})]}),QC||(QC=(0,E.tZ)("hr",{})),(0,E.BX)(Ce.T5p,{gridTemplateAreas:"'label toggle' 'desc .'",gap:"8px",children:[(0,E.tZ)(Ce.dDn,{gridArea:"label",as:_.n,innerAs:"label",htmlFor:"encryptionServiceSync",textStyle:"ds.title.block.medium",children:a("team_settings_directory_sync_scim_set_up_service_label")}),(0,E.tZ)(Ce.dDn,{gridArea:"desc",as:_.n,color:"ds.text.neutral.quiet",children:a("team_settings_directory_sync_scim_set_up_service_description")}),(0,E.tZ)(Ce.dDn,{gridArea:"toggle",children:o?JC||(JC=(0,E.tZ)(l.Z,{mood:"brand"})):(0,E.tZ)(_S.Z,{disabled:T||n,id:"encryptionServiceSync",onChange:e=>((e,t)=>{t("encryptionServiceSync",e.currentTarget.checked)})(e,t),defaultChecked:null!=(s=d?.configProperties?.scimEnabled)&&s})})]})]}),(0,E.BX)(Ce.eWM,{children:[g?(0,E.tZ)(_.n,{sx:{width:"40%",ml:0,mr:"auto"},textStyle:"ds.title.supporting.small",children:a(null!=(u=tE?.[g])?u:tE.GENERIC_ERROR)}):null,y?(0,E.tZ)(c.k,{sx:{flexGrow:1,justifyContent:"center"},children:eE||(eE=(0,E.tZ)(Bf,{context:"SCIM"}))}):null,(0,E.tZ)(D.z,{mood:"neutral",intensity:"quiet",size:"large",type:"button",onClick:I,children:a("team_settings_directory_sync_scim_set_up_button_cancel")}),(0,E.tZ)(D.z,{type:"submit",disabled:T||n||!i,children:a("team_settings_directory_sync_scim_set_up_button_save_changes")})]})]}),Z?(0,E.tZ)(Qx,{title:a("team_settings_directory_sync_scim_confirm_dialog_title"),body:a("team_settings_directory_sync_scim_confirm_dialog_body"),primaryActionLabel:a("team_settings_directory_sync_scim_confirm_dialog_primary_action_label"),onCancel:R,onConfirm:()=>(async({values:e,resetForm:t})=>{await A({values:e,resetForm:t}),k(!1)})({values:e,resetForm:r})}):null]})}})};var aE;const iE=({isScimEnabled:e})=>{const{translate:t}=(0,b.Z)(),{getInviteLinkDataForAdmin:n}=yu(),a=Cu(),i=(0,Pe.o)(v_.G.WebOnboardingInviteLinkTacMigration),[o,l]=(0,r.useState)(!1),[d,u]=(0,r.useState)(!1);if(null==i)return null;const m=a.status===s.rq.Success?a:void 0;return(0,E.BX)(c.k,{gap:"6",children:[i?(0,E.tZ)(Iu,{isOpen:o,onClose:()=>{l(!1)}}):(0,E.tZ)(fu,{showSharingDialog:o,setShowSharingDialog:l}),d?i?(0,E.tZ)(Zu,{isOpen:d,onCancel:()=>{u(!1)}}):(0,E.tZ)(Su,{showActivationDialog:d,setShowActivationDialog:u,setShowSharingDialog:l}):null,(0,E.tZ)(kd,{linkProps:{linkType:Zd.ExternalLink,linkHref:"https://support.dashlane.com/hc/articles/4404301553938?utm_source=extension"},heading:t("team_settings_encryption_service_scim_setup_guide_heading"),description:t("team_settings_encryption_service_scim_setup_guide_description"),linkText:t("team_settings_encryption_service_scim_setup_guide_link_text")}),e?(0,E.tZ)(kd,{linkProps:{linkType:Zd.ExternalLink},heading:t("team_settings_encryption_service_scim_invite_link_heading"),description:(0,E.BX)("div",{children:[(0,E.tZ)(_.n,{color:"ds.text.neutral.standard",textStyle:"ds.body.standard.regular",sx:{mb:"8px"},children:t("team_settings_encryption_service_scim_invite_link_description_first")}),(0,E.BX)(_.n,{as:"a",color:"ds.text.brand.standard",onClick:async e=>{e.preventDefault();const t=await n();(i?m?.enabled:t?.disabled||!t?.teamKey)?u(!0):l(!0)},href:"_blank",sx:{gap:"4px"},children:[(0,E.tZ)("span",{children:t("team_settings_encryption_service_scim_invite_link_copy")}),aE||(aE=(0,E.tZ)(T.JO,{name:"ActionCopyOutlined",size:"medium",color:"ds.text.brand.standard"}))]})]})}):null]})};var rE,sE;const oE="/scim-settings",lE=({isScimEnabled:e,isScimCapable:t,teamSettings:n,updateTeamSettings:a,disableForm:s=!1,adSyncEnabled:o,isSsoConnectorSetup:c})=>{const[d,m]=(0,r.useState)(!1),{translate:p}=(0,b.Z)(),{path:h}=(0,i.$B)(),{esConfig:S,esConfigLoading:x,refreshEncryptionServiceConfig:f}=Tf(),v=(0,Pe.o)(De.w.ItadminTacEncryptionserviceSSOmigrationReset),C=Boolean(v||!x&&c);(0,r.useEffect)((()=>{(0,y.Nc)(u.PageView.TacSettingsDirectorySyncSelfHostedScim)}),[]);const Z=Ne({hasBillingAccess:!0});if(!Z)return null;const{shouldShowBuyOrUpgradePaywall:k,planType:D,isTrialOrGracePeriod:T}=Z,I=k&&D!==g.lD.Business;return(0,E.tZ)(yf,{title:"Self-hosted SCIM",children:(0,E.tZ)(di,{mainContent:(0,E.tZ)(Ce.T5p,{gridTemplateColumns:"auto",gridAutoRows:"min-content",gap:"32px",children:(0,E.BX)(i.rs,{children:[(0,E.BX)(i.AW,{exact:!0,path:h,children:[I?(0,E.tZ)(HC,{isSCIMCapable:t,isTrialOrGracePeriod:T,showPaywall:!0}):(0,E.BX)(r.Fragment,{children:[rE||(rE=(0,E.tZ)(Bf,{})),(0,E.tZ)(HC,{isSCIMCapable:t}),o?(0,E.tZ)(rn.k,{size:"medium",mood:"neutral",title:p("team_settings_encryption_service_scim_setup_ad_sync_warning_heading"),description:p("team_settings_encryption_service_scim_setup_ad_sync_warning_description")}):null,C?(0,E.tZ)(rn.k,{size:"medium",mood:"brand",title:p("team_settings_es_sso_migration_infobox_title"),description:(0,E.tZ)(_.n,{children:p("team_settings_es_sso_migration_infobox_body")})}):null,(0,E.tZ)(lv,{parentPath:h,loading:x||null===t,esConfig:S,disableSetupButton:!1===t||s}),(0,E.tZ)(YC,{teamSettings:n,parentPath:h,loading:x||null===t,esConfig:S,isScimCapable:!0===t,disableSetupButton:s})]}),d?(0,E.tZ)(ue.cZ,{onDismiss:()=>m(!1)}):null]}),(0,E.tZ)(i.AW,{path:`${h}/encryption-service-settings`,children:x?sE||(sE=(0,E.tZ)(l.Z,{mood:"brand"})):(0,E.tZ)(nv,{migratingFromSSOConnector:C,onSave:()=>f(),teamSettings:n,updateTeamSettings:a,esConfig:S,isSettingupScim:!0})}),(0,E.tZ)(i.AW,{path:`${h}${oE}`,children:(0,E.tZ)(nE,{config:S,esEndpoint:n?.ssoServiceProviderUrl})})]})}),secondaryContent:I?(0,E.tZ)(kC,{openContactDialog:()=>m(!0)}):(0,E.tZ)(iE,{isScimEnabled:e})})})},cE={title:"tac_settings_directory_sync_card_title_confidential_scim",redirectUrl:"confidential-scim",supportedFeatures:[{title:"tac_settings_directory_sync_card_cloud_based",description:"tac_settings_directory_sync_card_cloud_based_description",iconName:"SettingsOutlined"},{title:"tac_settings_directory_sync_card_confidential_automatic_syncs",description:"tac_settings_directory_sync_card_confidential_automatic_syncs_description",iconName:"ConfigureOutlined"},{title:"tac_settings_directory_sync_card_user_provisioning",description:"tac_settings_directory_sync_card_user_provisioning_description",iconName:"GroupOutlined"},{title:"tac_settings_directory_sync_card_sharing_group",description:"tac_settings_directory_sync_card_sharing_group_description",iconName:"FeedbackSuccessOutlined"}]},dE={title:"tac_settings_directory_sync_card_title_selfhosted_scim",redirectUrl:"scim-provisioning",supportedFeatures:[{title:"tac_settings_directory_sync_card_selfhosted_scim_cloud_based",description:"tac_settings_directory_sync_card_selfhosted_scim_cloud_based_description",iconName:"AccountSettingsOutlined"},{title:"tac_settings_directory_sync_card_selfhosted_confidential_automatic_syncs",description:"tac_settings_directory_sync_card_selfhosted_confidential_automatic_syncs_description",iconName:"ConfigureOutlined"},{title:"tac_settings_directory_sync_card_selfhosted_user_provisioning",description:"tac_settings_directory_sync_card_selfhosted_user_provisioning_description",iconName:"GroupOutlined"},{title:"tac_settings_directory_sync_card_selfhosted_sharing_group",description:"tac_settings_directory_sync_card_selfhosted_sharing_group_description",iconName:"FeedbackSuccessOutlined"}]},_E={title:"tac_settings_directory_sync_card_title_ad_sync",redirectUrl:"active-directory",supportedFeatures:[{title:"tac_settings_directory_sync_card_ad_sync_cloud_based",description:"tac_settings_directory_sync_card_ad_sync_cloud_based_description",iconName:"AccountSettingsOutlined"},{title:"tac_settings_directory_sync_card_automatic_ad_sync_syncs",description:"tac_settings_directory_sync_card_automatic_ad_sync_syncs_description",iconName:"ConfigureOutlined"},{title:"tac_settings_directory_sync_card_ad_sync_user_provisioning",description:"tac_settings_directory_sync_card_ad_sync_user_provisioning_description",iconName:"GroupOutlined"},{title:"tac_settings_directory_sync_card_ad_sync_sharing_group",description:"tac_settings_directory_sync_card_ad_sync_sharing_group_description",iconName:"FeedbackSuccessOutlined"}]},uE=({isNitroSSOActivated:e,isSelfhostedSSOActivated:t})=>{const{translate:n}=(0,b.Z)(),{routes:a}=(0,Xo.Xo)();return e||t?(0,E.tZ)(rn.k,{title:n(e?"tac_settings_directory_sync_card_disabled_selfhosted_incompatible":"tac_settings_directory_sync_card_disabled_confidential_incompatible"),size:"large"}):(0,E.tZ)(rn.k,{title:n("tac_settings_directory_sync_card_disabled_confidential_not_activated"),size:"large",actions:[(0,E.tZ)(D.z,{as:i.rU,to:a.teamSettingsSsoConfidential,size:"small",children:n("tac_settings_directory_sync_card_disabled_confidential_not_activated_button")},"enable-confidential-sso")]})},mE="tac_settings_directory_sync_card_button_setup",pE="tac_settings_directory_sync_card_button_edit";let gE=function(e){return e.ConfidentialScim="confidential-scim-cta",e.SelfhostedScim="selfhosted-scim-cta",e.AdSyncScim="adsync-scim-cta",e}({});const hE=({ssoSolution:e,ssoStatus:t,provisioningSolution:n,isLoading:a=!1})=>{const{translate:s}=(0,b.Z)(),o=(0,Nm.S)(),c=!!o?.scim.enabled,m=Ne({hasBillingAccess:!0}),p=!!m?.isTrialOrGracePeriod,g=(0,i.k6)(),{routes:h}=(0,i.Xo)(),S=D_(),[x,f]=(0,r.useState)(!1),v=n!==Ff.Hh.enum.none,C=e===Oy.WO.enum.ssoConnector,Z=S?"tac_settings_directory_sync_entrylevel_header_helper":"tac_settings_directory_sync_header_helper";return(0,r.useEffect)((()=>{(0,y.Nc)(u.PageView.TacSettingsDirectorySync)}),[]),a||null===o||null===m?(0,E.tZ)(Ce.T5p,{justifyItems:"center",children:(0,E.tZ)(l.Z,{size:75,sx:{marginTop:"20vh"}})}):(0,E.BX)("div",{sx:{margin:"32px",display:"flex",gap:"32px",flexDirection:"column"},children:[(0,E.BX)("div",{children:[(0,E.tZ)(d.X,{as:"h1",textStyle:"ds.title.section.large",sx:{marginBottom:"16px"},children:s("tac_settings_directory_sync_header")}),(0,E.tZ)(_.n,{sx:{marginBottom:"8px"},children:s(Z)}),(0,E.tZ)(Ed,{href:"https://support.dashlane.com/hc/articles/4404301553938?utm_source=extension",children:s("tac_settings_directory_sync_header_link")})]}),v||C||S?null:(0,E.tZ)(uE,{isNitroSSOActivated:e===Oy.WO.enum.confidentialSaml&&t===Oy.pI.enum.enabled,isSelfhostedSSOActivated:e===Oy.WO.enum.selfHostedSaml&&t===Oy.pI.enum.enabled}),S?(0,E.BX)(Ce.T5p,{fullWidth:!0,gridTemplateColumns:"1fr 1fr 0.5fr",gap:"24px",children:[(0,E.tZ)(gC,{setBusinessPlanBadge:!0,..._E,selected:n===Ff.Hh.enum.adSync,featureCardStatus:"NOT_STARTED",buttonLabel:s("team_upgrade_to_business"),onCtaClick:()=>{g.push(`${h.teamAccountChangePlanRoutePath}?plan=business`)}}),(0,E.tZ)(WC,{isTrialOrGracePeriod:p}),(0,E.tZ)("div",{sx:{height:"252px"},children:(0,E.tZ)(kC,{openContactDialog:()=>f(!0)})}),x?(0,E.tZ)(ue.cZ,{onDismiss:()=>f(!1)}):null]}):(0,E.tZ)(Ce.T5p,{fullWidth:!0,gridTemplateColumns:"repeat(3, 1fr)",gap:"24px",children:c?(0,E.BX)(r.Fragment,{children:[(0,E.tZ)(gC,{optionNumber:1,...cE,selected:n===Ff.Hh.enum.confidentialScim,buttonLabel:s(n===Ff.Hh.enum.confidentialScim?pE:mE),disabled:!(e===Oy.WO.enum.confidentialSaml&&t===Oy.pI.enum.enabled)||n===Ff.Hh.enum.selfHostedScim||n===Ff.Hh.enum.adSync,featureCardStatus:n===Ff.Hh.enum.confidentialScim?"ACTIVATED":"NOT_STARTED",onCtaClick:()=>{(0,y.Kz)(new u.UserSetupConfidentialScimEvent({scimSetupStep:u.ScimSetupStep.ClickSetUp}))},ctaDataTestId:gE.ConfidentialScim}),(0,E.tZ)(gC,{optionNumber:2,...dE,selected:n===Ff.Hh.enum.selfHostedScim,buttonLabel:s(n===Ff.Hh.enum.selfHostedScim?pE:mE),featureCardStatus:n===Ff.Hh.enum.selfHostedScim?"ACTIVATED":"NOT_STARTED",disabled:e===Oy.WO.enum.confidentialSaml||e===Oy.WO.enum.ssoConnector||n===Ff.Hh.enum.confidentialScim||n===Ff.Hh.enum.adSync,ctaDataTestId:gE.SelfhostedScim}),(0,E.tZ)(gC,{optionNumber:3,..._E,selected:n===Ff.Hh.enum.adSync,featureCardStatus:n===Ff.Hh.enum.adSync?"ACTIVATED":"NOT_STARTED",buttonLabel:s(n===Ff.Hh.enum.adSync?pE:mE),disabled:n===Ff.Hh.enum.confidentialScim||n===Ff.Hh.enum.selfHostedScim,ctaDataTestId:gE.AdSyncScim})]}):(0,E.BX)(r.Fragment,{children:[(0,E.tZ)(gC,{optionNumber:1,..._E,selected:n===Ff.Hh.enum.adSync,featureCardStatus:n===Ff.Hh.enum.adSync?"ACTIVATED":"NOT_STARTED",buttonLabel:s(n===Ff.Hh.enum.adSync?pE:mE),disabled:n===Ff.Hh.enum.confidentialScim||n===Ff.Hh.enum.selfHostedScim,ctaDataTestId:"adsync-scim-cta"}),(0,E.tZ)(WC,{isTrialOrGracePeriod:p})]})})]})},yE=({isTokenGenerated:e})=>{const[t,n]=(0,r.useState)(!1),[a,i]=(0,r.useState)(!1),{translate:s}=(0,b.Z)(),{generateScimToken:o}=(0,te.u)(Ay.m),l=(0,r.useCallback)((async()=>{n(!0),await o(void 0),(0,y.Kz)(new u.UserSetupConfidentialScimEvent({scimSetupStep:e?u.ScimSetupStep.ReGenerateToken:u.ScimSetupStep.GenerateScimToken})),n(!1)}),[o,e]);return(0,E.BX)(r.Fragment,{children:[(0,E.tZ)(d.X,{as:"h2",textStyle:"ds.title.section.medium",sx:{marginBottom:"8px"},children:s("tac_settings_confidential_scim_generate_token_header")}),(0,E.tZ)(_.n,{textStyle:"ds.body.standard.regular",sx:{marginBottom:"24px"},children:s("tac_settings_confidential_scim_generate_token_header_helper")}),(0,E.tZ)(D.z,{intensity:e?"quiet":"catchy",mood:"brand",isLoading:!e&&t,onClick:e?()=>i(!0):l,children:s(e?"tac_settings_confidential_scim_regenerate_token_button":"tac_settings_confidential_scim_generate_token_button")}),(0,E.tZ)(J.Vq,{actions:{primary:{children:s("tac_settings_confidential_scim_regenerate_token_dialog_primary_action"),onClick:()=>{l(),i(!1)},isLoading:t},secondary:{children:s("tac_settings_confidential_scim_regenerate_token_dialog_secondary_action"),onClick:()=>i(!1)}},closeActionLabel:"Close",onClose:()=>i(!1),title:s("tac_settings_confidential_scim_regenerate_token_dialog_title"),isOpen:a,children:(0,E.tZ)(_.n,{children:s("tac_settings_confidential_scim_regenerate_token_dialog")})})]})};var bE=n(81986);const SE="input_copy_button",xE="input_copied_button_feedback",fE=({scimApiToken:e,scimEndpoint:t})=>{const{translate:n}=(0,b.Z)(),[a,i]=(0,r.useState)(!1),[s,o]=(0,r.useState)(!1),l=async(e,t)=>{t&&(await navigator.clipboard.writeText(t),"token"===e?(i(!0),setTimeout((()=>i(!1)),2e3)):(o(!0),setTimeout((()=>o(!1)),2e3)))};return(0,E.BX)(r.Fragment,{children:[(0,E.tZ)(d.X,{as:"h2",textStyle:"ds.title.section.medium",sx:{marginBottom:"8px"},children:n("tac_settings_confidential_scim_copy_token_header")}),(0,E.tZ)(_.n,{textStyle:"ds.body.standard.regular",sx:{marginBottom:"24px"},children:n("tac_settings_confidential_scim_copy_token_header_helper")}),(0,E.tZ)(bE.Z,{"data-testid":"scim-token-field",label:n("tac_settings_confidential_scim_copy_token_field_token_label"),value:null!=e?e:"",disabled:!e,readOnly:!!e,toggleVisibilityLabel:{hide:n("_common_password_hide_label"),show:n("_common_password_show_label")},sx:{marginBottom:"16px"},actions:[{iconName:"ActionCopyOutlined",label:n(a?xE:SE),key:"copy-token",onClick:async()=>{await l("token",null!=e?e:""),(0,y.Kz)(new u.UserSetupConfidentialScimEvent({scimSetupStep:u.ScimSetupStep.CopyApiToken}))}}]}),(0,E.tZ)(Tn.n,{"data-testid":"scim-endpoint-field",value:null!=t?t:"",label:n("tac_settings_confidential_scim_copy_token_field_endpoint_label"),disabled:!t,readOnly:!!t,actions:[{iconName:"ActionCopyOutlined",key:"copy-endpoint",label:n(s?xE:SE),onClick:async()=>{(0,y.Kz)(new u.UserSetupConfidentialScimEvent({scimSetupStep:u.ScimSetupStep.CopyEndpointLink})),await l("endpoint",null!=t?t:"")}}]})]})},vE=({active:e})=>{const t=(0,r.useRef)(!1),{translate:n}=(0,b.Z)(),{updateScimConfiguration:a}=(0,te.u)(Ay.m),{showToast:i}=(0,o.p)();return(0,r.useEffect)((()=>(t.current&&i({description:n(e?"tac_settings_activate_automatic_provisioning":"tac_settings_deactivate_automatic_provisioning"),closeActionLabel:"close"}),()=>{t.current=!0})),[e]),(0,E.BX)(Ce.T5p,{gridTemplateAreas:"'title toggle' 'description toggle'",alignItems:"center",children:[(0,E.tZ)(Ce.dDn,{gridArea:"title",as:d.X,id:"userProvisioningActivation",innerAs:"h2",textStyle:"ds.title.section.medium",sx:{marginBottom:"8px"},children:n("tac_settings_confidential_scim_activate_header")}),(0,E.tZ)(Ce.dDn,{gridArea:"description",as:_.n,textStyle:"ds.body.standard.regular",children:n("tac_settings_confidential_scim_activate_header_helper")}),(0,E.tZ)(Ce.dDn,{justifySelf:"end",gridArea:"toggle",as:_S.Z,"aria-labelledby":"userProvisioningActivation",sx:{marginLeft:"24px"},onChange:()=>{(0,y.Kz)(new u.UserSetupConfidentialScimEvent({scimSetupStep:e?u.ScimSetupStep.DeactivateDirectorySync:u.ScimSetupStep.ActivateDirectorySync})),a({active:!e})},checked:e})]})},CE=({scimEndpoint:e,scimConfiguration:t})=>{const{translate:n}=(0,b.Z)();return(0,E.BX)(c.k,{gap:"32px",flexDirection:"column",as:yn.Z,sx:{padding:"32px"},children:[(0,E.tZ)(pe.C,{mood:"neutral",intensity:"quiet",label:n("tac_settings_confidential_scim_user_provisioning_badge"),sx:{marginBottom:"calc(8px - 32px)"}}),(0,E.tZ)("div",{children:(0,E.tZ)(yE,{isTokenGenerated:!!t.token})}),(0,E.tZ)("div",{children:(0,E.tZ)(fE,{scimEndpoint:e?.endpoint,scimApiToken:t.token})}),(0,E.tZ)("div",{children:(0,E.tZ)(vE,{active:t.active})})]})};var EE,ZE,kE;const DE={SEATS_REVIEW_SECTION:{display:"flex",flexDirection:"row",gap:"24px",marginBottom:"24px"},SEATS_REVIEW_ITEM:{width:"120px",display:"flex",flexDirection:"column",gap:"4px"},VERTICAL_DIVIDER:{borderLeft:"1px solid ds.border.neutral.quiet.idle",height:"48px"},BUTTON_SECTION:{display:"flex",flexDirection:"row",gap:"8px"}},TE=({onClickBuySeats:e})=>{const{translate:t}=(0,b.Z)(),{routes:n}=(0,i.Xo)(),{data:a}=(0,m.k)(p.o,"getTeamSeats"),r=(0,$.C)(),s=(0,Oe.U)();if(!r)return null;const o=`${me.ub}?plan=business&subCode=${null!=s?s:""}`;return(0,E.BX)(yn.Z,{sx:{display:"flex",flexDirection:"column",gap:"8px",padding:"32px"},children:[(0,E.tZ)(pe.C,{mood:"brand",intensity:"quiet",layout:"iconLeading",iconName:"PremiumOutlined",label:t("tac_settings_confidential_scim_review_seats_card_pro_tip_badge")}),(0,E.BX)("div",{children:[(0,E.tZ)(d.X,{as:"h2",textStyle:"ds.title.section.medium",sx:{marginBottom:"8px"},children:t("tac_settings_confidential_scim_review_seats_card_header")}),(0,E.tZ)(_.n,{textStyle:"ds.body.standard.regular",sx:{marginBottom:"24px"},children:t("tac_settings_confidential_scim_review_seats_card_description")}),(0,E.BX)("div",{sx:DE.SEATS_REVIEW_SECTION,children:[(0,E.BX)("div",{sx:DE.SEATS_REVIEW_ITEM,children:[(0,E.tZ)(d.X,{as:"h3",textStyle:"ds.title.supporting.small",color:"ds.text.neutral.quiet",children:t("tac_settings_confidential_scim_review_seats_card_total_seats")}),(0,E.tZ)(_.n,{textStyle:"ds.specialty.monospace.small",color:"ds.text.neutral.standard",children:a?a.paid:EE||(EE=(0,E.tZ)(l.Z,{}))})]}),(0,E.tZ)("div",{sx:DE.VERTICAL_DIVIDER}),(0,E.BX)("div",{sx:DE.SEATS_REVIEW_ITEM,children:[(0,E.tZ)(d.X,{as:"h3",textStyle:"ds.title.supporting.small",color:"ds.text.neutral.quiet",children:t("tac_settings_confidential_scim_review_seats_card_occupied")}),(0,E.tZ)(_.n,{textStyle:"ds.specialty.monospace.small",color:"ds.text.positive.quiet",children:a?a.paid-a.remaining:ZE||(ZE=(0,E.tZ)(l.Z,{}))})]}),(0,E.tZ)("div",{sx:DE.VERTICAL_DIVIDER}),(0,E.BX)("div",{sx:DE.SEATS_REVIEW_ITEM,children:[(0,E.tZ)(d.X,{as:"h3",textStyle:"ds.title.supporting.small",color:"ds.text.neutral.quiet",children:t("tac_settings_confidential_scim_review_seats_card_free")}),(0,E.tZ)(_.n,{textStyle:"ds.specialty.monospace.small",color:"ds.text.positive.quiet",children:a?a.remaining:kE||(kE=(0,E.tZ)(l.Z,{}))})]})]}),(0,E.BX)("div",{sx:DE.BUTTON_SECTION,children:[r.isFreeTrial?(0,E.tZ)(D.z,{mood:"brand",intensity:"quiet",layout:"labelOnly",role:"link",onClick:()=>{(0,y.Kz)(new u.UserClickEvent({button:u.Button.BuyDashlane,clickOrigin:u.ClickOrigin.ProTip})),(0,W.Yo)(o)},children:t("team_buy_dashlane")}):(0,E.tZ)(D.z,{mood:"brand",intensity:"quiet",layout:"labelOnly",onClick:e,children:t("tac_settings_confidential_scim_review_seats_card_buy_seats_button")}),(0,E.tZ)(Pm.rU,{to:n.teamAccountRoutePath,children:(0,E.tZ)(D.z,{mood:"brand",intensity:"supershy",layout:"labelOnly",onClick:()=>{(0,y.Kz)(new u.UserClickEvent({button:u.Button.ReviewSubscription,clickOrigin:u.ClickOrigin.ProTip}))},children:t("tac_settings_confidential_scim_review_seats_card_review_subscription_button")})})]})]})]})},IE=()=>{var e;const{translate:t}=(0,b.Z)(),{showToast:n}=(0,o.p)(),[a,i]=(0,r.useState)(!1),{updateGroupProvisioningConfiguration:s}=(0,te.u)(wy.y),{groupProvisioningConfiguration:l}=(()=>{const{data:e,status:t}=(0,m.k)(wy.y,"getGroupProvisioningConfiguration");return t!==G.rq.Success?{groupProvisioningConfiguration:null}:{groupProvisioningConfiguration:e}})();return null===l?null:(0,E.BX)(yn.Z,{sx:{display:"flex",flexDirection:"column",gap:"32px",padding:"32px"},children:[(0,E.BX)("div",{children:[(0,E.tZ)(pe.C,{mood:"neutral",intensity:"quiet",label:t("tac_settings_confidential_scim_group_provisioning_badge"),sx:{marginBottom:"8px"}}),(0,E.tZ)(d.X,{as:"h2",textStyle:"ds.title.section.medium",sx:{marginBottom:"8px"},children:t("tac_settings_confidential_scim_group_provisioning_header")}),(0,E.tZ)(_.n,{sx:{marginBottom:"24px"},children:t("tac_settings_confidential_scim_group_provisioning_description")}),(0,E.tZ)($t.Q,{href:"https://support.dashlane.com/hc/articles/10992671925778?utm_medium=misc&utm_source=dashlane_admin_console#scim",isExternal:!0,onClick:()=>{(0,y.Kz)(new u.UserOpenHelpCenterEvent({helpCenterArticleCta:u.HelpCenterArticleCta.SeeGroupProvisioningSetupGuide}))},children:t("tac_settings_confidential_scim_group_provisioning_support_link")})]}),(0,E.BX)("div",{sx:{display:"flex",gap:"24px",flexDirection:"row",alignItems:"center"},children:[(0,E.BX)("div",{children:[(0,E.tZ)(d.X,{id:"groupProvisioningActivation",as:"h2",textStyle:"ds.title.section.medium",sx:{marginBottom:"8px"},children:t("tac_settings_confidential_scim_group_provisioning_step_2_header")}),(0,E.tZ)(_.n,{textStyle:"ds.body.standard.regular",children:t("tac_settings_confidential_scim_group_provisioning_step_2_description")})]}),(0,E.tZ)(_S.Z,{"aria-labelledby":"groupProvisioningActivation",checked:null!=(e=l.groupProvisioningActivated)&&e,onChange:()=>(async()=>{var e;i(!0),"failure"===(await s({groupProvisioningActivated:null==(e=!l.groupProvisioningActivated)||e})).tag?n({mood:"danger",description:t("tac_settings_confidential_scim_group_provisioning_generic_error")}):(n({mood:"brand",description:t(l.groupProvisioningActivated?"tac_settings_confidential_scim_group_provisioning_toast_disabled":"tac_settings_confidential_scim_group_provisioning_toast_enabled")}),l.groupProvisioningActivated||(0,y.Kz)(new u.UserSetupConfidentialScimEvent({scimSetupStep:u.ScimSetupStep.ActivateGroupSync}))),i(!1)})(),readOnly:a})]})]})};var AE;const wE=()=>{var e,t;const{translate:n}=(0,b.Z)(),[a,i]=(0,r.useState)(),[s,o]=(0,r.useState)(),[l,c]=(0,r.useState)(!1),[d,_]=(0,r.useState)(!1),[m,p]=(0,r.useState)(),[S,x]=(0,r.useState)(),[f,v]=(0,r.useState)(!1),{scimConfiguration:C,scimEndpoint:Z}=(0,pl.Y)(Ay.m,{scimConfiguration:{},scimEndpoint:{}},[]),k=(0,h.s)(),D=(0,Pe.o)(Ci.P.ComputePlanPricingMigration),T=(e,t)=>{p(e),x(t),c(!1),_(!0)},I=()=>{k?.billingType===g.qo.Invoice?v(!0):c(!0),(0,y.Kz)(new u.UserClickEvent({button:u.Button.BuySeats,clickOrigin:u.ClickOrigin.ProTip}))};if((0,r.useEffect)((()=>{C.status===G.rq.Success&&C.data&&i(C.data)}),[C.data?.active,C.data?.token]),(0,r.useEffect)((()=>{Z.status===G.rq.Success&&Z.data&&o(Z.data)}),[Z.data?.endpoint]),(0,r.useEffect)((()=>{(0,y.Nc)(u.PageView.TacSettingsDirectorySyncConfidentialScim)}),[]),!k)return null;const{lastBillingDateUnix:A,nextBillingDetails:w,spaceTier:O,seatsNumber:N,usersToBeRenewedCount:R}=k;return(0,E.BX)(r.Fragment,{children:[d?null:(0,E.tZ)(yf,{title:n("tac_settings_confidential_scim_header"),paragraph:n("tac_settings_confidential_scim_header_helper"),children:(0,E.tZ)(di,{sx:{padding:"0 32px"},fullWidth:!0,mainContent:()=>(0,E.tZ)("div",{sx:{display:"flex",flexDirection:"column",gap:"24px"},children:a?(0,E.BX)(r.Fragment,{children:[e||(e=(0,E.tZ)(CE,{scimConfiguration:a,scimEndpoint:s})),a.active?t||(t=(0,E.tZ)(TE,{onClickBuySeats:I})):null,AE||(AE=(0,E.tZ)(IE,{}))]}):null}),secondaryContent:(0,E.tZ)(kd,{heading:n("tac_settings_confidential_scim_help_card_header"),description:n("tac_settings_confidential_scim_help_card_description"),linkProps:{linkType:Zd.ExternalLink,linkHref:"https://support.dashlane.com/hc/articles/360013149040",onClick:()=>{(0,y.Kz)(new u.UserClickEvent({button:u.Button.SeeSetupGuide,clickOrigin:u.ClickOrigin.NeedHelp}))}},linkText:n("tac_settings_confidential_scim_help_card_link")})})}),f?(0,E.tZ)(rr,{openUpgradeDialog:()=>{c(!0),v(!1)},handleClose:()=>v(!1)}):null,l?D?(0,E.tZ)(gr,{numberOfCurrentPaidSlots:N,onUpgradeSuccess:T,onClose:()=>c(!1)}):(0,E.tZ)(Ki,{nextBillingDetails:w,numberOfCurrentPaidSlots:N,numberOfCurrentUsedSlots:R,onUpgradeSuccess:T,onRequestClose:()=>c(!1),planTier:O},A):null,d&&m&&S?(0,E.tZ)(Jr,{lastAdditionalSeatsDetails:m,lastBillingDetails:S,onNavigateBack:()=>{_(!1),p(void 0),x(void 0)}}):null]})},OE="/scim-provisioning",NE="/confidential-scim",RE="/active-directory",LE=()=>{var e,t;const{path:n}=(0,i.$B)(),{esConfig:a,esConfigLoading:r}=Tf(),{teamDeviceConfig:s}=pv({draft:!1,deviceAccessKey:a?.deviceAccessKey}),{teamId:o}=(0,Me.fV)(),{teamSettings:c={},teamSettingsLoading:d,updateTeamSettings:_,teamCapabilities:u}=Be(o),p=(0,jl.B)(),g=!d&&c.activeDirectorySyncType,h=s?.configProperties.scimEnabled,y=null!=(e=u?.activeDirectorySync.enabled)?e:null,{data:b}=(0,m.k)(wy.y,"ssoProvisioning"),S=b?.ssoSolution,{data:x,status:f}=(0,m.k)(Ay.m,"provisioningSolution"),v=S===Oy.WO.enum.confidentialSaml||S===Oy.WO.enum.ssoConnector||x===Ff.Hh.enum.confidentialScim||x===Ff.Hh.enum.adSync,C=S===Oy.WO.enum.selfHostedSaml||S===Oy.WO.enum.ssoConnector||x===Ff.Hh.enum.selfHostedScim||x===Ff.Hh.enum.adSync,Z=h&&!g||!y,k=S===Oy.WO.enum.confidentialSaml&&b?.ssoStatus===Oy.pI.enum.incomplete||g&&!h,D=d||r||!p||void 0===S||f===G.rq.Loading,T=S===Oy.WO.enum.ssoConnector;return(0,E.tZ)(Ce.T5p,{gridTemplateColumns:"auto",gridTemplateRows:"auto 1fr",fullWidth:!0,sx:{height:"100%"},children:D?(0,E.tZ)(Ce.T5p,{justifyItems:"center",children:(0,E.tZ)(l.Z,{size:75,sx:{marginTop:"20vh"}})}):(0,E.BX)(i.rs,{children:[(0,E.tZ)(i.Vy,{exact:!0,path:n,component:hE,permission:e=>e.adminAccess.hasFullAccess||e.adminAccess.hasBillingAccess,additionalProps:{ssoSolution:S,ssoStatus:b?.ssoStatus,provisioningSolution:x,isLoading:D}}),(0,E.tZ)(i.Vy,{exact:!0,path:`${n}${NE}`,component:wE,redirectPath:n,permission:e=>!C&&(e.adminAccess.hasFullAccess||e.adminAccess.hasBillingAccess)}),(0,E.tZ)(i.Vy,{path:`${n}${OE}`,component:lE,additionalProps:{isScimEnabled:null!=h?h:null,isScimCapable:null!=(t=u?.scim.enabled)?t:null,teamSettings:c,updateTeamSettings:_,disableForm:k,adSyncEnabled:g,isSsoConnectorSetup:T},permission:e=>!v&&(e.adminAccess.hasFullAccess||e.adminAccess.hasBillingAccess),redirectPath:n}),(0,E.tZ)(i.Vy,{path:`${n}${RE}`,component:qC,additionalProps:{isAdSyncCapable:y,disableForm:Z,adSyncEnabled:g,accountInfo:p},reducer:UC.ZP})]})})};var BE=n(37116);const ME=()=>{const{translate:e}=(0,b.Z)();return(0,E.BX)("div",{sx:{padding:"24px",borderColor:"ds.border.neutral.quiet.idle",backgroundColor:"ds.container.agnostic.neutral.supershy",borderRadius:"8px",display:"flex",flexDirection:"column",gap:"32px"},children:[(0,E.BX)("div",{sx:{display:"flex",flexDirection:"column",rowGap:"4px"},children:[(0,E.tZ)(pe.C,{label:e("team_integrations_mass_deployment_badge"),mood:"brand",intensity:"quiet"}),(0,E.tZ)(d.X,{as:"h2",textStyle:"ds.title.section.medium",color:"ds.text.neutral.catchy",children:e("team_integrations_mass_deployment_title")}),(0,E.tZ)(_.n,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",children:e("team_integrations_mass_deployment_description")})]}),(0,E.tZ)($t.Q,{href:"https://support.dashlane.com/hc/articles/16995560527250-Mass-deploy-the-Dashlane-browser-extension",isExternal:!0,children:e("team_integrations_mass_deployment_link")})]})};var PE=n(36211);const UE=({containerTitle:e,containerDescription:t,isMainButtonDisabled:n=!1,disabledReason:a,mainButtonLink:i,badgeLabel:r,isCapable:s,children:o})=>(0,E.BX)("div",{sx:{padding:"24px",borderColor:"ds.border.neutral.quiet.idle",backgroundColor:"ds.container.agnostic.neutral.supershy",borderRadius:"8px",display:"flex",flexDirection:"column",gap:"32px"},children:[(0,E.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"4px"},children:[(0,E.tZ)(pe.C,{label:r,mood:i?"brand":"neutral",intensity:"quiet"}),(0,E.tZ)(d.X,{as:"h2",textStyle:"ds.title.section.medium",color:"ds.text.neutral.catchy",children:e}),!!t&&(0,E.tZ)(_.n,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",children:t})]}),o,!!n&&!!a&&s&&(0,E.tZ)(_.n,{color:"ds.text.neutral.quiet",sx:{margin:"-28px 0px 0px 12px"},children:a})]}),XE=({subCardDescription:e,subCardHeader:t,image:n,externalLink:a,externalLinkTitle:r,externalLinkOnClick:s,isMainButtonDisabled:o=!1,mainButtonTitle:l,mainButtonLink:c,mainButtonOnClick:u,secondButtonTitle:m,secondButtonLink:p,upgradeButtonLink:g,isCapable:h})=>{const{translate:y}=(0,b.Z)();return(0,E.BX)("div",{sx:{display:"flex",flex:1,backgroundColor:"ds.background.alternate",padding:"24px",borderRadius:"8px"},children:[(0,E.BX)("div",{sx:{display:"flex",flex:n?3:1,flexDirection:"column",justifyContent:"center",gap:"10px"},children:[(0,E.tZ)(d.X,{as:"h2",textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:t}),e||a||c||g?(0,E.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"24px"},children:[e?(0,E.tZ)(_.n,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",children:e}):null,!!a&&(0,E.tZ)($t.Q,{href:a,isExternal:!0,onClick:s,children:r}),h&&c?(0,E.BX)("div",{sx:{display:"flex",gap:"8px"},children:[(0,E.tZ)(D.z,{as:i.rU,to:c,disabled:o,onClick:u,children:l}),p?(0,E.tZ)(D.z,{as:i.rU,to:p,mood:"neutral",intensity:"quiet",children:m}):null]}):g&&(0,E.tZ)(D.z,{as:i.rU,to:g,layout:"iconLeading",icon:"PremiumOutlined",mood:"brand",intensity:"catchy",children:y("team_settings_directory_sync_scim_paywall_upgrade_business")})]}):null]}),n&&(0,E.tZ)("div",{sx:{display:"flex",justifyContent:"end",flex:1},children:(0,E.tZ)("img",{role:"presentation",alt:"",src:n,sx:{objectFit:"contain",width:"100%",height:"auto",maxWidth:"200px"}})})]})},zE=({containerTitle:e,containerDescription:t,subCardDescription:n,subCardHeader:a,image:i,externalLink:r,externalLinkTitle:s,externalLinkOnClick:o,isMainButtonDisabled:l=!1,disabledReason:c,mainButtonTitle:d,mainButtonLink:_,mainButtonOnClick:u,secondButtonTitle:m,secondButtonLink:p,badgeLabel:g,upgradeButtonLink:h,isCapable:y})=>(0,E.tZ)(UE,{containerTitle:e,containerDescription:t,isMainButtonDisabled:l,disabledReason:c,mainButtonLink:_,badgeLabel:g,isCapable:y,children:(0,E.tZ)(XE,{subCardDescription:n,subCardHeader:a,image:i,externalLink:r,externalLinkTitle:s,externalLinkOnClick:o,isMainButtonDisabled:l,mainButtonTitle:d,mainButtonLink:_,mainButtonOnClick:u,secondButtonTitle:m,secondButtonLink:p,upgradeButtonLink:h,isCapable:y})});var FE;const qE=({containerTitle:e,subCardTitle:t,editButtonLink:n,badgeLabel:a})=>{const{translate:r}=(0,b.Z)();return(0,E.BX)("div",{sx:{padding:"24px",borderColor:"ds.border.neutral.quiet.idle",backgroundColor:"ds.container.agnostic.neutral.supershy",borderRadius:"8px",display:"flex",flexDirection:"column",gap:"32px"},children:[(0,E.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"4px"},children:[(0,E.tZ)(pe.C,{label:a,mood:"brand",intensity:"quiet"}),(0,E.tZ)(d.X,{as:"h2",textStyle:"ds.title.section.medium",color:"ds.text.neutral.catchy",children:e})]}),(0,E.BX)("div",{sx:{display:"flex",justifyContent:"space-between",backgroundColor:"ds.background.alternate",padding:"24px",borderRadius:"8px"},children:[(0,E.BX)("div",{sx:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,E.tZ)(d.X,{as:"h3",textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:t}),FE||(FE=(0,E.tZ)(pe.C,{label:"Enabled",mood:"positive",intensity:"catchy",layout:"labelOnly"}))]}),(0,E.tZ)(D.z,{as:i.rU,to:n,mood:"brand",intensity:"quiet",children:r("team_integrations_edit_button")})]})]})};var GE;const VE="team_integrations_siem_title",jE="team_integrations_siem_badge",WE=({active:e,ssoSolution:t})=>{const{translate:n}=(0,b.Z)(),{routes:r}=(0,i.Xo)(),s=(0,Pe.o)("setup_rollout_splunk_integration_prod"),o=t===Oy.WO.enum.none||t===Oy.WO.enum.confidentialSaml,l=s&&o,c=(0,$.C)()?.spaceTier===g.lD.Business,m=`${r.teamIntegrationsRoutePath}${a.Nr.SIEM}`;return l?e?(0,E.tZ)(qE,{containerTitle:n(VE),subCardTitle:(0,E.tZ)(d.X,{as:"h3",textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:n("team_integrations_splunk_active_title")}),badgeLabel:n(jE),editButtonLink:m}):(0,E.tZ)(zE,{containerTitle:n(VE),subCardHeader:(0,E.BX)("div",{sx:{display:"flex",gap:"8px"},children:[(0,E.tZ)(d.X,{as:"h3",textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:n("team_integrations_splunk_non_active_title")}),(0,E.BX)("div",{sx:{display:"flex",alignItems:"center",gap:"4px"},children:[GE||(GE=(0,E.tZ)(T.JO,{name:"TimeOutlined",size:"xsmall",color:"ds.text.neutral.standard"})),(0,E.BX)(_.n,{color:"ds.text.neutral.standard",textStyle:"ds.body.helper.regular",children:["5 ",n("team_integrations_time")]})]})]}),subCardDescription:n("team_integrations_splunk_non_active_subtitle"),badgeLabel:n(jE),externalLink:"https://support.dashlane.com/hc/articles/17674635955730",externalLinkTitle:n("team_integrations_splunk_non_active_link"),externalLinkOnClick:()=>(0,y.Kz)(new u.UserOpenHelpCenterEvent({helpCenterArticleCta:u.HelpCenterArticleCta.LearnAboutSplunkIntegration})),image:PE,mainButtonTitle:n("team_integrations_splunk_non_active_main_button"),mainButtonLink:m,mainButtonOnClick:()=>(0,y.Kz)(new u.UserClickEvent({button:u.Button.SetUp,clickOrigin:u.ClickOrigin.SplunkIntegration})),isCapable:c,upgradeButtonLink:`${r.teamAccountChangePlanRoutePath}?plan=business`}):(0,E.tZ)(zE,{containerTitle:n(VE),subCardHeader:(0,E.BX)("div",{sx:{display:"flex",gap:"8px"},children:[(0,E.tZ)(d.X,{as:"h3",textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:n("team_integrations_siem_subtitle")}),s?null:(0,E.tZ)(pe.C,{label:n("team_integrations_siem_coming_soon"),layout:"labelOnly",intensity:"catchy",mood:"brand"})]}),subCardDescription:n(s?"team_integrations_siem_unavailable_subdescription":"team_integrations_siem_subdescription"),badgeLabel:n(jE),isCapable:!1})};var HE,$E;const KE=()=>{const{translate:e}=(0,b.Z)();return(0,E.BX)("div",{sx:{display:"flex",gap:"8px"},children:[(0,E.tZ)(d.X,{as:"h3",textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:e("team_integrations_sso_subcard_title")}),(0,E.BX)("div",{sx:{display:"flex",alignItems:"center",gap:"4px"},children:[HE||(HE=(0,E.tZ)(T.JO,{name:"TimeOutlined",size:"xsmall",color:"ds.text.neutral.standard"})),(0,E.BX)(_.n,{color:"ds.text.neutral.standard",textStyle:"ds.body.helper.regular",children:["10 ",e("team_integrations_time")]})]})]})},YE=({isCapable:e,provisioningSolution:t})=>{const{routes:n}=(0,i.Xo)(),{translate:r}=(0,b.Z)();return(0,E.tZ)(zE,{containerTitle:r("team_integrations_sso_card_title"),subCardHeader:$E||($E=(0,E.tZ)(KE,{})),subCardDescription:r("team_integrations_sso_subcard_description"),image:Zs,externalLink:"https://support.dashlane.com/hc/articles/10992671925778",externalLinkTitle:r("team_integrations_mass_deployment_link"),isMainButtonDisabled:t===Ff.Hh.enum.selfHostedScim,disabledReason:r("team_integrations_sso_disabled"),mainButtonTitle:r("team_integrations_scim_main_button"),mainButtonLink:`${n.teamIntegrationsRoutePath}${a.Nr.SSO}${BC}`,secondButtonTitle:r("team_integrations_scim_second_button"),secondButtonLink:`${n.teamIntegrationsRoutePath}${a.Nr.SSO}`,badgeLabel:r("team_integrations_sso_badge"),upgradeButtonLink:`${n.teamAccountChangePlanRoutePath}?plan=business`,isCapable:e})},QE=({isCapable:e,provisioningSolution:t,ssoSolution:n,ssoStatus:r})=>{const{translate:s}=(0,b.Z)(),{routes:o}=(0,i.Xo)(),l=n===Oy.WO.enum.confidentialSaml||t!==Ff.Hh.enum.selfHostedScim,c=n===Oy.WO.enum.selfHostedSaml||t!==Ff.Hh.enum.confidentialScim;return r===Oy.pI.enum.enabled?(0,E.tZ)(qE,{containerTitle:s("team_integrations_sso_title"),subCardTitle:(0,E.tZ)(_.n,{children:n===Oy.WO.enum.confidentialSaml?s("team_integrations_confidential_sso_title"):s("team_integrations_self_hosted_sso_title")}),editButtonLink:`${o.teamIntegrationsRoutePath}${a.Nr.SSO}${l?BC:c?LC:RC}`,badgeLabel:s("team_integrations_sso_badge")}):(0,E.tZ)(YE,{isCapable:e,provisioningSolution:t})};var JE,eZ,tZ=n(78876);const nZ=()=>{const{translate:e}=(0,b.Z)();return(0,E.BX)("div",{sx:{display:"flex",gap:"8px"},children:[(0,E.tZ)(d.X,{as:"h3",textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:e("team_integrations_confidential_scim")}),(0,E.BX)("div",{sx:{display:"flex",alignItems:"center",gap:"4px"},children:[JE||(JE=(0,E.tZ)(T.JO,{name:"TimeOutlined",size:"xsmall",color:"ds.text.neutral.standard"})),(0,E.BX)(_.n,{color:"ds.text.neutral.standard",textStyle:"ds.body.helper.regular",children:["5 ",e("team_integrations_time")]})]})]})},aZ=({isCapable:e,ssoSolution:t,ssoStatus:n})=>{const{routes:r}=(0,i.Xo)(),{translate:s}=(0,b.Z)(),o=t===Oy.WO.enum.confidentialSaml&&n===Oy.pI.enum.enabled;return(0,E.tZ)(zE,{containerTitle:s("team_integrations_scim_title"),subCardHeader:eZ||(eZ=(0,E.tZ)(nZ,{})),subCardDescription:s("team_integrations_scim_subcard_description"),image:tZ,externalLink:"https://support.dashlane.com/hc/articles/10992671925778",externalLinkTitle:s("team_integrations_mass_deployment_link"),isMainButtonDisabled:!o,disabledReason:s("team_integrations_scim_disabled_reason"),mainButtonTitle:s("team_integrations_scim_main_button"),mainButtonLink:`${r.teamIntegrationsRoutePath}${a.Nr.DIRECTORY_SYNC}${cE.redirectUrl}`,secondButtonTitle:s("team_integrations_scim_second_button"),secondButtonLink:`${r.teamIntegrationsRoutePath}${a.Nr.DIRECTORY_SYNC}`,badgeLabel:s("team_integrations_scim_badge"),upgradeButtonLink:`${r.teamAccountChangePlanRoutePath}?plan=business`,isCapable:e})},iZ=({isCapable:e,ssoSolution:t,ssoStatus:n,provisioningSolution:r})=>{const{translate:s}=(0,b.Z)(),{routes:o}=(0,i.Xo)(),l=t===Oy.WO.enum.confidentialSaml||r!==Ff.Hh.enum.selfHostedScim,c=t===Oy.WO.enum.ssoConnector||r===Ff.Hh.enum.adSync,d=!l&&!c;return r===Ff.Hh.enum.none?(0,E.tZ)(aZ,{isCapable:e,ssoSolution:t,ssoStatus:n}):(0,E.tZ)(qE,{containerTitle:s("team_integrations_scim_title"),subCardTitle:(0,E.tZ)(_.n,{children:r===Ff.Hh.enum.confidentialScim?s("team_integrations_confidential_scim"):r===Ff.Hh.enum.selfHostedScim?s("team_integrations_self_hosted_scim"):s("team_integrations_active_directory")}),editButtonLink:`${o.teamIntegrationsRoutePath}${a.Nr.DIRECTORY_SYNC}${l?NE:d?OE:RE}`,badgeLabel:s("team_integrations_scim_badge")})},rZ=()=>{const{translate:e}=(0,b.Z)();return(0,E.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"16px"},children:[(0,E.tZ)(d.X,{as:"h1",textStyle:"ds.title.section.large",children:e("team_settings_menu_title_integrations")}),(0,E.tZ)(_.n,{children:e("team_integrations_title")})]})},sZ=({isOpen:e,onClose:t})=>{const{teamId:n}=(0,Me.fV)(),{clearSettings:a}=(0,te.u)(wy.y),{translate:i}=(0,b.Z)(),{showToast:s}=(0,o.p)(),[l,c]=(0,r.useState)(!1),[d,u]=(0,r.useState)(!1),m=async()=>{if(u(!1),!n)throw new Error("teamId not found");try{c(!0),await a({teamId:n}),t(),s({description:i("team_integrations_confidential_reset_toast_description"),closeActionLabel:i("_common_toast_close_label")})}catch(e){u(!0)}finally{c(!1)}};return(0,E.tZ)(J.Vq,{isDestructive:!0,isOpen:e,onClose:t,title:i("team_integrations_confidential_reset_dialog_title"),closeActionLabel:i("_common_dialog_dismiss_button"),children:(0,E.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"32px"},children:[(0,E.tZ)(_.n,{children:i("team_integrations_confidential_reset_dialog_description")}),(0,E.BX)("div",{sx:{alignItems:"flex-end",display:"flex",flexDirection:"column",gap:"8px"},children:[(0,E.BX)("div",{sx:{display:"flex",gap:"8px",justifyContent:"flex-end"},children:[(0,E.tZ)(D.z,{disabled:l,mood:"neutral",onClick:m,children:i("_common_action_cancel")}),(0,E.tZ)(D.z,{isLoading:l,mood:"danger",onClick:m,children:i("team_integrations_confidential_reset_dialog_delete_button")})]}),d?(0,E.tZ)(_.n,{color:"ds.text.danger.quiet",textStyle:"ds.body.helper.regular",children:i("team_integrations_confidential_reset_dialog_generic_error")}):null]})]})})},oZ=()=>{const{translate:e}=(0,b.Z)(),[t,n]=(0,r.useState)(!1);return(0,E.BX)(r.Fragment,{children:[(0,E.tZ)(rn.k,{actions:[(0,E.tZ)(D.z,{mood:"danger",onClick:()=>n(!0),children:e("team_integrations_confidential_reset_infobox_delete_button")},"delete-confidential-integrations")],description:e("team_integrations_confidential_reset_infobox_description"),icon:"FeedbackWarningOutlined",mood:"danger",size:"large",title:e("team_integrations_confidential_reset_infobox_title")}),(0,E.tZ)(sZ,{isOpen:t,onClose:()=>n(!1)})]})};var lZ,cZ=n(32170),dZ=n(23555);const _Z="team_integrations_public_api_title",uZ="team_integrations_public_api",mZ=()=>{const{translate:e}=(0,b.Z)(),{routes:t}=(0,i.Xo)(),{fetchPublicApiKeys:n}=(0,te.u)(dZ.y),{data:s}=(0,m.k)(dZ.y,"listPublicApiKeys");return(0,r.useEffect)((()=>{n(void 0)}),[]),s?.length?(0,E.tZ)(qE,{containerTitle:e(_Z),subCardTitle:(0,E.tZ)(d.X,{as:"h3",textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:e(uZ)}),editButtonLink:`${t.teamIntegrationsRoutePath}${a.Nr.PUBLIC_API}`,badgeLabel:e(uZ)}):(0,E.tZ)(zE,{containerTitle:e(_Z),subCardHeader:(0,E.BX)("div",{sx:{display:"flex",gap:"8px"},children:[(0,E.tZ)(d.X,{as:"h3",textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:e(uZ)}),(0,E.BX)("div",{sx:{display:"flex",alignItems:"center",gap:"4px"},children:[lZ||(lZ=(0,E.tZ)(T.JO,{name:"TimeOutlined",size:"xsmall",color:"ds.text.neutral.standard"})),(0,E.BX)(_.n,{color:"ds.text.neutral.standard",textStyle:"ds.body.helper.regular",children:["10 ",e("team_integrations_time")]})]})]}),subCardDescription:e("team_integrations_public_api_subcard_description"),image:cZ,externalLink:"https://support.dashlane.com/hc/articles/23955544757266",externalLinkTitle:e("team_integrations_public_api_subcard_link"),mainButtonTitle:e("team_integrations_public_api_edit_keys"),mainButtonLink:`${t.teamIntegrationsRoutePath}${a.Nr.PUBLIC_API}`,badgeLabel:e(uZ),isCapable:!0})};var pZ,gZ,hZ,yZ,bZ,SZ,xZ;const fZ=()=>{var e;const{translate:t}=(0,b.Z)(),n=(0,Nm.S)(),a=(0,m.k)(wy.y,"ssoProvisioning"),{data:i,status:s}=(0,m.k)(Ay.m,"provisioningSolution"),{data:o,status:c}=(0,m.k)(BE.v,"getSiemConfiguration"),u=(0,Pe.o)("setup_rollout_reset_confidential_button"),p=null==(e=n?.scim.enabled)||e;return a.status===G.rq.Loading||s===G.rq.Loading||c===G.rq.Loading?(0,E.tZ)("div",{sx:{display:"flex",justifyContent:"center"},children:pZ||(pZ=(0,E.tZ)(l.Z,{size:75}))}):a.status===G.rq.Error||s===G.rq.Error||c===G.rq.Error?(0,E.BX)("div",{sx:{display:"flex",flexDirection:"column",padding:"32px"},children:[gZ||(gZ=(0,E.tZ)(rZ,{})),(0,E.BX)(yn.Z,{sx:{display:"flex",alignItems:"center",minHeight:"600px",margin:"32px 0",padding:"32px",justifyContent:"center"},children:[hZ||(hZ=(0,E.tZ)(Qi.v,{name:"FeedbackFailOutlined",size:"xlarge",mood:"danger"})),(0,E.BX)(r.Fragment,{children:[(0,E.tZ)(d.X,{as:"h1",textStyle:"ds.title.section.large",sx:{marginBottom:"8px"},children:t("team_integrations_error_title")}),(0,E.tZ)(_.n,{textStyle:"ds.body.standard.regular",children:t("team_integrations_error_description")})]}),(0,E.tZ)(D.z,{onClick:()=>location.reload(),sx:{marginTop:"40px"},children:t("team_integrations_error_reload_button")}),(0,E.tZ)(Ed,{href:me.lh,children:t("team_integrations_error_help_center_link")})]})]}):(0,E.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"32px",padding:"32px"},children:[yZ||(yZ=(0,E.tZ)(rZ,{})),u?bZ||(bZ=(0,E.tZ)(oZ,{})):null,(0,E.tZ)(QE,{ssoSolution:a.data?.ssoSolution,ssoStatus:a.data?.ssoStatus,provisioningSolution:i,isCapable:p}),(0,E.tZ)(iZ,{ssoSolution:a.data?.ssoSolution,ssoStatus:a.data?.ssoStatus,provisioningSolution:i,isCapable:p}),SZ||(SZ=(0,E.tZ)(ME,{})),(0,E.tZ)(WE,{active:o?.active,ssoSolution:a.data?.ssoSolution}),xZ||(xZ=(0,E.tZ)(mZ,{}))]})};var vZ=n(20675),CZ=n(34041);const EZ=({defaultValue:e,onChange:t,disabled:n})=>{const{translate:a}=(0,b.Z)();return(0,E.BX)("div",{sx:{backgroundColor:"ds.container.agnostic.neutral.quiet",borderRadius:"8px",padding:"24px",display:"flex",flexDirection:"column",gap:"16px"},children:[(0,E.tZ)(d.X,{as:"h3",textStyle:"ds.title.supporting.small",color:"ds.text.neutral.quiet",children:a("team_settings_splunk_configuration_splunk_self_signed_certificate_subtitle")}),(0,E.BX)("div",{sx:{display:"flex",flexDirection:"row",gap:"16px",justifyContent:"space-between"},children:[(0,E.BX)("div",{sx:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"8px"},children:[(0,E.tZ)(d.X,{as:"h2",textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:a("team_settings_splunk_configuration_splunk_self_signed_certificate_title")}),(0,E.tZ)(_.n,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",children:a("team_settings_splunk_configuration_splunk_self_signed_certificate_description")})]}),(0,E.tZ)(_S.Z,{"aria-label":"selfSignedCertToggle",onChange:t,defaultChecked:e,disabled:n})]})]})},ZZ={INVALID_URL:"team_settings_set_siem_configuration_invalid_url",GENERIC_ERROR:"team_settings_set_siem_configuration_generic_error",TEAM_NOT_FOUND:"team_settings_set_siem_configuration_team_not_found",MISMATCHING_ADMIN_PROVISIONING_KEY:"team_settings_set_siem_configuration_mismatching_admin_provision_key",NO_SIEM_CONFIGURATION_UPDATE:"team_settings_set_siem_configuration_no_siem_configuration_update"},kZ=({token:e,instanceURL:t,isSelfSignedCertificateAllowed:n,active:a,isTeamAlreadyCreated:i,hasSiemPaywall:s,hasSelfSignedCertFF:l,ssoSolution:c})=>{const{translate:m}=(0,b.Z)(),{showToast:p}=(0,o.p)(),{trackPageView:g}=(0,vZ.D)(),{setSiemConfiguration:h}=(0,te.u)(BE.v),{createTeamInEnclave:S}=(0,te.u)(tx.K),x=(0,r.useRef)(null),f=(0,r.useRef)(null),v=(0,r.useRef)(n),[C,Z]=(0,r.useState)(!1),[k,T]=(0,r.useState)(""),[I,A]=(0,r.useState)(!1),[w,O]=(0,r.useState)(!1),N=e&&t,R=c===Oy.WO.enum.none||c===Oy.WO.enum.confidentialSaml,L=!s&&R;(0,r.useEffect)((()=>{g({pageView:u.PageView.TacIntegrationsSplunk})}),[]);const B=a=>{e!==x.current?.value||t!==f.current?.value||n!==v.current?Z(!0):Z(!1),"instanceURL"===a&&T("")},M=e=>{e.tag===CZ.M7.INVALID_URL?(T(m(ZZ.INVALID_URL)),(0,y.Kz)(new u.UserSetupSplunkIntegrationEvent({splunkSetupStep:u.SplunkSetupStep.InvalidUrlError}))):(p({mood:"danger",description:m(e.tag in ZZ?ZZ[e.tag]:ZZ.GENERIC_ERROR)}),(0,y.Kz)(new u.UserSetupSplunkIntegrationEvent({splunkSetupStep:"MISMATCHING_ADMIN_PROVISIONING_KEY"===e.tag?u.SplunkSetupStep.MismatchAdminProvisioningKeyError:"TEAM_NOT_FOUND"===e.tag?u.SplunkSetupStep.TeamNotFoundError:u.SplunkSetupStep.GenericError})))};return(0,E.BX)(r.Fragment,{children:[R?null:(0,E.tZ)(rn.k,{mood:"danger",title:m("team_settings_splunk_configuration_splunk_unavailable_infobox_title"),sx:{marginBottom:"24px"}}),(0,E.tZ)(yn.Z,{sx:{marginBottom:"24px"},children:(0,E.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"32px",opacity:L?"1":"0.5"},children:[(0,E.BX)("div",{children:[(0,E.tZ)(d.X,{as:"h2",sx:{marginBottom:"8px"},children:m("team_settings_splunk_configuration_step_1_title")}),(0,E.tZ)(_.n,{sx:{marginBottom:"16px"},children:m("team_settings_splunk_configuration_step_1_description")}),s?null:(0,E.tZ)(rn.k,{mood:R?"brand":"neutral",title:m("team_settings_splunk_configuration_step_1_infobox")})]}),(0,E.BX)("div",{children:[(0,E.tZ)(d.X,{as:"h2",sx:{marginBottom:"8px"},children:m("team_settings_splunk_configuration_step_2_title")}),(0,E.tZ)(_.n,{sx:{marginBottom:"24px"},children:m("team_settings_splunk_configuration_step_2_description")}),(0,E.BX)("div",{sx:{display:"flex",gap:"16px",flexDirection:"column"},children:[(0,E.tZ)(Tn.n,{value:t,label:m("team_settings_splunk_configuration_instance_url_label"),ref:f,onChange:()=>B("instanceURL"),id:"splunk-instance-url-field",disabled:!L,error:!!k,feedback:k||void 0}),(0,E.tZ)(bE.Z,{value:e,label:m("team_settings_splunk_configuration_token_label"),ref:x,onChange:()=>B("token"),disabled:!L,"data-testid":"splunk-token-field",toggleVisibilityLabel:{show:m("_common_password_show_label"),hide:m("_common_password_hide_label")}})]})]}),l?(0,E.tZ)(EZ,{defaultValue:n,onChange:e=>{v.current=e.target.checked,B("selfSignedCert")},disabled:!L}):null,(0,E.tZ)("div",{sx:{display:"flex",justifyContent:"end"},children:(0,E.tZ)(D.z,{intensity:"catchy",disabled:!C||!L,onClick:async()=>{A(!0),i||await S();const e=!x?.current?.value||!f?.current?.value,t=await h({token:x?.current?.value.trim(),instanceURL:f?.current?.value.trim(),active:!e&&void 0,isSelfSignedCertificateAllowed:v.current});"failure"===t.tag?M(t.error):(p({mood:"brand",description:m("team_settings_splunk_integration_saved_toast")}),(0,y.Kz)(new u.UserSetupSplunkIntegrationEvent({splunkSetupStep:u.SplunkSetupStep.SaveTokens})),Z(!1)),A(!1)},isLoading:I,children:m(N?"team_settings_siem_configuration_actions_update":"team_settings_siem_configuration_actions_save")})})]})}),(0,E.tZ)(yn.Z,{children:(0,E.BX)("div",{sx:{display:"flex",gap:"32px",alignItems:"center",justifyContent:"space-between",opacity:L?"1":"0.5"},children:[(0,E.BX)("div",{children:[(0,E.tZ)(d.X,{as:"h2",sx:{marginBottom:"8px"},children:m("team_settings_splunk_configuration_step_3_title")}),(0,E.tZ)(_.n,{children:m("team_settings_splunk_configuration_step_3_description")})]}),(0,E.tZ)("div",{children:(0,E.tZ)(_S.Z,{"aria-label":"activateSiemToggle",onChange:()=>(async e=>{O(!0);const t=await h({active:e});"failure"===t.tag?M(t.error):(p({mood:"brand",description:m(e?"team_settings_splunk_integration_activated_toast":"team_settings_splunk_integration_deactivated_toast")}),(0,y.Kz)(new u.UserSetupSplunkIntegrationEvent({splunkSetupStep:e?u.SplunkSetupStep.ActivateSplunkIntegration:u.SplunkSetupStep.DeactivateSplunkIntegration}))),O(!1)})(!a),checked:a,disabled:!N||w||!L})})]})})]})},DZ=()=>{const{translate:e}=(0,b.Z)(),{routes:t}=(0,i.Xo)();return(0,E.tZ)(rn.k,{title:e("team_settings_splunk_paywall_title"),description:e("team_settings_splunk_paywall_description"),mood:"brand",size:"large",actions:[(0,E.tZ)(D.z,{mood:"brand",intensity:"catchy",icon:"PremiumOutlined",layout:"iconLeading",as:Pm.rU,to:`${t.teamAccountChangePlanRoutePath}?plan=business`,children:e("team_settings_siem_paywall_upgrade_cta")},"upgrade")],sx:{margin:"16px 32px 32px 32px"}})};var TZ;const IZ=()=>{var e,t;const{translate:n}=(0,b.Z)(),{data:a,status:i}=(0,m.k)(BE.v,"getSiemConfiguration"),s=(0,Pe.o)("setup_rollout_siem_self_signed_certificate"),{data:o,status:d}=(0,m.k)(wy.y,"ssoProvisioning"),_=(0,$.C)(),p=i===G.rq.Success&&d===G.rq.Success;if(!_)return null;const h=_.spaceTier!==g.lD.Business&&_.spaceTier!==g.lD.BusinessPlus;return(0,E.tZ)(yf,{title:n("team_settings_siem_header"),paragraph:h?void 0:n("team_settings_siem_header_helper"),badge:h?{label:n("account_summary_upgrade_content_business_badge"),mood:"brand",iconName:"PremiumOutlined",layout:"iconLeading"}:void 0,children:(0,E.BX)(r.Fragment,{children:[h?TZ||(TZ=(0,E.tZ)(DZ,{})):null,(0,E.tZ)(di,{sx:{padding:"0 32px"},fullWidth:!0,mainContent:i===G.rq.Success&&d===G.rq.Success&&null!==s&&p?(0,E.tZ)(kZ,{token:null!=(e=a.token)?e:"",instanceURL:null!=(t=a.instanceURL)?t:"",isSelfSignedCertificateAllowed:a.isSelfSignedCertificateAllowed,active:a.active,isTeamAlreadyCreated:o.global.isTeamProvisionedInNitro,hasSiemPaywall:h,hasSelfSignedCertFF:!!s,ssoSolution:o.ssoSolution}):(0,E.tZ)(yn.Z,{children:(0,E.tZ)(c.k,{fullWidth:!0,justifyContent:"center",children:(0,E.tZ)(l.Z,{size:60,sx:{padding:"16px"}})})}),secondaryContent:(0,E.tZ)(kd,{heading:n("team_settings_siem_help_card_header"),description:n("team_settings_splunk_help_card_description"),linkProps:{linkType:Zd.ExternalLink,linkHref:"https://support.dashlane.com/hc/articles/17674635955730",onClick:()=>{(0,y.Kz)(new u.UserClickEvent({button:u.Button.SeeSetupGuide,clickOrigin:u.ClickOrigin.NeedHelp}))}},linkText:n("team_settings_splunk_help_card_link")})})]})})};var AZ,wZ,OZ=n(35001);const NZ="team_settings_public_api_table_heading",RZ="team_settings_public_api_table_action_revoke_tooltip",LZ="team_settings_public_api_table_action_copy",BZ=({keys:e,setIsDialogOpen:t})=>{const{translate:n}=(0,b.Z)(),[a,i]=(0,r.useState)(!1),{showToast:s}=(0,o.p)(),{fetchPublicApiKeys:l,revokePublicApiKey:c}=(0,te.u)(dZ.y);return(0,r.useEffect)((()=>{(0,y.Nc)(u.PageView.TacIntegrationsPublicApiKeys)}),[]),(0,E.BX)(yn.Z,{sx:{padding:"32px",margin:"12px 32px 32px 32px"},children:[(0,E.BX)("div",{sx:{display:"flex",gap:"16px",flexDirection:"row",justifyContent:"space-between",marginBottom:"16px"},children:[(0,E.BX)("div",{children:[(0,E.tZ)(d.X,{as:"h2",sx:{marginBottom:"8px"},children:n(NZ)}),(0,E.tZ)(_.n,{children:n("team_settings_public_api_table_description")})]}),(0,E.tZ)("div",{children:(0,E.tZ)(D.z,{layout:"iconLeading",icon:"ActionAddOutlined",sx:{height:"fit-content"},onClick:()=>{(0,y.Kz)(new u.UserGeneratePublicApiKeyEvent({publicApiKeyStep:u.PublicApiKeyStep.CreateKey})),t(!0)},children:n("team_settings_public_api_create_button")})})]}),(0,E.BX)(Yp.i,{"aria-label":n(NZ),children:[(0,E.BX)(Qp.s,{children:[(0,E.tZ)(Jp.b,{isRowHeader:!0,width:"2fr",children:n("team_settings_public_api_table_head_key")}),(0,E.tZ)(Jp.b,{children:n("team_settings_public_api_table_head_status")}),(0,E.tZ)(Jp.b,{children:n("team_settings_public_api_table_head_date")}),(0,E.tZ)(Jp.b,{children:n("team_settings_public_api_table_head_origin")}),AZ||(AZ=(0,E.tZ)(Jp.b,{}))]}),(0,E.tZ)(eg.i,{children:e.map((e=>(0,E.BX)(tg.S,{children:[(0,E.tZ)(ng.p,{children:(0,E.tZ)(Pb.s,{thumbnail:wZ||(wZ=(0,E.tZ)(Qi.v,{size:"medium",mood:"neutral",name:"ApiOutlined"})),title:e.description,description:e.accessKey})}),(0,E.tZ)(ng.p,{children:(0,E.tZ)(pe.C,{mood:e.valid?"brand":"neutral",label:e.valid?n("team_settings_public_api_table_label_active"):n("team_settings_public_api_table_label_revoked")})}),(0,E.tZ)(ng.p,{children:n.shortDate((0,ln.Z)(e.creationDateUnix),fn.qG.lll)}),(0,E.tZ)(ng.p,{children:e.origin}),(0,E.BX)(ng.p,{layout:"actions",children:[(0,E.tZ)(xo.u,{content:n(LZ),children:(0,E.tZ)(D.z,{"aria-label":n(LZ),layout:"iconOnly",icon:"ActionCopyOutlined",intensity:"supershy",mood:"brand",onClick:()=>(async e=>{try{await navigator.clipboard.writeText(e),s({description:n("team_settings_public_api_table_action_copy_success")})}catch(e){s({description:n("team_settings_public_api_table_action_copy_failure"),mood:"danger"})}(0,y.Kz)(new u.UserClickEvent({button:u.Button.DownloadKey}))})(e.accessKey)})}),e.valid?(0,E.tZ)(xo.u,{content:n(RZ),children:(0,E.tZ)(D.z,{"aria-label":n(RZ),layout:"iconOnly",icon:"ActionRevokeOutlined",mood:"warning",intensity:"supershy",isLoading:a===e.accessKey,onClick:()=>(async e=>{i(e);const t=await c({accessKey:e});(0,ne.d6)(t)?(s({description:n("team_settings_public_api_table_action_revoke_success"),mood:"brand"}),l(void 0)):s({description:n("team_settings_public_api_table_action_revoke_failure"),mood:"danger"}),i(!1),(0,y.Kz)(new u.UserClickEvent({button:u.Button.RevokeKey}))})(e.accessKey)})}):null]})]},e.accessKey)))})]})]})};var MZ;const PZ=({heading:e,description:t})=>(0,E.BX)("div",{sx:{display:"flex",gap:"16px",flexDirection:"row"},children:[MZ||(MZ=(0,E.tZ)(Qi.v,{name:"TipOutlined",size:"medium",mood:"brand"})),(0,E.BX)("div",{children:[(0,E.tZ)(d.X,{textStyle:"ds.title.block.medium",as:"h3",children:e}),(0,E.tZ)(_.n,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",children:t})]})]}),UZ=({setIsDialogOpen:e})=>{const{translate:t}=(0,b.Z)();return(0,r.useEffect)((()=>{(0,y.Nc)(u.PageView.TacIntegrationsPublicApi)}),[]),(0,E.tZ)(di,{mainContent:(0,E.tZ)(yn.Z,{sx:{minHeight:"680px",display:"flex",alignItems:"center",justifyContent:"center",padding:"24px",backgroundColor:"ds.container.agnostic.neutral.supershy",borderColor:"ds.border.neutral.quiet.idle"},children:(0,E.BX)("div",{sx:{display:"flex",flexDirection:"column",alignItems:"center",maxWidth:"570px",gap:"16px"},children:[(0,E.BX)("div",{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:"16px"},children:[(0,E.tZ)("img",{src:cZ,sx:{width:"240px",aspectRatio:"3/2"},alt:""}),(0,E.tZ)(d.X,{as:"h2",color:"ds.text.neutral.catchy",textStyle:"ds.title.section.large",sx:{letterSpacing:"-1px",textAlign:"center"},children:t("team_settings_public_api_onboarding_heading")})]}),(0,E.BX)("div",{sx:{display:"flex",padding:"24px",flexDirection:"column",alignItems:"flex-start",gap:"16px"},children:[(0,E.tZ)(PZ,{heading:t("team_settings_public_api_onboarding_feature_read_only_title"),description:t("team_settings_public_api_onboarding_feature_read_only_description")}),(0,E.tZ)(PZ,{heading:t("team_settings_public_api_onboarding_feature_compliance_title"),description:t("team_settings_public_api_onboarding_feature_compliance_description")})]}),(0,E.tZ)("div",{children:(0,E.tZ)(D.z,{layout:"iconLeading",icon:"ActionAddOutlined",sx:{height:"fit-content"},onClick:()=>{(0,y.Kz)(new u.UserGeneratePublicApiKeyEvent({publicApiKeyStep:u.PublicApiKeyStep.CreateKey})),e(!0)},children:t("team_settings_public_api_create_button")})})]})}),fullWidth:!0,secondaryContent:(0,E.tZ)(c.k,{gap:"16px",children:(0,E.BX)(yn.Z,{children:[(0,E.tZ)(pe.C,{label:t("team_settings_public_api_onboarding_card_badge"),layout:"iconLeading",iconName:"TipOutlined",mood:"brand"}),(0,E.tZ)(d.X,{textStyle:"ds.title.block.medium",as:"h3",children:t("team_settings_public_api_onboarding_card_title")}),(0,E.tZ)(_.n,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",children:t("team_settings_public_api_onboarding_card_description")}),(0,E.tZ)($t.Q,{size:"small",isExternal:!0,href:"https://support.dashlane.com/hc/articles/23955544757266",onClick:()=>{(0,y.Kz)(new u.UserOpenHelpCenterEvent({helpCenterArticleCta:u.HelpCenterArticleCta.ExplorePublicApiDocumentation}))},children:t("team_settings_public_api_onboarding_card_link")})]})})})};var XZ,zZ,FZ,qZ;const GZ="team_settings_public_api_generate_copy_key",VZ="team_settings_public_api_generate_download_key",jZ=({onClose:e})=>{const{translate:t}=(0,b.Z)(),[n,a]=(0,r.useState)("new"),[i,s]=(0,r.useState)(),[l,c]=(0,r.useState)(),{showToast:d}=(0,o.p)(),{createPublicApiKey:_,fetchPublicApiKeys:m}=(0,te.u)(dZ.y);return(0,r.useEffect)((()=>{l?.bearerToken&&(0,y.Kz)(new u.UserGeneratePublicApiKeyEvent({publicApiKeyStep:u.PublicApiKeyStep.KeyGenerated}))}),[l?.bearerToken]),(0,E.tZ)(J.Vq,{isOpen:!0,onClose:e,closeActionLabel:t("_common_action_close"),isMandatory:"loading"===n||"success"===n,children:l?.bearerToken?(0,E.BX)(r.Fragment,{children:[(0,E.tZ)(J.$N,{title:t("team_settings_public_api_generate_success_title"),decorationSlot:zZ||(zZ=(0,E.tZ)(Qi.v,{name:"ItemSecretOutlined",size:"xlarge",mood:"brand"}))}),(0,E.BX)("div",{sx:{backgroundColor:"ds.container.agnostic.neutral.quiet",display:"flex",gap:"4px",flexDirection:"column",padding:"8px 16px"},children:[(0,E.tZ)(en.C,{label:t("team_settings_public_api_generate_readonly_description"),value:i}),FZ||(FZ=(0,E.tZ)(z.i,{})),(0,E.tZ)(en.C,{label:t("team_settings_public_api_generate_readonly_public_key"),value:l?.publicKey}),qZ||(qZ=(0,E.tZ)(z.i,{})),(0,E.tZ)(en.C,{"data-testid":"public-api-bearer-token",label:t("team_settings_public_api_generate_readonly_private_key"),value:l?.bearerToken,actions:[(0,E.tZ)(xo.u,{content:t(VZ),children:(0,E.tZ)(D.z,{layout:"iconOnly",icon:"DownloadOutlined",mood:"brand",intensity:"supershy","aria-label":t(VZ),onClick:()=>{return e=l.bearerToken,(0,_o.W)(e,"dashlane-bearer-token.txt"),void(0,y.Kz)(new u.UserGeneratePublicApiKeyEvent({publicApiKeyStep:u.PublicApiKeyStep.DownloadKey}));var e}})},"download"),(0,E.tZ)(xo.u,{content:t(GZ),children:(0,E.tZ)(D.z,{layout:"iconOnly",icon:"ActionCopyOutlined",mood:"brand",intensity:"supershy","aria-label":t(GZ),autoFocus:!0,onClick:()=>{return e=l.bearerToken,navigator.clipboard.writeText(e),d({description:t("team_settings_public_api_generate_copy_success"),mood:"brand"}),void(0,y.Kz)(new u.UserGeneratePublicApiKeyEvent({publicApiKeyStep:u.PublicApiKeyStep.CopyKey}));var e}})},"copy")]})]}),(0,E.tZ)(rn.k,{title:t("team_settings_public_api_generate_warning_private_key"),size:"medium",mood:"warning",sx:{marginTop:"16px"}}),(0,E.tZ)(J.cN,{actions:{primary:{children:t("_common_dialog_done_button"),onClick:()=>{d({description:t("team_settings_public_api_generate_toast_success"),mood:"brand"}),e()}}}})]}):(0,E.BX)(r.Fragment,{children:[(0,E.tZ)(J.$N,{title:t("team_settings_public_api_generate_title"),decorationSlot:XZ||(XZ=(0,E.tZ)(Qi.v,{name:"ApiOutlined",size:"xlarge",mood:"brand"}))}),(0,E.tZ)(Tn.n,{label:t("team_settings_public_api_generate_description"),placeholder:t("team_settings_public_api_generate_description_placeholder"),onChange:e=>s(e.target.value),readOnly:"loading"===n}),(0,E.tZ)(J.cN,{actions:{primary:{children:t("team_settings_public_api_generate_key_button"),onClick:async()=>{if(i){a("loading");const r=await _({description:i});if((0,ne.hx)(r))d({description:t("team_settings_public_api_generate_error_generic"),mood:"danger"}),(0,y.Kz)(new u.UserGeneratePublicApiKeyEvent({publicApiKeyStep:u.PublicApiKeyStep.KeyGenerationFailed})),e();else if((0,ne.d6)(r)){var n;a("success");const[e,t,i]=(null!=(n=r.data?.id)?n:"").split("_");c({publicKey:t,bearerToken:`DLP_${e}_${t}_${i}`}),m(void 0),(0,y.Kz)(new u.UserGeneratePublicApiKeyEvent({publicApiKeyStep:u.PublicApiKeyStep.GenerateKey}))}}},disabled:!i,isLoading:"loading"===n}}})]})})},WZ=()=>{const{translate:e}=(0,b.Z)(),[t,n]=(0,r.useState)(!1),[a,i]=(0,r.useState)(!1),[s,o]=(0,r.useState)(!1),{status:c,data:p}=(0,m.k)(dZ.y,"listPublicApiKeys"),{fetchPublicApiKeys:g}=(0,te.u)(dZ.y);return(0,r.useEffect)((()=>{t||(n(!0),g(void 0).catch((()=>i(!0))))}),[t]),(0,r.useEffect)((()=>{(a||c===G.rq.Error)&&(0,y.Nc)(u.PageView.TacIntegrationsPublicApiErrorLoadingPublicApiKeys)}),[a,c]),a||c===G.rq.Error?(0,E.tZ)("div",{sx:{minHeight:"680px",display:"flex",alignItems:"center",justifyContent:"center",padding:"24px"},children:(0,E.BX)("div",{sx:{display:"flex",flexDirection:"column",alignItems:"center",maxWidth:"480px"},children:[(0,E.tZ)(T.JO,{name:"FeedbackFailOutlined",color:"ds.text.danger.standard",size:"xlarge",sx:{marginBottom:"40px",width:"64px",height:"64px"}}),(0,E.tZ)(d.X,{as:"h1",textStyle:"ds.title.section.large",color:"ds.text.danger.standard",sx:{marginBottom:"8px"},children:e("team_settings_public_api_error_title")}),(0,E.tZ)(_.n,{sx:{textAlign:"center"},children:e("team_settings_public_api_error_description")}),(0,E.tZ)($t.Q,{isExternal:!0,href:"https://support.dashlane.com/hc/articles/23955544757266",sx:{marginTop:"40px"},children:e("team_settings_public_api_error_link")})]})}):p?(0,E.BX)(OZ.r,{moduleName:"TAC",useCaseName:"publicApi",children:[(0,E.BX)("div",{sx:{padding:"24px 32px"},children:[(0,E.tZ)(d.X,{as:"h1",textStyle:"ds.title.section.large",color:"ds.text.neutral.catchy",children:e("team_settings_public_api_title")}),p.length?(0,E.BX)(r.Fragment,{children:[(0,E.tZ)(_.n,{sx:{marginTop:"16px"},children:e("team_settings_public_api_description")}),(0,E.tZ)($t.Q,{isExternal:!0,size:"medium",href:"https://support.dashlane.com/hc/articles/23955544757266",children:e("team_settings_public_api_link")})]}):null]}),p.length?(0,E.tZ)(BZ,{keys:p,setIsDialogOpen:o}):(0,E.tZ)(UZ,{setIsDialogOpen:o}),s?(0,E.tZ)(jZ,{onClose:()=>o(!1)}):null]}):(0,E.tZ)(l.Z,{size:90,sx:{padding:"32px"}})};var HZ=n(5147),$Z=n(92499);const KZ=({iconName:e,title:t,titleColor:n,titleStyle:a,description:i,descriptionColor:r,descriptionStyle:s})=>(0,E.BX)("div",{sx:{display:"flex",flexDirection:"row",gap:"16px"},children:[(0,E.tZ)(Qi.v,{name:e,mood:"brand"}),(0,E.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"4px"},children:[(0,E.tZ)(d.X,{as:"h3",textStyle:null!=a?a:"ds.title.block.medium",color:null!=n?n:"ds.text.neutral.catchy",children:t}),(0,E.tZ)(_.n,{textStyle:null!=s?s:"ds.body.reduced.regular",color:null!=r?r:"ds.text.neutral.quiet",children:i})]})]}),YZ=()=>{(0,y.Kz)(new u.UserClickEvent({button:u.Button.LearnMoreAboutPhishingProtection,clickOrigin:u.ClickOrigin.PhishingProtection}))},QZ=()=>{(0,r.useEffect)((()=>{(0,y.Nc)(u.PageView.ToolsAntiPhishing)}),[])};var JZ;const ek={descriptionStyle:"ds.body.standard.regular",titleColor:"ds.text.neutral.standard"},tk=({title:e})=>(0,E.BX)(c.k,{flexDirection:"row",alignItems:"center",gap:"8px",children:[(0,E.tZ)(d.X,{as:"h2",color:"ds.text.neutral.catchy",textStyle:"ds.title.section.medium",children:e}),JZ||(JZ=(0,E.tZ)(pe.C,{mood:"positive",intensity:"quiet",layout:"labelOnly",label:"active"}))]}),nk=()=>{const{translate:e}=(0,b.Z)();QZ();const t=[{title:e("team_settings_phishing_alert_homepage_feature_description_one_title"),description:e("team_settings_phishing_alert_homepage_feature_description_one_description"),iconName:"PhishingAlertOutlined",...ek},{title:e("team_settings_phishing_alert_homepage_feature_description_two_title"),description:e("team_settings_phishing_alert_homepage_feature_description_two_description"),iconName:"TipOutlined",...ek}];return(0,E.tZ)(yn.Z,{sx:{ml:"32px",mr:"32px"},children:(0,E.BX)(c.k,{flexDirection:"row",justifyContent:"center",children:[(0,E.BX)(c.k,{flexDirection:"column",gap:"16px",justifyContent:"space-evenly",sx:{width:"70%",flexBasis:"70%"},children:[(0,E.tZ)(tk,{title:e("team_settings_phishing_alert_homepage_header")}),t.map((e=>(0,E.tZ)(KZ,{...e},e.title))),(0,E.tZ)($t.Q,{href:me.Vz,size:"medium",target:"_blank",rel:"noreferrer",role:"link",sx:{ml:"8px"},onClick:()=>{YZ()},children:e("team_settings_phishing_alert_homepage_learn_more_info_link")})]}),(0,E.tZ)(qa.b,{lightSrc:HZ,darkSrc:$Z,width:"30%",alt:"antiphishing-illustration",sx:{flexBasis:"30%"}})]})})};var ak;const ik={descriptionStyle:"ds.body.standard.regular",titleColor:"ds.text.neutral.standard"},rk="team_settings_phishing_alert_paywall_feature_description_two_title",sk=()=>{const{translate:e}=(0,b.Z)(),{routes:t}=(0,i.Xo)();QZ();const n=[{title:e("team_settings_phishing_alert_paywall_feature_description_one_title"),description:e("team_settings_phishing_alert_paywall_feature_description_one_description"),iconName:"PhishingAlertOutlined",...ik},{title:e(rk),description:e(rk),iconName:"TipOutlined",...ik}];return(0,E.BX)(yn.Z,{sx:{marginLeft:"32px",marginRight:"32px",justifyContent:"center",alignItems:"center",height:"100%"},children:[ak||(ak=(0,E.tZ)(qa.b,{lightSrc:HZ,darkSrc:$Z,width:"30%",alt:"antiphishing-illustration"})),(0,E.BX)(c.k,{flexDirection:"column",gap:"40px",alignItems:"center",children:[(0,E.tZ)(d.X,{as:"h1",children:e("team_settings_phishing_alert_paywall_header")}),(0,E.tZ)(c.k,{flexDirection:"column",gap:"16px",children:n.map((e=>(0,E.tZ)(KZ,{...e},e.title)))}),(0,E.BX)(c.k,{flexDirection:"row",justifyContent:"center",gap:"16px",children:[(0,E.tZ)($t.Q,{href:me.Vz,isExternal:!0,target:"_blank",rel:"noreferrer",role:"link",onClick:()=>{YZ()},children:e("team_settings_phishing_alert_paywall_learn_more_info_link")}),(0,E.tZ)(D.z,{as:i.rU,to:`${t.teamAccountChangePlanRoutePath}?plan=business`,layout:"iconLeading",icon:"PremiumOutlined",onClick:()=>{(0,y.Kz)(new u.UserCallToActionEvent({chosenAction:u.CallToAction.UpgradeToBusinessPlus,hasChosenNoAction:!1}))},children:e("team_settings_phishing_alert_paywall_upgrade")})]})]})]})};var ok,lk,ck;const dk=()=>{const e=(0,i.k6)(),{routes:t}=(0,i.Xo)(),n=(0,Pe.o)("ace_web_phishing_page_tac"),a=(0,gt.rp)(["autofillWithPhishingPrevention"]),{translate:r}=(0,b.Z)();return null===n?ok||(ok=(0,E.tZ)(c.k,{justifyContent:"center",children:(0,E.tZ)(l.Z,{size:75})})):n?(0,E.BX)("div",{sx:{padding:"24px 0",height:"77vh"},children:[(0,E.BX)(c.k,{flexDirection:"column",gap:"16px",sx:{pl:"32px",pb:"32px"},children:[(0,E.tZ)(d.X,{as:"h1",textStyle:"ds.title.section.large",color:"ds.text.neutral.catchy",children:r("team_settings_phishing_alert_title")}),a?(0,E.tZ)(_.n,{children:r("team_settings_phishing_alert_description")}):null]}),a?lk||(lk=(0,E.tZ)(nk,{})):ck||(ck=(0,E.tZ)(sk,{}))]}):(e.push(t.teamDashboardRoutePath),null)};var _k;const uk=()=>{const{translate:e}=(0,b.Z)();return(0,E.BX)(yn.Z,{gap:"8px",children:[(0,E.tZ)(d.X,{as:"h2",textStyle:"ds.title.supporting.small",color:"ds.text.neutral.quiet",sx:{mb:"16px"},children:e("webapp_tac_infocard_title")}),(0,E.tZ)(_.n,{color:"ds.text.neutral.catchy",textStyle:"ds.title.block.medium",as:"h3",children:e("team_settings_nudges_help_card_header")}),(0,E.tZ)(_.n,{color:"ds.text.neutral.quiet",textStyle:"ds.body.standard.regular",sx:{mb:"16px"},children:e("team_settings_nudges_help_card_header_description")}),(0,E.tZ)($t.Q,{onClick:()=>(0,y.Kz)(new u.UserClickEvent({button:u.Button.SeeNudgesSetupGuide,clickOrigin:u.ClickOrigin.NeedHelp})),href:"https://support.dashlane.com/hc/articles/19539724667026",isExternal:!0,children:e("team_settings_nudges_help_card_link")}),_k||(_k=(0,E.tZ)(z.i,{})),(0,E.tZ)(_.n,{color:"ds.text.neutral.catchy",textStyle:"ds.title.block.medium",as:"h3",children:e("team_settings_nudges_feedback_title")}),(0,E.tZ)(_.n,{color:"ds.text.neutral.quiet",textStyle:"ds.body.standard.regular",sx:{mb:"16px"},children:e("team_settings_nudges_feedback_description")}),(0,E.tZ)(D.z,{onClick:()=>{(0,y.Kz)(new u.UserClickEvent({button:u.Button.SubmitNudgesFeedback})),(0,W.Yo)("mailto:feedback@dashlane.com?subject=Nudges%20Private%20Beta%20Feedback")},mood:"neutral",intensity:"quiet",layout:"labelOnly",fullsize:!0,children:e("team_settings_nudges_feedback_cta")})]})},mk=({title:e,preview:t,value:n,onValueChange:a})=>{const[i,s]=(0,r.useState)(!1),{translate:o}=(0,b.Z)(),l=null===n;return(0,E.BX)("div",{sx:{pt:"16px",borderTop:"1px solid",borderTopColor:"ds.border.neutral.quiet.idle"},children:[(0,E.BX)(c.k,{justifyContent:"space-between",alignItems:"center",children:[(0,E.tZ)(d.X,{as:"h3",color:"ds.text.neutral.catchy",textStyle:"ds.title.block.medium",children:o(e)}),(0,E.BX)(c.k,{alignItems:"center",gap:"16px",children:[(0,E.tZ)(D.z,{mood:"brand",intensity:"supershy",layout:"iconLeading",icon:i?"ActionCloseOutlined":"ActionRevealOutlined",onClick:()=>{(0,y.Kz)(new u.UserSetupNudgesEvent({action:u.NudgeAction.SeeInContextNudgeExample,integrationPlatform:u.IntegrationPlatform.InContext})),s((e=>!e))},children:o(i?"team_settings_nudges_close_preview":"team_settings_nudges_preview")}),(0,E.tZ)(_S.Z,{disabled:l,checked:l?void 0:n,onChange:a,sx:{margin:0}})]})]}),i?(0,E.tZ)("img",{src:t,sx:{width:"100%",mt:"16px"},alt:""}):null]})},pk=n.p+"fe0a08b05ec609321185.png",gk=n.p+"3badebefae8000984721.png",hk=n.p+"2e7570481627708a76ca.png";var yk,bk,Sk=function(e){return e.WEAK="weak",e.REUSED="reused",e.COMPROMISED="compromised",e}(Sk||{});const xk=[{type:Sk.COMPROMISED,policyName:"compromisedInAppNudgeEnabled",preview:pk,title:"team_settings_in-app_nudges_compromised_title"},{type:Sk.WEAK,policyName:"weakInAppNudgeEnabled",preview:hk,title:"team_settings_in-app_nudges_weak_title"},{type:Sk.REUSED,policyName:"reusedInAppNudgeEnabled",preview:gk,title:"team_settings_in-app_nudges_reused_title"}],fk={compromised:u.NudgeType.CompromisedPasswords,reused:u.NudgeType.ReusedPasswords,weak:u.NudgeType.WeakPasswords},vk="team_settings_nudges_configuration_update_nudge_error",Ck=()=>{const[e,t]=(0,r.useState)({weak:!1,reused:!1,compromised:!1}),[n,a]=(0,r.useState)(!0),i=(0,Xe.Y)(),m=ix(),{translate:p}=(0,b.Z)(),{showToast:g}=(0,o.p)();(0,r.useEffect)((()=>{if(i.status===s.rq.Success){let e=i.data.spaces?.find((({tier:e})=>"businessplus"===e));e||(e=i.data.spaces?.find((({tier:e})=>"business"===e||"entreprise"===e))),e&&(t({weak:e.info.weakPasswordInappNudgesEnabled,reused:e.info.reusedPasswordInappNudgesEnabled,compromised:e.info.compromisedPasswordInappNudgesEnabled}),a(!1))}}),[i]);const h=i.status!==s.rq.Success||!i.data;return n||h?yk||(yk=(0,E.tZ)(c.k,{justifyContent:"center",children:(0,E.tZ)(l.Z,{size:75})})):(0,E.BX)(yn.Z,{sx:{display:"flex",flexDirection:"column",gap:"16px",backgroundColor:"ds.container.agnostic.neutral.supershy",borderColor:"ds.border.neutral.quiet.idle"},children:[(0,E.BX)(c.k,{alignItems:"center",gap:"8px",children:[bk||(bk=(0,E.tZ)(Qi.v,{name:"WebOutlined"})),(0,E.tZ)(d.X,{as:"h2",color:"ds.text.neutral.catchy",textStyle:"ds.title.section.medium",children:p("team_settings_in-app_nudges_title")})]}),(0,E.tZ)(_.n,{textStyle:"ds.body.standard.regular",children:p("team_settings_in-app_nudges_description")}),xk.map((({type:n,title:a,preview:r,policyName:s})=>(0,E.tZ)(mk,{title:a,preview:r,value:e[n],onValueChange:async({target:{checked:e}})=>{t((e=>({...e,[n]:null}))),(0,y.Kz)(new u.UserToggleNudgeEvent({nudgeState:e?u.State.On:u.State.Off,integrationPlatform:u.IntegrationPlatform.InContext,nudgeType:fk[n]}));const a=await(async(e,t)=>{const n=i.data.spaces?.find((({tier:e})=>"businessplus"===e))?.teamId;if(!n||isNaN(Number(n)))return g({description:p(vk),mood:"danger"}),!t;try{return await m({teamId:Number(n),policyUpdates:{[e]:t}}),g({description:p("team_settings_nudges_configuration_update_nudge_success"),mood:"brand"}),t}catch{return g({description:p(vk),mood:"danger"}),!t}})(s,e);t((e=>({...e,[n]:a})))}},n)))]})};var Ek=n(75822),Zk=n(91356),kk=n(81244),Dk=n(51545),Tk=n(42557),Ik=n(62516),Ak=n(19708);const wk=e=>Ak.c.findIndex((t=>t===e)),Ok=e=>{const t=new Date;return t.setUTCHours(e,0,0),t.getHours()},Nk=(e,t)=>{const n=(0,Tk.Z)(new Date,wk(e));n.setUTCHours(t,0,0);const a=n.getDay();return Ak.c[a]},Rk="nudges_configuration_options_frequency",Lk="nudges_configuration_options_day",Bk={compromised_passwords:"nudges_compromised_password_nudge_title",reused_passwords:"nudges_reused_password_nudge_title",weak_passwords:"nudges_weak_password_nudge_title"},Mk={compromised_passwords:"nudges_compromised_password_nudge_description",reused_passwords:"nudges_reused_password_nudge_description",weak_passwords:"nudges_weak_password_nudge_description"},Pk={compromised_passwords:"monday",reused_passwords:"wednesday",weak_passwords:"friday"},Uk={compromised_passwords:"https://support.dashlane.com/hc/en-us/articles/202699411-Password-Health#compromised",reused_passwords:"https://support.dashlane.com/hc/en-us/articles/202699411-Password-Health#reused",weak_passwords:"https://support.dashlane.com/hc/en-us/articles/202699411-Password-Health#weak"},Xk={compromised_passwords:u.NudgeType.CompromisedPasswords,reused_passwords:u.NudgeType.ReusedPasswords,weak_passwords:u.NudgeType.WeakPasswords},zk={compromised_passwords:u.ClickOrigin.NudgesCompromisedPasswords,reused_passwords:u.ClickOrigin.NudgesReusedPasswords,weak_passwords:u.ClickOrigin.NudgesWeakPasswords},Fk=({updateNudge:e,sendTestNudge:t,displayName:n,dropdownOptions:a,existingNudge:i})=>{var s;const{translate:o}=(0,b.Z)(),[l,_]=(0,r.useState)(i?.nextRunTimestamp?new Date(1e3*i.nextRunTimestamp):void 0),m=(0,la.TA)({initialValues:{active:!!i&&i.active,frequency:null!=(s=i?.options?.frequency)?s:"weekly",dayOfWeek:i?.options?.dayOfWeek?Nk(i.options.dayOfWeek,i.options.timeOfDayUtc):Pk[n],localTimeOfDay:i?.options?.timeOfDayUtc?Ok(i.options.timeOfDayUtc):14},onSubmit:async t=>{const{active:a,frequency:i,dayOfWeek:r,localTimeOfDay:s}=t,{utcHours:o,utcDay:l}=((e,t)=>{let n=new Date;n.setHours(e,0,0),n=(0,Tk.Z)(n,wk(t));const a=n.getUTCDay();return{utcHours:n.getUTCHours(),utcDay:Ak.c[a]}})(s,r);await e({name:n,active:a,options:{frequency:i,dayOfWeek:"weekly"===i?l:void 0,timeOfDayUtc:o}})}}),p=async(e,t)=>{if("active"===t&&(0,y.Kz)(new u.UserToggleNudgeEvent({nudgeState:e?u.State.On:u.State.Off,integrationPlatform:u.IntegrationPlatform.Slack,nudgeType:Xk[n]})),await m.setFieldValue(t,e),await m.submitForm(),"frequency"===t||"dayOfWeek"===t||"localTimeOfDay"===t){const n=(e=>{const t=new Date;let n=(0,Ek.Z)(t,e.localTimeOfDay);if(n=(0,Zk.Z)(n,0),"daily"===e.frequency)n=(0,Ic.Z)(n,1);else{const a=(0,kk.Z)(n),i=wk(e.dayOfWeek),r=i===a&&t.getHours()>=e.localTimeOfDay;(i!==a||r)&&(n=(0,Dk.Z)(n,wk(e.dayOfWeek)))}return n})({...m.values,[t]:e});_(n)}};return(0,E.BX)(r.Fragment,{children:[(0,E.tZ)(_S.Z,{id:n,label:o(Bk[n]),description:o(Mk[n]),onChange:e=>p(e.target.checked,"active"),checked:m.values.active}),m.values.active&&a?(0,E.BX)("div",{sx:{display:"flex",flexDirection:"column",backgroundColor:"ds.container.agnostic.neutral.standard",borderColor:"ds.border.neutral.standard.idle",padding:"16px",borderRadius:"8px",marginY:"16px",gap:"16px"},children:[(0,E.tZ)(d.X,{as:"h1",textStyle:"ds.title.supporting.small",color:"ds.text.neutral.quiet",children:o("nudges_configuration_options_title")}),(0,E.BX)("div",{sx:{display:"grid",gridTemplateColumns:["auto","auto","auto auto","auto auto auto"],gap:"16px"},children:[(0,E.tZ)(Ko.m,{label:o(Rk),onChange:e=>p(e,"frequency"),value:m.values.frequency,labelPersists:!0,children:a.frequency.map(((e,t)=>(0,E.tZ)(Yo.$,{value:e,children:o(`${Rk}_${e}`)},`${e}-${t}`)))}),(0,E.tZ)(Ko.m,{label:o(Lk),onChange:e=>p(e,"dayOfWeek"),value:m.values.dayOfWeek,disabled:"daily"===m.values.frequency,labelPersists:!0,children:a.dayOfWeek.map(((e,t)=>(0,E.tZ)(Yo.$,{value:e,children:o(`${Lk}_${e}`)},`${e}-${t}`)))}),(0,E.tZ)(Ko.m,{label:o("nudges_configuration_options_hour"),onChange:e=>p(Number(e),"localTimeOfDay"),value:String(m.values.localTimeOfDay),labelPersists:!0,children:a.timeOfDayUtc.map(((e,t)=>(0,E.tZ)(Yo.$,{value:String(e),children:`${e}:00`},`${e}-${t}`)))})]}),l?(0,E.tZ)(rn.k,{title:(e=>{var t;const a=null!=(t=i?.expectedUserCount)?t:0;return 0===a?o("nudges_configuration_next_occurrence_no_user",{nudgeType:o(Bk[n]).toLocaleLowerCase()}):o(1===a?"nudges_configuration_next_occurrence_single_user":"nudges_configuration_next_occurrence",{numberOfUsers:a,time:(0,sa.Z)(e,"kk:mm"),date:(0,Ik.Z)(e,{weekday:"long",day:"numeric",month:"long"}),timezone:Intl.DateTimeFormat().resolvedOptions().timeZone})})(l)}):null,(0,E.BX)(c.k,{flexDirection:"row",alignItems:"center",justifyContent:"space-between",children:[(0,E.tZ)($t.Q,{href:Uk[n],onClick:()=>{(0,y.Kz)(new u.UserClickEvent({button:u.Button.LearnMoreAboutNudges,clickOrigin:zk[n]}))},isExternal:!0,children:o("_common_action_learn_more")}),(0,E.tZ)(D.z,{mood:"brand",intensity:"quiet",layout:"iconLeading",icon:"FeatureAutomationsOutlined",onClick:()=>t(n),children:o("team_settings_nudges_send_test")})]})]}):null]})};var qk=n(96081);const Gk=n.p+"333112f5f6782cda52ff.png";var Vk,jk,Wk;const Hk="_common_generic_error",$k=()=>{const e=(0,Pe.o)("ace_nudges_uninstall_slack"),t=(0,m.k)(qk.R,"getTeamNudges"),{sendNudge:n,updateTeamNudge:a,uninstallNudges:i}=(0,te.u)(qk.R),{showToast:r}=(0,o.p)(),{translate:s}=(0,b.Z)(),p=async e=>{try{const t=await a(e);if((0,ne.d6)(t))return void r({description:s("team_settings_nudges_configuration_update_nudge_success"),mood:"brand"});r({description:s("team_settings_nudges_configuration_update_nudge_error"),mood:"danger"})}catch(e){r({description:s(Hk),mood:"danger"})}},g=async e=>{try{const t=await n({type:e});if((0,ne.d6)(t))return(0,y.Kz)(new u.UserSetupNudgesEvent({action:u.NudgeAction.SentTestNudge,integrationPlatform:u.IntegrationPlatform.Slack})),void r({description:s("team_settings_nudges_configuration_send_nudge_success"),mood:"brand"});r({description:s("team_settings_nudges_configuration_send_nudge_error"),mood:"danger"})}catch(e){r({description:s(Hk),mood:"danger"})}};if(t.status===G.rq.Loading)return(0,E.tZ)("div",{sx:{display:"flex",justifyContent:"center"},children:Vk||(Vk=(0,E.tZ)(l.Z,{size:75}))});t.status===G.rq.Error&&r({description:s("team_settings_nudges_configuration_get_nudges_error"),mood:"danger"});const h=t.data?.defaultNudges.map((({displayName:e,options:n})=>{switch(e){case"compromised_passwords":case"reused_passwords":case"weak_passwords":return{type:e,options:n,existingNudge:t.data.teamNudges.find((({nudge:t})=>t===e))};default:return{type:void 0}}})).filter((e=>!!e.type));return(0,E.BX)(yn.Z,{sx:{backgroundColor:"ds.container.agnostic.neutral.supershy",borderColor:"ds.border.neutral.quiet.idle"},children:[(0,E.BX)(c.k,{alignItems:"center",gap:"8px",children:[jk||(jk=(0,E.tZ)(Mu.V,{domainLogoURL:Gk,backgroundColor:"ds.background.default"})),(0,E.tZ)(d.X,{as:"h2",color:"ds.text.neutral.catchy",children:s("team_settings_nudges_configuration_schedule_title")})]}),(0,E.tZ)(_.n,{color:"ds.text.neutral.standard",textStyle:"ds.body.standard.regular",children:s("team_settings_slack_nudges_description")}),(0,E.BX)(yn.Z,{sx:{display:"flex",alignItems:"center",flexDirection:"row",justifyContent:"space-between",backgroundColor:"ds.container.agnostic.neutral.standard",borderStyle:"none",padding:"24px"},children:[(0,E.BX)(c.k,{alignItems:"center",gap:"8px",children:[(0,E.tZ)(_.n,{color:"ds.text.neutral.standard",textStyle:"ds.body.standard.regular",children:s("team_settings_nudges_configuration_status")}),(0,E.tZ)(pe.C,{label:s("team_settings_nudges_configuration_status_value"),layout:"labelOnly",mood:"positive"})]}),e?(0,E.tZ)(D.z,{mood:"danger",intensity:"supershy",size:"small",onClick:async()=>{try{const e=await i();if((0,ne.d6)(e))return(0,y.Kz)(new u.UserSetupNudgesEvent({action:u.NudgeAction.UninstalledIntegration,integrationPlatform:u.IntegrationPlatform.Slack})),void r({description:s("team_settings_nudges_uninstall_success"),mood:"brand"});r({description:s("team_settings_nudges_uninstall_error"),mood:"danger"})}catch(e){r({description:s(Hk),mood:"danger"})}},children:s("team_settings_nudges_uninstall")}):null]}),Wk||(Wk=(0,E.tZ)(z.i,{})),h?h.map((({type:e,options:t,existingNudge:n},a)=>(0,E.tZ)(Fk,{updateNudge:p,sendTestNudge:g,displayName:e,dropdownOptions:t,existingNudge:n},`${e}-${a}`))):null]})},Kk=n.p+"93b83aad7c3305250dcf.png";var Yk,Qk,Jk,eD,tD,nD;const aD=({duration:e})=>(0,E.BX)(c.k,{alignItems:"center",gap:"4px",children:[Yk||(Yk=(0,E.tZ)(T.JO,{name:"TimeOutlined",size:"xsmall",color:"ds.text.neutral.quiet"})),(0,E.tZ)(_.n,{textStyle:"ds.body.helper.regular",color:"ds.text.neutral.quiet",children:e})]}),iD=({isInsightsSetUp:e})=>{const{translate:t}=(0,b.Z)(),n=(0,$.C)(),a=(0,m.k)(wy.y,"ssoProvisioning"),i=a.data?.ssoSolution,r=a.status===G.rq.Success;if(!n)return null;const s=i===Oy.WO.enum.none||i===Oy.WO.enum.confidentialSaml;return(0,E.BX)(yn.Z,{sx:{display:"flex",flexDirection:"row",alignItems:"center",gap:"16px",backgroundColor:"ds.container.agnostic.neutral.supershy",borderColor:"ds.border.neutral.quiet.idle"},children:[(0,E.BX)(c.k,{flexDirection:"column",gap:"16px",sx:{width:"100%"},children:[(0,E.BX)(c.k,{alignItems:"center",gap:"8px",children:[eD||(eD=(0,E.tZ)(Mu.V,{domainLogoURL:Gk,backgroundColor:"ds.background.default"})),tD||(tD=(0,E.tZ)(d.X,{as:"h2",color:"ds.text.neutral.catchy",children:"Slack"})),e?(0,E.tZ)(pe.C,{label:t("webapp_vpn_page_credential_card_inactive"),layout:"labelOnly",mood:"neutral"}):null]}),(0,E.tZ)(_.n,{children:t("team_settings_slack_nudges_description")}),(0,E.BX)(yn.Z,{sx:{backgroundColor:"ds.container.agnostic.neutral.quiet",padding:"24px",gap:"4px"},children:[(0,E.BX)(c.k,{alignItems:"center",gap:"8px",children:[(0,E.tZ)(d.X,{as:"h3",textStyle:"ds.title.block.medium",children:t("team_settings_slack_nudges_setup_integration_title")}),nD||(nD=(0,E.tZ)(aD,{duration:"10 min"}))]}),(0,E.tZ)(_.n,{textStyle:"ds.body.reduced.regular",children:t("team_settings_slack_nudges_setup_integration_description")}),(0,E.tZ)($t.Q,{size:"medium",isExternal:!0,href:me.qe,sx:{mt:"4px"},children:t("team_settings_nudges_setup_trial_cta_learn_more")}),r?s?(0,E.tZ)(D.z,{size:"medium",layout:"iconLeading",icon:Jk||(Jk=(0,E.tZ)(T.JO,{name:"ConfigureOutlined"})),onClick:()=>{(0,y.Kz)(new u.UserSetupNudgesEvent({action:u.NudgeAction.StartedSetup,integrationPlatform:u.IntegrationPlatform.Slack})),(0,W.Yo)("https://slack.com/oauth/v2/authorize?client_id=2317325599.7117714150453&scope=chat:write,chat:write.customize,users:read,users:read.email&user_scope="),window.close()},sx:{mt:"16px"},children:t("team_settings_nudges_setup")}):(0,E.tZ)(rn.k,{title:t("team_settings_nudges_setup_incompatible"),mood:"danger"}):(0,E.tZ)("div",{sx:{display:"flex",justifyContent:"center"},children:Qk||(Qk=(0,E.tZ)(l.Z,{size:"xlarge","data-testid":"nudges-setup-loader"}))})]})]}),e?(0,E.tZ)("img",{src:Kk,sx:{height:"200px"},alt:""}):null]})};var rD,sD;const oD=({isSlackNudgesInstalled:e})=>e?rD||(rD=(0,E.tZ)($k,{})):sD||(sD=(0,E.tZ)(iD,{})),lD=n.p+"6924dc3cb5e772443a44.png";var cD;const dD="team_settings_in-app_nudges_insights_coming_soon_title",_D=({openSettingsTab:e})=>{const{translate:t}=(0,b.Z)();return(0,E.BX)(yn.Z,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",backgroundColor:"ds.container.agnostic.neutral.supershy",borderColor:"ds.border.neutral.quiet.idle",padding:"24px",gap:"16px"},children:[(0,E.BX)(c.k,{flexDirection:"column",gap:"16px",children:[(0,E.BX)(c.k,{alignItems:"center",gap:"8px",children:[cD||(cD=(0,E.tZ)(Qi.v,{name:"WebOutlined"})),(0,E.tZ)(d.X,{as:"h2",color:"ds.text.neutral.standard",children:t("team_settings_in-app_nudges_title")}),(0,E.tZ)(pe.C,{label:t("webapp_vpn_page_credential_card_active"),layout:"labelOnly",mood:"positive"})]}),(0,E.tZ)(_.n,{children:t("team_settings_in-app_nudges_description")}),(0,E.tZ)(rn.k,{title:t(dD),description:t(dD),mood:"neutral",icon:"FeedbackInfoOutlined"}),(0,E.tZ)(D.z,{mood:"brand",intensity:"catchy",layout:"iconTrailing",icon:"ArrowRightOutlined",onClick:e,children:t("team_settings_in-app_nudges_open_settings")})]}),(0,E.tZ)("img",{src:lD,sx:{height:"200px"},alt:""})]})};n(20912);var uD,mD,pD=n(73782),gD=n(16687);const hD={LEGEND_NUDGE_WEAK:"team_settings_nudges_insights_legend_nudge_weak",LEGEND_WEAK_PASSWORDS:"team_settings_nudges_insights_legend_weak_passwords",LEGEND_NUDGE_COMPROMISED:"team_settings_nudges_insights_legend_nudge_compromised",LEGEND_COMPROMISED_PASSWORDS:"team_settings_nudges_insights_legend_compromised_passwords",LEGEND_NUDGE_REUSED:"team_settings_nudges_insights_legend_nudge_reused",LEGEND_REUSED_PASSWORDS:"team_settings_nudges_insights_legend_reused_passwords"},yD={weak:"#32A9B2",compromised:"#FF7385",reused:"#ED892D"},bD=e=>{const{color:t}=e;return(0,E.tZ)("div",{sx:{width:"8px"},children:(0,E.tZ)("svg",{viewBox:"0 0 2 2",xmlns:"http://www.w3.org/2000/svg",children:(0,E.tZ)("circle",{cx:"1",cy:"1",r:"1",strokeWidth:"0",fill:t})})})},SD=e=>{const{color:t}=e;return(0,E.tZ)("div",{sx:{width:"8px"},children:(0,E.tZ)("svg",{viewBox:"0 0 2 2",xmlns:"http://www.w3.org/2000/svg",children:(0,E.tZ)("line",{x1:"0",y1:"1",x2:"2",y2:"1",stroke:t,strokeWidth:"0.4"})})})},xD=e=>{const{cx:t,cy:n,stroke:a,payload:i,dataKey:r,r:s,strokeWidth:o,key:l}=e;return"nudgesSent"in i&&i.nudgesSent.includes(`${r}_passwords`)?(0,E.tZ)(gD.o,{id:`nudgeSentDot-${r}`,cx:t,cy:n,r:s,stroke:a,strokeWidth:o,fill:a},l):null},fD=({graphData:e})=>{const{translate:t}=(0,b.Z)(),n=e.reduce(((e,t)=>{if("compromised"in t){const{compromised:n,reused:a,weak:i}=t;return Math.max(e,n,a,i)}return e}),0),a=10*Math.ceil(n/10);return(0,E.BX)(r.Fragment,{children:[(0,E.tZ)("div",{sx:{width:"100%",height:"211px",flexGrow:1},"data-testid":"insight-graph",children:(0,E.tZ)(xc.h,{sx:{height:"100%",width:"100%"},children:(0,E.BX)(fc.w,{data:e,children:[uD||(uD=(0,E.tZ)(vc.q,{vertical:!1})),(0,E.tZ)(Cc.B,{domain:[0,a],fontSize:"small"}),mD||(mD=(0,E.tZ)(Nc.K,{dataKey:"date",fontSize:"small"})),(0,E.tZ)(Zc.x,{id:"line-weak",dataKey:"weak",type:"linear",stroke:yD.weak,dot:xD,isAnimationActive:!1}),(0,E.tZ)(Zc.x,{id:"line-compromised",dataKey:"compromised",type:"linear",stroke:yD.compromised,dot:xD,isAnimationActive:!1}),(0,E.tZ)(Zc.x,{id:"line-reused",dataKey:"reused",type:"linear",stroke:yD.reused,dot:xD,isAnimationActive:!1})]})})}),(0,E.tZ)(yn.Z,{sx:{display:"flex",flexDirection:"row",padding:"16px",gap:"32px",backgroundColor:"ds.container.agnostic.neutral.quiet",borderColor:"ds.border.neutral.quiet.idle"},children:[["weak",yD.weak,hD.LEGEND_NUDGE_WEAK,hD.LEGEND_WEAK_PASSWORDS],["compromised",yD.compromised,hD.LEGEND_NUDGE_COMPROMISED,hD.LEGEND_COMPROMISED_PASSWORDS],["reused",yD.reused,hD.LEGEND_NUDGE_REUSED,hD.LEGEND_REUSED_PASSWORDS]].map((([e,n,a,i])=>(0,E.BX)(c.k,{flexDirection:"column",gap:"8px",children:[(0,E.BX)(c.k,{flexDirection:"row",gap:"8px",alignItems:"baseline",children:[(0,E.tZ)(bD,{color:n}),(0,E.tZ)(_.n,{textStyle:"ds.body.helper.regular",color:"ds.text.neutral.quiet",children:t(a)})]}),(0,E.BX)(c.k,{flexDirection:"row",gap:"8px",alignItems:"baseline",children:[(0,E.tZ)(SD,{color:n}),(0,E.tZ)(_.n,{textStyle:"ds.body.helper.regular",color:"ds.text.neutral.quiet",children:t(i)})]})]},e)))})]})},vD=({title:e,mood:t,value:n,highlight:a})=>(0,E.BX)("div",{sx:{flex:1},children:["loading"===n?(0,E.tZ)(l.Z,{"data-testid":"insight-loader",mood:t,size:"xlarge"}):(0,E.tZ)(_.n,{"data-testid":"insight-value",textStyle:"ds.specialty.spotlight.medium",color:"positive"===t?"ds.text.brand.standard":`ds.text.${t}.quiet`,sx:{marginBottom:"2px"},children:"unknown"===n?"-":n}),(0,E.tZ)(_.n,{textStyle:"ds.body.reduced.regular",color:"ds.text.brand.standard",children:e}),a&&(0,E.tZ)(pe.C,{"data-testid":"insight-highlight",mood:t,intensity:"quiet",label:a.label,layout:"iconLeading",iconName:a.iconName,sx:{marginTop:"8px"}})]});var CD,ED,ZD;const kD=()=>{var e;const{translate:t}=(0,b.Z)(),n=(0,m.k)(qk.R,"getHealthAndNudgeReport",{numberOfDays:365}),[a,i]=(0,r.useState)(7),s=(e=>{switch(e.status){case G.rq.Loading:return{weak:{value:"loading"},compromised:{value:"loading"},reused:{value:"loading"}};case G.rq.Error:return{weak:{value:"unknown"},compromised:{value:"unknown"},reused:{value:"unknown"}};case G.rq.Success:{const[...t]=e.data.healthAndNudgeHistory,n=t.pop();if(void 0===n)return{weak:{value:"unknown"},compromised:{value:"unknown"},reused:{value:"unknown"}};const a={weak:t.findLast((e=>e.nudgesSent.includes("weak_passwords"))),compromised:t.findLast((e=>e.nudgesSent.includes("compromised_passwords"))),reused:t.findLast((e=>e.nudgesSent.includes("reused_passwords")))},i=(e,t)=>t?Math.round(100*(e-t)/t):void 0;return{weak:{value:n.weak,percentChange:i(n.weak,a.weak?.weak)},compromised:{value:n.compromised,percentChange:i(n.compromised,a.compromised?.compromised)},reused:{value:n.reused,percentChange:i(n.reused,a.reused?.reused)}}}}})(n),o=(e,n)=>{const{percentChange:a}=e[n];if("number"!=typeof a)return;const i=Math.abs(a);return 0===i?{label:t("team_settings_nudges_insights_no_change_since_nudge")}:{iconName:a>0?"ArrowUpOutlined":"ArrowDownOutlined",label:t("team_settings_nudges_insights_change_since_nudge",{percent:i})}},_=((e,t)=>{var n;const a=[];let i=(0,pD.Z)(new Date,t),r=null!=(n=e.findLast((e=>new Date(e.date)<=i)))?n:{};"nudgesSent"in r&&(r.nudgesSent=[]);for(;a.length<t;){var s;i=(0,Ic.Z)(i,1);const t=(0,sa.Z)(i,"yyyy-MM-dd"),n=null!=(s=e.find((e=>e.date===t)))?s:{...r,date:t};a.push(n),r={...n,nudgesSent:[]}}return a})(null!=(e=n.data?.healthAndNudgeHistory)?e:[],a);return(0,E.BX)(c.k,{flexDirection:"column",gap:"16px",children:[(0,E.BX)(yn.Z,{sx:{display:"flex",flexDirection:"row",padding:"24px",gap:"24px",backgroundColor:"ds.container.agnostic.neutral.supershy",borderColor:"ds.border.neutral.quiet.idle"},children:[(0,E.tZ)(vD,{title:t("team_settings_nudges_insights_weak"),mood:"positive",value:s.weak.value,highlight:o(s,"weak")}),CD||(CD=(0,E.tZ)(z.i,{orientation:"vertical"})),(0,E.tZ)(vD,{title:t("team_settings_nudges_insights_compromised"),mood:"danger",value:s.compromised.value,highlight:o(s,"compromised")}),ED||(ED=(0,E.tZ)(z.i,{orientation:"vertical"})),(0,E.tZ)(vD,{title:t("team_settings_nudges_insights_reused"),mood:"warning",value:s.reused.value,highlight:o(s,"reused")})]}),(0,E.BX)(yn.Z,{sx:{display:"flex",flexDirection:"column",padding:"24px",gap:"24px",backgroundColor:"ds.container.agnostic.neutral.supershy",borderColor:"ds.border.neutral.quiet.idle"},children:[(0,E.BX)(c.k,{flexDirection:"row",justifyContent:"space-between",children:[(0,E.tZ)(d.X,{as:"h5",color:"ds.text.neutral.catchy",textStyle:"ds.title.section.medium",sx:{marginBottom:"1%"},children:t("team_settings_nudges_insights_graph_heading")}),(0,E.tZ)(Ac.m,{tabs:[{id:"tab-7-days",title:t("team_settings_nudges_insights_graph_7_days"),contentId:"content-7-days",onSelect:()=>{i(7)}},{id:"tab-30-days",title:t("team_settings_nudges_insights_graph_30_days"),contentId:"content-30-days",onSelect:()=>{i(30)}},{id:"tab-year",title:t("team_settings_nudges_insights_graph_year"),contentId:"content-year",onSelect:()=>{i(365)}}]})]}),n.status!==G.rq.Success?ZD||(ZD=(0,E.tZ)(l.Z,{"data-testid":"insight-graph-loader",size:"xlarge"})):(0,E.tZ)(fD,{graphData:_})]})]})};var DD,TD;const ID=({isSlackNudgesInstalled:e})=>e?DD||(DD=(0,E.tZ)(kD,{})):TD||(TD=(0,E.tZ)(iD,{isInsightsSetUp:!0}));var AD=n(42999);const wD=({buttonText:e,onClick:t})=>{const{translate:n}=(0,b.Z)();return(0,E.BX)(c.k,{gap:"24px",children:[(0,E.tZ)($t.Q,{isExternal:!0,href:me.qe,children:n("team_settings_nudges_setup_trial_cta_learn_more")}),(0,E.tZ)(D.z,{onClick:t,children:e})]})},OD=()=>{const{translate:e}=(0,b.Z)();return(0,E.BX)(c.k,{flexDirection:"column",alignItems:"left",gap:"16px",children:[(0,E.tZ)(KZ,{iconName:"ActionAddOutlined",title:e("team_settings_nudges_setup_step_one_title"),description:e("team_settings_nudges_setup_step_one_subtitle")}),(0,E.tZ)(KZ,{iconName:"HealthPositiveOutlined",title:e("team_settings_nudges_setup_step_two_title"),description:e("team_settings_nudges_setup_step_two_subtitle")}),(0,E.tZ)(KZ,{iconName:"TipOutlined",title:e("team_settings_nudges_setup_step_three_title"),description:e("team_settings_nudges_setup_step_three_subtitle")})]})};var ND,RD;const LD=({hasNudgesCapability:e,teamTrialStatus:t,setStartTrialDialogOpen:n})=>{const{translate:a}=(0,b.Z)(),i=(0,Pe.o)("monetization_extension_existingUserTierTrial"),r=t.canUseTierTrial&&i,s=t.isFreeTrial||t.isGracePeriod,o=t.isFreeTrial&&t.daysLeftInTrial<=0;return(0,E.tZ)(yn.Z,{sx:{minHeight:"680px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"ds.container.agnostic.neutral.supershy",borderColor:"ds.border.neutral.quiet.idle"},children:(0,E.BX)(c.k,{flexDirection:"column",alignItems:"center",gap:"16px",sx:{maxWidth:"560px",marginY:"75px"},children:[(0,E.BX)(c.k,{flexDirection:"column",alignItems:"center",gap:"16px",children:[(0,E.tZ)("img",{src:AD,sx:{width:"320px",aspectRatio:"3/2"},alt:""}),(0,E.BX)(c.k,{flexDirection:"column",alignItems:"center",gap:"8px",sx:{maxWidth:"512px",textAlign:"center"},children:[(0,E.tZ)(d.X,{as:"h2",textStyle:"ds.title.section.large",color:"ds.text.neutral.catchy",children:a(o||!e&&r?"team_settings_nudges_setup_overview_title_business_plus":"team_settings_nudges_setup_overview_title")}),(0,E.tZ)(_.n,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",children:a("team_settings_nudges_setup_overview_subtitle")})]})]}),!o&&!r&&(RD||(RD=(0,E.tZ)(OD,{}))),o?(0,E.tZ)(wD,{onClick:()=>{(0,W.Yk)(me.q_,{medium:"nudges",campaign:"business-plus-upgrade",source:"product",content:"trial"})},buttonText:a("team_buy_omnix")}):r?(0,E.tZ)(wD,{onClick:()=>{n(!0)},buttonText:a("team_start_trial_cta")}):(0,E.tZ)(D.z,{layout:"iconLeading",icon:ND||(ND=(0,E.tZ)(T.JO,{name:"PremiumOutlined"})),onClick:()=>{(0,y.Kz)(new u.UserClickEvent({button:u.Button.UpgradeBusinessPlusTier})),pm(mm.Nudges,t.spaceTier,s)},children:a("team_upgrade_to_omnix")})]})})};var BD,MD,PD;const UD=()=>{const e=(()=>{const{search:e,hash:t}=(0,i.TH)(),[n,a]=(0,r.useState)(void 0);return(0,r.useEffect)((()=>{var n;const i=(0,os.parse)(e),r=null!=(n=i.code)?n:"";if(r){delete i.code,a((e=>({...e,code:r})));const e=Object.keys(i).length>0?`?${(0,os.stringify)(i)}`:"",n=window.location.href.split("?")[0];window.history.replaceState({},"",n+e+t)}}),[e]),n})()?.code,[t,n]=(0,r.useState)("insights"),[a,s]=(0,r.useState)(Boolean(e)),[_,p]=(0,r.useState)(!1),[g,h]=(0,r.useState)(!1),S=(0,Nm.S)(),x=!!S?.nudges.enabled,f=(0,gt.rp)(["inAppNudges"]),v=(0,Pe.o)("ace_enforce_nudges_availability"),C=(0,m.k)(qk.R,"checkNudgesInstallation"),{validateNudgesInstallation:Z,sendNudge:k}=(0,te.u)(qk.R),D=(0,$.C)(),T=hm(),I=Rm(),{translate:A}=(0,b.Z)(),{showToast:w}=(0,o.p)();(0,r.useEffect)((()=>{x&&(0,y.Nc)(u.PageView.ToolsNudgesInsights)}),[x]),(0,r.useEffect)((()=>{e&&(async()=>{try{const t=await Z({authCode:e});if((0,ne.hx)(t)&&w({description:A("team_settings_nudges_configuration_validation_error"),mood:"danger"}),(0,ne.d6)(t)){(0,y.Kz)(new u.UserSetupNudgesEvent({action:u.NudgeAction.CompletedSetup,integrationPlatform:u.IntegrationPlatform.Slack}));const e=await k({type:"welcome"});(0,ne.hx)(e)&&w({description:A("team_settings_nudges_configuration_send_nudge_error"),mood:"danger"}),p(!0)}}catch(e){w({description:A("_common_generic_error"),mood:"danger"})}finally{s(!1)}})()}),[e]);const O=[{id:"tab-insights",title:A("team_settings_nudges_tabs_insights"),contentId:"content-insights",onSelect:()=>{(0,y.Nc)(u.PageView.ToolsNudgesInsights),n("insights")}},{id:"tab-settings",title:A("team_settings_nudges_tabs_configuration"),contentId:"content-settings",onSelect:()=>{(0,y.Nc)(u.PageView.ToolsNudgesConfiguration),n("settings")}}];if(!D||C.status!==G.rq.Success||a)return BD||(BD=(0,E.tZ)(c.k,{justifyContent:"center",children:(0,E.tZ)(l.Z,{size:75,"data-testid":"nudges-validate-loader"})}));if(!x&&!v)return(0,E.BX)(r.Fragment,{children:[(0,E.tZ)(Om,{isStartTrialDialogOpen:g,setStartTrialDialogOpen:h}),(0,E.tZ)(LD,{hasNudgesCapability:x,teamTrialStatus:D,setStartTrialDialogOpen:h})]});const N=Boolean(C.data),R=D.isFreeTrial&&D.daysLeftInTrial<=0;return(0,E.tZ)(OZ.r,{moduleName:"TAC",useCaseName:"nudges",children:(0,E.BX)("div",{sx:{padding:"24px 0"},children:[(0,E.tZ)("div",{sx:{pl:"32px",pb:"32px"},children:(0,E.BX)(c.k,{alignItems:"center",gap:"8px",children:[(0,E.tZ)(d.X,{as:"h1",textStyle:"ds.title.section.large",color:"ds.text.neutral.catchy",children:A("webapp_sidemenu_nudges")}),!I&&!T&&x||R?(0,E.tZ)(pe.C,{label:A("team_omnix_badge_label"),mood:"brand",intensity:"quiet",layout:"iconLeading",iconName:"PremiumOutlined"}):null]})}),(0,E.tZ)(Ac.m,{tabs:O,sx:{margin:"0 32px 16px"},currentTab:"insights"===t?0:1}),(0,E.tZ)("div",{"aria-labelledby":"tab-insights",id:"content-insights",sx:{display:"insights"===t?"block":"none"},children:(0,E.BX)(c.k,{flexDirection:"column",gap:"16px",sx:{margin:"0 32px"},children:[f?(0,E.tZ)(_D,{openSettingsTab:()=>{(0,y.Nc)(u.PageView.ToolsNudgesConfiguration),n("settings")}}):null,(0,E.tZ)(ID,{isSlackNudgesInstalled:N||_})]})}),(0,E.tZ)("div",{"aria-labelledby":"tab-settings",id:"content-settings",sx:{display:"settings"===t?"block":"none"},children:(0,E.tZ)(di,{sx:{padding:"0 32px"},fullWidth:!0,mainContent:(0,E.BX)(c.k,{flexDirection:"column",gap:"24px 0",children:[f?MD||(MD=(0,E.tZ)(Ck,{})):null,(0,E.tZ)(oD,{isSlackNudgesInstalled:N||_})]}),secondaryContent:(0,E.BX)(c.k,{flexDirection:"column",gap:"16px",children:[PD||(PD=(0,E.tZ)(uk,{})),T?null:(0,E.tZ)(gm,{featureType:mm.Nudges})]})})})]})})};var XD=n(74175);const zD="team_settings_mass_deployment_how_it_works_badge",FD=()=>{const{translate:e}=(0,b.Z)();return(0,E.BX)(yn.Z,{children:[(0,E.tZ)(pe.C,{label:e(zD),iconName:"TipOutlined",layout:"iconLeading",mood:"neutral",intensity:"quiet"}),(0,E.tZ)("div",{sx:{height:"15%",padding:"10px"},children:(0,E.tZ)(qa.b,{alt:e(zD),lightSrc:AD,darkSrc:XD,sx:{objectFit:"contain",width:"100%",objectPosition:"center"}})}),(0,E.tZ)(_.n,{textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:e("team_settings_mass_deployment_how_it_works_title")}),(0,E.tZ)(_.n,{children:e("team_settings_mass_deployment_how_it_works_description")}),(0,E.tZ)($t.Q,{isExternal:!0,href:me.a3,children:e("team_settings_mass_deployment_how_it_works_button")})]})};var qD;const GD=()=>{const{translate:e}=(0,b.Z)();return(0,E.BX)("div",{sx:{padding:"32px 48px 12px"},children:[(0,E.tZ)(d.X,{as:"h1",textStyle:"ds.title.section.large",color:"ds.text.neutral.catchy",children:e("team_settings_mass_deployment_settings_page_header")}),qD||(qD=(0,E.tZ)(di,{fullWidth:!0,secondaryContentWidth:"320px",reducedVerticalPadding:!0,mainContent:(0,E.tZ)("div",{}),secondaryContent:(0,E.tZ)(FD,{})}))]})};var VD,jD;const WD=()=>{const e=(0,Ve.$B)();return(0,E.BX)(Ve.rs,{children:[(0,E.tZ)(Ve.AW,{exact:!0,path:`${e.path}`,children:VD||(VD=(0,E.tZ)(GD,{}))}),(0,E.tZ)(Ve.AW,{path:`${e.path}/setup`,children:jD||(jD=(0,E.tZ)(GD,{}))})]})};function HD({path:e}){return(0,E.tZ)(i.GB,{path:e,permission:e=>e.adminAccess.hasFullAccess,children:(0,E.BX)(i.rs,{children:[(0,E.tZ)(i.Vy,{exact:!0,component:fZ,path:`${e}`,permission:e=>YD("FULL",e),redirectPath:`${e}`}),(0,E.tZ)(i.Vy,{path:`${e}${a.Nr.DIRECTORY_SYNC}`,component:LE}),(0,E.tZ)(i.Vy,{path:`${e}${a.Nr.SSO}`,component:PC}),(0,E.tZ)(i.Vy,{path:`${e}${a.Nr.SIEM}`,component:IZ}),(0,E.tZ)(i.Vy,{path:`${e}${a.Nr.NUDGES}`,component:UD}),(0,E.tZ)(i.Vy,{path:`${e}${a.Nr.ANTIPHISHING}`,component:dk}),(0,E.tZ)(i.Vy,{path:`${e}${a.Nr.PUBLIC_API}`,component:WZ}),(0,E.tZ)(i.Vy,{path:`${e}${a.Nr.MASS_DEPLOYMENT}`,component:WD})]})})}var $D=n(16037),KD=n(97078);function YD(e,t){return!t.adminAccess||t.adminAccess.hasPermissionLevel(e)}const QD=({basePath:e,path:t})=>(0,E.tZ)(i.GB,{path:t,reducer:KD.Z,permission:e=>e.loggedIn&&e.adminAccess.hasTACAccess,redirectPath:a.TT,component:$l,children:(0,E.BX)(i.rs,{children:[(0,E.tZ)(i.l_,{exact:!0,from:`${e}/`,to:`${e}/${$D.$.DASHBOARD}`}),(0,E.tZ)(i.Vy,{component:Pa,path:`${e}/${$D.$.CHANGE_PLAN}`,permission:e=>YD("BILLING",e)}),(0,E.tZ)(i.Vy,{component:li,path:`${e}/${$D.$.POST_TRIAL_CHECKOUT}`,permission:e=>YD("BILLING",e)}),(0,E.tZ)(i.Vy,{component:Fs,path:`${e}/${$D.$.ACCOUNT}`,permission:e=>YD("BILLING",e),redirectPath:`${e}/${$D.$.GROUPS}`}),(0,E.tZ)(i.Vy,{component:vd,path:`${e}/${$D.$.DASHBOARD}`,permission:e=>YD("FULL",e),redirectPath:`${e}/${$D.$.ACCOUNT}`}),(0,E.tZ)(El,{path:`${e}/${$D.$.ACTIVITY}`}),(0,E.tZ)(Wh,{path:`${e}/${$D.$.GROUPS}`,permission:e=>YD("GROUP_READ",e)}),(0,E.tZ)(i.Vy,{component:Jb,path:`${e}/${$D.$.MEMBERS}`,permission:e=>YD("FULL",e),redirectPath:`${e}/${$D.$.ACCOUNT}`,reducer:cy.ZP}),(0,E.tZ)(i.Vy,{component:cm,path:`${e}/${$D.$.DARK_WEB_INSIGHTS}`,permission:e=>YD("FULL",e),redirectPath:`${e}/${$D.$.DARK_WEB_INSIGHTS}`,reducer:cy.ZP}),(0,E.tZ)(i.Vy,{component:zg,path:`${e}/${$D.$.CREDENTIAL_RISK_DETECTION}`,permission:e=>YD("FULL",e),redirectPath:`${e}/${$D.$.CREDENTIAL_RISK_DETECTION}`}),(0,E.tZ)(Ex,{path:`${e}/${$D.$.SETTINGS}`}),(0,E.tZ)(HD,{path:`${e}/${$D.$.INTEGRATIONS}`})]})})},19122:(e,t,n)=>{n.d(t,{fV:()=>c,qc:()=>l});var a=n(96832),i=n(38452),r=n(39649),s=n(36351);const o=a.createContext({currentSpaceId:null,spaceDetails:null,teamId:null}),l=({lee:e,children:t})=>{var n;const a=(0,r.B)(e.globalState),l=null!=(n=(0,i.xO)(e.globalState)?.details)?n:null,c=(0,i.ev)(e.globalState);return(0,s.tZ)(o.Provider,{value:{teamId:c,currentSpaceId:a,spaceDetails:l},children:t})},c=()=>a.useContext(o)},12637:(e,t,n)=>{n.d(t,{j:()=>o});var a=n(51031),i=n(78060),r=n(28207),s=n(91);const o=()=>{var e;const t=(0,s.F)(),n=(0,r.u)(),o=(0,i.m)();if(t.status===a.rq.Error||n.status===a.rq.Error||o.status===a.rq.Error)return{status:a.rq.Success,shouldDisplayAdminVaultGetStartedGuide:!1};if(t.status!==a.rq.Success||n.status!==a.rq.Success||o.status!==a.rq.Success)return{status:a.rq.Loading};const l=!t.isGetStartedDismissed&&n.teamCreationDate>=1702508400&&null!=(e=o.isTeamCreator)&&e;return{status:a.rq.Success,shouldDisplayAdminVaultGetStartedGuide:l}}},6135:(e,t,n)=>{n.d(t,{S:()=>s});var a=n(24507),i=n(51031),r=n(32734);const s=()=>{const e=(0,a.k)(r.o,"getTeamCapabilities");return e.status===i.rq.Success?e.data:null}},16037:(e,t,n)=>{n.d(t,{$:()=>a});let a=function(e){return e.ACCOUNT="account",e.ACTIVITY="activity",e.CHANGE_PLAN="account/changeplan",e.DASHBOARD="dashboard",e.GROUPS="groups",e.MEMBERS="members",e.SETTINGS="settings",e.DARK_WEB_INSIGHTS="dark-web-insights",e.INTEGRATIONS="integrations",e.CREDENTIAL_RISK_DETECTION="credential-risk-detection",e.POST_TRIAL_CHECKOUT="account/checkout",e}({})},19471:(e,t,n)=>{n.d(t,{$3:()=>H,$b:()=>h,As:()=>P,BI:()=>U,BJ:()=>v,Bw:()=>p,Bz:()=>q,F1:()=>a,FL:()=>L,FP:()=>A,FX:()=>u,Fn:()=>k,HX:()=>f,I0:()=>G,I9:()=>E,Iw:()=>b,J0:()=>N,M:()=>ie,Mv:()=>i,Pr:()=>S,RU:()=>ee,Rf:()=>R,Tx:()=>T,Tz:()=>Y,Vr:()=>c,Vz:()=>oe,XP:()=>ae,a3:()=>M,bx:()=>Z,cI:()=>se,hP:()=>D,hc:()=>g,i0:()=>te,i1:()=>W,jp:()=>Q,js:()=>V,jw:()=>B,lh:()=>$,m5:()=>z,mA:()=>O,mn:()=>J,n0:()=>m,nC:()=>x,nq:()=>X,o2:()=>ne,oH:()=>_,p9:()=>K,q_:()=>l,qe:()=>j,rC:()=>r,rh:()=>C,sz:()=>F,to:()=>d,tz:()=>o,uC:()=>w,uR:()=>I,ub:()=>s,yi:()=>y,zF:()=>re});const a="https://app.dashlane.com",i="https://app.dashlane.com#/login",r="https://app.dashlane.com#/onboarding",s="https://www.dashlane.com/business/directbuy",o="https://www.dashlane.com/pricing",l="https://www.dashlane.com/business-password-manager/upgrade",c="https://support.dashlane.com/hc",d="https://support.dashlane.com/hc/requests/new",_="https://support.dashlane.com/hc/requests/new?req_type=dashlane_for_business",u="https://support.dashlane.com/hc/categories/200958889-Dashlane-Business",m="https://support.dashlane.com/hc/en-us/articles/360015304999-Joining-a-Dashlane-Business-plan-with-SSO-enabled#title2",p="https://support.dashlane.com/hc/requests/new",g="https://support.dashlane.com/hc/en-us/requests/new?utm_medium=misc&utm_source=dashlane_admin_console",h="https://support.dashlane.com/hc/en-us/articles/6351573344786?utm_medium=misc&utm_source=dashlane_admin_console",y="https://www.dashlane.com/download",b="https://support.dashlane.com/hc/articles/360014345059",S="https://dashlane.status.io/",x="https://support.dashlane.com/hc/articles/360013149040",f="https://support.dashlane.com/hc/articles/360013149040",v="https://www.dashlane.com/business/sso-download",C="https://support.dashlane.com/hc/articles/360017434219",E="https://support.dashlane.com/hc/en-us/articles/210826449",Z="https://support.dashlane.com/hc/en-us/articles/360015973719-Use-self-hosted-SSO-to-integrate-Dashlane-with-your-IdP",k="https://support.dashlane.com/hc/en-us/articles/10992671925778-Use-Dashlane-Confidential-SSO-to-integrate-with-your-IdP",D="https://support.dashlane.com/hc/en-us/articles/10992671925778",T="https://support.dashlane.com/hc/en-us/categories/200958889-Admins",I="https://support.dashlane.com/hc/en-us/articles/360013149040",A="https://support.dashlane.com/hc/en-us/articles/360013149040",w="https://support.dashlane.com/hc/en-us/articles/360013149040",O="https://www.dashlane.com/business-password-manager/enterprise",N="https://dashlane.zoom.us/webinar/register/6216504012380/WN_j-3JwzI0T1q1alUxHqsM7g#/registration",R="https://support.dashlane.com/hc/en-us/articles/212491369",L="https://support.dashlane.com/hc/articles/4516905332370",B="https://support.dashlane.com/hc/articles/4516905332370-Get-help-with-Dashlane#For-admins-only",M="https://support.dashlane.com/hc/articles/16995560527250-Mass-deploy-the-Dashlane-browser-extension",P="https://support.dashlane.com/hc/articles/360010375459-Deploy-Dashlane-browser-extension-using-GPO",U="https://support.dashlane.com/hc/articles/115002155485",X="https://support.dashlane.com/hc/articles/4516905332370#Purchase-order",z="https://support.dashlane.com/hc/articles/22882460142610",F="https://www.dashlane.com/terms",q="https://www.dashlane.com/privacy",G="https://support.dashlane.com/hc/articles/19810325141266",V="https://support.dashlane.com/hc/articles/22882258054674",j="https://support.dashlane.com/hc/articles/19539724667026-Nudges-in-Dashlane",W="https://support.dashlane.com/hc/requests/new?req_type=dashlane_for_business&topic=add_seats",H="https://support.dashlane.com/hc/articles/19810325141266-Credential-Risk-Detection-in-Dashlane",$=`${c}/articles/4516905332370#chatbot`,K="https://go.dashlane.com/refer-a-business.html",Y="https://www.dashlane.com/blog/what-is-single-sign-on-sso",Q="https://dashlane.navattic.com/e11z0no0",J="https://www.dashlane.com/resources/dashlane-zero-knowledge-security",ee="https://ripleyprd.wpengine.com/wp-content/uploads/2024/10/Credential-Risk-Detection-Privacy-Statement.docx.pdf",te="https://ripleyprd.wpengine.com/wp-content/uploads/2024/10/Dashlane_Credential-Risk-Detection_One-Sheet.pdf",ne="https://support.apple.com/HT202039",ae="https://support.apple.com/HT204088",ie="https://support.google.com/googleplay/answer/7018481?co=GENIE.Platform%3DDesktop",re="https://support.google.com/store/answer/6160235",se=(e="")=>`https://app.dashlane.com/#/team/signup?team=${e}`,oe="https://support.dashlane.com/hc/en-us/articles/5291088850194-Real-time-phishing-alerts"}}]);