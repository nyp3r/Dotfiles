"use strict";(globalThis.webpackChunk_dashlane_leeloo=globalThis.webpackChunk_dashlane_leeloo||[]).push([[8240,4910],{88134:(e,t,a)=>{a.d(t,{t:()=>A});var r=a(96832),i=a(73704),n=a(62264),l=a(8180),d=a(78346),s=a(14877),o=a(39431),c=a(92077),u=a(45272),_=a(88203),p=a(42670),E=a(55752),m=a(63847),b=a(14900),I=a(36351);const L=({formId:e,handleCancel:t,hasDataBeenModified:a,isSubmitting:r})=>{const{translate:i}=(0,_.Z)();return(0,I.BX)(m.k,{sx:{padding:"24px"},as:"footer",justifyContent:"flex-end",flexWrap:"nowrap",children:[a?(0,I.tZ)(b.zxk,{type:"submit",form:e,disabled:r,children:i("webapp_panel_edition_generic_save_changes")}):null,(0,I.tZ)(b.zxk,{sx:{marginLeft:"16px"},nature:"secondary",onClick:t,type:"button",children:i("webapp_panel_edition_generic_cancel_changes")})]})},h="id-add-form",f={GENERIC_ERROR:"_common_generic_error"};function A({children:e,initialValues:t,listRoute:a,reportError:m,countryToKeys:b,header:A,type:T,requiredProperty:g="idNumber"}){const{translate:S}=(0,_.Z)(),{openDialog:N,shouldShowFrozenStateDialog:y}=(0,p.Ub)(),[C,D]=r.useState(!1),[v,w]=r.useState(!1),[R,B]=r.useState(t.country),{createVaultItem:U}=(0,l.u)(s.L),{showToast:P}=(0,n.p)();r.useEffect((()=>{const e={[o.U.DriversLicense]:i.PageView.ItemDriverLicenceCreate,[o.U.FiscalId]:i.PageView.ItemFiscalStatementCreate,[o.U.IdCard]:i.PageView.ItemIdCardCreate,[o.U.Passport]:i.PageView.ItemPassportCreate,[o.U.SocialSecurityId]:i.PageView.ItemSocialSecurityStatementCreate};(0,u.Nc)(e[T])}),[T]),r.useEffect((()=>{y&&N()}),[y]);const Z=()=>{(0,u.Nc)(i.PageView.ItemIdList),(0,c.uX)(a)},x=()=>{P({description:S(f.GENERIC_ERROR),mood:"danger",isManualDismiss:!0})},O=r.useRef((e=>{if(null!==e){const{dirty:t,isSubmitting:a,values:r}=e;D(t),w(a),B(r.country)}}));return(0,I.BX)(r.Fragment,{children:[A(R),(0,I.tZ)(E.P,{formId:h,formRef:O.current,handleSubmit:async(e,{setSubmitting:t,setFieldError:a})=>{if(!e[g])return a(g,"");try{const a=await U({vaultItemType:T,content:e});(0,d.d6)(a)?(P({description:S(b(R).success)}),Z()):(t(!1),x(),m(new Error("[ids][add] Unable to add id"),a.error?.errorMessage))}catch(e){t(!1),x(),m(e,"[ids][add] Unexpected exception while add id")}},initialValues:t,variant:"add",children:t=>e({values:t})}),(0,I.tZ)(L,{formId:h,handleCancel:()=>{Z()},hasDataBeenModified:C,isSubmitting:v})]})}},54750:(e,t,a)=>{a.r(t),a.d(t,{DriverLicenseAddPanel:()=>_}),a(96832);var r=a(39431),i=a(88203),n=a(39649),l=a(66219),d=a(74910),s=a(30611),o=a(88134),c=a(36351);const u=()=>({title:"webapp_id_creation_driverlicense_title_default",success:"webapp_id_creation_driverlicense_alert_add_success_default"}),_=({lee:e,listRoute:t})=>{var a;const{translate:_}=(0,i.Z)(),p=(0,l.lt)(e.carbon.currentLocation),E=null!=(a=(0,n.B)(e.globalState))?a:"",m=t=>{e.reportError(t)},b={idName:"",idNumber:"",expirationDate:"",issueDate:"",country:p,spaceId:E,state:""};return(0,c.tZ)(o.t,{initialValues:b,listRoute:t,reportError:e.reportError,countryToKeys:u,type:r.U.DriversLicense,header:e=>(0,c.tZ)(d.h,{title:(0,l.Il)(_("webapp_id_creation_driverlicense_title_default"),_.getLocale(),e),type:r.U.DriversLicense}),children:({values:e})=>(0,c.tZ)(s.g,{variant:"add",handleError:m,country:e.country})})}},72055:(e,t,a)=>{a.d(t,{a:()=>i});var r=a(30309);const i=new Set([r.cH.AU,r.cH.GB,r.cH.IE,r.cH.NZ])},30611:(e,t,a)=>{a.d(t,{g:()=>b});var r=a(96832),i=a(88355),n=a(88203),l=a(49023),d=a(42670),s=a(72055),o=a(16792),c=a(87773),u=a(68037),_=a(82207),p=a(36351);const E={...o.k,STATE_LABEL:"webapp_id_form_field_label_state",DETAILS_CONTENT_LABEL:"webapp_id_form_driver_license_content_details_label"},m=({variant:e,handleCopy:t,country:a})=>{const{translate:o}=(0,n.Z)(),m=r.useRef(null),{shouldShowFrozenStateDialog:b}=(0,d.Ub)(),{values:I}=(0,i.u6)();return r.useEffect("add"===e?()=>{const e=setTimeout((()=>{m.current?.focus()}),l.sc);return()=>clearTimeout(e)}:()=>{},[]),(0,p.BX)(r.Fragment,{children:[(0,p.BX)(u.u,{title:o(E.DETAILS_CONTENT_LABEL),additionalSx:{display:"flex",flexDirection:"column",gap:"8px"},children:[(0,p.tZ)(c.YI,{name:"idName",label:o(E.NAME_LABEL),placeholder:o(E.NAME_PLACEHOLDER),ref:m,disabled:!!b}),(0,p.tZ)(c.YI,{name:"idNumber",label:o(E.ID_NUMBER_LABEL),placeholder:o(E.ID_NUMBER_PLACEHOLDER),actions:"edit"===e?[(0,p.tZ)(_.m,{data:I.idNumber,onCopy:t},"copy")]:void 0,disabled:!!b}),(0,p.tZ)(c.Nn,{name:"issueDate",label:o(E.ISSUE_DATE_LABEL),calendarButtonLabel:o(E.ISSUE_DATE_PICK),disabled:!!b}),(0,p.tZ)(c.Nn,{name:"expirationDate",label:o(s.a.has(a)?E.EXPIRATION_DATE_LABEL_UK:E.EXPIRATION_DATE_LABEL_US),calendarButtonLabel:o(s.a.has(a)?E.EXPIRATION_DATE_PICK_UK:E.EXPIRATION_DATE_PICK_US),disabled:!!b}),(0,p.tZ)(c.ju,{countryFieldLabel:o(E.COUNTRY_LABEL),stateFieldLabel:o(E.STATE_LABEL),disabled:!!b})]}),(0,p.tZ)(c.A0,{name:"spaceId",disabled:!!b,wrapInContentCard:!0,contentCardLabel:o(E.ORGANIZATION_CONTENT_LABEL)})]})},b=r.memo(m)}}]);