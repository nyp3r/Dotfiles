"use strict";(globalThis.webpackChunk_dashlane_leeloo=globalThis.webpackChunk_dashlane_leeloo||[]).push([[6429],{49087:(e,t,i)=>{i.d(t,{B:()=>a});var n=i(96832);const a=()=>{const[e,t]=n.useState(""),[i,a]=n.useState(!1),r=()=>{a(!1)};return n.useEffect((()=>{if(!i)return;const e=setTimeout(r,5e3);return()=>clearTimeout(e)}),[i,e]),{isAlertVisible:i,alertMessage:e,setAlertMessage:t,hide:r,show:()=>{a(!0)}}}},6429:(e,t,i)=>{i.r(t),i.d(t,{PaymentCardEditPanel:()=>I});var n=i(96832),a=i(26849),r=i(14900),s=i(73704),o=i(14877),l=i(39431),c=i(8180),d=i(24507),m=i(78346),u=i(94138),p=i(86498),_=i(88203),g=i(92077),h=i(45272),S=i(76376),C=i(10679),y=i(77257),b=i(49087),f=i(31605),D=i(63520),w=i(82994),A=i(30894),L=i(31590),T=i(36351);const Z=({item:e})=>{const{translate:t}=(0,_.Z)(),{routes:i}=(0,S.Xo)(),d=(0,p.V)(),Z=(0,b.B)(),{protectedItemsUnlockerShown:I}=(0,A.tY)(),{updateVaultItem:v}=(0,c.u)(o.L),[V,N]=n.useState(!1),[k,E]=n.useState(!1),[G,U]=n.useState(),[P,B]=n.useState(!1),[M,W]=n.useState({...e,expireYear:(0,L.s_)(e.expireYear)});n.useEffect((()=>{(0,h.Nc)(s.PageView.ItemCreditCardDetails)}),[]);const q=()=>{d.showAlert(t("_common_generic_error"),r.BLW.ERROR)},x=()=>{(0,h.Nc)(s.PageView.ItemPaymentList),(0,g.uX)(i.userPayments)},O=e.itemName||t("payments_header_add_payment_card"),R=t("webapp_payment_edition_delete_text"),z={confirmDeleteConfirm:t("webapp_payment_edition_delete_confirm"),confirmDeleteDismiss:t("webapp_payment_edition_delete_dismiss"),confirmDeleteSubtitle:R,confirmDeleteTitle:t("webapp_payment_edition_delete_header"),deleteSuccessToast:e.itemName?t("webapp_payment_edition_name_delete_alert",{paymentCard:e.itemName}):t("webapp_payment_edition_generic_delete_alert")};return(0,T.BX)(D.zI,{isUsingNewDesign:!0,isViewingExistingItem:!0,itemHasBeenEdited:V,onNavigateOut:x,onSubmit:async()=>{if(k)return;const i=(0,C.u)(M);if(!i.isValid)return U(i.errorSet);E(!0);try{const i=await v({vaultItemType:l.U.PaymentCard,content:M,id:e.id});if((0,m.d6)(i)){const e=M.itemName?t("webapp_payment_edition_name_update_alert",{paymentCard:M.itemName}):t("webapp_payment_edition_generic_update_alert");d.showAlert(e,r.BLW.SUCCESS),x()}else E(!1),q()}catch(e){E(!1),q()}},onClickDelete:()=>B(!0),ignoreCloseOnEscape:P||I,formId:"edit_paymentcard_panel",header:(0,T.tZ)(D.V9,{icon:(0,T.tZ)(u.A,{type:"payment-card",size:"xlarge",legacyColor:(0,y.Z)(M.color)}),title:O}),children:[(0,T.tZ)(C.gd,{itemId:e.id,errors:G,paymentCardContent:M,onValueChanged:t=>{W((i=>{const n={...i,...t};return N(!(0,a.equals)(n,e)),n}))},showCopyAlert:e=>{Z.setAlertMessage(e),Z.show()},variant:"edit"}),(0,T.tZ)(w.s,{isVisible:P,itemId:e.id,closeConfirmDeleteDialog:()=>B(!1),onDeletionSuccess:x,translations:z,vaultItemType:l.U.PaymentCard}),Z.isAlertVisible&&(0,T.tZ)("div",{className:f.Z.alertWrapper,children:(0,T.tZ)(r.bZj,{size:r.k3y.SMALL,severity:r.BLW.SUCCESS,closeIconName:t("_common_alert_dismiss_button"),onClose:()=>{Z.hide()},children:Z.alertMessage})})]})},I=({match:e})=>{const{data:t}=(0,d.k)(o.L,"query",{vaultItemTypes:[l.U.PaymentCard],ids:[`{${e.params.uuid}}`]});return t?.paymentCardsResult.items.length?(0,T.tZ)(Z,{item:t.paymentCardsResult.items[0]}):null}},82994:(e,t,i)=>{i.d(t,{s:()=>g}),i(96832);var n=i(62264),a=i(8180),r=i(51031),s=i(14877),o=i(88203);let l=function(e){return e.LastAdmin="LastAdmin",e.GroupSharing="GroupSharing",e.CollectionSharing="CollectionSharing",e.Generic="Generic",e}({});var c=i(78956),d=i(24731),m=i(36351);const u=({reason:e,translations:t,goToSharingAccess:i,closeCantDeleteDialog:n})=>{const{translate:a}=(0,o.Z)(),r=((e,t)=>{const{groupSharingTitle:i,lastAdminTitle:n,collectionSharingTitle:a,genericErrorTitle:r}=e;switch(t){case l.LastAdmin:return n;case l.GroupSharing:return i;case l.CollectionSharing:return a;case l.Generic:return r;default:return(0,d.U)(t)}})(t,e),s=((e,t)=>{const{groupSharingSubtitle:i,lastAdminSubtitle:n,collectionSharingSubtitle:a,genericErrorSubtitle:r}=e;switch(t){case l.LastAdmin:return n;case l.GroupSharing:return i;case l.CollectionSharing:return a;case l.Generic:return r;default:return(0,d.U)(t)}})(t,e);return(0,m.tZ)(c.Vq,{isOpen:!0,onClose:n,title:null!=r?r:"",closeActionLabel:a("_common_dialog_dismiss_button"),actions:e===l.LastAdmin||l.GroupSharing||l.CollectionSharing?{primary:{children:t.lastAdminActionLabel,onClick:()=>{i(),n()}}}:void 0,children:s})};var p=i(37527);const _=({closeConfirmDeleteDialog:e,onDeleteConfirm:t,translations:i})=>{const{translate:n}=(0,o.Z)(),{confirmDeleteSubtitle:a,confirmDeleteTitle:r,confirmDeleteDismiss:s,confirmDeleteConfirm:l}=i;return(0,m.tZ)(c.Vq,{title:r,onClose:e,isOpen:!0,dialogClassName:p.Ht,closeActionLabel:n("_common_dialog_dismiss_button"),isDestructive:!0,actions:{primary:{children:l,onClick:t,id:"deletion-dialog-confirm-button"},secondary:{children:s,onClick:e,autoFocus:!0,id:"deletion-dialog-dismiss-button"}},children:a})},g=({closeConfirmDeleteDialog:e,goToSharingAccess:t,isVisible:i,itemId:c,onDeletionSuccess:d,sharingStatus:p,translations:g,vaultItemType:h,isShared:S,isSharedViaUserGroup:C,isItemInCollection:y,isLastAdmin:b})=>{const{showToast:f}=(0,n.p)(),{translate:D}=(0,o.Z)(),{deleteVaultItem:w}=(0,a.u)(s.L);if(!i)return null;let A;return(S||p?.isShared)&&(C&&(A=l.GroupSharing),b&&(A=l.LastAdmin),y&&(A=l.CollectionSharing)),A&&t?(0,m.tZ)(u,{reason:A,translations:g,goToSharingAccess:t,closeCantDeleteDialog:e}):(0,m.tZ)(_,{closeConfirmDeleteDialog:e,onDeleteConfirm:async()=>{try{var e;(await w({id:c,vaultItemType:h})).tag===r.rq.Success?(f({description:null!=(e=g.deleteSuccessToast)?e:D("webapp_personal_info_edition_delete_success_toast")}),d()):f({description:D("_common_generic_error"),mood:"danger",isManualDismiss:!0})}catch(e){f({description:D("_common_generic_error"),mood:"danger",isManualDismiss:!0})}},translations:g})}},31605:(e,t,i)=>{i.d(t,{Z:()=>n});const n={alertWrapper:"alertWrapper--JLZLLWrHCo"}}}]);