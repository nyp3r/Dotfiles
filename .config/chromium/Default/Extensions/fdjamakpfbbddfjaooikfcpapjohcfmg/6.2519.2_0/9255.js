"use strict";(globalThis.webpackChunk_dashlane_leeloo=globalThis.webpackChunk_dashlane_leeloo||[]).push([[9255],{48094:(e,a,n)=>{n.d(a,{D:()=>_});var t=n(75968),i=n(59115),l=n(96832),o=n(36351);const _=(0,l.forwardRef)((({label:e,name:a,value:n,placeholder:_,options:c,disabled:d,dataName:r="localeFormat",onChange:p},u)=>{const s=(0,l.useMemo)((()=>c.map((e=>(0,o.tZ)(t.$,{value:e.value,children:e.label},e.value)))),[c]);return(0,o.tZ)(i.m,{ref:u,name:a,label:e,placeholder:_,"data-name":r,value:n,onChange:p,readOnly:d,children:s},"country")}));_.displayName="CountryField"},79255:(e,a,n)=>{n.d(a,{o:()=>x,e:()=>R});var t=n(96832),i=n(44105),l=n(73704),o=n(59115),_=n(75968),c=n(93853),d=n(21062),r=n(88203),p=n(45272),u=n(42670),s=n(82207),b=n(68819),m=n(67406),C=n(30309);const I="webapp_payment_edition_field_bank_account_BIC",y="webapp_payment_edition_field_bank_account_no_BIC_placeholder",h="webapp_payment_edition_field_bank_account_account_number",k="webapp_payment_edition_field_bank_account_no_account_number_placeholder",f="webapp_payment_alert_bank_account_BIC_copied",B="webapp_payment_alert_bank_account_account_number_copied";var g=n(68037),v=n(48094),w=n(79432),A=n(13631),N=n(36351);const E="webapp_payment_edition_field_bank_account_action_hide",O="webapp_payment_edition_field_bank_account_action_show",V="webapp_payment_edition_field_bank_account_country",P="webapp_payment_edition_field_bank_account_bank_name",D=(e,a)=>e.filter((e=>!(i.c[e]===i.c.UNIVERSAL||i.c[e]===i.c.NO_TYPE))).map((e=>({label:a(`country_name_${i.c[e]}`),value:i.c[e]}))).sort(((e,a)=>e.label.localeCompare(a.label))),L=(e,a)=>{const{bankAccount:n,errors:L=new Set,onValueChanged:x}=e,{bankCode:R,accountName:F,IBAN:S,BIC:H,ownerName:Z,spaceId:T,country:M}=n,U=S.length>0,z=H.length>0,q=Boolean(T),[$,X]=(0,t.useState)(!z),[K,j]=(0,t.useState)(!U),{translate:G}=(0,r.Z)(),{shouldShowFrozenStateDialog:Y}=(0,u.Ub)(),{logRevealBankAccountField:J,logCopiedBankAccountField:Q}=(0,w.D)(),W="edit"===e.variant?!e.areProtectedItemsUnlocked:void 0,ee=(e=>{switch(e){case C.cH.MX:return{IBAN:"webapp_payment_edition_field_bank_account_CLABE",BIC:I,IBAN_PLACEHOLDER:"webapp_payment_edition_field_bank_account_no_CLABE_placeholder",BIC_PLACEHOLDER:y,IBAN_COPIED:"webapp_payment_alert_bank_account_CLABE_copied",BIC_COPIED:f};case C.cH.GB:return{IBAN:h,BIC:"webapp_payment_edition_field_bank_account_sort_code",IBAN_PLACEHOLDER:k,BIC_PLACEHOLDER:"webapp_payment_edition_field_bank_account_no_sort_code_placeholder",IBAN_COPIED:B,BIC_COPIED:"webapp_payment_alert_bank_account_sort_code_copied"};case C.cH.US:return{IBAN:h,BIC:"webapp_payment_edition_field_bank_account_routing_number",IBAN_PLACEHOLDER:k,BIC_PLACEHOLDER:"webapp_payment_edition_field_bank_account_no_routing_number_placeholder",IBAN_COPIED:B,BIC_COPIED:"webapp_payment_alert_bank_account_routing_number_copied"};default:return{IBAN:"webapp_payment_edition_field_bank_account_IBAN",BIC:I,IBAN_PLACEHOLDER:"webapp_payment_edition_field_bank_account_no_IBAN_placeholder",BIC_PLACEHOLDER:y,IBAN_COPIED:"webapp_payment_alert_bank_account_IBAN_copied",BIC_COPIED:f}}})(M),ae=(0,t.useCallback)((e=>a=>{const n="string"==typeof a?a:a.target.value;x({[e]:n})}),[x]),ne="edit"===e.variant?a=>{(0,p.Kz)(new l.UserRevealVaultItemFieldEvent({field:a,isProtected:!0,itemId:e.itemId,itemType:l.ItemType.BankStatement}))}:void 0,te="edit"===e.variant?(a,n)=>new Promise(((t,i)=>{if(a||e.areProtectedItemsUnlocked)return n(),t();W&&"function"==typeof e.openProtectedItemsUnlocker&&e.openProtectedItemsUnlocker({action:b.P.Show,itemType:b.R.CreditCard,successCallback:()=>(n(),t()),cancelCallback:i})})):void 0,ie=()=>{!$&&ne&&(ne(l.Field.Bic),q&&J({name:F,field:l.Field.Bic,country:M})),X((e=>!e))},le=()=>{!K&&ne&&(ne(l.Field.Iban),q&&J({name:F,field:l.Field.Iban,country:M})),j((e=>!e))},oe="edit"===e.variant?a=>{(0,p.Kz)(new l.UserCopyVaultItemFieldEvent({itemType:l.ItemType.BankStatement,field:l.Field.Bic,itemId:e.itemId,isProtected:!0})),q&&Q({name:F,field:l.Field.Bic,country:M}),a&&e.onCopy(G(ee.BIC_COPIED))}:void 0,_e="edit"===e.variant?a=>{(0,p.Kz)(new l.UserCopyVaultItemFieldEvent({itemType:l.ItemType.BankStatement,field:l.Field.Iban,itemId:e.itemId,isProtected:!0})),q&&Q({name:F,field:l.Field.Iban,country:M}),a&&e.onCopy(G(ee.IBAN_COPIED))}:void 0,ce=(0,A.h)(M,!0),de=(0,t.useMemo)((()=>ce.map((e=>({label:e.localizedString,value:`${e.code}`})))),[ce]);(0,t.useEffect)((()=>{var e;void 0===(e=R,de.find((({value:a})=>a===e)))&&de.length>0&&x({bankCode:de[0].value},!0),""===R||de.length||x({bankCode:""})}),[R,n,de,x]);const re=(0,t.useMemo)((()=>{const e=Object.keys(i.c);return(0,N.tZ)(v.D,{label:G(V),placeholder:G(V)+M,disabled:!!Y,options:D(e,G),value:M,onChange:ae("country")})}),[M,ae,Y,G]),pe=(0,t.useMemo)((()=>de.length>0?(0,N.tZ)(o.m,{label:G(P),placeholder:G(P)+R,onChange:ae("bankCode"),value:R,readOnly:!!Y,children:de.map((e=>(0,N.tZ)(_.$,{value:e.value,children:e.label},e.value)))},`${M}bank`):null),[R,de,M,ae,Y,G]);return(0,N.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"16px"},children:[(0,N.BX)(g.u,{title:G("webapp_payment_edition_content_bank_details_label"),additionalSx:{display:"flex",flexDirection:"column",gap:"8px"},children:[(0,N.tZ)(c.n,{value:Z,label:G("webapp_payment_edition_field_bank_account_owner_name"),placeholder:G("webapp_payment_edition_field_bank_account_no_owner_name_placeholder"),onChange:ae("ownerName"),disabled:!!Y,ref:a},"owner"),(0,N.tZ)(d.N,{required:!0,label:G(ee.IBAN),placeholder:G(ee.IBAN_PLACEHOLDER),"data-name":"IBAN",readOnly:!K&&U||!!Y,isValueInitiallyVisible:K,toggleVisibilityLabel:{hide:G(E),show:G(O)},onValueVisibilityChangeRequest:te?()=>te?.(K,le):void 0,actions:_e&&void 0!==W?[(0,N.tZ)(s.m,{data:S,checkProtected:()=>W,onCopy:_e,itemType:b.R.BankAccount},"copy-iban")]:void 0,value:K?S:"●●●●●●●●●●●●●●●●",onChange:ae("IBAN"),error:L.has("IBAN")},"IBAN"),(0,N.tZ)(d.N,{readOnly:!$&&z||!!Y,value:$?H:"●●●●●●",label:G(ee.BIC),placeholder:G(ee.BIC_PLACEHOLDER),isValueInitiallyVisible:$,toggleVisibilityLabel:{hide:G(E),show:G(O)},onValueVisibilityChangeRequest:te?()=>te?.($,ie):void 0,actions:oe&&void 0!==W?[(0,N.tZ)(s.m,{data:H,checkProtected:()=>W,onCopy:oe,itemType:b.R.BankAccount},"copy-bic")]:void 0,onChange:ae("BIC"),error:L.has("BIC")},"BIC"),re,pe]}),(0,N.BX)(g.u,{title:G("webapp_payment_edition_content_bank_organization_label"),additionalSx:{display:"flex",flexDirection:"column",gap:"8px"},children:[(0,N.tZ)(c.n,{value:F,label:G("webapp_payment_edition_field_bank_account_name"),placeholder:G("webapp_payment_edition_field_bank_account_no_name_placeholder"),onChange:ae("accountName"),disabled:!!Y},"name"),(0,N.tZ)(m.M,{isUsingNewDesign:!0,spaceId:null!=T?T:"",labelSx:m.e,onChange:e=>ae("spaceId")(e),disabled:!!Y})]})]})},x=(0,t.forwardRef)(L),R=e=>e.IBAN&&0!==e.IBAN.length?{isValid:!0}:{isValid:!1,errorSet:new Set(["IBAN"])}},21062:(e,a,n)=>{n.d(a,{N:()=>r});var t=n(36351),i=n(96832),l=n(61490);const o={iban:{mask:"**** **** **** **** **** **** ****"},card:{mask:[{mask:"0000 000000 00000",regex:/^3[47]/},{mask:"000000 0000000000000",regex:/^62/,numberOfCharacters:19},{mask:"0000 000000 0000",regex:/^(3[689]|30[0-59])/,numberOfCharacters:14},{mask:"0000 0000 00000",regex:/^(5[0678]|6)/,numberOfCharacters:13},{mask:"0000 000000 00000",regex:/^(5[0678]|6)/,numberOfCharacters:15},{mask:"0000 0000 0000 0000 000",regex:/^(5[0678]|6)/,numberOfCharacters:19},{mask:"0000 00000 000000",regex:/^1/,numberOfCharacters:15},{mask:"0000 0000 0000 000000000",regex:/^[0-9]/}],dispatch:(e,a)=>{const n=(a.value+e).replace(/\D/g,"");return a.compiledMasks.find((e=>{const a=e;return a.numberOfCharacters?a.regex.test(n)&&n.length===a.numberOfCharacters:a.regex.test(n)}))}}};var _=n(95097),c=n(93853),d=n(9190);const r=(0,i.forwardRef)((({toggleVisibilityLabel:e,value:a,formatter:n,isValueInitiallyVisible:r=!1,onValueVisibilityChange:p,onValueVisibilityChangeRequest:u,autoHideTimer:s,onChange:b,actions:m=[],...C},I)=>{const{content:y,setContent:h,inputRef:k}=(0,d.t)({defaultValue:C.defaultValue,ref:I,value:a}),f=((e,a)=>{const n=(0,i.useMemo)((()=>{if(a)return(e=>l.ZP.createMask(o[e]))(a)}),[a]);return(0,i.useMemo)((()=>e&&n?(n.resolve(e),n.value):e),[n,e])})(y,n),{isValueVisible:B,toggleValueVisibility:g}=(0,_.P)({isValueInitiallyVisible:r,autoHideTimer:s,onValueVisibilityChange:p,onValueVisibilityChangeRequest:u}),v=[{label:B?e.hide:e.show,iconName:B?"ActionHideOutlined":"ActionRevealOutlined",onClick:g},...m];return(0,t.tZ)(c.n,{internalProps:{isObfuscated:!B},...C,ref:k,value:f,type:B?"text":"password",actions:v,onChange:e=>{b&&b(e),h(e.target.value)},sx:{"input, .readOnlyMask":{variant:"text.ds.body.standard.monospace"}}})}));r.displayName="ObfuscatedField"}}]);