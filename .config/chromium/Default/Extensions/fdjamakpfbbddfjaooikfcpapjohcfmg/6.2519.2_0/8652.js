"use strict";(globalThis.webpackChunk_dashlane_leeloo=globalThis.webpackChunk_dashlane_leeloo||[]).push([[8652],{48652:(e,t,n)=>{n.r(t),n.d(t,{Connected:()=>L});var i,a=n(24507),o=n(14877),s=n(39431),r=n(96832),c=n(26849),l=n(78346),u=n(8180),m=n(14900),d=n(73704),_=n(86498),p=n(88203),g=n(45272),h=n(92077),S=n(76376),b=n(63520),C=n(82994),f=n(79255),k=n(49087),D=n(3045),A=n(31605),y=n(94138),w=n(36351);const I=({item:e})=>{const{translate:t}=(0,p.Z)(),{routes:n}=(0,S.Xo)(),{updateVaultItem:a}=(0,u.u)(o.L),[I,L]=(0,r.useState)(!1),[T,Z]=(0,r.useState)(!1),[v,V]=(0,r.useState)(new Set),[N,U]=(0,r.useState)(e),[B,G]=(0,r.useState)(!1),{areProtectedItemsUnlocked:E,openProtectedItemsUnlocker:P,protectedItemsUnlockerShown:M}=(0,D.t)(),W=(0,k.B)(),q=(0,_.V)();(0,r.useEffect)((()=>{(0,g.Nc)(d.PageView.ItemBankStatementDetails)}),[]);const O=()=>{(0,g.Nc)(d.PageView.ItemPaymentList),(0,h.uX)(n.userPayments)},R=(0,r.useCallback)((t=>{U((n=>{const i={...n,...t};return L(!(0,c.equals)(i,e)),i}))}),[e]),z=()=>{q.showAlert(t("_common_generic_error"),m.BLW.ERROR)},H={confirmDeleteConfirm:t("webapp_payment_edition_bank_account_delete_confirm"),confirmDeleteDismiss:t("webapp_payment_edition_bank_account_delete_dismiss"),confirmDeleteSubtitle:t("webapp_payment_edition_bank_account_delete_subtitle"),confirmDeleteTitle:t("webapp_payment_edition_bank_account_delete_title"),deleteSuccessToast:e.accountName?t("webapp_payment_edition_bank_account_name_delete_alert",{accountName:e.accountName}):t("webapp_payment_edition_bank_account_generic_delete_alert")},X=M||B;return(0,w.BX)(b.zI,{isUsingNewDesign:!0,onNavigateOut:O,ignoreCloseOnEscape:X,formId:"bank-account-edit-form",onSubmit:async()=>{if(T)return;const n=(0,f.e)(N);if(!n.isValid)return V(n.errorSet);Z(!0);try{const n=await a({vaultItemType:s.U.BankAccount,content:N,id:e.id});if((0,l.d6)(n)){const e=N.accountName?t("webapp_payment_edition_bank_account_name_update_alert",{accountName:N.accountName}):t("webapp_payment_edition_bank_account_generic_update_alert");q.showAlert(e,m.BLW.SUCCESS),O()}else Z(!1),z()}catch(e){Z(!1),z()}},header:(0,w.tZ)(b.V9,{icon:i||(i=(0,w.tZ)(y.A,{type:"bank-account",size:"xlarge"})),title:e.accountName}),onClickDelete:()=>{G(!0)},itemHasBeenEdited:I,isViewingExistingItem:!0,children:[(0,w.tZ)(f.o,{itemId:e.id,bankAccount:N,errors:v,onCopy:e=>{W.setAlertMessage(e),W.show()},onValueChanged:R,areProtectedItemsUnlocked:E,openProtectedItemsUnlocker:P,variant:"edit"}),(0,w.tZ)(C.s,{isVisible:B,itemId:e.id,closeConfirmDeleteDialog:()=>{G(!1)},onDeletionSuccess:O,translations:H,vaultItemType:s.U.BankAccount}),W.isAlertVisible&&(0,w.tZ)("div",{className:A.Z.alertWrapper,children:(0,w.tZ)(m.bZj,{size:m.k3y.SMALL,severity:m.BLW.SUCCESS,closeIconName:t("_common_alert_dismiss_button"),onClose:()=>{W.hide()},children:W.alertMessage})})]})},L=e=>{const{data:t}=(0,a.k)(o.L,"query",{vaultItemTypes:[s.U.BankAccount],ids:[`{${e.match.params.uuid}}`]});return t?.bankAccountsResult.items.length?(0,w.tZ)(I,{...e,item:t.bankAccountsResult.items[0]}):null}},49087:(e,t,n)=>{n.d(t,{B:()=>a});var i=n(96832);const a=()=>{const[e,t]=i.useState(""),[n,a]=i.useState(!1),o=()=>{a(!1)};return i.useEffect((()=>{if(!n)return;const e=setTimeout(o,5e3);return()=>clearTimeout(e)}),[n,e]),{isAlertVisible:n,alertMessage:e,setAlertMessage:t,hide:o,show:()=>{a(!0)}}}},82994:(e,t,n)=>{n.d(t,{s:()=>g}),n(96832);var i=n(62264),a=n(8180),o=n(51031),s=n(14877),r=n(88203);let c=function(e){return e.LastAdmin="LastAdmin",e.GroupSharing="GroupSharing",e.CollectionSharing="CollectionSharing",e.Generic="Generic",e}({});var l=n(78956),u=n(24731),m=n(36351);const d=({reason:e,translations:t,goToSharingAccess:n,closeCantDeleteDialog:i})=>{const{translate:a}=(0,r.Z)(),o=((e,t)=>{const{groupSharingTitle:n,lastAdminTitle:i,collectionSharingTitle:a,genericErrorTitle:o}=e;switch(t){case c.LastAdmin:return i;case c.GroupSharing:return n;case c.CollectionSharing:return a;case c.Generic:return o;default:return(0,u.U)(t)}})(t,e),s=((e,t)=>{const{groupSharingSubtitle:n,lastAdminSubtitle:i,collectionSharingSubtitle:a,genericErrorSubtitle:o}=e;switch(t){case c.LastAdmin:return i;case c.GroupSharing:return n;case c.CollectionSharing:return a;case c.Generic:return o;default:return(0,u.U)(t)}})(t,e);return(0,m.tZ)(l.Vq,{isOpen:!0,onClose:i,title:null!=o?o:"",closeActionLabel:a("_common_dialog_dismiss_button"),actions:e===c.LastAdmin||c.GroupSharing||c.CollectionSharing?{primary:{children:t.lastAdminActionLabel,onClick:()=>{n(),i()}}}:void 0,children:s})};var _=n(37527);const p=({closeConfirmDeleteDialog:e,onDeleteConfirm:t,translations:n})=>{const{translate:i}=(0,r.Z)(),{confirmDeleteSubtitle:a,confirmDeleteTitle:o,confirmDeleteDismiss:s,confirmDeleteConfirm:c}=n;return(0,m.tZ)(l.Vq,{title:o,onClose:e,isOpen:!0,dialogClassName:_.Ht,closeActionLabel:i("_common_dialog_dismiss_button"),isDestructive:!0,actions:{primary:{children:c,onClick:t,id:"deletion-dialog-confirm-button"},secondary:{children:s,onClick:e,autoFocus:!0,id:"deletion-dialog-dismiss-button"}},children:a})},g=({closeConfirmDeleteDialog:e,goToSharingAccess:t,isVisible:n,itemId:l,onDeletionSuccess:u,sharingStatus:_,translations:g,vaultItemType:h,isShared:S,isSharedViaUserGroup:b,isItemInCollection:C,isLastAdmin:f})=>{const{showToast:k}=(0,i.p)(),{translate:D}=(0,r.Z)(),{deleteVaultItem:A}=(0,a.u)(s.L);if(!n)return null;let y;return(S||_?.isShared)&&(b&&(y=c.GroupSharing),f&&(y=c.LastAdmin),C&&(y=c.CollectionSharing)),y&&t?(0,m.tZ)(d,{reason:y,translations:g,goToSharingAccess:t,closeCantDeleteDialog:e}):(0,m.tZ)(p,{closeConfirmDeleteDialog:e,onDeleteConfirm:async()=>{try{var e;(await A({id:l,vaultItemType:h})).tag===o.rq.Success?(k({description:null!=(e=g.deleteSuccessToast)?e:D("webapp_personal_info_edition_delete_success_toast")}),u()):k({description:D("_common_generic_error"),mood:"danger",isManualDismiss:!0})}catch(e){k({description:D("_common_generic_error"),mood:"danger",isManualDismiss:!0})}},translations:g})}},31605:(e,t,n)=>{n.d(t,{Z:()=>i});const i={alertWrapper:"alertWrapper--JLZLLWrHCo"}}}]);