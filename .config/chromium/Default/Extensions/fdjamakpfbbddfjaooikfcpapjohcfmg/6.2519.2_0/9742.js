"use strict";(globalThis.webpackChunk_dashlane_leeloo=globalThis.webpackChunk_dashlane_leeloo||[]).push([[9742],{82994:(e,t,i)=>{i.d(t,{s:()=>g}),i(96832);var s=i(62264),a=i(8180),n=i(51031),l=i(14877),r=i(88203);let o=function(e){return e.LastAdmin="LastAdmin",e.GroupSharing="GroupSharing",e.CollectionSharing="CollectionSharing",e.Generic="Generic",e}({});var c=i(78956),d=i(24731),u=i(36351);const m=({reason:e,translations:t,goToSharingAccess:i,closeCantDeleteDialog:s})=>{const{translate:a}=(0,r.Z)(),n=((e,t)=>{const{groupSharingTitle:i,lastAdminTitle:s,collectionSharingTitle:a,genericErrorTitle:n}=e;switch(t){case o.LastAdmin:return s;case o.GroupSharing:return i;case o.CollectionSharing:return a;case o.Generic:return n;default:return(0,d.U)(t)}})(t,e),l=((e,t)=>{const{groupSharingSubtitle:i,lastAdminSubtitle:s,collectionSharingSubtitle:a,genericErrorSubtitle:n}=e;switch(t){case o.LastAdmin:return s;case o.GroupSharing:return i;case o.CollectionSharing:return a;case o.Generic:return n;default:return(0,d.U)(t)}})(t,e);return(0,u.tZ)(c.Vq,{isOpen:!0,onClose:s,title:null!=n?n:"",closeActionLabel:a("_common_dialog_dismiss_button"),actions:e===o.LastAdmin||o.GroupSharing||o.CollectionSharing?{primary:{children:t.lastAdminActionLabel,onClick:()=>{i(),s()}}}:void 0,children:l})};var h=i(37527);const p=({closeConfirmDeleteDialog:e,onDeleteConfirm:t,translations:i})=>{const{translate:s}=(0,r.Z)(),{confirmDeleteSubtitle:a,confirmDeleteTitle:n,confirmDeleteDismiss:l,confirmDeleteConfirm:o}=i;return(0,u.tZ)(c.Vq,{title:n,onClose:e,isOpen:!0,dialogClassName:h.Ht,closeActionLabel:s("_common_dialog_dismiss_button"),isDestructive:!0,actions:{primary:{children:o,onClick:t,id:"deletion-dialog-confirm-button"},secondary:{children:l,onClick:e,autoFocus:!0,id:"deletion-dialog-dismiss-button"}},children:a})},g=({closeConfirmDeleteDialog:e,goToSharingAccess:t,isVisible:i,itemId:c,onDeletionSuccess:d,sharingStatus:h,translations:g,vaultItemType:_,isShared:D,isSharedViaUserGroup:b,isItemInCollection:S,isLastAdmin:f})=>{const{showToast:C}=(0,s.p)(),{translate:I}=(0,r.Z)(),{deleteVaultItem:v}=(0,a.u)(l.L);if(!i)return null;let E;return(D||h?.isShared)&&(b&&(E=o.GroupSharing),f&&(E=o.LastAdmin),S&&(E=o.CollectionSharing)),E&&t?(0,u.tZ)(m,{reason:E,translations:g,goToSharingAccess:t,closeCantDeleteDialog:e}):(0,u.tZ)(p,{closeConfirmDeleteDialog:e,onDeleteConfirm:async()=>{try{var e;(await v({id:c,vaultItemType:_})).tag===n.rq.Success?(C({description:null!=(e=g.deleteSuccessToast)?e:I("webapp_personal_info_edition_delete_success_toast")}),d()):C({description:I("_common_generic_error"),mood:"danger",isManualDismiss:!0})}catch(e){C({description:I("_common_generic_error"),mood:"danger",isManualDismiss:!0})}},translations:g})}},42521:(e,t,i)=>{i.d(t,{Jh:()=>r,UE:()=>n,ZP:()=>o});var s=i(96832),a=i(26849);const n=(0,a.compose)(a.not,a.isEmpty,a.trim,(0,a.defaultTo)("")),l=/.+@.+\..+/,r=e=>l.test(e.trim());class o extends s.Component{constructor(e){super(e),this.setInternalState=e=>{this.setState({internal:{...this.state.internal,...e}})},this.setUpdatedValues=e=>{const{signalEditedValues:t,onValuesUpdated:i}=this.props,s={...this.state.values,...e};this.setState({values:s},(()=>{t&&t(this.hasFormBeenEdited()),i&&i(s)}))},this.handleChange=(e,t="")=>{if(e instanceof Event&&t)throw new Error("handleChange was called with both a ChangeEvent and key.");const i=e?.target?{[e.target.dataset.name]:e.target.value}:{[t]:e};this.setUpdatedValues(i)},this.handleChanges=e=>{this.setUpdatedValues(e)},this.validateValues=e=>{if(0===Object.keys(e).length)return!0;const t=(0,a.reduce)(((t,i)=>(t[i]=e[i]?(0,a.compose)(a.not,e[i]):()=>!1,t)),{},Object.keys(this.state.values)),i=(0,a.evolve)(t,this.state.values);return this.setState({errors:i}),(0,a.all)((0,a.equals)(!1),(0,a.values)(i))},this.hasFormBeenEdited=()=>!(0,a.equals)(this.state.values,this.props.currentValues),this.getValues=()=>this.state.values;const t=Object.keys(e.currentValues).reduce(((e,t)=>(e[t]=!1,e)),{});this.state={internal:{},values:e.currentValues,errors:t}}componentDidUpdate(e){(0,a.equals)(this.props.currentValues,e.currentValues)||this.setState({values:this.props.currentValues})}}},86816:(e,t,i)=>{i.d(t,{Y:()=>S});var s=i(96832),a=i(94138),n=i(73704),l=i(39431),r=i(14877),o=i(8180),c=i(14900),d=i(63520),u=i(82994),m=i(92077),h=i(86498),p=i(88203),g=i(45272),_=i(36351);const D={DELETE_CONFIRM:"webapp_personal_info_edition_delete_confirm",DELETE_DISMISS:"webapp_personal_info_edition_delete_dismiss",DELETE_SUBTITLE:"webapp_personal_info_edition_delete_subtitle"},b={[l.U.Address]:"address",[l.U.Company]:"company",[l.U.Email]:"email",[l.U.Identity]:"name",[l.U.Phone]:"phone-number",[l.U.Website]:"website"};function S(e){const{getItemTypeDescription:t,getDeleteTitle:i,getTitle:S,vaultItemType:f,renderForm:C}=e;return({lee:e,item:I,match:v})=>{const E=(0,s.useRef)(null),w=(0,h.V)(),{translate:T}=(0,p.Z)(),{routes:y}=(0,m.Xo)(),{updateVaultItem:V}=(0,o.u)(r.L),[U,L]=(0,s.useState)(!1),[A,x]=(0,s.useState)(!1);if((0,s.useEffect)((()=>{const e={[l.U.Address]:n.PageView.ItemAddressDetails,[l.U.Company]:n.PageView.ItemCompanyDetails,[l.U.Email]:n.PageView.ItemEmailDetails,[l.U.Identity]:n.PageView.ItemIdentityDetails,[l.U.Phone]:n.PageView.ItemPhoneDetails,[l.U.Website]:n.PageView.ItemWebsiteDetails};(0,g.Nc)(e[f])}),[]),!I)return null;const Z=()=>{(0,g.Nc)(n.PageView.ItemPersonalInfoList),(0,m.uX)(y.userPersonalInfo)},P=I?S(I,T):"",k={confirmDeleteConfirm:T(D.DELETE_CONFIRM),confirmDeleteDismiss:T(D.DELETE_DISMISS),confirmDeleteSubtitle:T(D.DELETE_SUBTITLE),confirmDeleteTitle:i(T)};return(0,_.BX)(d.zI,{isUsingNewDesign:!0,isViewingExistingItem:Boolean(v.params?.uuid),itemHasBeenEdited:U,onNavigateOut:Z,onSubmit:async()=>{I.id&&Boolean(E.current?.isFormValid())&&(await(async()=>{const e=E.current?.getValues();e&&"success"!==(await V({vaultItemType:f,content:e,id:I.id})).tag&&w.showAlert(T("_common_generic_error"),c.BLW.ERROR)})(),Z())},onClickDelete:()=>x(!0),ignoreCloseOnEscape:A,formId:"edit_personalinfo_panel",header:(0,_.tZ)(d.V9,{icon:(0,_.tZ)(a.A,{type:b[f],size:"xlarge"}),title:P,titleDescription:t(T)}),children:[C(e,I,E,(()=>L(!0))),(0,_.tZ)(u.s,{isVisible:A,itemId:I.id,closeConfirmDeleteDialog:()=>x(!1),onDeletionSuccess:Z,translations:k,vaultItemType:f})]})}}},39742:(e,t,i)=>{i.r(t),i.d(t,{Connected:()=>d}),i(96832);var s=i(24507),a=i(14877),n=i(39431),l=i(47837),r=i(86816),o=i(36351);const c=(0,r.Y)({getDeleteTitle:e=>e("webapp_personal_info_edition_delete_title_website"),getItemTypeDescription:e=>e("webapp_personal_info_edition_header_website_description"),getTitle:e=>e.itemName,vaultItemType:n.U.Website,renderForm:(e,t,i,s)=>{const a={itemName:t.itemName,URL:t.URL,spaceId:t.spaceId};return(0,o.tZ)(l.m,{lee:e,currentValues:a,signalEditedValues:s,ref:i})}}),d=e=>{const{data:t}=(0,s.k)(a.L,"query",{vaultItemTypes:[n.U.Website],ids:[`{${e.match.params.uuid}}`]});return(0,o.tZ)(c,{...e,item:t?.websitesResult.items[0]})}},47837:(e,t,i)=>{i.d(t,{m:()=>c});var s=i(93853),a=i(42670),n=i(42521),l=i(67406),r=i(68037),o=i(36351);class c extends n.ZP{isFormValid(){return this.validateValues({URL:n.UE})}render(){var e;const t=this.props.lee.translate.namespace("webapp_personal_info_edition_website_"),{shouldShowFrozenStateDialog:i}=this.context;return(0,o.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"16px"},children:[(0,o.tZ)(r.u,{title:t("content_card_details_label"),additionalSx:{display:"flex",flexDirection:"column",gap:"8px"},children:(0,o.tZ)(s.n,{required:!0,label:t("website_label"),placeholder:t("placeholder_no_website"),"data-name":"URL",value:this.state.values.URL,error:this.state.errors.URL,onChange:this.handleChange,readOnly:!!i},"website")}),(0,o.BX)(r.u,{title:t("content_card_organization_label"),additionalSx:{display:"flex",flexDirection:"column",gap:"8px"},children:[(0,o.tZ)(s.n,{label:t("name_label"),placeholder:t("placeholder_no_name"),"data-name":"itemName",value:this.state.values.itemName,onChange:this.handleChange,readOnly:!!i},"name"),(0,o.tZ)(l.M,{isUsingNewDesign:!0,labelSx:l.e,spaceId:null!=(e=this.state.values.spaceId)?e:"",onChange:e=>this.handleChange(e,"spaceId"),disabled:!!i})]})]})}}c.contextType=a.CQ}}]);