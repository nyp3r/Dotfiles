"use strict";(globalThis.webpackChunk_dashlane_leeloo=globalThis.webpackChunk_dashlane_leeloo||[]).push([[7418],{42521:(e,a,t)=>{t.d(a,{Jh:()=>o,UE:()=>s,ZP:()=>i});var l=t(96832),n=t(26849);const s=(0,n.compose)(n.not,n.isEmpty,n.trim,(0,n.defaultTo)("")),r=/.+@.+\..+/,o=e=>r.test(e.trim());class i extends l.Component{constructor(e){super(e),this.setInternalState=e=>{this.setState({internal:{...this.state.internal,...e}})},this.setUpdatedValues=e=>{const{signalEditedValues:a,onValuesUpdated:t}=this.props,l={...this.state.values,...e};this.setState({values:l},(()=>{a&&a(this.hasFormBeenEdited()),t&&t(l)}))},this.handleChange=(e,a="")=>{if(e instanceof Event&&a)throw new Error("handleChange was called with both a ChangeEvent and key.");const t=e?.target?{[e.target.dataset.name]:e.target.value}:{[a]:e};this.setUpdatedValues(t)},this.handleChanges=e=>{this.setUpdatedValues(e)},this.validateValues=e=>{if(0===Object.keys(e).length)return!0;const a=(0,n.reduce)(((a,t)=>(a[t]=e[t]?(0,n.compose)(n.not,e[t]):()=>!1,a)),{},Object.keys(this.state.values)),t=(0,n.evolve)(a,this.state.values);return this.setState({errors:t}),(0,n.all)((0,n.equals)(!1),(0,n.values)(t))},this.hasFormBeenEdited=()=>!(0,n.equals)(this.state.values,this.props.currentValues),this.getValues=()=>this.state.values;const a=Object.keys(e.currentValues).reduce(((e,a)=>(e[a]=!1,e)),{});this.state={internal:{},values:e.currentValues,errors:a}}componentDidUpdate(e){(0,n.equals)(this.props.currentValues,e.currentValues)||this.setState({values:this.props.currentValues})}}},53748:(e,a,t)=>{t.d(a,{B:()=>y});var l=t(96832),n=t(73704),s=t(14900),r=t(8180),o=t(14877),i=t(39431),u=t(92077),h=t(39649),d=t(86498),c=t(88203),p=t(45272),m=t(42670),b=t(63520),v=t(15446),g=t(18462),_=t(36351);function y(e){const{renderForm:a,vaultItemType:t,iconType:y}=e;return({lee:e})=>{const{translate:V}=(0,c.Z)(),{routes:f}=(0,u.Xo)(),C=(0,d.V)(),{createVaultItem:x}=(0,r.u)(o.L),w=(0,l.useRef)(null),{openDialog:I,shouldShowFrozenStateDialog:E}=(0,m.Ub)(),[P,S]=(0,l.useState)(!1);(0,l.useEffect)((()=>{const e={[i.U.Address]:n.PageView.ItemAddressCreate,[i.U.Company]:n.PageView.ItemCompanyCreate,[i.U.Email]:n.PageView.ItemEmailCreate,[i.U.Identity]:n.PageView.ItemIdentityCreate,[i.U.Phone]:n.PageView.ItemPhoneCreate,[i.U.Website]:n.PageView.ItemWebsiteCreate};(0,p.Nc)(e[t])}),[]),(0,l.useEffect)((()=>{E&&I()}),[E]);const U=()=>{(0,p.Nc)(n.PageView.ItemPersonalInfoList),(0,u.uX)(f.userPersonalInfo)},k=(0,h.B)(e.globalState),Z=(0,_.tZ)(v.ZP,{iconSize:v.Jh.headerEditPanelIcon,iconType:y}),F=(0,g.gV)(V,t);return(0,_.tZ)(b.zI,{isUsingNewDesign:!0,isViewingExistingItem:!1,itemHasBeenEdited:P,onNavigateOut:U,onSubmit:async()=>{Boolean(w.current?.isFormValid())&&(await(async()=>{const e=w.current?.getValues();e&&"success"!==(await x({vaultItemType:t,content:e})).tag&&C.showAlert(V("_common_generic_error"),s.BLW.ERROR)})(),U())},formId:"add_personalinfo_panel",header:(0,_.tZ)(b.V9,{icon:Z,title:F}),children:a(e,w,(()=>S(!0)),k)})}}},7418:(e,a,t)=>{t.r(a),t.d(a,{PhoneAddPanel:()=>h}),t(96832);var l=t(44105),n=t(7325),s=t(39431),r=t(38983),o=t(53748),i=t(15446),u=t(36351);const h=(0,o.B)({iconType:i.Tu.phone,vaultItemType:s.U.Phone,renderForm:(e,a,t,s)=>{const o={localeFormat:l.c[e.globalState.locale.country]||l.c.US,phoneNumber:"",itemName:"",type:n.z.Mobile,spaceId:s};return(0,u.tZ)(r.b,{lee:e,currentValues:o,signalEditedValues:t,ref:a})}})},38983:(e,a,t)=>{t.d(a,{b:()=>g});var l=t(26849),n=t(63847),s=t(59115),r=t(75968),o=t(93853),i=t(42670),u=t(42521),h=t(67406),d=t(44105),c=t(7325),p=t(94431);function m(e){const a=e.namespace("country_name_");return e=>(e=(0,p.lC)(e),{label:`${a(d.c[e])} (+${p.b0[e]})`,selectedLabel:`${e} (+${p.b0[e]})`,value:e})}var b=t(68037),v=t(36351);class g extends u.ZP{isFormValid(){return this.validateValues({phoneNumber:u.UE})}render(){var e,a;const{lee:t}=this.props,i=t.translate.namespace("webapp_personal_info_edition_phone_"),{shouldShowFrozenStateDialog:u}=this.context,g=function(e){const a=e.namespace("personal_info_");return[{label:a("phone_type_mobile"),value:c.z.Mobile},{label:a("phone_type_landline"),value:c.z.Landline},{label:a("phone_type_work_mobile"),value:c.z.WorkMobile},{label:a("phone_type_work_landline"),value:c.z.WorkLandline},{label:a("phone_type_fax"),value:c.z.Fax},{label:a("phone_type_work_fax"),value:c.z.WorkFax},{label:a("phone_type_any"),value:c.z.Any}]}(t.translate),_=null!=(e=(0,l.find)((0,l.propEq)("value",this.state.values.type),g))?e:(0,l.head)(g),y=function(e){const a=m(e);return Object.keys(p.b0).map((e=>a(d.c[e])))}(t.translate),V=m(t.translate)(this.state.values.localeFormat);return(0,v.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"16px"},children:[(0,v.BX)(b.u,{title:i("content_card_details_label"),additionalSx:{display:"flex",flexDirection:"column",gap:"8px"},children:[(0,v.BX)(n.k,{sx:{gap:"8px"},children:[(0,v.tZ)(s.m,{label:"Country code",placeholder:V.label,"data-name":"localeFormat",value:V.value,onChange:e=>this.handleChange(e,"localeFormat"),readOnly:!!u,sx:{minWidth:"145px"},children:y.map((e=>{var a;return(0,v.tZ)(r.$,{value:e.value,displayValue:null!=(a=e.selectedLabel)?a:e.label,children:e.label},e.value)}))}),(0,v.tZ)(o.n,{required:!0,label:i("number_label"),placeholder:i("placeholder_no_number"),"data-name":"phoneNumber",value:this.state.values.phoneNumber,error:this.state.errors.phoneNumber,onChange:this.handleChange,readOnly:!!u})]}),(0,v.tZ)(s.m,{label:i("type_label"),placeholder:_.label,value:_.value,"data-name":"type",onChange:e=>this.handleChange(e,"type"),readOnly:!!u,children:g.map((e=>(0,v.tZ)(r.$,{value:e.value,children:e.label},e.value)))})]}),(0,v.BX)(b.u,{title:i("content_card_organization_label"),additionalSx:{display:"flex",flexDirection:"column",gap:"8px"},children:[(0,v.tZ)(o.n,{label:i("phonename_label"),placeholder:i("placeholder_no_phonename"),"data-name":"itemName",value:this.state.values.itemName,onChange:this.handleChange,readOnly:!!u}),(0,v.tZ)(h.M,{isUsingNewDesign:!0,labelSx:h.e,spaceId:null!=(a=this.state.values.spaceId)?a:"",onChange:e=>this.handleChange(e,"spaceId"),disabled:!!u})]})]})}}g.contextType=i.CQ}}]);