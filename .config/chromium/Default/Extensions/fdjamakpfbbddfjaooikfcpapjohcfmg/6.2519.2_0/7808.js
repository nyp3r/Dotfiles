"use strict";(globalThis.webpackChunk_dashlane_leeloo=globalThis.webpackChunk_dashlane_leeloo||[]).push([[7808],{82994:(e,t,a)=>{a.d(t,{s:()=>g}),a(96832);var i=a(62264),s=a(8180),n=a(51031),l=a(14877),r=a(88203);let o=function(e){return e.LastAdmin="LastAdmin",e.GroupSharing="GroupSharing",e.CollectionSharing="CollectionSharing",e.Generic="Generic",e}({});var c=a(78956),d=a(24731),u=a(36351);const m=({reason:e,translations:t,goToSharingAccess:a,closeCantDeleteDialog:i})=>{const{translate:s}=(0,r.Z)(),n=((e,t)=>{const{groupSharingTitle:a,lastAdminTitle:i,collectionSharingTitle:s,genericErrorTitle:n}=e;switch(t){case o.LastAdmin:return i;case o.GroupSharing:return a;case o.CollectionSharing:return s;case o.Generic:return n;default:return(0,d.U)(t)}})(t,e),l=((e,t)=>{const{groupSharingSubtitle:a,lastAdminSubtitle:i,collectionSharingSubtitle:s,genericErrorSubtitle:n}=e;switch(t){case o.LastAdmin:return i;case o.GroupSharing:return a;case o.CollectionSharing:return s;case o.Generic:return n;default:return(0,d.U)(t)}})(t,e);return(0,u.tZ)(c.Vq,{isOpen:!0,onClose:i,title:null!=n?n:"",closeActionLabel:s("_common_dialog_dismiss_button"),actions:e===o.LastAdmin||o.GroupSharing||o.CollectionSharing?{primary:{children:t.lastAdminActionLabel,onClick:()=>{a(),i()}}}:void 0,children:l})};var h=a(37527);const p=({closeConfirmDeleteDialog:e,onDeleteConfirm:t,translations:a})=>{const{translate:i}=(0,r.Z)(),{confirmDeleteSubtitle:s,confirmDeleteTitle:n,confirmDeleteDismiss:l,confirmDeleteConfirm:o}=a;return(0,u.tZ)(c.Vq,{title:n,onClose:e,isOpen:!0,dialogClassName:h.Ht,closeActionLabel:i("_common_dialog_dismiss_button"),isDestructive:!0,actions:{primary:{children:o,onClick:t,id:"deletion-dialog-confirm-button"},secondary:{children:l,onClick:e,autoFocus:!0,id:"deletion-dialog-dismiss-button"}},children:s})},g=({closeConfirmDeleteDialog:e,goToSharingAccess:t,isVisible:a,itemId:c,onDeletionSuccess:d,sharingStatus:h,translations:g,vaultItemType:_,isShared:D,isSharedViaUserGroup:S,isItemInCollection:b,isLastAdmin:f})=>{const{showToast:v}=(0,i.p)(),{translate:y}=(0,r.Z)(),{deleteVaultItem:C}=(0,s.u)(l.L);if(!a)return null;let E;return(D||h?.isShared)&&(S&&(E=o.GroupSharing),f&&(E=o.LastAdmin),b&&(E=o.CollectionSharing)),E&&t?(0,u.tZ)(m,{reason:E,translations:g,goToSharingAccess:t,closeCantDeleteDialog:e}):(0,u.tZ)(p,{closeConfirmDeleteDialog:e,onDeleteConfirm:async()=>{try{var e;(await C({id:c,vaultItemType:_})).tag===n.rq.Success?(v({description:null!=(e=g.deleteSuccessToast)?e:y("webapp_personal_info_edition_delete_success_toast")}),d()):v({description:y("_common_generic_error"),mood:"danger",isManualDismiss:!0})}catch(e){v({description:y("_common_generic_error"),mood:"danger",isManualDismiss:!0})}},translations:g})}},42521:(e,t,a)=>{a.d(t,{Jh:()=>r,UE:()=>n,ZP:()=>o});var i=a(96832),s=a(26849);const n=(0,s.compose)(s.not,s.isEmpty,s.trim,(0,s.defaultTo)("")),l=/.+@.+\..+/,r=e=>l.test(e.trim());class o extends i.Component{constructor(e){super(e),this.setInternalState=e=>{this.setState({internal:{...this.state.internal,...e}})},this.setUpdatedValues=e=>{const{signalEditedValues:t,onValuesUpdated:a}=this.props,i={...this.state.values,...e};this.setState({values:i},(()=>{t&&t(this.hasFormBeenEdited()),a&&a(i)}))},this.handleChange=(e,t="")=>{if(e instanceof Event&&t)throw new Error("handleChange was called with both a ChangeEvent and key.");const a=e?.target?{[e.target.dataset.name]:e.target.value}:{[t]:e};this.setUpdatedValues(a)},this.handleChanges=e=>{this.setUpdatedValues(e)},this.validateValues=e=>{if(0===Object.keys(e).length)return!0;const t=(0,s.reduce)(((t,a)=>(t[a]=e[a]?(0,s.compose)(s.not,e[a]):()=>!1,t)),{},Object.keys(this.state.values)),a=(0,s.evolve)(t,this.state.values);return this.setState({errors:a}),(0,s.all)((0,s.equals)(!1),(0,s.values)(a))},this.hasFormBeenEdited=()=>!(0,s.equals)(this.state.values,this.props.currentValues),this.getValues=()=>this.state.values;const t=Object.keys(e.currentValues).reduce(((e,t)=>(e[t]=!1,e)),{});this.state={internal:{},values:e.currentValues,errors:t}}componentDidUpdate(e){(0,s.equals)(this.props.currentValues,e.currentValues)||this.setState({values:this.props.currentValues})}}},87808:(e,t,a)=>{a.r(t),a.d(t,{Connected:()=>d}),a(96832);var i=a(24507),s=a(14877),n=a(39431),l=a(46257),r=a(86816),o=a(36351);const c=(0,r.Y)({getDeleteTitle:e=>e("webapp_personal_info_edition_delete_title_email"),getItemTypeDescription:e=>e("webapp_personal_info_edition_header_email_description"),getTitle:e=>e.itemName,vaultItemType:n.U.Email,renderForm:(e,t,a,i)=>{const s={type:t.type,itemName:t.itemName,emailAddress:t.emailAddress,spaceId:t.spaceId||""};return(0,o.tZ)(l._,{lee:e,currentValues:s,signalEditedValues:i,ref:a})}}),d=e=>{const{data:t}=(0,i.k)(s.L,"query",{vaultItemTypes:[n.U.Email],ids:[`{${e.match.params.uuid}}`]});return(0,o.tZ)(c,{...e,item:t?.emailsResult.items[0]})}},46257:(e,t,a)=>{a.d(t,{_:()=>h});var i=a(26849),s=a(22983),n=a(93853),l=a(59115),r=a(75968),o=a(42670),c=a(42521),d=a(67406),u=a(68037),m=a(36351);class h extends c.ZP{isFormValid(){return this.validateValues({emailAddress:c.Jh})}render(){var e,t;const a=this.props.lee.translate.namespace("webapp_personal_info_edition_email_"),{shouldShowFrozenStateDialog:o}=this.context,c=[{label:a("perso_type"),value:s.V.Perso},{label:a("pro_type"),value:s.V.Pro}],h=null!=(e=(0,i.find)((0,i.propEq)("value",this.state.values.type),c))?e:(0,i.head)(c);return(0,m.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"16px"},children:[(0,m.BX)(u.u,{title:a("content_card_details_label"),additionalSx:{display:"flex",flexDirection:"column",gap:"8px"},children:[(0,m.tZ)(n.n,{type:"email",required:!0,label:a("email_label"),placeholder:a("placeholder_no_email"),"data-name":"emailAddress",value:this.state.values.emailAddress,error:this.state.errors.emailAddress,onChange:this.handleChange,readOnly:!!o}),(0,m.tZ)(l.m,{label:a("type_label"),placeholder:h.label,"data-name":"type",value:h.value,onChange:e=>{this.handleChange(e,"type")},readOnly:!!o,children:c.map((e=>(0,m.tZ)(r.$,{value:e.value,children:e.label},e.value)))})]}),(0,m.BX)(u.u,{title:a("content_card_organization_label"),additionalSx:{display:"flex",flexDirection:"column",gap:"8px"},children:[(0,m.tZ)(n.n,{label:a("name_label"),placeholder:a("placeholder_no_emailName"),"data-name":"itemName",value:this.state.values.itemName,onChange:this.handleChange,readOnly:!!o}),(0,m.tZ)(d.M,{isUsingNewDesign:!0,labelSx:d.e,spaceId:null!=(t=this.state.values.spaceId)?t:"",onChange:e=>this.handleChange(e,"spaceId"),disabled:!!o})]})]})}}h.contextType=o.CQ},86816:(e,t,a)=>{a.d(t,{Y:()=>b});var i=a(96832),s=a(94138),n=a(73704),l=a(39431),r=a(14877),o=a(8180),c=a(14900),d=a(63520),u=a(82994),m=a(92077),h=a(86498),p=a(88203),g=a(45272),_=a(36351);const D={DELETE_CONFIRM:"webapp_personal_info_edition_delete_confirm",DELETE_DISMISS:"webapp_personal_info_edition_delete_dismiss",DELETE_SUBTITLE:"webapp_personal_info_edition_delete_subtitle"},S={[l.U.Address]:"address",[l.U.Company]:"company",[l.U.Email]:"email",[l.U.Identity]:"name",[l.U.Phone]:"phone-number",[l.U.Website]:"website"};function b(e){const{getItemTypeDescription:t,getDeleteTitle:a,getTitle:b,vaultItemType:f,renderForm:v}=e;return({lee:e,item:y,match:C})=>{const E=(0,i.useRef)(null),I=(0,h.V)(),{translate:T}=(0,p.Z)(),{routes:V}=(0,m.Xo)(),{updateVaultItem:w}=(0,o.u)(r.L),[A,U]=(0,i.useState)(!1),[L,P]=(0,i.useState)(!1);if((0,i.useEffect)((()=>{const e={[l.U.Address]:n.PageView.ItemAddressDetails,[l.U.Company]:n.PageView.ItemCompanyDetails,[l.U.Email]:n.PageView.ItemEmailDetails,[l.U.Identity]:n.PageView.ItemIdentityDetails,[l.U.Phone]:n.PageView.ItemPhoneDetails,[l.U.Website]:n.PageView.ItemWebsiteDetails};(0,g.Nc)(e[f])}),[]),!y)return null;const Z=()=>{(0,g.Nc)(n.PageView.ItemPersonalInfoList),(0,m.uX)(V.userPersonalInfo)},x=y?b(y,T):"",N={confirmDeleteConfirm:T(D.DELETE_CONFIRM),confirmDeleteDismiss:T(D.DELETE_DISMISS),confirmDeleteSubtitle:T(D.DELETE_SUBTITLE),confirmDeleteTitle:a(T)};return(0,_.BX)(d.zI,{isUsingNewDesign:!0,isViewingExistingItem:Boolean(C.params?.uuid),itemHasBeenEdited:A,onNavigateOut:Z,onSubmit:async()=>{y.id&&Boolean(E.current?.isFormValid())&&(await(async()=>{const e=E.current?.getValues();e&&"success"!==(await w({vaultItemType:f,content:e,id:y.id})).tag&&I.showAlert(T("_common_generic_error"),c.BLW.ERROR)})(),Z())},onClickDelete:()=>P(!0),ignoreCloseOnEscape:L,formId:"edit_personalinfo_panel",header:(0,_.tZ)(d.V9,{icon:(0,_.tZ)(s.A,{type:S[f],size:"xlarge"}),title:x,titleDescription:t(T)}),children:[v(e,y,E,(()=>U(!0))),(0,_.tZ)(u.s,{isVisible:L,itemId:y.id,closeConfirmDeleteDialog:()=>P(!1),onDeletionSuccess:Z,translations:N,vaultItemType:f})]})}}},22983:(e,t,a)=>{a.d(t,{V:()=>i});var i=function(e){return e.Perso="PERSO",e.Pro="PRO",e.NoType="NO_TYPE",e}({})}}]);