"use strict";(globalThis.webpackChunk_dashlane_leeloo=globalThis.webpackChunk_dashlane_leeloo||[]).push([[6390],{42521:(e,t,a)=>{a.d(t,{Jh:()=>o,UE:()=>n,ZP:()=>i});var l=a(96832),s=a(26849);const n=(0,s.compose)(s.not,s.isEmpty,s.trim,(0,s.defaultTo)("")),r=/.+@.+\..+/,o=e=>r.test(e.trim());class i extends l.Component{constructor(e){super(e),this.setInternalState=e=>{this.setState({internal:{...this.state.internal,...e}})},this.setUpdatedValues=e=>{const{signalEditedValues:t,onValuesUpdated:a}=this.props,l={...this.state.values,...e};this.setState({values:l},(()=>{t&&t(this.hasFormBeenEdited()),a&&a(l)}))},this.handleChange=(e,t="")=>{if(e instanceof Event&&t)throw new Error("handleChange was called with both a ChangeEvent and key.");const a=e?.target?{[e.target.dataset.name]:e.target.value}:{[t]:e};this.setUpdatedValues(a)},this.handleChanges=e=>{this.setUpdatedValues(e)},this.validateValues=e=>{if(0===Object.keys(e).length)return!0;const t=(0,s.reduce)(((t,a)=>(t[a]=e[a]?(0,s.compose)(s.not,e[a]):()=>!1,t)),{},Object.keys(this.state.values)),a=(0,s.evolve)(t,this.state.values);return this.setState({errors:a}),(0,s.all)((0,s.equals)(!1),(0,s.values)(a))},this.hasFormBeenEdited=()=>!(0,s.equals)(this.state.values,this.props.currentValues),this.getValues=()=>this.state.values;const t=Object.keys(e.currentValues).reduce(((e,t)=>(e[t]=!1,e)),{});this.state={internal:{},values:e.currentValues,errors:t}}componentDidUpdate(e){(0,s.equals)(this.props.currentValues,e.currentValues)||this.setState({values:this.props.currentValues})}}},16390:(e,t,a)=>{a.d(t,{k:()=>x}),a(96832);var l=a(44105),s=a(53334),n=a(93853),r=a(59115),o=a(75968),i=a(42670),d=a(42521),h=a(50415);let c=function(e){return e[e.DEFAULT=0]="DEFAULT",e[e.WITHSTATE=1]="WITHSTATE",e[e.NORTHAMERICA=2]="NORTHAMERICA",e[e.UNITEDKINGDOM=3]="UNITEDKINGDOM",e[e.ASIA=4]="ASIA",e[e.JAPAN=5]="JAPAN",e}({});const u=new Set([l.c.AR,l.c.BE,l.c.CH,l.c.CL,l.c.CO,l.c.DE,l.c.ES,l.c.IT,l.c.NL,l.c.NO,l.c.PE,l.c.PT,l.c.SE,l.c.MX]),p=new Set([l.c.AU,l.c.CA,l.c.US]),b=new Set([l.c.GB,l.c.IE]),m=new Set([l.c.CN,l.c.IN,l.c.KR,l.c.BR]),v=new Set([l.c.JP]),_=(0,h.x)("streetName","city","state","country","streetNumber","zipCode"),C=e=>u.has(e)?c.WITHSTATE:p.has(e)?c.NORTHAMERICA:b.has(e)?c.UNITEDKINGDOM:m.has(e)?c.ASIA:v.has(e)?c.JAPAN:c.DEFAULT;var g=a(18462),N=a(67406),y=a(24507),S=a(51031),I=a(14877),A=a(39431),E=a(88203);var T=a(36351);const O="other",D=({linkedPhoneId:e,handleChange:t,disabled:a=!1})=>{var l;const{translate:s}=(0,E.Z)(),n=(0,y.k)(I.L,"query",{vaultItemTypes:[A.U.Phone]});if(n.status!==S.rq.Success)return null;const i=n.data.phonesResult.items,d=[{value:"",label:s("webapp_personal_info_edition_address_phone_number_other")},...i.map((e=>({value:e.id,label:`${e.itemName} ${e.phoneNumber}`,selectedLabel:(0,T.BX)("span",{children:[(0,T.tZ)("span",{className:"phoneName--IP3BIyXoAF",children:e.itemName})," ",e.phoneNumber]})})))],h=null!=(l=d.find((t=>t.value===e)))?l:d[0];return(0,T.tZ)(r.m,{label:s("webapp_personal_info_edition_address_phone_number_label"),"data-name":"linkedPhoneId",onChange:e=>{t(e===O?"":e)},value:""===h.value?O:h.value,readOnly:a,children:d.map((e=>(0,T.tZ)(o.$,{displayValue:e.label,value:""===e.value?O:e.value,children:e.label},e.value)))})};var f=a(68037),F=a(48094);class x extends d.ZP{isFormValid(){return this.validateValues({streetName:d.UE})}buildCountryOptionList(){return Object.keys(l.c).filter((e=>e!==l.c[l.c.NO_TYPE]&&e!==l.c[l.c.UNIVERSAL])).map((e=>({value:l.c[e],label:(0,g.go)(this.props.lee.translate,l.c[e])}))).sort(((e,t)=>e.label.localeCompare(t.label,this.props.lee.translate.getLocale())))}buildStateOptionListForCountry(e){var t;const a=null!=(t=(null!=s.j?s.j:{})[e])?t:{};return Object.keys(a).map((e=>({value:e,label:a[e].name}))).sort(((e,t)=>e.label<t.label?-1:1))}renderStreetName(e){const{shouldShowFrozenStateDialog:t}=this.context;return(0,T.tZ)(n.n,{required:!0,label:e("full_address_label"),placeholder:e("placeholder_no_full_address"),"data-name":"streetName",value:this.state.values.streetName,onChange:this.handleChange,error:this.state.errors.streetName,readOnly:!!t},"streetName")}renderZipCode(e){const{shouldShowFrozenStateDialog:t}=this.context;return(0,T.tZ)(n.n,{label:e("zip_code_label"),placeholder:e("placeholder_no_zip_code"),"data-name":"zipCode",value:this.state.values.zipCode,onChange:this.handleChange,readOnly:!!t},"zipCode")}renderCity(e){const{shouldShowFrozenStateDialog:t}=this.context;return(0,T.tZ)(n.n,{label:e("city_label"),placeholder:e("placeholder_no_city"),"data-name":"city",value:this.state.values.city,onChange:this.handleChange,readOnly:!!t},"city")}renderState(e){const t=this.buildStateOptionListForCountry(this.state.values.localeFormat),a=t.find((e=>e.value===this.state.values.state)),{shouldShowFrozenStateDialog:l}=this.context;return(0,T.tZ)(r.m,{label:C(this.state.values.localeFormat)===c.UNITEDKINGDOM?e("county_label"):e("state_label"),"data-name":"state",value:a?.value,placeholder:this.state.values.state,onChange:e=>this.handleChange(e,"state"),readOnly:!!l,children:t.map((e=>(0,T.tZ)(o.$,{value:e.value,children:e.label},e.value)))},`states_${this.state.values.localeFormat}`)}renderCountry(e){var t;const a=this.buildCountryOptionList(),l=null!=(t=a.find((e=>e.value===this.state.values.localeFormat)))?t:a[0],{shouldShowFrozenStateDialog:s}=this.context;return(0,T.tZ)(F.D,{label:e("country_label"),placeholder:l.label,value:l.value,disabled:s,options:a,onChange:e=>{const t=e,a=this.buildStateOptionListForCountry(t);this.handleChanges({localeFormat:t,state:a&&Object.keys(a).length?Object.keys(a)[0]:""})}})}renderStreetNumber(e){const{shouldShowFrozenStateDialog:t}=this.context;return(0,T.tZ)(n.n,{label:e("street_number_label"),placeholder:e("placeholder_no_street_number"),"data-name":"streetNumber",value:this.state.values.streetNumber,onChange:this.handleChange,disabled:!!t},"streetNumber")}renderLocalizedFields(){const e=this.props.lee.translate.namespace("webapp_personal_info_edition_address_"),t={[_.streetName]:this.renderStreetName,[_.city]:this.renderCity,[_.country]:this.renderCountry,[_.zipCode]:this.renderZipCode,[_.streetNumber]:this.renderStreetNumber,[_.state]:this.renderState};return(e=>{const t=C(e);return t===c.NORTHAMERICA?[_.streetName,_.city,_.state,_.zipCode,_.country]:t===c.UNITEDKINGDOM?[_.streetNumber,_.streetName,_.city,_.state,_.zipCode,_.country]:t===c.ASIA?[_.streetName,_.city,_.zipCode,_.country]:t===c.JAPAN?[_.zipCode,_.city,_.streetName,_.country]:t===c.WITHSTATE?[_.streetName,_.zipCode,_.city,_.state,_.country]:[_.streetName,_.zipCode,_.city,_.country]})(this.state.values.localeFormat).map((a=>a in t?t[a].call(this,e):null))}render(){var e;const t=this.props.lee.translate.namespace("webapp_personal_info_edition_address_"),{shouldShowFrozenStateDialog:a}=this.context;return(0,T.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"16px"},children:[(0,T.BX)(f.u,{title:t("content_card_details_label"),additionalSx:{display:"flex",flexDirection:"column",gap:"8px"},children:[this.renderLocalizedFields(),(0,T.tZ)(n.n,{label:t("receiver_label"),placeholder:t("placeholder_no_receiver"),"data-name":"receiver",value:this.state.values.receiver,onChange:this.handleChange,disabled:!!a}),(0,T.tZ)(n.n,{label:t("building_label"),placeholder:t("placeholder_no_building"),"data-name":"building",value:this.state.values.building,onChange:this.handleChange,disabled:!!a}),(0,T.tZ)(n.n,{label:t("floor_label"),placeholder:t("placeholder_no_floor"),"data-name":"floor",value:this.state.values.floor,onChange:this.handleChange,disabled:!!a}),(0,T.tZ)(n.n,{label:t("door_label"),placeholder:t("placeholder_no_door"),"data-name":"door",value:this.state.values.door,onChange:this.handleChange,disabled:!!a}),(0,T.tZ)(n.n,{label:t("digit_code_label"),placeholder:t("placeholder_no_digit_code"),"data-name":"digitCode",value:this.state.values.digitCode,onChange:this.handleChange,disabled:!!a}),(0,T.tZ)(D,{linkedPhoneId:this.state.values.linkedPhoneId,handleChange:e=>this.handleChange(e,"linkedPhoneId"),disabled:!!a})]}),(0,T.BX)(f.u,{title:t("content_card_organization_label"),additionalSx:{display:"flex",flexDirection:"column",gap:"8px"},children:[(0,T.tZ)(n.n,{label:t("name_label"),placeholder:t("placeholder_no_name"),"data-name":"itemName",value:this.state.values.itemName,onChange:this.handleChange,disabled:!!a}),(0,T.tZ)(N.M,{isUsingNewDesign:!0,labelSx:N.e,spaceId:null!=(e=this.state.values.spaceId)?e:"",onChange:e=>this.handleChange(e,"spaceId"),disabled:!!a})]})]})}}x.contextType=i.CQ}}]);